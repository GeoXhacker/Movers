/*! For license information please see app.js.LICENSE.txt */
!function(){var e={7757:function(e,t,r){e.exports=r(5666)},4532:function(e,t,r){"use strict";var n=r(3310),a=r(7529),i="value",o="\n  ",s={};function l(e){var t=Array.isArray(e);return function(r){var n,a=c(s.plainArray,r);if(a)return a;if(t&&r.length!==e.length)return"an array with "+e.length+" items";for(var i=0;i<r.length;i++)if(a=c((n=i,t?e[n]:e),r[i]))return[i].concat(a)}}function c(e,t){if(null!=t||e.hasOwnProperty("__required")){var r=e(t);return r?Array.isArray(r)?r:[r]:void 0}}function u(e,t){var r=e.length,n=e[r-1],o=e.slice(0,r-1);return 0===o.length&&(o=[i]),t=a(t,{path:o}),"function"==typeof n?n(t):d(t,function(e){return"must be "+function(e){if(/^an? /.test(e))return e;if(/^[aeiou]/i.test(e))return"an "+e;if(/^[a-z]/i.test(e))return"a "+e;return e}(e)+"."}(n))}function p(e){return e.length<2?e[0]:2===e.length?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e.slice(-1)}function d(e,t){return(h(e.path)?"Item at position ":"")+(e.path.join(".")+" "+t)}function h(e){return"number"==typeof e[e.length-1]||"number"==typeof e[0]}s.assert=function(e,t){return t=t||{},function(r){var n=c(e,r);if(n){var a=u(n,t);throw t.apiName&&(a=t.apiName+": "+a),new Error(a)}}},s.shape=function(e){var t,r=(t=e,Object.keys(t||{}).map((function(e){return{key:e,value:t[e]}})));return function(e){var t,n=c(s.plainObject,e);if(n)return n;for(var a=[],l=0;l<r.length;l++)t=r[l].key,(n=c(r[l].value,e[t]))&&a.push([t].concat(n));return a.length<2?a[0]:function(e){a=a.map((function(t){return"- "+t[0]+": "+u(t,e).split("\n").join(o)}));var t=e.path.join(".");return"The following properties"+(t===i?"":" of "+t)+" have invalid values:"+o+a.join(o)}}},s.strictShape=function(e){var t=s.shape(e);return function(r){var n=t(r);if(n)return n;var a=Object.keys(r).reduce((function(t,r){return void 0===e[r]&&t.push(r),t}),[]);return 0!==a.length?function(){return"The following keys are invalid: "+a.join(", ")}:void 0}},s.arrayOf=function(e){return l(e)},s.tuple=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return l(e)},s.required=function(e){function t(t){return null==t?function(e){return d(e,h(e.path)?"cannot be undefined/null.":"is required.")}:e.apply(this,arguments)}return t.__required=!0,t},s.oneOfType=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(t){var r=e.map((function(e){return c(e,t)})).filter(Boolean);if(r.length===e.length)return r.every((function(e){return 1===e.length&&"string"==typeof e[0]}))?p(r.map((function(e){return e[0]}))):r.reduce((function(e,t){return t.length>e.length?t:e}))}},s.equal=function(e){return function(t){if(t!==e)return JSON.stringify(e)}},s.oneOf=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),t=e.map((function(e){return s.equal(e)}));return s.oneOfType.apply(this,t)},s.range=function(e){var t=e[0],r=e[1];return function(e){if(c(s.number,e)||e<t||e>r)return"number between "+t+" & "+r+" (inclusive)"}},s.any=function(){},s.boolean=function(e){if("boolean"!=typeof e)return"boolean"},s.number=function(e){if("number"!=typeof e)return"number"},s.plainArray=function(e){if(!Array.isArray(e))return"array"},s.plainObject=function(e){if(!n(e))return"object"},s.string=function(e){if("string"!=typeof e)return"string"},s.func=function(e){if("function"!=typeof e)return"function"},s.validate=c,s.processMessage=u,e.exports=s},8236:function(e,t,r){"use strict";var n=r(9042);function a(e){this.origin=e.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=e.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=e,this.send=this.send.bind(this),this.countries=e.countries?e.countries.split(","):null,this.types=e.types?e.types.split(","):null,this.bbox=e.bbox?e.bbox:null,this.language=e.language?e.language.split(","):null,this.limit=e.limit?+e.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(e),this.eventQueue=new Array,this.flushInterval=e.flushInterval||1e3,this.maxQueueSize=e.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}a.prototype={select:function(e,t){var r=this.getSelectedIndex(e,t),n=this.getEventPayload("search.select",t);if(n.resultIndex=r,n.resultPlaceName=e.place_name,n.resultId=e.id,(r!==this.lastSentIndex||n.queryString!==this.lastSentInput)&&-1!=r&&(this.lastSentIndex=r,this.lastSentInput=n.queryString,n.queryString))return this.push(n)},start:function(e){var t=this.getEventPayload("search.start",e);if(t.queryString)return this.push(t)},keyevent:function(e,t){if(e.key&&!e.metaKey&&-1===[9,27,37,39,13,38,40].indexOf(e.keyCode)){var r=this.getEventPayload("search.keystroke",t);if(r.lastAction=e.key,r.queryString)return this.push(r)}},send:function(e,t){if(!this.enableEventLogging)return t?t():void 0;var r=this.getRequestOptions(e);this.request(r,function(e){return e?this.handleError(e,t):t?t():void 0}.bind(this))},getRequestOptions:function(e){return Array.isArray(e)||(e=[e]),{method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}},getEventPayload:function(e,t){var r;r=t.options.proximity?[t.options.proximity.longitude,t.options.proximity.latitude]:null;var n=t._map?t._map.getZoom():void 0,a={event:e,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",proximity:r,limit:t.options.limit,mapZoom:n,keyboardLocale:this.locale};return"search.select"===e?a.queryString=t.inputString:"search.select"!=e&&t._inputEl?a.queryString=t._inputEl.value:a.queryString=t.inputString,a},request:function(e,t){var r=new XMLHttpRequest;for(var n in r.onreadystatechange=function(){if(4==this.readyState)return 204==this.status?t(null):t(this.statusText)},r.open(e.method,e.host+"/"+e.path,!0),e.headers){var a=e.headers[n];r.setRequestHeader(n,a)}r.send(e.body)},handleError:function(e,t){if(t)return t(e)},generateSessionID:function(){return n()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(e,t){if(t._typeahead){var r=t._typeahead.data,n=e.id;return r.map((function(e){return e.id})).indexOf(n)}},shouldEnableLogging:function(e){return!1!==e.enableEventLogging&&((!e.origin||-1!=e.origin.indexOf("api.mapbox.com"))&&(!e.localGeocoder&&!e.filter))},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(e,t){this.eventQueue.push(e),(this.eventQueue.length>=this.maxQueueSize||t)&&this.flush()},remove:function(){this.flush()}},e.exports=a},6630:function(e){e.exports={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}}},9651:function(e,t,r){"use strict";var n=r(504),a=r(1296),i=r(7529),o=r(7187).EventEmitter,s=r(6630),l=r(4010),c=r(2081),u=r(8236),p=r(2227),d=r(4395);const h=0,f=1,m=2;function g(e){this._eventEmitter=new o,this.options=i({},this.options,e),this.inputString="",this.fresh=!0,this.lastSelected=null}g.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,getItemValue:function(e){return e.place_name},render:function(e){var t=e.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+t[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+t.splice(1,t.length).join(",")+"</div></div>"}},addTo:function(e){function t(e,t){if(!document.body.contains(t))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const r=e.onAdd();t.appendChild(r)}if(e._controlContainer)e.addControl(this);else if(e instanceof HTMLElement)t(this,e);else{if("string"!=typeof e)throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element");{const r=document.querySelectorAll(e);if(0===r.length)throw new Error("Element ",e,"not found.");if(r.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,r[0])}}},onAdd:function(e){if(e&&"string"!=typeof e&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=c(l({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new u(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);var t=this.container=document.createElement("div");t.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var r=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",a(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(e){this.eventManager.keyevent(e,this)}.bind(this));var i=document.createElement("div");i.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var o=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(o),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),i.appendChild(this._clearEl),i.appendChild(this._loadingEl),t.appendChild(r),t.appendChild(this._inputEl),t.appendChild(i),this._typeahead=new n(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),t},createIcon:function(e,t){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");if(r.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+e),r.setAttribute("viewBox","0 0 18 18"),r.setAttribute("xml:space","preserve"),r.setAttribute("width",18),r.setAttribute("height",18),"innerHTML"in r)r.innerHTML=t;else{var n=document.createElement("div");n.innerHTML="<svg>"+t.valueOf().toString()+"</svg>";var a=n.firstChild.firstChild;r.appendChild(a)}return r},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_onPaste:function(e){var t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this._geocode(t)},_onKeyDown:function(e){var t=27,r=9;if(e.keyCode===t&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();var n=e.target&&e.target.shadowRoot?e.target.shadowRoot.activeElement:e.target;if(!(n?n.value:""))return this.fresh=!0,e.keyCode!==r&&this.clear(e),this._clearEl.style.display="none";e.metaKey||-1!==[r,t,37,39,13,38,40].indexOf(e.keyCode)||n.value.length>=this.options.minLength&&this._geocode(n.value)},_showButton:function(){this._typeahead.selected&&(this._clearEl.style.display="block")},_hideButton:function(){this._typeahead.selected&&(this._clearEl.style.display="none")},_onBlur:function(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()},_onChange:function(){var e=this._typeahead.selected;if(e&&JSON.stringify(e)!==this.lastSelected){var t;if(this._clearEl.style.display="none",this.options.flyTo)if(e.properties&&s[e.properties.short_code])t=i({},this.options.flyTo),this._map&&this._map.fitBounds(s[e.properties.short_code].bbox,t);else if(e.bbox){var r=e.bbox;t=i({},this.options.flyTo),this._map&&this._map.fitBounds([[r[0],r[1]],[r[2],r[3]]],t)}else{var n={zoom:this.options.zoom};t=i({},n,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&"Point"===e.geometry.type&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}this.options.marker&&this._mapboxgl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._eventEmitter.emit("result",{result:e}),this.eventManager.select(e,this)}},_requestType:function(e,t){return e.localGeocoderOnly?f:e.reverseGeocode&&/^[ ]*(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/.test(t)?m:h},_setupConfig:function(e,t){const r=/[\s,]+/;var n=this,a=["bbox","limit","proximity","countries","types","language","reverseMode","mode"].reduce((function(e,t){if(!n.options[t])return e;["countries","types","language"].indexOf(t)>-1?e[t]=n.options[t].split(r):e[t]=n.options[t];const a="number"==typeof n.options[t].longitude&&"number"==typeof n.options[t].latitude;if("proximity"===t&&a){const r=n.options[t].longitude,a=n.options[t].latitude;e[t]=[r,a]}return e}),{});switch(e){case m:var o=t.split(r).map((function(e){return parseFloat(e,10)})).reverse();!a.types||a.types[0],"proximity"in(a=i(a,{query:o,limit:1}))&&delete a.proximity;break;case h:/^[ ]*(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)*[ ]*$/.test(t)&&(t=t.replace(/,/g," ")),a=i(a,{query:t})}return a},_geocode:function(e){this.inputString=e,this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:e});const t=this._requestType(this.options,e),r=this._setupConfig(t,e);var n;switch(t){case f:n=Promise.resolve();break;case h:n=this.geocoderService.forwardGeocode(r).send();break;case m:n=this.geocoderService.reverseGeocode(r).send()}var a=this.options.localGeocoder&&this.options.localGeocoder(e)||[],i=[],o=null;return n.catch(function(e){o=e}.bind(this)).then(function(t){this._loadingEl.style.display="none";var n={};return t?"200"==t.statusCode&&((n=t.body).request=t.request,n.headers=t.headers):n={type:"FeatureCollection",features:[]},n.config=r,this.fresh&&(this.eventManager.start(this),this.fresh=!1),n.features=n.features?a.concat(n.features):a,this.options.externalGeocoder?(i=this.options.externalGeocoder(e,n.features)||[]).then((function(e){return n.features=n.features?e.concat(n.features):e,n}),(function(){return n})):n}.bind(this)).then(function(e){if(o)throw o;this.options.filter&&e.features.length&&(e.features=e.features.filter(this.options.filter)),e.features.length?(this._clearEl.style.display="block",this._eventEmitter.emit("results",e),this._typeahead.update(e.features)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",e))}.bind(this)).catch(function(e){this._loadingEl.style.display="none",a.length&&this.options.localGeocoder||i.length&&this.options.externalGeocoder?(this._clearEl.style.display="block",this._typeahead.update(a)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:a}),this._eventEmitter.emit("error",{error:e})}.bind(this)),n},_clear:function(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(e){this._clear(e),this._inputEl.focus()},_clearOnBlur:function(e){e.relatedTarget&&this._clear(e)},_onQueryResult:function(e){var t=e.body;if(t.features.length){var r=t.features[0];this._typeahead.selected=r,this._inputEl.value=r.place_name,this._onChange()}},_updateProximity:function(){if(this._map)if(this._map.getZoom()>9){var e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat})}else this.setProximity(null)},_collapse:function(){this._inputEl.value||this._inputEl===document.activeElement||this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(e){return this._geocode(e).then(this._onQueryResult),this},_renderError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>")},_renderNoResults:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>")},_renderMessage:function(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var e=this.options.language.split(",")[0],t=d.language(e),r=p.placeholder[t];if(r)return r}return"Search"},setInput:function(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this._geocode(e),this},setProximity:function(e){return this.options.proximity=e,this},getProximity:function(){return this.options.proximity},setRenderFunction:function(e){return e&&"function"==typeof e&&(this._typeahead.render=e),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(e){var t=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=e||this.options.language||t,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(e){return this.options.zoom=e,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(e){return this.options.flyTo=e,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(e){return this.placeholder=e||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(e){return this.options.bbox=e,this},getCountries:function(){return this.options.countries},setCountries:function(e){return this.options.countries=e,this},getTypes:function(){return this.options.types},setTypes:function(e){return this.options.types=e,this},getMinLength:function(){return this.options.minLength},setMinLength:function(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this},getLimit:function(){return this.options.limit},setLimit:function(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this},getFilter:function(){return this.options.filter},setFilter:function(e){return this.options.filter=e,this},setOrigin:function(e){return this.options.origin=e,this.geocoderService=c(l({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},_handleMarker:function(e){if(this._map){this._removeMarker();var t=i({},{color:"#4668F2"},this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(t),e.center?this.mapMarker.setLngLat(e.center).addTo(this._map):e.geometry&&e.geometry.type&&"Point"===e.geometry.type&&e.geometry.coordinates&&this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(e,t){return this._eventEmitter.on(e,t),this},off:function(e,t){return this._eventEmitter.removeListener(e,t),this.eventManager.remove(),this}},e.exports=g},2227:function(e){"use strict";e.exports={placeholder:{de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"לחפש",ja:"サーチ",lv:"Meklēt",pt:"Procurar",sr:"Претрага",zh:"搜索",cs:"Vyhledávání",hu:"Keresés",ka:"ძიება",nb:"Søke",sk:"Vyhľadávanie",th:"ค้นหา",fi:"Hae",is:"Leita",ko:"수색",pl:"Szukaj",sl:"Iskanje",fa:"جستجو",ru:"Поиск"}}},9042:function(e){for(var t=self.crypto||self.msCrypto,r="-_",n=36;n--;)r+=n.toString(36);for(n=36;n---10;)r+=n.toString(36).toUpperCase();e.exports=function(e){var a="",i=t.getRandomValues(new Uint8Array(e||21));for(n=e||21;n--;)a+=r[63&i[n]];return a}},4010:function(e,t,r){"use strict";var n=r(2543);e.exports=n},2543:function(e,t,r){"use strict";var n=r(9366),a=r(8503);function i(e){a.call(this,e)}i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.prototype.sendRequest=n.browserSend,i.prototype.abortRequest=n.browserAbort,e.exports=function(e){return new i(e)}},9366:function(e,t,r){"use strict";var n=r(6293),a=r(4404),i=r(1835),o=r(9614),s={};function l(e){var t=e.total,r=e.loaded;return{total:t,transferred:r,percent:100*r/t}}function c(e,t){return new Promise((function(r,n){t.onprogress=function(t){e.emitter.emit(i.EVENT_PROGRESS_DOWNLOAD,l(t))};var o=e.file;o&&(t.upload.onprogress=function(t){e.emitter.emit(i.EVENT_PROGRESS_UPLOAD,l(t))}),t.onerror=function(e){n(e)},t.onabort=function(){var t=new a({request:e,type:i.ERROR_REQUEST_ABORTED});n(t)},t.onload=function(){if(delete s[e.id],t.status<200||t.status>=400){var i=new a({request:e,body:t.response,statusCode:t.status});n(i)}else r(t)};var c=e.body;"string"==typeof c?t.send(c):c?t.send(JSON.stringify(c)):o?t.send(o):t.send(),s[e.id]=t})).then((function(t){return function(e,t){return new n(e,{body:t.response,headers:o(t.getAllResponseHeaders()),statusCode:t.status})}(e,t)}))}function u(e,t){var r=e.url(t),n=new window.XMLHttpRequest;return n.open(e.method,r),Object.keys(e.headers).forEach((function(t){n.setRequestHeader(t,e.headers[t])})),n}e.exports={browserAbort:function(e){var t=s[e.id];t&&(t.abort(),delete s[e.id])},sendRequestXhr:c,browserSend:function(e){return Promise.resolve().then((function(){var t=u(e,e.client.accessToken);return c(e,t)}))},createRequestXhr:u}},8503:function(e,t,r){"use strict";var n=r(4713),a=r(5225),i=r(1835);function o(e){if(!e||!e.accessToken)throw new Error("Cannot create a client without an access token");n(e.accessToken),this.accessToken=e.accessToken,this.origin=e.origin||i.API_ORIGIN}o.prototype.createRequest=function(e){return new a(this,e)},e.exports=o},4404:function(e,t,r){"use strict";var n=r(1835);e.exports=function(e){var t,r=e.type||n.ERROR_HTTP;if(e.body)try{t=JSON.parse(e.body)}catch(r){t=e.body}else t=null;var a=e.message||null;a||("string"==typeof t?a=t:t&&"string"==typeof t.message?a=t.message:r===n.ERROR_REQUEST_ABORTED&&(a="Request aborted")),this.message=a,this.type=r,this.statusCode=e.statusCode||null,this.request=e.request,this.body=t}},5225:function(e,t,r){"use strict";var n=r(4713),a=r(7529),i=r(1292),o=r(5959),s=r(1835),l=1;function c(e,t){if(!e)throw new Error("MapiRequest requires a client");if(!t||!t.path||!t.method)throw new Error("MapiRequest requires an options object with path and method properties");var r={};t.body&&(r["content-type"]="application/json");var n=a(r,t.headers),o=Object.keys(n).reduce((function(e,t){return e[t.toLowerCase()]=n[t],e}),{});this.id=l++,this._options=t,this.emitter=new i,this.client=e,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=t.path,this.method=t.method,this.origin=t.origin||e.origin,this.query=t.query||{},this.params=t.params||{},this.body=t.body||null,this.file=t.file||null,this.encoding=t.encoding||"utf8",this.sendFileAs=t.sendFileAs||null,this.headers=o}c.prototype.url=function(e){var t=o.prependOrigin(this.path,this.origin);t=o.appendQueryObject(t,this.query);var r=this.params,i=null==e?this.client.accessToken:e;if(i){t=o.appendQueryParam(t,"access_token",i);var s=n(i).user;r=a({ownerId:s},r)}return t=o.interpolateRouteParams(t,r),t},c.prototype.send=function(){var e=this;if(e.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return e.sent=!0,e.client.sendRequest(e).then((function(t){return e.response=t,e.emitter.emit(s.EVENT_RESPONSE,t),t}),(function(t){throw e.error=t,e.emitter.emit(s.EVENT_ERROR,t),t}))},c.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),this.response||this.error||this.aborted||(this.aborted=!0,this.client.abortRequest(this))},c.prototype.eachPage=function(e){var t=this;function r(r){e(null,r,(function(){delete t._nextPageRequest;var e=r.nextPage();e&&(t._nextPageRequest=e,a(e))}))}function n(t){e(t,null,(function(){}))}function a(e){e.send().then(r,n)}a(this)},c.prototype.clone=function(){return this._extend()},c.prototype._extend=function(e){var t=a(this._options,e);return new c(this.client,t)},e.exports=c},6293:function(e,t,r){"use strict";var n=r(4626);function a(e,t){this.request=e,this.headers=t.headers,this.rawBody=t.body,this.statusCode=t.statusCode;try{this.body=JSON.parse(t.body||"{}")}catch(e){this.body=t.body}this.links=n(this.headers.link)}a.prototype.hasNextPage=function(){return!!this.links.next},a.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null},e.exports=a},1835:function(e){"use strict";e.exports={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"}},9614:function(e){"use strict";e.exports=function(e){var t={};return e?(e.trim().split(/[\r|\n]+/).forEach((function(e){var r=function(e){var t=e.indexOf(":");return{name:e.substring(0,t).trim().toLowerCase(),value:e.substring(t+1).trim()}}(e);t[r.name]=r.value})),t):t}},4626:function(e){"use strict";e.exports=function(e){return e?e.split(/,\s*</).reduce((function(e,t){var r=function(e){var t=e.match(/<?([^>]*)>(.*)/);if(!t)return null;var r=t[1],n=t[2].split(";"),a=null,i=n.reduce((function(e,t){var r=function(e){var t=e.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return t?{key:t[1],value:t[2]}:null}(t);return r?"rel"===r.key?(a||(a=r.value),e):(e[r.key]=r.value,e):e}),{});return a?{url:r,rel:a,params:i}:null}(t);return r?(r.rel.split(/\s+/).forEach((function(t){e[t]||(e[t]={url:r.url,params:r.params})})),e):e}),{}):{}}},5959:function(e){"use strict";function t(e){return Array.isArray(e)?e.map(encodeURIComponent).join(","):encodeURIComponent(String(e))}function r(e,r,n){if(!1===n||null===n)return e;var a=/\?/.test(e)?"&":"?",i=encodeURIComponent(r);return void 0!==n&&""!==n&&!0!==n&&(i+="="+t(n)),""+e+a+i}e.exports={appendQueryObject:function(e,t){if(!t)return e;var n=e;return Object.keys(t).forEach((function(e){var a=t[e];void 0!==a&&(Array.isArray(a)&&(a=a.filter((function(e){return null!=e})).join(",")),n=r(n,e,a))})),n},appendQueryParam:r,prependOrigin:function(e,t){if(!t)return e;if("http"===e.slice(0,4))return e;var r="/"===e[0]?"":"/";return""+t.replace(/\/$/,"")+r+e},interpolateRouteParams:function(e,r){return r?e.replace(/\/:([a-zA-Z0-9]+)/g,(function(e,n){var a=r[n];if(void 0===a)throw new Error("Unspecified route parameter "+n);return"/"+t(a)})):e}}},1292:function(e){"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(e,t,n,i,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new a(n,i||e,o),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),s.prototype.eventNames=function(){var e,n,a=[];if(0===this._eventsCount)return a;for(n in e=this._events)t.call(e,n)&&a.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},s.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var a=0,i=n.length,o=new Array(i);a<i;a++)o[a]=n[a].fn;return o},s.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,a,i,o){var s=r?r+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],p=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),p){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,a),!0;case 5:return u.fn.call(u.context,t,n,a,i),!0;case 6:return u.fn.call(u.context,t,n,a,i,o),!0}for(c=1,l=new Array(p-1);c<p;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var d,h=u.length;for(c=0;c<h;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),p){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,a);break;default:if(!l)for(d=1,l=new Array(p-1);d<p;d++)l[d-1]=arguments[d];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,r){return i(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return i(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,n,a){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return o(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||a&&!s.once||n&&s.context!==n||o(this,i);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||a&&!s[l].once||n&&s[l].context!==n)&&c.push(s[l]);c.length?this._events[i]=1===c.length?c[0]:c:o(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s},2081:function(e,t,r){"use strict";var n=r(7529),a=r(1222),i=r(2497),o=r(3886),s=r(3222),l={},c=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];l.forwardGeocode=function(e){a.assertShape({query:a.required(a.string),mode:a.oneOf("mapbox.places","mapbox.places-permanent"),countries:a.arrayOf(a.string),proximity:a.coordinates,types:a.arrayOf(a.oneOf(c)),autocomplete:a.boolean,bbox:a.arrayOf(a.number),limit:a.number,language:a.arrayOf(a.string),routing:a.boolean})(e),e.mode=e.mode||"mapbox.places";var t=o(n({country:e.countries},i(e,["proximity","types","autocomplete","bbox","limit","language","routing"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:i(e,["mode","query"]),query:t})},l.reverseGeocode=function(e){a.assertShape({query:a.required(a.coordinates),mode:a.oneOf("mapbox.places","mapbox.places-permanent"),countries:a.arrayOf(a.string),types:a.arrayOf(a.oneOf(c)),bbox:a.arrayOf(a.number),limit:a.number,language:a.arrayOf(a.string),reverseMode:a.oneOf("distance","score"),routing:a.boolean})(e),e.mode=e.mode||"mapbox.places";var t=o(n({country:e.countries},i(e,["country","types","bbox","limit","language","reverseMode","routing"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:i(e,["mode","query"]),query:t})},e.exports=s(l)},3222:function(e,t,r){"use strict";var n=r(8503),a=r(2543);e.exports=function(e){return function(t){var r;r=n.prototype.isPrototypeOf(t)?t:a(t);var i=Object.create(e);return i.client=r,i}}},4436:function(e){"use strict";e.exports=function(e,t){return Object.keys(e).reduce((function(r,n){return r[n]=t(n,e[n]),r}),{})}},2497:function(e){"use strict";e.exports=function(e,t){var r=function(e,r){return-1!==t.indexOf(e)&&void 0!==r};return"function"==typeof t&&(r=t),Object.keys(e).filter((function(t){return r(t,e[t])})).reduce((function(t,r){return t[r]=e[r],t}),{})}},3886:function(e,t,r){"use strict";var n=r(4436);e.exports=function(e){return n(e,(function(e,t){return"boolean"==typeof t?JSON.stringify(t):t}))}},1222:function(e,t,r){"use strict";var n=r(7529),a=r(4532);e.exports=n(a,{file:function(e){if("undefined"!=typeof window){if(e instanceof r.g.Blob||e instanceof r.g.ArrayBuffer)return;return"Blob or ArrayBuffer"}if("string"!=typeof e&&void 0===e.pipe)return"Filename or Readable stream"},date:function(e){var t="date";if("boolean"==typeof e)return t;try{var r=new Date(e);if(r.getTime&&isNaN(r.getTime()))return t}catch(e){return t}},coordinates:function(e){return a.tuple(a.number,a.number)(e)},assertShape:function(e,t){return a.assert(a.strictShape(e),t)}})},4713:function(e,t,r){"use strict";var n=r(7501),a={};function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e){if(a[e])return a[e];var t=e.split("."),r=t[0],o=t[1];if(!o)throw new Error("Invalid token");var s=function(e){try{return JSON.parse(n.decode(e))}catch(e){throw new Error("Invalid token")}}(o),l={usage:r,user:s.u};return i(s,"a")&&(l.authorization=s.a),i(s,"exp")&&(l.expires=1e3*s.exp),i(s,"iat")&&(l.created=1e3*s.iat),i(s,"scopes")&&(l.scopes=s.scopes),i(s,"client")&&(l.client=s.client),i(s,"ll")&&(l.lastLogin=s.ll),i(s,"iu")&&(l.impersonator=s.iu),a[e]=l,l}},7913:function(e){function t(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=t,t.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-r:e+r}return 0|Math.min(e,this.max)},t.prototype.reset=function(){this.attempts=0},t.prototype.setMin=function(e){this.ms=e},t.prototype.setMax=function(e){this.max=e},t.prototype.setJitter=function(e){this.jitter=e}},7501:function(e,t,r){var n;e=r.nmd(e),function(a){var i=t,o=(e&&e.exports,"object"==typeof r.g&&r.g);o.global!==o&&o.window;var s=function(e){this.message=e};(s.prototype=new Error).name="InvalidCharacterError";var l=function(e){throw new s(e)},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=/[\t\n\f\r ]/g,p={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&l("The string to be encoded contains characters outside of the Latin1 range.");for(var t,r,n,a,i=e.length%3,o="",s=-1,u=e.length-i;++s<u;)t=e.charCodeAt(s)<<16,r=e.charCodeAt(++s)<<8,n=e.charCodeAt(++s),o+=c.charAt((a=t+r+n)>>18&63)+c.charAt(a>>12&63)+c.charAt(a>>6&63)+c.charAt(63&a);return 2==i?(t=e.charCodeAt(s)<<8,r=e.charCodeAt(++s),o+=c.charAt((a=t+r)>>10)+c.charAt(a>>4&63)+c.charAt(a<<2&63)+"="):1==i&&(a=e.charCodeAt(s),o+=c.charAt(a>>2)+c.charAt(a<<4&63)+"=="),o},decode:function(e){var t=(e=String(e).replace(u,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&l("Invalid character: the string to be decoded is not correctly encoded.");for(var r,n,a=0,i="",o=-1;++o<t;)n=c.indexOf(e.charAt(o)),r=a%4?64*r+n:n,a++%4&&(i+=String.fromCharCode(255&r>>(-2*a&6)));return i},version:"0.1.0"};void 0===(n=function(){return p}.call(t,r,t,e))||(e.exports=n)}()},3704:function(e,t){!function(e){"use strict";t.encode=function(t){var r,n=new Uint8Array(t),a=n.length,i="";for(r=0;r<a;r+=3)i+=e[n[r]>>2],i+=e[(3&n[r])<<4|n[r+1]>>4],i+=e[(15&n[r+1])<<2|n[r+2]>>6],i+=e[63&n[r+2]];return a%3==2?i=i.substring(0,i.length-1)+"=":a%3==1&&(i=i.substring(0,i.length-2)+"=="),i},t.decode=function(t){var r,n,a,i,o,s=.75*t.length,l=t.length,c=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var u=new ArrayBuffer(s),p=new Uint8Array(u);for(r=0;r<l;r+=4)n=e.indexOf(t[r]),a=e.indexOf(t[r+1]),i=e.indexOf(t[r+2]),o=e.indexOf(t[r+3]),p[c++]=n<<2|a>>4,p[c++]=(15&a)<<4|i>>2,p[c++]=(3&i)<<6|63&o;return u}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},8767:function(e){function t(e){if(e)return function(e){for(var r in t.prototype)e[r]=t.prototype[r];return e}(e)}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var a=0;a<n.length;a++)if((r=n[a])===t||r.fn===t){n.splice(a,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){n=0;for(var a=(r=r.slice(0)).length;n<a;++n)r[n].apply(this,t)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}},6511:function(e,t,r){"use strict";var n=r(7418),a={};function i(e,t,r,n,a,i,o,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,a,i,o,s],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}var o="mixins";e.exports=function(e,t,r){var s=[],l={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},c={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},u={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var r=0;r<t.length;r++)d(e,t[r])},childContextTypes:function(e,t){e.childContextTypes=n({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=n({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=f(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=n({},e.propTypes,t)},statics:function(e,t){!function(e,t){if(!t)return;for(var r in t){var n=t[r];if(t.hasOwnProperty(r)){if(i(!(r in u),'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',r),r in e)return i("DEFINE_MANY_MERGED"===(c.hasOwnProperty(r)?c[r]:null),"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",r),void(e[r]=f(e[r],n));e[r]=n}}}(e,t)},autobind:function(){}};function p(e,t){var r=l.hasOwnProperty(t)?l[t]:null;b.hasOwnProperty(t)&&i("OVERRIDE_BASE"===r,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&i("DEFINE_MANY"===r||"DEFINE_MANY_MERGED"===r,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function d(e,r){if(r){i("function"!=typeof r,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),i(!t(r),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var n=e.prototype,a=n.__reactAutoBindPairs;for(var s in r.hasOwnProperty(o)&&u.mixins(e,r.mixins),r)if(r.hasOwnProperty(s)&&s!==o){var c=r[s],d=n.hasOwnProperty(s);if(p(d,s),u.hasOwnProperty(s))u[s](e,c);else{var h=l.hasOwnProperty(s);if("function"==typeof c&&!h&&!d&&!1!==r.autobind)a.push(s,c),n[s]=c;else if(d){var g=l[s];i(h&&("DEFINE_MANY_MERGED"===g||"DEFINE_MANY"===g),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",g,s),"DEFINE_MANY_MERGED"===g?n[s]=f(n[s],c):"DEFINE_MANY"===g&&(n[s]=m(n[s],c))}else n[s]=c}}}else;}function h(e,t){for(var r in i(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects."),t)t.hasOwnProperty(r)&&(i(void 0===e[r],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",r),e[r]=t[r]);return e}function f(e,t){return function(){var r=e.apply(this,arguments),n=t.apply(this,arguments);if(null==r)return n;if(null==n)return r;var a={};return h(a,r),h(a,n),a}}function m(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function g(e,t){return t.bind(e)}var v={componentDidMount:function(){this.__isMounted=!0}},y={componentWillUnmount:function(){this.__isMounted=!1}},b={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},_=function(){};return n(_.prototype,e.prototype,b),function(e){var t=function(e,n,o){this.__reactAutoBindPairs.length&&function(e){for(var t=e.__reactAutoBindPairs,r=0;r<t.length;r+=2){var n=t[r],a=t[r+1];e[n]=g(e,a)}}(this),this.props=e,this.context=n,this.refs=a,this.updater=o||r,this.state=null;var s=this.getInitialState?this.getInitialState():null;i("object"==typeof s&&!Array.isArray(s),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=s};for(var n in t.prototype=new _,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],s.forEach(d.bind(null,t)),d(t,v),d(t,e),d(t,y),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),i(t.prototype.render,"createClass(...): Class specification must implement a `render` method."),l)t.prototype[n]||(t.prototype[n]=null);return t}}},1227:function(e,t,r){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,a=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(a=n))})),t.splice(a,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e="MISSING_ENV_VAR".DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(2447)(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},2447:function(e,t,r){e.exports=function(e){function t(e){let r,a=null;function i(...e){if(!i.enabled)return;const n=i,a=Number(new Date),o=a-(r||a);n.diff=o,n.prev=r,n.curr=a,r=a,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,a)=>{if("%%"===r)return"%";s++;const i=t.formatters[a];if("function"==typeof i){const t=e[s];r=i.call(n,t),e.splice(s,1),s--}return r})),t.formatArgs.call(n,e);(n.log||t.log).apply(n,e)}return i.namespace=e,i.useColors=t.useColors(),i.color=t.selectColor(e),i.extend=n,i.destroy=t.destroy,Object.defineProperty(i,"enabled",{enumerable:!0,configurable:!1,get:()=>null===a?t.enabled(e):a,set:e=>{a=e}}),"function"==typeof t.init&&t.init(i),i}function n(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function a(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(a),...t.skips.map(a).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),a=n.length;for(r=0;r<a;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(7824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},3549:function(e){e.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},5983:function(e,t,r){const n=r(2192);e.exports=(e,t)=>new n(e,t),e.exports.Socket=n,e.exports.protocol=n.protocol,e.exports.Transport=r(6496),e.exports.transports=r(3352),e.exports.parser=r(9743)},2192:function(e,t,r){const n=r(3352),a=r(8767),i=r(1227)("engine.io-client:socket"),o=r(9743),s=r(4187),l=r(1830);class c extends a{constructor(e,t={}){super(),e&&"object"==typeof e&&(t=e,e=null),e?(e=s(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=s(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,jsonp:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},t),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=l.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",(()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())}),!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){i('creating transport "%s"',e);const t=function(e){const t={};for(let r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}(this.opts.query);t.EIO=o.protocol,t.transport=e,this.id&&(t.sid=this.id);const r=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return i("options: %j",r),new n[e](r)}open(){let e;if(this.opts.rememberUpgrade&&c.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void setTimeout((()=>{this.emit("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return i("error while creating transport: %s",e),this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){i("setting transport %s",e.name),this.transport&&(i("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(()=>{this.onClose("transport close")}))}probe(e){i('probing transport "%s"',e);let t=this.createTransport(e,{probe:1}),r=!1;c.priorWebsocketSuccess=!1;const n=()=>{r||(i('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(n=>{if(!r)if("pong"===n.type&&"probe"===n.data){if(i('probe transport "%s" pong',e),this.upgrading=!0,this.emit("upgrading",t),!t)return;c.priorWebsocketSuccess="websocket"===t.name,i('pausing current transport "%s"',this.transport.name),this.transport.pause((()=>{r||"closed"!==this.readyState&&(i("changing transport and sending upgrade packet"),p(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emit("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{i('probe transport "%s" failed',e);const r=new Error("probe error");r.transport=t.name,this.emit("upgradeError",r)}})))};function a(){r||(r=!0,p(),t.close(),t=null)}const o=r=>{const n=new Error("probe error: "+r);n.transport=t.name,a(),i('probe transport "%s" failed because of error: %s',e,r),this.emit("upgradeError",n)};function s(){o("transport closed")}function l(){o("socket closed")}function u(e){t&&e.name!==t.name&&(i('"%s" works - aborting "%s"',e.name,t.name),a())}const p=()=>{t.removeListener("open",n),t.removeListener("error",o),t.removeListener("close",s),this.removeListener("close",l),this.removeListener("upgrading",u)};t.once("open",n),t.once("error",o),t.once("close",s),this.once("close",l),this.once("upgrading",u),t.open()}onOpen(){if(i("socket open"),this.readyState="open",c.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){i("starting upgrade probes");let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(i('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emit("ping"),this.emit("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else i('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=setTimeout((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()}flush(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(i("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))}write(e,t,r){return this.sendPacket("message",e,t,r),this}send(e,t,r){return this.sendPacket("message",e,t,r),this}sendPacket(e,t,r,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof r&&(n=r,r=null),"closing"===this.readyState||"closed"===this.readyState)return;(r=r||{}).compress=!1!==r.compress;const a={type:e,data:t,options:r};this.emit("packetCreate",a),this.writeBuffer.push(a),n&&this.once("flush",n),this.flush()}close(){const e=()=>{this.onClose("forced close"),i("socket closing - telling transport to close"),this.transport.close()},t=()=>{this.removeListener("upgrade",t),this.removeListener("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?r():e()})):this.upgrading?r():e()),this}onError(e){i("socket error %j",e),c.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)}onClose(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(i('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let r=0;const n=e.length;for(;r<n;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}c.priorWebsocketSuccess=!1,c.protocol=o.protocol,e.exports=c},6496:function(e,t,r){const n=r(9743),a=r(8767),i=r(1227)("engine.io-client:transport");e.exports=class extends a{constructor(e){super(),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,t){const r=new Error(e);return r.type="TransportError",r.description=t,this.emit("error",r),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState?this.write(e):i("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,this.emit("open")}onData(e){const t=n.decodePacket(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){this.emit("packet",e)}onClose(){this.readyState="closed",this.emit("close")}}},3352:function(e,t,r){const n=r(2777),a=r(3416),i=r(9785),o=r(4442);t.polling=function(e){let t,r=!1,o=!1;const s=!1!==e.jsonp;if("undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?443:80),r=e.hostname!==location.hostname||n!==e.port,o=e.secure!==t}if(e.xdomain=r,e.xscheme=o,t=new n(e),"open"in t&&!e.forceJSONP)return new a(e);if(!s)throw new Error("JSONP disabled");return new i(e)},t.websocket=o},9785:function(e,t,r){const n=r(9015),a=r(3549),i=/\n/g,o=/\\n/g;let s;e.exports=class extends n{constructor(e){super(e),this.query=this.query||{},s||(s=a.___eio=a.___eio||[]),this.index=s.length,s.push(this.onData.bind(this)),this.query.j=this.index}get supportsBinary(){return!1}doClose(){this.script&&(this.script.onerror=()=>{},this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),super.doClose()}doPoll(){const e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=e=>{this.onError("jsonp poll error",e)};const t=document.getElementsByTagName("script")[0];t?t.parentNode.insertBefore(e,t):(document.head||document.body).appendChild(e),this.script=e;"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){const e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)}doWrite(e,t){let r;if(!this.form){const e=document.createElement("form"),t=document.createElement("textarea"),r=this.iframeId="eio_iframe_"+this.index;e.className="socketio",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.target=r,e.method="POST",e.setAttribute("accept-charset","utf-8"),t.name="d",e.appendChild(t),document.body.appendChild(e),this.form=e,this.area=t}function n(){a(),t()}this.form.action=this.uri();const a=()=>{if(this.iframe)try{this.form.removeChild(this.iframe)}catch(e){this.onError("jsonp polling iframe removal error",e)}try{const e='<iframe src="javascript:0" name="'+this.iframeId+'">';r=document.createElement(e)}catch(e){r=document.createElement("iframe"),r.name=this.iframeId,r.src="javascript:0"}r.id=this.iframeId,this.form.appendChild(r),this.iframe=r};a(),e=e.replace(o,"\\\n"),this.area.value=e.replace(i,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=()=>{"complete"===this.iframe.readyState&&n()}:this.iframe.onload=n}}},3416:function(e,t,r){const n=r(2777),a=r(9015),i=r(8767),{pick:o}=r(6839),s=r(3549),l=r(1227)("engine.io-client:polling-xhr");function c(){}const u=null!=new n({xdomain:!1}).responseType;class p extends i{constructor(e,t){super(),this.opts=t,this.method=t.method||"GET",this.uri=e,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.create()}create(){const e=o(this.opts,"agent","enablesXDR","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const t=this.xhr=new n(e);try{l("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let e in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(e)&&t.setRequestHeader(e,this.opts.extraHeaders[e])}}catch(e){}if("POST"===this.method)try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),this.hasXDR()?(t.onload=()=>{this.onLoad()},t.onerror=()=>{this.onError(t.responseText)}):t.onreadystatechange=()=>{4===t.readyState&&(200===t.status||1223===t.status?this.onLoad():setTimeout((()=>{this.onError("number"==typeof t.status?t.status:0)}),0))},l("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout((()=>{this.onError(e)}),0)}"undefined"!=typeof document&&(this.index=p.requestsCount++,p.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(e){this.emit("data",e),this.onSuccess()}onError(e){this.emit("error",e),this.cleanup(!0)}cleanup(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=c:this.xhr.onreadystatechange=c,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete p.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;null!==e&&this.onData(e)}hasXDR(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR}abort(){this.cleanup()}}if(p.requestsCount=0,p.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",d);else if("function"==typeof addEventListener){addEventListener("onpagehide"in s?"pagehide":"unload",d,!1)}function d(){for(let e in p.requests)p.requests.hasOwnProperty(e)&&p.requests[e].abort()}e.exports=class extends a{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let r=location.port;r||(r=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||r!==e.port,this.xs=e.secure!==t}const t=e&&e.forceBase64;this.supportsBinary=u&&!t}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new p(this.uri(),e)}doWrite(e,t){const r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(e=>{this.onError("xhr post error",e)}))}doPoll(){l("xhr poll");const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e=>{this.onError("xhr poll error",e)})),this.pollXhr=e}},e.exports.Request=p},9015:function(e,t,r){const n=r(6496),a=r(1830),i=r(9743),o=r(2281),s=r(1227)("engine.io-client:polling");e.exports=class extends n{get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{s("paused"),this.readyState="paused",e()};if(this.polling||!this.writable){let e=0;this.polling&&(s("we are currently polling - waiting to pause"),e++,this.once("pollComplete",(function(){s("pre-pause polling complete"),--e||t()}))),this.writable||(s("we are currently writing - waiting to pause"),e++,this.once("drain",(function(){s("pre-pause writing complete"),--e||t()})))}else t()}poll(){s("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}onData(e){s("polling got data %s",e);i.decodePayload(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose(),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():s('ignoring poll - transport state "%s"',this.readyState))}doClose(){const e=()=>{s("writing close packet"),this.write([{type:"close"}])};"open"===this.readyState?(s("transport open - closing"),e()):(s("transport not open - deferring close"),this.once("open",e))}write(e){this.writable=!1,i.encodePayload(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emit("drain")}))}))}uri(){let e=this.query||{};const t=this.opts.secure?"https":"http";let r="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=o()),this.supportsBinary||e.sid||(e.b64=1),e=a.encode(e),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(r=":"+this.opts.port),e.length&&(e="?"+e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+e}}},866:function(e,t,r){const n=r(3549),a="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):e=>setTimeout(e,0);e.exports={WebSocket:n.WebSocket||n.MozWebSocket,usingBrowserWebSocket:!0,defaultBinaryType:"arraybuffer",nextTick:a}},4442:function(e,t,r){const n=r(6496),a=r(9743),i=r(1830),o=r(2281),{pick:s}=r(6839),{WebSocket:l,usingBrowserWebSocket:c,defaultBinaryType:u,nextTick:p}=r(866),d=r(1227)("engine.io-client:websocket"),h="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class f extends n{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,r=h?{}:s(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=c&&!h?t?new l(e,t):new l(e):new l(e,t,r)}catch(e){return this.emit("error",e)}this.ws.binaryType=this.socket.binaryType||u,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],n=t===e.length-1;a.encodePacket(r,this.supportsBinary,(e=>{const t={};if(!c&&(r.options&&(t.compress=r.options.compress),this.opts.perMessageDeflate)){("string"==typeof e?Buffer.byteLength(e):e.length)<this.opts.perMessageDeflate.threshold&&(t.compress=!1)}try{c?this.ws.send(e):this.ws.send(e,t)}catch(e){d("websocket closed before onclose event")}n&&p((()=>{this.writable=!0,this.emit("drain")}))}))}}onClose(){n.prototype.onClose.call(this)}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const t=this.opts.secure?"wss":"ws";let r="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(r=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=o()),this.supportsBinary||(e.b64=1),e=i.encode(e),e.length&&(e="?"+e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+e}check(){return!(!l||"__initialize"in l&&this.name===f.prototype.name)}}e.exports=f},6839:function(e){e.exports.pick=(e,...t)=>t.reduce(((t,r)=>(e.hasOwnProperty(r)&&(t[r]=e[r]),t)),{})},2777:function(e,t,r){const n=r(8058),a=r(3549);e.exports=function(e){const t=e.xdomain,r=e.xscheme,i=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||n))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!r&&i)return new XDomainRequest}catch(e){}if(!t)try{return new(a[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},1712:function(e){const t=Object.create(null);t.open="0",t.close="1",t.ping="2",t.pong="3",t.message="4",t.upgrade="5",t.noop="6";const r=Object.create(null);Object.keys(t).forEach((e=>{r[t[e]]=e}));e.exports={PACKET_TYPES:t,PACKET_TYPES_REVERSE:r,ERROR_PACKET:{type:"error",data:"parser error"}}},4965:function(e,t,r){const{PACKET_TYPES_REVERSE:n,ERROR_PACKET:a}=r(1712);let i;"function"==typeof ArrayBuffer&&(i=r(3704));const o=(e,t)=>{if(i){const r=i.decode(e);return s(r,t)}return{base64:!0,data:e}},s=(e,t)=>{switch(t){case"blob":return e instanceof ArrayBuffer?new Blob([e]):e;case"arraybuffer":default:return e}};e.exports=(e,t)=>{if("string"!=typeof e)return{type:"message",data:s(e,t)};const r=e.charAt(0);if("b"===r)return{type:"message",data:o(e.substring(1),t)};return n[r]?e.length>1?{type:n[r],data:e.substring(1)}:{type:n[r]}:a}},2929:function(e,t,r){const{PACKET_TYPES:n}=r(1712),a="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),i="function"==typeof ArrayBuffer,o=(e,t)=>{const r=new FileReader;return r.onload=function(){const e=r.result.split(",")[1];t("b"+e)},r.readAsDataURL(e)};e.exports=({type:e,data:t},r,s)=>{return a&&t instanceof Blob?r?s(t):o(t,s):i&&(t instanceof ArrayBuffer||(l=t,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(l):l&&l.buffer instanceof ArrayBuffer))?r?s(t instanceof ArrayBuffer?t:t.buffer):o(new Blob([t]),s):s(n[e]+(t||""));var l}},9743:function(e,t,r){const n=r(2929),a=r(4965),i=String.fromCharCode(30);e.exports={protocol:4,encodePacket:n,encodePayload:(e,t)=>{const r=e.length,a=new Array(r);let o=0;e.forEach(((e,s)=>{n(e,!1,(e=>{a[s]=e,++o===r&&t(a.join(i))}))}))},decodePacket:a,decodePayload:(e,t)=>{const r=e.split(i),n=[];for(let e=0;e<r.length;e++){const i=a(r[e],t);if(n.push(i),"error"===i.type)break}return n}}},7187:function(e){"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(r,n){function a(r){e.removeListener(t,i),n(r)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",a),r([].slice.call(arguments))}m(e,t,i,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&m(e,"error",t,r)}(e,a,{once:!0})}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function c(e,t,r,n){var a,i,o,c;if(s(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),o=i[t]),void 0===o)o=i[t]=r,++e._eventsCount;else if("function"==typeof o?o=i[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(a=l(e))>0&&o.length>a&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,c=u,console&&console.warn&&console.warn(c)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},a=u.bind(n);return a.listener=r,n.wrapFn=a,a}function d(e,t,r){var n=e._events;if(void 0===n)return[];var a=n[t];return void 0===a?[]:"function"==typeof a?r?[a.listener||a]:[a]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(a):f(a,a.length)}function h(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function f(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function m(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function a(i){n.once&&e.removeEventListener(t,a),r(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var a="error"===e,i=this._events;if(void 0!==i)a=a&&void 0===i.error;else if(!a)return!1;if(a){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)n(l,this,t);else{var c=l.length,u=f(l,c);for(r=0;r<c;++r)n(u[r],this,t)}return!0},i.prototype.addListener=function(e,t){return c(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return c(this,e,t,!0)},i.prototype.once=function(e,t){return s(t),this.on(e,p(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,p(this,e,t)),this},i.prototype.removeListener=function(e,t){var r,n,a,i,o;if(s(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(a=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){o=r[i].listener,a=i;break}if(a<0)return this;0===a?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,a),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var a,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(a=i[n])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},i.prototype.listeners=function(e){return d(this,e,!0)},i.prototype.rawListeners=function(e){return d(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},i.prototype.listenerCount=h,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},139:function(e){"use strict";function t(e){return function(){return e}}var r=function(){};r.thatReturns=t,r.thatReturnsFalse=t(!1),r.thatReturnsTrue=t(!0),r.thatReturnsNull=t(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},e.exports=r},3677:function(e){"use strict";e.exports={}},3759:function(e){"use strict";e.exports=function(e,t,r,n,a,i,o,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,a,i,o,s],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},3620:function(e,t,r){"use strict";var n=r(139);e.exports=n},3261:function(e){var t;t={},e.exports=t,t.simpleFilter=function(e,r){return r.filter((function(r){return t.test(e,r)}))},t.test=function(e,r){return null!==t.match(e,r)},t.match=function(e,t,r){r=r||{};var n,a=0,i=[],o=t.length,s=0,l=0,c=r.pre||"",u=r.post||"",p=r.caseSensitive&&t||t.toLowerCase();e=r.caseSensitive&&e||e.toLowerCase();for(var d=0;d<o;d++)n=t[d],p[d]===e[a]?(n=c+n+u,a+=1,l+=1+l):l=0,s+=l,i[i.length]=n;return a===e.length?(s=p===e?1/0:s,{rendered:i.join(""),score:s}):null},t.filter=function(e,r,n){return r&&0!==r.length?"string"!=typeof e?r:(n=n||{},r.reduce((function(r,a,i,o){var s=a;n.extract&&(s=n.extract(a));var l=t.match(e,s,n);return null!=l&&(r[r.length]={string:l.rendered,score:l.score,index:i,original:a}),r}),[]).sort((function(e,t){var r=t.score-e.score;return r||e.index-t.index}))):[]}},8058:function(e){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},8679:function(e,t,r){"use strict";var n=r(9864),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return n.isMemo(e)?o:s[e.$$typeof]||a}s[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[n.Memo]=o;var c=Object.defineProperty,u=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,r,n){if("string"!=typeof r){if(f){var a=h(r);a&&a!==f&&e(t,a,n)}var o=u(r);p&&(o=o.concat(p(r)));for(var s=l(t),m=l(r),g=0;g<o.length;++g){var v=o[g];if(!(i[v]||n&&n[v]||m&&m[v]||s&&s[v])){var y=d(r,v);try{c(t,v,y)}catch(e){}}}}return t}},3310:function(e){"use strict";var t=Object.prototype.toString;e.exports=function(e){var r;return"[object Object]"===t.call(e)&&(null===(r=Object.getPrototypeOf(e))||r===Object.getPrototypeOf({}))}},1296:function(e,t,r){var n=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,l="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,c="object"==typeof self&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),p=Object.prototype.toString,d=Math.max,h=Math.min,f=function(){return u.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==p.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var r=i.test(e);return r||o.test(e)?s(e.slice(2),r?2:8):a.test(e)?NaN:+e}e.exports=function(e,t,r){var n,a,i,o,s,l,c=0,u=!1,p=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var r=n,i=a;return n=a=void 0,c=t,o=e.apply(i,r)}function b(e){return c=e,s=setTimeout(x,t),u?y(e):o}function _(e){var r=e-l;return void 0===l||r>=t||r<0||p&&e-c>=i}function x(){var e=f();if(_(e))return w(e);s=setTimeout(x,function(e){var r=t-(e-l);return p?h(r,i-(e-c)):r}(e))}function w(e){return s=void 0,v&&n?y(e):(n=a=void 0,o)}function E(){var e=f(),r=_(e);if(n=arguments,a=this,l=e,r){if(void 0===s)return b(l);if(p)return s=setTimeout(x,t),y(l)}return void 0===s&&(s=setTimeout(x,t)),o}return t=g(t)||0,m(r)&&(u=!!r.leading,i=(p="maxWait"in r)?d(g(r.maxWait)||0,t):i,v="trailing"in r?!!r.trailing:v),E.cancel=function(){void 0!==s&&clearTimeout(s),c=0,n=l=a=s=void 0},E.flush=function(){return void 0===s?o:w(f())},E}},6486:function(e,t,r){var n;e=r.nmd(e),function(){var a,i="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",l=16,c=32,u=64,p=128,d=256,h=1/0,f=9007199254740991,m=NaN,g=4294967295,v=[["ary",p],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",c],["partialRight",u],["rearg",d]],y="[object Arguments]",b="[object Array]",_="[object Boolean]",x="[object Date]",w="[object Error]",E="[object Function]",C="[object GeneratorFunction]",k="[object Map]",T="[object Number]",S="[object Object]",P="[object Promise]",M="[object RegExp]",I="[object Set]",A="[object String]",O="[object Symbol]",z="[object WeakMap]",R="[object ArrayBuffer]",L="[object DataView]",D="[object Float32Array]",B="[object Float64Array]",$="[object Int8Array]",F="[object Int16Array]",N="[object Int32Array]",V="[object Uint8Array]",j="[object Uint8ClampedArray]",U="[object Uint16Array]",q="[object Uint32Array]",H=/\b__p \+= '';/g,G=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,X=/&(?:amp|lt|gt|quot|#39);/g,Z=/[&<>"']/g,Y=RegExp(X.source),K=RegExp(Z.source),Q=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,re=/^\w*$/,ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ae=/[\\^$.*+?()[\]{}|]/g,ie=RegExp(ae.source),oe=/^\s+/,se=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,ue=/,? & /,pe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,de=/[()=,{}\[\]\/\s]/,he=/\\(\\)?/g,fe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,me=/\w*$/,ge=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,be=/^0o[0-7]+$/i,_e=/^(?:0|[1-9]\d*)$/,xe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,we=/($^)/,Ee=/['\n\r\u2028\u2029\\]/g,Ce="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ke="\\u2700-\\u27bf",Te="a-z\\xdf-\\xf6\\xf8-\\xff",Se="A-Z\\xc0-\\xd6\\xd8-\\xde",Pe="\\ufe0e\\ufe0f",Me="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ie="['’]",Ae="[\\ud800-\\udfff]",Oe="["+Me+"]",ze="["+Ce+"]",Re="\\d+",Le="[\\u2700-\\u27bf]",De="["+Te+"]",Be="[^\\ud800-\\udfff"+Me+Re+ke+Te+Se+"]",$e="\\ud83c[\\udffb-\\udfff]",Fe="[^\\ud800-\\udfff]",Ne="(?:\\ud83c[\\udde6-\\uddff]){2}",Ve="[\\ud800-\\udbff][\\udc00-\\udfff]",je="["+Se+"]",Ue="(?:"+De+"|"+Be+")",qe="(?:"+je+"|"+Be+")",He="(?:['’](?:d|ll|m|re|s|t|ve))?",Ge="(?:['’](?:D|LL|M|RE|S|T|VE))?",We="(?:"+ze+"|"+$e+")"+"?",Xe="[\\ufe0e\\ufe0f]?",Ze=Xe+We+("(?:\\u200d(?:"+[Fe,Ne,Ve].join("|")+")"+Xe+We+")*"),Ye="(?:"+[Le,Ne,Ve].join("|")+")"+Ze,Ke="(?:"+[Fe+ze+"?",ze,Ne,Ve,Ae].join("|")+")",Qe=RegExp(Ie,"g"),Je=RegExp(ze,"g"),et=RegExp($e+"(?="+$e+")|"+Ke+Ze,"g"),tt=RegExp([je+"?"+De+"+"+He+"(?="+[Oe,je,"$"].join("|")+")",qe+"+"+Ge+"(?="+[Oe,je+Ue,"$"].join("|")+")",je+"?"+Ue+"+"+He,je+"+"+Ge,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Re,Ye].join("|"),"g"),rt=RegExp("[\\u200d\\ud800-\\udfff"+Ce+Pe+"]"),nt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,at=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],it=-1,ot={};ot[D]=ot[B]=ot[$]=ot[F]=ot[N]=ot[V]=ot[j]=ot[U]=ot[q]=!0,ot[y]=ot[b]=ot[R]=ot[_]=ot[L]=ot[x]=ot[w]=ot[E]=ot[k]=ot[T]=ot[S]=ot[M]=ot[I]=ot[A]=ot[z]=!1;var st={};st[y]=st[b]=st[R]=st[L]=st[_]=st[x]=st[D]=st[B]=st[$]=st[F]=st[N]=st[k]=st[T]=st[S]=st[M]=st[I]=st[A]=st[O]=st[V]=st[j]=st[U]=st[q]=!0,st[w]=st[E]=st[z]=!1;var lt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ct=parseFloat,ut=parseInt,pt="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,dt="object"==typeof self&&self&&self.Object===Object&&self,ht=pt||dt||Function("return this")(),ft=t&&!t.nodeType&&t,mt=ft&&e&&!e.nodeType&&e,gt=mt&&mt.exports===ft,vt=gt&&pt.process,yt=function(){try{var e=mt&&mt.require&&mt.require("util").types;return e||vt&&vt.binding&&vt.binding("util")}catch(e){}}(),bt=yt&&yt.isArrayBuffer,_t=yt&&yt.isDate,xt=yt&&yt.isMap,wt=yt&&yt.isRegExp,Et=yt&&yt.isSet,Ct=yt&&yt.isTypedArray;function kt(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Tt(e,t,r,n){for(var a=-1,i=null==e?0:e.length;++a<i;){var o=e[a];t(n,o,r(o),e)}return n}function St(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function Pt(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function Mt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function It(e,t){for(var r=-1,n=null==e?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}function At(e,t){return!!(null==e?0:e.length)&&Vt(e,t,0)>-1}function Ot(e,t,r){for(var n=-1,a=null==e?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}function zt(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}function Rt(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}function Lt(e,t,r,n){var a=-1,i=null==e?0:e.length;for(n&&i&&(r=e[++a]);++a<i;)r=t(r,e[a],a,e);return r}function Dt(e,t,r,n){var a=null==e?0:e.length;for(n&&a&&(r=e[--a]);a--;)r=t(r,e[a],a,e);return r}function Bt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var $t=Ht("length");function Ft(e,t,r){var n;return r(e,(function(e,r,a){if(t(e,r,a))return n=r,!1})),n}function Nt(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}function Vt(e,t,r){return t==t?function(e,t,r){var n=r-1,a=e.length;for(;++n<a;)if(e[n]===t)return n;return-1}(e,t,r):Nt(e,Ut,r)}function jt(e,t,r,n){for(var a=r-1,i=e.length;++a<i;)if(n(e[a],t))return a;return-1}function Ut(e){return e!=e}function qt(e,t){var r=null==e?0:e.length;return r?Xt(e,t)/r:m}function Ht(e){return function(t){return null==t?a:t[e]}}function Gt(e){return function(t){return null==e?a:e[t]}}function Wt(e,t,r,n,a){return a(e,(function(e,a,i){r=n?(n=!1,e):t(r,e,a,i)})),r}function Xt(e,t){for(var r,n=-1,i=e.length;++n<i;){var o=t(e[n]);o!==a&&(r=r===a?o:r+o)}return r}function Zt(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function Yt(e){return e?e.slice(0,fr(e)+1).replace(oe,""):e}function Kt(e){return function(t){return e(t)}}function Qt(e,t){return zt(t,(function(t){return e[t]}))}function Jt(e,t){return e.has(t)}function er(e,t){for(var r=-1,n=e.length;++r<n&&Vt(t,e[r],0)>-1;);return r}function tr(e,t){for(var r=e.length;r--&&Vt(t,e[r],0)>-1;);return r}function rr(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}var nr=Gt({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),ar=Gt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ir(e){return"\\"+lt[e]}function or(e){return rt.test(e)}function sr(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function lr(e,t){return function(r){return e(t(r))}}function cr(e,t){for(var r=-1,n=e.length,a=0,i=[];++r<n;){var o=e[r];o!==t&&o!==s||(e[r]=s,i[a++]=r)}return i}function ur(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}function pr(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}function dr(e){return or(e)?function(e){var t=et.lastIndex=0;for(;et.test(e);)++t;return t}(e):$t(e)}function hr(e){return or(e)?function(e){return e.match(et)||[]}(e):function(e){return e.split("")}(e)}function fr(e){for(var t=e.length;t--&&se.test(e.charAt(t)););return t}var mr=Gt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var gr=function e(t){var r,n=(t=null==t?ht:gr.defaults(ht.Object(),t,gr.pick(ht,at))).Array,se=t.Date,Ce=t.Error,ke=t.Function,Te=t.Math,Se=t.Object,Pe=t.RegExp,Me=t.String,Ie=t.TypeError,Ae=n.prototype,Oe=ke.prototype,ze=Se.prototype,Re=t["__core-js_shared__"],Le=Oe.toString,De=ze.hasOwnProperty,Be=0,$e=(r=/[^.]+$/.exec(Re&&Re.keys&&Re.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",Fe=ze.toString,Ne=Le.call(Se),Ve=ht._,je=Pe("^"+Le.call(De).replace(ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ue=gt?t.Buffer:a,qe=t.Symbol,He=t.Uint8Array,Ge=Ue?Ue.allocUnsafe:a,We=lr(Se.getPrototypeOf,Se),Xe=Se.create,Ze=ze.propertyIsEnumerable,Ye=Ae.splice,Ke=qe?qe.isConcatSpreadable:a,et=qe?qe.iterator:a,rt=qe?qe.toStringTag:a,lt=function(){try{var e=hi(Se,"defineProperty");return e({},"",{}),e}catch(e){}}(),pt=t.clearTimeout!==ht.clearTimeout&&t.clearTimeout,dt=se&&se.now!==ht.Date.now&&se.now,ft=t.setTimeout!==ht.setTimeout&&t.setTimeout,mt=Te.ceil,vt=Te.floor,yt=Se.getOwnPropertySymbols,$t=Ue?Ue.isBuffer:a,Gt=t.isFinite,vr=Ae.join,yr=lr(Se.keys,Se),br=Te.max,_r=Te.min,xr=se.now,wr=t.parseInt,Er=Te.random,Cr=Ae.reverse,kr=hi(t,"DataView"),Tr=hi(t,"Map"),Sr=hi(t,"Promise"),Pr=hi(t,"Set"),Mr=hi(t,"WeakMap"),Ir=hi(Se,"create"),Ar=Mr&&new Mr,Or={},zr=Ni(kr),Rr=Ni(Tr),Lr=Ni(Sr),Dr=Ni(Pr),Br=Ni(Mr),$r=qe?qe.prototype:a,Fr=$r?$r.valueOf:a,Nr=$r?$r.toString:a;function Vr(e){if(as(e)&&!Wo(e)&&!(e instanceof Hr)){if(e instanceof qr)return e;if(De.call(e,"__wrapped__"))return Vi(e)}return new qr(e)}var jr=function(){function e(){}return function(t){if(!ns(t))return{};if(Xe)return Xe(t);e.prototype=t;var r=new e;return e.prototype=a,r}}();function Ur(){}function qr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=a}function Hr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=g,this.__views__=[]}function Gr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Wr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Xr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Zr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Xr;++t<r;)this.add(e[t])}function Yr(e){var t=this.__data__=new Wr(e);this.size=t.size}function Kr(e,t){var r=Wo(e),n=!r&&Go(e),a=!r&&!n&&Ko(e),i=!r&&!n&&!a&&ds(e),o=r||n||a||i,s=o?Zt(e.length,Me):[],l=s.length;for(var c in e)!t&&!De.call(e,c)||o&&("length"==c||a&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||_i(c,l))||s.push(c);return s}function Qr(e){var t=e.length;return t?e[Yn(0,t-1)]:a}function Jr(e,t){return Bi(Aa(e),cn(t,0,e.length))}function en(e){return Bi(Aa(e))}function tn(e,t,r){(r!==a&&!Uo(e[t],r)||r===a&&!(t in e))&&sn(e,t,r)}function rn(e,t,r){var n=e[t];De.call(e,t)&&Uo(n,r)&&(r!==a||t in e)||sn(e,t,r)}function nn(e,t){for(var r=e.length;r--;)if(Uo(e[r][0],t))return r;return-1}function an(e,t,r,n){return fn(e,(function(e,a,i){t(n,e,r(e),i)})),n}function on(e,t){return e&&Oa(t,Rs(t),e)}function sn(e,t,r){"__proto__"==t&&lt?lt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function ln(e,t){for(var r=-1,i=t.length,o=n(i),s=null==e;++r<i;)o[r]=s?a:Ms(e,t[r]);return o}function cn(e,t,r){return e==e&&(r!==a&&(e=e<=r?e:r),t!==a&&(e=e>=t?e:t)),e}function un(e,t,r,n,i,o){var s,l=1&t,c=2&t,u=4&t;if(r&&(s=i?r(e,n,i,o):r(e)),s!==a)return s;if(!ns(e))return e;var p=Wo(e);if(p){if(s=function(e){var t=e.length,r=new e.constructor(t);t&&"string"==typeof e[0]&&De.call(e,"index")&&(r.index=e.index,r.input=e.input);return r}(e),!l)return Aa(e,s)}else{var d=gi(e),h=d==E||d==C;if(Ko(e))return ka(e,l);if(d==S||d==y||h&&!i){if(s=c||h?{}:yi(e),!l)return c?function(e,t){return Oa(e,mi(e),t)}(e,function(e,t){return e&&Oa(t,Ls(t),e)}(s,e)):function(e,t){return Oa(e,fi(e),t)}(e,on(s,e))}else{if(!st[d])return i?e:{};s=function(e,t,r){var n=e.constructor;switch(t){case R:return Ta(e);case _:case x:return new n(+e);case L:return function(e,t){var r=t?Ta(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case D:case B:case $:case F:case N:case V:case j:case U:case q:return Sa(e,r);case k:return new n;case T:case A:return new n(e);case M:return function(e){var t=new e.constructor(e.source,me.exec(e));return t.lastIndex=e.lastIndex,t}(e);case I:return new n;case O:return a=e,Fr?Se(Fr.call(a)):{}}var a}(e,d,l)}}o||(o=new Yr);var f=o.get(e);if(f)return f;o.set(e,s),cs(e)?e.forEach((function(n){s.add(un(n,t,r,n,e,o))})):is(e)&&e.forEach((function(n,a){s.set(a,un(n,t,r,a,e,o))}));var m=p?a:(u?c?oi:ii:c?Ls:Rs)(e);return St(m||e,(function(n,a){m&&(n=e[a=n]),rn(s,a,un(n,t,r,a,e,o))})),s}function pn(e,t,r){var n=r.length;if(null==e)return!n;for(e=Se(e);n--;){var i=r[n],o=t[i],s=e[i];if(s===a&&!(i in e)||!o(s))return!1}return!0}function dn(e,t,r){if("function"!=typeof e)throw new Ie(i);return zi((function(){e.apply(a,r)}),t)}function hn(e,t,r,n){var a=-1,i=At,o=!0,s=e.length,l=[],c=t.length;if(!s)return l;r&&(t=zt(t,Kt(r))),n?(i=Ot,o=!1):t.length>=200&&(i=Jt,o=!1,t=new Zr(t));e:for(;++a<s;){var u=e[a],p=null==r?u:r(u);if(u=n||0!==u?u:0,o&&p==p){for(var d=c;d--;)if(t[d]===p)continue e;l.push(u)}else i(t,p,n)||l.push(u)}return l}Vr.templateSettings={escape:Q,evaluate:J,interpolate:ee,variable:"",imports:{_:Vr}},Vr.prototype=Ur.prototype,Vr.prototype.constructor=Vr,qr.prototype=jr(Ur.prototype),qr.prototype.constructor=qr,Hr.prototype=jr(Ur.prototype),Hr.prototype.constructor=Hr,Gr.prototype.clear=function(){this.__data__=Ir?Ir(null):{},this.size=0},Gr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Gr.prototype.get=function(e){var t=this.__data__;if(Ir){var r=t[e];return r===o?a:r}return De.call(t,e)?t[e]:a},Gr.prototype.has=function(e){var t=this.__data__;return Ir?t[e]!==a:De.call(t,e)},Gr.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Ir&&t===a?o:t,this},Wr.prototype.clear=function(){this.__data__=[],this.size=0},Wr.prototype.delete=function(e){var t=this.__data__,r=nn(t,e);return!(r<0)&&(r==t.length-1?t.pop():Ye.call(t,r,1),--this.size,!0)},Wr.prototype.get=function(e){var t=this.__data__,r=nn(t,e);return r<0?a:t[r][1]},Wr.prototype.has=function(e){return nn(this.__data__,e)>-1},Wr.prototype.set=function(e,t){var r=this.__data__,n=nn(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Xr.prototype.clear=function(){this.size=0,this.__data__={hash:new Gr,map:new(Tr||Wr),string:new Gr}},Xr.prototype.delete=function(e){var t=pi(this,e).delete(e);return this.size-=t?1:0,t},Xr.prototype.get=function(e){return pi(this,e).get(e)},Xr.prototype.has=function(e){return pi(this,e).has(e)},Xr.prototype.set=function(e,t){var r=pi(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Zr.prototype.add=Zr.prototype.push=function(e){return this.__data__.set(e,o),this},Zr.prototype.has=function(e){return this.__data__.has(e)},Yr.prototype.clear=function(){this.__data__=new Wr,this.size=0},Yr.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Yr.prototype.get=function(e){return this.__data__.get(e)},Yr.prototype.has=function(e){return this.__data__.has(e)},Yr.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Wr){var n=r.__data__;if(!Tr||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Xr(n)}return r.set(e,t),this.size=r.size,this};var fn=La(wn),mn=La(En,!0);function gn(e,t){var r=!0;return fn(e,(function(e,n,a){return r=!!t(e,n,a)})),r}function vn(e,t,r){for(var n=-1,i=e.length;++n<i;){var o=e[n],s=t(o);if(null!=s&&(l===a?s==s&&!ps(s):r(s,l)))var l=s,c=o}return c}function yn(e,t){var r=[];return fn(e,(function(e,n,a){t(e,n,a)&&r.push(e)})),r}function bn(e,t,r,n,a){var i=-1,o=e.length;for(r||(r=bi),a||(a=[]);++i<o;){var s=e[i];t>0&&r(s)?t>1?bn(s,t-1,r,n,a):Rt(a,s):n||(a[a.length]=s)}return a}var _n=Da(),xn=Da(!0);function wn(e,t){return e&&_n(e,t,Rs)}function En(e,t){return e&&xn(e,t,Rs)}function Cn(e,t){return It(t,(function(t){return es(e[t])}))}function kn(e,t){for(var r=0,n=(t=xa(t,e)).length;null!=e&&r<n;)e=e[Fi(t[r++])];return r&&r==n?e:a}function Tn(e,t,r){var n=t(e);return Wo(e)?n:Rt(n,r(e))}function Sn(e){return null==e?e===a?"[object Undefined]":"[object Null]":rt&&rt in Se(e)?function(e){var t=De.call(e,rt),r=e[rt];try{e[rt]=a;var n=!0}catch(e){}var i=Fe.call(e);n&&(t?e[rt]=r:delete e[rt]);return i}(e):function(e){return Fe.call(e)}(e)}function Pn(e,t){return e>t}function Mn(e,t){return null!=e&&De.call(e,t)}function In(e,t){return null!=e&&t in Se(e)}function An(e,t,r){for(var i=r?Ot:At,o=e[0].length,s=e.length,l=s,c=n(s),u=1/0,p=[];l--;){var d=e[l];l&&t&&(d=zt(d,Kt(t))),u=_r(d.length,u),c[l]=!r&&(t||o>=120&&d.length>=120)?new Zr(l&&d):a}d=e[0];var h=-1,f=c[0];e:for(;++h<o&&p.length<u;){var m=d[h],g=t?t(m):m;if(m=r||0!==m?m:0,!(f?Jt(f,g):i(p,g,r))){for(l=s;--l;){var v=c[l];if(!(v?Jt(v,g):i(e[l],g,r)))continue e}f&&f.push(g),p.push(m)}}return p}function On(e,t,r){var n=null==(e=Mi(e,t=xa(t,e)))?e:e[Fi(Qi(t))];return null==n?a:kt(n,e,r)}function zn(e){return as(e)&&Sn(e)==y}function Rn(e,t,r,n,i){return e===t||(null==e||null==t||!as(e)&&!as(t)?e!=e&&t!=t:function(e,t,r,n,i,o){var s=Wo(e),l=Wo(t),c=s?b:gi(e),u=l?b:gi(t),p=(c=c==y?S:c)==S,d=(u=u==y?S:u)==S,h=c==u;if(h&&Ko(e)){if(!Ko(t))return!1;s=!0,p=!1}if(h&&!p)return o||(o=new Yr),s||ds(e)?ni(e,t,r,n,i,o):function(e,t,r,n,a,i,o){switch(r){case L:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case R:return!(e.byteLength!=t.byteLength||!i(new He(e),new He(t)));case _:case x:case T:return Uo(+e,+t);case w:return e.name==t.name&&e.message==t.message;case M:case A:return e==t+"";case k:var s=sr;case I:var l=1&n;if(s||(s=ur),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;n|=2,o.set(e,t);var u=ni(s(e),s(t),n,a,i,o);return o.delete(e),u;case O:if(Fr)return Fr.call(e)==Fr.call(t)}return!1}(e,t,c,r,n,i,o);if(!(1&r)){var f=p&&De.call(e,"__wrapped__"),m=d&&De.call(t,"__wrapped__");if(f||m){var g=f?e.value():e,v=m?t.value():t;return o||(o=new Yr),i(g,v,r,n,o)}}if(!h)return!1;return o||(o=new Yr),function(e,t,r,n,i,o){var s=1&r,l=ii(e),c=l.length,u=ii(t).length;if(c!=u&&!s)return!1;var p=c;for(;p--;){var d=l[p];if(!(s?d in t:De.call(t,d)))return!1}var h=o.get(e),f=o.get(t);if(h&&f)return h==t&&f==e;var m=!0;o.set(e,t),o.set(t,e);var g=s;for(;++p<c;){var v=e[d=l[p]],y=t[d];if(n)var b=s?n(y,v,d,t,e,o):n(v,y,d,e,t,o);if(!(b===a?v===y||i(v,y,r,n,o):b)){m=!1;break}g||(g="constructor"==d)}if(m&&!g){var _=e.constructor,x=t.constructor;_==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x||(m=!1)}return o.delete(e),o.delete(t),m}(e,t,r,n,i,o)}(e,t,r,n,Rn,i))}function Ln(e,t,r,n){var i=r.length,o=i,s=!n;if(null==e)return!o;for(e=Se(e);i--;){var l=r[i];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<o;){var c=(l=r[i])[0],u=e[c],p=l[1];if(s&&l[2]){if(u===a&&!(c in e))return!1}else{var d=new Yr;if(n)var h=n(u,p,c,e,t,d);if(!(h===a?Rn(p,u,3,n,d):h))return!1}}return!0}function Dn(e){return!(!ns(e)||(t=e,$e&&$e in t))&&(es(e)?je:ye).test(Ni(e));var t}function Bn(e){return"function"==typeof e?e:null==e?ol:"object"==typeof e?Wo(e)?Un(e[0],e[1]):jn(e):ml(e)}function $n(e){if(!ki(e))return yr(e);var t=[];for(var r in Se(e))De.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Fn(e){if(!ns(e))return function(e){var t=[];if(null!=e)for(var r in Se(e))t.push(r);return t}(e);var t=ki(e),r=[];for(var n in e)("constructor"!=n||!t&&De.call(e,n))&&r.push(n);return r}function Nn(e,t){return e<t}function Vn(e,t){var r=-1,a=Zo(e)?n(e.length):[];return fn(e,(function(e,n,i){a[++r]=t(e,n,i)})),a}function jn(e){var t=di(e);return 1==t.length&&t[0][2]?Si(t[0][0],t[0][1]):function(r){return r===e||Ln(r,e,t)}}function Un(e,t){return wi(e)&&Ti(t)?Si(Fi(e),t):function(r){var n=Ms(r,e);return n===a&&n===t?Is(r,e):Rn(t,n,3)}}function qn(e,t,r,n,i){e!==t&&_n(t,(function(o,s){if(i||(i=new Yr),ns(o))!function(e,t,r,n,i,o,s){var l=Ai(e,r),c=Ai(t,r),u=s.get(c);if(u)return void tn(e,r,u);var p=o?o(l,c,r+"",e,t,s):a,d=p===a;if(d){var h=Wo(c),f=!h&&Ko(c),m=!h&&!f&&ds(c);p=c,h||f||m?Wo(l)?p=l:Yo(l)?p=Aa(l):f?(d=!1,p=ka(c,!0)):m?(d=!1,p=Sa(c,!0)):p=[]:ss(c)||Go(c)?(p=l,Go(l)?p=_s(l):ns(l)&&!es(l)||(p=yi(c))):d=!1}d&&(s.set(c,p),i(p,c,n,o,s),s.delete(c));tn(e,r,p)}(e,t,s,r,qn,n,i);else{var l=n?n(Ai(e,s),o,s+"",e,t,i):a;l===a&&(l=o),tn(e,s,l)}}),Ls)}function Hn(e,t){var r=e.length;if(r)return _i(t+=t<0?r:0,r)?e[t]:a}function Gn(e,t,r){t=t.length?zt(t,(function(e){return Wo(e)?function(t){return kn(t,1===e.length?e[0]:e)}:e})):[ol];var n=-1;return t=zt(t,Kt(ui())),function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(Vn(e,(function(e,r,a){return{criteria:zt(t,(function(t){return t(e)})),index:++n,value:e}})),(function(e,t){return function(e,t,r){var n=-1,a=e.criteria,i=t.criteria,o=a.length,s=r.length;for(;++n<o;){var l=Pa(a[n],i[n]);if(l)return n>=s?l:l*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)}))}function Wn(e,t,r){for(var n=-1,a=t.length,i={};++n<a;){var o=t[n],s=kn(e,o);r(s,o)&&ta(i,xa(o,e),s)}return i}function Xn(e,t,r,n){var a=n?jt:Vt,i=-1,o=t.length,s=e;for(e===t&&(t=Aa(t)),r&&(s=zt(e,Kt(r)));++i<o;)for(var l=0,c=t[i],u=r?r(c):c;(l=a(s,u,l,n))>-1;)s!==e&&Ye.call(s,l,1),Ye.call(e,l,1);return e}function Zn(e,t){for(var r=e?t.length:0,n=r-1;r--;){var a=t[r];if(r==n||a!==i){var i=a;_i(a)?Ye.call(e,a,1):ha(e,a)}}return e}function Yn(e,t){return e+vt(Er()*(t-e+1))}function Kn(e,t){var r="";if(!e||t<1||t>f)return r;do{t%2&&(r+=e),(t=vt(t/2))&&(e+=e)}while(t);return r}function Qn(e,t){return Ri(Pi(e,t,ol),e+"")}function Jn(e){return Qr(Us(e))}function ea(e,t){var r=Us(e);return Bi(r,cn(t,0,r.length))}function ta(e,t,r,n){if(!ns(e))return e;for(var i=-1,o=(t=xa(t,e)).length,s=o-1,l=e;null!=l&&++i<o;){var c=Fi(t[i]),u=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(i!=s){var p=l[c];(u=n?n(p,c,l):a)===a&&(u=ns(p)?p:_i(t[i+1])?[]:{})}rn(l,c,u),l=l[c]}return e}var ra=Ar?function(e,t){return Ar.set(e,t),e}:ol,na=lt?function(e,t){return lt(e,"toString",{configurable:!0,enumerable:!1,value:nl(t),writable:!0})}:ol;function aa(e){return Bi(Us(e))}function ia(e,t,r){var a=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=n(i);++a<i;)o[a]=e[a+t];return o}function oa(e,t){var r;return fn(e,(function(e,n,a){return!(r=t(e,n,a))})),!!r}function sa(e,t,r){var n=0,a=null==e?n:e.length;if("number"==typeof t&&t==t&&a<=2147483647){for(;n<a;){var i=n+a>>>1,o=e[i];null!==o&&!ps(o)&&(r?o<=t:o<t)?n=i+1:a=i}return a}return la(e,t,ol,r)}function la(e,t,r,n){var i=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=r(t))!=t,l=null===t,c=ps(t),u=t===a;i<o;){var p=vt((i+o)/2),d=r(e[p]),h=d!==a,f=null===d,m=d==d,g=ps(d);if(s)var v=n||m;else v=u?m&&(n||h):l?m&&h&&(n||!f):c?m&&h&&!f&&(n||!g):!f&&!g&&(n?d<=t:d<t);v?i=p+1:o=p}return _r(o,4294967294)}function ca(e,t){for(var r=-1,n=e.length,a=0,i=[];++r<n;){var o=e[r],s=t?t(o):o;if(!r||!Uo(s,l)){var l=s;i[a++]=0===o?0:o}}return i}function ua(e){return"number"==typeof e?e:ps(e)?m:+e}function pa(e){if("string"==typeof e)return e;if(Wo(e))return zt(e,pa)+"";if(ps(e))return Nr?Nr.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function da(e,t,r){var n=-1,a=At,i=e.length,o=!0,s=[],l=s;if(r)o=!1,a=Ot;else if(i>=200){var c=t?null:Ka(e);if(c)return ur(c);o=!1,a=Jt,l=new Zr}else l=t?[]:s;e:for(;++n<i;){var u=e[n],p=t?t(u):u;if(u=r||0!==u?u:0,o&&p==p){for(var d=l.length;d--;)if(l[d]===p)continue e;t&&l.push(p),s.push(u)}else a(l,p,r)||(l!==s&&l.push(p),s.push(u))}return s}function ha(e,t){return null==(e=Mi(e,t=xa(t,e)))||delete e[Fi(Qi(t))]}function fa(e,t,r,n){return ta(e,t,r(kn(e,t)),n)}function ma(e,t,r,n){for(var a=e.length,i=n?a:-1;(n?i--:++i<a)&&t(e[i],i,e););return r?ia(e,n?0:i,n?i+1:a):ia(e,n?i+1:0,n?a:i)}function ga(e,t){var r=e;return r instanceof Hr&&(r=r.value()),Lt(t,(function(e,t){return t.func.apply(t.thisArg,Rt([e],t.args))}),r)}function va(e,t,r){var a=e.length;if(a<2)return a?da(e[0]):[];for(var i=-1,o=n(a);++i<a;)for(var s=e[i],l=-1;++l<a;)l!=i&&(o[i]=hn(o[i]||s,e[l],t,r));return da(bn(o,1),t,r)}function ya(e,t,r){for(var n=-1,i=e.length,o=t.length,s={};++n<i;){var l=n<o?t[n]:a;r(s,e[n],l)}return s}function ba(e){return Yo(e)?e:[]}function _a(e){return"function"==typeof e?e:ol}function xa(e,t){return Wo(e)?e:wi(e,t)?[e]:$i(xs(e))}var wa=Qn;function Ea(e,t,r){var n=e.length;return r=r===a?n:r,!t&&r>=n?e:ia(e,t,r)}var Ca=pt||function(e){return ht.clearTimeout(e)};function ka(e,t){if(t)return e.slice();var r=e.length,n=Ge?Ge(r):new e.constructor(r);return e.copy(n),n}function Ta(e){var t=new e.constructor(e.byteLength);return new He(t).set(new He(e)),t}function Sa(e,t){var r=t?Ta(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Pa(e,t){if(e!==t){var r=e!==a,n=null===e,i=e==e,o=ps(e),s=t!==a,l=null===t,c=t==t,u=ps(t);if(!l&&!u&&!o&&e>t||o&&s&&c&&!l&&!u||n&&s&&c||!r&&c||!i)return 1;if(!n&&!o&&!u&&e<t||u&&r&&i&&!n&&!o||l&&r&&i||!s&&i||!c)return-1}return 0}function Ma(e,t,r,a){for(var i=-1,o=e.length,s=r.length,l=-1,c=t.length,u=br(o-s,0),p=n(c+u),d=!a;++l<c;)p[l]=t[l];for(;++i<s;)(d||i<o)&&(p[r[i]]=e[i]);for(;u--;)p[l++]=e[i++];return p}function Ia(e,t,r,a){for(var i=-1,o=e.length,s=-1,l=r.length,c=-1,u=t.length,p=br(o-l,0),d=n(p+u),h=!a;++i<p;)d[i]=e[i];for(var f=i;++c<u;)d[f+c]=t[c];for(;++s<l;)(h||i<o)&&(d[f+r[s]]=e[i++]);return d}function Aa(e,t){var r=-1,a=e.length;for(t||(t=n(a));++r<a;)t[r]=e[r];return t}function Oa(e,t,r,n){var i=!r;r||(r={});for(var o=-1,s=t.length;++o<s;){var l=t[o],c=n?n(r[l],e[l],l,r,e):a;c===a&&(c=e[l]),i?sn(r,l,c):rn(r,l,c)}return r}function za(e,t){return function(r,n){var a=Wo(r)?Tt:an,i=t?t():{};return a(r,e,ui(n,2),i)}}function Ra(e){return Qn((function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:a,s=i>2?r[2]:a;for(o=e.length>3&&"function"==typeof o?(i--,o):a,s&&xi(r[0],r[1],s)&&(o=i<3?a:o,i=1),t=Se(t);++n<i;){var l=r[n];l&&e(t,l,n,o)}return t}))}function La(e,t){return function(r,n){if(null==r)return r;if(!Zo(r))return e(r,n);for(var a=r.length,i=t?a:-1,o=Se(r);(t?i--:++i<a)&&!1!==n(o[i],i,o););return r}}function Da(e){return function(t,r,n){for(var a=-1,i=Se(t),o=n(t),s=o.length;s--;){var l=o[e?s:++a];if(!1===r(i[l],l,i))break}return t}}function Ba(e){return function(t){var r=or(t=xs(t))?hr(t):a,n=r?r[0]:t.charAt(0),i=r?Ea(r,1).join(""):t.slice(1);return n[e]()+i}}function $a(e){return function(t){return Lt(el(Gs(t).replace(Qe,"")),e,"")}}function Fa(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=jr(e.prototype),n=e.apply(r,t);return ns(n)?n:r}}function Na(e){return function(t,r,n){var i=Se(t);if(!Zo(t)){var o=ui(r,3);t=Rs(t),r=function(e){return o(i[e],e,i)}}var s=e(t,r,n);return s>-1?i[o?t[s]:s]:a}}function Va(e){return ai((function(t){var r=t.length,n=r,o=qr.prototype.thru;for(e&&t.reverse();n--;){var s=t[n];if("function"!=typeof s)throw new Ie(i);if(o&&!l&&"wrapper"==li(s))var l=new qr([],!0)}for(n=l?n:r;++n<r;){var c=li(s=t[n]),u="wrapper"==c?si(s):a;l=u&&Ei(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[li(u[0])].apply(l,u[3]):1==s.length&&Ei(s)?l[c]():l.thru(s)}return function(){var e=arguments,n=e[0];if(l&&1==e.length&&Wo(n))return l.plant(n).value();for(var a=0,i=r?t[a].apply(this,e):n;++a<r;)i=t[a].call(this,i);return i}}))}function ja(e,t,r,i,o,s,l,c,u,d){var h=t&p,f=1&t,m=2&t,g=24&t,v=512&t,y=m?a:Fa(e);return function a(){for(var p=arguments.length,b=n(p),_=p;_--;)b[_]=arguments[_];if(g)var x=ci(a),w=rr(b,x);if(i&&(b=Ma(b,i,o,g)),s&&(b=Ia(b,s,l,g)),p-=w,g&&p<d){var E=cr(b,x);return Za(e,t,ja,a.placeholder,r,b,E,c,u,d-p)}var C=f?r:this,k=m?C[e]:e;return p=b.length,c?b=Ii(b,c):v&&p>1&&b.reverse(),h&&u<p&&(b.length=u),this&&this!==ht&&this instanceof a&&(k=y||Fa(k)),k.apply(C,b)}}function Ua(e,t){return function(r,n){return function(e,t,r,n){return wn(e,(function(e,a,i){t(n,r(e),a,i)})),n}(r,e,t(n),{})}}function qa(e,t){return function(r,n){var i;if(r===a&&n===a)return t;if(r!==a&&(i=r),n!==a){if(i===a)return n;"string"==typeof r||"string"==typeof n?(r=pa(r),n=pa(n)):(r=ua(r),n=ua(n)),i=e(r,n)}return i}}function Ha(e){return ai((function(t){return t=zt(t,Kt(ui())),Qn((function(r){var n=this;return e(t,(function(e){return kt(e,n,r)}))}))}))}function Ga(e,t){var r=(t=t===a?" ":pa(t)).length;if(r<2)return r?Kn(t,e):t;var n=Kn(t,mt(e/dr(t)));return or(t)?Ea(hr(n),0,e).join(""):n.slice(0,e)}function Wa(e){return function(t,r,i){return i&&"number"!=typeof i&&xi(t,r,i)&&(r=i=a),t=gs(t),r===a?(r=t,t=0):r=gs(r),function(e,t,r,a){for(var i=-1,o=br(mt((t-e)/(r||1)),0),s=n(o);o--;)s[a?o:++i]=e,e+=r;return s}(t,r,i=i===a?t<r?1:-1:gs(i),e)}}function Xa(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=bs(t),r=bs(r)),e(t,r)}}function Za(e,t,r,n,i,o,s,l,p,d){var h=8&t;t|=h?c:u,4&(t&=~(h?u:c))||(t&=-4);var f=[e,t,i,h?o:a,h?s:a,h?a:o,h?a:s,l,p,d],m=r.apply(a,f);return Ei(e)&&Oi(m,f),m.placeholder=n,Li(m,e,t)}function Ya(e){var t=Te[e];return function(e,r){if(e=bs(e),(r=null==r?0:_r(vs(r),292))&&Gt(e)){var n=(xs(e)+"e").split("e");return+((n=(xs(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var Ka=Pr&&1/ur(new Pr([,-0]))[1]==h?function(e){return new Pr(e)}:pl;function Qa(e){return function(t){var r=gi(t);return r==k?sr(t):r==I?pr(t):function(e,t){return zt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Ja(e,t,r,o,h,f,m,g){var v=2&t;if(!v&&"function"!=typeof e)throw new Ie(i);var y=o?o.length:0;if(y||(t&=-97,o=h=a),m=m===a?m:br(vs(m),0),g=g===a?g:vs(g),y-=h?h.length:0,t&u){var b=o,_=h;o=h=a}var x=v?a:si(e),w=[e,t,r,o,h,b,_,f,m,g];if(x&&function(e,t){var r=e[1],n=t[1],a=r|n,i=a<131,o=n==p&&8==r||n==p&&r==d&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(!i&&!o)return e;1&n&&(e[2]=t[2],a|=1&r?0:4);var l=t[3];if(l){var c=e[3];e[3]=c?Ma(c,l,t[4]):l,e[4]=c?cr(e[3],s):t[4]}(l=t[5])&&(c=e[5],e[5]=c?Ia(c,l,t[6]):l,e[6]=c?cr(e[5],s):t[6]);(l=t[7])&&(e[7]=l);n&p&&(e[8]=null==e[8]?t[8]:_r(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=a}(w,x),e=w[0],t=w[1],r=w[2],o=w[3],h=w[4],!(g=w[9]=w[9]===a?v?0:e.length:br(w[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)E=8==t||t==l?function(e,t,r){var i=Fa(e);return function o(){for(var s=arguments.length,l=n(s),c=s,u=ci(o);c--;)l[c]=arguments[c];var p=s<3&&l[0]!==u&&l[s-1]!==u?[]:cr(l,u);return(s-=p.length)<r?Za(e,t,ja,o.placeholder,a,l,p,a,a,r-s):kt(this&&this!==ht&&this instanceof o?i:e,this,l)}}(e,t,g):t!=c&&33!=t||h.length?ja.apply(a,w):function(e,t,r,a){var i=1&t,o=Fa(e);return function t(){for(var s=-1,l=arguments.length,c=-1,u=a.length,p=n(u+l),d=this&&this!==ht&&this instanceof t?o:e;++c<u;)p[c]=a[c];for(;l--;)p[c++]=arguments[++s];return kt(d,i?r:this,p)}}(e,t,r,o);else var E=function(e,t,r){var n=1&t,a=Fa(e);return function t(){return(this&&this!==ht&&this instanceof t?a:e).apply(n?r:this,arguments)}}(e,t,r);return Li((x?ra:Oi)(E,w),e,t)}function ei(e,t,r,n){return e===a||Uo(e,ze[r])&&!De.call(n,r)?t:e}function ti(e,t,r,n,i,o){return ns(e)&&ns(t)&&(o.set(t,e),qn(e,t,a,ti,o),o.delete(t)),e}function ri(e){return ss(e)?a:e}function ni(e,t,r,n,i,o){var s=1&r,l=e.length,c=t.length;if(l!=c&&!(s&&c>l))return!1;var u=o.get(e),p=o.get(t);if(u&&p)return u==t&&p==e;var d=-1,h=!0,f=2&r?new Zr:a;for(o.set(e,t),o.set(t,e);++d<l;){var m=e[d],g=t[d];if(n)var v=s?n(g,m,d,t,e,o):n(m,g,d,e,t,o);if(v!==a){if(v)continue;h=!1;break}if(f){if(!Bt(t,(function(e,t){if(!Jt(f,t)&&(m===e||i(m,e,r,n,o)))return f.push(t)}))){h=!1;break}}else if(m!==g&&!i(m,g,r,n,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function ai(e){return Ri(Pi(e,a,Wi),e+"")}function ii(e){return Tn(e,Rs,fi)}function oi(e){return Tn(e,Ls,mi)}var si=Ar?function(e){return Ar.get(e)}:pl;function li(e){for(var t=e.name+"",r=Or[t],n=De.call(Or,t)?r.length:0;n--;){var a=r[n],i=a.func;if(null==i||i==e)return a.name}return t}function ci(e){return(De.call(Vr,"placeholder")?Vr:e).placeholder}function ui(){var e=Vr.iteratee||sl;return e=e===sl?Bn:e,arguments.length?e(arguments[0],arguments[1]):e}function pi(e,t){var r,n,a=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?a["string"==typeof t?"string":"hash"]:a.map}function di(e){for(var t=Rs(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,Ti(a)]}return t}function hi(e,t){var r=function(e,t){return null==e?a:e[t]}(e,t);return Dn(r)?r:a}var fi=yt?function(e){return null==e?[]:(e=Se(e),It(yt(e),(function(t){return Ze.call(e,t)})))}:yl,mi=yt?function(e){for(var t=[];e;)Rt(t,fi(e)),e=We(e);return t}:yl,gi=Sn;function vi(e,t,r){for(var n=-1,a=(t=xa(t,e)).length,i=!1;++n<a;){var o=Fi(t[n]);if(!(i=null!=e&&r(e,o)))break;e=e[o]}return i||++n!=a?i:!!(a=null==e?0:e.length)&&rs(a)&&_i(o,a)&&(Wo(e)||Go(e))}function yi(e){return"function"!=typeof e.constructor||ki(e)?{}:jr(We(e))}function bi(e){return Wo(e)||Go(e)||!!(Ke&&e&&e[Ke])}function _i(e,t){var r=typeof e;return!!(t=null==t?f:t)&&("number"==r||"symbol"!=r&&_e.test(e))&&e>-1&&e%1==0&&e<t}function xi(e,t,r){if(!ns(r))return!1;var n=typeof t;return!!("number"==n?Zo(r)&&_i(t,r.length):"string"==n&&t in r)&&Uo(r[t],e)}function wi(e,t){if(Wo(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!ps(e))||(re.test(e)||!te.test(e)||null!=t&&e in Se(t))}function Ei(e){var t=li(e),r=Vr[t];if("function"!=typeof r||!(t in Hr.prototype))return!1;if(e===r)return!0;var n=si(r);return!!n&&e===n[0]}(kr&&gi(new kr(new ArrayBuffer(1)))!=L||Tr&&gi(new Tr)!=k||Sr&&gi(Sr.resolve())!=P||Pr&&gi(new Pr)!=I||Mr&&gi(new Mr)!=z)&&(gi=function(e){var t=Sn(e),r=t==S?e.constructor:a,n=r?Ni(r):"";if(n)switch(n){case zr:return L;case Rr:return k;case Lr:return P;case Dr:return I;case Br:return z}return t});var Ci=Re?es:bl;function ki(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ze)}function Ti(e){return e==e&&!ns(e)}function Si(e,t){return function(r){return null!=r&&(r[e]===t&&(t!==a||e in Se(r)))}}function Pi(e,t,r){return t=br(t===a?e.length-1:t,0),function(){for(var a=arguments,i=-1,o=br(a.length-t,0),s=n(o);++i<o;)s[i]=a[t+i];i=-1;for(var l=n(t+1);++i<t;)l[i]=a[i];return l[t]=r(s),kt(e,this,l)}}function Mi(e,t){return t.length<2?e:kn(e,ia(t,0,-1))}function Ii(e,t){for(var r=e.length,n=_r(t.length,r),i=Aa(e);n--;){var o=t[n];e[n]=_i(o,r)?i[o]:a}return e}function Ai(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Oi=Di(ra),zi=ft||function(e,t){return ht.setTimeout(e,t)},Ri=Di(na);function Li(e,t,r){var n=t+"";return Ri(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return St(v,(function(r){var n="_."+r[0];t&r[1]&&!At(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(ue):[]}(n),r)))}function Di(e){var t=0,r=0;return function(){var n=xr(),i=16-(n-r);if(r=n,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(a,arguments)}}function Bi(e,t){var r=-1,n=e.length,i=n-1;for(t=t===a?n:t;++r<t;){var o=Yn(r,i),s=e[o];e[o]=e[r],e[r]=s}return e.length=t,e}var $i=function(e){var t=Bo(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ne,(function(e,r,n,a){t.push(n?a.replace(he,"$1"):r||e)})),t}));function Fi(e){if("string"==typeof e||ps(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ni(e){if(null!=e){try{return Le.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Vi(e){if(e instanceof Hr)return e.clone();var t=new qr(e.__wrapped__,e.__chain__);return t.__actions__=Aa(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var ji=Qn((function(e,t){return Yo(e)?hn(e,bn(t,1,Yo,!0)):[]})),Ui=Qn((function(e,t){var r=Qi(t);return Yo(r)&&(r=a),Yo(e)?hn(e,bn(t,1,Yo,!0),ui(r,2)):[]})),qi=Qn((function(e,t){var r=Qi(t);return Yo(r)&&(r=a),Yo(e)?hn(e,bn(t,1,Yo,!0),a,r):[]}));function Hi(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=null==r?0:vs(r);return a<0&&(a=br(n+a,0)),Nt(e,ui(t,3),a)}function Gi(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=n-1;return r!==a&&(i=vs(r),i=r<0?br(n+i,0):_r(i,n-1)),Nt(e,ui(t,3),i,!0)}function Wi(e){return(null==e?0:e.length)?bn(e,1):[]}function Xi(e){return e&&e.length?e[0]:a}var Zi=Qn((function(e){var t=zt(e,ba);return t.length&&t[0]===e[0]?An(t):[]})),Yi=Qn((function(e){var t=Qi(e),r=zt(e,ba);return t===Qi(r)?t=a:r.pop(),r.length&&r[0]===e[0]?An(r,ui(t,2)):[]})),Ki=Qn((function(e){var t=Qi(e),r=zt(e,ba);return(t="function"==typeof t?t:a)&&r.pop(),r.length&&r[0]===e[0]?An(r,a,t):[]}));function Qi(e){var t=null==e?0:e.length;return t?e[t-1]:a}var Ji=Qn(eo);function eo(e,t){return e&&e.length&&t&&t.length?Xn(e,t):e}var to=ai((function(e,t){var r=null==e?0:e.length,n=ln(e,t);return Zn(e,zt(t,(function(e){return _i(e,r)?+e:e})).sort(Pa)),n}));function ro(e){return null==e?e:Cr.call(e)}var no=Qn((function(e){return da(bn(e,1,Yo,!0))})),ao=Qn((function(e){var t=Qi(e);return Yo(t)&&(t=a),da(bn(e,1,Yo,!0),ui(t,2))})),io=Qn((function(e){var t=Qi(e);return t="function"==typeof t?t:a,da(bn(e,1,Yo,!0),a,t)}));function oo(e){if(!e||!e.length)return[];var t=0;return e=It(e,(function(e){if(Yo(e))return t=br(e.length,t),!0})),Zt(t,(function(t){return zt(e,Ht(t))}))}function so(e,t){if(!e||!e.length)return[];var r=oo(e);return null==t?r:zt(r,(function(e){return kt(t,a,e)}))}var lo=Qn((function(e,t){return Yo(e)?hn(e,t):[]})),co=Qn((function(e){return va(It(e,Yo))})),uo=Qn((function(e){var t=Qi(e);return Yo(t)&&(t=a),va(It(e,Yo),ui(t,2))})),po=Qn((function(e){var t=Qi(e);return t="function"==typeof t?t:a,va(It(e,Yo),a,t)})),ho=Qn(oo);var fo=Qn((function(e){var t=e.length,r=t>1?e[t-1]:a;return r="function"==typeof r?(e.pop(),r):a,so(e,r)}));function mo(e){var t=Vr(e);return t.__chain__=!0,t}function go(e,t){return t(e)}var vo=ai((function(e){var t=e.length,r=t?e[0]:0,n=this.__wrapped__,i=function(t){return ln(t,e)};return!(t>1||this.__actions__.length)&&n instanceof Hr&&_i(r)?((n=n.slice(r,+r+(t?1:0))).__actions__.push({func:go,args:[i],thisArg:a}),new qr(n,this.__chain__).thru((function(e){return t&&!e.length&&e.push(a),e}))):this.thru(i)}));var yo=za((function(e,t,r){De.call(e,r)?++e[r]:sn(e,r,1)}));var bo=Na(Hi),_o=Na(Gi);function xo(e,t){return(Wo(e)?St:fn)(e,ui(t,3))}function wo(e,t){return(Wo(e)?Pt:mn)(e,ui(t,3))}var Eo=za((function(e,t,r){De.call(e,r)?e[r].push(t):sn(e,r,[t])}));var Co=Qn((function(e,t,r){var a=-1,i="function"==typeof t,o=Zo(e)?n(e.length):[];return fn(e,(function(e){o[++a]=i?kt(t,e,r):On(e,t,r)})),o})),ko=za((function(e,t,r){sn(e,r,t)}));function To(e,t){return(Wo(e)?zt:Vn)(e,ui(t,3))}var So=za((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]}));var Po=Qn((function(e,t){if(null==e)return[];var r=t.length;return r>1&&xi(e,t[0],t[1])?t=[]:r>2&&xi(t[0],t[1],t[2])&&(t=[t[0]]),Gn(e,bn(t,1),[])})),Mo=dt||function(){return ht.Date.now()};function Io(e,t,r){return t=r?a:t,t=e&&null==t?e.length:t,Ja(e,p,a,a,a,a,t)}function Ao(e,t){var r;if("function"!=typeof t)throw new Ie(i);return e=vs(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=a),r}}var Oo=Qn((function(e,t,r){var n=1;if(r.length){var a=cr(r,ci(Oo));n|=c}return Ja(e,n,t,r,a)})),zo=Qn((function(e,t,r){var n=3;if(r.length){var a=cr(r,ci(zo));n|=c}return Ja(t,n,e,r,a)}));function Ro(e,t,r){var n,o,s,l,c,u,p=0,d=!1,h=!1,f=!0;if("function"!=typeof e)throw new Ie(i);function m(t){var r=n,i=o;return n=o=a,p=t,l=e.apply(i,r)}function g(e){return p=e,c=zi(y,t),d?m(e):l}function v(e){var r=e-u;return u===a||r>=t||r<0||h&&e-p>=s}function y(){var e=Mo();if(v(e))return b(e);c=zi(y,function(e){var r=t-(e-u);return h?_r(r,s-(e-p)):r}(e))}function b(e){return c=a,f&&n?m(e):(n=o=a,l)}function _(){var e=Mo(),r=v(e);if(n=arguments,o=this,u=e,r){if(c===a)return g(u);if(h)return Ca(c),c=zi(y,t),m(u)}return c===a&&(c=zi(y,t)),l}return t=bs(t)||0,ns(r)&&(d=!!r.leading,s=(h="maxWait"in r)?br(bs(r.maxWait)||0,t):s,f="trailing"in r?!!r.trailing:f),_.cancel=function(){c!==a&&Ca(c),p=0,n=u=o=c=a},_.flush=function(){return c===a?l:b(Mo())},_}var Lo=Qn((function(e,t){return dn(e,1,t)})),Do=Qn((function(e,t,r){return dn(e,bs(t)||0,r)}));function Bo(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ie(i);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(Bo.Cache||Xr),r}function $o(e){if("function"!=typeof e)throw new Ie(i);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Bo.Cache=Xr;var Fo=wa((function(e,t){var r=(t=1==t.length&&Wo(t[0])?zt(t[0],Kt(ui())):zt(bn(t,1),Kt(ui()))).length;return Qn((function(n){for(var a=-1,i=_r(n.length,r);++a<i;)n[a]=t[a].call(this,n[a]);return kt(e,this,n)}))})),No=Qn((function(e,t){var r=cr(t,ci(No));return Ja(e,c,a,t,r)})),Vo=Qn((function(e,t){var r=cr(t,ci(Vo));return Ja(e,u,a,t,r)})),jo=ai((function(e,t){return Ja(e,d,a,a,a,t)}));function Uo(e,t){return e===t||e!=e&&t!=t}var qo=Xa(Pn),Ho=Xa((function(e,t){return e>=t})),Go=zn(function(){return arguments}())?zn:function(e){return as(e)&&De.call(e,"callee")&&!Ze.call(e,"callee")},Wo=n.isArray,Xo=bt?Kt(bt):function(e){return as(e)&&Sn(e)==R};function Zo(e){return null!=e&&rs(e.length)&&!es(e)}function Yo(e){return as(e)&&Zo(e)}var Ko=$t||bl,Qo=_t?Kt(_t):function(e){return as(e)&&Sn(e)==x};function Jo(e){if(!as(e))return!1;var t=Sn(e);return t==w||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!ss(e)}function es(e){if(!ns(e))return!1;var t=Sn(e);return t==E||t==C||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ts(e){return"number"==typeof e&&e==vs(e)}function rs(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=f}function ns(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function as(e){return null!=e&&"object"==typeof e}var is=xt?Kt(xt):function(e){return as(e)&&gi(e)==k};function os(e){return"number"==typeof e||as(e)&&Sn(e)==T}function ss(e){if(!as(e)||Sn(e)!=S)return!1;var t=We(e);if(null===t)return!0;var r=De.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Le.call(r)==Ne}var ls=wt?Kt(wt):function(e){return as(e)&&Sn(e)==M};var cs=Et?Kt(Et):function(e){return as(e)&&gi(e)==I};function us(e){return"string"==typeof e||!Wo(e)&&as(e)&&Sn(e)==A}function ps(e){return"symbol"==typeof e||as(e)&&Sn(e)==O}var ds=Ct?Kt(Ct):function(e){return as(e)&&rs(e.length)&&!!ot[Sn(e)]};var hs=Xa(Nn),fs=Xa((function(e,t){return e<=t}));function ms(e){if(!e)return[];if(Zo(e))return us(e)?hr(e):Aa(e);if(et&&e[et])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[et]());var t=gi(e);return(t==k?sr:t==I?ur:Us)(e)}function gs(e){return e?(e=bs(e))===h||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function vs(e){var t=gs(e),r=t%1;return t==t?r?t-r:t:0}function ys(e){return e?cn(vs(e),0,g):0}function bs(e){if("number"==typeof e)return e;if(ps(e))return m;if(ns(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ns(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Yt(e);var r=ve.test(e);return r||be.test(e)?ut(e.slice(2),r?2:8):ge.test(e)?m:+e}function _s(e){return Oa(e,Ls(e))}function xs(e){return null==e?"":pa(e)}var ws=Ra((function(e,t){if(ki(t)||Zo(t))Oa(t,Rs(t),e);else for(var r in t)De.call(t,r)&&rn(e,r,t[r])})),Es=Ra((function(e,t){Oa(t,Ls(t),e)})),Cs=Ra((function(e,t,r,n){Oa(t,Ls(t),e,n)})),ks=Ra((function(e,t,r,n){Oa(t,Rs(t),e,n)})),Ts=ai(ln);var Ss=Qn((function(e,t){e=Se(e);var r=-1,n=t.length,i=n>2?t[2]:a;for(i&&xi(t[0],t[1],i)&&(n=1);++r<n;)for(var o=t[r],s=Ls(o),l=-1,c=s.length;++l<c;){var u=s[l],p=e[u];(p===a||Uo(p,ze[u])&&!De.call(e,u))&&(e[u]=o[u])}return e})),Ps=Qn((function(e){return e.push(a,ti),kt(Bs,a,e)}));function Ms(e,t,r){var n=null==e?a:kn(e,t);return n===a?r:n}function Is(e,t){return null!=e&&vi(e,t,In)}var As=Ua((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),e[t]=r}),nl(ol)),Os=Ua((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),De.call(e,t)?e[t].push(r):e[t]=[r]}),ui),zs=Qn(On);function Rs(e){return Zo(e)?Kr(e):$n(e)}function Ls(e){return Zo(e)?Kr(e,!0):Fn(e)}var Ds=Ra((function(e,t,r){qn(e,t,r)})),Bs=Ra((function(e,t,r,n){qn(e,t,r,n)})),$s=ai((function(e,t){var r={};if(null==e)return r;var n=!1;t=zt(t,(function(t){return t=xa(t,e),n||(n=t.length>1),t})),Oa(e,oi(e),r),n&&(r=un(r,7,ri));for(var a=t.length;a--;)ha(r,t[a]);return r}));var Fs=ai((function(e,t){return null==e?{}:function(e,t){return Wn(e,t,(function(t,r){return Is(e,r)}))}(e,t)}));function Ns(e,t){if(null==e)return{};var r=zt(oi(e),(function(e){return[e]}));return t=ui(t),Wn(e,r,(function(e,r){return t(e,r[0])}))}var Vs=Qa(Rs),js=Qa(Ls);function Us(e){return null==e?[]:Qt(e,Rs(e))}var qs=$a((function(e,t,r){return t=t.toLowerCase(),e+(r?Hs(t):t)}));function Hs(e){return Js(xs(e).toLowerCase())}function Gs(e){return(e=xs(e))&&e.replace(xe,nr).replace(Je,"")}var Ws=$a((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),Xs=$a((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),Zs=Ba("toLowerCase");var Ys=$a((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}));var Ks=$a((function(e,t,r){return e+(r?" ":"")+Js(t)}));var Qs=$a((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()})),Js=Ba("toUpperCase");function el(e,t,r){return e=xs(e),(t=r?a:t)===a?function(e){return nt.test(e)}(e)?function(e){return e.match(tt)||[]}(e):function(e){return e.match(pe)||[]}(e):e.match(t)||[]}var tl=Qn((function(e,t){try{return kt(e,a,t)}catch(e){return Jo(e)?e:new Ce(e)}})),rl=ai((function(e,t){return St(t,(function(t){t=Fi(t),sn(e,t,Oo(e[t],e))})),e}));function nl(e){return function(){return e}}var al=Va(),il=Va(!0);function ol(e){return e}function sl(e){return Bn("function"==typeof e?e:un(e,1))}var ll=Qn((function(e,t){return function(r){return On(r,e,t)}})),cl=Qn((function(e,t){return function(r){return On(e,r,t)}}));function ul(e,t,r){var n=Rs(t),a=Cn(t,n);null!=r||ns(t)&&(a.length||!n.length)||(r=t,t=e,e=this,a=Cn(t,Rs(t)));var i=!(ns(r)&&"chain"in r&&!r.chain),o=es(e);return St(a,(function(r){var n=t[r];e[r]=n,o&&(e.prototype[r]=function(){var t=this.__chain__;if(i||t){var r=e(this.__wrapped__),a=r.__actions__=Aa(this.__actions__);return a.push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,Rt([this.value()],arguments))})})),e}function pl(){}var dl=Ha(zt),hl=Ha(Mt),fl=Ha(Bt);function ml(e){return wi(e)?Ht(Fi(e)):function(e){return function(t){return kn(t,e)}}(e)}var gl=Wa(),vl=Wa(!0);function yl(){return[]}function bl(){return!1}var _l=qa((function(e,t){return e+t}),0),xl=Ya("ceil"),wl=qa((function(e,t){return e/t}),1),El=Ya("floor");var Cl,kl=qa((function(e,t){return e*t}),1),Tl=Ya("round"),Sl=qa((function(e,t){return e-t}),0);return Vr.after=function(e,t){if("function"!=typeof t)throw new Ie(i);return e=vs(e),function(){if(--e<1)return t.apply(this,arguments)}},Vr.ary=Io,Vr.assign=ws,Vr.assignIn=Es,Vr.assignInWith=Cs,Vr.assignWith=ks,Vr.at=Ts,Vr.before=Ao,Vr.bind=Oo,Vr.bindAll=rl,Vr.bindKey=zo,Vr.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Wo(e)?e:[e]},Vr.chain=mo,Vr.chunk=function(e,t,r){t=(r?xi(e,t,r):t===a)?1:br(vs(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,s=0,l=n(mt(i/t));o<i;)l[s++]=ia(e,o,o+=t);return l},Vr.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,a=[];++t<r;){var i=e[t];i&&(a[n++]=i)}return a},Vr.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],a=e;a--;)t[a-1]=arguments[a];return Rt(Wo(r)?Aa(r):[r],bn(t,1))},Vr.cond=function(e){var t=null==e?0:e.length,r=ui();return e=t?zt(e,(function(e){if("function"!=typeof e[1])throw new Ie(i);return[r(e[0]),e[1]]})):[],Qn((function(r){for(var n=-1;++n<t;){var a=e[n];if(kt(a[0],this,r))return kt(a[1],this,r)}}))},Vr.conforms=function(e){return function(e){var t=Rs(e);return function(r){return pn(r,e,t)}}(un(e,1))},Vr.constant=nl,Vr.countBy=yo,Vr.create=function(e,t){var r=jr(e);return null==t?r:on(r,t)},Vr.curry=function e(t,r,n){var i=Ja(t,8,a,a,a,a,a,r=n?a:r);return i.placeholder=e.placeholder,i},Vr.curryRight=function e(t,r,n){var i=Ja(t,l,a,a,a,a,a,r=n?a:r);return i.placeholder=e.placeholder,i},Vr.debounce=Ro,Vr.defaults=Ss,Vr.defaultsDeep=Ps,Vr.defer=Lo,Vr.delay=Do,Vr.difference=ji,Vr.differenceBy=Ui,Vr.differenceWith=qi,Vr.drop=function(e,t,r){var n=null==e?0:e.length;return n?ia(e,(t=r||t===a?1:vs(t))<0?0:t,n):[]},Vr.dropRight=function(e,t,r){var n=null==e?0:e.length;return n?ia(e,0,(t=n-(t=r||t===a?1:vs(t)))<0?0:t):[]},Vr.dropRightWhile=function(e,t){return e&&e.length?ma(e,ui(t,3),!0,!0):[]},Vr.dropWhile=function(e,t){return e&&e.length?ma(e,ui(t,3),!0):[]},Vr.fill=function(e,t,r,n){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&xi(e,t,r)&&(r=0,n=i),function(e,t,r,n){var i=e.length;for((r=vs(r))<0&&(r=-r>i?0:i+r),(n=n===a||n>i?i:vs(n))<0&&(n+=i),n=r>n?0:ys(n);r<n;)e[r++]=t;return e}(e,t,r,n)):[]},Vr.filter=function(e,t){return(Wo(e)?It:yn)(e,ui(t,3))},Vr.flatMap=function(e,t){return bn(To(e,t),1)},Vr.flatMapDeep=function(e,t){return bn(To(e,t),h)},Vr.flatMapDepth=function(e,t,r){return r=r===a?1:vs(r),bn(To(e,t),r)},Vr.flatten=Wi,Vr.flattenDeep=function(e){return(null==e?0:e.length)?bn(e,h):[]},Vr.flattenDepth=function(e,t){return(null==e?0:e.length)?bn(e,t=t===a?1:vs(t)):[]},Vr.flip=function(e){return Ja(e,512)},Vr.flow=al,Vr.flowRight=il,Vr.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var a=e[t];n[a[0]]=a[1]}return n},Vr.functions=function(e){return null==e?[]:Cn(e,Rs(e))},Vr.functionsIn=function(e){return null==e?[]:Cn(e,Ls(e))},Vr.groupBy=Eo,Vr.initial=function(e){return(null==e?0:e.length)?ia(e,0,-1):[]},Vr.intersection=Zi,Vr.intersectionBy=Yi,Vr.intersectionWith=Ki,Vr.invert=As,Vr.invertBy=Os,Vr.invokeMap=Co,Vr.iteratee=sl,Vr.keyBy=ko,Vr.keys=Rs,Vr.keysIn=Ls,Vr.map=To,Vr.mapKeys=function(e,t){var r={};return t=ui(t,3),wn(e,(function(e,n,a){sn(r,t(e,n,a),e)})),r},Vr.mapValues=function(e,t){var r={};return t=ui(t,3),wn(e,(function(e,n,a){sn(r,n,t(e,n,a))})),r},Vr.matches=function(e){return jn(un(e,1))},Vr.matchesProperty=function(e,t){return Un(e,un(t,1))},Vr.memoize=Bo,Vr.merge=Ds,Vr.mergeWith=Bs,Vr.method=ll,Vr.methodOf=cl,Vr.mixin=ul,Vr.negate=$o,Vr.nthArg=function(e){return e=vs(e),Qn((function(t){return Hn(t,e)}))},Vr.omit=$s,Vr.omitBy=function(e,t){return Ns(e,$o(ui(t)))},Vr.once=function(e){return Ao(2,e)},Vr.orderBy=function(e,t,r,n){return null==e?[]:(Wo(t)||(t=null==t?[]:[t]),Wo(r=n?a:r)||(r=null==r?[]:[r]),Gn(e,t,r))},Vr.over=dl,Vr.overArgs=Fo,Vr.overEvery=hl,Vr.overSome=fl,Vr.partial=No,Vr.partialRight=Vo,Vr.partition=So,Vr.pick=Fs,Vr.pickBy=Ns,Vr.property=ml,Vr.propertyOf=function(e){return function(t){return null==e?a:kn(e,t)}},Vr.pull=Ji,Vr.pullAll=eo,Vr.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?Xn(e,t,ui(r,2)):e},Vr.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?Xn(e,t,a,r):e},Vr.pullAt=to,Vr.range=gl,Vr.rangeRight=vl,Vr.rearg=jo,Vr.reject=function(e,t){return(Wo(e)?It:yn)(e,$o(ui(t,3)))},Vr.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,a=[],i=e.length;for(t=ui(t,3);++n<i;){var o=e[n];t(o,n,e)&&(r.push(o),a.push(n))}return Zn(e,a),r},Vr.rest=function(e,t){if("function"!=typeof e)throw new Ie(i);return Qn(e,t=t===a?t:vs(t))},Vr.reverse=ro,Vr.sampleSize=function(e,t,r){return t=(r?xi(e,t,r):t===a)?1:vs(t),(Wo(e)?Jr:ea)(e,t)},Vr.set=function(e,t,r){return null==e?e:ta(e,t,r)},Vr.setWith=function(e,t,r,n){return n="function"==typeof n?n:a,null==e?e:ta(e,t,r,n)},Vr.shuffle=function(e){return(Wo(e)?en:aa)(e)},Vr.slice=function(e,t,r){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&xi(e,t,r)?(t=0,r=n):(t=null==t?0:vs(t),r=r===a?n:vs(r)),ia(e,t,r)):[]},Vr.sortBy=Po,Vr.sortedUniq=function(e){return e&&e.length?ca(e):[]},Vr.sortedUniqBy=function(e,t){return e&&e.length?ca(e,ui(t,2)):[]},Vr.split=function(e,t,r){return r&&"number"!=typeof r&&xi(e,t,r)&&(t=r=a),(r=r===a?g:r>>>0)?(e=xs(e))&&("string"==typeof t||null!=t&&!ls(t))&&!(t=pa(t))&&or(e)?Ea(hr(e),0,r):e.split(t,r):[]},Vr.spread=function(e,t){if("function"!=typeof e)throw new Ie(i);return t=null==t?0:br(vs(t),0),Qn((function(r){var n=r[t],a=Ea(r,0,t);return n&&Rt(a,n),kt(e,this,a)}))},Vr.tail=function(e){var t=null==e?0:e.length;return t?ia(e,1,t):[]},Vr.take=function(e,t,r){return e&&e.length?ia(e,0,(t=r||t===a?1:vs(t))<0?0:t):[]},Vr.takeRight=function(e,t,r){var n=null==e?0:e.length;return n?ia(e,(t=n-(t=r||t===a?1:vs(t)))<0?0:t,n):[]},Vr.takeRightWhile=function(e,t){return e&&e.length?ma(e,ui(t,3),!1,!0):[]},Vr.takeWhile=function(e,t){return e&&e.length?ma(e,ui(t,3)):[]},Vr.tap=function(e,t){return t(e),e},Vr.throttle=function(e,t,r){var n=!0,a=!0;if("function"!=typeof e)throw new Ie(i);return ns(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),Ro(e,t,{leading:n,maxWait:t,trailing:a})},Vr.thru=go,Vr.toArray=ms,Vr.toPairs=Vs,Vr.toPairsIn=js,Vr.toPath=function(e){return Wo(e)?zt(e,Fi):ps(e)?[e]:Aa($i(xs(e)))},Vr.toPlainObject=_s,Vr.transform=function(e,t,r){var n=Wo(e),a=n||Ko(e)||ds(e);if(t=ui(t,4),null==r){var i=e&&e.constructor;r=a?n?new i:[]:ns(e)&&es(i)?jr(We(e)):{}}return(a?St:wn)(e,(function(e,n,a){return t(r,e,n,a)})),r},Vr.unary=function(e){return Io(e,1)},Vr.union=no,Vr.unionBy=ao,Vr.unionWith=io,Vr.uniq=function(e){return e&&e.length?da(e):[]},Vr.uniqBy=function(e,t){return e&&e.length?da(e,ui(t,2)):[]},Vr.uniqWith=function(e,t){return t="function"==typeof t?t:a,e&&e.length?da(e,a,t):[]},Vr.unset=function(e,t){return null==e||ha(e,t)},Vr.unzip=oo,Vr.unzipWith=so,Vr.update=function(e,t,r){return null==e?e:fa(e,t,_a(r))},Vr.updateWith=function(e,t,r,n){return n="function"==typeof n?n:a,null==e?e:fa(e,t,_a(r),n)},Vr.values=Us,Vr.valuesIn=function(e){return null==e?[]:Qt(e,Ls(e))},Vr.without=lo,Vr.words=el,Vr.wrap=function(e,t){return No(_a(t),e)},Vr.xor=co,Vr.xorBy=uo,Vr.xorWith=po,Vr.zip=ho,Vr.zipObject=function(e,t){return ya(e||[],t||[],rn)},Vr.zipObjectDeep=function(e,t){return ya(e||[],t||[],ta)},Vr.zipWith=fo,Vr.entries=Vs,Vr.entriesIn=js,Vr.extend=Es,Vr.extendWith=Cs,ul(Vr,Vr),Vr.add=_l,Vr.attempt=tl,Vr.camelCase=qs,Vr.capitalize=Hs,Vr.ceil=xl,Vr.clamp=function(e,t,r){return r===a&&(r=t,t=a),r!==a&&(r=(r=bs(r))==r?r:0),t!==a&&(t=(t=bs(t))==t?t:0),cn(bs(e),t,r)},Vr.clone=function(e){return un(e,4)},Vr.cloneDeep=function(e){return un(e,5)},Vr.cloneDeepWith=function(e,t){return un(e,5,t="function"==typeof t?t:a)},Vr.cloneWith=function(e,t){return un(e,4,t="function"==typeof t?t:a)},Vr.conformsTo=function(e,t){return null==t||pn(e,t,Rs(t))},Vr.deburr=Gs,Vr.defaultTo=function(e,t){return null==e||e!=e?t:e},Vr.divide=wl,Vr.endsWith=function(e,t,r){e=xs(e),t=pa(t);var n=e.length,i=r=r===a?n:cn(vs(r),0,n);return(r-=t.length)>=0&&e.slice(r,i)==t},Vr.eq=Uo,Vr.escape=function(e){return(e=xs(e))&&K.test(e)?e.replace(Z,ar):e},Vr.escapeRegExp=function(e){return(e=xs(e))&&ie.test(e)?e.replace(ae,"\\$&"):e},Vr.every=function(e,t,r){var n=Wo(e)?Mt:gn;return r&&xi(e,t,r)&&(t=a),n(e,ui(t,3))},Vr.find=bo,Vr.findIndex=Hi,Vr.findKey=function(e,t){return Ft(e,ui(t,3),wn)},Vr.findLast=_o,Vr.findLastIndex=Gi,Vr.findLastKey=function(e,t){return Ft(e,ui(t,3),En)},Vr.floor=El,Vr.forEach=xo,Vr.forEachRight=wo,Vr.forIn=function(e,t){return null==e?e:_n(e,ui(t,3),Ls)},Vr.forInRight=function(e,t){return null==e?e:xn(e,ui(t,3),Ls)},Vr.forOwn=function(e,t){return e&&wn(e,ui(t,3))},Vr.forOwnRight=function(e,t){return e&&En(e,ui(t,3))},Vr.get=Ms,Vr.gt=qo,Vr.gte=Ho,Vr.has=function(e,t){return null!=e&&vi(e,t,Mn)},Vr.hasIn=Is,Vr.head=Xi,Vr.identity=ol,Vr.includes=function(e,t,r,n){e=Zo(e)?e:Us(e),r=r&&!n?vs(r):0;var a=e.length;return r<0&&(r=br(a+r,0)),us(e)?r<=a&&e.indexOf(t,r)>-1:!!a&&Vt(e,t,r)>-1},Vr.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=null==r?0:vs(r);return a<0&&(a=br(n+a,0)),Vt(e,t,a)},Vr.inRange=function(e,t,r){return t=gs(t),r===a?(r=t,t=0):r=gs(r),function(e,t,r){return e>=_r(t,r)&&e<br(t,r)}(e=bs(e),t,r)},Vr.invoke=zs,Vr.isArguments=Go,Vr.isArray=Wo,Vr.isArrayBuffer=Xo,Vr.isArrayLike=Zo,Vr.isArrayLikeObject=Yo,Vr.isBoolean=function(e){return!0===e||!1===e||as(e)&&Sn(e)==_},Vr.isBuffer=Ko,Vr.isDate=Qo,Vr.isElement=function(e){return as(e)&&1===e.nodeType&&!ss(e)},Vr.isEmpty=function(e){if(null==e)return!0;if(Zo(e)&&(Wo(e)||"string"==typeof e||"function"==typeof e.splice||Ko(e)||ds(e)||Go(e)))return!e.length;var t=gi(e);if(t==k||t==I)return!e.size;if(ki(e))return!$n(e).length;for(var r in e)if(De.call(e,r))return!1;return!0},Vr.isEqual=function(e,t){return Rn(e,t)},Vr.isEqualWith=function(e,t,r){var n=(r="function"==typeof r?r:a)?r(e,t):a;return n===a?Rn(e,t,a,r):!!n},Vr.isError=Jo,Vr.isFinite=function(e){return"number"==typeof e&&Gt(e)},Vr.isFunction=es,Vr.isInteger=ts,Vr.isLength=rs,Vr.isMap=is,Vr.isMatch=function(e,t){return e===t||Ln(e,t,di(t))},Vr.isMatchWith=function(e,t,r){return r="function"==typeof r?r:a,Ln(e,t,di(t),r)},Vr.isNaN=function(e){return os(e)&&e!=+e},Vr.isNative=function(e){if(Ci(e))throw new Ce("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Dn(e)},Vr.isNil=function(e){return null==e},Vr.isNull=function(e){return null===e},Vr.isNumber=os,Vr.isObject=ns,Vr.isObjectLike=as,Vr.isPlainObject=ss,Vr.isRegExp=ls,Vr.isSafeInteger=function(e){return ts(e)&&e>=-9007199254740991&&e<=f},Vr.isSet=cs,Vr.isString=us,Vr.isSymbol=ps,Vr.isTypedArray=ds,Vr.isUndefined=function(e){return e===a},Vr.isWeakMap=function(e){return as(e)&&gi(e)==z},Vr.isWeakSet=function(e){return as(e)&&"[object WeakSet]"==Sn(e)},Vr.join=function(e,t){return null==e?"":vr.call(e,t)},Vr.kebabCase=Ws,Vr.last=Qi,Vr.lastIndexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=n;return r!==a&&(i=(i=vs(r))<0?br(n+i,0):_r(i,n-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,i):Nt(e,Ut,i,!0)},Vr.lowerCase=Xs,Vr.lowerFirst=Zs,Vr.lt=hs,Vr.lte=fs,Vr.max=function(e){return e&&e.length?vn(e,ol,Pn):a},Vr.maxBy=function(e,t){return e&&e.length?vn(e,ui(t,2),Pn):a},Vr.mean=function(e){return qt(e,ol)},Vr.meanBy=function(e,t){return qt(e,ui(t,2))},Vr.min=function(e){return e&&e.length?vn(e,ol,Nn):a},Vr.minBy=function(e,t){return e&&e.length?vn(e,ui(t,2),Nn):a},Vr.stubArray=yl,Vr.stubFalse=bl,Vr.stubObject=function(){return{}},Vr.stubString=function(){return""},Vr.stubTrue=function(){return!0},Vr.multiply=kl,Vr.nth=function(e,t){return e&&e.length?Hn(e,vs(t)):a},Vr.noConflict=function(){return ht._===this&&(ht._=Ve),this},Vr.noop=pl,Vr.now=Mo,Vr.pad=function(e,t,r){e=xs(e);var n=(t=vs(t))?dr(e):0;if(!t||n>=t)return e;var a=(t-n)/2;return Ga(vt(a),r)+e+Ga(mt(a),r)},Vr.padEnd=function(e,t,r){e=xs(e);var n=(t=vs(t))?dr(e):0;return t&&n<t?e+Ga(t-n,r):e},Vr.padStart=function(e,t,r){e=xs(e);var n=(t=vs(t))?dr(e):0;return t&&n<t?Ga(t-n,r)+e:e},Vr.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),wr(xs(e).replace(oe,""),t||0)},Vr.random=function(e,t,r){if(r&&"boolean"!=typeof r&&xi(e,t,r)&&(t=r=a),r===a&&("boolean"==typeof t?(r=t,t=a):"boolean"==typeof e&&(r=e,e=a)),e===a&&t===a?(e=0,t=1):(e=gs(e),t===a?(t=e,e=0):t=gs(t)),e>t){var n=e;e=t,t=n}if(r||e%1||t%1){var i=Er();return _r(e+i*(t-e+ct("1e-"+((i+"").length-1))),t)}return Yn(e,t)},Vr.reduce=function(e,t,r){var n=Wo(e)?Lt:Wt,a=arguments.length<3;return n(e,ui(t,4),r,a,fn)},Vr.reduceRight=function(e,t,r){var n=Wo(e)?Dt:Wt,a=arguments.length<3;return n(e,ui(t,4),r,a,mn)},Vr.repeat=function(e,t,r){return t=(r?xi(e,t,r):t===a)?1:vs(t),Kn(xs(e),t)},Vr.replace=function(){var e=arguments,t=xs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Vr.result=function(e,t,r){var n=-1,i=(t=xa(t,e)).length;for(i||(i=1,e=a);++n<i;){var o=null==e?a:e[Fi(t[n])];o===a&&(n=i,o=r),e=es(o)?o.call(e):o}return e},Vr.round=Tl,Vr.runInContext=e,Vr.sample=function(e){return(Wo(e)?Qr:Jn)(e)},Vr.size=function(e){if(null==e)return 0;if(Zo(e))return us(e)?dr(e):e.length;var t=gi(e);return t==k||t==I?e.size:$n(e).length},Vr.snakeCase=Ys,Vr.some=function(e,t,r){var n=Wo(e)?Bt:oa;return r&&xi(e,t,r)&&(t=a),n(e,ui(t,3))},Vr.sortedIndex=function(e,t){return sa(e,t)},Vr.sortedIndexBy=function(e,t,r){return la(e,t,ui(r,2))},Vr.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=sa(e,t);if(n<r&&Uo(e[n],t))return n}return-1},Vr.sortedLastIndex=function(e,t){return sa(e,t,!0)},Vr.sortedLastIndexBy=function(e,t,r){return la(e,t,ui(r,2),!0)},Vr.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var r=sa(e,t,!0)-1;if(Uo(e[r],t))return r}return-1},Vr.startCase=Ks,Vr.startsWith=function(e,t,r){return e=xs(e),r=null==r?0:cn(vs(r),0,e.length),t=pa(t),e.slice(r,r+t.length)==t},Vr.subtract=Sl,Vr.sum=function(e){return e&&e.length?Xt(e,ol):0},Vr.sumBy=function(e,t){return e&&e.length?Xt(e,ui(t,2)):0},Vr.template=function(e,t,r){var n=Vr.templateSettings;r&&xi(e,t,r)&&(t=a),e=xs(e),t=Cs({},t,n,ei);var i,o,s=Cs({},t.imports,n.imports,ei),l=Rs(s),c=Qt(s,l),u=0,p=t.interpolate||we,d="__p += '",h=Pe((t.escape||we).source+"|"+p.source+"|"+(p===ee?fe:we).source+"|"+(t.evaluate||we).source+"|$","g"),f="//# sourceURL="+(De.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++it+"]")+"\n";e.replace(h,(function(t,r,n,a,s,l){return n||(n=a),d+=e.slice(u,l).replace(Ee,ir),r&&(i=!0,d+="' +\n__e("+r+") +\n'"),s&&(o=!0,d+="';\n"+s+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),u=l+t.length,t})),d+="';\n";var m=De.call(t,"variable")&&t.variable;if(m){if(de.test(m))throw new Ce("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(o?d.replace(H,""):d).replace(G,"$1").replace(W,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=tl((function(){return ke(l,f+"return "+d).apply(a,c)}));if(g.source=d,Jo(g))throw g;return g},Vr.times=function(e,t){if((e=vs(e))<1||e>f)return[];var r=g,n=_r(e,g);t=ui(t),e-=g;for(var a=Zt(n,t);++r<e;)t(r);return a},Vr.toFinite=gs,Vr.toInteger=vs,Vr.toLength=ys,Vr.toLower=function(e){return xs(e).toLowerCase()},Vr.toNumber=bs,Vr.toSafeInteger=function(e){return e?cn(vs(e),-9007199254740991,f):0===e?e:0},Vr.toString=xs,Vr.toUpper=function(e){return xs(e).toUpperCase()},Vr.trim=function(e,t,r){if((e=xs(e))&&(r||t===a))return Yt(e);if(!e||!(t=pa(t)))return e;var n=hr(e),i=hr(t);return Ea(n,er(n,i),tr(n,i)+1).join("")},Vr.trimEnd=function(e,t,r){if((e=xs(e))&&(r||t===a))return e.slice(0,fr(e)+1);if(!e||!(t=pa(t)))return e;var n=hr(e);return Ea(n,0,tr(n,hr(t))+1).join("")},Vr.trimStart=function(e,t,r){if((e=xs(e))&&(r||t===a))return e.replace(oe,"");if(!e||!(t=pa(t)))return e;var n=hr(e);return Ea(n,er(n,hr(t))).join("")},Vr.truncate=function(e,t){var r=30,n="...";if(ns(t)){var i="separator"in t?t.separator:i;r="length"in t?vs(t.length):r,n="omission"in t?pa(t.omission):n}var o=(e=xs(e)).length;if(or(e)){var s=hr(e);o=s.length}if(r>=o)return e;var l=r-dr(n);if(l<1)return n;var c=s?Ea(s,0,l).join(""):e.slice(0,l);if(i===a)return c+n;if(s&&(l+=c.length-l),ls(i)){if(e.slice(l).search(i)){var u,p=c;for(i.global||(i=Pe(i.source,xs(me.exec(i))+"g")),i.lastIndex=0;u=i.exec(p);)var d=u.index;c=c.slice(0,d===a?l:d)}}else if(e.indexOf(pa(i),l)!=l){var h=c.lastIndexOf(i);h>-1&&(c=c.slice(0,h))}return c+n},Vr.unescape=function(e){return(e=xs(e))&&Y.test(e)?e.replace(X,mr):e},Vr.uniqueId=function(e){var t=++Be;return xs(e)+t},Vr.upperCase=Qs,Vr.upperFirst=Js,Vr.each=xo,Vr.eachRight=wo,Vr.first=Xi,ul(Vr,(Cl={},wn(Vr,(function(e,t){De.call(Vr.prototype,t)||(Cl[t]=e)})),Cl),{chain:!1}),Vr.VERSION="4.17.21",St(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Vr[e].placeholder=Vr})),St(["drop","take"],(function(e,t){Hr.prototype[e]=function(r){r=r===a?1:br(vs(r),0);var n=this.__filtered__&&!t?new Hr(this):this.clone();return n.__filtered__?n.__takeCount__=_r(r,n.__takeCount__):n.__views__.push({size:_r(r,g),type:e+(n.__dir__<0?"Right":"")}),n},Hr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),St(["filter","map","takeWhile"],(function(e,t){var r=t+1,n=1==r||3==r;Hr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ui(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}})),St(["head","last"],(function(e,t){var r="take"+(t?"Right":"");Hr.prototype[e]=function(){return this[r](1).value()[0]}})),St(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");Hr.prototype[e]=function(){return this.__filtered__?new Hr(this):this[r](1)}})),Hr.prototype.compact=function(){return this.filter(ol)},Hr.prototype.find=function(e){return this.filter(e).head()},Hr.prototype.findLast=function(e){return this.reverse().find(e)},Hr.prototype.invokeMap=Qn((function(e,t){return"function"==typeof e?new Hr(this):this.map((function(r){return On(r,e,t)}))})),Hr.prototype.reject=function(e){return this.filter($o(ui(e)))},Hr.prototype.slice=function(e,t){e=vs(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Hr(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==a&&(r=(t=vs(t))<0?r.dropRight(-t):r.take(t-e)),r)},Hr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Hr.prototype.toArray=function(){return this.take(g)},wn(Hr.prototype,(function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),i=Vr[n?"take"+("last"==t?"Right":""):t],o=n||/^find/.test(t);i&&(Vr.prototype[t]=function(){var t=this.__wrapped__,s=n?[1]:arguments,l=t instanceof Hr,c=s[0],u=l||Wo(t),p=function(e){var t=i.apply(Vr,Rt([e],s));return n&&d?t[0]:t};u&&r&&"function"==typeof c&&1!=c.length&&(l=u=!1);var d=this.__chain__,h=!!this.__actions__.length,f=o&&!d,m=l&&!h;if(!o&&u){t=m?t:new Hr(this);var g=e.apply(t,s);return g.__actions__.push({func:go,args:[p],thisArg:a}),new qr(g,d)}return f&&m?e.apply(this,s):(g=this.thru(p),f?n?g.value()[0]:g.value():g)})})),St(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ae[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Vr.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var a=this.value();return t.apply(Wo(a)?a:[],e)}return this[r]((function(r){return t.apply(Wo(r)?r:[],e)}))}})),wn(Hr.prototype,(function(e,t){var r=Vr[t];if(r){var n=r.name+"";De.call(Or,n)||(Or[n]=[]),Or[n].push({name:t,func:r})}})),Or[ja(a,2).name]=[{name:"wrapper",func:a}],Hr.prototype.clone=function(){var e=new Hr(this.__wrapped__);return e.__actions__=Aa(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Aa(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Aa(this.__views__),e},Hr.prototype.reverse=function(){if(this.__filtered__){var e=new Hr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Hr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=Wo(e),n=t<0,a=r?e.length:0,i=function(e,t,r){var n=-1,a=r.length;for(;++n<a;){var i=r[n],o=i.size;switch(i.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=_r(t,e+o);break;case"takeRight":e=br(e,t-o)}}return{start:e,end:t}}(0,a,this.__views__),o=i.start,s=i.end,l=s-o,c=n?s:o-1,u=this.__iteratees__,p=u.length,d=0,h=_r(l,this.__takeCount__);if(!r||!n&&a==l&&h==l)return ga(e,this.__actions__);var f=[];e:for(;l--&&d<h;){for(var m=-1,g=e[c+=t];++m<p;){var v=u[m],y=v.iteratee,b=v.type,_=y(g);if(2==b)g=_;else if(!_){if(1==b)continue e;break e}}f[d++]=g}return f},Vr.prototype.at=vo,Vr.prototype.chain=function(){return mo(this)},Vr.prototype.commit=function(){return new qr(this.value(),this.__chain__)},Vr.prototype.next=function(){this.__values__===a&&(this.__values__=ms(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?a:this.__values__[this.__index__++]}},Vr.prototype.plant=function(e){for(var t,r=this;r instanceof Ur;){var n=Vi(r);n.__index__=0,n.__values__=a,t?i.__wrapped__=n:t=n;var i=n;r=r.__wrapped__}return i.__wrapped__=e,t},Vr.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Hr){var t=e;return this.__actions__.length&&(t=new Hr(this)),(t=t.reverse()).__actions__.push({func:go,args:[ro],thisArg:a}),new qr(t,this.__chain__)}return this.thru(ro)},Vr.prototype.toJSON=Vr.prototype.valueOf=Vr.prototype.value=function(){return ga(this.__wrapped__,this.__actions__)},Vr.prototype.first=Vr.prototype.head,et&&(Vr.prototype[et]=function(){return this}),Vr}();ht._=gr,(n=function(){return gr}.call(t,r,t,e))===a||(e.exports=n)}.call(this)},6158:function(e){e.exports=function(){"use strict";var e,t,r;function n(n,a){if(e)if(t){var i="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/api/#transpiling-v2'); }; var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk); self.onerror = null;",o={};e(o),r=a(o),"undefined"!=typeof window&&(r.workerUrl=window.URL.createObjectURL(new Blob([i],{type:"text/javascript"})))}else t=a;else e=a}return n(["exports"],(function(e){var t="2.4.1",r=n;function n(e,t,r,n){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(n-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=n,this.p2x=r,this.p2y=n}n.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},n.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},n.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},n.prototype.solveCurveX=function(e,t){var r,n,a,i,o;for(void 0===t&&(t=1e-6),a=e,o=0;o<8;o++){if(i=this.sampleCurveX(a)-e,Math.abs(i)<t)return a;var s=this.sampleCurveDerivativeX(a);if(Math.abs(s)<1e-6)break;a-=i/s}if((a=e)<(r=0))return r;if(a>(n=1))return n;for(;r<n;){if(i=this.sampleCurveX(a),Math.abs(i-e)<t)return a;e>i?r=a:n=a,a=.5*(n-r)+r}return a},n.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var a=i;function i(e,t){this.x=e,this.y=t}i.prototype={clone:function(){return new i(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),r=Math.sin(e),n=r*this.x+t*this.y;return this.x=t*this.x-r*this.y,this.y=n,this},_rotateAround:function(e,t){var r=Math.cos(e),n=Math.sin(e),a=t.y+n*(this.x-t.x)+r*(this.y-t.y);return this.x=t.x+r*(this.x-t.x)-n*(this.y-t.y),this.y=a,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(e){return e instanceof i?e:Array.isArray(e)?new i(e[0],e[1]):e};var o="undefined"!=typeof self?self:{};const s=Math.pow(2,53)-1,l=Math.PI/180,c=180/Math.PI;function u(e){return e*l}const p=[[0,0],[1,0],[1,1],[0,1]];function d(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,r=t*e;return 4*(e<.5?r:3*(e-t)+r-.75)}function h(e,t,n,a){const i=new r(e,t,n,a);return function(e){return i.solve(e)}}const f=h(.25,.1,.25,1);function m(e,t,r){return Math.min(r,Math.max(t,e))}function g(e,t,r){const n=r-t,a=((e-t)%n+n)%n+t;return a===t?r:a}function v(e,t,r){if(!e.length)return r(null,[]);let n=e.length;const a=new Array(e.length);let i=null;e.forEach(((e,o)=>{t(e,((e,t)=>{e&&(i=e),a[o]=t,0==--n&&r(i,a)}))}))}function y(e){const t=[];for(const r in e)t.push(e[r]);return t}function b(e,...t){for(const r of t)for(const t in r)e[t]=r[t];return e}let _=1;function x(){return _++}function w(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function E(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function C(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function k(e,t){e.forEach((e=>{t[e]&&(t[e]=t[e].bind(t))}))}function T(e,t){return-1!==e.indexOf(t,e.length-t.length)}function S(e,t,r){const n={};for(const a in e)n[a]=t.call(r||this,e[a],a,e);return n}function P(e,t,r){const n={};for(const a in e)t.call(r||this,e[a],a,e)&&(n[a]=e[a]);return n}function M(e){return Array.isArray(e)?e.map(M):"object"==typeof e&&e?S(e,M):e}const I={};function A(e){I[e]||("undefined"!=typeof console&&console.warn(e),I[e]=!0)}function O(e,t,r){return(r.y-e.y)*(t.x-e.x)>(t.y-e.y)*(r.x-e.x)}function z(e){let t=0;for(let r,n,a=0,i=e.length,o=i-1;a<i;o=a++)r=e[a],n=e[o],t+=(n.x-r.x)*(r.y+n.y);return t}function R(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function L(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((e,r,n,a)=>{const i=n||a;return t[r]=!i||i.toLowerCase(),""})),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t}let D,B,$,F=null;function N(e){if(null==F){const t=e.navigator?e.navigator.userAgent:null;F=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return F}function V(e){try{const t=o[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}}const j={now:()=>void 0!==$?$:o.performance.now(),setNow(e){$=e},restoreNow(){$=void 0},frame(e){const t=o.requestAnimationFrame(e);return{cancel:()=>o.cancelAnimationFrame(t)}},getImageData(e,t=0){const r=o.document.createElement("canvas"),n=r.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return r.width=e.width,r.height=e.height,n.drawImage(e,0,0,e.width,e.height),n.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:e=>(D||(D=o.document.createElement("a")),D.href=e,D.href),get devicePixelRatio(){return o.devicePixelRatio},get prefersReducedMotion(){return!!o.matchMedia&&(null==B&&(B=o.matchMedia("(prefers-reduced-motion: reduce)")),B.matches)}};let U;const q={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==U){const e=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{U=null!="MISSING_ENV_VAR".API_URL_REGEX?new RegExp("MISSING_ENV_VAR".API_URL_REGEX):e}catch(t){U=e}}return U},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},H={supported:!1,testSupport:function(e){!X&&W&&(Z?Y(e):G=e)}};let G,W,X=!1,Z=!1;function Y(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,W),e.isContextLost())return;H.supported=!0}catch(e){}e.deleteTexture(t),X=!0}o.document&&(W=o.document.createElement("img"),W.onload=function(){G&&Y(G),G=null,Z=!0},W.onerror=function(){X=!0,G=null},W.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const K="01",Q="NO_ACCESS_TOKEN";function J(e){return 0===e.indexOf("mapbox:")}function ee(e){return q.API_URL_REGEX.test(e)}const te=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function re(e){const t=e.match(te);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function ne(e){const t=e.params.length?`?${e.params.join("&")}`:"";return`${e.protocol}://${e.authority}${e.path}${t}`}function ae(e){if(!e)return null;const t=e.split(".");if(!t||3!==t.length)return null;try{return JSON.parse(decodeURIComponent(o.atob(t[1]).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch(e){return null}}class ie{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const t=ae(q.ACCESS_TOKEN);let r="";return r=t&&t.u?o.btoa(encodeURIComponent(t.u).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode(Number("0x"+t))))):q.ACCESS_TOKEN||"",e?`mapbox.eventData.${e}:${r}`:`mapbox.eventData:${r}`}fetchEventData(){const e=V("localStorage"),t=this.getStorageKey(),r=this.getStorageKey("uuid");if(e)try{const e=o.localStorage.getItem(t);e&&(this.eventData=JSON.parse(e));const n=o.localStorage.getItem(r);n&&(this.anonId=n)}catch(e){A("Unable to read from LocalStorage")}}saveEventData(){const e=V("localStorage"),t=this.getStorageKey(),r=this.getStorageKey("uuid");if(e)try{o.localStorage.setItem(r,this.anonId),Object.keys(this.eventData).length>=1&&o.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(e){A("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,r,n,a){if(!q.EVENTS_URL)return;const i=re(q.EVENTS_URL);i.params.push(`access_token=${a||q.ACCESS_TOKEN||""}`);const o={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:t,skuId:K,userId:this.anonId},s=r?b(o,r):o,l={url:ne(i),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=Te(l,(e=>{this.pendingRequest=null,n(e),this.saveEventData(),this.processRequests(a)}))}queueRequest(e,t){this.queue.push(e),this.processRequests(t)}}const oe=new class extends ie{constructor(e){super("appUserTurnstile"),this._customAccessToken=e}postTurnstileEvent(e,t){q.EVENTS_URL&&q.ACCESS_TOKEN&&Array.isArray(e)&&e.some((e=>J(e)||ee(e)))&&this.queueRequest(Date.now(),t)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const t=ae(q.ACCESS_TOKEN),r=t?t.u:q.ACCESS_TOKEN;let n=r!==this.eventData.tokenU;C(this.anonId)||(this.anonId=w(),n=!0);const a=this.queue.shift();if(this.eventData.lastSuccess){const e=new Date(this.eventData.lastSuccess),t=new Date(a),r=(a-this.eventData.lastSuccess)/864e5;n=n||r>=1||r<-1||e.getDate()!==t.getDate()}else n=!0;if(!n)return this.processRequests();this.postEvent(a,{"enabled.telemetry":!1},(e=>{e||(this.eventData.lastSuccess=a,this.eventData.tokenU=r)}),e)}},se=oe.postTurnstileEvent.bind(oe),le=new class extends ie{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(e,t,r,n){this.skuToken=t,this.errorCb=n,q.EVENTS_URL&&(r||q.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},r):this.errorCb(new Error(Q)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:r}=this.queue.shift();t&&this.success[t]||(this.anonId||this.fetchEventData(),C(this.anonId)||(this.anonId=w()),this.postEvent(r,{skuToken:this.skuToken},(e=>{e?this.errorCb(e):t&&(this.success[t]=!0)}),e))}},ce=le.postMapLoadEvent.bind(le),ue=new class extends ie{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(e,t,r,n){if(!q.API_URL||!q.SESSION_PATH)return;const a=re(q.API_URL+q.SESSION_PATH);a.params.push(`sku=${t||""}`),a.params.push(`access_token=${n||q.ACCESS_TOKEN||""}`);const i={url:ne(a),headers:{"Content-Type":"text/plain"}};this.pendingRequest=Se(i,(e=>{this.pendingRequest=null,r(e),this.saveEventData(),this.processRequests(n)}))}getSessionAPI(e,t,r,n){this.skuToken=t,this.errorCb=n,q.SESSION_PATH&&q.API_URL&&(r||q.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},r):this.errorCb(new Error(Q)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:r}=this.queue.shift();t&&this.success[t]||this.getSession(r,this.skuToken,(e=>{e?this.errorCb(e):t&&(this.success[t]=!0)}),e)}},pe=ue.getSessionAPI.bind(ue),de=new Set,he="mapbox-tiles";let fe,me,ge=500,ve=50;function ye(){o.caches&&!fe&&(fe=o.caches.open(he))}function be(e){const t=e.indexOf("?");return t<0?e:e.slice(0,t)}let _e=1/0;const xe={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(xe);class we extends Error{constructor(e,t,r){401===t&&ee(r)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(e),this.status=t,this.url=r}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Ee=R()?()=>self.worker&&self.worker.referrer:()=>("blob:"===o.location.protocol?o.parent:o).location.href,Ce=function(e,t){if(!(/^file:/.test(r=e.url)||/^file:/.test(Ee())&&!/^\w+:/.test(r))){if(o.fetch&&o.Request&&o.AbortController&&o.Request.prototype.hasOwnProperty("signal"))return function(e,t){const r=new o.AbortController,n=new o.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:Ee(),signal:r.signal});let a=!1,i=!1;const s=(l=n.url).indexOf("sku=")>0&&ee(l);var l;"json"===e.type&&n.headers.set("Accept","application/json");const c=(r,a,l)=>{if(i)return;if(r&&"SecurityError"!==r.message&&A(r),a&&l)return u(a);const c=Date.now();o.fetch(n).then((r=>{if(r.ok){const e=s?r.clone():null;return u(r,e,c)}return t(new we(r.statusText,r.status,e.url))})).catch((e=>{20!==e.code&&t(new Error(e.message))}))},u=(r,s,l)=>{("arrayBuffer"===e.type?r.arrayBuffer():"json"===e.type?r.json():r.text()).then((e=>{i||(s&&l&&function(e,t,r){if(ye(),!fe)return;const n={status:t.status,statusText:t.statusText,headers:new o.Headers};t.headers.forEach(((e,t)=>n.headers.set(t,e)));const a=L(t.headers.get("Cache-Control")||"");a["no-store"]||(a["max-age"]&&n.headers.set("Expires",new Date(r+1e3*a["max-age"]).toUTCString()),new Date(n.headers.get("Expires")).getTime()-r<42e4||function(e,t){if(void 0===me)try{new Response(new ReadableStream),me=!0}catch(e){me=!1}me?t(e.body):e.blob().then(t)}(t,(t=>{const r=new o.Response(t,n);ye(),fe&&fe.then((t=>t.put(be(e.url),r))).catch((e=>A(e.message)))})))}(n,s,l),a=!0,t(null,e,r.headers.get("Cache-Control"),r.headers.get("Expires")))})).catch((e=>{i||t(new Error(e.message))}))};return s?function(e,t){if(ye(),!fe)return t(null);const r=be(e.url);fe.then((e=>{e.match(r).then((n=>{const a=function(e){if(!e)return!1;const t=new Date(e.headers.get("Expires")||0),r=L(e.headers.get("Cache-Control")||"");return t>Date.now()&&!r["no-cache"]}(n);e.delete(r),a&&e.put(r,n.clone()),t(null,n,a)})).catch(t)})).catch(t)}(n,c):c(null,null),{cancel:()=>{i=!0,a||r.abort()}}}(e,t);if(R()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var r;return function(e,t){const r=new o.XMLHttpRequest;r.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(r.responseType="arraybuffer");for(const t in e.headers)r.setRequestHeader(t,e.headers[t]);return"json"===e.type&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials="include"===e.credentials,r.onerror=()=>{t(new Error(r.statusText))},r.onload=()=>{if((r.status>=200&&r.status<300||0===r.status)&&null!==r.response){let n=r.response;if("json"===e.type)try{n=JSON.parse(r.response)}catch(e){return t(e)}t(null,n,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"))}else t(new we(r.statusText,r.status,e.url))},r.send(e.body),{cancel:()=>r.abort()}}(e,t)},ke=function(e,t){return Ce(b(e,{type:"arrayBuffer"}),t)},Te=function(e,t){return Ce(b(e,{method:"POST"}),t)},Se=function(e,t){return Ce(b(e,{method:"GET"}),t)};function Pe(e){const t=o.document.createElement("a");return t.href=e,t.protocol===o.document.location.protocol&&t.host===o.document.location.host}const Me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ie,Ae;Ie=[],Ae=0;const Oe=function(e,t){if(H.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),Ae>=q.MAX_PARALLEL_IMAGE_REQUESTS){const r={requestParameters:e,callback:t,cancelled:!1,cancel(){this.cancelled=!0}};return Ie.push(r),r}Ae++;let r=!1;const n=()=>{if(!r)for(r=!0,Ae--;Ie.length&&Ae<q.MAX_PARALLEL_IMAGE_REQUESTS;){const e=Ie.shift(),{requestParameters:t,callback:r,cancelled:n}=e;n||(e.cancel=Oe(t,r).cancel)}},a=ke(e,((e,r,a,i)=>{n(),e?t(e):r&&(o.createImageBitmap?function(e,t){const r=new o.Blob([new Uint8Array(e)],{type:"image/png"});o.createImageBitmap(r).then((e=>{t(null,e)})).catch((e=>{t(new Error(`Could not load image because of ${e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))}(r,((e,r)=>t(e,r,a,i))):function(e,t){const r=new o.Image,n=o.URL;r.onload=()=>{t(null,r),n.revokeObjectURL(r.src),r.onload=null,o.requestAnimationFrame((()=>{r.src=Me}))},r.onerror=()=>t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const a=new o.Blob([new Uint8Array(e)],{type:"image/png"});r.src=e.byteLength?n.createObjectURL(a):Me}(r,((e,r)=>t(e,r,a,i))))}));return{cancel:()=>{a.cancel(),n()}}};function ze(e,t,r){r[e]&&-1!==r[e].indexOf(t)||(r[e]=r[e]||[],r[e].push(t))}function Re(e,t,r){if(r&&r[e]){const n=r[e].indexOf(t);-1!==n&&r[e].splice(n,1)}}class Le{constructor(e,t={}){b(this,t),this.type=e}}class De extends Le{constructor(e,t={}){super("error",b({error:e},t))}}class Be{on(e,t){return this._listeners=this._listeners||{},ze(e,t,this._listeners),this}off(e,t){return Re(e,t,this._listeners),Re(e,t,this._oneTimeListeners),this}once(e,t){return t?(this._oneTimeListeners=this._oneTimeListeners||{},ze(e,t,this._oneTimeListeners),this):new Promise((t=>this.once(e,t)))}fire(e,t){"string"==typeof e&&(e=new Le(e,t||{}));const r=e.type;if(this.listens(r)){e.target=this;const t=this._listeners&&this._listeners[r]?this._listeners[r].slice():[];for(const r of t)r.call(this,e);const n=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];for(const t of n)Re(r,t,this._oneTimeListeners),t.call(this,e);const a=this._eventedParent;a&&(b(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),a.fire(e))}else e instanceof De&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var $e={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.1,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class Fe{constructor(e,t,r,n){this.message=(e?`${e}: `:"")+r,n&&(this.identifier=n),null!=t&&t.__line__&&(this.line=t.__line__)}}function Ne(e){const t=e.value;return t?[new Fe(e.key,t,"constants have been deprecated as of v8")]:[]}function Ve(e,...t){for(const r of t)for(const t in r)e[t]=r[t];return e}function je(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Ue(e){if(Array.isArray(e))return e.map(Ue);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const r in e)t[r]=Ue(e[r]);return t}return je(e)}class qe extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class He{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[e,r]of t)this.bindings[e]=r}concat(e){return new He(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const Ge={kind:"null"},We={kind:"number"},Xe={kind:"string"},Ze={kind:"boolean"},Ye={kind:"color"},Ke={kind:"object"},Qe={kind:"value"},Je={kind:"collator"},et={kind:"formatted"},tt={kind:"resolvedImage"};function rt(e,t){return{kind:"array",itemType:e,N:t}}function nt(e){if("array"===e.kind){const t=nt(e.itemType);return"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`}return e.kind}const at=[Ge,We,Xe,Ze,Ye,et,Ke,rt(Qe),tt];function it(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!it(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of at)if(!it(e,t))return null}return`Expected ${nt(e)} but found ${nt(t)} instead.`}function ot(e,t){return t.some((t=>t.kind===e.kind))}function st(e,t){return t.some((t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e))}function lt(e){var t={exports:{}};return e(t,t.exports),t.exports}var ct=lt((function(e,t){var r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(e){return(e=Math.round(e))<0?0:e>255?255:e}function a(e){return n("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function i(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function o(e,t,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?e+(t-e)*r*6:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}try{t.parseCSSColor=function(e){var t,s=e.replace(/ /g,"").toLowerCase();if(s in r)return r[s].slice();if("#"===s[0])return 4===s.length?(t=parseInt(s.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===s.length&&(t=parseInt(s.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var l=s.indexOf("("),c=s.indexOf(")");if(-1!==l&&c+1===s.length){var u=s.substr(0,l),p=s.substr(l+1,c-(l+1)).split(","),d=1;switch(u){case"rgba":if(4!==p.length)return null;d=i(p.pop());case"rgb":return 3!==p.length?null:[a(p[0]),a(p[1]),a(p[2]),d];case"hsla":if(4!==p.length)return null;d=i(p.pop());case"hsl":if(3!==p.length)return null;var h=(parseFloat(p[0])%360+360)%360/360,f=i(p[1]),m=i(p[2]),g=m<=.5?m*(f+1):m+f-m*f,v=2*m-g;return[n(255*o(v,g,h+1/3)),n(255*o(v,g,h)),n(255*o(v,g,h-1/3)),d];default:return null}}return null}}catch(e){}}));class ut{constructor(e,t,r,n=1){this.r=e,this.g=t,this.b=r,this.a=n}static parse(e){if(!e)return;if(e instanceof ut)return e;if("string"!=typeof e)return;const t=ct.parseCSSColor(e);return t?new ut(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3]):void 0}toString(){const[e,t,r,n]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(r)},${n})`}toArray(){const{r:e,g:t,b:r,a:n}=this;return 0===n?[0,0,0,0]:[255*e/n,255*t/n,255*r/n,n]}}ut.black=new ut(0,0,0,1),ut.white=new ut(1,1,1,1),ut.transparent=new ut(0,0,0,0),ut.red=new ut(1,0,0,1),ut.blue=new ut(0,0,1,1);class pt{constructor(e,t,r){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class dt{constructor(e,t,r,n,a){this.text=e,this.image=t,this.scale=r,this.fontStack=n,this.textColor=a}}class ht{constructor(e){this.sections=e}static fromString(e){return new ht([new dt(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((e=>0!==e.text.length||e.image&&0!==e.image.name.length))}static factory(e){return e instanceof ht?e:ht.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map((e=>e.text)).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const r={};t.fontStack&&(r["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(r["font-scale"]=t.scale),t.textColor&&(r["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(r)}return e}}class ft{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new ft({name:e,available:!1}):null}serialize(){return["image",this.name]}}function mt(e,t,r,n){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:`Invalid rgba value [${[e,t,r,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof n?[e,t,r,n]:[e,t,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function gt(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof ut)return!0;if(e instanceof pt)return!0;if(e instanceof ht)return!0;if(e instanceof ft)return!0;if(Array.isArray(e)){for(const t of e)if(!gt(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!gt(e[t]))return!1;return!0}return!1}function vt(e){if(null===e)return Ge;if("string"==typeof e)return Xe;if("boolean"==typeof e)return Ze;if("number"==typeof e)return We;if(e instanceof ut)return Ye;if(e instanceof pt)return Je;if(e instanceof ht)return et;if(e instanceof ft)return tt;if(Array.isArray(e)){const t=e.length;let r;for(const t of e){const e=vt(t);if(r){if(r===e)continue;r=Qe;break}r=e}return rt(r||Qe,t)}return Ke}function yt(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof ut||e instanceof ht||e instanceof ft?e.toString():JSON.stringify(e)}class bt{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!gt(e[1]))return t.error("invalid value");const r=e[1];let n=vt(r);const a=t.expectedType;return"array"!==n.kind||0!==n.N||!a||"array"!==a.kind||"number"==typeof a.N&&0!==a.N||(n=a),new bt(n,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof ut?["rgba"].concat(this.value.toArray()):this.value instanceof ht?this.value.serialize():this.value}}class _t{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const xt={string:Xe,number:We,boolean:Ze,object:Ke};class wt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r,n=1;const a=e[0];if("array"===a){let a,i;if(e.length>2){const r=e[1];if("string"!=typeof r||!(r in xt)||"object"===r)return t.error('The item type argument of "array" must be one of string, number, boolean',1);a=xt[r],n++}else a=Qe;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);i=e[2],n++}r=rt(a,i)}else r=xt[a];const i=[];for(;n<e.length;n++){const r=t.parse(e[n],n,Qe);if(!r)return null;i.push(r)}return new wt(r,i)}evaluate(e){for(let t=0;t<this.args.length;t++){const r=this.args[t].evaluate(e);if(!it(this.type,vt(r)))return r;if(t===this.args.length-1)throw new _t(`Expected value to be of type ${nt(this.type)}, but found ${nt(vt(r))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){const e=this.type,t=[e.kind];if("array"===e.kind){const r=e.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){t.push(r.kind);const n=e.N;("number"==typeof n||this.args.length>1)&&t.push(n)}}return t.concat(this.args.map((e=>e.serialize())))}}class Et{constructor(e){this.type=et,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&"object"==typeof r)return t.error("First argument must be an image or text section.");const n=[];let a=!1;for(let r=1;r<=e.length-1;++r){const i=e[r];if(a&&"object"==typeof i&&!Array.isArray(i)){a=!1;let e=null;if(i["font-scale"]&&(e=t.parse(i["font-scale"],1,We),!e))return null;let r=null;if(i["text-font"]&&(r=t.parse(i["text-font"],1,rt(Xe)),!r))return null;let o=null;if(i["text-color"]&&(o=t.parse(i["text-color"],1,Ye),!o))return null;const s=n[n.length-1];s.scale=e,s.font=r,s.textColor=o}else{const i=t.parse(e[r],1,Qe);if(!i)return null;const o=i.type.kind;if("string"!==o&&"value"!==o&&"null"!==o&&"resolvedImage"!==o)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");a=!0,n.push({content:i,scale:null,font:null,textColor:null})}}return new Et(n)}evaluate(e){return new ht(this.sections.map((t=>{const r=t.content.evaluate(e);return vt(r)===tt?new dt("",r,null,null,null):new dt(yt(r),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const r={};t.scale&&(r["font-scale"]=t.scale.serialize()),t.font&&(r["text-font"]=t.font.serialize()),t.textColor&&(r["text-color"]=t.textColor.serialize()),e.push(r)}return e}}class Ct{constructor(e){this.type=tt,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const r=t.parse(e[1],1,Xe);return r?new Ct(r):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),r=ft.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const kt={"to-boolean":Ze,"to-color":Ye,"to-number":We,"to-string":Xe};class Tt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[0];if(("to-boolean"===r||"to-string"===r)&&2!==e.length)return t.error("Expected one argument.");const n=kt[r],a=[];for(let r=1;r<e.length;r++){const n=t.parse(e[r],r,Qe);if(!n)return null;a.push(n)}return new Tt(n,a)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let t,r;for(const n of this.args){if(t=n.evaluate(e),r=null,t instanceof ut)return t;if("string"==typeof t){const r=e.parseColor(t);if(r)return r}else if(Array.isArray(t)&&(r=t.length<3||t.length>4?`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:mt(t[0],t[1],t[2],t[3]),!r))return new ut(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new _t(r||`Could not parse color from value '${"string"==typeof t?t:String(JSON.stringify(t))}'`)}if("number"===this.type.kind){let t=null;for(const r of this.args){if(t=r.evaluate(e),null===t)return 0;const n=Number(t);if(!isNaN(n))return n}throw new _t(`Could not convert ${JSON.stringify(t)} to number.`)}return"formatted"===this.type.kind?ht.fromString(yt(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?ft.fromString(yt(this.args[0].evaluate(e))):yt(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new Et([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Ct(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild((t=>{e.push(t.serialize())})),e}}const St=["Unknown","Point","LineString","Polygon"];class Pt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?St[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=ut.parse(e)),t}}class Mt{constructor(e,t,r,n){this.name=e,this.type=t,this._evaluate=r,this.args=n}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((e=>e.serialize())))}static parse(e,t){const r=e[0],n=Mt.definitions[r];if(!n)return t.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const a=Array.isArray(n)?n[0]:n.type,i=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,o=i.filter((([t])=>!Array.isArray(t)||t.length===e.length-1));let s=null;for(const[n,i]of o){s=new Qt(t.registry,t.path,null,t.scope);const o=[];let l=!1;for(let t=1;t<e.length;t++){const r=e[t],a=Array.isArray(n)?n[t-1]:n.type,i=s.parse(r,1+o.length,a);if(!i){l=!0;break}o.push(i)}if(!l)if(Array.isArray(n)&&n.length!==o.length)s.error(`Expected ${n.length} arguments, but found ${o.length} instead.`);else{for(let e=0;e<o.length;e++){const t=Array.isArray(n)?n[e]:n.type,r=o[e];s.concat(e+1).checkSubtype(t,r.type)}if(0===s.errors.length)return new Mt(r,a,i,o)}}if(1===o.length)t.errors.push(...s.errors);else{const r=(o.length?o:i).map((([e])=>{return t=e,Array.isArray(t)?`(${t.map(nt).join(", ")})`:`(${nt(t.type)}...)`;var t})).join(" | "),n=[];for(let r=1;r<e.length;r++){const a=t.parse(e[r],1+n.length);if(!a)return null;n.push(nt(a.type))}t.error(`Expected arguments of type ${r}, but found (${n.join(", ")}) instead.`)}return null}static register(e,t){Mt.definitions=t;for(const r in t)e[r]=Mt}}class It{constructor(e,t,r){this.type=Je,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const r=e[1];if("object"!=typeof r||Array.isArray(r))return t.error("Collator options argument must be an object.");const n=t.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,Ze);if(!n)return null;const a=t.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,Ze);if(!a)return null;let i=null;return r.locale&&(i=t.parse(r.locale,1,Xe),!i)?null:new It(n,a,i)}evaluate(e){return new pt(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const At=8192;function Ot(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function zt(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function Rt(e,t){const r=(180+e[0])/360,n=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,a=Math.pow(2,t.z);return[Math.round(r*a*At),Math.round(n*a*At)]}function Lt(e,t,r){const n=e[0]-t[0],a=e[1]-t[1],i=e[0]-r[0],o=e[1]-r[1];return n*o-i*a==0&&n*i<=0&&a*o<=0}function Dt(e,t){let r=!1;for(let o=0,s=t.length;o<s;o++){const s=t[o];for(let t=0,o=s.length;t<o-1;t++){if(Lt(e,s[t],s[t+1]))return!1;(a=s[t])[1]>(n=e)[1]!=(i=s[t+1])[1]>n[1]&&n[0]<(i[0]-a[0])*(n[1]-a[1])/(i[1]-a[1])+a[0]&&(r=!r)}}var n,a,i;return r}function Bt(e,t){for(let r=0;r<t.length;r++)if(Dt(e,t[r]))return!0;return!1}function $t(e,t,r,n){const a=n[0]-r[0],i=n[1]-r[1],o=(e[0]-r[0])*i-a*(e[1]-r[1]),s=(t[0]-r[0])*i-a*(t[1]-r[1]);return o>0&&s<0||o<0&&s>0}function Ft(e,t,r){for(const c of r)for(let r=0;r<c.length-1;++r)if(0!=(s=[(o=c[r+1])[0]-(i=c[r])[0],o[1]-i[1]])[0]*(l=[(a=t)[0]-(n=e)[0],a[1]-n[1]])[1]-s[1]*l[0]&&$t(n,a,i,o)&&$t(i,o,n,a))return!0;var n,a,i,o,s,l;return!1}function Nt(e,t){for(let r=0;r<e.length;++r)if(!Dt(e[r],t))return!1;for(let r=0;r<e.length-1;++r)if(Ft(e[r],e[r+1],t))return!1;return!0}function Vt(e,t){for(let r=0;r<t.length;r++)if(Nt(e,t[r]))return!0;return!1}function jt(e,t,r){const n=[];for(let a=0;a<e.length;a++){const i=[];for(let n=0;n<e[a].length;n++){const o=Rt(e[a][n],r);Ot(t,o),i.push(o)}n.push(i)}return n}function Ut(e,t,r){const n=[];for(let a=0;a<e.length;a++){const i=jt(e[a],t,r);n.push(i)}return n}function qt(e,t,r,n){if(e[0]<r[0]||e[0]>r[2]){const t=.5*n;let a=e[0]-r[0]>t?-n:r[0]-e[0]>t?n:0;0===a&&(a=e[0]-r[2]>t?-n:r[2]-e[0]>t?n:0),e[0]+=a}Ot(t,e)}function Ht(e,t,r,n){const a=Math.pow(2,n.z)*At,i=[n.x*At,n.y*At],o=[];for(const n of e)for(const e of n){const n=[e.x+i[0],e.y+i[1]];qt(n,t,r,a),o.push(n)}return o}function Gt(e,t,r,n){const a=Math.pow(2,n.z)*At,i=[n.x*At,n.y*At],o=[];for(const r of e){const e=[];for(const n of r){const r=[n.x+i[0],n.y+i[1]];Ot(t,r),e.push(r)}o.push(e)}if(t[2]-t[0]<=a/2){(s=t)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const e of o)for(const n of e)qt(n,t,r,a)}var s;return o}class Wt{constructor(e,t){this.type=Ze,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(gt(e[1])){const t=e[1];if("FeatureCollection"===t.type)for(let e=0;e<t.features.length;++e){const r=t.features[e].geometry.type;if("Polygon"===r||"MultiPolygon"===r)return new Wt(t,t.features[e].geometry)}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new Wt(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new Wt(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],a=e.canonicalID();if("Polygon"===t.type){const i=jt(t.coordinates,n,a),o=Ht(e.geometry(),r,n,a);if(!zt(r,n))return!1;for(const e of o)if(!Dt(e,i))return!1}if("MultiPolygon"===t.type){const i=Ut(t.coordinates,n,a),o=Ht(e.geometry(),r,n,a);if(!zt(r,n))return!1;for(const e of o)if(!Bt(e,i))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],a=e.canonicalID();if("Polygon"===t.type){const i=jt(t.coordinates,n,a),o=Gt(e.geometry(),r,n,a);if(!zt(r,n))return!1;for(const e of o)if(!Nt(e,i))return!1}if("MultiPolygon"===t.type){const i=Ut(t.coordinates,n,a),o=Gt(e.geometry(),r,n,a);if(!zt(r,n))return!1;for(const e of o)if(!Vt(e,i))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Xt(e){if(e instanceof Mt){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof Wt)return!1;let t=!0;return e.eachChild((e=>{t&&!Xt(e)&&(t=!1)})),t}function Zt(e){if(e instanceof Mt&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild((e=>{t&&!Zt(e)&&(t=!1)})),t}function Yt(e,t){if(e instanceof Mt&&t.indexOf(e.name)>=0)return!1;let r=!0;return e.eachChild((e=>{r&&!Yt(e,t)&&(r=!1)})),r}class Kt{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const r=e[1];return t.scope.has(r)?new Kt(r,t.scope.get(r)):t.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Qt{constructor(e,t=[],r,n=new He,a=[]){this.registry=e,this.path=t,this.key=t.map((e=>`[${e}]`)).join(""),this.scope=n,this.errors=a,this.expectedType=r}parse(e,t,r,n,a={}){return t?this.concat(t,r,n)._parse(e,a):this._parse(e,a)}_parse(e,t){function r(e,t,r){return"assert"===r?new wt(t,[e]):"coerce"===r?new Tt(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const n=e[0];if("string"!=typeof n)return this.error(`Expression name must be a string, but found ${typeof n} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const a=this.registry[n];if(a){let n=a.parse(e,this);if(!n)return null;if(this.expectedType){const e=this.expectedType,a=n.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==a.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==a.kind&&"string"!==a.kind){if(this.checkSubtype(e,a))return null}else n=r(n,e,t.typeAnnotation||"coerce");else n=r(n,e,t.typeAnnotation||"assert")}if(!(n instanceof bt)&&"resolvedImage"!==n.type.kind&&Jt(n)){const t=new Pt;try{n=new bt(n.type,n.evaluate(t))}catch(e){return this.error(e.message),null}}return n}return this.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,t,r){const n="number"==typeof e?this.path.concat(e):this.path,a=r?this.scope.concat(r):this.scope;return new Qt(this.registry,n,t||null,a,this.errors)}error(e,...t){const r=`${this.key}${t.map((e=>`[${e}]`)).join("")}`;this.errors.push(new qe(r,e))}checkSubtype(e,t){const r=it(e,t);return r&&this.error(r),r}}function Jt(e){if(e instanceof Kt)return Jt(e.boundExpression);if(e instanceof Mt&&"error"===e.name)return!1;if(e instanceof It)return!1;if(e instanceof Wt)return!1;const t=e instanceof Tt||e instanceof wt;let r=!0;return e.eachChild((e=>{r=t?r&&Jt(e):r&&e instanceof bt})),!!r&&Xt(e)&&Yt(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script"])}function er(e,t){const r=e.length-1;let n,a,i=0,o=r,s=0;for(;i<=o;)if(s=Math.floor((i+o)/2),n=e[s],a=e[s+1],n<=t){if(s===r||t<a)return s;i=s+1}else{if(!(n>t))throw new _t("Input is not a number.");o=s-1}return 0}class tr{constructor(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[e,t]of r)this.labels.push(e),this.outputs.push(t)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const r=t.parse(e[1],1,We);if(!r)return null;const n=[];let a=null;t.expectedType&&"value"!==t.expectedType.kind&&(a=t.expectedType);for(let r=1;r<e.length;r+=2){const i=1===r?-1/0:e[r],o=e[r+1],s=r,l=r+1;if("number"!=typeof i)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(n.length&&n[n.length-1][0]>=i)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=t.parse(o,l,a);if(!c)return null;a=a||c.type,n.push([i,c])}return new tr(a,r,n)}evaluate(e){const t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);const n=this.input.evaluate(e);if(n<=t[0])return r[0].evaluate(e);const a=t.length;return n>=t[a-1]?r[a-1].evaluate(e):r[er(t,n)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}function rr(e,t,r){return e*(1-r)+t*r}var nr=Object.freeze({__proto__:null,number:rr,color:function(e,t,r){return new ut(rr(e.r,t.r,r),rr(e.g,t.g,r),rr(e.b,t.b,r),rr(e.a,t.a,r))},array:function(e,t,r){return e.map(((e,n)=>rr(e,t[n],r)))}});const ar=.95047,ir=1.08883,or=4/29,sr=6/29,lr=3*sr*sr,cr=Math.PI/180,ur=180/Math.PI;function pr(e){return e>.008856451679035631?Math.pow(e,1/3):e/lr+or}function dr(e){return e>sr?e*e*e:lr*(e-or)}function hr(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function fr(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function mr(e){const t=fr(e.r),r=fr(e.g),n=fr(e.b),a=pr((.4124564*t+.3575761*r+.1804375*n)/ar),i=pr((.2126729*t+.7151522*r+.072175*n)/1);return{l:116*i-16,a:500*(a-i),b:200*(i-pr((.0193339*t+.119192*r+.9503041*n)/ir)),alpha:e.a}}function gr(e){let t=(e.l+16)/116,r=isNaN(e.a)?t:t+e.a/500,n=isNaN(e.b)?t:t-e.b/200;return t=1*dr(t),r=ar*dr(r),n=ir*dr(n),new ut(hr(3.2404542*r-1.5371385*t-.4985314*n),hr(-.969266*r+1.8760108*t+.041556*n),hr(.0556434*r-.2040259*t+1.0572252*n),e.alpha)}function vr(e,t,r){const n=t-e;return e+r*(n>180||n<-180?n-360*Math.round(n/360):n)}const yr={forward:mr,reverse:gr,interpolate:function(e,t,r){return{l:rr(e.l,t.l,r),a:rr(e.a,t.a,r),b:rr(e.b,t.b,r),alpha:rr(e.alpha,t.alpha,r)}}},br={forward:function(e){const{l:t,a:r,b:n}=mr(e),a=Math.atan2(n,r)*ur;return{h:a<0?a+360:a,c:Math.sqrt(r*r+n*n),l:t,alpha:e.a}},reverse:function(e){const t=e.h*cr,r=e.c;return gr({l:e.l,a:Math.cos(t)*r,b:Math.sin(t)*r,alpha:e.alpha})},interpolate:function(e,t,r){return{h:vr(e.h,t.h,r),c:rr(e.c,t.c,r),l:rr(e.l,t.l,r),alpha:rr(e.alpha,t.alpha,r)}}};var _r=Object.freeze({__proto__:null,lab:yr,hcl:br});class xr{constructor(e,t,r,n,a){this.type=e,this.operator=t,this.interpolation=r,this.input=n,this.labels=[],this.outputs=[];for(const[e,t]of a)this.labels.push(e),this.outputs.push(t)}static interpolationFactor(e,t,n,a){let i=0;if("exponential"===e.name)i=wr(t,e.base,n,a);else if("linear"===e.name)i=wr(t,1,n,a);else if("cubic-bezier"===e.name){const o=e.controlPoints;i=new r(o[0],o[1],o[2],o[3]).solve(wr(t,1,n,a))}return i}static parse(e,t){let[r,n,a,...i]=e;if(!Array.isArray(n)||0===n.length)return t.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){const e=n[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:e}}else{if("cubic-bezier"!==n[0])return t.error(`Unknown interpolation type ${String(n[0])}`,1,0);{const e=n.slice(1);if(4!==e.length||e.some((e=>"number"!=typeof e||e<0||e>1)))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(a=t.parse(a,2,We),!a)return null;const o=[];let s=null;"interpolate-hcl"===r||"interpolate-lab"===r?s=Ye:t.expectedType&&"value"!==t.expectedType.kind&&(s=t.expectedType);for(let e=0;e<i.length;e+=2){const r=i[e],n=i[e+1],a=e+3,l=e+4;if("number"!=typeof r)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(o.length&&o[o.length-1][0]>=r)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',a);const c=t.parse(n,l,s);if(!c)return null;s=s||c.type,o.push([r,c])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new xr(s,r,n,a,o):t.error(`Type ${nt(s)} is not interpolatable.`)}evaluate(e){const t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);const n=this.input.evaluate(e);if(n<=t[0])return r[0].evaluate(e);const a=t.length;if(n>=t[a-1])return r[a-1].evaluate(e);const i=er(t,n),o=xr.interpolationFactor(this.interpolation,n,t[i],t[i+1]),s=r[i].evaluate(e),l=r[i+1].evaluate(e);return"interpolate"===this.operator?nr[this.type.kind.toLowerCase()](s,l,o):"interpolate-hcl"===this.operator?br.reverse(br.interpolate(br.forward(s),br.forward(l),o)):yr.reverse(yr.interpolate(yr.forward(s),yr.forward(l),o))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let e=0;e<this.labels.length;e++)t.push(this.labels[e],this.outputs[e].serialize());return t}}function wr(e,t,r,n){const a=n-r,i=e-r;return 0===a?0:1===t?i/a:(Math.pow(t,i)-1)/(Math.pow(t,a)-1)}class Er{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let r=null;const n=t.expectedType;n&&"value"!==n.kind&&(r=n);const a=[];for(const n of e.slice(1)){const e=t.parse(n,1+a.length,r,void 0,{typeAnnotation:"omit"});if(!e)return null;r=r||e.type,a.push(e)}const i=n&&a.some((e=>it(n,e.type)));return new Er(i?Qe:r,a)}evaluate(e){let t,r=null,n=0;for(const a of this.args)if(n++,r=a.evaluate(e),r&&r instanceof ft&&!r.available&&(t||(t=r.name),r=null,n===this.args.length&&(r=t)),null!==r)break;return r}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){const e=["coalesce"];return this.eachChild((t=>{e.push(t.serialize())})),e}}class Cr{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let n=1;n<e.length-1;n+=2){const a=e[n];if("string"!=typeof a)return t.error(`Expected string, but found ${typeof a} instead.`,n);if(/[^a-zA-Z0-9_]/.test(a))return t.error("Variable names must contain only alphanumeric characters or '_'.",n);const i=t.parse(e[n+1],n+1);if(!i)return null;r.push([a,i])}const n=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return n?new Cr(r,n):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,r]of this.bindings)e.push(t,r.serialize());return e.push(this.result.serialize()),e}}class kr{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,We),n=t.parse(e[2],2,rt(t.expectedType||Qe));return r&&n?new kr(n.type.itemType,r,n):null}evaluate(e){const t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new _t(`Array index out of bounds: ${t} < 0.`);if(t>=r.length)throw new _t(`Array index out of bounds: ${t} > ${r.length-1}.`);if(t!==Math.floor(t))throw new _t(`Array index must be an integer, but found ${t} instead.`);return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Tr{constructor(e,t){this.type=Ze,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Qe),n=t.parse(e[2],2,Qe);return r&&n?ot(r.type,[Ze,Xe,We,Ge,Qe])?new Tr(r,n):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${nt(r.type)} instead`):null}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!r)return!1;if(!st(t,["boolean","string","number","null"]))throw new _t(`Expected first argument to be of type boolean, string, number or null, but found ${nt(vt(t))} instead.`);if(!st(r,["string","array"]))throw new _t(`Expected second argument to be of type array or string, but found ${nt(vt(r))} instead.`);return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Sr{constructor(e,t,r){this.type=We,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Qe),n=t.parse(e[2],2,Qe);if(!r||!n)return null;if(!ot(r.type,[Ze,Xe,We,Ge,Qe]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${nt(r.type)} instead`);if(4===e.length){const a=t.parse(e[3],3,We);return a?new Sr(r,n,a):null}return new Sr(r,n)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!st(t,["boolean","string","number","null"]))throw new _t(`Expected first argument to be of type boolean, string, number or null, but found ${nt(vt(t))} instead.`);if(!st(r,["string","array"]))throw new _t(`Expected second argument to be of type array or string, but found ${nt(vt(r))} instead.`);if(this.fromIndex){const n=this.fromIndex.evaluate(e);return r.indexOf(t,n)}return r.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Pr{constructor(e,t,r,n,a,i){this.inputType=e,this.type=t,this.input=r,this.cases=n,this.outputs=a,this.otherwise=i}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return t.error("Expected an even number of arguments.");let r,n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);const a={},i=[];for(let o=2;o<e.length-1;o+=2){let s=e[o];const l=e[o+1];Array.isArray(s)||(s=[s]);const c=t.concat(o);if(0===s.length)return c.error("Expected at least one branch label.");for(const e of s){if("number"!=typeof e&&"string"!=typeof e)return c.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return c.error("Numeric branch labels must be integer values.");if(r){if(c.checkSubtype(r,vt(e)))return null}else r=vt(e);if(void 0!==a[String(e)])return c.error("Branch labels must be unique.");a[String(e)]=i.length}const u=t.parse(l,o,n);if(!u)return null;n=n||u.type,i.push(u)}const o=t.parse(e[1],1,Qe);if(!o)return null;const s=t.parse(e[e.length-1],e.length-1,n);return s?"value"!==o.type.kind&&t.concat(1).checkSubtype(r,o.type)?null:new Pr(r,n,o,a,i,s):null}evaluate(e){const t=this.input.evaluate(e);return(vt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),r=[],n={};for(const e of t){const t=n[this.cases[e]];void 0===t?(n[this.cases[e]]=r.length,r.push([this.cases[e],[e]])):r[t][1].push(e)}const a=e=>"number"===this.inputType.kind?Number(e):e;for(const[t,n]of r)e.push(1===n.length?a(n[0]):n.map(a)),e.push(this.outputs[t].serialize());return e.push(this.otherwise.serialize()),e}}class Mr{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);const n=[];for(let a=1;a<e.length-1;a+=2){const i=t.parse(e[a],a,Ze);if(!i)return null;const o=t.parse(e[a+1],a+1,r);if(!o)return null;n.push([i,o]),r=r||o.type}const a=t.parse(e[e.length-1],e.length-1,r);return a?new Mr(r,n,a):null}evaluate(e){for(const[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every((([e,t])=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild((t=>{e.push(t.serialize())})),e}}class Ir{constructor(e,t,r,n){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Qe),n=t.parse(e[2],2,We);if(!r||!n)return null;if(!ot(r.type,[rt(Qe),Xe,Qe]))return t.error(`Expected first argument to be of type array or string, but found ${nt(r.type)} instead`);if(4===e.length){const a=t.parse(e[3],3,We);return a?new Ir(r.type,r,n,a):null}return new Ir(r.type,r,n)}evaluate(e){const t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);if(!st(t,["string","array"]))throw new _t(`Expected first argument to be of type array or string, but found ${nt(vt(t))} instead.`);if(this.endIndex){const n=this.endIndex.evaluate(e);return t.slice(r,n)}return t.slice(r)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Ar(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function Or(e,t,r,n){return 0===n.compare(t,r)}function zr(e,t,r){const n="=="!==e&&"!="!==e;return class a{constructor(e,t,r){this.type=Ze,this.lhs=e,this.rhs=t,this.collator=r,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const r=e[0];let i=t.parse(e[1],1,Qe);if(!i)return null;if(!Ar(r,i.type))return t.concat(1).error(`"${r}" comparisons are not supported for type '${nt(i.type)}'.`);let o=t.parse(e[2],2,Qe);if(!o)return null;if(!Ar(r,o.type))return t.concat(2).error(`"${r}" comparisons are not supported for type '${nt(o.type)}'.`);if(i.type.kind!==o.type.kind&&"value"!==i.type.kind&&"value"!==o.type.kind)return t.error(`Cannot compare types '${nt(i.type)}' and '${nt(o.type)}'.`);n&&("value"===i.type.kind&&"value"!==o.type.kind?i=new wt(o.type,[i]):"value"!==i.type.kind&&"value"===o.type.kind&&(o=new wt(i.type,[o])));let s=null;if(4===e.length){if("string"!==i.type.kind&&"string"!==o.type.kind&&"value"!==i.type.kind&&"value"!==o.type.kind)return t.error("Cannot use collator to compare non-string types.");if(s=t.parse(e[3],3,Je),!s)return null}return new a(i,o,s)}evaluate(a){const i=this.lhs.evaluate(a),o=this.rhs.evaluate(a);if(n&&this.hasUntypedArgument){const t=vt(i),r=vt(o);if(t.kind!==r.kind||"string"!==t.kind&&"number"!==t.kind)throw new _t(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${t.kind}, ${r.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const e=vt(i),r=vt(o);if("string"!==e.kind||"string"!==r.kind)return t(a,i,o)}return this.collator?r(a,i,o,this.collator.evaluate(a)):t(a,i,o)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}serialize(){const t=[e];return this.eachChild((e=>{t.push(e.serialize())})),t}}}const Rr=zr("==",(function(e,t,r){return t===r}),Or),Lr=zr("!=",(function(e,t,r){return t!==r}),(function(e,t,r,n){return!Or(0,t,r,n)})),Dr=zr("<",(function(e,t,r){return t<r}),(function(e,t,r,n){return n.compare(t,r)<0})),Br=zr(">",(function(e,t,r){return t>r}),(function(e,t,r,n){return n.compare(t,r)>0})),$r=zr("<=",(function(e,t,r){return t<=r}),(function(e,t,r,n){return n.compare(t,r)<=0})),Fr=zr(">=",(function(e,t,r){return t>=r}),(function(e,t,r,n){return n.compare(t,r)>=0}));class Nr{constructor(e,t,r,n,a){this.type=Xe,this.number=e,this.locale=t,this.currency=r,this.minFractionDigits=n,this.maxFractionDigits=a}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const r=t.parse(e[1],1,We);if(!r)return null;const n=e[2];if("object"!=typeof n||Array.isArray(n))return t.error("NumberFormat options argument must be an object.");let a=null;if(n.locale&&(a=t.parse(n.locale,1,Xe),!a))return null;let i=null;if(n.currency&&(i=t.parse(n.currency,1,Xe),!i))return null;let o=null;if(n["min-fraction-digits"]&&(o=t.parse(n["min-fraction-digits"],1,We),!o))return null;let s=null;return n["max-fraction-digits"]&&(s=t.parse(n["max-fraction-digits"],1,We),!s)?null:new Nr(r,a,i,o,s)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Vr{constructor(e){this.type=We,this.input=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=t.parse(e[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?t.error(`Expected argument of type string or array, but found ${nt(r.type)} instead.`):new Vr(r):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new _t(`Expected value to be of type string or array, but found ${nt(vt(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild((t=>{e.push(t.serialize())})),e}}const jr={"==":Rr,"!=":Lr,">":Br,"<":Dr,">=":Fr,"<=":$r,array:wt,at:kr,boolean:wt,case:Mr,coalesce:Er,collator:It,format:Et,image:Ct,in:Tr,"index-of":Sr,interpolate:xr,"interpolate-hcl":xr,"interpolate-lab":xr,length:Vr,let:Cr,literal:bt,match:Pr,number:wt,"number-format":Nr,object:wt,slice:Ir,step:tr,string:wt,"to-boolean":Tt,"to-color":Tt,"to-number":Tt,"to-string":Tt,var:Kt,within:Wt};function Ur(e,[t,r,n,a]){t=t.evaluate(e),r=r.evaluate(e),n=n.evaluate(e);const i=a?a.evaluate(e):1,o=mt(t,r,n,i);if(o)throw new _t(o);return new ut(t/255*i,r/255*i,n/255*i,i)}function qr(e,t){return e in t}function Hr(e,t){const r=t[e];return void 0===r?null:r}function Gr(e){return{type:e}}function Wr(e){return{result:"success",value:e}}function Xr(e){return{result:"error",value:e}}function Zr(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function Yr(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Kr(e){return!!e.expression&&e.expression.interpolated}function Qr(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Jr(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function en(e){return e}function tn(e,t){const r="color"===t.type,n=e.stops&&"object"==typeof e.stops[0][0],a=n||!(n||void 0!==e.property),i=e.type||(Kr(t)?"exponential":"interval");if(r&&((e=Ve({},e)).stops&&(e.stops=e.stops.map((e=>[e[0],ut.parse(e[1])]))),e.default=ut.parse(e.default?e.default:t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!_r[e.colorSpace])throw new Error(`Unknown color space: ${e.colorSpace}`);let o,s,l;if("exponential"===i)o=on;else if("interval"===i)o=an;else if("categorical"===i){o=nn,s=Object.create(null);for(const t of e.stops)s[t[0]]=t[1];l=typeof e.stops[0][0]}else{if("identity"!==i)throw new Error(`Unknown function type "${i}"`);o=sn}if(n){const r={},n=[];for(let t=0;t<e.stops.length;t++){const a=e.stops[t],i=a[0].zoom;void 0===r[i]&&(r[i]={zoom:i,type:e.type,property:e.property,default:e.default,stops:[]},n.push(i)),r[i].stops.push([a[0].value,a[1]])}const a=[];for(const e of n)a.push([r[e].zoom,tn(r[e],t)]);const i={name:"linear"};return{kind:"composite",interpolationType:i,interpolationFactor:xr.interpolationFactor.bind(void 0,i),zoomStops:a.map((e=>e[0])),evaluate:({zoom:r},n)=>on({stops:a,base:e.base},t,r).evaluate(r,n)}}if(a){const r="exponential"===i?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:r,interpolationFactor:xr.interpolationFactor.bind(void 0,r),zoomStops:e.stops.map((e=>e[0])),evaluate:({zoom:r})=>o(e,t,r,s,l)}}return{kind:"source",evaluate(r,n){const a=n&&n.properties?n.properties[e.property]:void 0;return void 0===a?rn(e.default,t.default):o(e,t,a,s,l)}}}function rn(e,t,r){return void 0!==e?e:void 0!==t?t:void 0!==r?r:void 0}function nn(e,t,r,n,a){return rn(typeof r===a?n[r]:void 0,e.default,t.default)}function an(e,t,r){if("number"!==Qr(r))return rn(e.default,t.default);const n=e.stops.length;if(1===n)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[n-1][0])return e.stops[n-1][1];const a=er(e.stops.map((e=>e[0])),r);return e.stops[a][1]}function on(e,t,r){const n=void 0!==e.base?e.base:1;if("number"!==Qr(r))return rn(e.default,t.default);const a=e.stops.length;if(1===a)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[a-1][0])return e.stops[a-1][1];const i=er(e.stops.map((e=>e[0])),r),o=function(e,t,r,n){const a=n-r,i=e-r;return 0===a?0:1===t?i/a:(Math.pow(t,i)-1)/(Math.pow(t,a)-1)}(r,n,e.stops[i][0],e.stops[i+1][0]),s=e.stops[i][1],l=e.stops[i+1][1];let c=nr[t.type]||en;if(e.colorSpace&&"rgb"!==e.colorSpace){const t=_r[e.colorSpace];c=(e,r)=>t.reverse(t.interpolate(t.forward(e),t.forward(r),o))}return"function"==typeof s.evaluate?{evaluate(...e){const t=s.evaluate.apply(void 0,e),r=l.evaluate.apply(void 0,e);if(void 0!==t&&void 0!==r)return c(t,r,o)}}:c(s,l,o)}function sn(e,t,r){return"color"===t.type?r=ut.parse(r):"formatted"===t.type?r=ht.fromString(r.toString()):"resolvedImage"===t.type?r=ft.fromString(r.toString()):Qr(r)===t.type||"enum"===t.type&&t.values[r]||(r=void 0),rn(r,e.default,t.default)}Mt.register(jr,{error:[{kind:"error"},[Xe],(e,[t])=>{throw new _t(t.evaluate(e))}],typeof:[Xe,[Qe],(e,[t])=>nt(vt(t.evaluate(e)))],"to-rgba":[rt(We,4),[Ye],(e,[t])=>t.evaluate(e).toArray()],rgb:[Ye,[We,We,We],Ur],rgba:[Ye,[We,We,We,We],Ur],has:{type:Ze,overloads:[[[Xe],(e,[t])=>qr(t.evaluate(e),e.properties())],[[Xe,Ke],(e,[t,r])=>qr(t.evaluate(e),r.evaluate(e))]]},get:{type:Qe,overloads:[[[Xe],(e,[t])=>Hr(t.evaluate(e),e.properties())],[[Xe,Ke],(e,[t,r])=>Hr(t.evaluate(e),r.evaluate(e))]]},"feature-state":[Qe,[Xe],(e,[t])=>Hr(t.evaluate(e),e.featureState||{})],properties:[Ke,[],e=>e.properties()],"geometry-type":[Xe,[],e=>e.geometryType()],id:[Qe,[],e=>e.id()],zoom:[We,[],e=>e.globals.zoom],"heatmap-density":[We,[],e=>e.globals.heatmapDensity||0],"line-progress":[We,[],e=>e.globals.lineProgress||0],"sky-radial-progress":[We,[],e=>e.globals.skyRadialProgress||0],accumulated:[Qe,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[We,Gr(We),(e,t)=>{let r=0;for(const n of t)r+=n.evaluate(e);return r}],"*":[We,Gr(We),(e,t)=>{let r=1;for(const n of t)r*=n.evaluate(e);return r}],"-":{type:We,overloads:[[[We,We],(e,[t,r])=>t.evaluate(e)-r.evaluate(e)],[[We],(e,[t])=>-t.evaluate(e)]]},"/":[We,[We,We],(e,[t,r])=>t.evaluate(e)/r.evaluate(e)],"%":[We,[We,We],(e,[t,r])=>t.evaluate(e)%r.evaluate(e)],ln2:[We,[],()=>Math.LN2],pi:[We,[],()=>Math.PI],e:[We,[],()=>Math.E],"^":[We,[We,We],(e,[t,r])=>Math.pow(t.evaluate(e),r.evaluate(e))],sqrt:[We,[We],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[We,[We],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[We,[We],(e,[t])=>Math.log(t.evaluate(e))],log2:[We,[We],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[We,[We],(e,[t])=>Math.sin(t.evaluate(e))],cos:[We,[We],(e,[t])=>Math.cos(t.evaluate(e))],tan:[We,[We],(e,[t])=>Math.tan(t.evaluate(e))],asin:[We,[We],(e,[t])=>Math.asin(t.evaluate(e))],acos:[We,[We],(e,[t])=>Math.acos(t.evaluate(e))],atan:[We,[We],(e,[t])=>Math.atan(t.evaluate(e))],min:[We,Gr(We),(e,t)=>Math.min(...t.map((t=>t.evaluate(e))))],max:[We,Gr(We),(e,t)=>Math.max(...t.map((t=>t.evaluate(e))))],abs:[We,[We],(e,[t])=>Math.abs(t.evaluate(e))],round:[We,[We],(e,[t])=>{const r=t.evaluate(e);return r<0?-Math.round(-r):Math.round(r)}],floor:[We,[We],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[We,[We],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[Ze,[Xe,Qe],(e,[t,r])=>e.properties()[t.value]===r.value],"filter-id-==":[Ze,[Qe],(e,[t])=>e.id()===t.value],"filter-type-==":[Ze,[Xe],(e,[t])=>e.geometryType()===t.value],"filter-<":[Ze,[Xe,Qe],(e,[t,r])=>{const n=e.properties()[t.value],a=r.value;return typeof n==typeof a&&n<a}],"filter-id-<":[Ze,[Qe],(e,[t])=>{const r=e.id(),n=t.value;return typeof r==typeof n&&r<n}],"filter->":[Ze,[Xe,Qe],(e,[t,r])=>{const n=e.properties()[t.value],a=r.value;return typeof n==typeof a&&n>a}],"filter-id->":[Ze,[Qe],(e,[t])=>{const r=e.id(),n=t.value;return typeof r==typeof n&&r>n}],"filter-<=":[Ze,[Xe,Qe],(e,[t,r])=>{const n=e.properties()[t.value],a=r.value;return typeof n==typeof a&&n<=a}],"filter-id-<=":[Ze,[Qe],(e,[t])=>{const r=e.id(),n=t.value;return typeof r==typeof n&&r<=n}],"filter->=":[Ze,[Xe,Qe],(e,[t,r])=>{const n=e.properties()[t.value],a=r.value;return typeof n==typeof a&&n>=a}],"filter-id->=":[Ze,[Qe],(e,[t])=>{const r=e.id(),n=t.value;return typeof r==typeof n&&r>=n}],"filter-has":[Ze,[Qe],(e,[t])=>t.value in e.properties()],"filter-has-id":[Ze,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[Ze,[rt(Xe)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[Ze,[rt(Qe)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[Ze,[Xe,rt(Qe)],(e,[t,r])=>r.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[Ze,[Xe,rt(Qe)],(e,[t,r])=>function(e,t,r,n){for(;r<=n;){const a=r+n>>1;if(t[a]===e)return!0;t[a]>e?n=a-1:r=a+1}return!1}(e.properties()[t.value],r.value,0,r.value.length-1)],all:{type:Ze,overloads:[[[Ze,Ze],(e,[t,r])=>t.evaluate(e)&&r.evaluate(e)],[Gr(Ze),(e,t)=>{for(const r of t)if(!r.evaluate(e))return!1;return!0}]]},any:{type:Ze,overloads:[[[Ze,Ze],(e,[t,r])=>t.evaluate(e)||r.evaluate(e)],[Gr(Ze),(e,t)=>{for(const r of t)if(r.evaluate(e))return!0;return!1}]]},"!":[Ze,[Ze],(e,[t])=>!t.evaluate(e)],"is-supported-script":[Ze,[Xe],(e,[t])=>{const r=e.globals&&e.globals.isSupportedScript;return!r||r(t.evaluate(e))}],upcase:[Xe,[Xe],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[Xe,[Xe],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[Xe,Gr(Qe),(e,t)=>t.map((t=>yt(t.evaluate(e)))).join("")],"resolved-locale":[Xe,[Je],(e,[t])=>t.evaluate(e).resolvedLocale()]});class ln{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Pt,this._defaultValue=t?function(e){return"color"===e.type&&Jr(e.default)?new ut(0,0,0,0):"color"===e.type?ut.parse(e.default)||null:void 0===e.default?null:e.default}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,r,n,a,i){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=n,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=i,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,n,a,i){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=n,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=i||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new _t(`Expected value to be one of ${Object.keys(this._enumValues).map((e=>JSON.stringify(e))).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function cn(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in jr}function un(e,t){const r=new Qt(jr,[],t?function(e){const t={color:Ye,string:Xe,number:We,enum:Xe,boolean:Ze,formatted:et,resolvedImage:tt};return"array"===e.type?rt(t[e.value]||Qe,e.length):t[e.type]}(t):void 0),n=r.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return n?Wr(new ln(n,t)):Xr(r.errors)}class pn{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!Zt(t.expression)}evaluateWithoutErrorHandling(e,t,r,n,a,i){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,n,a,i)}evaluate(e,t,r,n,a,i){return this._styleExpression.evaluate(e,t,r,n,a,i)}}class dn{constructor(e,t,r,n){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent="camera"!==e&&!Zt(t.expression),this.interpolationType=n}evaluateWithoutErrorHandling(e,t,r,n,a,i){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,n,a,i)}evaluate(e,t,r,n,a,i){return this._styleExpression.evaluate(e,t,r,n,a,i)}interpolationFactor(e,t,r){return this.interpolationType?xr.interpolationFactor(this.interpolationType,e,t,r):0}}function hn(e,t){if("error"===(e=un(e,t)).result)return e;const r=e.value.expression,n=Xt(r);if(!n&&!Zr(t))return Xr([new qe("","data expressions not supported")]);const a=Yt(r,["zoom"]);if(!a&&!Yr(t))return Xr([new qe("","zoom expressions not supported")]);const i=mn(r);return i||a?i instanceof qe?Xr([i]):i instanceof xr&&!Kr(t)?Xr([new qe("",'"interpolate" expressions cannot be used with this property')]):Wr(i?new dn(n?"camera":"composite",e.value,i.labels,i instanceof xr?i.interpolation:void 0):new pn(n?"constant":"source",e.value)):Xr([new qe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class fn{constructor(e,t){this._parameters=e,this._specification=t,Ve(this,tn(this._parameters,this._specification))}static deserialize(e){return new fn(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function mn(e){let t=null;if(e instanceof Cr)t=mn(e.result);else if(e instanceof Er){for(const r of e.args)if(t=mn(r),t)break}else(e instanceof tr||e instanceof xr)&&e.input instanceof Mt&&"zoom"===e.input.name&&(t=e);return t instanceof qe||e.eachChild((e=>{const r=mn(e);r instanceof qe?t=r:!t&&r?t=new qe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&r&&t!==r&&(t=new qe("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}function gn(e){const t=e.key,r=e.value,n=e.valueSpec||{},a=e.objectElementValidators||{},i=e.style,o=e.styleSpec;let s=[];const l=Qr(r);if("object"!==l)return[new Fe(t,r,`object expected, ${l} found`)];for(const e in r){const l=e.split(".")[0],c=n[l]||n["*"];let u;if(a[l])u=a[l];else if(n[l])u=Hn;else if(a["*"])u=a["*"];else{if(!n["*"]){s.push(new Fe(t,r[e],`unknown property "${e}"`));continue}u=Hn}s=s.concat(u({key:(t?`${t}.`:t)+e,value:r[e],valueSpec:c,style:i,styleSpec:o,object:r,objectKey:e},r))}for(const e in n)a[e]||n[e].required&&void 0===n[e].default&&void 0===r[e]&&s.push(new Fe(t,r,`missing required property "${e}"`));return s}function vn(e){const t=e.value,r=e.valueSpec,n=e.style,a=e.styleSpec,i=e.key,o=e.arrayElementValidator||Hn;if("array"!==Qr(t))return[new Fe(i,t,`array expected, ${Qr(t)} found`)];if(r.length&&t.length!==r.length)return[new Fe(i,t,`array length ${r.length} expected, length ${t.length} found`)];if(r["min-length"]&&t.length<r["min-length"])return[new Fe(i,t,`array length at least ${r["min-length"]} expected, length ${t.length} found`)];let s={type:r.value,values:r.values,minimum:r.minimum,maximum:r.maximum};a.$version<7&&(s.function=r.function),"object"===Qr(r.value)&&(s=r.value);let l=[];for(let e=0;e<t.length;e++)l=l.concat(o({array:t,arrayIndex:e,value:t[e],valueSpec:s,style:n,styleSpec:a,key:`${i}[${e}]`}));return l}function yn(e){const t=e.key,r=e.value,n=e.valueSpec;let a=Qr(r);if("number"===a&&r!=r&&(a="NaN"),"number"!==a)return[new Fe(t,r,`number expected, ${a} found`)];if("minimum"in n){let a=n.minimum;if("array"===Qr(n.minimum)&&(a=n.minimum[e.arrayIndex]),r<a)return[new Fe(t,r,`${r} is less than the minimum value ${a}`)]}if("maximum"in n){let a=n.maximum;if("array"===Qr(n.maximum)&&(a=n.maximum[e.arrayIndex]),r>a)return[new Fe(t,r,`${r} is greater than the maximum value ${a}`)]}return[]}function bn(e){const t=e.valueSpec,r=je(e.value.type);let n,a,i,o={};const s="categorical"!==r&&void 0===e.value.property,l=!s,c="array"===Qr(e.value.stops)&&"array"===Qr(e.value.stops[0])&&"object"===Qr(e.value.stops[0][0]),u=gn({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===r)return[new Fe(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const n=e.value;return t=t.concat(vn({key:e.key,value:n,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:p})),"array"===Qr(n)&&0===n.length&&t.push(new Fe(e.key,n,"array must have at least one stop")),t},default:function(e){return Hn({key:e.key,value:e.value,valueSpec:t,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===r&&s&&u.push(new Fe(e.key,e.value,'missing required property "property"')),"identity"===r||e.value.stops||u.push(new Fe(e.key,e.value,'missing required property "stops"')),"exponential"===r&&e.valueSpec.expression&&!Kr(e.valueSpec)&&u.push(new Fe(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!Zr(e.valueSpec)?u.push(new Fe(e.key,e.value,"property functions not supported")):s&&!Yr(e.valueSpec)&&u.push(new Fe(e.key,e.value,"zoom functions not supported"))),"categorical"!==r&&!c||void 0!==e.value.property||u.push(new Fe(e.key,e.value,'"property" property is required')),u;function p(e){let r=[];const n=e.value,s=e.key;if("array"!==Qr(n))return[new Fe(s,n,`array expected, ${Qr(n)} found`)];if(2!==n.length)return[new Fe(s,n,`array length 2 expected, length ${n.length} found`)];if(c){if("object"!==Qr(n[0]))return[new Fe(s,n,`object expected, ${Qr(n[0])} found`)];if(void 0===n[0].zoom)return[new Fe(s,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new Fe(s,n,"object stop key must have value")];if(i&&i>je(n[0].zoom))return[new Fe(s,n[0].zoom,"stop zoom values must appear in ascending order")];je(n[0].zoom)!==i&&(i=je(n[0].zoom),a=void 0,o={}),r=r.concat(gn({key:`${s}[0]`,value:n[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:yn,value:d}}))}else r=r.concat(d({key:`${s}[0]`,value:n[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},n));return cn(Ue(n[1]))?r.concat([new Fe(`${s}[1]`,n[1],"expressions are not allowed in function stops.")]):r.concat(Hn({key:`${s}[1]`,value:n[1],valueSpec:t,style:e.style,styleSpec:e.styleSpec}))}function d(e,i){const s=Qr(e.value),l=je(e.value),c=null!==e.value?e.value:i;if(n){if(s!==n)return[new Fe(e.key,c,`${s} stop domain type must match previous stop domain type ${n}`)]}else n=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new Fe(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==r){let n=`number expected, ${s} found`;return Zr(t)&&void 0===r&&(n+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Fe(e.key,c,n)]}return"categorical"!==r||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==r&&"number"===s&&void 0!==a&&l<a?[new Fe(e.key,c,"stop domain values must appear in ascending order")]:(a=l,"categorical"===r&&l in o?[new Fe(e.key,c,"stop domain values must be unique")]:(o[l]=!0,[])):[new Fe(e.key,c,`integer expected, found ${l}`)]}}function _n(e){const t=("property"===e.expressionContext?hn:un)(Ue(e.value),e.valueSpec);if("error"===t.result)return t.value.map((t=>new Fe(`${e.key}${t.key}`,e.value,t.message)));const r=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!r.outputDefined())return[new Fe(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===e.expressionContext&&"layout"===e.propertyType&&!Zt(r))return[new Fe(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!Zt(r))return[new Fe(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!Yt(r,["zoom","feature-state"]))return[new Fe(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!Xt(r))return[new Fe(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function xn(e){const t=e.key,r=e.value,n=e.valueSpec,a=[];return Array.isArray(n.values)?-1===n.values.indexOf(je(r))&&a.push(new Fe(t,r,`expected one of [${n.values.join(", ")}], ${JSON.stringify(r)} found`)):-1===Object.keys(n.values).indexOf(je(r))&&a.push(new Fe(t,r,`expected one of [${Object.keys(n.values).join(", ")}], ${JSON.stringify(r)} found`)),a}function wn(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!wn(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}const En={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Cn(e){if(null==e)return{filter:()=>!0,needGeometry:!1};wn(e)||(e=Sn(e));const t=un(e,En);if("error"===t.result)throw new Error(t.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return{filter:(e,r,n)=>t.value.evaluate(e,r,{},n),needGeometry:Tn(e)}}function kn(e,t){return e<t?-1:e>t?1:0}function Tn(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(let t=1;t<e.length;t++)if(Tn(e[t]))return!0;return!1}function Sn(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?Pn(e[1],e[2],"=="):"!="===t?An(Pn(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?Pn(e[1],e[2],t):"any"===t?(r=e.slice(1),["any"].concat(r.map(Sn))):"all"===t?["all"].concat(e.slice(1).map(Sn)):"none"===t?["all"].concat(e.slice(1).map(Sn).map(An)):"in"===t?Mn(e[1],e.slice(2)):"!in"===t?An(Mn(e[1],e.slice(2))):"has"===t?In(e[1]):"!has"===t?An(In(e[1])):"within"!==t||e;var r}function Pn(e,t,r){switch(e){case"$type":return[`filter-type-${r}`,t];case"$id":return[`filter-id-${r}`,t];default:return[`filter-${r}`,e,t]}}function Mn(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((e=>typeof e!=typeof t[0]))?["filter-in-large",e,["literal",t.sort(kn)]]:["filter-in-small",e,["literal",t]]}}function In(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function An(e){return["!",e]}function On(e){return wn(Ue(e.value))?_n(Ve({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):zn(e)}function zn(e){const t=e.value,r=e.key;if("array"!==Qr(t))return[new Fe(r,t,`array expected, ${Qr(t)} found`)];const n=e.styleSpec;let a,i=[];if(t.length<1)return[new Fe(r,t,"filter array must have at least 1 element")];switch(i=i.concat(xn({key:`${r}[0]`,value:t[0],valueSpec:n.filter_operator,style:e.style,styleSpec:e.styleSpec})),je(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===je(t[1])&&i.push(new Fe(r,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":3!==t.length&&i.push(new Fe(r,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(a=Qr(t[1]),"string"!==a&&i.push(new Fe(`${r}[1]`,t[1],`string expected, ${a} found`)));for(let o=2;o<t.length;o++)a=Qr(t[o]),"$type"===je(t[1])?i=i.concat(xn({key:`${r}[${o}]`,value:t[o],valueSpec:n.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==a&&"number"!==a&&"boolean"!==a&&i.push(new Fe(`${r}[${o}]`,t[o],`string, number, or boolean expected, ${a} found`));break;case"any":case"all":case"none":for(let n=1;n<t.length;n++)i=i.concat(zn({key:`${r}[${n}]`,value:t[n],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":a=Qr(t[1]),2!==t.length?i.push(new Fe(r,t,`filter array for "${t[0]}" operator must have 2 elements`)):"string"!==a&&i.push(new Fe(`${r}[1]`,t[1],`string expected, ${a} found`));break;case"within":a=Qr(t[1]),2!==t.length?i.push(new Fe(r,t,`filter array for "${t[0]}" operator must have 2 elements`)):"object"!==a&&i.push(new Fe(`${r}[1]`,t[1],`object expected, ${a} found`))}return i}function Rn(e,t){const r=e.key,n=e.style,a=e.styleSpec,i=e.value,o=e.objectKey,s=a[`${t}_${e.layerType}`];if(!s)return[];const l=o.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return Hn({key:r,value:i,valueSpec:a.transition,style:n,styleSpec:a});const c=e.valueSpec||s[o];if(!c)return[new Fe(r,i,`unknown property "${o}"`)];let u;if("string"===Qr(i)&&Zr(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(i)))return[new Fe(r,i,`"${o}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(u[1])} }\`.`)];const p=[];return"symbol"===e.layerType&&("text-field"===o&&n&&!n.glyphs&&p.push(new Fe(r,i,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&Jr(Ue(i))&&"identity"===je(i.type)&&p.push(new Fe(r,i,'"text-font" does not support identity functions'))),p.concat(Hn({key:e.key,value:i,valueSpec:c,style:n,styleSpec:a,expressionContext:"property",propertyType:t,propertyKey:o}))}function Ln(e){return Rn(e,"paint")}function Dn(e){return Rn(e,"layout")}function Bn(e){let t=[];const r=e.value,n=e.key,a=e.style,i=e.styleSpec;r.type||r.ref||t.push(new Fe(n,r,'either "type" or "ref" is required'));let o=je(r.type);const s=je(r.ref);if(r.id){const i=je(r.id);for(let o=0;o<e.arrayIndex;o++){const e=a.layers[o];je(e.id)===i&&t.push(new Fe(n,r.id,`duplicate layer id "${r.id}", previously used at line ${e.id.__line__}`))}}if("ref"in r){let e;["type","source","source-layer","filter","layout"].forEach((e=>{e in r&&t.push(new Fe(n,r[e],`"${e}" is prohibited for ref layers`))})),a.layers.forEach((t=>{je(t.id)===s&&(e=t)})),e?e.ref?t.push(new Fe(n,r.ref,"ref cannot reference another ref layer")):o=je(e.type):t.push(new Fe(n,r.ref,`ref layer "${s}" not found`))}else if("background"!==o&&"sky"!==o)if(r.source){const e=a.sources&&a.sources[r.source],i=e&&je(e.type);e?"vector"===i&&"raster"===o?t.push(new Fe(n,r.source,`layer "${r.id}" requires a raster source`)):"raster"===i&&"raster"!==o?t.push(new Fe(n,r.source,`layer "${r.id}" requires a vector source`)):"vector"!==i||r["source-layer"]?"raster-dem"===i&&"hillshade"!==o?t.push(new Fe(n,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==o||!r.paint||!r.paint["line-gradient"]||"geojson"===i&&e.lineMetrics||t.push(new Fe(n,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Fe(n,r,`layer "${r.id}" must specify a "source-layer"`)):t.push(new Fe(n,r.source,`source "${r.source}" not found`))}else t.push(new Fe(n,r,'missing required property "source"'));return t=t.concat(gn({key:n,value:r,valueSpec:i.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Hn({key:`${n}.type`,value:r.type,valueSpec:i.layer.type,style:e.style,styleSpec:e.styleSpec,object:r,objectKey:"type"}),filter:On,layout:e=>gn({layer:r,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>Dn(Ve({layerType:o},e))}}),paint:e=>gn({layer:r,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>Ln(Ve({layerType:o},e))}})}})),t}function $n(e){const t=e.value,r=e.key,n=Qr(t);return"string"!==n?[new Fe(r,t,`string expected, ${n} found`)]:[]}const Fn={promoteId:function({key:e,value:t}){if("string"===Qr(t))return $n({key:e,value:t});{const r=[];for(const n in t)r.push(...$n({key:`${e}.${n}`,value:t[n]}));return r}}};function Nn(e){const t=e.value,r=e.key,n=e.styleSpec,a=e.style;if(!t.type)return[new Fe(r,t,'"type" is required')];const i=je(t.type);let o;switch(i){case"vector":case"raster":case"raster-dem":return o=gn({key:r,value:t,valueSpec:n[`source_${i.replace("-","_")}`],style:e.style,styleSpec:n,objectElementValidators:Fn}),o;case"geojson":if(o=gn({key:r,value:t,valueSpec:n.source_geojson,style:a,styleSpec:n,objectElementValidators:Fn}),t.cluster)for(const e in t.clusterProperties){const[n,a]=t.clusterProperties[e],i="string"==typeof n?[n,["accumulated"],["get",e]]:n;o.push(..._n({key:`${r}.${e}.map`,value:a,expressionContext:"cluster-map"})),o.push(..._n({key:`${r}.${e}.reduce`,value:i,expressionContext:"cluster-reduce"}))}return o;case"video":return gn({key:r,value:t,valueSpec:n.source_video,style:a,styleSpec:n});case"image":return gn({key:r,value:t,valueSpec:n.source_image,style:a,styleSpec:n});case"canvas":return[new Fe(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return xn({key:`${r}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:a,styleSpec:n})}}function Vn(e){const t=e.value,r=e.styleSpec,n=r.light,a=e.style;let i=[];const o=Qr(t);if(void 0===t)return i;if("object"!==o)return i=i.concat([new Fe("light",t,`object expected, ${o} found`)]),i;for(const e in t){const o=e.match(/^(.*)-transition$/);i=i.concat(o&&n[o[1]]&&n[o[1]].transition?Hn({key:e,value:t[e],valueSpec:r.transition,style:a,styleSpec:r}):n[e]?Hn({key:e,value:t[e],valueSpec:n[e],style:a,styleSpec:r}):[new Fe(e,t[e],`unknown property "${e}"`)])}return i}function jn(e){const t=e.value,r=e.key,n=e.style,a=e.styleSpec,i=a.terrain;let o=[];const s=Qr(t);if(void 0===t)return o;if("object"!==s)return o=o.concat([new Fe("terrain",t,`object expected, ${s} found`)]),o;for(const e in t){const r=e.match(/^(.*)-transition$/);o=o.concat(r&&i[r[1]]&&i[r[1]].transition?Hn({key:e,value:t[e],valueSpec:a.transition,style:n,styleSpec:a}):i[e]?Hn({key:e,value:t[e],valueSpec:i[e],style:n,styleSpec:a}):[new Fe(e,t[e],`unknown property "${e}"`)])}if(t.source){const e=n.sources&&n.sources[t.source],a=e&&je(e.type);e?"raster-dem"!==a&&o.push(new Fe(r,t.source,`terrain cannot be used with a source of type ${a}, it only be used with a "raster-dem" source type`)):o.push(new Fe(r,t.source,`source "${t.source}" not found`))}else o.push(new Fe(r,t,'terrain is missing required property "source"'));return o}function Un(e){const t=e.value,r=e.style,n=e.styleSpec,a=n.fog;let i=[];const o=Qr(t);if(void 0===t)return i;if("object"!==o)return i=i.concat([new Fe("fog",t,`object expected, ${o} found`)]),i;for(const e in t){const o=e.match(/^(.*)-transition$/);i=i.concat(o&&a[o[1]]&&a[o[1]].transition?Hn({key:e,value:t[e],valueSpec:n.transition,style:r,styleSpec:n}):a[e]?Hn({key:e,value:t[e],valueSpec:a[e],style:r,styleSpec:n}):[new Fe(e,t[e],`unknown property "${e}"`)])}return i}const qn={"*":()=>[],array:vn,boolean:function(e){const t=e.value,r=e.key,n=Qr(t);return"boolean"!==n?[new Fe(r,t,`boolean expected, ${n} found`)]:[]},number:yn,color:function(e){const t=e.key,r=e.value,n=Qr(r);return"string"!==n?[new Fe(t,r,`color expected, ${n} found`)]:null===ct.parseCSSColor(r)?[new Fe(t,r,`color expected, "${r}" found`)]:[]},constants:Ne,enum:xn,filter:On,function:bn,layer:Bn,object:gn,source:Nn,light:Vn,terrain:jn,fog:Un,string:$n,formatted:function(e){return 0===$n(e).length?[]:_n(e)},resolvedImage:function(e){return 0===$n(e).length?[]:_n(e)}};function Hn(e){const t=e.value,r=e.valueSpec,n=e.styleSpec;return r.expression&&Jr(je(t))?bn(e):r.expression&&cn(Ue(t))?_n(e):r.type&&qn[r.type]?qn[r.type](e):gn(Ve({},e,{valueSpec:r.type?n[r.type]:r}))}function Gn(e){const t=e.value,r=e.key,n=$n(e);return n.length||(-1===t.indexOf("{fontstack}")&&n.push(new Fe(r,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&n.push(new Fe(r,t,'"glyphs" url must include a "{range}" token'))),n}function Wn(e,t=$e){let r=[];return r=r.concat(Hn({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Gn,"*":()=>[]}})),e.constants&&(r=r.concat(Ne({key:"constants",value:e.constants,style:e,styleSpec:t}))),Xn(r)}function Xn(e){return[].concat(e).sort(((e,t)=>e.line-t.line))}function Zn(e){return function(...t){return Xn(e.apply(this,t))}}Wn.source=Zn(Nn),Wn.light=Zn(Vn),Wn.terrain=Zn(jn),Wn.fog=Zn(Un),Wn.layer=Zn(Bn),Wn.filter=Zn(On),Wn.paintProperty=Zn(Ln),Wn.layoutProperty=Zn(Dn);const Yn=Wn,Kn=Yn.light,Qn=Yn.fog,Jn=Yn.paintProperty,ea=Yn.layoutProperty;function ta(e,t){let r=!1;if(t&&t.length)for(const n of t)e.fire(new De(new Error(n.message))),r=!0;return r}var ra=na;function na(e,t,r){var n=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var a=new Int32Array(this.arrayBuffer);e=a[0],this.d=(t=a[1])+2*(r=a[2]);for(var i=0;i<this.d*this.d;i++){var o=a[3+i],s=a[3+i+1];n.push(o===s?null:a.subarray(o,s))}var l=a[3+n.length+1];this.keys=a.subarray(a[3+n.length],l),this.bboxes=a.subarray(l),this.insert=this._insertReadonly}else{this.d=t+2*r;for(var c=0;c<this.d*this.d;c++)n.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=r,this.scale=t/e,this.uid=0;var u=r/t*e;this.min=-u,this.max=e+u}na.prototype.insert=function(e,t,r,n,a){this._forEachCell(t,r,n,a,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(a)},na.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},na.prototype._insertCell=function(e,t,r,n,a,i){this.cells[a].push(i)},na.prototype.query=function(e,t,r,n,a){var i=this.min,o=this.max;if(e<=i&&t<=i&&o<=r&&o<=n&&!a)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,r,n,this._queryCell,s,{},a),s},na.prototype._queryCell=function(e,t,r,n,a,i,o,s){var l=this.cells[a];if(null!==l)for(var c=this.keys,u=this.bboxes,p=0;p<l.length;p++){var d=l[p];if(void 0===o[d]){var h=4*d;(s?s(u[h+0],u[h+1],u[h+2],u[h+3]):e<=u[h+2]&&t<=u[h+3]&&r>=u[h+0]&&n>=u[h+1])?(o[d]=!0,i.push(c[d])):o[d]=!1}}},na.prototype._forEachCell=function(e,t,r,n,a,i,o,s){for(var l=this._convertToCellCoord(e),c=this._convertToCellCoord(t),u=this._convertToCellCoord(r),p=this._convertToCellCoord(n),d=l;d<=u;d++)for(var h=c;h<=p;h++){var f=this.d*h+d;if((!s||s(this._convertFromCellCoord(d),this._convertFromCellCoord(h),this._convertFromCellCoord(d+1),this._convertFromCellCoord(h+1)))&&a.call(this,e,t,r,n,f,i,o,s))return}},na.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},na.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},na.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,r=0,n=0;n<this.cells.length;n++)r+=this.cells[n].length;var a=new Int32Array(t+r+this.keys.length+this.bboxes.length);a[0]=this.extent,a[1]=this.n,a[2]=this.padding;for(var i=t,o=0;o<e.length;o++){var s=e[o];a[3+o]=i,a.set(s,i),i+=s.length}return a[3+e.length]=i,a.set(this.keys,i),a[3+e.length+1]=i+=this.keys.length,a.set(this.bboxes,i),i+=this.bboxes.length,a.buffer};const{ImageData:aa,ImageBitmap:ia}=o,oa={};function sa(e,t,r={}){Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),oa[e]={klass:t,omit:r.omit||[],shallow:r.shallow||[]}}sa("Object",Object),ra.serialize=function(e,t){const r=e.toArrayBuffer();return t&&t.push(r),{buffer:r}},ra.deserialize=function(e){return new ra(e.buffer)},sa("Grid",ra),sa("Color",ut),sa("Error",Error),sa("ResolvedImage",ft),sa("StylePropertyFunction",fn),sa("StyleExpression",ln,{omit:["_evaluator"]}),sa("ZoomDependentExpression",dn),sa("ZoomConstantExpression",pn),sa("CompoundExpression",Mt,{omit:["_evaluate"]});for(const e in jr)jr[e]._classRegistryKey||sa(`Expression_${e}`,jr[e]);function la(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function ca(e){return ia&&e instanceof ia}function ua(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(la(e)||ca(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){const r=e;return t&&t.push(r.buffer),r}if(e instanceof aa)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){const r=[];for(const n of e)r.push(ua(n,t));return r}if("object"==typeof e){const r=e.constructor,n=r._classRegistryKey;if(!n)throw new Error("can't serialize object of unregistered class");const a=r.serialize?r.serialize(e,t):{};if(!r.serialize){for(const r in e){if(!e.hasOwnProperty(r))continue;if(oa[n].omit.indexOf(r)>=0)continue;const i=e[r];a[r]=oa[n].shallow.indexOf(r)>=0?i:ua(i,t)}e instanceof Error&&(a.message=e.message)}if(a.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==n&&(a.$name=n),a}throw new Error("can't serialize object of type "+typeof e)}function pa(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||la(e)||ca(e)||ArrayBuffer.isView(e)||e instanceof aa)return e;if(Array.isArray(e))return e.map(pa);if("object"==typeof e){const t=e.$name||"Object",{klass:r}=oa[t];if(!r)throw new Error(`can't deserialize unregistered class ${t}`);if(r.deserialize)return r.deserialize(e);const n=Object.create(r.prototype);for(const r of Object.keys(e)){if("$name"===r)continue;const a=e[r];n[r]=oa[t].shallow.indexOf(r)>=0?a:pa(a)}return n}throw new Error("can't deserialize object of type "+typeof e)}class da{constructor(){this.first=!0}update(e,t){const r=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=r,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=r,!0):(this.lastFloorZoom>r?(this.lastIntegerZoom=r+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<r&&(this.lastIntegerZoom=r,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=r,!0))}}const ha=e=>e>=1536&&e<=1791,fa=e=>e>=1872&&e<=1919,ma=e=>e>=2208&&e<=2303,ga=e=>e>=11904&&e<=12031,va=e=>e>=12032&&e<=12255,ya=e=>e>=12272&&e<=12287,ba=e=>e>=12288&&e<=12351,_a=e=>e>=12352&&e<=12447,xa=e=>e>=12448&&e<=12543,wa=e=>e>=12544&&e<=12591,Ea=e=>e>=12704&&e<=12735,Ca=e=>e>=12736&&e<=12783,ka=e=>e>=12784&&e<=12799,Ta=e=>e>=12800&&e<=13055,Sa=e=>e>=13056&&e<=13311,Pa=e=>e>=13312&&e<=19903,Ma=e=>e>=19968&&e<=40959,Ia=e=>e>=40960&&e<=42127,Aa=e=>e>=42128&&e<=42191,Oa=e=>e>=44032&&e<=55215,za=e=>e>=63744&&e<=64255,Ra=e=>e>=64336&&e<=65023,La=e=>e>=65040&&e<=65055,Da=e=>e>=65072&&e<=65103,Ba=e=>e>=65104&&e<=65135,$a=e=>e>=65136&&e<=65279,Fa=e=>e>=65280&&e<=65519;function Na(e){for(const t of e)if(Ua(t.charCodeAt(0)))return!0;return!1}function Va(e){for(const t of e)if(!ja(t.charCodeAt(0)))return!1;return!0}function ja(e){return!(ha(e)||fa(e)||ma(e)||Ra(e)||$a(e))}function Ua(e){return!(746!==e&&747!==e&&(e<4352||!(Ea(e)||wa(e)||Da(e)&&!(e>=65097&&e<=65103)||za(e)||Sa(e)||ga(e)||Ca(e)||!(!ba(e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||Pa(e)||Ma(e)||Ta(e)||(e=>e>=12592&&e<=12687)(e)||(e=>e>=43360&&e<=43391)(e)||(e=>e>=55216&&e<=55295)(e)||(e=>e>=4352&&e<=4607)(e)||Oa(e)||_a(e)||ya(e)||(e=>e>=12688&&e<=12703)(e)||va(e)||ka(e)||xa(e)&&12540!==e||!(!Fa(e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!Ba(e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||(e=>e>=5120&&e<=5759)(e)||(e=>e>=6320&&e<=6399)(e)||La(e)||(e=>e>=19904&&e<=19967)(e)||Ia(e)||Aa(e))))}function qa(e){return!(Ua(e)||function(e){return!!((e=>e>=128&&e<=255)(e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||(e=>e>=8192&&e<=8303)(e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||(e=>e>=8448&&e<=8527)(e)||(e=>e>=8528&&e<=8591)(e)||(e=>e>=8960&&e<=9215)(e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||(e=>e>=9216&&e<=9279)(e)&&9251!==e||(e=>e>=9280&&e<=9311)(e)||(e=>e>=9312&&e<=9471)(e)||(e=>e>=9632&&e<=9727)(e)||(e=>e>=9728&&e<=9983)(e)&&!(e>=9754&&e<=9759)||(e=>e>=11008&&e<=11263)(e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||ba(e)||xa(e)||(e=>e>=57344&&e<=63743)(e)||Da(e)||Ba(e)||Fa(e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function Ha(e){return e>=1424&&e<=2303||Ra(e)||$a(e)}function Ga(e,t){return!(!t&&Ha(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||(e=>e>=6016&&e<=6143)(e))}function Wa(e){for(const t of e)if(Ha(t.charCodeAt(0)))return!0;return!1}const Xa="deferred",Za="loading",Ya="loaded";let Ka=null,Qa="unavailable",Ja=null;const ei=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(Qa="error"),Ka&&Ka(e)};function ti(){ri.fire(new Le("pluginStateChange",{pluginStatus:Qa,pluginURL:Ja}))}const ri=new Be,ni=function(){return Qa},ai=function(){if(Qa!==Xa||!Ja)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Qa=Za,ti(),Ja&&ke({url:Ja},(e=>{e?ei(e):(Qa=Ya,ti())}))},ii={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Qa===Ya||null!=ii.applyArabicShaping,isLoading:()=>Qa===Za,setState(e){Qa=e.pluginStatus,Ja=e.pluginURL},isParsed:()=>null!=ii.applyArabicShaping&&null!=ii.processBidirectionalText&&null!=ii.processStyledBidirectionalText,getPluginURL:()=>Ja};class oi{constructor(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new da,this.transition={})}isSupportedScript(e){return function(e,t){for(const r of e)if(!Ga(r.charCodeAt(0),t))return!1;return!0}(e,ii.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,t=e-Math.floor(e),r=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*r}:{fromScale:.5,toScale:1,t:1-(1-r)*t}}}class si{constructor(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(Jr(e))return new fn(e,t);if(cn(e)){const r=hn(e,t);if("error"===r.result)throw new Error(r.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return r.value}{let r=e;return"string"==typeof e&&"color"===t.type&&(r=ut.parse(e)),{kind:"constant",evaluate:()=>r}}}(void 0===t?e.specification.default:t,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,t,r){return this.property.possiblyEvaluate(this,e,t,r)}}class li{constructor(e){this.property=e,this.value=new si(e,void 0)}transitioned(e,t){return new ui(this.property,this.value,t,b({},e.transition,this.transition),e.now)}untransitioned(){return new ui(this.property,this.value,null,{},0)}}class ci{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return M(this._values[e].value.value)}setValue(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new li(this._values[e].property)),this._values[e].value=new si(this._values[e].property,null===t?void 0:M(t))}getTransition(e){return M(this._values[e].transition)}setTransition(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new li(this._values[e].property)),this._values[e].transition=M(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const r=this.getValue(t);void 0!==r&&(e[t]=r);const n=this.getTransition(t);void 0!==n&&(e[`${t}-transition`]=n)}return e}transitioned(e,t){const r=new pi(this._properties);for(const n of Object.keys(this._values))r._values[n]=this._values[n].transitioned(e,t._values[n]);return r}untransitioned(){const e=new pi(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class ui{constructor(e,t,r,n,a){const i=n.delay||0,o=n.duration||0;a=a||0,this.property=e,this.value=t,this.begin=a+i,this.end=this.begin+o,e.specification.transition&&(n.delay||n.duration)&&(this.prior=r)}possiblyEvaluate(e,t,r){const n=e.now||0,a=this.value.possiblyEvaluate(e,t,r),i=this.prior;if(i){if(n>this.end)return this.prior=null,a;if(this.value.isDataDriven())return this.prior=null,a;if(n<this.begin)return i.possiblyEvaluate(e,t,r);{const o=(n-this.begin)/(this.end-this.begin);return this.property.interpolate(i.possiblyEvaluate(e,t,r),a,d(o))}}return a}}class pi{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,r){const n=new fi(this._properties);for(const a of Object.keys(this._values))n._values[a]=this._values[a].possiblyEvaluate(e,t,r);return n}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class di{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return M(this._values[e].value)}setValue(e,t){this._values[e]=new si(this._values[e].property,null===t?void 0:M(t))}serialize(){const e={};for(const t of Object.keys(this._values)){const r=this.getValue(t);void 0!==r&&(e[t]=r)}return e}possiblyEvaluate(e,t,r){const n=new fi(this._properties);for(const a of Object.keys(this._values))n._values[a]=this._values[a].possiblyEvaluate(e,t,r);return n}}class hi{constructor(e,t,r){this.property=e,this.value=t,this.parameters=r}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,r,n){return this.property.evaluate(this.value,this.parameters,e,t,r,n)}}class fi{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class mi{constructor(e){this.specification=e}possiblyEvaluate(e,t){return e.expression.evaluate(t)}interpolate(e,t,r){const n=nr[this.specification.type];return n?n(e,t,r):e}}class gi{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,r,n){return new hi(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},r,n)}:e.expression,t)}interpolate(e,t,r){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new hi(this,{kind:"constant",value:void 0},e.parameters);const n=nr[this.specification.type];return n?new hi(this,{kind:"constant",value:n(e.value.value,t.value.value,r)},e.parameters):e}evaluate(e,t,r,n,a,i){return"constant"===e.kind?e.value:e.evaluate(t,r,n,a,i)}}class vi extends gi{possiblyEvaluate(e,t,r,n){if(void 0===e.value)return new hi(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){const a=e.expression.evaluate(t,null,{},r,n),i="resolvedImage"===e.property.specification.type&&"string"!=typeof a?a.name:a,o=this._calculate(i,i,i,t);return new hi(this,{kind:"constant",value:o},t)}if("camera"===e.expression.kind){const r=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new hi(this,{kind:"constant",value:r},t)}return new hi(this,e.expression,t)}evaluate(e,t,r,n,a,i){if("source"===e.kind){const o=e.evaluate(t,r,n,a,i);return this._calculate(o,o,o,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},r,n),e.evaluate({zoom:Math.floor(t.zoom)},r,n),e.evaluate({zoom:Math.floor(t.zoom)+1},r,n),t):e.value}_calculate(e,t,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:e,to:t,other:r}:{from:r,to:t,other:e}}interpolate(e){return e}}class yi{constructor(e){this.specification=e}possiblyEvaluate(e,t,r,n){if(void 0!==e.value){if("constant"===e.expression.kind){const a=e.expression.evaluate(t,null,{},r,n);return this._calculate(a,a,a,t)}return this._calculate(e.expression.evaluate(new oi(Math.floor(t.zoom-1),t)),e.expression.evaluate(new oi(Math.floor(t.zoom),t)),e.expression.evaluate(new oi(Math.floor(t.zoom+1),t)),t)}}_calculate(e,t,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:r,to:t}}interpolate(e){return e}}class bi{constructor(e){this.specification=e}possiblyEvaluate(e,t,r,n){return!!e.expression.evaluate(t,null,{},r,n)}interpolate(){return!1}}class _i{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const t in e){const r=e[t];r.specification.overridable&&this.overridableProperties.push(t);const n=this.defaultPropertyValues[t]=new si(r,void 0),a=this.defaultTransitionablePropertyValues[t]=new li(r);this.defaultTransitioningPropertyValues[t]=a.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=n.possiblyEvaluate({})}}}function xi(e,t){return 256*(e=m(Math.floor(e),0,255))+m(Math.floor(t),0,255)}sa("DataDrivenProperty",gi),sa("DataConstantProperty",mi),sa("CrossFadedDataDrivenProperty",vi),sa("CrossFadedProperty",yi),sa("ColorRampProperty",bi);const wi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ei{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ci{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ki(e,t=1){let r=0,n=0;return{members:e.map((e=>{const a=wi[e.type].BYTES_PER_ELEMENT,i=r=Ti(r,Math.max(t,a)),o=e.components||1;return n=Math.max(n,a),r+=a*o,{name:e.name,type:e.type,components:o,offset:i}})),size:Ti(r,Math.max(n,t)),alignment:t}}function Ti(e,t){return Math.ceil(e/t)*t}class Si extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const r=this.length;return this.resize(r+1),this.emplace(r,e,t)}emplace(e,t,r){const n=2*e;return this.int16[n+0]=t,this.int16[n+1]=r,e}}Si.prototype.bytesPerElement=4,sa("StructArrayLayout2i4",Si);class Pi extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,n)}emplace(e,t,r,n,a){const i=4*e;return this.int16[i+0]=t,this.int16[i+1]=r,this.int16[i+2]=n,this.int16[i+3]=a,e}}Pi.prototype.bytesPerElement=8,sa("StructArrayLayout4i8",Pi);class Mi extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,n,a,i,o){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,r,n,a,i,o)}emplace(e,t,r,n,a,i,o,s){const l=6*e,c=12*e,u=3*e;return this.int16[l+0]=t,this.int16[l+1]=r,this.uint8[c+4]=n,this.uint8[c+5]=a,this.uint8[c+6]=i,this.uint8[c+7]=o,this.float32[u+2]=s,e}}Mi.prototype.bytesPerElement=12,sa("StructArrayLayout2i4ub1f12",Mi);class Ii extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const r=this.length;return this.resize(r+1),this.emplace(r,e,t)}emplace(e,t,r){const n=2*e;return this.float32[n+0]=t,this.float32[n+1]=r,e}}Ii.prototype.bytesPerElement=8,sa("StructArrayLayout2f8",Ii);class Ai extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,a,i,o,s,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,e,t,r,n,a,i,o,s,l,c)}emplace(e,t,r,n,a,i,o,s,l,c,u){const p=10*e;return this.uint16[p+0]=t,this.uint16[p+1]=r,this.uint16[p+2]=n,this.uint16[p+3]=a,this.uint16[p+4]=i,this.uint16[p+5]=o,this.uint16[p+6]=s,this.uint16[p+7]=l,this.uint16[p+8]=c,this.uint16[p+9]=u,e}}Ai.prototype.bytesPerElement=20,sa("StructArrayLayout10ui20",Ai);class Oi extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,a,i,o,s){const l=this.length;return this.resize(l+1),this.emplace(l,e,t,r,n,a,i,o,s)}emplace(e,t,r,n,a,i,o,s,l){const c=8*e;return this.uint16[c+0]=t,this.uint16[c+1]=r,this.uint16[c+2]=n,this.uint16[c+3]=a,this.uint16[c+4]=i,this.uint16[c+5]=o,this.uint16[c+6]=s,this.uint16[c+7]=l,e}}Oi.prototype.bytesPerElement=16,sa("StructArrayLayout8ui16",Oi);class zi extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,a,i,o,s,l,c,u,p){const d=this.length;return this.resize(d+1),this.emplace(d,e,t,r,n,a,i,o,s,l,c,u,p)}emplace(e,t,r,n,a,i,o,s,l,c,u,p,d){const h=12*e;return this.int16[h+0]=t,this.int16[h+1]=r,this.int16[h+2]=n,this.int16[h+3]=a,this.uint16[h+4]=i,this.uint16[h+5]=o,this.uint16[h+6]=s,this.uint16[h+7]=l,this.int16[h+8]=c,this.int16[h+9]=u,this.int16[h+10]=p,this.int16[h+11]=d,e}}zi.prototype.bytesPerElement=24,sa("StructArrayLayout4i4ui4i24",zi);class Ri extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)}emplace(e,t,r,n){const a=3*e;return this.float32[a+0]=t,this.float32[a+1]=r,this.float32[a+2]=n,e}}Ri.prototype.bytesPerElement=12,sa("StructArrayLayout3f12",Ri);class Li extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}Li.prototype.bytesPerElement=4,sa("StructArrayLayout1ul4",Li);class Di extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,a,i,o,s,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,e,t,r,n,a,i,o,s,l,c)}emplace(e,t,r,n,a,i,o,s,l,c,u){const p=16*e,d=8*e;return this.int16[p+0]=t,this.int16[p+1]=r,this.float32[d+1]=n,this.float32[d+2]=a,this.float32[d+3]=i,this.float32[d+4]=o,this.int16[p+10]=s,this.uint32[d+6]=l,this.uint16[p+14]=c,this.uint16[p+15]=u,e}}Di.prototype.bytesPerElement=32,sa("StructArrayLayout2i4f1i1ul2ui32",Di);class Bi extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,a,i){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,r,n,a,i)}emplace(e,t,r,n,a,i,o){const s=6*e;return this.int16[s+0]=t,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=a,this.int16[s+4]=i,this.int16[s+5]=o,e}}Bi.prototype.bytesPerElement=12,sa("StructArrayLayout2i2i2i12",Bi);class $i extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,a){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,n,a)}emplace(e,t,r,n,a,i){const o=4*e,s=8*e;return this.float32[o+0]=t,this.float32[o+1]=r,this.float32[o+2]=n,this.int16[s+6]=a,this.int16[s+7]=i,e}}$i.prototype.bytesPerElement=16,sa("StructArrayLayout2f1f2i16",$i);class Fi extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,n){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,n)}emplace(e,t,r,n,a){const i=12*e,o=3*e;return this.uint8[i+0]=t,this.uint8[i+1]=r,this.float32[o+1]=n,this.float32[o+2]=a,e}}Fi.prototype.bytesPerElement=12,sa("StructArrayLayout2ub2f12",Fi);class Ni extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)}emplace(e,t,r,n){const a=3*e;return this.uint16[a+0]=t,this.uint16[a+1]=r,this.uint16[a+2]=n,e}}Ni.prototype.bytesPerElement=6,sa("StructArrayLayout3ui6",Ni);class Vi extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,a,i,o,s,l,c,u,p,d,h,f,m,g,v){const y=this.length;return this.resize(y+1),this.emplace(y,e,t,r,n,a,i,o,s,l,c,u,p,d,h,f,m,g,v)}emplace(e,t,r,n,a,i,o,s,l,c,u,p,d,h,f,m,g,v,y){const b=13*e,_=26*e,x=52*e;return this.float32[b+0]=t,this.float32[b+1]=r,this.uint16[_+4]=n,this.uint16[_+5]=a,this.uint32[b+3]=i,this.uint32[b+4]=o,this.uint32[b+5]=s,this.uint16[_+12]=l,this.uint16[_+13]=c,this.uint16[_+14]=u,this.float32[b+8]=p,this.float32[b+9]=d,this.uint8[x+40]=h,this.uint8[x+41]=f,this.uint8[x+42]=m,this.uint32[b+11]=g,this.int16[_+24]=v,this.uint8[x+50]=y,e}}Vi.prototype.bytesPerElement=52,sa("StructArrayLayout2f2ui3ul3ui2f3ub1ul1i1ub52",Vi);class ji extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,t,r,n,a,i,o,s,l,c,u,p,d,h,f,m,g,v,y,b,_,x,w,E,C,k,T){const S=this.length;return this.resize(S+1),this.emplace(S,e,t,r,n,a,i,o,s,l,c,u,p,d,h,f,m,g,v,y,b,_,x,w,E,C,k,T)}emplace(e,t,r,n,a,i,o,s,l,c,u,p,d,h,f,m,g,v,y,b,_,x,w,E,C,k,T,S){const P=17*e,M=34*e;return this.float32[P+0]=t,this.float32[P+1]=r,this.int16[M+4]=n,this.int16[M+5]=a,this.int16[M+6]=i,this.int16[M+7]=o,this.int16[M+8]=s,this.int16[M+9]=l,this.uint16[M+10]=c,this.uint16[M+11]=u,this.uint16[M+12]=p,this.uint16[M+13]=d,this.uint16[M+14]=h,this.uint16[M+15]=f,this.uint16[M+16]=m,this.uint16[M+17]=g,this.uint16[M+18]=v,this.uint16[M+19]=y,this.uint16[M+20]=b,this.uint16[M+21]=_,this.uint16[M+22]=x,this.uint16[M+23]=w,this.uint16[M+24]=E,this.uint32[P+13]=C,this.float32[P+14]=k,this.float32[P+15]=T,this.float32[P+16]=S,e}}ji.prototype.bytesPerElement=68,sa("StructArrayLayout2f6i15ui1ul3f68",ji);class Ui extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}Ui.prototype.bytesPerElement=4,sa("StructArrayLayout1f4",Ui);class qi extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)}emplace(e,t,r,n){const a=3*e;return this.int16[a+0]=t,this.int16[a+1]=r,this.int16[a+2]=n,e}}qi.prototype.bytesPerElement=6,sa("StructArrayLayout3i6",qi);class Hi extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,n){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,n)}emplace(e,t,r,n,a){const i=6*e;return this.uint32[3*e+0]=t,this.uint16[i+2]=r,this.uint16[i+3]=n,this.uint16[i+4]=a,e}}Hi.prototype.bytesPerElement=12,sa("StructArrayLayout1ul3ui12",Hi);class Gi extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const r=this.length;return this.resize(r+1),this.emplace(r,e,t)}emplace(e,t,r){const n=2*e;return this.uint16[n+0]=t,this.uint16[n+1]=r,e}}Gi.prototype.bytesPerElement=4,sa("StructArrayLayout2ui4",Gi);class Wi extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}Wi.prototype.bytesPerElement=2,sa("StructArrayLayout1ui2",Wi);class Xi extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,n){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,n)}emplace(e,t,r,n,a){const i=4*e;return this.float32[i+0]=t,this.float32[i+1]=r,this.float32[i+2]=n,this.float32[i+3]=a,e}}Xi.prototype.bytesPerElement=16,sa("StructArrayLayout4f16",Xi);class Zi extends Ei{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.float32[this._pos4+1]}get y1(){return this._structArray.float32[this._pos4+2]}get x2(){return this._structArray.float32[this._pos4+3]}get y2(){return this._structArray.float32[this._pos4+4]}get padding(){return this._structArray.int16[this._pos2+10]}get featureIndex(){return this._structArray.uint32[this._pos4+6]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+14]}get bucketIndex(){return this._structArray.uint16[this._pos2+15]}get anchorPoint(){return new a(this.anchorPointX,this.anchorPointY)}}Zi.prototype.size=32;class Yi extends Di{get(e){return new Zi(this,e)}}sa("CollisionBoxArray",Yi);class Ki extends Ei{get anchorX(){return this._structArray.float32[this._pos4+0]}get anchorY(){return this._structArray.float32[this._pos4+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+4]}get numGlyphs(){return this._structArray.uint16[this._pos2+5]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineStartIndex(){return this._structArray.uint32[this._pos4+4]}get lineLength(){return this._structArray.uint32[this._pos4+5]}get segment(){return this._structArray.uint16[this._pos2+12]}get lowerSize(){return this._structArray.uint16[this._pos2+13]}get upperSize(){return this._structArray.uint16[this._pos2+14]}get lineOffsetX(){return this._structArray.float32[this._pos4+8]}get lineOffsetY(){return this._structArray.float32[this._pos4+9]}get writingMode(){return this._structArray.uint8[this._pos1+40]}get placedOrientation(){return this._structArray.uint8[this._pos1+41]}set placedOrientation(e){this._structArray.uint8[this._pos1+41]=e}get hidden(){return this._structArray.uint8[this._pos1+42]}set hidden(e){this._structArray.uint8[this._pos1+42]=e}get crossTileID(){return this._structArray.uint32[this._pos4+11]}set crossTileID(e){this._structArray.uint32[this._pos4+11]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+24]}get flipState(){return this._structArray.uint8[this._pos1+50]}set flipState(e){this._structArray.uint8[this._pos1+50]=e}}Ki.prototype.size=52;class Qi extends Vi{get(e){return new Ki(this,e)}}sa("PlacedSymbolArray",Qi);class Ji extends Ei{get anchorX(){return this._structArray.float32[this._pos4+0]}get anchorY(){return this._structArray.float32[this._pos4+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+8]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+9]}get key(){return this._structArray.uint16[this._pos2+10]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get featureIndex(){return this._structArray.uint16[this._pos2+19]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+21]}get numIconVertices(){return this._structArray.uint16[this._pos2+22]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+23]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+24]}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Ji.prototype.size=68;class eo extends ji{get(e){return new Ji(this,e)}}sa("SymbolInstanceArray",eo);class to extends Ui{getoffsetX(e){return this.float32[1*e+0]}}sa("GlyphOffsetArray",to);class ro extends qi{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}sa("SymbolLineVertexArray",ro);class no extends Ei{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}no.prototype.size=12;class ao extends Hi{get(e){return new no(this,e)}}sa("FeatureIndexArray",ao);class io extends Ei{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}io.prototype.size=4;class oo extends Gi{get(e){return new io(this,e)}}sa("FillExtrusionCentroidArray",oo);const so=ki([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),lo=ki([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var co=lt((function(e){e.exports=function(e,t){var r,n,a,i,o,s,l,c;for(n=e.length-(r=3&e.length),a=t,o=3432918353,s=461845907,c=0;c<n;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,a=27492+(65535&(i=5*(65535&(a=(a^=l=(65535&(l=(l=(65535&l)*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|a>>>19))+((5*(a>>>16)&65535)<<16)&4294967295))+((58964+(i>>>16)&65535)<<16);switch(l=0,r){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:a^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return a^=e.length,a=2246822507*(65535&(a^=a>>>16))+((2246822507*(a>>>16)&65535)<<16)&4294967295,a=3266489909*(65535&(a^=a>>>13))+((3266489909*(a>>>16)&65535)<<16)&4294967295,(a^=a>>>16)>>>0}})),uo=lt((function(e){e.exports=function(e,t){for(var r,n=e.length,a=t^n,i=0;n>=4;)r=1540483477*(65535&(r=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))+((1540483477*(r>>>16)&65535)<<16),a=1540483477*(65535&a)+((1540483477*(a>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),n-=4,++i;switch(n){case 3:a^=(255&e.charCodeAt(i+2))<<16;case 2:a^=(255&e.charCodeAt(i+1))<<8;case 1:a=1540483477*(65535&(a^=255&e.charCodeAt(i)))+((1540483477*(a>>>16)&65535)<<16)}return a=1540483477*(65535&(a^=a>>>13))+((1540483477*(a>>>16)&65535)<<16),(a^=a>>>15)>>>0}})),po=co,ho=uo;po.murmur3=co,po.murmur2=ho;class fo{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,r,n){this.ids.push(mo(e)),this.positions.push(t,r,n)}getPositions(e){const t=mo(e);let r=0,n=this.ids.length-1;for(;r<n;){const e=r+n>>1;this.ids[e]>=t?n=e:r=e+1}const a=[];for(;this.ids[r]===t;)a.push({index:this.positions[3*r],start:this.positions[3*r+1],end:this.positions[3*r+2]}),r++;return a}static serialize(e,t){const r=new Float64Array(e.ids),n=new Uint32Array(e.positions);return go(r,n,0,r.length-1),t&&t.push(r.buffer,n.buffer),{ids:r,positions:n}}static deserialize(e){const t=new fo;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function mo(e){const t=+e;return!isNaN(t)&&t<=s?t:po(String(e))}function go(e,t,r,n){for(;r<n;){const a=e[r+n>>1];let i=r-1,o=n+1;for(;;){do{i++}while(e[i]<a);do{o--}while(e[o]>a);if(i>=o)break;vo(e,i,o),vo(t,3*i,3*o),vo(t,3*i+1,3*o+1),vo(t,3*i+2,3*o+2)}o-r<n-o?(go(e,t,r,o),r=o+1):(go(e,t,o+1,n),n=o)}}function vo(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}sa("FeaturePositionMap",fo);class yo{constructor(e,t){this.gl=e.gl,this.location=t}}class bo extends yo{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class _o extends yo{constructor(e,t){super(e,t),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class xo extends yo{constructor(e,t){super(e,t),this.current=ut.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const wo=new Float32Array(16),Eo=new Float32Array(9);function Co(e){return[xi(255*e.r,255*e.g),xi(255*e.b,255*e.a)]}class ko{constructor(e,t,r){this.value=e,this.uniformNames=t.map((e=>`u_${e}`)),this.type=r}setUniform(e,t,r){e.set(r.constantOr(this.value))}getBinding(e,t,r){return"color"===this.type?new xo(e,t):new bo(e,t)}}class To{constructor(e,t){this.uniformNames=t.map((e=>`u_${e}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tl.concat(t.br),this.patternTo=e.tl.concat(e.br)}setUniform(e,t,r,n){const a="u_pattern_to"===n||"u_dash_to"===n?this.patternTo:"u_pattern_from"===n||"u_dash_from"===n?this.patternFrom:"u_pixel_ratio_to"===n?this.pixelRatioTo:"u_pixel_ratio_from"===n?this.pixelRatioFrom:null;a&&e.set(a)}getBinding(e,t,r){return"u_pattern_from"===r||"u_pattern_to"===r||"u_dash_from"===r||"u_dash_to"===r?new _o(e,t):new bo(e,t)}}class So{constructor(e,t,r,n){this.expression=e,this.type=r,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===r?2:1,offset:0}))),this.paintVertexArray=new n}populatePaintArray(e,t,r,n,a){const i=this.paintVertexArray.length,o=this.expression.evaluate(new oi(0),t,{},n,[],a);this.paintVertexArray.resize(e),this._setPaintValue(i,e,o)}updatePaintArray(e,t,r,n){const a=this.expression.evaluate({zoom:0},r,n);this._setPaintValue(e,t,a)}_setPaintValue(e,t,r){if("color"===this.type){const n=Co(r);for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,n[0],n[1])}else{for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,r);this.maxValue=Math.max(this.maxValue,Math.abs(r))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Po{constructor(e,t,r,n,a,i){this.expression=e,this.uniformNames=t.map((e=>`u_${e}_t`)),this.type=r,this.useIntegerZoom=n,this.zoom=a,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===r?4:2,offset:0}))),this.paintVertexArray=new i}populatePaintArray(e,t,r,n,a){const i=this.expression.evaluate(new oi(this.zoom),t,{},n,[],a),o=this.expression.evaluate(new oi(this.zoom+1),t,{},n,[],a),s=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(s,e,i,o)}updatePaintArray(e,t,r,n){const a=this.expression.evaluate({zoom:this.zoom},r,n),i=this.expression.evaluate({zoom:this.zoom+1},r,n);this._setPaintValue(e,t,a,i)}_setPaintValue(e,t,r,n){if("color"===this.type){const a=Co(r),i=Co(n);for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,a[0],a[1],i[0],i[1])}else{for(let a=e;a<t;a++)this.paintVertexArray.emplace(a,r,n);this.maxValue=Math.max(this.maxValue,Math.abs(r),Math.abs(n))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t){const r=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,n=m(this.expression.interpolationFactor(r,this.zoom,this.zoom+1),0,1);e.set(n)}getBinding(e,t,r){return new bo(e,t)}}class Mo{constructor(e,t,r,n,a,i,o){this.expression=e,this.type=r,this.useIntegerZoom=n,this.zoom=a,this.layerId=o,this.paintVertexAttributes=("array"===r?lo:so).members;for(let e=0;e<t.length;++e);this.zoomInPaintVertexArray=new i,this.zoomOutPaintVertexArray=new i}populatePaintArray(e,t,r){const n=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(n,e,t.patterns&&t.patterns[this.layerId],r)}updatePaintArray(e,t,r,n,a){this._setPaintValues(e,t,r.patterns&&r.patterns[this.layerId],a)}_setPaintValues(e,t,r,n){if(!n||!r)return;const{min:a,mid:i,max:o}=r,s=n[a],l=n[i],c=n[o];if(s&&l&&c)for(let r=e;r<t;r++)this._setPaintValue(this.zoomInPaintVertexArray,r,l,s),this._setPaintValue(this.zoomOutPaintVertexArray,r,l,c)}_setPaintValue(e,t,r,n){e.emplace(t,r.tl[0],r.tl[1],r.br[0],r.br[1],n.tl[0],n.tl[1],n.br[0],n.br[1],r.pixelRatio,n.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Io{constructor(e,t,r=(()=>!0)){this.binders={},this._buffers=[];const n=[];for(const a in e.paint._values){if(!r(a))continue;const i=e.paint.get(a);if(!(i instanceof hi&&Zr(i.property.specification)))continue;const o=zo(a,e.type),s=i.value,l=i.property.specification.type,c=i.property.useIntegerZoom,u=i.property.specification["property-type"],p="cross-faded"===u||"cross-faded-data-driven"===u,d="line-dasharray"===String(a)&&"constant"!==e.layout.get("line-cap").value.kind;if("constant"!==s.kind||d)if("source"===s.kind||d||p){const r=Do(a,l,"source");this.binders[a]=p?new Mo(s,o,l,c,t,r,e.id):new So(s,o,l,r),n.push(`/a_${a}`)}else{const e=Do(a,l,"composite");this.binders[a]=new Po(s,o,l,c,t,e),n.push(`/z_${a}`)}else this.binders[a]=p?new To(s.value,o):new ko(s.value,o,l),n.push(`/u_${a}`)}this.cacheKey=n.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof So||t instanceof Po?t.maxValue:0}populatePaintArrays(e,t,r,n,a){for(const i in this.binders){const o=this.binders[i];(o instanceof So||o instanceof Po||o instanceof Mo)&&o.populatePaintArray(e,t,r,n,a)}}setConstantPatternPositions(e,t){for(const r in this.binders){const n=this.binders[r];n instanceof To&&n.setConstantPatternPositions(e,t)}}updatePaintArrays(e,t,r,n,a){let i=!1;for(const o in e){const s=t.getPositions(o);for(const t of s){const s=r.feature(t.index);for(const r in this.binders){const l=this.binders[r];if((l instanceof So||l instanceof Po||l instanceof Mo)&&!0===l.expression.isStateDependent){const c=n.paint.get(r);l.expression=c.value,l.updatePaintArray(t.start,t.end,s,e[o],a),i=!0}}}}return i}defines(){const e=[];for(const t in this.binders){const r=this.binders[t];(r instanceof ko||r instanceof To)&&e.push(...r.uniformNames.map((e=>`#define HAS_UNIFORM_${e}`)))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const r=this.binders[t];if(r instanceof So||r instanceof Po||r instanceof Mo)for(let t=0;t<r.paintVertexAttributes.length;t++)e.push(r.paintVertexAttributes[t].name)}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const r=this.binders[t];if(r instanceof ko||r instanceof To||r instanceof Po)for(const t of r.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,t){const r=[];for(const n in this.binders){const a=this.binders[n];if(a instanceof ko||a instanceof To||a instanceof Po)for(const i of a.uniformNames)if(t[i]){const o=a.getBinding(e,t[i],i);r.push({name:i,property:n,binding:o})}}return r}setUniforms(e,t,r,n){for(const{name:e,property:a,binding:i}of t)this.binders[a].setUniform(i,n,r.get(a),e)}updatePaintBuffers(e){this._buffers=[];for(const t in this.binders){const r=this.binders[t];if(e&&r instanceof Mo){const t=2===e.fromScale?r.zoomInPaintVertexBuffer:r.zoomOutPaintVertexBuffer;t&&this._buffers.push(t)}else(r instanceof So||r instanceof Po)&&r.paintVertexBuffer&&this._buffers.push(r.paintVertexBuffer)}}upload(e){for(const t in this.binders){const r=this.binders[t];(r instanceof So||r instanceof Po||r instanceof Mo)&&r.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof So||t instanceof Po||t instanceof Mo)&&t.destroy()}}}class Ao{constructor(e,t,r=(()=>!0)){this.programConfigurations={};for(const n of e)this.programConfigurations[n.id]=new Io(n,t,r);this.needsUpload=!1,this._featureMap=new fo,this._bufferOffset=0}populatePaintArrays(e,t,r,n,a,i){for(const r in this.programConfigurations)this.programConfigurations[r].populatePaintArrays(e,t,n,a,i);void 0!==t.id&&this._featureMap.add(t.id,r,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,r,n){for(const a of r)this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(e,this._featureMap,t,a,n)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const Oo={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function zo(e,t){return Oo[e]||[e.replace(`${t}-`,"").replace(/-/g,"_")]}const Ro={"line-pattern":{source:Ai,composite:Ai},"fill-pattern":{source:Ai,composite:Ai},"fill-extrusion-pattern":{source:Ai,composite:Ai},"line-dasharray":{source:Oi,composite:Oi}},Lo={color:{source:Ii,composite:Xi},number:{source:Ui,composite:Ii}};function Do(e,t,r){const n=Ro[e];return n&&n[r]||Lo[t][r]}sa("ConstantBinder",ko),sa("CrossFadedConstantBinder",To),sa("SourceExpressionBinder",So),sa("CrossFadedCompositeBinder",Mo),sa("CompositeExpressionBinder",Po),sa("ProgramConfiguration",Io,{omit:["_buffers"]}),sa("ProgramConfigurationSet",Ao);const Bo="-transition";class $o extends Be{constructor(e,t){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),t.layout&&(this._unevaluatedLayout=new di(t.layout)),t.paint)){this._transitionablePaint=new ci(t.paint);for(const t in e.paint)this.setPaintProperty(t,e.paint[t],{validate:!1});for(const t in e.layout)this.setLayoutProperty(t,e.layout[t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new fi(t.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,t,r={}){null!=t&&this._validate(ea,`layers.${this.id}.layout.${e}`,e,t,r)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}getPaintProperty(e){return T(e,Bo)?this._transitionablePaint.getTransition(e.slice(0,-Bo.length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t,r={}){if(null!=t&&this._validate(Jn,`layers.${this.id}.paint.${e}`,e,t,r))return!1;if(T(e,Bo))return this._transitionablePaint.setTransition(e.slice(0,-Bo.length),t||void 0),!1;{const r=this._transitionablePaint._values[e],n="cross-faded-data-driven"===r.property.specification["property-type"],a=r.value.isDataDriven(),i=r.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);const o=this._transitionablePaint._values[e].value;return o.isDataDriven()||a||n||this._handleOverridablePaintPropertyUpdate(e,i,o)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,t,r){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),P(e,((e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)))}_validate(e,t,r,n,a={}){return(!a||!1!==a.validate)&&ta(this,e.call(Yn,{key:t,layerType:this.type,objectKey:r,value:n,styleSpec:$e,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof hi&&Zr(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}}const Fo=ki([{name:"a_pos",components:2,type:"Int16"}],4),{members:No}=Fo;class Vo{constructor(e=[]){this.segments=e}prepareSegment(e,t,r,n){let a=this.segments[this.segments.length-1];return e>Vo.MAX_VERTEX_ARRAY_LENGTH&&A(`Max vertices per segment is ${Vo.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!a||a.vertexLength+e>Vo.MAX_VERTEX_ARRAY_LENGTH||a.sortKey!==n)&&(a={vertexOffset:t.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==n&&(a.sortKey=n),this.segments.push(a)),a}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,r,n){return new Vo([{vertexOffset:e,primitiveOffset:t,vertexLength:r,primitiveLength:n,vaos:{},sortKey:0}])}}Vo.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,sa("SegmentVector",Vo);var jo=8192;const Uo=Math.pow(2,14)-1,qo=-Uo-1;function Ho(e){const t=jo/e.extent,r=e.loadGeometry();for(let e=0;e<r.length;e++){const n=r[e];for(let e=0;e<n.length;e++){const r=n[e],a=Math.round(r.x*t),i=Math.round(r.y*t);r.x=m(a,qo,Uo),r.y=m(i,qo,Uo),(a<r.x||a>r.x+1||i<r.y||i>r.y+1)&&A("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return r}function Go(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?Ho(e):[]}}function Wo(e,t,r,n,a){e.emplaceBack(2*t+(n+1)/2,2*r+(a+1)/2)}class Xo{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Si,this.indexArray=new Ni,this.segments=new Vo,this.programConfigurations=new Ao(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,r){const n=this.layers[0],a=[];let i=null;"circle"===n.type&&(i=n.layout.get("circle-sort-key"));for(const{feature:t,id:n,index:o,sourceLayerIndex:s}of e){const e=this.layers[0]._featureFilter.needGeometry,l=Go(t,e);if(!this.layers[0]._featureFilter.filter(new oi(this.zoom),l,r))continue;const c=i?i.evaluate(l,{},r):void 0,u={id:n,properties:t.properties,type:t.type,sourceLayerIndex:s,index:o,geometry:e?l.geometry:Ho(t),patterns:{},sortKey:c};a.push(u)}i&&a.sort(((e,t)=>e.sortKey-t.sortKey));for(const n of a){const{geometry:a,index:i,sourceLayerIndex:o}=n,s=e[i].feature;this.addFeature(n,a,i,r),t.featureIndex.insert(s,a,i,o,this.index)}}update(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,No),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,r,n){for(const r of t)for(const t of r){const r=t.x,n=t.y;if(r<0||r>=jo||n<0||n>=jo)continue;const a=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),i=a.vertexLength;Wo(this.layoutVertexArray,r,n,-1,-1),Wo(this.layoutVertexArray,r,n,1,-1),Wo(this.layoutVertexArray,r,n,1,1),Wo(this.layoutVertexArray,r,n,-1,1),this.indexArray.emplaceBack(i,i+1,i+2),this.indexArray.emplaceBack(i,i+3,i+2),a.vertexLength+=4,a.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,{},n)}}function Zo(e,t){for(let r=0;r<e.length;r++)if(as(t,e[r]))return!0;for(let r=0;r<t.length;r++)if(as(e,t[r]))return!0;return!!Jo(e,t)}function Yo(e,t,r){return!!as(e,t)||!!ts(t,e,r)}function Ko(e,t){if(1===e.length)return ns(t,e[0]);for(let r=0;r<t.length;r++){const n=t[r];for(let t=0;t<n.length;t++)if(as(e,n[t]))return!0}for(let r=0;r<e.length;r++)if(ns(t,e[r]))return!0;for(let r=0;r<t.length;r++)if(Jo(e,t[r]))return!0;return!1}function Qo(e,t,r){if(e.length>1){if(Jo(e,t))return!0;for(let n=0;n<t.length;n++)if(ts(t[n],e,r))return!0}for(let n=0;n<e.length;n++)if(ts(e[n],t,r))return!0;return!1}function Jo(e,t){if(0===e.length||0===t.length)return!1;for(let r=0;r<e.length-1;r++){const n=e[r],a=e[r+1];for(let e=0;e<t.length-1;e++)if(es(n,a,t[e],t[e+1]))return!0}return!1}function es(e,t,r,n){return O(e,r,n)!==O(t,r,n)&&O(e,t,r)!==O(e,t,n)}function ts(e,t,r){const n=r*r;if(1===t.length)return e.distSqr(t[0])<n;for(let r=1;r<t.length;r++)if(rs(e,t[r-1],t[r])<n)return!0;return!1}function rs(e,t,r){const n=t.distSqr(r);if(0===n)return e.distSqr(t);const a=((e.x-t.x)*(r.x-t.x)+(e.y-t.y)*(r.y-t.y))/n;return e.distSqr(a<0?t:a>1?r:r.sub(t)._mult(a)._add(t))}function ns(e,t){let r,n,a,i=!1;for(let o=0;o<e.length;o++){r=e[o];for(let e=0,o=r.length-1;e<r.length;o=e++)n=r[e],a=r[o],n.y>t.y!=a.y>t.y&&t.x<(a.x-n.x)*(t.y-n.y)/(a.y-n.y)+n.x&&(i=!i)}return i}function as(e,t){let r=!1;for(let n=0,a=e.length-1;n<e.length;a=n++){const i=e[n],o=e[a];i.y>t.y!=o.y>t.y&&t.x<(o.x-i.x)*(t.y-i.y)/(o.y-i.y)+i.x&&(r=!r)}return r}function is(e,t,r,n,i){for(const a of e)if(t<=a.x&&r<=a.y&&n>=a.x&&i>=a.y)return!0;const o=[new a(t,r),new a(t,i),new a(n,i),new a(n,r)];if(e.length>2)for(const t of o)if(as(e,t))return!0;for(let t=0;t<e.length-1;t++)if(os(e[t],e[t+1],o))return!0;return!1}function os(e,t,r){const n=r[0],a=r[2];if(e.x<n.x&&t.x<n.x||e.x>a.x&&t.x>a.x||e.y<n.y&&t.y<n.y||e.y>a.y&&t.y>a.y)return!1;const i=O(e,t,r[0]);return i!==O(e,t,r[1])||i!==O(e,t,r[2])||i!==O(e,t,r[3])}function ss(e,t,r){const n=t.paint.get(e).value;return"constant"===n.kind?n.value:r.programConfigurations.get(t.id).getMaxValue(e)}function ls(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function cs(e,t,r,n,i){if(!t[0]&&!t[1])return e;const o=a.convert(t)._mult(i);"viewport"===r&&o._rotate(-n);const s=[];for(let t=0;t<e.length;t++)s.push(e[t].sub(o));return s}function us(e,t,r,n){const i=a.convert(e)._mult(n);return"viewport"===t&&i._rotate(-r),i}sa("CircleBucket",Xo,{omit:["layers"]});const ps=new _i({"circle-sort-key":new gi($e.layout_circle["circle-sort-key"])});var ds={paint:new _i({"circle-radius":new gi($e.paint_circle["circle-radius"]),"circle-color":new gi($e.paint_circle["circle-color"]),"circle-blur":new gi($e.paint_circle["circle-blur"]),"circle-opacity":new gi($e.paint_circle["circle-opacity"]),"circle-translate":new mi($e.paint_circle["circle-translate"]),"circle-translate-anchor":new mi($e.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new mi($e.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new mi($e.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new gi($e.paint_circle["circle-stroke-width"]),"circle-stroke-color":new gi($e.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new gi($e.paint_circle["circle-stroke-opacity"])}),layout:ps},hs="undefined"!=typeof Float32Array?Float32Array:Array;function fs(){var e=new hs(9);return hs!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function ms(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function gs(e,t,r){var n=t[0],a=t[1],i=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],p=t[8],d=t[9],h=t[10],f=t[11],m=t[12],g=t[13],v=t[14],y=t[15],b=r[0],_=r[1],x=r[2],w=r[3];return e[0]=b*n+_*s+x*p+w*m,e[1]=b*a+_*l+x*d+w*g,e[2]=b*i+_*c+x*h+w*v,e[3]=b*o+_*u+x*f+w*y,e[4]=(b=r[4])*n+(_=r[5])*s+(x=r[6])*p+(w=r[7])*m,e[5]=b*a+_*l+x*d+w*g,e[6]=b*i+_*c+x*h+w*v,e[7]=b*o+_*u+x*f+w*y,e[8]=(b=r[8])*n+(_=r[9])*s+(x=r[10])*p+(w=r[11])*m,e[9]=b*a+_*l+x*d+w*g,e[10]=b*i+_*c+x*h+w*v,e[11]=b*o+_*u+x*f+w*y,e[12]=(b=r[12])*n+(_=r[13])*s+(x=r[14])*p+(w=r[15])*m,e[13]=b*a+_*l+x*d+w*g,e[14]=b*i+_*c+x*h+w*v,e[15]=b*o+_*u+x*f+w*y,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var vs=gs;function ys(){var e=new hs(3);return hs!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function bs(e){return Math.hypot(e[0],e[1],e[2])}function _s(e,t,r){var n=new hs(3);return n[0]=e,n[1]=t,n[2]=r,n}function xs(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function ws(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function Es(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e}function Cs(e,t){var r=t[0],n=t[1],a=t[2],i=r*r+n*n+a*a;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function ks(e,t,r){var n=r[0],a=r[1],i=r[2],o=t[0],s=t[1],l=t[2],c=a*l-i*s,u=i*o-n*l,p=n*s-a*o,d=a*p-i*u,h=i*c-n*p,f=n*u-a*c,m=2*r[3];return u*=m,p*=m,h*=2,f*=2,e[0]=o+(c*=m)+(d*=2),e[1]=s+u+h,e[2]=l+p+f,e}var Ts,Ss=xs,Ps=ws,Ms=bs;function Is(e,t,r){var n=t[0],a=t[1],i=t[2],o=t[3];return e[0]=r[0]*n+r[4]*a+r[8]*i+r[12]*o,e[1]=r[1]*n+r[5]*a+r[9]*i+r[13]*o,e[2]=r[2]*n+r[6]*a+r[10]*i+r[14]*o,e[3]=r[3]*n+r[7]*a+r[11]*i+r[15]*o,e}function As(){var e=new hs(4);return hs!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Os(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function zs(e,t,r){r*=.5;var n=t[0],a=t[1],i=t[2],o=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+o*s,e[1]=a*l+i*s,e[2]=i*l-a*s,e[3]=o*l-n*s,e}function Rs(e,t,r){const n=Is([],[e.x,e.y,t,1],r);return new a(n[0]/n[3],n[1]/n[3])}ys(),Ts=new hs(4),hs!=Float32Array&&(Ts[0]=0,Ts[1]=0,Ts[2]=0,Ts[3]=0),ys(),_s(1,0,0),_s(0,1,0),As(),As(),fs();const Ls=_s(0,0,0),Ds=_s(0,0,1);function Bs(e,t){const r=ys();return Ls[2]=t,e.intersectsPlane(Ls,Ds,r),new a(r[0],r[1])}class $s extends Xo{}function Fs(e,{width:t,height:r},n,a){if(a){if(a instanceof Uint8ClampedArray)a=new Uint8Array(a.buffer);else if(a.length!==t*r*n)throw new RangeError("mismatched image size")}else a=new Uint8Array(t*r*n);return e.width=t,e.height=r,e.data=a,e}function Ns(e,{width:t,height:r},n){if(t===e.width&&r===e.height)return;const a=Fs({},{width:t,height:r},n);Vs(e,a,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,t),height:Math.min(e.height,r)},n),e.width=t,e.height=r,e.data=a.data}function Vs(e,t,r,n,a,i){if(0===a.width||0===a.height)return t;if(a.width>e.width||a.height>e.height||r.x>e.width-a.width||r.y>e.height-a.height)throw new RangeError("out of range source coordinates for image copy");if(a.width>t.width||a.height>t.height||n.x>t.width-a.width||n.y>t.height-a.height)throw new RangeError("out of range destination coordinates for image copy");const o=e.data,s=t.data;for(let l=0;l<a.height;l++){const c=((r.y+l)*e.width+r.x)*i,u=((n.y+l)*t.width+n.x)*i;for(let e=0;e<a.width*i;e++)s[u+e]=o[c+e]}return t}sa("HeatmapBucket",$s,{omit:["layers"]});class js{constructor(e,t){Fs(this,e,1,t)}resize(e){Ns(this,e,1)}clone(){return new js({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,r,n,a){Vs(e,t,r,n,a,1)}}class Us{constructor(e,t){Fs(this,e,4,t)}resize(e){Ns(this,e,4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Us({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,r,n,a){Vs(e,t,r,n,a,4)}}sa("AlphaImage",js),sa("RGBAImage",Us);var qs={paint:new _i({"heatmap-radius":new gi($e.paint_heatmap["heatmap-radius"]),"heatmap-weight":new gi($e.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new mi($e.paint_heatmap["heatmap-intensity"]),"heatmap-color":new bi($e.paint_heatmap["heatmap-color"]),"heatmap-opacity":new mi($e.paint_heatmap["heatmap-opacity"])})};function Hs(e){const t={},r=e.resolution||256,n=e.clips?e.clips.length:1,a=e.image||new Us({width:r,height:n}),i=(r,n,i)=>{t[e.evaluationKey]=i;const o=e.expression.evaluate(t);a.data[r+n+0]=Math.floor(255*o.r/o.a),a.data[r+n+1]=Math.floor(255*o.g/o.a),a.data[r+n+2]=Math.floor(255*o.b/o.a),a.data[r+n+3]=Math.floor(255*o.a)};if(e.clips)for(let t=0,a=0;t<n;++t,a+=4*r)for(let n=0,o=0;n<r;n++,o+=4){const s=n/(r-1),{start:l,end:c}=e.clips[t];i(a,o,l*(1-s)+c*s)}else for(let e=0,t=0;e<r;e++,t+=4)i(0,t,e/(r-1));return a}var Gs={paint:new _i({"hillshade-illumination-direction":new mi($e.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new mi($e.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new mi($e.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new mi($e.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new mi($e.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new mi($e.paint_hillshade["hillshade-accent-color"])})};const Ws=ki([{name:"a_pos",components:2,type:"Int16"}],4),{members:Xs}=Ws;var Zs=Ks,Ys=Ks;function Ks(e,t,r){r=r||2;var n,a,i,o,s,l,c,u=t&&t.length,p=u?t[0]*r:e.length,d=Qs(e,0,p,r,!0),h=[];if(!d||d.next===d.prev)return h;if(u&&(d=function(e,t,r,n){var a,i,o,s=[];for(a=0,i=t.length;a<i;a++)(o=Qs(e,t[a]*n,a<i-1?t[a+1]*n:e.length,n,!1))===o.next&&(o.steiner=!0),s.push(cl(o));for(s.sort(il),a=0;a<s.length;a++)ol(s[a],r),r=Js(r,r.next);return r}(e,t,d,r)),e.length>80*r){n=i=e[0],a=o=e[1];for(var f=r;f<p;f+=r)(s=e[f])<n&&(n=s),(l=e[f+1])<a&&(a=l),s>i&&(i=s),l>o&&(o=l);c=0!==(c=Math.max(i-n,o-a))?1/c:0}return el(d,h,r,n,a,c),h}function Qs(e,t,r,n,a){var i,o;if(a===wl(e,t,r,n)>0)for(i=t;i<r;i+=n)o=bl(i,e[i],e[i+1],o);else for(i=r-n;i>=t;i-=n)o=bl(i,e[i],e[i+1],o);return o&&hl(o,o.next)&&(_l(o),o=o.next),o}function Js(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!hl(n,n.next)&&0!==dl(n.prev,n,n.next))n=n.next;else{if(_l(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function el(e,t,r,n,a,i,o){if(e){!o&&i&&function(e,t,r,n){var a=e;do{null===a.z&&(a.z=ll(a.x,a.y,t,r,n)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==e);a.prevZ.nextZ=null,a.prevZ=null,function(e){var t,r,n,a,i,o,s,l,c=1;do{for(r=e,e=null,i=null,o=0;r;){for(o++,n=r,s=0,t=0;t<c&&(s++,n=n.nextZ);t++);for(l=c;s>0||l>0&&n;)0!==s&&(0===l||!n||r.z<=n.z)?(a=r,r=r.nextZ,s--):(a=n,n=n.nextZ,l--),i?i.nextZ=a:e=a,a.prevZ=i,i=a;r=n}i.nextZ=null,c*=2}while(o>1)}(a)}(e,n,a,i);for(var s,l,c=e;e.prev!==e.next;)if(s=e.prev,l=e.next,i?rl(e,n,a,i):tl(e))t.push(s.i/r),t.push(e.i/r),t.push(l.i/r),_l(e),e=l.next,c=l.next;else if((e=l)===c){o?1===o?el(e=nl(Js(e),t,r),t,r,n,a,i,2):2===o&&al(e,t,r,n,a,i):el(Js(e),t,r,n,a,i,1);break}}}function tl(e){var t=e.prev,r=e,n=e.next;if(dl(t,r,n)>=0)return!1;for(var a=e.next.next;a!==e.prev;){if(ul(t.x,t.y,r.x,r.y,n.x,n.y,a.x,a.y)&&dl(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function rl(e,t,r,n){var a=e.prev,i=e,o=e.next;if(dl(a,i,o)>=0)return!1;for(var s=a.x>i.x?a.x>o.x?a.x:o.x:i.x>o.x?i.x:o.x,l=a.y>i.y?a.y>o.y?a.y:o.y:i.y>o.y?i.y:o.y,c=ll(a.x<i.x?a.x<o.x?a.x:o.x:i.x<o.x?i.x:o.x,a.y<i.y?a.y<o.y?a.y:o.y:i.y<o.y?i.y:o.y,t,r,n),u=ll(s,l,t,r,n),p=e.prevZ,d=e.nextZ;p&&p.z>=c&&d&&d.z<=u;){if(p!==e.prev&&p!==e.next&&ul(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&dl(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==e.prev&&d!==e.next&&ul(a.x,a.y,i.x,i.y,o.x,o.y,d.x,d.y)&&dl(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=c;){if(p!==e.prev&&p!==e.next&&ul(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&dl(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=u;){if(d!==e.prev&&d!==e.next&&ul(a.x,a.y,i.x,i.y,o.x,o.y,d.x,d.y)&&dl(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function nl(e,t,r){var n=e;do{var a=n.prev,i=n.next.next;!hl(a,i)&&fl(a,n,n.next,i)&&vl(a,i)&&vl(i,a)&&(t.push(a.i/r),t.push(n.i/r),t.push(i.i/r),_l(n),_l(n.next),n=e=i),n=n.next}while(n!==e);return Js(n)}function al(e,t,r,n,a,i){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&pl(o,s)){var l=yl(o,s);return o=Js(o,o.next),l=Js(l,l.next),el(o,t,r,n,a,i),void el(l,t,r,n,a,i)}s=s.next}o=o.next}while(o!==e)}function il(e,t){return e.x-t.x}function ol(e,t){if(t=function(e,t){var r,n=t,a=e.x,i=e.y,o=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var s=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=a&&s>o){if(o=s,s===a){if(i===n.y)return n;if(i===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(a===o)return r;var l,c=r,u=r.x,p=r.y,d=1/0;n=r;do{a>=n.x&&n.x>=u&&a!==n.x&&ul(i<p?a:o,i,u,p,i<p?o:a,i,n.x,n.y)&&(l=Math.abs(i-n.y)/(a-n.x),vl(n,e)&&(l<d||l===d&&(n.x>r.x||n.x===r.x&&sl(r,n)))&&(r=n,d=l)),n=n.next}while(n!==c);return r}(e,t)){var r=yl(t,e);Js(t,t.next),Js(r,r.next)}}function sl(e,t){return dl(e.prev,e,t.prev)<0&&dl(t.next,e,e.next)<0}function ll(e,t,r,n,a){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*a)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*a)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function cl(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function ul(e,t,r,n,a,i,o,s){return(a-o)*(t-s)-(e-o)*(i-s)>=0&&(e-o)*(n-s)-(r-o)*(t-s)>=0&&(r-o)*(i-s)-(a-o)*(n-s)>=0}function pl(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&fl(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(vl(e,t)&&vl(t,e)&&function(e,t){var r=e,n=!1,a=(e.x+t.x)/2,i=(e.y+t.y)/2;do{r.y>i!=r.next.y>i&&r.next.y!==r.y&&a<(r.next.x-r.x)*(i-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)&&(dl(e.prev,e,t.prev)||dl(e,t.prev,t))||hl(e,t)&&dl(e.prev,e,e.next)>0&&dl(t.prev,t,t.next)>0)}function dl(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function hl(e,t){return e.x===t.x&&e.y===t.y}function fl(e,t,r,n){var a=gl(dl(e,t,r)),i=gl(dl(e,t,n)),o=gl(dl(r,n,e)),s=gl(dl(r,n,t));return a!==i&&o!==s||!(0!==a||!ml(e,r,t))||!(0!==i||!ml(e,n,t))||!(0!==o||!ml(r,e,n))||!(0!==s||!ml(r,t,n))}function ml(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function gl(e){return e>0?1:e<0?-1:0}function vl(e,t){return dl(e.prev,e,e.next)<0?dl(e,t,e.next)>=0&&dl(e,e.prev,t)>=0:dl(e,t,e.prev)<0||dl(e,e.next,t)<0}function yl(e,t){var r=new xl(e.i,e.x,e.y),n=new xl(t.i,t.x,t.y),a=e.next,i=t.prev;return e.next=t,t.prev=e,r.next=a,a.prev=r,n.next=r,r.prev=n,i.next=n,n.prev=i,n}function bl(e,t,r,n){var a=new xl(e,t,r);return n?(a.next=n.next,a.prev=n,n.next.prev=a,n.next=a):(a.prev=a,a.next=a),a}function _l(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function xl(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function wl(e,t,r,n){for(var a=0,i=t,o=r-n;i<r;i+=n)a+=(e[o]-e[i])*(e[i+1]+e[o+1]),o=i;return a}function El(e,t,r,n,a){Cl(e,t,r||0,n||e.length-1,a||Tl)}function Cl(e,t,r,n,a){for(;n>r;){if(n-r>600){var i=n-r+1,o=t-r+1,s=Math.log(i),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(i-l)/i)*(o-i/2<0?-1:1);Cl(e,t,Math.max(r,Math.floor(t-o*l/i+c)),Math.min(n,Math.floor(t+(i-o)*l/i+c)),a)}var u=e[t],p=r,d=n;for(kl(e,r,t),a(e[n],u)>0&&kl(e,r,n);p<d;){for(kl(e,p,d),p++,d--;a(e[p],u)<0;)p++;for(;a(e[d],u)>0;)d--}0===a(e[r],u)?kl(e,r,d):kl(e,++d,n),d<=t&&(r=d+1),t<=d&&(n=d-1)}}function kl(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function Tl(e,t){return e<t?-1:e>t?1:0}function Sl(e,t){const r=e.length;if(r<=1)return[e];const n=[];let a,i;for(let t=0;t<r;t++){const r=z(e[t]);0!==r&&(e[t].area=Math.abs(r),void 0===i&&(i=r<0),i===r<0?(a&&n.push(a),a=[e[t]]):a.push(e[t]))}if(a&&n.push(a),t>1)for(let e=0;e<n.length;e++)n[e].length<=t||(El(n[e],t,1,n[e].length-1,Pl),n[e]=n[e].slice(0,t));return n}function Pl(e,t){return t.area-e.area}function Ml(e,t,r){const n=r.patternDependencies;let a=!1;for(const r of t){const t=r.paint.get(`${e}-pattern`);t.isConstant()||(a=!0);const i=t.constantOr(null);i&&(a=!0,n[i.to]=!0,n[i.from]=!0)}return a}function Il(e,t,r,n,a){const i=a.patternDependencies;for(const o of t){const t=o.paint.get(`${e}-pattern`).value;if("constant"!==t.kind){let e=t.evaluate({zoom:n-1},r,{},a.availableImages),s=t.evaluate({zoom:n},r,{},a.availableImages),l=t.evaluate({zoom:n+1},r,{},a.availableImages);e=e&&e.name?e.name:e,s=s&&s.name?s.name:s,l=l&&l.name?l.name:l,i[e]=!0,i[s]=!0,i[l]=!0,r.patterns[o.id]={min:e,mid:s,max:l}}}return r}Ks.deviation=function(e,t,r,n){var a=t&&t.length,i=Math.abs(wl(e,0,a?t[0]*r:e.length,r));if(a)for(var o=0,s=t.length;o<s;o++)i-=Math.abs(wl(e,t[o]*r,o<s-1?t[o+1]*r:e.length,r));var l=0;for(o=0;o<n.length;o+=3){var c=n[o]*r,u=n[o+1]*r,p=n[o+2]*r;l+=Math.abs((e[c]-e[p])*(e[u+1]-e[c+1])-(e[c]-e[u])*(e[p+1]-e[c+1]))}return 0===i&&0===l?0:Math.abs((l-i)/i)},Ks.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,a=0;a<e.length;a++){for(var i=0;i<e[a].length;i++)for(var o=0;o<t;o++)r.vertices.push(e[a][i][o]);a>0&&r.holes.push(n+=e[a-1].length)}return r},Zs.default=Ys;class Al{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Si,this.indexArray=new Ni,this.indexArray2=new Gi,this.programConfigurations=new Ao(e.layers,e.zoom),this.segments=new Vo,this.segments2=new Vo,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,r){this.hasPattern=Ml("fill",this.layers,t);const n=this.layers[0].layout.get("fill-sort-key"),a=[];for(const{feature:i,id:o,index:s,sourceLayerIndex:l}of e){const e=this.layers[0]._featureFilter.needGeometry,c=Go(i,e);if(!this.layers[0]._featureFilter.filter(new oi(this.zoom),c,r))continue;const u=n?n.evaluate(c,{},r,t.availableImages):void 0,p={id:o,properties:i.properties,type:i.type,sourceLayerIndex:l,index:s,geometry:e?c.geometry:Ho(i),patterns:{},sortKey:u};a.push(p)}n&&a.sort(((e,t)=>e.sortKey-t.sortKey));for(const n of a){const{geometry:a,index:i,sourceLayerIndex:o}=n;if(this.hasPattern){const e=Il("fill",this.layers,n,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(n,a,i,r,{});t.featureIndex.insert(e[i].feature,a,i,o,this.index)}}update(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)}addFeatures(e,t,r){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Xs),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,r,n,a){for(const e of Sl(t,500)){let t=0;for(const r of e)t+=r.length;const r=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray),n=r.vertexLength,a=[],i=[];for(const t of e){if(0===t.length)continue;t!==e[0]&&i.push(a.length/2);const r=this.segments2.prepareSegment(t.length,this.layoutVertexArray,this.indexArray2),n=r.vertexLength;this.layoutVertexArray.emplaceBack(t[0].x,t[0].y),this.indexArray2.emplaceBack(n+t.length-1,n),a.push(t[0].x),a.push(t[0].y);for(let e=1;e<t.length;e++)this.layoutVertexArray.emplaceBack(t[e].x,t[e].y),this.indexArray2.emplaceBack(n+e-1,n+e),a.push(t[e].x),a.push(t[e].y);r.vertexLength+=t.length,r.primitiveLength+=t.length}const o=Zs(a,i);for(let e=0;e<o.length;e+=3)this.indexArray.emplaceBack(n+o[e],n+o[e+1],n+o[e+2]);r.vertexLength+=t,r.primitiveLength+=o.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,a,n)}}sa("FillBucket",Al,{omit:["layers","patternFeatures"]});const Ol=new _i({"fill-sort-key":new gi($e.layout_fill["fill-sort-key"])});var zl={paint:new _i({"fill-antialias":new mi($e.paint_fill["fill-antialias"]),"fill-opacity":new gi($e.paint_fill["fill-opacity"]),"fill-color":new gi($e.paint_fill["fill-color"]),"fill-outline-color":new gi($e.paint_fill["fill-outline-color"]),"fill-translate":new mi($e.paint_fill["fill-translate"]),"fill-translate-anchor":new mi($e.paint_fill["fill-translate-anchor"]),"fill-pattern":new vi($e.paint_fill["fill-pattern"])}),layout:Ol};const Rl=ki([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Ll=ki([{name:"a_centroid_pos",components:2,type:"Uint16"}]),{members:Dl}=Rl;var Bl=$l;function $l(e,t,r,n,a){this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=n,this._values=a,e.readFields(Fl,this,t)}function Fl(e,t,r){1==e?t.id=r.readVarint():2==e?function(e,t){for(var r=e.readVarint()+e.pos;e.pos<r;){var n=t._keys[e.readVarint()],a=t._values[e.readVarint()];t.properties[n]=a}}(r,t):3==e?t.type=r.readVarint():4==e&&(t._geometry=r.pos)}function Nl(e){for(var t,r,n=0,a=0,i=e.length,o=i-1;a<i;o=a++)n+=((r=e[o]).x-(t=e[a]).x)*(t.y+r.y);return n}$l.types=["Unknown","Point","LineString","Polygon"],$l.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,r=e.readVarint()+e.pos,n=1,i=0,o=0,s=0,l=[];e.pos<r;){if(i<=0){var c=e.readVarint();n=7&c,i=c>>3}if(i--,1===n||2===n)o+=e.readSVarint(),s+=e.readSVarint(),1===n&&(t&&l.push(t),t=[]),t.push(new a(o,s));else{if(7!==n)throw new Error("unknown command "+n);t&&t.push(t[0].clone())}}return t&&l.push(t),l},$l.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,n=0,a=0,i=0,o=1/0,s=-1/0,l=1/0,c=-1/0;e.pos<t;){if(n<=0){var u=e.readVarint();r=7&u,n=u>>3}if(n--,1===r||2===r)(a+=e.readSVarint())<o&&(o=a),a>s&&(s=a),(i+=e.readSVarint())<l&&(l=i),i>c&&(c=i);else if(7!==r)throw new Error("unknown command "+r)}return[o,l,s,c]},$l.prototype.toGeoJSON=function(e,t,r){var n,a,i=this.extent*Math.pow(2,r),o=this.extent*e,s=this.extent*t,l=this.loadGeometry(),c=$l.types[this.type];function u(e){for(var t=0;t<e.length;t++){var r=e[t];e[t]=[360*(r.x+o)/i-180,360/Math.PI*Math.atan(Math.exp((180-360*(r.y+s)/i)*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(n=0;n<l.length;n++)p[n]=l[n][0];u(l=p);break;case 2:for(n=0;n<l.length;n++)u(l[n]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var r,n,a=[],i=0;i<t;i++){var o=Nl(e[i]);0!==o&&(void 0===n&&(n=o<0),n===o<0?(r&&a.push(r),r=[e[i]]):r.push(e[i]))}return r&&a.push(r),a}(l),n=0;n<l.length;n++)for(a=0;a<l[n].length;a++)u(l[n][a])}1===l.length?l=l[0]:c="Multi"+c;var d={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var Vl=jl;function jl(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Ul,this,t),this.length=this._features.length}function Ul(e,t,r){15===e?t.version=r.readVarint():1===e?t.name=r.readString():5===e?t.extent=r.readVarint():2===e?t._features.push(r.pos):3===e?t._keys.push(r.readString()):4===e&&t._values.push(function(e){for(var t=null,r=e.readVarint()+e.pos;e.pos<r;){var n=e.readVarint()>>3;t=1===n?e.readString():2===n?e.readFloat():3===n?e.readDouble():4===n?e.readVarint64():5===n?e.readVarint():6===n?e.readSVarint():7===n?e.readBoolean():null}return t}(r))}function ql(e,t,r){if(3===e){var n=new Vl(r,r.readVarint()+r.pos);n.length&&(t[n.name]=n)}}jl.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Bl(this._pbf,t,this.extent,this._keys,this._values)};var Hl={VectorTile:function(e,t){this.layers=e.readFields(ql,{},t)},VectorTileFeature:Bl,VectorTileLayer:Vl};const Gl=Hl.VectorTileFeature.types,Wl=Math.pow(2,13);function Xl(e,t,r,n,a,i,o,s){e.emplaceBack((t<<1)+o,(r<<1)+i,(Math.floor(n*Wl)<<1)+a,Math.round(s))}class Zl{constructor(){this.acc=new a(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new a(e.x,e.y),this.max=new a(e.x,e.y))}append(e,t){this.currentPolyCount.edges++,this.acc._add(e);let r=!!this.borders;const n=this.min,a=this.max;e.x<n.x?(n.x=e.x,r=!0):e.x>a.x&&(a.x=e.x,r=!0),e.y<n.y?(n.y=e.y,r=!0):e.y>a.y&&(a.y=e.y,r=!0),((0===e.x||e.x===jo)&&e.x===t.x)!=((0===e.y||e.y===jo)&&e.y===t.y)&&this.processBorderOverlap(e,t),r&&this.checkBorderIntersection(e,t)}checkBorderIntersection(e,t){t.x<0!=e.x<0&&this.addBorderIntersection(0,rr(t.y,e.y,(0-t.x)/(e.x-t.x))),t.x>jo!=e.x>jo&&this.addBorderIntersection(1,rr(t.y,e.y,(jo-t.x)/(e.x-t.x))),t.y<0!=e.y<0&&this.addBorderIntersection(2,rr(t.x,e.x,(0-t.y)/(e.y-t.y))),t.y>jo!=e.y>jo&&this.addBorderIntersection(3,rr(t.x,e.x,(jo-t.y)/(e.y-t.y)))}addBorderIntersection(e,t){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const r=this.borders[e];t<r[0]&&(r[0]=t),t>r[1]&&(r[1]=t)}processBorderOverlap(e,t){if(e.x===t.x){if(e.y===t.y)return;const r=0===e.x?0:1;this.addBorderIntersection(r,t.y),this.addBorderIntersection(r,e.y)}else{const r=0===e.y?2:3;this.addBorderIntersection(r,t.x),this.addBorderIntersection(r,e.x)}}centroid(){const e=this.polyCount.reduce(((e,t)=>e+t.edges),0);return 0!==e?this.acc.div(e)._round():new a(0,0)}span(){return new a(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((e,t)=>e+ +(t[0]!==Number.MAX_VALUE)),0)}}class Yl{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Pi,this.centroidVertexArray=new oo,this.indexArray=new Ni,this.programConfigurations=new Ao(e.layers,e.zoom),this.segments=new Vo,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.enableTerrain=e.enableTerrain}populate(e,t,r){this.features=[],this.hasPattern=Ml("fill-extrusion",this.layers,t),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDone=[!1,!1,!1,!1],this.tileToMeter=function(e){const t=Math.exp(Math.PI*(1-e.y/(1<<e.z)*2));return 80150034*t/(t*t+1)/jo/(1<<e.z)}(r);for(const{feature:n,id:a,index:i,sourceLayerIndex:o}of e){const e=this.layers[0]._featureFilter.needGeometry,s=Go(n,e);if(!this.layers[0]._featureFilter.filter(new oi(this.zoom),s,r))continue;const l={id:a,sourceLayerIndex:o,index:i,geometry:e?s.geometry:Ho(n),properties:n.properties,type:n.type,patterns:{}},c=this.layoutVertexArray.length;this.hasPattern?this.features.push(Il("fill-extrusion",this.layers,l,this.zoom,t)):this.addFeature(l,l.geometry,i,r,{}),t.featureIndex.insert(n,l.geometry,i,o,this.index,c)}this.sortBorders()}addFeatures(e,t,r){for(const e of this.features){const{geometry:n}=e;this.addFeature(e,n,e.index,t,r)}this.sortBorders()}update(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Dl),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Ll.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,r,n,a){const i=this.enableTerrain?new Zl:null;for(const r of Sl(t,500)){let t=0,n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);if(0===r.length||(o=r[0]).every((e=>e.x<=0))||o.every((e=>e.x>=jo))||o.every((e=>e.y<=0))||o.every((e=>e.y>=jo)))continue;for(let e=0;e<r.length;e++){const a=r[e];if(0===a.length)continue;t+=a.length;let o=0;i&&i.startRing(a[0]);for(let e=0;e<a.length;e++){const t=a[e];if(e>=1){const r=a[e-1];if(!Kl(t,r)){i&&i.append(t,r),n.vertexLength+4>Vo.MAX_VERTEX_ARRAY_LENGTH&&(n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const e=t.sub(r)._perp(),a=e.x/(Math.abs(e.x)+Math.abs(e.y)),s=e.y>0?1:0,l=r.dist(t);o+l>32768&&(o=0),Xl(this.layoutVertexArray,t.x,t.y,a,s,0,0,o),Xl(this.layoutVertexArray,t.x,t.y,a,s,0,1,o),o+=l,Xl(this.layoutVertexArray,r.x,r.y,a,s,0,0,o),Xl(this.layoutVertexArray,r.x,r.y,a,s,0,1,o);const c=n.vertexLength;this.indexArray.emplaceBack(c,c+2,c+1),this.indexArray.emplaceBack(c+1,c+2,c+3),n.vertexLength+=4,n.primitiveLength+=2}}}}if(n.vertexLength+t>Vo.MAX_VERTEX_ARRAY_LENGTH&&(n=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray)),"Polygon"!==Gl[e.type])continue;const a=[],s=[],l=n.vertexLength;for(let e=0;e<r.length;e++){const t=r[e];if(0!==t.length){t!==r[0]&&s.push(a.length/2);for(let e=0;e<t.length;e++){const r=t[e];Xl(this.layoutVertexArray,r.x,r.y,0,0,1,1,0),a.push(r.x),a.push(r.y),i&&i.currentPolyCount.top++}}}const c=Zs(a,s);for(let e=0;e<c.length;e+=3)this.indexArray.emplaceBack(l+c[e],l+c[e+2],l+c[e+1]);n.primitiveLength+=c.length/3,n.vertexLength+=t}var o;if(i&&i.polyCount.length>0){if(i.borders){i.vertexArrayOffset=this.centroidVertexArray.length;const e=i.borders,t=this.featuresOnBorder.push(i)-1;for(let r=0;r<4;r++)e[r][0]!==Number.MAX_VALUE&&this.borders[r].push(t)}this.encodeCentroid(i.borders?void 0:i.centroid(),i)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,a,n)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort(((t,r)=>this.featuresOnBorder[t].borders[e][0]-this.featuresOnBorder[r].borders[e][0]))}encodeCentroid(e,t,r=!0){let n,a;if(e)if(0!==e.y){const r=t.span()._mult(this.tileToMeter);n=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(r.x/10)),a=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(r.y/10))}else n=Math.ceil(7*(e.x+450)),a=0;else n=0,a=+r;let i=r?this.centroidVertexArray.length:t.vertexArrayOffset;for(const e of t.polyCount){r&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*e.edges+e.top);for(let t=0;t<2*e.edges;t++)this.centroidVertexArray.emplace(i++,0,a),this.centroidVertexArray.emplace(i++,n,a);for(let t=0;t<e.top;t++)this.centroidVertexArray.emplace(i++,n,a)}}}function Kl(e,t){return e.x===t.x&&(e.x<0||e.x>jo)||e.y===t.y&&(e.y<0||e.y>jo)}sa("FillExtrusionBucket",Yl,{omit:["layers","features"]}),sa("PartMetadata",Zl);var Ql={paint:new _i({"fill-extrusion-opacity":new mi($e["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new gi($e["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new mi($e["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new mi($e["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new vi($e["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new gi($e["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new gi($e["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new mi($e["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Jl(e,t){return e.x*t.x+e.y*t.y}function ec(e,t){if(1===e.length){let r=0;const n=t[r++];let a;for(;!a||n.equals(a);)if(a=t[r++],!a)return 1/0;for(;r<t.length;r++){const i=t[r],o=e[0],s=a.sub(n),l=i.sub(n),c=o.sub(n),u=Jl(s,s),p=Jl(s,l),d=Jl(l,l),h=Jl(c,s),f=Jl(c,l),m=u*d-p*p,g=(d*h-p*f)/m,v=(u*f-p*h)/m,y=n.z*(1-g-v)+a.z*g+i.z*v;if(isFinite(y))return y}return 1/0}{let e=1/0;for(const r of t)e=Math.min(e,r.z);return e}}function tc(e){const t=new a(e[0],e[1]);return t.z=e[2],t}function rc(e,t,r,n,a,i,o,s){const l=o*a.getElevationAt(e,t,!0,!0),c=0!==i[0],u=c?0===i[1]?o*(i[0]/7-450):o*function(e,t,r){const n=Math.floor(t[0]/8),a=Math.floor(t[1]/8),i=10*(t[0]-8*n),o=10*(t[1]-8*a),s=e.getElevationAt(n,a,!0,!0),l=e.getMeterToDEM(r),c=Math.floor(.5*(i*l-1)),u=Math.floor(.5*(o*l-1)),p=e.tileCoordToPixel(n,a),d=2*c+1,h=2*u+1,f=function(e,t,r,n,a){return[e.getElevationAtPixel(t,r,!0),e.getElevationAtPixel(t+a,r,!0),e.getElevationAtPixel(t,r+a,!0),e.getElevationAtPixel(t+n,r+a,!0)]}(e,p.x-c,p.y-u,d,h),m=Math.abs(f[0]-f[1]),g=Math.abs(f[2]-f[3]),v=Math.abs(f[0]-f[2])+Math.abs(f[1]-f[3]),y=Math.min(.25,.5*l*(m+g)/d),b=Math.min(.25,.5*l*v/h);return s+Math.max(y*i,b*o)}(a,i,s):l;return{base:l+(0===r)?-1:r,top:c?Math.max(u+n,l+r+2):l+n}}const nc=ki([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:ac}=nc,ic=ki([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:oc}=ic,sc=Hl.VectorTileFeature.types,lc=Math.cos(Math.PI/180*37.5);class cc{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((e=>{this.gradients[e.id]={}})),this.layoutVertexArray=new Mi,this.layoutVertexArray2=new Ii,this.indexArray=new Ni,this.programConfigurations=new Ao(e.layers,e.zoom),this.segments=new Vo,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,r){this.hasPattern=Ml("line",this.layers,t);const n=this.layers[0].layout.get("line-sort-key"),a=[];for(const{feature:t,id:i,index:o,sourceLayerIndex:s}of e){const e=this.layers[0]._featureFilter.needGeometry,l=Go(t,e);if(!this.layers[0]._featureFilter.filter(new oi(this.zoom),l,r))continue;const c=n?n.evaluate(l,{},r):void 0,u={id:i,properties:t.properties,type:t.type,sourceLayerIndex:s,index:o,geometry:e?l.geometry:Ho(t),patterns:{},sortKey:c};a.push(u)}n&&a.sort(((e,t)=>e.sortKey-t.sortKey));const{lineAtlas:i,featureIndex:o}=t,s=this.addConstantDashes(i);for(const n of a){const{geometry:a,index:l,sourceLayerIndex:c}=n;if(s&&this.addFeatureDashes(n,i),this.hasPattern){const e=Il("line",this.layers,n,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(n,a,l,r,i.positions);o.insert(e[l].feature,a,l,c,this.index)}}addConstantDashes(e){let t=!1;for(const r of this.layers){const n=r.paint.get("line-dasharray").value,a=r.layout.get("line-cap").value;if("constant"!==n.kind||"constant"!==a.kind)t=!0;else{const t=a.value,r=n.value;if(!r)continue;e.addDash(r.from,t),e.addDash(r.to,t),r.other&&e.addDash(r.other,t)}}return t}addFeatureDashes(e,t){const r=this.zoom;for(const n of this.layers){const a=n.paint.get("line-dasharray").value,i=n.layout.get("line-cap").value;if("constant"===a.kind&&"constant"===i.kind)continue;let o,s,l,c,u,p;if("constant"===a.kind){const e=a.value;if(!e)continue;o=e.other||e.to,s=e.to,l=e.from}else o=a.evaluate({zoom:r-1},e),s=a.evaluate({zoom:r},e),l=a.evaluate({zoom:r+1},e);"constant"===i.kind?c=u=p=i.value:(c=i.evaluate({zoom:r-1},e),u=i.evaluate({zoom:r},e),p=i.evaluate({zoom:r+1},e)),t.addDash(o,c),t.addDash(s,u),t.addDash(l,p);const d=t.getKey(o,c),h=t.getKey(s,u),f=t.getKey(l,p);e.patterns[n.id]={min:d,mid:h,max:f}}}update(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)}addFeatures(e,t,r){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,oc)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ac),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,r,n,a){const i=this.layers[0].layout,o=i.get("line-join").evaluate(e,{}),s=i.get("line-cap").evaluate(e,{}),l=i.get("line-miter-limit"),c=i.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const r of t)this.addLine(r,e,o,s,l,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,a,n)}addLine(e,t,r,n,a,i){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let t=0;t<e.length-1;t++)this.totalDistance+=e[t].dist(e[t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const o="Polygon"===sc[t.type];let s=e.length;for(;s>=2&&e[s-1].equals(e[s-2]);)s--;let l=0;for(;l<s-1&&e[l].equals(e[l+1]);)l++;if(s<(o?3:2))return;"bevel"===r&&(a=1.05);const c=this.overscaling<=16?122880/(512*this.overscaling):0,u=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let p,d,h,f,m;this.e1=this.e2=-1,o&&(p=e[s-2],m=e[l].sub(p)._unit()._perp());for(let t=l;t<s;t++){if(h=t===s-1?o?e[l+1]:void 0:e[t+1],h&&e[t].equals(h))continue;m&&(f=m),p&&(d=p),p=e[t],m=h?h.sub(p)._unit()._perp():f,f=f||m;let g=f.add(m);0===g.x&&0===g.y||g._unit();const v=f.x*m.x+f.y*m.y,y=g.x*m.x+g.y*m.y,b=0!==y?1/y:1/0,_=2*Math.sqrt(2-2*y),x=y<lc&&d&&h,w=f.x*m.y-f.y*m.x>0;if(x&&t>l){const e=p.dist(d);if(e>2*c){const t=p.sub(p.sub(d)._mult(c/e)._round());this.updateDistance(d,t),this.addCurrentVertex(t,f,0,0,u),d=t}}const E=d&&h;let C=E?r:o?"butt":n;if(E&&"round"===C&&(b<i?C="miter":b<=2&&(C="fakeround")),"miter"===C&&b>a&&(C="bevel"),"bevel"===C&&(b>2&&(C="flipbevel"),b<a&&(C="miter")),d&&this.updateDistance(d,p),"miter"===C)g._mult(b),this.addCurrentVertex(p,g,0,0,u);else if("flipbevel"===C){if(b>100)g=m.mult(-1);else{const e=b*f.add(m).mag()/f.sub(m).mag();g._perp()._mult(e*(w?-1:1))}this.addCurrentVertex(p,g,0,0,u),this.addCurrentVertex(p,g.mult(-1),0,0,u)}else if("bevel"===C||"fakeround"===C){const e=-Math.sqrt(b*b-1),t=w?e:0,r=w?0:e;if(d&&this.addCurrentVertex(p,f,t,r,u),"fakeround"===C){const e=Math.round(180*_/Math.PI/20);for(let t=1;t<e;t++){let r=t/e;if(.5!==r){const e=r-.5;r+=r*e*(r-1)*((1.0904+v*(v*(3.55645-1.43519*v)-3.2452))*e*e+(.848013+v*(.215638*v-1.06021)))}const n=m.sub(f)._mult(r)._add(f)._unit()._mult(w?-1:1);this.addHalfVertex(p,n.x,n.y,!1,w,0,u)}}h&&this.addCurrentVertex(p,m,-t,-r,u)}else if("butt"===C)this.addCurrentVertex(p,g,0,0,u);else if("square"===C){const e=d?1:-1;d||this.addCurrentVertex(p,g,e,e,u),this.addCurrentVertex(p,g,0,0,u),d&&this.addCurrentVertex(p,g,e,e,u)}else"round"===C&&(d&&(this.addCurrentVertex(p,f,0,0,u),this.addCurrentVertex(p,f,1,1,u,!0)),h&&(this.addCurrentVertex(p,m,-1,-1,u,!0),this.addCurrentVertex(p,m,0,0,u)));if(x&&t<s-1){const e=p.dist(h);if(e>2*c){const t=p.add(h.sub(p)._mult(c/e)._round());this.updateDistance(p,t),this.addCurrentVertex(t,m,0,0,u),p=t}}}}addCurrentVertex(e,t,r,n,a,i=!1){const o=t.y*n-t.x,s=-t.y-t.x*n;this.addHalfVertex(e,t.x+t.y*r,t.y-t.x*r,i,!1,r,a),this.addHalfVertex(e,o,s,i,!0,-n,a)}addHalfVertex({x:e,y:t},r,n,a,i,o,s){this.layoutVertexArray.emplaceBack((e<<1)+(a?1:0),(t<<1)+(i?1:0),Math.round(63*r)+128,Math.round(63*n)+128,1+(0===o?0:o<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length);const l=s.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),s.primitiveLength++),i?this.e2=l:this.e1=l}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}sa("LineBucket",cc,{omit:["layers","patternFeatures"]});const uc=new _i({"line-cap":new gi($e.layout_line["line-cap"]),"line-join":new gi($e.layout_line["line-join"]),"line-miter-limit":new mi($e.layout_line["line-miter-limit"]),"line-round-limit":new mi($e.layout_line["line-round-limit"]),"line-sort-key":new gi($e.layout_line["line-sort-key"])});var pc={paint:new _i({"line-opacity":new gi($e.paint_line["line-opacity"]),"line-color":new gi($e.paint_line["line-color"]),"line-translate":new mi($e.paint_line["line-translate"]),"line-translate-anchor":new mi($e.paint_line["line-translate-anchor"]),"line-width":new gi($e.paint_line["line-width"]),"line-gap-width":new gi($e.paint_line["line-gap-width"]),"line-offset":new gi($e.paint_line["line-offset"]),"line-blur":new gi($e.paint_line["line-blur"]),"line-dasharray":new vi($e.paint_line["line-dasharray"]),"line-pattern":new vi($e.paint_line["line-pattern"]),"line-gradient":new bi($e.paint_line["line-gradient"])}),layout:uc};const dc=new class extends gi{possiblyEvaluate(e,t){return t=new oi(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,r,n){return t=b({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,r,n)}}(pc.paint.properties["line-width"].specification);function hc(e,t){return t>0?t+2*e:e}dc.useIntegerZoom=!0;const fc=ki([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),mc=ki([{name:"a_projected_pos",components:3,type:"Float32"}],4);ki([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const gc=ki([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),vc=ki([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);ki([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const yc=ki([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),bc=ki([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);ki([{name:"triangle",components:3,type:"Uint16"}]),ki([{type:"Float32",name:"anchorX"},{type:"Float32",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),ki([{type:"Float32",name:"anchorX"},{type:"Float32",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ki([{type:"Float32",name:"offsetX"}]),ki([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var _c=24;const xc=128;function wc(e,t){const{expression:r}=t;if("constant"===r.kind)return{kind:"constant",layoutSize:r.evaluate(new oi(e+1))};if("source"===r.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:n}=r;let a=0;for(;a<t.length&&t[a]<=e;)a++;a=Math.max(0,a-1);let i=a;for(;i<t.length&&t[i]<e+1;)i++;i=Math.min(t.length-1,i);const o=t[a],s=t[i];return"composite"===r.kind?{kind:"composite",minZoom:o,maxZoom:s,interpolationType:n}:{kind:"camera",minZoom:o,maxZoom:s,minSize:r.evaluate(new oi(o)),maxSize:r.evaluate(new oi(s)),interpolationType:n}}}function Ec(e,{uSize:t,uSizeT:r},{lowerSize:n,upperSize:a}){return"source"===e.kind?n/xc:"composite"===e.kind?rr(n/xc,a/xc,r):t}function Cc(e,t){let r=0,n=0;if("constant"===e.kind)n=e.layoutSize;else if("source"!==e.kind){const{interpolationType:a,minZoom:i,maxZoom:o}=e,s=a?m(xr.interpolationFactor(a,t,i,o),0,1):0;"camera"===e.kind?n=rr(e.minSize,e.maxSize,s):r=s}return{uSizeT:r,uSize:n}}var kc=Object.freeze({__proto__:null,getSizeData:wc,evaluateSizeForFeature:Ec,evaluateSizeForZoom:Cc,SIZE_PACK_FACTOR:xc});function Tc(e,t,r){return e.sections.forEach((e=>{e.text=function(e,t,r){const n=t.layout.get("text-transform").evaluate(r,{});return"uppercase"===n?e=e.toLocaleUpperCase():"lowercase"===n&&(e=e.toLocaleLowerCase()),ii.applyArabicShaping&&(e=ii.applyArabicShaping(e)),e}(e.text,t,r)})),e}const Sc={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};function Pc(e){return"︶"===e||"﹈"===e||"︸"===e||"﹄"===e||"﹂"===e||"︾"===e||"︼"===e||"︺"===e||"︘"===e||"﹀"===e||"︐"===e||"︓"===e||"︔"===e||"｀"===e||"￣"===e||"︑"===e||"︒"===e}function Mc(e){return"︵"===e||"﹇"===e||"︷"===e||"﹃"===e||"﹁"===e||"︽"===e||"︻"===e||"︹"===e||"︗"===e||"︿"===e}var Ic=function(e,t,r,n,a){var i,o,s=8*a-n-1,l=(1<<s)-1,c=l>>1,u=-7,p=r?a-1:0,d=r?-1:1,h=e[t+p];for(p+=d,i=h&(1<<-u)-1,h>>=-u,u+=s;u>0;i=256*i+e[t+p],p+=d,u-=8);for(o=i&(1<<-u)-1,i>>=-u,u+=n;u>0;o=256*o+e[t+p],p+=d,u-=8);if(0===i)i=1-c;else{if(i===l)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,n),i-=c}return(h?-1:1)*o*Math.pow(2,i-n)},Ac=function(e,t,r,n,a,i){var o,s,l,c=8*i-a-1,u=(1<<c)-1,p=u>>1,d=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+p>=1?d/l:d*Math.pow(2,1-p))*l>=2&&(o++,l/=2),o+p>=u?(s=0,o=u):o+p>=1?(s=(t*l-1)*Math.pow(2,a),o+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,a),o=0));a>=8;e[r+h]=255&s,h+=f,s/=256,a-=8);for(o=o<<a|s,c+=a;c>0;e[r+h]=255&o,h+=f,o/=256,c-=8);e[r+h-f]|=128*m},Oc=zc;function zc(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}zc.Varint=0,zc.Fixed64=1,zc.Bytes=2,zc.Fixed32=5;var Rc=4294967296,Lc=1/Rc,Dc="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Bc(e){return e.type===zc.Bytes?e.readVarint()+e.pos:e.pos+1}function $c(e,t,r){return r?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Fc(e,t,r){var n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));r.realloc(n);for(var a=r.pos-1;a>=e;a--)r.buf[a+n]=r.buf[a]}function Nc(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function Vc(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function jc(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function Uc(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function qc(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function Hc(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function Gc(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function Wc(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function Xc(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}function Zc(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Yc(e,t,r){e[r]=t,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24}function Kc(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function Qc(e,t,r){t.glyphs=[],1===e&&r.readMessage(Jc,t)}function Jc(e,t,r){if(3===e){const{id:e,bitmap:n,width:a,height:i,left:o,top:s,advance:l}=r.readMessage(eu,{});t.glyphs.push({id:e,bitmap:new js({width:a+6,height:i+6},n),metrics:{width:a,height:i,left:o,top:s,advance:l}})}else 4===e?t.ascender=r.readSVarint():5===e&&(t.descender=r.readSVarint())}function eu(e,t,r){1===e?t.id=r.readVarint():2===e?t.bitmap=r.readBytes():3===e?t.width=r.readVarint():4===e?t.height=r.readVarint():5===e?t.left=r.readSVarint():6===e?t.top=r.readSVarint():7===e&&(t.advance=r.readVarint())}function tu(e){let t=0,r=0;for(const n of e)t+=n.w*n.h,r=Math.max(r,n.w);e.sort(((e,t)=>t.h-e.h));const n=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),r),h:1/0}];let a=0,i=0;for(const t of e)for(let e=n.length-1;e>=0;e--){const r=n[e];if(!(t.w>r.w||t.h>r.h)){if(t.x=r.x,t.y=r.y,i=Math.max(i,t.y+t.h),a=Math.max(a,t.x+t.w),t.w===r.w&&t.h===r.h){const t=n.pop();e<n.length&&(n[e]=t)}else t.h===r.h?(r.x+=t.w,r.w-=t.w):t.w===r.w?(r.y+=t.h,r.h-=t.h):(n.push({x:r.x+t.w,y:r.y,w:r.w-t.w,h:t.h}),r.y+=t.h,r.h-=t.h);break}}return{w:a,h:i,fill:t/(a*i)||0}}zc.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),a=n>>3,i=this.pos;this.type=7&n,e(a,t,this),this.pos===i&&this.skip(n)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Zc(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Kc(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Zc(this.buf,this.pos)+Zc(this.buf,this.pos+4)*Rc;return this.pos+=8,e},readSFixed64:function(){var e=Zc(this.buf,this.pos)+Kc(this.buf,this.pos+4)*Rc;return this.pos+=8,e},readFloat:function(){var e=Ic(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Ic(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,r,n=this.buf;return t=127&(r=n[this.pos++]),r<128?t:(t|=(127&(r=n[this.pos++]))<<7,r<128?t:(t|=(127&(r=n[this.pos++]))<<14,r<128?t:(t|=(127&(r=n[this.pos++]))<<21,r<128?t:function(e,t,r){var n,a,i=r.buf;if(n=(112&(a=i[r.pos++]))>>4,a<128)return $c(e,n,t);if(n|=(127&(a=i[r.pos++]))<<3,a<128)return $c(e,n,t);if(n|=(127&(a=i[r.pos++]))<<10,a<128)return $c(e,n,t);if(n|=(127&(a=i[r.pos++]))<<17,a<128)return $c(e,n,t);if(n|=(127&(a=i[r.pos++]))<<24,a<128)return $c(e,n,t);if(n|=(1&(a=i[r.pos++]))<<31,a<128)return $c(e,n,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(r=n[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Dc?function(e,t,r){return Dc.decode(e.subarray(t,r))}(this.buf,t,e):function(e,t,r){for(var n="",a=t;a<r;){var i,o,s,l=e[a],c=null,u=l>239?4:l>223?3:l>191?2:1;if(a+u>r)break;1===u?l<128&&(c=l):2===u?128==(192&(i=e[a+1]))&&(c=(31&l)<<6|63&i)<=127&&(c=null):3===u?(o=e[a+2],128==(192&(i=e[a+1]))&&128==(192&o)&&((c=(15&l)<<12|(63&i)<<6|63&o)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(o=e[a+2],s=e[a+3],128==(192&(i=e[a+1]))&&128==(192&o)&&128==(192&s)&&((c=(15&l)<<18|(63&i)<<12|(63&o)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,n+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),n+=String.fromCharCode(c),a+=u}return n}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==zc.Bytes)return e.push(this.readVarint(t));var r=Bc(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==zc.Bytes)return e.push(this.readSVarint());var t=Bc(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==zc.Bytes)return e.push(this.readBoolean());var t=Bc(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==zc.Bytes)return e.push(this.readFloat());var t=Bc(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==zc.Bytes)return e.push(this.readDouble());var t=Bc(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==zc.Bytes)return e.push(this.readFixed32());var t=Bc(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==zc.Bytes)return e.push(this.readSFixed32());var t=Bc(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==zc.Bytes)return e.push(this.readFixed64());var t=Bc(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==zc.Bytes)return e.push(this.readSFixed64());var t=Bc(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===zc.Varint)for(;this.buf[this.pos++]>127;);else if(t===zc.Bytes)this.pos=this.readVarint()+this.pos;else if(t===zc.Fixed32)this.pos+=4;else{if(t!==zc.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Yc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Yc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Yc(this.buf,-1&e,this.pos),Yc(this.buf,Math.floor(e*Lc),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Yc(this.buf,-1&e,this.pos),Yc(this.buf,Math.floor(e*Lc),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var r,n;if(e>=0?(r=e%4294967296|0,n=e/4294967296|0):(n=~(-e/4294967296),4294967295^(r=~(-e%4294967296))?r=r+1|0:(r=0,n=n+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,r){r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,r.buf[r.pos]=127&(e>>>=7)}(r,0,t),function(e,t){var r=(7&e)<<4;t.buf[t.pos++]|=r|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(n,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,r){for(var n,a,i=0;i<t.length;i++){if((n=t.charCodeAt(i))>55295&&n<57344){if(!a){n>56319||i+1===t.length?(e[r++]=239,e[r++]=191,e[r++]=189):a=n;continue}if(n<56320){e[r++]=239,e[r++]=191,e[r++]=189,a=n;continue}n=a-55296<<10|n-56320|65536,a=null}else a&&(e[r++]=239,e[r++]=191,e[r++]=189,a=null);n<128?e[r++]=n:(n<2048?e[r++]=n>>6|192:(n<65536?e[r++]=n>>12|224:(e[r++]=n>>18|240,e[r++]=n>>12&63|128),e[r++]=n>>6&63|128),e[r++]=63&n|128)}return r}(this.buf,e,this.pos);var r=this.pos-t;r>=128&&Fc(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),Ac(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Ac(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var n=this.pos-r;n>=128&&Fc(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(e,t,r){this.writeTag(e,zc.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,Nc,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,Vc,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,qc,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,jc,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,Uc,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,Hc,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,Gc,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,Wc,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,Xc,t)},writeBytesField:function(e,t){this.writeTag(e,zc.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,zc.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,zc.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,zc.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,zc.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,zc.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,zc.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,zc.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,zc.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,zc.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};class ru{constructor(e,{pixelRatio:t,version:r,stretchX:n,stretchY:a,content:i}){this.paddedRect=e,this.pixelRatio=t,this.stretchX=n,this.stretchY=a,this.content=i,this.version=r}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class nu{constructor(e,t){const r={},n={};this.haveRenderCallbacks=[];const a=[];this.addImages(e,r,a),this.addImages(t,n,a);const{w:i,h:o}=tu(a),s=new Us({width:i||1,height:o||1});for(const t in e){const n=e[t],a=r[t].paddedRect;Us.copy(n.data,s,{x:0,y:0},{x:a.x+1,y:a.y+1},n.data)}for(const e in t){const r=t[e],a=n[e].paddedRect,i=a.x+1,o=a.y+1,l=r.data.width,c=r.data.height;Us.copy(r.data,s,{x:0,y:0},{x:i,y:o},r.data),Us.copy(r.data,s,{x:0,y:c-1},{x:i,y:o-1},{width:l,height:1}),Us.copy(r.data,s,{x:0,y:0},{x:i,y:o+c},{width:l,height:1}),Us.copy(r.data,s,{x:l-1,y:0},{x:i-1,y:o},{width:1,height:c}),Us.copy(r.data,s,{x:0,y:0},{x:i+l,y:o},{width:1,height:c})}this.image=s,this.iconPositions=r,this.patternPositions=n}addImages(e,t,r){for(const n in e){const a=e[n],i={x:0,y:0,w:a.data.width+2,h:a.data.height+2};r.push(i),t[n]=new ru(i,a),a.hasRenderCallback&&this.haveRenderCallbacks.push(n)}}patchUpdatedImages(e,t){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const r in e.updatedImages)this.patchUpdatedImage(this.iconPositions[r],e.getImage(r),t),this.patchUpdatedImage(this.patternPositions[r],e.getImage(r),t)}patchUpdatedImage(e,t,r){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[n,a]=e.tl;r.update(t.data,void 0,{x:n,y:a})}}sa("ImagePosition",ru),sa("ImageAtlas",nu);const au={horizontal:1,vertical:2,horizontalOnly:3};class iu{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,t){const r=new iu;return r.scale=e||1,r.fontStack=t,r}static forImage(e){const t=new iu;return t.imageName=e,t}}class ou{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,t){const r=new ou;for(let n=0;n<e.sections.length;n++){const a=e.sections[n];a.image?r.addImageSection(a):r.addTextSection(a,t)}return r}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(e){this.text=function(e,t){let r="";for(let n=0;n<e.length;n++){const a=e.charCodeAt(n+1)||null,i=e.charCodeAt(n-1)||null;r+=!t&&(a&&qa(a)&&!Sc[e[n+1]]||i&&qa(i)&&!Sc[e[n-1]])||!Sc[e[n]]?e[n]:Sc[e[n]]}return r}(this.text,e)}trim(){let e=0;for(let t=0;t<this.text.length&&lu[this.text.charCodeAt(t)];t++)e++;let t=this.text.length;for(let r=this.text.length-1;r>=0&&r>=e&&lu[this.text.charCodeAt(r)];r--)t--;this.text=this.text.substring(e,t),this.sectionIndex=this.sectionIndex.slice(e,t)}substring(e,t){const r=new ou;return r.text=this.text.substring(e,t),r.sectionIndex=this.sectionIndex.slice(e,t),r.sections=this.sections,r}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((e,t)=>Math.max(e,this.sections[t].scale)),0)}addTextSection(e,t){this.text+=e.text,this.sections.push(iu.forText(e.scale,e.fontStack||t));const r=this.sections.length-1;for(let t=0;t<e.text.length;++t)this.sectionIndex.push(r)}addImageSection(e){const t=e.image?e.image.name:"";if(0===t.length)return void A("Can't add FormattedSection with an empty image.");const r=this.getNextImageSectionCharCode();r?(this.text+=String.fromCharCode(r),this.sections.push(iu.forImage(t)),this.sectionIndex.push(this.sections.length-1)):A("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function su(e,t,r,n,a,i,o,s,l,c,u,p,d,h,f,m){const g=ou.fromFeature(e,a);let v;p===au.vertical&&g.verticalizePunctuation(d);const{processBidirectionalText:y,processStyledBidirectionalText:b}=ii;if(y&&1===g.sections.length){v=[];const e=y(g.toString(),mu(g,c,i,t,n,h,f));for(const t of e){const e=new ou;e.text=t,e.sections=g.sections;for(let r=0;r<t.length;r++)e.sectionIndex.push(0);v.push(e)}}else if(b){v=[];const e=b(g.text,g.sectionIndex,mu(g,c,i,t,n,h,f));for(const t of e){const e=new ou;e.text=t[0],e.sectionIndex=t[1],e.sections=g.sections,v.push(e)}}else v=function(e,t){const r=[],n=e.text;let a=0;for(const n of t)r.push(e.substring(a,n)),a=n;return a<n.length&&r.push(e.substring(a,n.length)),r}(g,mu(g,c,i,t,n,h,f));const _=[],x={positionedLines:_,text:g.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:p,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(e,t,r,n,a,i,o,s,l,c,u,p){let d=0,h=0,f=0;const m="right"===s?1:"left"===s?0:.5;let g=!1;for(const e of a){const r=e.getSections();for(const e of r){if(e.imageName)continue;const r=t[e.fontStack];if(r&&(g=void 0!==r.ascender&&void 0!==r.descender,!g))break}if(!g)break}let v=0;for(const o of a){o.trim();const a=o.getMaxScale(),s=(a-1)*_c,b={positionedGlyphs:[],lineOffset:0};e.positionedLines[v]=b;const _=b.positionedGlyphs;let x=0;if(!o.length()){h+=i,++v;continue}let w=0,E=0;for(let i=0;i<o.length();i++){const s=o.getSection(i),f=o.getSectionIndex(i),m=o.getCharCode(i);let v=s.scale,b=null,C=null,k=null,T=_c,S=0;const P=!(l===au.horizontal||!u&&!Ua(m)||u&&(lu[m]||(y=m,ha(y)||fa(y)||ma(y)||Ra(y)||$a(y))));if(s.imageName){const t=n[s.imageName];if(!t)continue;k=s.imageName,e.iconsInText=e.iconsInText||!0,C=t.paddedRect;const r=t.displaySize;v=v*_c/p,b={width:r[0],height:r[1],left:1,top:-3,advance:P?r[1]:r[0],localGlyph:!1},S=g?-b.height*v:a*_c-17-r[1]*v,T=b.advance;const i=(P?r[0]:r[1])*v-_c*a;i>0&&i>x&&(x=i)}else{const e=r[s.fontStack];if(!e)continue;e[m]&&(C=e[m]);const n=t[s.fontStack];if(!n)continue;const i=n.glyphs[m];if(!i)continue;if(b=i.metrics,T=8203!==m?_c:0,g){const e=void 0!==n.ascender?Math.abs(n.ascender):0,t=void 0!==n.descender?Math.abs(n.descender):0,r=(e+t)*v;w<r&&(w=r,E=(e-t)/2*v),S=-e*v}else S=(a-v)*_c-17}P?(e.verticalizable=!0,_.push({glyph:m,imageName:k,x:d,y:h+S,vertical:P,scale:v,localGlyph:b.localGlyph,fontStack:s.fontStack,sectionIndex:f,metrics:b,rect:C}),d+=T*v+c):(_.push({glyph:m,imageName:k,x:d,y:h+S,vertical:P,scale:v,localGlyph:b.localGlyph,fontStack:s.fontStack,sectionIndex:f,metrics:b,rect:C}),d+=b.advance*v+c)}0!==_.length&&(f=Math.max(d-c,f),g?vu(_,m,x,E,i*a/2):vu(_,m,x,0,i/2)),d=0;const C=i*a+x;b.lineOffset=Math.max(x,s),h+=C,++v}var y;const b=h,{horizontalAlign:_,verticalAlign:x}=gu(o);(function(e,t,r,n,a,i){const o=(t-r)*a,s=-i*n;for(const t of e)for(const e of t.positionedGlyphs)e.x+=o,e.y+=s})(e.positionedLines,m,_,x,f,b),e.top+=-x*b,e.bottom=e.top+b,e.left+=-_*f,e.right=e.left+f,e.hasBaseline=g}(x,t,r,n,v,o,s,l,p,c,d,m),!function(e){for(const t of e)if(0!==t.positionedGlyphs.length)return!1;return!0}(_)&&x}const lu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},cu={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function uu(e,t,r,n,a,i){if(t.imageName){const e=n[t.imageName];return e?e.displaySize[0]*t.scale*_c/i+a:0}{const n=r[t.fontStack],i=n&&n.glyphs[e];return i?i.metrics.advance*t.scale+a:0}}function pu(e,t,r,n){const a=Math.pow(e-t,2);return n?e<t?a/2:2*a:a+Math.abs(r)*r}function du(e,t,r){let n=0;return 10===e&&(n-=1e4),r&&(n+=150),40!==e&&65288!==e||(n+=50),41!==t&&65289!==t||(n+=50),n}function hu(e,t,r,n,a,i){let o=null,s=pu(t,r,a,i);for(const e of n){const n=pu(t-e.x,r,a,i)+e.badness;n<=s&&(o=e,s=n)}return{index:e,x:t,priorBreak:o,badness:s}}function fu(e){return e?fu(e.priorBreak).concat(e.index):[]}function mu(e,t,r,n,a,i,o){if("point"!==i)return[];if(!e)return[];const s=[],l=function(e,t,r,n,a,i){let o=0;for(let r=0;r<e.length();r++){const s=e.getSection(r);o+=uu(e.getCharCode(r),s,n,a,t,i)}return o/Math.max(1,Math.ceil(o/r))}(e,t,r,n,a,o),c=e.text.indexOf("​")>=0;let u=0;for(let r=0;r<e.length();r++){const i=e.getSection(r),d=e.getCharCode(r);if(lu[d]||(u+=uu(d,i,n,a,t,o)),r<e.length()-1){const t=!((p=d)<11904||!(Ea(p)||wa(p)||Da(p)||za(p)||Sa(p)||ga(p)||Ca(p)||ba(p)||Pa(p)||Ma(p)||Ta(p)||Fa(p)||_a(p)||ya(p)||va(p)||ka(p)||xa(p)||La(p)||Aa(p)||Ia(p)));(cu[d]||t||i.imageName)&&s.push(hu(r+1,u,l,s,du(d,e.getCharCode(r+1),t&&c),!1))}}var p;return fu(hu(e.length(),u,l,s,0,!0))}function gu(e){let t=.5,r=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:t,verticalAlign:r}}function vu(e,t,r,n,a){if(!(t||r||n||a))return;const i=e.length-1,o=e[i],s=(o.x+o.metrics.advance*o.scale)*t;for(let t=0;t<=i;t++)e[t].x-=s,e[t].y+=r+n+a}function yu(e,t,r){const{horizontalAlign:n,verticalAlign:a}=gu(r),i=t[0]-e.displaySize[0]*n,o=t[1]-e.displaySize[1]*a;return{image:e,top:o,bottom:o+e.displaySize[1],left:i,right:i+e.displaySize[0]}}function bu(e,t,r,n,a,i){const o=e.image;let s;if(o.content){const e=o.content,t=o.pixelRatio||1;s=[e[0]/t,e[1]/t,o.displaySize[0]-e[2]/t,o.displaySize[1]-e[3]/t]}const l=t.left*i,c=t.right*i;let u,p,d,h;"width"===r||"both"===r?(h=a[0]+l-n[3],p=a[0]+c+n[1]):(h=a[0]+(l+c-o.displaySize[0])/2,p=h+o.displaySize[0]);const f=t.top*i,m=t.bottom*i;return"height"===r||"both"===r?(u=a[1]+f-n[0],d=a[1]+m+n[2]):(u=a[1]+(f+m-o.displaySize[1])/2,d=u+o.displaySize[1]),{image:o,top:u,right:p,bottom:d,left:h,collisionPadding:s}}class _u extends a{constructor(e,t,r,n){super(e,t),this.angle=r,void 0!==n&&(this.segment=n)}clone(){return new _u(this.x,this.y,this.angle,this.segment)}}function xu(e,t,r,n,a){if(void 0===t.segment)return!0;let i=t,o=t.segment+1,s=0;for(;s>-r/2;){if(o--,o<0)return!1;s-=e[o].dist(i),i=e[o]}s+=e[o].dist(e[o+1]),o++;const l=[];let c=0;for(;s<r/2;){const t=e[o],r=e[o+1];if(!r)return!1;let i=e[o-1].angleTo(t)-t.angleTo(r);for(i=Math.abs((i+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:i}),c+=i;s-l[0].distance>n;)c-=l.shift().angleDelta;if(c>a)return!1;o++,s+=t.dist(r)}return!0}function wu(e){let t=0;for(let r=0;r<e.length-1;r++)t+=e[r].dist(e[r+1]);return t}function Eu(e,t,r){return e?.6*t*r:0}function Cu(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function ku(e,t,r,n,a,i){const o=Eu(r,a,i),s=Cu(r,n)*i;let l=0;const c=wu(e)/2;for(let r=0;r<e.length-1;r++){const n=e[r],a=e[r+1],i=n.dist(a);if(l+i>c){const u=(c-l)/i,p=rr(n.x,a.x,u),d=rr(n.y,a.y,u),h=new _u(p,d,a.angleTo(n),r);return!o||xu(e,h,s,o,t)?h:void 0}l+=i}}function Tu(e,t,r,n,a,i,o,s,l){const c=Eu(n,i,o),u=Cu(n,a),p=u*o,d=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-p<t/4&&(t=p+t/4),Su(e,d?t/2*s%t:(u/2+2*i)*o*s%t,t,c,r,p,d,!1,l)}function Su(e,t,r,n,a,i,o,s,l){const c=i/2,u=wu(e);let p=0,d=t-r,h=[];for(let t=0;t<e.length-1;t++){const o=e[t],s=e[t+1],f=o.dist(s),m=s.angleTo(o);for(;d+r<p+f;){d+=r;const g=(d-p)/f,v=rr(o.x,s.x,g),y=rr(o.y,s.y,g);if(v>=0&&v<l&&y>=0&&y<l&&d-c>=0&&d+c<=u){const r=new _u(v,y,m,t);r._round(),n&&!xu(e,r,i,n,a)||h.push(r)}}p+=f}return s||h.length||o||(h=Su(e,p/2,r,n,a,i,o,!0,l)),h}function Pu(e,t,r,n,i){const o=[];for(let s=0;s<e.length;s++){const l=e[s];let c;for(let e=0;e<l.length-1;e++){let s=l[e],u=l[e+1];s.x<t&&u.x<t||(s.x<t?s=new a(t,s.y+(t-s.x)/(u.x-s.x)*(u.y-s.y))._round():u.x<t&&(u=new a(t,s.y+(t-s.x)/(u.x-s.x)*(u.y-s.y))._round()),s.y<r&&u.y<r||(s.y<r?s=new a(s.x+(r-s.y)/(u.y-s.y)*(u.x-s.x),r)._round():u.y<r&&(u=new a(s.x+(r-s.y)/(u.y-s.y)*(u.x-s.x),r)._round()),s.x>=n&&u.x>=n||(s.x>=n?s=new a(n,s.y+(n-s.x)/(u.x-s.x)*(u.y-s.y))._round():u.x>=n&&(u=new a(n,s.y+(n-s.x)/(u.x-s.x)*(u.y-s.y))._round()),s.y>=i&&u.y>=i||(s.y>=i?s=new a(s.x+(i-s.y)/(u.y-s.y)*(u.x-s.x),i)._round():u.y>=i&&(u=new a(s.x+(i-s.y)/(u.y-s.y)*(u.x-s.x),i)._round()),c&&s.equals(c[c.length-1])||(c=[s],o.push(c)),c.push(u)))))}}return o}sa("Anchor",_u);var Mu=Ou,Iu=Ou,Au=1e20;function Ou(e,t,r,n,a,i){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=n||.25,this.fontFamily=a||"sans-serif",this.fontWeight=i||"normal",this.radius=r||8;var o=this.size=this.fontSize+2*this.buffer,s=o+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=o,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(o/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function zu(e,t,r,n,a,i){for(var o=0;o<t;o++)Ru(e,o,t,r,n,a,i);for(var s=0;s<r;s++)Ru(e,s*t,1,t,n,a,i)}function Ru(e,t,r,n,a,i,o){var s,l,c,u;for(i[0]=0,o[0]=-Au,o[1]=Au,s=0;s<n;s++)a[s]=e[t+s*r];for(s=1,l=0,c=0;s<n;s++){do{c=(a[s]-a[u=i[l]]+s*s-u*u)/(s-u)/2}while(c<=o[l]&&--l>-1);i[++l]=s,o[l]=c,o[l+1]=Au}for(s=0,l=0;s<n;s++){for(;o[l+1]<s;)l++;e[t+s*r]=a[u=i[l]]+(s-u)*(s-u)}}Ou.prototype._draw=function(e,t){var r,n,a,i,o,s,l,c,u,p=this.ctx.measureText(e),d=p.width,h=2*this.buffer;t&&this.useMetrics?(o=Math.floor(p.actualBoundingBoxAscent),c=this.buffer+Math.ceil(p.actualBoundingBoxAscent),s=this.buffer,l=this.buffer,r=(n=Math.min(this.size,Math.ceil(p.actualBoundingBoxRight-p.actualBoundingBoxLeft)))+h,a=(i=Math.min(this.size-s,Math.ceil(p.actualBoundingBoxAscent+p.actualBoundingBoxDescent)))+h,this.ctx.textBaseline="alphabetic"):(r=n=this.size,a=i=this.size,o=19*this.fontSize/24,s=l=0,c=this.middle,this.ctx.textBaseline="middle"),n&&i&&(this.ctx.clearRect(l,s,n,i),this.ctx.fillText(e,this.buffer,c),u=this.ctx.getImageData(l,s,n,i));var f=new Uint8ClampedArray(r*a);return function(e,t,r,n,a,i,o){i.fill(Au,0,t*r),o.fill(0,0,t*r);for(var s=(t-n)/2,l=0;l<a;l++)for(var c=0;c<n;c++){var u=(l+s)*t+c+s,p=e.data[4*(l*n+c)+3]/255;if(1===p)i[u]=0,o[u]=Au;else if(0===p)i[u]=Au,o[u]=0;else{var d=Math.max(0,.5-p),h=Math.max(0,p-.5);i[u]=d*d,o[u]=h*h}}}(u,r,a,n,i,this.gridOuter,this.gridInner),zu(this.gridOuter,r,a,this.f,this.v,this.z),zu(this.gridInner,r,a,this.f,this.v,this.z),function(e,t,r,n,a,i,o){for(var s=0;s<t*r;s++){var l=Math.sqrt(n[s])-Math.sqrt(a[s]);e[s]=Math.round(255-255*(l/i+o))}}(f,r,a,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:f,metrics:{width:n,height:i,sdfWidth:r,sdfHeight:a,top:o,left:0,advance:d}}},Ou.prototype.draw=function(e){return this._draw(e,!1).data},Ou.prototype.drawWithMetrics=function(e){return this._draw(e,!0)},Mu.default=Iu;const Lu={none:0,ideographs:1,all:2};class Du{constructor(e,t,r){this.requestManager=e,this.localGlyphMode=t,this.localFontFamily=r,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,t){const r=[];for(const t in e)for(const n of e[t])r.push({stack:t,id:n});v(r,(({stack:e,id:t},r)=>{let n=this.entries[e];n||(n=this.entries[e]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let a=n.glyphs[t];if(void 0!==a)return void r(null,{stack:e,id:t,glyph:a});if(a=this._tinySDF(n,e,t),a)return n.glyphs[t]=a,void r(null,{stack:e,id:t,glyph:a});const i=Math.floor(t/256);if(256*i>65535)return void r(new Error("glyphs > 65535 not supported"));if(n.ranges[i])return void r(null,{stack:e,id:t,glyph:a});let o=n.requests[i];o||(o=n.requests[i]=[],Du.loadGlyphRange(e,i,this.url,this.requestManager,((e,t)=>{if(t){n.ascender=t.ascender,n.descender=t.descender;for(const e in t.glyphs)this._doesCharSupportLocalGlyph(+e)||(n.glyphs[+e]=t.glyphs[+e]);n.ranges[i]=!0}for(const r of o)r(e,t);delete n.requests[i]}))),o.push(((n,a)=>{n?r(n):a&&r(null,{stack:e,id:t,glyph:a.glyphs[t]||null})}))}),((e,r)=>{if(e)t(e);else if(r){const e={};for(const{stack:t,id:n,glyph:a}of r)void 0===e[t]&&(e[t]={}),void 0===e[t].glyphs&&(e[t].glyphs={}),e[t].glyphs[n]=a&&{id:a.id,bitmap:a.bitmap.clone(),metrics:a.metrics},e[t].ascender=this.entries[t].ascender,e[t].descender=this.entries[t].descender;t(null,e)}}))}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==Lu.none&&(this.localGlyphMode===Lu.all?!!this.localFontFamily:!!this.localFontFamily&&(Ma(e)||Oa(e)||_a(e)||xa(e))||ba(e))}_tinySDF(e,t,r){const n=this.localFontFamily;if(!n)return;if(!this._doesCharSupportLocalGlyph(r))return;let a=e.tinySDF;if(!a){let r="400";/bold/i.test(t)?r="900":/medium/i.test(t)?r="500":/light/i.test(t)&&(r="200"),a=e.tinySDF=new Du.TinySDF(48,6,16,.25,n,r)}if(this.localGlyphs[a.fontWeight][r])return this.localGlyphs[a.fontWeight][r];const{data:i,metrics:o}=a.drawWithMetrics(String.fromCharCode(r)),{sdfWidth:s,sdfHeight:l,width:c,height:u,left:p,top:d,advance:h}=o;return this.localGlyphs[a.fontWeight][r]={id:r,bitmap:new js({width:s,height:l},i),metrics:{width:c/2,height:u/2,left:p/2,top:d/2-27,advance:h/2,localGlyph:!0}}}}function Bu(e,t,r,n){const i=[],o=e.image,s=o.pixelRatio,l=o.paddedRect.w-2,c=o.paddedRect.h-2,u=e.right-e.left,p=e.bottom-e.top,d=o.stretchX||[[0,l]],h=o.stretchY||[[0,c]],f=(e,t)=>e+t[1]-t[0],m=d.reduce(f,0),g=h.reduce(f,0),v=l-m,y=c-g;let b=0,_=m,x=0,w=g,E=0,C=v,k=0,T=y;if(o.content&&n){const e=o.content;b=$u(d,0,e[0]),x=$u(h,0,e[1]),_=$u(d,e[0],e[2]),w=$u(h,e[1],e[3]),E=e[0]-b,k=e[1]-x,C=e[2]-e[0]-_,T=e[3]-e[1]-w}const S=(n,i,l,c)=>{const d=Nu(n.stretch-b,_,u,e.left),h=Vu(n.fixed-E,C,n.stretch,m),f=Nu(i.stretch-x,w,p,e.top),v=Vu(i.fixed-k,T,i.stretch,g),y=Nu(l.stretch-b,_,u,e.left),S=Vu(l.fixed-E,C,l.stretch,m),P=Nu(c.stretch-x,w,p,e.top),M=Vu(c.fixed-k,T,c.stretch,g),I=new a(d,f),A=new a(y,f),O=new a(y,P),z=new a(d,P),R=new a(h/s,v/s),L=new a(S/s,M/s),D=t*Math.PI/180;if(D){const e=Math.sin(D),t=Math.cos(D),r=[t,-e,e,t];I._matMult(r),A._matMult(r),z._matMult(r),O._matMult(r)}const B=n.stretch+n.fixed,$=i.stretch+i.fixed;return{tl:I,tr:A,bl:z,br:O,tex:{x:o.paddedRect.x+1+B,y:o.paddedRect.y+1+$,w:l.stretch+l.fixed-B,h:c.stretch+c.fixed-$},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:R,pixelOffsetBR:L,minFontScaleX:C/s/u,minFontScaleY:T/s/p,isSDF:r}};if(n&&(o.stretchX||o.stretchY)){const e=Fu(d,v,m),t=Fu(h,y,g);for(let r=0;r<e.length-1;r++){const n=e[r],a=e[r+1];for(let e=0;e<t.length-1;e++)i.push(S(n,t[e],a,t[e+1]))}}else i.push(S({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:c+1}));return i}function $u(e,t,r){let n=0;for(const a of e)n+=Math.max(t,Math.min(r,a[1]))-Math.max(t,Math.min(r,a[0]));return n}function Fu(e,t,r){const n=[{fixed:-1,stretch:0}];for(const[t,r]of e){const e=n[n.length-1];n.push({fixed:t-e.stretch,stretch:e.stretch}),n.push({fixed:t-e.stretch,stretch:e.stretch+(r-t)})}return n.push({fixed:t+1,stretch:r}),n}function Nu(e,t,r,n){return e/t*r+n}function Vu(e,t,r,n){return e-t*r/n}function ju(e,t,r,n){const a=t+e.positionedLines[n].lineOffset;return 0===n?r+a/2:r+(a+(t+e.positionedLines[n-1].lineOffset))/2}Du.loadGlyphRange=function(e,t,r,n,a){const i=256*t,o=i+255,s=n.transformRequest(n.normalizeGlyphsURL(r).replace("{fontstack}",e).replace("{range}",`${i}-${o}`),xe.Glyphs);ke(s,((e,t)=>{if(e)a(e);else if(t){const e={},r=function(e){return new Oc(e).readFields(Qc,{})}(t);for(const t of r.glyphs)e[t.id]=t;a(null,{glyphs:e,ascender:r.ascender,descender:r.descender})}}))},Du.TinySDF=Mu;class Uu{constructor(e=[],t=qu){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let e=(this.length>>1)-1;e>=0;e--)this._down(e)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,n=t[e];for(;e>0;){const a=e-1>>1,i=t[a];if(r(n,i)>=0)break;t[e]=i,e=a}t[e]=n}_down(e){const{data:t,compare:r}=this,n=this.length>>1,a=t[e];for(;e<n;){let n=1+(e<<1),i=t[n];const o=n+1;if(o<this.length&&r(t[o],i)<0&&(n=o,i=t[o]),r(i,a)>=0)break;t[e]=i,e=n}t[e]=a}}function qu(e,t){return e<t?-1:e>t?1:0}function Hu(e,t=1,r=!1){let n=1/0,i=1/0,o=-1/0,s=-1/0;const l=e[0];for(let e=0;e<l.length;e++){const t=l[e];(!e||t.x<n)&&(n=t.x),(!e||t.y<i)&&(i=t.y),(!e||t.x>o)&&(o=t.x),(!e||t.y>s)&&(s=t.y)}const c=Math.min(o-n,s-i);let u=c/2;const p=new Uu([],Gu);if(0===c)return new a(n,i);for(let t=n;t<o;t+=c)for(let r=i;r<s;r+=c)p.push(new Wu(t+u,r+u,u,e));let d=function(e){let t=0,r=0,n=0;const a=e[0];for(let e=0,i=a.length,o=i-1;e<i;o=e++){const i=a[e],s=a[o],l=i.x*s.y-s.x*i.y;r+=(i.x+s.x)*l,n+=(i.y+s.y)*l,t+=3*l}return new Wu(r/t,n/t,0,e)}(e),h=p.length;for(;p.length;){const n=p.pop();(n.d>d.d||!d.d)&&(d=n,r&&console.log("found best %d after %d probes",Math.round(1e4*n.d)/1e4,h)),n.max-d.d<=t||(u=n.h/2,p.push(new Wu(n.p.x-u,n.p.y-u,u,e)),p.push(new Wu(n.p.x+u,n.p.y-u,u,e)),p.push(new Wu(n.p.x-u,n.p.y+u,u,e)),p.push(new Wu(n.p.x+u,n.p.y+u,u,e)),h+=4)}return r&&(console.log(`num probes: ${h}`),console.log(`best distance: ${d.d}`)),d.p}function Gu(e,t){return t.max-e.max}function Wu(e,t,r,n){this.p=new a(e,t),this.h=r,this.d=function(e,t){let r=!1,n=1/0;for(let a=0;a<t.length;a++){const i=t[a];for(let t=0,a=i.length,o=a-1;t<a;o=t++){const a=i[t],s=i[o];a.y>e.y!=s.y>e.y&&e.x<(s.x-a.x)*(e.y-a.y)/(s.y-a.y)+a.x&&(r=!r),n=Math.min(n,rs(e,a,s))}}return(r?1:-1)*Math.sqrt(n)}(this.p,n),this.max=this.d+this.h*Math.SQRT2}const Xu=Number.POSITIVE_INFINITY,Zu=Math.sqrt(2);function Yu(e,t){return t[1]!==Xu?function(e,t,r){let n=0,a=0;switch(t=Math.abs(t),r=Math.abs(r),e){case"top-right":case"top-left":case"top":a=r-7;break;case"bottom-right":case"bottom-left":case"bottom":a=7-r}switch(e){case"top-right":case"bottom-right":case"right":n=-t;break;case"top-left":case"bottom-left":case"left":n=t}return[n,a]}(e,t[0],t[1]):function(e,t){let r=0,n=0;t<0&&(t=0);const a=t/Zu;switch(e){case"top-right":case"top-left":n=a-7;break;case"bottom-right":case"bottom-left":n=7-a;break;case"bottom":n=7-t;break;case"top":n=t-7}switch(e){case"top-right":case"bottom-right":r=-a;break;case"top-left":case"bottom-left":r=a;break;case"left":r=t;break;case"right":r=-t}return[r,n]}(e,t[0])}function Ku(e,t,r,n,a,i,o,s){e.createArrays(),e.tilePixelRatio=jo/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;const l=e.layers[0].layout,c=e.layers[0]._unevaluatedLayout._values,u={};if("composite"===e.textSizeData.kind){const{minZoom:t,maxZoom:r}=e.textSizeData;u.compositeTextSizes=[c["text-size"].possiblyEvaluate(new oi(t),o),c["text-size"].possiblyEvaluate(new oi(r),o)]}if("composite"===e.iconSizeData.kind){const{minZoom:t,maxZoom:r}=e.iconSizeData;u.compositeIconSizes=[c["icon-size"].possiblyEvaluate(new oi(t),o),c["icon-size"].possiblyEvaluate(new oi(r),o)]}u.layoutTextSize=c["text-size"].possiblyEvaluate(new oi(s+1),o),u.layoutIconSize=c["icon-size"].possiblyEvaluate(new oi(s+1),o),u.textMaxSize=c["text-size"].possiblyEvaluate(new oi(18),o);const p="map"===l.get("text-rotation-alignment")&&"point"!==l.get("symbol-placement"),d=l.get("text-size");for(const i of e.features){const s=l.get("text-font").evaluate(i,{},o).join(","),c=d.evaluate(i,{},o),h=u.layoutTextSize.evaluate(i,{},o),f=(u.layoutIconSize.evaluate(i,{},o),{horizontal:{},vertical:void 0}),m=i.text;let g,v=[0,0];if(m){const n=m.toString(),u=l.get("text-letter-spacing").evaluate(i,{},o)*_c,d=l.get("text-line-height").evaluate(i,{},o)*_c,g=Va(n)?u:0,y=l.get("text-anchor").evaluate(i,{},o),b=l.get("text-variable-anchor");if(!b){const e=l.get("text-radial-offset").evaluate(i,{},o);v=e?Yu(y,[e*_c,Xu]):l.get("text-offset").evaluate(i,{},o).map((e=>e*_c))}let _=p?"center":l.get("text-justify").evaluate(i,{},o);const x=l.get("symbol-placement"),w="point"===x,E="point"===x?l.get("text-max-width").evaluate(i,{},o)*_c:0,C=i=>{e.allowVerticalPlacement&&Na(n)&&(f.vertical=su(m,t,r,a,s,E,d,y,i,g,v,au.vertical,!0,x,h,c))};if(!p&&b){const e="auto"===_?b.map((e=>Qu(e))):[_];let n=!1;for(let i=0;i<e.length;i++){const o=e[i];if(!f.horizontal[o])if(n)f.horizontal[o]=f.horizontal[0];else{const e=su(m,t,r,a,s,E,d,"center",o,g,v,au.horizontal,!1,x,h,c);e&&(f.horizontal[o]=e,n=1===e.positionedLines.length)}}C("left")}else{if("auto"===_&&(_=Qu(y)),w||l.get("text-writing-mode").indexOf("horizontal")>=0||!Na(n)){const e=su(m,t,r,a,s,E,d,y,_,g,v,au.horizontal,!1,x,h,c);e&&(f.horizontal[_]=e)}C("point"===x?"left":_)}}let y=!1;if(i.icon&&i.icon.name){const t=n[i.icon.name];t&&(g=yu(a[i.icon.name],l.get("icon-offset").evaluate(i,{},o),l.get("icon-anchor").evaluate(i,{},o)),y=t.sdf,void 0===e.sdfIcons?e.sdfIcons=t.sdf:e.sdfIcons!==t.sdf&&A("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(t.pixelRatio!==e.pixelRatio||0!==l.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}const b=rp(f.horizontal)||f.vertical;e.iconsInText||(e.iconsInText=!!b&&b.iconsInText),(b||g)&&Ju(e,i,f,g,n,u,h,0,v,y,o)}i&&e.generateCollisionDebugBuffers(s,e.collisionBoxArray)}function Qu(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ju(e,t,r,n,a,i,o,s,l,c,p){let d=i.textMaxSize.evaluate(t,{},p);void 0===d&&(d=o);const h=e.layers[0].layout,f=h.get("icon-offset").evaluate(t,{},p),m=rp(r.horizontal)||r.vertical,g=o/24,v=e.tilePixelRatio*d/24,y=e.tilePixelRatio*h.get("symbol-spacing"),b=h.get("text-padding")*e.tilePixelRatio,_=h.get("icon-padding")*e.tilePixelRatio,x=u(h.get("text-max-angle")),w="map"===h.get("text-rotation-alignment")&&"point"!==h.get("symbol-placement"),E="map"===h.get("icon-rotation-alignment")&&"point"!==h.get("symbol-placement"),C=h.get("symbol-placement"),k=y/2,T=h.get("icon-text-fit");let S;n&&"none"!==T&&(e.allowVerticalPlacement&&r.vertical&&(S=bu(n,r.vertical,T,h.get("icon-text-fit-padding"),f,g)),m&&(n=bu(n,m,T,h.get("icon-text-fit-padding"),f,g)));const P=(s,u)=>{u.x<0||u.x>=jo||u.y<0||u.y>=jo||function(e,t,r,n,a,i,o,s,l,c,u,p,d,h,f,m,g,v,y,b,_,x,w,E){const C=e.addToLineVertexArray(t,r);let k,T,S,P,M,I,O,z=0,R=0,L=0,D=0,B=-1,$=-1;const F={};let N=po(""),V=0,j=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?[V,j]=s.layout.get("text-offset").evaluate(b,{},w).map((e=>e*_c)):(V=s.layout.get("text-radial-offset").evaluate(b,{},w)*_c,j=Xu),e.allowVerticalPlacement&&n.vertical){const e=n.vertical;if(h)I=ap(e),o&&(O=ap(o));else{const r=s.layout.get("text-rotate").evaluate(b,{},w)+90;S=np(l,t,c,u,p,e,d,r,f),o&&(P=np(l,t,c,u,p,o,g,r))}}if(a){const r=s.layout.get("icon-rotate").evaluate(b,{},w),n="none"!==s.layout.get("icon-text-fit"),i=Bu(a,r,x,n),d=o?Bu(o,r,x,n):void 0;T=np(l,t,c,u,p,a,g,r),z=4*i.length;const h=e.iconSizeData;let f=null;"source"===h.kind?(f=[xc*s.layout.get("icon-size").evaluate(b,{},w)],f[0]>ep&&A(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===h.kind&&(f=[xc*_.compositeIconSizes[0].evaluate(b,{},w),xc*_.compositeIconSizes[1].evaluate(b,{},w)],(f[0]>ep||f[1]>ep)&&A(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),e.addSymbols(e.icon,i,f,y,v,b,!1,t,C.lineStartIndex,C.lineLength,-1,w),B=e.icon.placedSymbolArray.length-1,d&&(R=4*d.length,e.addSymbols(e.icon,d,f,y,v,b,au.vertical,t,C.lineStartIndex,C.lineLength,-1,w),$=e.icon.placedSymbolArray.length-1)}for(const r in n.horizontal){const a=n.horizontal[r];k||(N=po(a.text),h?M=ap(a):k=np(l,t,c,u,p,a,d,s.layout.get("text-rotate").evaluate(b,{},w),f));const o=1===a.positionedLines.length;if(L+=tp(e,t,a,i,s,h,b,f,C,n.vertical?au.horizontal:au.horizontalOnly,o?Object.keys(n.horizontal):[r],F,B,_,w),o)break}n.vertical&&(D+=tp(e,t,n.vertical,i,s,h,b,f,C,au.vertical,["vertical"],F,$,_,w));let U=-1;const q=(e,t)=>e?Math.max(e,t):t;U=q(M,U),U=q(I,U),U=q(O,U);const H=U>-1?1:0;H&&(U*=E/_c),e.glyphOffsetArray.length>=hp.MAX_GLYPHS&&A("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,b.sortKey),e.symbolInstances.emplaceBack(t.x,t.y,F.right>=0?F.right:-1,F.center>=0?F.center:-1,F.left>=0?F.left:-1,F.vertical>=0?F.vertical:-1,B,$,N,void 0!==k?k:e.collisionBoxArray.length,void 0!==k?k+1:e.collisionBoxArray.length,void 0!==S?S:e.collisionBoxArray.length,void 0!==S?S+1:e.collisionBoxArray.length,void 0!==T?T:e.collisionBoxArray.length,void 0!==T?T+1:e.collisionBoxArray.length,P||e.collisionBoxArray.length,P?P+1:e.collisionBoxArray.length,c,L,D,z,R,H,0,V,j,U)}(e,u,s,r,n,a,S,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,b,w,l,0,_,E,f,t,i,c,p,o)};if("line"===C)for(const a of Pu(t.geometry,0,0,jo,jo)){const t=Tu(a,y,x,r.vertical||m,n,24,v,e.overscaling,jo);for(const r of t){const t=m;t&&ip(e,t.text,k,r)||P(a,r)}}else if("line-center"===C){for(const e of t.geometry)if(e.length>1){const t=ku(e,x,r.vertical||m,n,24,v);t&&P(e,t)}}else if("Polygon"===t.type)for(const e of Sl(t.geometry,0)){const t=Hu(e,16);P(e[0],new _u(t.x,t.y,0))}else if("LineString"===t.type)for(const e of t.geometry)P(e,new _u(e[0].x,e[0].y,0));else if("Point"===t.type)for(const e of t.geometry)for(const t of e)P([t],new _u(t.x,t.y,0))}const ep=32640;function tp(e,t,r,n,i,o,s,l,c,u,p,d,h,f,m){const g=function(e,t,r,n,i,o,s,l){const c=[];if(0===t.positionedLines.length)return c;const u=n.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,p=function(e){const t=e[0],r=e[1],n=t*r;return n>0?[t,-r]:n<0?[-t,r]:0===t?[r,t]:[r,-t]}(r);let d=Math.abs(t.top-t.bottom);for(const e of t.positionedLines)d-=e.lineOffset;const h=t.positionedLines.length,f=d/h;let m=t.top-r[1];for(let e=0;e<h;++e){const n=t.positionedLines[e];m=ju(t,f,m,e);for(const e of n.positionedGlyphs){if(!e.rect)continue;const n=e.rect||{};let o=4,d=!0,h=1,f=0;const g=(i||l)&&e.vertical,v=e.metrics.advance*e.scale/2,y=e.metrics,b=e.rect;if(null===b)continue;if(l&&t.verticalizable&&(f=e.imageName?v-e.metrics.width*e.scale/2:0),e.imageName){const t=s[e.imageName];if(!t)continue;d=t.sdf,h=t.pixelRatio,o=1/h}const _=i?[e.x+v,e.y]:[0,0];let x=[0,0],w=[0,0],E=!1;i||(g?(w=[e.x+v+p[0],e.y+p[1]-f],E=!0):x=[e.x+v+r[0],e.y+r[1]-f]);const C=b.w*e.scale/(h*(e.localGlyph?2:1)),k=b.h*e.scale/(h*(e.localGlyph?2:1));let T,S,P,M;if(g){const t=e.y-m,r=new a(-v,v-t),n=-Math.PI/2,i=new a(...w);T=new a(-v+x[0],x[1]),T._rotateAround(n,r)._add(i),T.x+=-t+v,T.y-=(y.left-o)*e.scale;const s=e.imageName?y.advance*e.scale:_c*e.scale,l=String.fromCharCode(e.glyph);Pc(l)?T.x+=(1-o)*e.scale:Mc(l)?T.x+=s-y.height*e.scale+(-o-1)*e.scale:T.x+=e.imageName||y.width+2*o===b.w&&y.height+2*o===b.h?(s-k)/2:(s-(y.height+2*o)*e.scale)/2,S=new a(T.x,T.y-C),P=new a(T.x+k,T.y),M=new a(T.x+k,T.y-C)}else{const t=(y.left-o)*e.scale-v+x[0],r=(-y.top-o)*e.scale+x[1],n=t+C,i=r+k;T=new a(t,r),S=new a(n,r),P=new a(t,i),M=new a(n,i)}if(u){let e;e=i?new a(0,0):E?new a(p[0],p[1]):new a(r[0],r[1]),T._rotateAround(u,e),S._rotateAround(u,e),P._rotateAround(u,e),M._rotateAround(u,e)}const I=new a(0,0),A=new a(0,0);c.push({tl:T,tr:S,bl:P,br:M,tex:n,writingMode:t.writingMode,glyphOffset:_,sectionIndex:e.sectionIndex,isSDF:d,pixelOffsetTL:I,pixelOffsetBR:A,minFontScaleX:0,minFontScaleY:0})}}return c}(0,r,l,i,o,s,n,e.allowVerticalPlacement),v=e.textSizeData;let y=null;"source"===v.kind?(y=[xc*i.layout.get("text-size").evaluate(s,{},m)],y[0]>ep&&A(`${e.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===v.kind&&(y=[xc*f.compositeTextSizes[0].evaluate(s,{},m),xc*f.compositeTextSizes[1].evaluate(s,{},m)],(y[0]>ep||y[1]>ep)&&A(`${e.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),e.addSymbols(e.text,g,y,l,o,s,u,t,c.lineStartIndex,c.lineLength,h,m);for(const t of p)d[t]=e.text.placedSymbolArray.length-1;return 4*g.length}function rp(e){for(const t in e)return e[t];return null}function np(e,t,r,n,i,o,s,l,c){let p=o.top,d=o.bottom,h=o.left,f=o.right;const m=o.collisionPadding;if(m&&(h-=m[0],p-=m[1],f+=m[2],d+=m[3]),l){const e=new a(h,p),t=new a(f,p),r=new a(h,d),n=new a(f,d),i=u(l);let o=new a(0,0);c&&(o=new a(c[0],c[1])),e._rotateAround(i,o),t._rotateAround(i,o),r._rotateAround(i,o),n._rotateAround(i,o),h=Math.min(e.x,t.x,r.x,n.x),f=Math.max(e.x,t.x,r.x,n.x),p=Math.min(e.y,t.y,r.y,n.y),d=Math.max(e.y,t.y,r.y,n.y)}return e.emplaceBack(t.x,t.y,h,p,f,d,s,r,n,i),e.length-1}function ap(e){e.collisionPadding&&(e.top-=e.collisionPadding[1],e.bottom+=e.collisionPadding[3]);const t=e.bottom-e.top;return t>0?Math.max(10,t):null}function ip(e,t,r,n){const a=e.compareText;if(t in a){const e=a[t];for(let t=e.length-1;t>=0;t--)if(n.dist(e[t])<r)return!0}else a[t]=[];return a[t].push(n),!1}const op=Hl.VectorTileFeature.types,sp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function lp(e,t,r,n,a,i,o,s,l,c,u,p,d){const h=s?Math.min(ep,Math.round(s[0])):0,f=s?Math.min(ep,Math.round(s[1])):0;e.emplaceBack(t,r,Math.round(32*n),Math.round(32*a),i,o,(h<<1)+(l?1:0),f,16*c,16*u,256*p,256*d)}function cp(e,t,r){e.emplaceBack(t.x,t.y,r),e.emplaceBack(t.x,t.y,r),e.emplaceBack(t.x,t.y,r),e.emplaceBack(t.x,t.y,r)}function up(e){for(const t of e.sections)if(Wa(t.text))return!0;return!1}class pp{constructor(e){this.layoutVertexArray=new zi,this.indexArray=new Ni,this.programConfigurations=e,this.segments=new Vo,this.dynamicLayoutVertexArray=new Ri,this.opacityVertexArray=new Li,this.placedSymbolArray=new Qi}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,r,n){this.isEmpty()||(r&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,fc.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,mc.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,sp,!0),this.opacityVertexBuffer.itemSize=1),(r||n)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}sa("SymbolBuffers",pp);class dp{constructor(e,t,r){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new r,this.segments=new Vo,this.collisionVertexArray=new Fi,this.collisionVertexArrayExt=new Ri}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,gc.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,vc.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}sa("CollisionBuffers",dp);class hp{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ms([]),this.placementViewportMatrix=ms([]);const t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=wc(this.zoom,t["text-size"]),this.iconSizeData=wc(this.zoom,t["icon-size"]);const r=this.layers[0].layout,n=r.get("symbol-sort-key"),a=r.get("symbol-z-order");this.canOverlap=r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==a&&void 0!==n.constantOr(1),this.sortFeaturesByY=("viewport-y"===a||"auto"===a&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=r.get("text-writing-mode").map((e=>au[e])),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.sourceID=e.sourceID}createArrays(){this.text=new pp(new Ao(this.layers,this.zoom,(e=>/^text/.test(e)))),this.icon=new pp(new Ao(this.layers,this.zoom,(e=>/^icon/.test(e)))),this.glyphOffsetArray=new to,this.lineVertexArray=new ro,this.symbolInstances=new eo}calculateGlyphDependencies(e,t,r,n,a){for(let r=0;r<e.length;r++)if(t[e.charCodeAt(r)]=!0,n&&a){const n=Sc[e.charAt(r)];n&&(t[n.charCodeAt(0)]=!0)}}populate(e,t,r){const n=this.layers[0],a=n.layout,i=a.get("text-font"),o=a.get("text-field"),s=a.get("icon-image"),l=("constant"!==o.value.kind||o.value.value instanceof ht&&!o.value.value.isEmpty()||o.value.value.toString().length>0)&&("constant"!==i.value.kind||i.value.value.length>0),c="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,u=a.get("symbol-sort-key");if(this.features=[],!l&&!c)return;const p=t.iconDependencies,d=t.glyphDependencies,h=t.availableImages,f=new oi(this.zoom);for(const{feature:t,id:o,index:s,sourceLayerIndex:m}of e){const e=n._featureFilter.needGeometry,g=Go(t,e);if(!n._featureFilter.filter(f,g,r))continue;let v,y;if(e||(g.geometry=Ho(t)),l){const e=n.getValueAndResolveTokens("text-field",g,r,h),t=ht.factory(e);up(t)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===ni()||this.hasRTLText&&ii.isParsed())&&(v=Tc(t,n,g))}if(c){const e=n.getValueAndResolveTokens("icon-image",g,r,h);y=e instanceof ft?e:ft.fromString(e)}if(!v&&!y)continue;const b=this.sortFeaturesByKey?u.evaluate(g,{},r):void 0;if(this.features.push({id:o,text:v,icon:y,index:s,sourceLayerIndex:m,geometry:g.geometry,properties:t.properties,type:op[t.type],sortKey:b}),y&&(p[y.name]=!0),v){const e=i.evaluate(g,{},r).join(","),t="map"===a.get("text-rotation-alignment")&&"point"!==a.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(au.vertical)>=0;for(const r of v.sections)if(r.image)p[r.image.name]=!0;else{const n=Na(v.toString()),a=r.fontStack||e,i=d[a]=d[a]||{};this.calculateGlyphDependencies(r.text,i,t,this.allowVerticalPlacement,n)}}}"line"===a.get("symbol-placement")&&(this.features=function(e){const t={},r={},n=[];let a=0;function i(t){n.push(e[t]),a++}function o(e,t,a){const i=r[e];return delete r[e],r[t]=i,n[i].geometry[0].pop(),n[i].geometry[0]=n[i].geometry[0].concat(a[0]),i}function s(e,r,a){const i=t[r];return delete t[r],t[e]=i,n[i].geometry[0].shift(),n[i].geometry[0]=a[0].concat(n[i].geometry[0]),i}function l(e,t,r){const n=r?t[0][t[0].length-1]:t[0][0];return`${e}:${n.x}:${n.y}`}for(let c=0;c<e.length;c++){const u=e[c],p=u.geometry,d=u.text?u.text.toString():null;if(!d){i(c);continue}const h=l(d,p),f=l(d,p,!0);if(h in r&&f in t&&r[h]!==t[f]){const e=s(h,f,p),a=o(h,f,n[e].geometry);delete t[h],delete r[f],r[l(d,n[a].geometry,!0)]=a,n[e].geometry=null}else h in r?o(h,f,p):f in t?s(h,f,p):(i(c),t[h]=a-1,r[f]=a-1)}return n.filter((e=>e.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((e,t)=>e.sortKey-t.sortKey))}update(e,t,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,r),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,r))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const r=this.lineVertexArray.length;if(void 0!==e.segment){let r=e.dist(t[e.segment+1]),n=e.dist(t[e.segment]);const a={};for(let n=e.segment+1;n<t.length;n++)a[n]={x:t[n].x,y:t[n].y,tileUnitDistanceFromAnchor:r},n<t.length-1&&(r+=t[n+1].dist(t[n]));for(let r=e.segment||0;r>=0;r--)a[r]={x:t[r].x,y:t[r].y,tileUnitDistanceFromAnchor:n},r>0&&(n+=t[r-1].dist(t[r]));for(let e=0;e<t.length;e++){const t=a[e];this.lineVertexArray.emplaceBack(t.x,t.y,t.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}}addSymbols(e,t,r,n,a,i,o,s,l,c,u,p){const d=e.indexArray,h=e.layoutVertexArray,f=e.segments.prepareSegment(4*t.length,h,d,this.canOverlap?i.sortKey:void 0),m=this.glyphOffsetArray.length,g=f.vertexLength,v=this.allowVerticalPlacement&&o===au.vertical?Math.PI/2:0,y=i.text&&i.text.sections;for(let n=0;n<t.length;n++){const{tl:a,tr:o,bl:l,br:c,tex:u,pixelOffsetTL:m,pixelOffsetBR:g,minFontScaleX:b,minFontScaleY:_,glyphOffset:x,isSDF:w,sectionIndex:E}=t[n],C=f.vertexLength,k=x[1];lp(h,s.x,s.y,a.x,k+a.y,u.x,u.y,r,w,m.x,m.y,b,_),lp(h,s.x,s.y,o.x,k+o.y,u.x+u.w,u.y,r,w,g.x,m.y,b,_),lp(h,s.x,s.y,l.x,k+l.y,u.x,u.y+u.h,r,w,m.x,g.y,b,_),lp(h,s.x,s.y,c.x,k+c.y,u.x+u.w,u.y+u.h,r,w,g.x,g.y,b,_),cp(e.dynamicLayoutVertexArray,s,v),d.emplaceBack(C,C+1,C+2),d.emplaceBack(C+1,C+2,C+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(x[0]),n!==t.length-1&&E===t[n+1].sectionIndex||e.programConfigurations.populatePaintArrays(h.length,i,i.index,{},p,y&&y[E])}e.placedSymbolArray.emplaceBack(s.x,s.y,m,this.glyphOffsetArray.length-m,g,l,c,s.segment,r?r[0]:0,r?r[1]:0,n[0],n[1],o,0,!1,0,u,0)}_commitLayoutVertex(e,t,r,n,a){e.emplaceBack(t.x,t.y,r,n,Math.round(a.x),Math.round(a.y))}_addCollisionDebugVertices(e,t,r,n,i){const o=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray),s=o.vertexLength,l=i.anchorX,c=i.anchorY;for(let e=0;e<4;e++)r.collisionVertexArray.emplaceBack(0,0,0,0);r.collisionVertexArrayExt.emplaceBack(t,-e.padding,-e.padding),r.collisionVertexArrayExt.emplaceBack(t,e.padding,-e.padding),r.collisionVertexArrayExt.emplaceBack(t,e.padding,e.padding),r.collisionVertexArrayExt.emplaceBack(t,-e.padding,e.padding),this._commitLayoutVertex(r.layoutVertexArray,n,l,c,new a(e.x1,e.y1)),this._commitLayoutVertex(r.layoutVertexArray,n,l,c,new a(e.x2,e.y1)),this._commitLayoutVertex(r.layoutVertexArray,n,l,c,new a(e.x2,e.y2)),this._commitLayoutVertex(r.layoutVertexArray,n,l,c,new a(e.x1,e.y2)),o.vertexLength+=4;const u=r.indexArray;u.emplaceBack(s,s+1),u.emplaceBack(s+1,s+2),u.emplaceBack(s+2,s+3),u.emplaceBack(s+3,s),o.primitiveLength+=4}_addTextDebugCollisionBoxes(e,t,r,n,a,i){for(let o=n;o<a;o++){const n=r.get(o),a=this.getSymbolInstanceTextSize(e,i,t,o);this._addCollisionDebugVertices(n,a,this.textCollisionBox,n.anchorPoint,i)}}_addIconDebugCollisionBoxes(e,t,r,n,a,i){for(let o=n;o<a;o++){const n=r.get(o),a=this.getSymbolInstanceIconSize(e,t,o);this._addCollisionDebugVertices(n,a,this.iconCollisionBox,n.anchorPoint,i)}}generateCollisionDebugBuffers(e,t){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new dp(Bi,yc.members,Gi),this.iconCollisionBox=new dp(Bi,yc.members,Gi);const r=Cc(this.iconSizeData,e),n=Cc(this.textSizeData,e);for(let a=0;a<this.symbolInstances.length;a++){const i=this.symbolInstances.get(a);this._addTextDebugCollisionBoxes(n,e,t,i.textBoxStartIndex,i.textBoxEndIndex,i),this._addTextDebugCollisionBoxes(n,e,t,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i),this._addIconDebugCollisionBoxes(r,e,t,i.iconBoxStartIndex,i.iconBoxEndIndex,i),this._addIconDebugCollisionBoxes(r,e,t,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex,i)}}getSymbolInstanceTextSize(e,t,r,n){const a=this.text.placedSymbolArray.get(t.rightJustifiedTextSymbolIndex>=0?t.rightJustifiedTextSymbolIndex:t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.leftJustifiedTextSymbolIndex>=0?t.leftJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex>=0?t.verticalPlacedTextSymbolIndex:n),i=Ec(this.textSizeData,e,a)/_c;return this.tilePixelRatio*i}getSymbolInstanceIconSize(e,t,r){const n=this.icon.placedSymbolArray.get(r),a=Ec(this.iconSizeData,e,n);return this.tilePixelRatio*a}_commitDebugCollisionVertexUpdate(e,t,r){e.emplaceBack(t,-r,-r),e.emplaceBack(t,r,-r),e.emplaceBack(t,r,r),e.emplaceBack(t,-r,r)}_updateTextDebugCollisionBoxes(e,t,r,n,a,i){for(let o=n;o<a;o++){const n=r.get(o),a=this.getSymbolInstanceTextSize(e,i,t,o);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,a,n.padding)}}_updateIconDebugCollisionBoxes(e,t,r,n,a){for(let i=n;i<a;i++){const n=r.get(i),a=this.getSymbolInstanceIconSize(e,t,i);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,a,n.padding)}}updateCollisionDebugBuffers(e,t){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const r=Cc(this.iconSizeData,e),n=Cc(this.textSizeData,e);for(let a=0;a<this.symbolInstances.length;a++){const i=this.symbolInstances.get(a);this._updateTextDebugCollisionBoxes(n,e,t,i.textBoxStartIndex,i.textBoxEndIndex,i),this._updateTextDebugCollisionBoxes(n,e,t,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i),this._updateIconDebugCollisionBoxes(r,e,t,i.iconBoxStartIndex,i.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(r,e,t,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,t,r,n,a,i,o,s,l){const c={};for(let n=t;n<r;n++){const t=e.get(n);c.textBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,padding:t.padding,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.textFeatureIndex=t.featureIndex;break}for(let t=n;t<a;t++){const r=e.get(t);c.verticalTextBox={x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2,padding:r.padding,anchorPointX:r.anchorPointX,anchorPointY:r.anchorPointY},c.verticalTextFeatureIndex=r.featureIndex;break}for(let t=i;t<o;t++){const r=e.get(t);c.iconBox={x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2,padding:r.padding,anchorPointX:r.anchorPointX,anchorPointY:r.anchorPointY},c.iconFeatureIndex=r.featureIndex;break}for(let t=s;t<l;t++){const r=e.get(t);c.verticalIconBox={x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2,padding:r.padding,anchorPointX:r.anchorPointX,anchorPointY:r.anchorPointY},c.verticalIconFeatureIndex=r.featureIndex;break}return c}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const r=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,r.textBoxStartIndex,r.textBoxEndIndex,r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex,r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,t){const r=e.placedSymbolArray.get(t),n=r.vertexStartIndex+4*r.numGlyphs;for(let t=r.vertexStartIndex;t<n;t+=4)e.indexArray.emplaceBack(t,t+1,t+2),e.indexArray.emplaceBack(t+1,t+2,t+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),r=Math.cos(e),n=[],a=[],i=[];for(let e=0;e<this.symbolInstances.length;++e){i.push(e);const o=this.symbolInstances.get(e);n.push(0|Math.round(t*o.anchorX+r*o.anchorY)),a.push(o.featureIndex)}return i.sort(((e,t)=>n[e]-n[t]||a[t]-a[e])),i}addToSortKeyRanges(e,t){const r=this.sortKeyRanges[this.sortKeyRanges.length-1];r&&r.sortKey===t?r.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex),[t.rightJustifiedTextSymbolIndex,t.centerJustifiedTextSymbolIndex,t.leftJustifiedTextSymbolIndex].forEach(((e,t,r)=>{e>=0&&r.indexOf(e)===t&&this.addIndicesForPlacedSymbol(this.text,e)})),t.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,t.verticalPlacedTextSymbolIndex),t.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.placedIconSymbolIndex),t.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}sa("SymbolBucket",hp,{omit:["layers","collisionBoxArray","features","compareText"]}),hp.MAX_GLYPHS=65535,hp.addDynamicAttributes=cp;const fp=new _i({"symbol-placement":new mi($e.layout_symbol["symbol-placement"]),"symbol-spacing":new mi($e.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new mi($e.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new gi($e.layout_symbol["symbol-sort-key"]),"symbol-z-order":new mi($e.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new mi($e.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new mi($e.layout_symbol["icon-ignore-placement"]),"icon-optional":new mi($e.layout_symbol["icon-optional"]),"icon-rotation-alignment":new mi($e.layout_symbol["icon-rotation-alignment"]),"icon-size":new gi($e.layout_symbol["icon-size"]),"icon-text-fit":new mi($e.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new mi($e.layout_symbol["icon-text-fit-padding"]),"icon-image":new gi($e.layout_symbol["icon-image"]),"icon-rotate":new gi($e.layout_symbol["icon-rotate"]),"icon-padding":new mi($e.layout_symbol["icon-padding"]),"icon-keep-upright":new mi($e.layout_symbol["icon-keep-upright"]),"icon-offset":new gi($e.layout_symbol["icon-offset"]),"icon-anchor":new gi($e.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new mi($e.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new mi($e.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new mi($e.layout_symbol["text-rotation-alignment"]),"text-field":new gi($e.layout_symbol["text-field"]),"text-font":new gi($e.layout_symbol["text-font"]),"text-size":new gi($e.layout_symbol["text-size"]),"text-max-width":new gi($e.layout_symbol["text-max-width"]),"text-line-height":new gi($e.layout_symbol["text-line-height"]),"text-letter-spacing":new gi($e.layout_symbol["text-letter-spacing"]),"text-justify":new gi($e.layout_symbol["text-justify"]),"text-radial-offset":new gi($e.layout_symbol["text-radial-offset"]),"text-variable-anchor":new mi($e.layout_symbol["text-variable-anchor"]),"text-anchor":new gi($e.layout_symbol["text-anchor"]),"text-max-angle":new mi($e.layout_symbol["text-max-angle"]),"text-writing-mode":new mi($e.layout_symbol["text-writing-mode"]),"text-rotate":new gi($e.layout_symbol["text-rotate"]),"text-padding":new mi($e.layout_symbol["text-padding"]),"text-keep-upright":new mi($e.layout_symbol["text-keep-upright"]),"text-transform":new gi($e.layout_symbol["text-transform"]),"text-offset":new gi($e.layout_symbol["text-offset"]),"text-allow-overlap":new mi($e.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new mi($e.layout_symbol["text-ignore-placement"]),"text-optional":new mi($e.layout_symbol["text-optional"])});var mp={paint:new _i({"icon-opacity":new gi($e.paint_symbol["icon-opacity"]),"icon-color":new gi($e.paint_symbol["icon-color"]),"icon-halo-color":new gi($e.paint_symbol["icon-halo-color"]),"icon-halo-width":new gi($e.paint_symbol["icon-halo-width"]),"icon-halo-blur":new gi($e.paint_symbol["icon-halo-blur"]),"icon-translate":new mi($e.paint_symbol["icon-translate"]),"icon-translate-anchor":new mi($e.paint_symbol["icon-translate-anchor"]),"text-opacity":new gi($e.paint_symbol["text-opacity"]),"text-color":new gi($e.paint_symbol["text-color"],{runtimeType:Ye,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new gi($e.paint_symbol["text-halo-color"]),"text-halo-width":new gi($e.paint_symbol["text-halo-width"]),"text-halo-blur":new gi($e.paint_symbol["text-halo-blur"]),"text-translate":new mi($e.paint_symbol["text-translate"]),"text-translate-anchor":new mi($e.paint_symbol["text-translate-anchor"])}),layout:fp};class gp{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:Ge,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}sa("FormatSectionOverride",gp,{omit:["defaultValue"]});class vp extends $o{constructor(e){super(e,mp)}recalculate(e,t){super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const r=this.layout.get("text-writing-mode");if(r){const e=[];for(const t of r)e.indexOf(t)<0&&e.push(t);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,t,r,n){const a=this.layout.get(e).evaluate(t,{},r,n),i=this._unevaluatedLayout._values[e];return i.isDataDriven()||cn(i.value)||!a?a:function(e,t){return t.replace(/{([^{}]+)}/g,((t,r)=>r in e?String(e[r]):""))}(t.properties,a)}createBucket(e){return new hp(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of mp.paint.overridableProperties){if(!vp.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),r=new gp(t),n=new ln(r,t.property.specification);let a=null;a="constant"===t.value.kind||"source"===t.value.kind?new pn("source",n):new dn("composite",n,t.value.zoomStops,t.value._interpolationType),this.paint._values[e]=new hi(t.property,a,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,r){return!(!this.layout||t.isDataDriven()||r.isDataDriven())&&vp.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const r=e.get("text-field"),n=mp.paint.properties[t];let a=!1;const i=e=>{for(const t of e)if(n.overrides&&n.overrides.hasOverride(t))return void(a=!0)};if("constant"===r.value.kind&&r.value.value instanceof ht)i(r.value.value.sections);else if("source"===r.value.kind){const e=t=>{a||(t instanceof bt&&vt(t.value)===et?i(t.value.sections):t instanceof Et?i(t.sections):t.eachChild(e))},t=r.value;t._styleExpression&&e(t._styleExpression.expression)}return a}getProgramConfiguration(e){return new Io(this,e)}}var yp={paint:new _i({"background-color":new mi($e.paint_background["background-color"]),"background-pattern":new yi($e.paint_background["background-pattern"]),"background-opacity":new mi($e.paint_background["background-opacity"])})},bp={paint:new _i({"raster-opacity":new mi($e.paint_raster["raster-opacity"]),"raster-hue-rotate":new mi($e.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new mi($e.paint_raster["raster-brightness-min"]),"raster-brightness-max":new mi($e.paint_raster["raster-brightness-max"]),"raster-saturation":new mi($e.paint_raster["raster-saturation"]),"raster-contrast":new mi($e.paint_raster["raster-contrast"]),"raster-resampling":new mi($e.paint_raster["raster-resampling"]),"raster-fade-duration":new mi($e.paint_raster["raster-fade-duration"])})};class _p extends $o{constructor(e){super(e,{}),this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var xp={paint:new _i({"sky-type":new mi($e.paint_sky["sky-type"]),"sky-atmosphere-sun":new mi($e.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new mi($e.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new mi($e.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new mi($e.paint_sky["sky-gradient-radius"]),"sky-gradient":new bi($e.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new mi($e.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new mi($e.paint_sky["sky-atmosphere-color"]),"sky-opacity":new mi($e.paint_sky["sky-opacity"])})};function wp(e,t,r){const n=_s(0,0,1),a=Os(As());return function(e,t,r){r*=.5;var n=t[0],a=t[1],i=t[2],o=t[3],s=Math.sin(r),l=Math.cos(r);e[0]=n*l-i*s,e[1]=a*l+o*s,e[2]=i*l+n*s,e[3]=o*l-a*s}(a,a,r?-u(e)+Math.PI:u(e)),zs(a,a,-u(t)),ks(n,n,a),Cs(n,n)}const Ep={circle:class extends $o{constructor(e){super(e,ds)}createBucket(e){return new Xo(e)}queryRadius(e){const t=e;return ss("circle-radius",this,t)+ss("circle-stroke-width",this,t)+ls(this.paint.get("circle-translate"))}queryIntersectsFeature(e,t,r,n,a,i,o,s){const l="map"===this.paint.get("circle-pitch-alignment");if(l&&e.queryGeometry.isAboveHorizon)return!1;const c=us(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),i.angle,e.pixelToTileUnitsFactor),u=this.paint.get("circle-radius").evaluate(t,r)+this.paint.get("circle-stroke-width").evaluate(t,r),p=l?u*e.pixelToTileUnitsFactor:u;for(const t of n)for(const r of t){const t=r.add(c),n=s&&i.elevation?i.elevation.exaggeration()*s.getElevationAt(t.x,t.y,!0):0,a=l?t:Rs(t,n,o),u=l?e.tilespaceRays.map((e=>Bs(e,n))):e.queryGeometry.screenGeometry;let d=p;const h=Is([],[r.x,r.y,n,1],o);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?d*=h[3]/i.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(d*=i.cameraToCenterDistance/h[3]),Yo(u,a,d))return!0}return!1}getProgramIds(){return["circle"]}getProgramConfiguration(e){return new Io(this,e)}},heatmap:class extends $o{createBucket(e){return new $s(e)}constructor(e){super(e,qs),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Hs({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(e){return new Io(this,e)}},hillshade:class extends $o{constructor(e){super(e,Gs)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}getProgramConfiguration(e){return new Io(this,e)}},fill:class extends $o{constructor(e){super(e,zl)}getProgramIds(){const e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),r=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&r.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),r}getProgramConfiguration(e){return new Io(this,e)}recalculate(e,t){super.recalculate(e,t);const r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new Al(e)}queryRadius(){return ls(this.paint.get("fill-translate"))}queryIntersectsFeature(e,t,r,n,a,i){return!e.queryGeometry.isAboveHorizon&&Ko(cs(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),i.angle,e.pixelToTileUnitsFactor),n)}isTileClipped(){return!0}},"fill-extrusion":class extends $o{constructor(e){super(e,Ql)}createBucket(e){return new Yl(e)}queryRadius(){return ls(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(e){return new Io(this,e)}queryIntersectsFeature(e,t,r,n,i,o,s,l,c){const u=us(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),p=this.paint.get("fill-extrusion-height").evaluate(t,r),d=this.paint.get("fill-extrusion-base").evaluate(t,r),h=[0,0],f=l&&o.elevation,m=o.elevation?o.elevation.exaggeration():1;if(f){const t=e.tile.getBucket(this).centroidVertexArray,r=c+1;if(r<t.length){const e=t.get(r);h[0]=e.a_centroid_pos0,h[1]=e.a_centroid_pos1}}if(0===h[0]&&1===h[1])return!1;const g=function(e,t,r,n,i,o,s,l,c){return o?function(e,t,r,n,a,i,o,s,l){const c=[],u=[],p=[0,0,0,1];for(const d of e){const e=[],h=[];for(const c of d){const u=c.x+n.x,d=c.y+n.y,f=rc(u,d,t,r,i,o,s,l);p[0]=u,p[1]=d,p[2]=f.base,p[3]=1,Is(p,p,a),p[3]=Math.max(p[3],1e-5);const m=tc([p[0]/p[3],p[1]/p[3],p[2]/p[3]]);p[0]=u,p[1]=d,p[2]=f.top,p[3]=1,Is(p,p,a),p[3]=Math.max(p[3],1e-5);const g=tc([p[0]/p[3],p[1]/p[3],p[2]/p[3]]);e.push(m),h.push(g)}c.push(e),u.push(h)}return[c,u]}(e,t,r,n,i,o,s,l,c):function(e,t,r,n,i){const o=[],s=[],l=i[8]*t,c=i[9]*t,u=i[10]*t,p=i[11]*t,d=i[8]*r,h=i[9]*r,f=i[10]*r,m=i[11]*r;for(const t of e){const e=[],r=[];for(const o of t){const t=o.x+n.x,s=o.y+n.y,g=i[0]*t+i[4]*s+i[12],v=i[1]*t+i[5]*s+i[13],y=i[2]*t+i[6]*s+i[14],b=i[3]*t+i[7]*s+i[15],_=g+l,x=v+c,w=y+u,E=Math.max(b+p,1e-5),C=g+d,k=v+h,T=y+f,S=Math.max(b+m,1e-5),P=new a(_/E,x/E);P.z=w/E,e.push(P);const M=new a(C/S,k/S);M.z=T/S,r.push(M)}o.push(e),s.push(r)}return[o,s]}(e,t,r,n,i)}(n,d,p,u,s,f?l:null,h,m,o.center.lat),v=e.queryGeometry;return function(e,t,r){let n=1/0;Ko(r,t)&&(n=ec(r,t[0]));for(let a=0;a<t.length;a++){const i=t[a],o=e[a];for(let e=0;e<i.length-1;e++){const t=i[e],a=[t,i[e+1],o[e+1],o[e],t];Zo(r,a)&&(n=Math.min(n,ec(r,a)))}}return n!==1/0&&n}(g[0],g[1],v.isPointQuery()?v.screenBounds:v.screenGeometry)}},line:class extends $o{constructor(e){super(e,pc),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(e){if("line-gradient"===e){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof tr,this.gradientVersion=(this.gradientVersion+1)%s}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=dc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new cc(e)}getProgramIds(){const e=this.paint.get("line-dasharray"),t=this.paint.get("line-pattern").constantOr(1),r=this.paint.get("line-gradient");return[t?"linePattern":e?"lineSDF":r?"lineGradient":"line"]}getProgramConfiguration(e){return new Io(this,e)}queryRadius(e){const t=e,r=hc(ss("line-width",this,t),ss("line-gap-width",this,t)),n=ss("line-offset",this,t);return r/2+Math.abs(n)+ls(this.paint.get("line-translate"))}queryIntersectsFeature(e,t,r,n,i,o){if(e.queryGeometry.isAboveHorizon)return!1;const s=cs(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),l=e.pixelToTileUnitsFactor/2*hc(this.paint.get("line-width").evaluate(t,r),this.paint.get("line-gap-width").evaluate(t,r)),c=this.paint.get("line-offset").evaluate(t,r);return c&&(n=function(e,t){const r=[],n=new a(0,0);for(let a=0;a<e.length;a++){const i=e[a],o=[];for(let e=0;e<i.length;e++){const r=i[e-1],a=i[e],s=i[e+1],l=0===e?n:a.sub(r)._unit()._perp(),c=e===i.length-1?n:s.sub(a)._unit()._perp(),u=l._add(c)._unit();u._mult(1/(u.x*c.x+u.y*c.y)),o.push(u._mult(t)._add(a))}r.push(o)}return r}(n,c*e.pixelToTileUnitsFactor)),function(e,t,r){for(let n=0;n<t.length;n++){const a=t[n];if(e.length>=3)for(let t=0;t<a.length;t++)if(as(e,a[t]))return!0;if(Qo(e,a,r))return!0}return!1}(s,n,l)}isTileClipped(){return!0}},symbol:vp,background:class extends $o{constructor(e){super(e,yp)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends $o{constructor(e){super(e,bp)}getProgramIds(){return["raster"]}},sky:class extends $o{constructor(e){super(e,xp),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Hs({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}}getCenter(e,t){const r=this.paint.get("sky-type");if("atmosphere"===r){const r=this.paint.get("sky-atmosphere-sun"),n=!r,a=e.style.light,i=a.properties.get("position");return n&&"viewport"===a.properties.get("anchor")&&A("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),n?wp(i.azimuthal,90-i.polar,t):wp(r[0],90-r[1],t)}if("gradient"===r){const e=this.paint.get("sky-gradient-center");return wp(e[0],90-e[1],t)}}is3D(){return!1}isSky(){return!0}markSkyboxValid(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}}},{HTMLImageElement:Cp,HTMLCanvasElement:kp,HTMLVideoElement:Tp,ImageData:Sp,ImageBitmap:Pp}=o;class Mp{constructor(e,t,r,n){this.context=e,this.format=r,this.texture=e.gl.createTexture(),this.update(t,n)}update(e,t,r){const{width:n,height:a}=e,i=!(this.size&&this.size[0]===n&&this.size[1]===a||r),{context:o}=this,{gl:s}=o;if(this.useMipmap=Boolean(t&&t.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!t||!1!==t.premultiply)),i)this.size=[n,a],e instanceof Cp||e instanceof kp||e instanceof Tp||e instanceof Sp||Pp&&e instanceof Pp?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,e):s.texImage2D(s.TEXTURE_2D,0,this.format,n,a,0,this.format,s.UNSIGNED_BYTE,e.data);else{const{x:t,y:i}=r||{x:0,y:0};e instanceof Cp||e instanceof kp||e instanceof Tp||e instanceof Sp||Pp&&e instanceof Pp?s.texSubImage2D(s.TEXTURE_2D,0,t,i,s.RGBA,s.UNSIGNED_BYTE,e):s.texSubImage2D(s.TEXTURE_2D,0,t,i,n,a,s.RGBA,s.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)}bind(e,t,r){const{context:n}=this,{gl:a}=n;a.bindTexture(a.TEXTURE_2D,this.texture),r!==a.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(r=a.LINEAR),e!==this.filter&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,e),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,r||e),this.filter=e),t!==this.wrap&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,t),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class Ip{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof Op?new Op(e.lng,e.lat):Op.convert(e),this}setSouthWest(e){return this._sw=e instanceof Op?new Op(e.lng,e.lat):Op.convert(e),this}extend(e){const t=this._sw,r=this._ne;let n,a;if(e instanceof Op)n=e,a=e;else{if(!(e instanceof Ip))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(Ip.convert(e)):this.extend(Op.convert(e)):this;if(n=e._sw,a=e._ne,!n||!a)return this}return t||r?(t.lng=Math.min(n.lng,t.lng),t.lat=Math.min(n.lat,t.lat),r.lng=Math.max(a.lng,r.lng),r.lat=Math.max(a.lat,r.lat)):(this._sw=new Op(n.lng,n.lat),this._ne=new Op(a.lng,a.lat)),this}getCenter(){return new Op((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Op(this.getWest(),this.getNorth())}getSouthEast(){return new Op(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:t,lat:r}=Op.convert(e);let n=this._sw.lng<=t&&t<=this._ne.lng;return this._sw.lng>this._ne.lng&&(n=this._sw.lng>=t&&t>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&n}static convert(e){return!e||e instanceof Ip?e:new Ip(e)}}const Ap=6371008.8;class Op{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error(`Invalid LngLat object: (${e}, ${t})`);if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Op(g(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const t=Math.PI/180,r=this.lat*t,n=e.lat*t,a=Math.sin(r)*Math.sin(n)+Math.cos(r)*Math.cos(n)*Math.cos((e.lng-this.lng)*t);return Ap*Math.acos(Math.min(a,1))}toBounds(e=0){const t=360*e/40075017,r=t/Math.cos(Math.PI/180*this.lat);return new Ip(new Op(this.lng-r,this.lat-t),new Op(this.lng+r,this.lat+t))}static convert(e){if(e instanceof Op)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Op(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Op(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const zp=2*Math.PI*Ap;function Rp(e){return zp*Math.cos(e*Math.PI/180)}function Lp(e){return(180+e)/360}function Dp(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Bp(e,t){return e/Rp(t)}function $p(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function Fp(e,t){return e*Rp($p(t))}class Np{constructor(e,t,r=0){this.x=+e,this.y=+t,this.z=+r}static fromLngLat(e,t=0){const r=Op.convert(e);return new Np(Lp(r.lng),Dp(r.lat),Bp(t,r.lat))}toLngLat(){return new Op(360*this.x-180,$p(this.y))}toAltitude(){return Fp(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/zp*(e=$p(this.y),1/Math.cos(e*Math.PI/180));var e}}class Vp{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.image=new js({width:e,height:t}),this.positions={},this.uploaded=!1}getDash(e,t){const r=this.getKey(e,t);return this.positions[r]}trim(){const e=this.width,t=this.height=E(this.nextRow);this.image.resize({width:e,height:t})}getKey(e,t){return e.join(",")+t}getDashRanges(e,t,r){const n=[];let a=e.length%2==1?-e[e.length-1]*r:0,i=e[0]*r,o=!0;n.push({left:a,right:i,isDash:o,zeroLength:0===e[0]});let s=e[0];for(let t=1;t<e.length;t++){o=!o;const l=e[t];a=s*r,s+=l,i=s*r,n.push({left:a,right:i,isDash:o,zeroLength:0===l})}return n}addRoundDash(e,t,r){const n=t/2;for(let t=-r;t<=r;t++){const a=this.width*(this.nextRow+r+t);let i=0,o=e[i];for(let s=0;s<this.width;s++){s/o.right>1&&(o=e[++i]);const l=Math.abs(s-o.left),c=Math.abs(s-o.right),u=Math.min(l,c);let p;const d=t/r*(n+1);if(o.isDash){const e=n-Math.abs(d);p=Math.sqrt(u*u+e*e)}else p=n-Math.sqrt(u*u+d*d);this.image.data[a+s]=Math.max(0,Math.min(255,p+128))}}}addRegularDash(e,t){for(let t=e.length-1;t>=0;--t){const r=e[t],n=e[t+1];r.zeroLength?e.splice(t,1):n&&n.isDash===r.isDash&&(n.left=r.left,e.splice(t,1))}const r=e[0],n=e[e.length-1];r.isDash===n.isDash&&(r.left=n.left-this.width,n.right=r.right+this.width);const a=this.width*this.nextRow;let i=0,o=e[i];for(let r=0;r<this.width;r++){r/o.right>1&&(o=e[++i]);const n=Math.abs(r-o.left),s=Math.abs(r-o.right),l=Math.min(n,s);this.image.data[a+r]=Math.max(0,Math.min(255,(o.isDash?l:-l)+t+128))}}addDash(e,t){const r=this.getKey(e,t);if(this.positions[r])return this.positions[r];const n="round"===t,a=n?7:0,i=2*a+1;if(this.nextRow+i>this.height)return A("LineAtlas out of space"),null;0===e.length&&e.push(1);let o=0;for(let t=0;t<e.length;t++)e[t]<0&&(A("Negative value is found in line dasharray, replacing values with 0"),e[t]=0),o+=e[t];if(0!==o){const r=this.width/o,i=this.getDashRanges(e,this.width,r);n?this.addRoundDash(i,r,a):this.addRegularDash(i,"square"===t?.5*r:0)}const s=this.nextRow+a;this.nextRow+=i;const l={tl:[s,a],br:[o,0]};return this.positions[r]=l,l}}sa("LineAtlas",Vp);class jp{constructor(e){this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){delete this._channel,this._callback=()=>{}}}const Up=o.performance;function qp(e){const t=e?e.url.toString():void 0;return Up.getEntriesByName(t)}class Hp{constructor(){this.tasks={},this.taskQueue=[],k(["process"],this),this.invoker=new jp(this.process),this.nextId=0}add(e,t){const r=this.nextId++,n=function({type:e,isSymbolTile:t,zoom:r}){return r=r||0,"message"===e?0:"maybePrepare"!==e||t?"parseTile"!==e||t?"parseTile"===e&&t?300-r:"maybePrepare"===e&&t?400-r:500:200-r:100-r}(t);if(0===n){R();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[r]={fn:e,metadata:t,priority:n,id:r},this.taskQueue.push(r),this.invoker.trigger(),{cancel:()=>{delete this.tasks[r]}}}process(){R();try{if(this.taskQueue=this.taskQueue.filter((e=>!!this.tasks[e])),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const t=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!t)return;t.fn()}finally{}}pick(){let e=null,t=1/0;for(let r=0;r<this.taskQueue.length;r++){const n=this.tasks[this.taskQueue[r]];n.priority<t&&(t=n.priority,e=r)}if(null===e)return null;const r=this.taskQueue[e];return this.taskQueue.splice(e,1),r}remove(){this.invoker.remove()}}function Gp(e,t,r){var n=2*Math.PI*6378137/256/Math.pow(2,r);return[e*n-2*Math.PI*6378137/2,t*n-2*Math.PI*6378137/2]}class Wp{constructor(e,t,r){this.z=e,this.x=t,this.y=r,this.key=Yp(0,e,e,t,r)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t){const r=(a=this.y,i=this.z,o=Gp(256*(n=this.x),256*(a=Math.pow(2,i)-a-1),i),s=Gp(256*(n+1),256*(a+1),i),o[0]+","+o[1]+","+s[0]+","+s[1]);var n,a,i,o,s;const l=function(e,t,r){let n,a="";for(let i=e;i>0;i--)n=1<<i-1,a+=(t&n?1:0)+(r&n?2:0);return a}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",r)}getTilePoint(e){const t=Math.pow(2,this.z);return new a((e.x*t-this.x)*jo,(e.y*t-this.y)*jo)}getTileVec3(e){const t=Math.pow(2,this.z);return _s((e.x*t-this.x)*jo,(e.y*t-this.y)*jo,Fp(e.z,e.y))}toString(){return`${this.z}/${this.x}/${this.y}`}}class Xp{constructor(e,t){this.wrap=e,this.canonical=t,this.key=Yp(e,t.z,t.z,t.x,t.y)}}class Zp{constructor(e,t,r,n,a){this.overscaledZ=e,this.wrap=t,this.canonical=new Wp(r,+n,+a),this.key=0===t&&e===r?this.canonical.key:Yp(t,e,r,n,a)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const t=this.canonical.z-e;return e>this.canonical.z?new Zp(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Zp(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e,t=!0){if(this.overscaledZ===e&&t)return this.key;if(e>this.canonical.z)return Yp(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y);{const r=this.canonical.z-e;return Yp(this.wrap*+t,e,e,this.canonical.x>>r,this.canonical.y>>r)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new Zp(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,r=2*this.canonical.x,n=2*this.canonical.y;return[new Zp(t,this.wrap,t,r,n),new Zp(t,this.wrap,t,r+1,n),new Zp(t,this.wrap,t,r,n+1),new Zp(t,this.wrap,t,r+1,n+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Zp(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Zp(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Xp(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new Np(e.x-this.wrap,e.y))}getTileVec3(e){return this.canonical.getTileVec3(new Np(e.x-this.wrap,e.y,e.z))}}function Yp(e,t,r,n,a){const i=1<<Math.min(r,22);let o=i*(a%i)+n%i;return e&&r<22&&(o+=i*i*((e<0?-2*e-1:2*e)%(1<<2*(22-r)))),16*(32*o+r)+(t-r)}sa("CanonicalTileID",Wp),sa("OverscaledTileID",Zp,{omit:["projMatrix"]});class Kp{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const r=e[t];this._stringToNumber[r]=t,this._numberToString[t]=r}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}class Qp{constructor(e,t,r,n,a){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=r,e._y=n,this.properties=e.properties,this.id=a}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e}}var Jp=ki([{name:"a_pos",type:"Int16",components:2}]);class ed{constructor(e,t,r){this.tileID=e,this.uid=x(),this.uses=0,this.tileSize=t,this.tileZoom=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const t=e+this.timeAdded;t<j.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}loadVectorData(e,t,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){const r={};if(!t)return r;for(const n of e){const e=n.layerIds.map((e=>t.getLayer(e))).filter(Boolean);if(0!==e.length){n.layers=e,n.stateDependentLayerIds&&(n.stateDependentLayers=n.stateDependentLayerIds.map((t=>e.filter((e=>e.id===t))[0])));for(const t of e)r[t.id]=n}}return r}(e.buckets,t.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const t=this.buckets[e];if(t instanceof hp){if(this.hasSymbolBuckets=!0,!r)break;t.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const t=this.buckets[e];if(t instanceof hp&&t.hasRTLText){this.hasRTLText=!0,ii.isLoading()||ii.isLoaded()||"deferred"!==ni()||ai();break}}this.queryPadding=0;for(const e in this.buckets){const r=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(e).queryRadius(r))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new Yi}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const t in this.buckets){const r=this.buckets[t];r.uploadPending()&&r.upload(e)}const t=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Mp(e,this.imageAtlas.image,t.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Mp(e,this.glyphAtlasImage,t.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Mp(e,this.lineAtlas.image,t.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,r,n,a,i,o,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:n,pixelPosMatrix:o,transform:i,params:a},e,t,r):{}}querySourceFeatures(e,t){const r=this.latestFeatureIndex;if(!r||!r.rawTileData)return;const n=r.loadVTLayers(),a=t?t.sourceLayer:"",i=n._geojsonTileLayer||n[a];if(!i)return;const o=Cn(t&&t.filter),{z:s,x:l,y:c}=this.tileID.canonical,u={z:s,x:l,y:c};for(let t=0;t<i.length;t++){const n=i.feature(t);if(o.needGeometry){const e=Go(n,!0);if(!o.filter(new oi(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!o.filter(new oi(this.tileID.overscaledZ),n))continue;const p=r.getId(n,a),d=new Qp(n,s,l,c,p);d.tile=u,e.push(d)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const t=this.expirationTime;if(e.cacheControl){const t=L(e.cacheControl);t["max-age"]&&(this.expirationTime=Date.now()+1e3*t["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const e=Date.now();let r=!1;if(this.expirationTime>e)r=!1;else if(t)if(this.expirationTime<t)r=!0;else{const n=this.expirationTime-t;n?this.expirationTime=e+Math.max(n,3e4):r=!0}else r=!0;r?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,t){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length)return;const r=this.latestFeatureIndex.loadVTLayers();for(const n in this.buckets){if(!t.style.hasLayer(n))continue;const a=this.buckets[n],i=a.layers[0].sourceLayer||"_geojsonTileLayer",o=r[i],s=e[i];if(!o||!s||0===Object.keys(s).length)continue;a.update(s,o,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=t&&t.style&&t.style.getLayer(n);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(a)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<j.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=j.now()+e}setDependencies(e,t){const r={};for(const e of t)r[e]=!0;this.dependencies[e]=r}hasDependency(e,t){for(const r of e){const e=this.dependencies[r];if(e)for(const r of t)if(e[r])return!0}return!1}clearQueryDebugViz(){}}class td{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,t,r){const n=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][n]=this.stateChanges[e][n]||{},b(this.stateChanges[e][n],r),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==n&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][n]){this.deletedStates[e][n]={};for(const t in this.state[e][n])r[t]||(this.deletedStates[e][n][t]=null)}else for(const t in r)this.deletedStates[e]&&this.deletedStates[e][n]&&null===this.deletedStates[e][n][t]&&delete this.deletedStates[e][n][t]}removeFeatureState(e,t,r){if(null===this.deletedStates[e])return;const n=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},r&&void 0!==t)null!==this.deletedStates[e][n]&&(this.deletedStates[e][n]=this.deletedStates[e][n]||{},this.deletedStates[e][n][r]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][n])for(r in this.deletedStates[e][n]={},this.stateChanges[e][n])this.deletedStates[e][n][r]=null;else this.deletedStates[e][n]=null;else this.deletedStates[e]=null}getState(e,t){const r=String(t),n=b({},(this.state[e]||{})[r],(this.stateChanges[e]||{})[r]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const r=this.deletedStates[e][t];if(null===r)return{};for(const e in r)delete n[e]}return n}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(e,t){const r={};for(const e in this.stateChanges){this.state[e]=this.state[e]||{};const t={};for(const r in this.stateChanges[e])this.state[e][r]||(this.state[e][r]={}),b(this.state[e][r],this.stateChanges[e][r]),t[r]=this.state[e][r];r[e]=t}for(const e in this.deletedStates){this.state[e]=this.state[e]||{};const t={};if(null===this.deletedStates[e])for(const r in this.state[e])t[r]={},this.state[e][r]={};else for(const r in this.deletedStates[e]){if(null===this.deletedStates[e][r])this.state[e][r]={};else for(const t of Object.keys(this.deletedStates[e][r]))delete this.state[e][r][t];t[r]=this.state[e][r]}r[e]=r[e]||{},b(r[e],t)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(const n in e)e[n].setFeatureState(r,t)}}class rd{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,t){const r=this.toIdx(e,t);return{min:this.minimums[r],max:this.maximums[r]}}isLeaf(e,t){return this.leaves[this.toIdx(e,t)]}toIdx(e,t){return t*this.size+e}}function nd(e,t,r,n){let a=0,i=Number.MAX_VALUE;for(let o=0;o<3;o++)if(Math.abs(n[o])<1e-15){if(r[o]<e[o]||r[o]>t[o])return null}else{const s=1/n[o];let l=(e[o]-r[o])*s,c=(t[o]-r[o])*s;if(l>c){const e=l;l=c,c=e}if(l>a&&(a=l),c<i&&(i=c),a>i)return null}return a}function ad(e,t,r,n,a,i,o,s,l,c,u){const p=n-e,d=a-t,h=i-r,f=o-e,m=s-t,g=l-r,v=u[1]*g-u[2]*m,y=u[2]*f-u[0]*g,b=u[0]*m-u[1]*f,_=p*v+d*y+h*b;if(Math.abs(_)<1e-15)return null;const x=1/_,w=c[0]-e,E=c[1]-t,C=c[2]-r,k=(w*v+E*y+C*b)*x;if(k<0||k>1)return null;const T=E*h-C*d,S=C*p-w*h,P=w*d-E*p,M=(u[0]*T+u[1]*S+u[2]*P)*x;return M<0||k+M>1?null:(f*T+m*S+g*P)*x}function id(e,t,r){return(e-t)/(r-t)}function od(e,t,r,n,a,i,o,s,l){const c=1<<r,u=i-n,p=o-a,d=(e+1)/c*u+n,h=(t+0)/c*p+a,f=(t+1)/c*p+a;s[0]=(e+0)/c*u+n,s[1]=h,l[0]=d,l[1]=f}class sd{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const t=function(e){const t=Math.ceil(Math.log2(e.dim/8)),r=[];let n=Math.ceil(Math.pow(2,t));const a=1/n,i=(e,t,r,n,a)=>{const i=n?1:0,o=(e+1)*r-i,s=t*r,l=(t+1)*r-i;a[0]=e*r,a[1]=s,a[2]=o,a[3]=l};let o=new rd(n);const s=[];for(let t=0;t<n*n;t++){i(t%n,Math.floor(t/n),a,!1,s);const r=cd(s[0],s[1],e),l=cd(s[2],s[1],e),c=cd(s[2],s[3],e),u=cd(s[0],s[3],e);o.minimums.push(Math.min(r,l,c,u)),o.maximums.push(Math.max(r,l,c,u)),o.leaves.push(1)}for(r.push(o),n/=2;n>=1;n/=2){const e=r[r.length-1];o=new rd(n);for(let t=0;t<n*n;t++){i(t%n,Math.floor(t/n),2,!0,s);const r=e.getElevation(s[0],s[1]),a=e.getElevation(s[2],s[1]),l=e.getElevation(s[2],s[3]),c=e.getElevation(s[0],s[3]),u=e.isLeaf(s[0],s[1]),p=e.isLeaf(s[2],s[1]),d=e.isLeaf(s[2],s[3]),h=e.isLeaf(s[0],s[3]),f=Math.min(r.min,a.min,l.min,c.min),m=Math.max(r.max,a.max,l.max,c.max),g=u&&p&&d&&h;o.maximums.push(m),o.minimums.push(f),o.leaves.push(m-f<=5&&g?1:0)}r.push(o)}return r}(this.dem),r=t.length-1,n=t[r];this._addNode(n.minimums[0],n.maximums[0],n.leaves[0]),this._construct(t,0,0,r,0)}raycastRoot(e,t,r,n,a,i,o=1){return nd([e,t,-100],[r,n,this.maximums[0]*o],a,i)}raycast(e,t,r,n,a,i,o=1){if(!this.nodeCount)return null;const s=this.raycastRoot(e,t,r,n,a,i,o);if(null==s)return null;const l=[],c=[],u=[],p=[],d=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];for(;d.length>0;){const{idx:s,t:h,nodex:f,nodey:m,depth:g}=d.pop();if(this.leaves[s]){od(f,m,g,e,t,r,n,u,p);const s=1<<g,l=(f+0)/s,c=(f+1)/s,d=(m+0)/s,v=(m+1)/s,y=cd(l,d,this.dem)*o,b=cd(c,d,this.dem)*o,_=cd(c,v,this.dem)*o,x=cd(l,v,this.dem)*o,w=ad(u[0],u[1],y,p[0],u[1],b,p[0],p[1],_,a,i),E=ad(p[0],p[1],_,u[0],p[1],x,u[0],u[1],y,a,i),C=Math.min(null!==w?w:Number.MAX_VALUE,null!==E?E:Number.MAX_VALUE);if(C!==Number.MAX_VALUE)return C;{const e=Es([],a,i,h);if(ld(y,b,x,_,id(e[0],u[0],p[0]),id(e[1],u[1],p[1]))>=e[2])return h}continue}let v=0;for(let d=0;d<this._siblingOffset.length;d++){od((f<<1)+this._siblingOffset[d][0],(m<<1)+this._siblingOffset[d][1],g+1,e,t,r,n,u,p),u[2]=-100,p[2]=this.maximums[this.childOffsets[s]+d]*o;const h=nd(u,p,a,i);if(null!=h){const e=h;l[d]=e;let t=!1;for(let r=0;r<v&&!t;r++)e>=l[c[r]]&&(c.splice(r,0,d),t=!0);t||(c[v]=d),v++}}for(let e=0;e<v;e++){const t=c[e];d.push({idx:this.childOffsets[s]+t,t:l[t],nodex:(f<<1)+this._siblingOffset[t][0],nodey:(m<<1)+this._siblingOffset[t][1],depth:g+1})}}return null}_addNode(e,t,r){return this.minimums.push(e),this.maximums.push(t),this.leaves.push(r),this.childOffsets.push(0),this.nodeCount++}_construct(e,t,r,n,a){if(1===e[n].isLeaf(t,r))return;this.childOffsets[a]||(this.childOffsets[a]=this.nodeCount);const i=n-1,o=e[i];let s,l=0;for(let e=0;e<this._siblingOffset.length;e++){const n=2*t+this._siblingOffset[e][0],a=2*r+this._siblingOffset[e][1],i=o.getElevation(n,a),c=o.isLeaf(n,a),u=this._addNode(i.min,i.max,c);c&&(l|=1<<e),s||(s=u)}for(let n=0;n<this._siblingOffset.length;n++)l&1<<n||this._construct(e,2*t+this._siblingOffset[n][0],2*r+this._siblingOffset[n][1],i,s+n)}}function ld(e,t,r,n,a,i){return rr(rr(e,r,i),rr(t,n,i),a)}function cd(e,t,r){const n=r.dim,a=m(e*n-.5,0,n-1),i=m(t*n-.5,0,n-1),o=Math.floor(a),s=Math.floor(i),l=Math.min(o+1,n-1),c=Math.min(s+1,n-1);return ld(r.get(o,s),r.get(l,s),r.get(o,c),r.get(l,c),a-o,i-s)}const ud={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class pd{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,t,r,n=!1,a=!1){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return A(`"${r}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=t.height;const i=this.dim=t.height-2;if(this.data=new Uint32Array(t.data.buffer),this.encoding=r||"mapbox",this.borderReady=n,!n){for(let e=0;e<i;e++)this.data[this._idx(-1,e)]=this.data[this._idx(0,e)],this.data[this._idx(i,e)]=this.data[this._idx(i-1,e)],this.data[this._idx(e,-1)]=this.data[this._idx(e,0)],this.data[this._idx(e,i)]=this.data[this._idx(e,i-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(i,-1)]=this.data[this._idx(i-1,0)],this.data[this._idx(-1,i)]=this.data[this._idx(0,i-1)],this.data[this._idx(i,i)]=this.data[this._idx(i-1,i-1)],a&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new sd(this)}get(e,t,r=!1){const n=new Uint8Array(this.data.buffer);r&&(e=m(e,-1,this.dim),t=m(t,-1,this.dim));const a=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(n[a],n[a+1],n[a+2])}static getUnpackVector(e){return ud[e]}get unpackVector(){return ud[this.encoding]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}_unpackMapbox(e,t,r){return(256*e*256+256*t+r)/10-1e4}_unpackTerrarium(e,t,r){return 256*e+t+r/256-32768}static pack(e,t){const r=[0,0,0,0],n=pd.getUnpackVector(t);let a=Math.floor((e+n[3])/n[2]);return r[2]=a%256,a=Math.floor(a/256),r[1]=a%256,a=Math.floor(a/256),r[0]=a,r}getPixels(){return new Us({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,t,r){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let n=t*this.dim,a=t*this.dim+this.dim,i=r*this.dim,o=r*this.dim+this.dim;switch(t){case-1:n=a-1;break;case 1:a=n+1}switch(r){case-1:i=o-1;break;case 1:o=i+1}const s=-t*this.dim,l=-r*this.dim;for(let t=i;t<o;t++)for(let r=n;r<a;r++)this.data[this._idx(r,t)]=e.data[this._idx(r+s,t+l)]}onDeserialize(){this._tree&&(this._tree.dem=this)}}sa("DEMData",pd),sa("DemMinMaxQuadTree",sd,{omit:["dem"]});class dd{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,r){const n=e.wrapped().key;void 0===this.data[n]&&(this.data[n]=[]);const a={value:t,timeout:void 0};if(void 0!==r&&(a.timeout=setTimeout((()=>{this.remove(e,a)}),r)),this.data[n].push(a),this.order.push(n),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const r=e.wrapped().key,n=void 0===t?0:this.data[r].indexOf(t),a=this.data[r][n];return this.data[r].splice(n,1),a.timeout&&clearTimeout(a.timeout),0===this.data[r].length&&delete this.data[r],this.onRemove(a.value),this.order.splice(this.order.indexOf(r),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const r in this.data)for(const n of this.data[r])e(n.value)||t.push(n);for(const e of t)this.remove(e.value.tileID,e)}}class hd{constructor(e,t,r){this.func=e,this.mask=t,this.range=r}}hd.ReadOnly=!1,hd.ReadWrite=!0,hd.disabled=new hd(519,hd.ReadOnly,[0,1]);const fd=7680;class md{constructor(e,t,r,n,a,i){this.test=e,this.ref=t,this.mask=r,this.fail=n,this.depthFail=a,this.pass=i}}md.disabled=new md({func:519,mask:0},0,0,fd,fd,fd);class gd{constructor(e,t,r){this.blendFunction=e,this.blendColor=t,this.mask=r}}gd.Replace=[1,0],gd.disabled=new gd(gd.Replace,ut.transparent,[!1,!1,!1,!1]),gd.unblended=new gd(gd.Replace,ut.transparent,[!0,!0,!0,!0]),gd.alphaBlended=new gd([1,771],ut.transparent,[!0,!0,!0,!0]);const vd=1029,yd=2305;class bd{constructor(e,t,r){this.enable=e,this.mode=t,this.frontFace=r}}bd.disabled=new bd(!1,vd,yd),bd.backCCW=new bd(!0,vd,yd),bd.backCW=new bd(!0,vd,2304),bd.frontCW=new bd(!0,1028,2304),bd.frontCCW=new bd(!0,1028,yd);class _d extends Be{constructor(e,t,r){super(),this.id=e,this._onlySymbols=r,t.on("data",(e=>{"source"===e.dataType&&"metadata"===e.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))})),t.on("error",(()=>{this._sourceErrored=!0})),this._source=t,this._tiles={},this._cache=new dd(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new td}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const e in this._tiles){const t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,t){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,t)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,(()=>{}))}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,(()=>{}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const t in this._tiles){const r=this._tiles[t];r.upload(e),r.prepare(this.map.style.imageManager)}}getIds(){return y(this._tiles).map((e=>e.tileID)).sort(xd).map((e=>e.key))}getRenderableIds(e){const t=[];for(const r in this._tiles)this._isIdRenderable(+r,e)&&t.push(this._tiles[r]);return e?t.sort(((e,t)=>{const r=e.tileID,n=t.tileID,i=new a(r.canonical.x,r.canonical.y)._rotate(this.transform.angle),o=new a(n.canonical.x,n.canonical.y)._rotate(this.transform.angle);return r.overscaledZ-n.overscaledZ||o.y-i.y||o.x-i.x})).map((e=>e.tileID.key)):t.map((e=>e.tileID)).sort(xd).map((e=>e.key))}hasRenderableParent(e){const t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}_isIdRenderable(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}}_reloadTile(e,t){const r=this._tiles[e];r&&("loading"!==r.state&&(r.state=t),this._loadTile(r,this._tileLoaded.bind(this,r,e,t)))}_tileLoaded(e,t,r,n){if(n)return e.state="errored",void(404!==n.status?this._source.fire(new De(n,{tile:e})):this.update(this.transform));e.timeAdded=j.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new Le("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const t=this.getRenderableIds();for(let n=0;n<t.length;n++){const a=t[n];if(e.neighboringTiles&&e.neighboringTiles[a]){const t=this.getTileByID(a);r(e,t),r(t,e)}}function r(e,t){if(!e.dem||e.dem.borderReady)return;e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;let r=t.tileID.canonical.x-e.tileID.canonical.x;const n=t.tileID.canonical.y-e.tileID.canonical.y,a=Math.pow(2,e.tileID.canonical.z),i=t.tileID.key;0===r&&0===n||Math.abs(n)>1||(Math.abs(r)>1&&(1===Math.abs(r+a)?r+=a:1===Math.abs(r-a)&&(r-=a)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,r,n),e.neighboringTiles&&e.neighboringTiles[i]&&(e.neighboringTiles[i].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,t,r,n){for(const a in this._tiles){let i=this._tiles[a];if(n[a]||!i.hasData()||i.tileID.overscaledZ<=t||i.tileID.overscaledZ>r)continue;let o=i.tileID;for(;i&&i.tileID.overscaledZ>t+1;){const e=i.tileID.scaledTo(i.tileID.overscaledZ-1);i=this._tiles[e.key],i&&i.hasData()&&(o=e)}let s=o;for(;s.overscaledZ>t;)if(s=s.scaledTo(s.overscaledZ-1),e[s.key]){n[o.key]=o;break}}}findLoadedParent(e,t){if(e.key in this._loadedParentTiles){const r=this._loadedParentTiles[e.key];return r&&r.tileID.overscaledZ>=t?r:null}for(let r=e.overscaledZ-1;r>=t;r--){const t=e.scaledTo(r),n=this._getLoadedTile(t);if(n)return n}}_getLoadedTile(e){const t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,t){t=t||this._source.tileSize;const r=Math.ceil(e.width/t)+1,n=Math.ceil(e.height/t)+1,a=Math.floor(r*n*5),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,a):a;this._cache.setMaxSize(i)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){const e={};for(const r in this._tiles){const n=this._tiles[r];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+t),e[n.tileID.key]=n}this._tiles=e;for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e in this._tiles)this._setTileReloadTimer(+e,this._tiles[e])}}update(e,t,r){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!r)return;let n;this.updateCacheSize(e,t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?n=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((e=>new Zp(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y))):(n=e.coveringTiles({tileSize:t||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!r,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(n=n.filter((e=>this._source.hasTile(e))))):n=[];const a=this._updateRetainedTiles(n);if(wd(this._source.type)&&0!==n.length){const e={},t={},r=Object.keys(a);for(const n of r){const r=a[n],i=this._tiles[n];if(!i||i.fadeEndTime&&i.fadeEndTime<=j.now())continue;const o=this.findLoadedParent(r,Math.max(r.overscaledZ-_d.maxOverzooming,this._source.minzoom));o&&(this._addTile(o.tileID),e[o.tileID.key]=o.tileID),t[n]=r}const i=n[n.length-1].overscaledZ;for(const e in this._tiles){const r=this._tiles[e];if(a[e]||!r.hasData())continue;let n=r.tileID;for(;n.overscaledZ>i;){n=n.scaledTo(n.overscaledZ-1);const i=this._tiles[n.key];if(i&&i.hasData()&&t[n.key]){a[e]=r.tileID;break}}}for(const t in e)a[t]||(this._coveredTiles[t]=!0,a[t]=e[t])}for(const e in a)this._tiles[e].clearFadeHold();const i=function(e,t){const r=[];for(const n in e)n in t||r.push(n);return r}(this._tiles,a);for(const e of i){const t=this._tiles[e];t.hasSymbolBuckets&&!t.holdingForFade()?t.setHoldDuration(this.map._fadeDuration):t.hasSymbolBuckets&&!t.symbolFadeFinished()||this._removeTile(+e)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const t={};if(0===e.length)return t;const r={},n=e[e.length-1].overscaledZ,a=e[0].overscaledZ,i=Math.max(a-_d.maxOverzooming,this._source.minzoom),o=Math.max(a+_d.maxUnderzooming,this._source.minzoom),s={};for(const r of e){const e=this._addTile(r);t[r.key]=r,e.hasData()||n<this._source.maxzoom&&(s[r.key]=r)}this._retainLoadedChildren(s,n,o,t);for(const n of e){let e=this._tiles[n.key];if(e.hasData())continue;if(n.canonical.z>=this._source.maxzoom){const e=n.children(this._source.maxzoom)[0],r=this.getTile(e);if(r&&r.hasData()){t[e.key]=e;continue}}else{const e=n.children(this._source.maxzoom);if(t[e[0].key]&&t[e[1].key]&&t[e[2].key]&&t[e[3].key])continue}let a=e.wasRequested();for(let o=n.overscaledZ-1;o>=i;--o){const i=n.scaledTo(o);if(r[i.key])break;if(r[i.key]=!0,e=this.getTile(i),!e&&a&&(e=this._addTile(i)),e&&(t[i.key]=i,a=e.wasRequested(),e.hasData()))break}}return t}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const t=[];let r,n=this._tiles[e].tileID;for(;n.overscaledZ>0;){if(n.key in this._loadedParentTiles){r=this._loadedParentTiles[n.key];break}t.push(n.key);const e=n.scaledTo(n.overscaledZ-1);if(r=this._getLoadedTile(e),r)break;n=e}for(const e of t)this._loadedParentTiles[e]=r}}_addTile(e){let t=this._tiles[e.key];if(t)return t;t=this._cache.getAndRemove(e),t&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));const r=Boolean(t);return r||(t=new ed(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))),t?(t.uses++,this._tiles[e.key]=t,r||this._source.fire(new Le("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout((()=>{this._reloadTile(e,"expired"),delete this._timers[e]}),r))}_removeTile(e){const t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._cache.reset()}tilesIn(e,t,r){const n=[],a=this.transform;if(!a)return n;for(const i in this._tiles){const o=this._tiles[i];if(r&&o.clearQueryDebugViz(),o.holdingForFade())continue;const s=e.containsTile(o,a,t);s&&n.push(s)}return n}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map((e=>this._tiles[e].tileID));for(const e of t)e.projMatrix=this.transform.calculateProjMatrix(e.toUnwrapped());return t}hasTransition(){if(this._source.hasTransition())return!0;if(wd(this._source.type))for(const e in this._tiles){const t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=j.now())return!0}return!1}setFeatureState(e,t,r){this._state.updateState(e=e||"_geojsonTileLayer",t,r)}removeFeatureState(e,t,r){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,r)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,r){const n=this._tiles[e];n&&n.setDependencies(t,r)}reloadTilesForDependencies(e,t){for(const r in this._tiles)this._tiles[r].hasDependency(e,t)&&this._reloadTile(+r,"reloading");this._cache.filter((r=>!r.hasDependency(e,t)))}}function xd(e,t){const r=Math.abs(2*e.wrap)-+(e.wrap<0),n=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||n-r||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function wd(e){return"raster"===e||"image"===e||"video"===e}_d.maxOverzooming=10,_d.maxUnderzooming=3;class Ed{constructor(e,t,r){this._demTile=e,this._dem=this._demTile.dem,this._scale=t,this._offset=r}static create(e,t,r){const n=r||e.findDEMTileFor(t);if(!n||!n.dem)return;const a=n.dem,i=n.tileID,o=1<<t.canonical.z-i.canonical.z;return new Ed(n,n.tileSize/jo/o,[(t.canonical.x/o-i.canonical.x)*a.dim,(t.canonical.y/o-i.canonical.y)*a.dim])}tileCoordToPixel(e,t){const r=t*this._scale+this._offset[1],n=Math.floor(e*this._scale+this._offset[0]),i=Math.floor(r);return new a(n,i)}getElevationAt(e,t,r,n){const a=e*this._scale+this._offset[0],i=t*this._scale+this._offset[1],o=Math.floor(a),s=Math.floor(i),l=this._dem;return n=!!n,r?rr(rr(l.get(o,s,n),l.get(o,s+1,n),i-s),rr(l.get(o+1,s,n),l.get(o+1,s+1,n),i-s),a-o):l.get(o,s,n)}getElevationAtPixel(e,t,r){return this._dem.get(e,t,!!r)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*Bp(1,e)*this._dem.stride}}class Cd{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new ra(jo,16,0),this.featureIndexArray=new ao,this.promoteId=t}insert(e,t,r,n,a,i=0){const o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,n,a,i);const s=this.grid;for(let e=0;e<t.length;e++){const r=t[e],n=[1/0,1/0,-1/0,-1/0];for(let e=0;e<r.length;e++){const t=r[e];n[0]=Math.min(n[0],t.x),n[1]=Math.min(n[1],t.y),n[2]=Math.max(n[2],t.x),n[3]=Math.max(n[3],t.y)}n[0]<jo&&n[1]<jo&&n[2]>=0&&n[3]>=0&&s.insert(o,n[0],n[1],n[2],n[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Hl.VectorTile(new Oc(this.rawTileData)).layers,this.sourceLayerCoder=new Kp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,t,r,n){this.loadVTLayers();const a=e.params||{},i=Cn(a.filter),o=e.tileResult,s=e.transform,l=o.bufferedTilespaceBounds,c=this.grid.query(l.min.x,l.min.y,l.max.x,l.max.y,((e,t,r,n)=>is(o.bufferedTilespaceGeometry,e,t,r,n)));c.sort(Td);let u=null;s.elevation&&c.length>0&&(u=Ed.create(s.elevation,this.tileID));const p={};let d;for(let s=0;s<c.length;s++){const l=c[s];if(l===d)continue;d=l;const h=this.featureIndexArray.get(l);let f=null;this.loadMatchingFeature(p,h,i,a.layers,a.availableImages,t,r,n,((t,r,n,a=0)=>(f||(f=Ho(t)),r.queryIntersectsFeature(o,t,n,f,this.z,e.transform,e.pixelPosMatrix,u,a))))}return p}loadMatchingFeature(e,t,r,n,a,i,o,s,l){const{featureIndex:c,bucketIndex:u,sourceLayerIndex:p,layoutVertexArrayOffset:d}=t,h=this.bucketLayerIDs[u];if(n&&!function(e,t){for(let r=0;r<e.length;r++)if(t.indexOf(e[r])>=0)return!0;return!1}(n,h))return;const f=this.sourceLayerCoder.decode(p),m=this.vtLayers[f].feature(c);if(r.needGeometry){const e=Go(m,!0);if(!r.filter(new oi(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!r.filter(new oi(this.tileID.overscaledZ),m))return;const g=this.getId(m,f);for(let t=0;t<h.length;t++){const r=h[t];if(n&&n.indexOf(r)<0)continue;const u=i[r];if(!u)continue;let p={};void 0!==g&&s&&(p=s.getState(u.sourceLayer||"_geojsonTileLayer",g));const f=b({},o[r]);f.paint=kd(f.paint,u.paint,m,p,a),f.layout=kd(f.layout,u.layout,m,p,a);const v=!l||l(m,u,p,d);if(!v)continue;const y=new Qp(m,this.z,this.x,this.y,g);y.layer=f;let _=e[r];void 0===_&&(_=e[r]=[]),_.push({featureIndex:c,feature:y,intersectionZ:v})}}lookupSymbolFeatures(e,t,r,n,a,i,o,s){const l={};this.loadVTLayers();const c=Cn(a);for(const a of e)this.loadMatchingFeature(l,{bucketIndex:r,sourceLayerIndex:n,featureIndex:a,layoutVertexArrayOffset:0},c,i,o,s,t);return l}hasLayer(e){for(const t of this.bucketLayerIDs)for(const r of t)if(e===r)return!0;return!1}getId(e,t){let r=e.id;return this.promoteId&&(r=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]],"boolean"==typeof r&&(r=Number(r))),r}}function kd(e,t,r,n,a){return S(e,((e,i)=>{const o=t instanceof fi?t.get(i):null;return o&&o.evaluate?o.evaluate(r,n,a):o}))}function Td(e,t){return t-e}sa("FeatureIndex",Cd,{omit:["rawTileData","sourceLayerCoder"]});class Sd{constructor(e){const t={},r=[];for(const n in e){const a=e[n],i=t[n]={};for(const e in a.glyphs){const t=a.glyphs[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const n=t.metrics.localGlyph?2:1,o={x:0,y:0,w:t.bitmap.width+2*n,h:t.bitmap.height+2*n};r.push(o),i[e]=o}}const{w:n,h:a}=tu(r),i=new js({width:n||1,height:a||1});for(const r in e){const n=e[r];for(const e in n.glyphs){const a=n.glyphs[+e];if(!a||0===a.bitmap.width||0===a.bitmap.height)continue;const o=t[r][e],s=a.metrics.localGlyph?2:1;js.copy(a.bitmap,i,{x:0,y:0},{x:o.x+s,y:o.y+s},a.bitmap)}}this.image=i,this.positions=t}}sa("GlyphAtlas",Sd);class Pd{constructor(e){this.tileID=new Zp(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile}parse(e,t,r,n,a){this.status="parsing",this.data=e,this.collisionBoxArray=new Yi;const i=new Kp(Object.keys(e.layers).sort()),o=new Cd(this.tileID,this.promoteId);o.bucketLayerIDs=[];const s={},l=new Vp(256,256),c={featureIndex:o,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:l,availableImages:r},u=t.familiesBySource[this.source];for(const t in u){const n=e.layers[t];if(!n)continue;let a=!1,l=!1;for(const e of u[t])"symbol"===e[0].type?a=!0:l=!0;if(!0===this.isSymbolTile&&!a)continue;if(!1===this.isSymbolTile&&!l)continue;1===n.version&&A(`Vector tile source "${this.source}" layer "${t}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const p=i.encode(t),d=[];for(let e=0;e<n.length;e++){const r=n.feature(e),a=o.getId(r,t);d.push({feature:r,id:a,index:e,sourceLayerIndex:p})}for(const e of u[t]){const t=e[0];void 0!==this.isSymbolTile&&"symbol"===t.type!==this.isSymbolTile||t.minzoom&&this.zoom<Math.floor(t.minzoom)||t.maxzoom&&this.zoom>=t.maxzoom||"none"!==t.visibility&&(Md(e,this.zoom,r),(s[t.id]=t.createBucket({index:o.bucketLayerIDs.length,layers:e,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:p,sourceID:this.source,enableTerrain:this.enableTerrain})).populate(d,c,this.tileID.canonical),o.bucketLayerIDs.push(e.map((e=>e.id))))}}let p,d,h,f;l.trim();const m={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},g=S(c.glyphDependencies,(e=>Object.keys(e).map(Number)));Object.keys(g).length?n.send("getGlyphs",{uid:this.uid,stacks:g},((e,t)=>{p||(p=e,d=t,_.call(this))}),void 0,!1,m):d={};const v=Object.keys(c.iconDependencies);v.length?n.send("getImages",{icons:v,source:this.source,tileID:this.tileID,type:"icons"},((e,t)=>{p||(p=e,h=t,_.call(this))}),void 0,!1,m):h={};const b=Object.keys(c.patternDependencies);function _(){if(p)return a(p);if(d&&h&&f){const e=new Sd(d),t=new nu(h,f);for(const n in s){const a=s[n];a instanceof hp?(Md(a.layers,this.zoom,r),Ku(a,d,e.positions,h,t.iconPositions,this.showCollisionBoxes,this.tileID.canonical,this.tileZoom)):a.hasPattern&&(a instanceof cc||a instanceof Al||a instanceof Yl)&&(Md(a.layers,this.zoom,r),a.addFeatures(c,this.tileID.canonical,t.patternPositions))}this.status="done",a(null,{buckets:y(s).filter((e=>!e.isEmpty())),featureIndex:o,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,lineAtlas:l,imageAtlas:t,glyphMap:this.returnDependencies?d:null,iconMap:this.returnDependencies?h:null,glyphPositions:this.returnDependencies?e.positions:null})}}b.length?n.send("getImages",{icons:b,source:this.source,tileID:this.tileID,type:"patterns"},((e,t)=>{p||(p=e,f=t,_.call(this))}),void 0,!1,m):f={},_.call(this)}}function Md(e,t,r){const n=new oi(t);for(const t of e)t.recalculate(n,r)}class Id{constructor(e){this.entries={},this.scheduler=e}request(e,t,r,n){const a=this.entries[e]=this.entries[e]||{callbacks:[]};if(a.result){const[e,r]=a.result;return this.scheduler?this.scheduler.add((()=>{n(e,r)}),t):n(e,r),()=>{}}return a.callbacks.push(n),a.cancel||(a.cancel=r(((r,n)=>{a.result=[r,n];for(const e of a.callbacks)this.scheduler?this.scheduler.add((()=>{e(r,n)}),t):e(r,n);setTimeout((()=>delete this.entries[e]),3e3)}))),()=>{a.result||(a.callbacks=a.callbacks.filter((e=>e!==n)),a.callbacks.length||(a.cancel(),delete this.entries[e]))}}}function Ad(e,t,r){const n=JSON.stringify(e.request);return e.data&&(this.deduped.entries[n]={result:[null,e.data]}),this.deduped.request(n,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},(t=>{const n=ke(e.request,((e,n,a,i)=>{e?t(e):n&&t(null,{vectorTile:r?void 0:new Hl.VectorTile(new Oc(n)),rawData:n,cacheControl:a,expires:i})}));return()=>{n.cancel(),t()}}),t)}e.ARRAY_TYPE=hs,e.AUTH_ERR_MSG=Q,e.Actor=class{constructor(e,t,r){this.target=e,this.parent=t,this.mapId=r,this.callbacks={},this.cancelCallbacks={},k(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=R()?e:o,this.scheduler=new Hp}send(e,t,r,n,a=!1,i){const o=Math.round(1e18*Math.random()).toString(36).substring(0,10);r&&(r.metadata=i,this.callbacks[o]=r);const s=N(this.globalScope)?void 0:[];return this.target.postMessage({id:o,type:e,hasCallback:!!r,targetMapId:n,mustQueue:a,sourceMapId:this.mapId,data:ua(t,s)},s),{cancel:()=>{r&&delete this.callbacks[o],this.target.postMessage({id:o,type:"<cancel>",targetMapId:n,sourceMapId:this.mapId})}}}receive(e){const t=e.data,r=t.id;if(r&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){const e=this.cancelCallbacks[r];delete this.cancelCallbacks[r],e&&e.cancel()}else if(t.mustQueue||R()){const e=this.callbacks[r];this.cancelCallbacks[r]=this.scheduler.add((()=>this.processTask(r,t)),e&&e.metadata||{type:"message"})}else this.processTask(r,t)}processTask(e,t){if("<response>"===t.type){const r=this.callbacks[e];delete this.callbacks[e],r&&(t.error?r(pa(t.error)):r(null,pa(t.data)))}else{const r=N(this.globalScope)?void 0:[],n=t.hasCallback?(t,n)=>{delete this.cancelCallbacks[e],this.target.postMessage({id:e,type:"<response>",sourceMapId:this.mapId,error:t?ua(t):null,data:ua(n,r)},r)}:e=>{},a=pa(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,a,n);else if(this.parent.getWorkerSource){const e=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,e[0],a.source)[e[1]](a,n)}else n(new Error(`Could not find function ${t.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},e.CanonicalTileID=Wp,e.Color=ut,e.ColorMode=gd,e.CullFaceMode=bd,e.DEMData=pd,e.DataConstantProperty=mi,e.DedupedRequest=Id,e.DepthMode=hd,e.EXTENT=jo,e.Elevation=class{getAtPointOrZero(e,t=0){return this.getAtPoint(e,t)||0}getAtPoint(e,t,r=!0){null==t&&(t=null);const n=this._source();if(!n)return t;if(e.y<0||e.y>1)return t;const a=n.getSource().maxzoom,i=1<<a,o=Math.floor(e.x),s=e.x-o,l=new Zp(a,o,a,Math.floor(s*i),Math.floor(e.y*i)),c=this.findDEMTileFor(l);if(!c||!c.dem)return t;const u=c.dem,p=1<<c.tileID.canonical.z,d=(s*p-c.tileID.canonical.x)*u.dim,h=(e.y*p-c.tileID.canonical.y)*u.dim,f=Math.floor(d),m=Math.floor(h);return(r?this.exaggeration():1)*rr(rr(u.get(f,m),u.get(f,m+1),h-m),rr(u.get(f+1,m),u.get(f+1,m+1),h-m),d-f)}getAtTileOffset(e,t,r){const n=1<<e.canonical.z;return this.getAtPointOrZero(new Np(e.wrap+(e.canonical.x+t/jo)/n,(e.canonical.y+r/jo)/n))}getForTilePoints(e,t,r,n){const a=Ed.create(this,e,n);return!!a&&(t.forEach((e=>{e[2]=this.exaggeration()*a.getElevationAt(e[0],e[1],r)})),!0)}getMinMaxForTile(e){const t=this.findDEMTileFor(e);if(!t||!t.dem)return null;const r=t.dem.tree,n=t.tileID,a=1<<e.canonical.z-n.canonical.z;let i=e.canonical.x/a-n.canonical.x,o=e.canonical.y/a-n.canonical.y,s=0;for(let t=0;t<e.canonical.z-n.canonical.z&&!r.leaves[s];t++){i*=2,o*=2;const e=2*Math.floor(o)+Math.floor(i);s=r.childOffsets[s]+e,i%=1,o%=1}return{min:this.exaggeration()*r.minimums[s],max:this.exaggeration()*r.maximums[s]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(e,t,r){throw new Error("Pure virtual method called.")}pointCoordinate(e){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(e){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},e.ErrorEvent=De,e.EvaluationParameters=oi,e.Event=Le,e.Evented=Be,e.GlyphManager=Du,e.ImagePosition=ru,e.LineAtlas=Vp,e.LngLat=Op,e.LngLatBounds=Ip,e.LocalGlyphMode=Lu,e.MAX_SAFE_INTEGER=s,e.MercatorCoordinate=Np,e.ONE_EM=_c,e.OverscaledTileID=Zp,e.Properties=_i,e.RGBAImage=Us,e.RequestManager=class{constructor(e,t,r){this._transformRequestFn=e,this._customAccessToken=t,this._silenceAuthErrors=!!r,this._createSkuToken()}_createSkuToken(){const e=function(){let e="";for(let t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",K,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}normalizeStyleURL(e,t){if(!J(e))return e;const r=re(e);return r.path=`/styles/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||t)}normalizeGlyphsURL(e,t){if(!J(e))return e;const r=re(e);return r.path=`/fonts/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||t)}normalizeSourceURL(e,t){if(!J(e))return e;const r=re(e);return r.path=`/v4/${r.authority}.json`,r.params.push("secure"),this._makeAPIURL(r,this._customAccessToken||t)}normalizeSpriteURL(e,t,r,n){const a=re(e);return J(e)?(a.path=`/styles/v1${a.path}/sprite${t}${r}`,this._makeAPIURL(a,this._customAccessToken||n)):(a.path+=`${t}${r}`,ne(a))}normalizeTileURL(e,t,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!J(e))return e;const n=re(e);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${t||r&&"raster"!==n.authority&&512===r?"@2x":""}${H.supported?".webp":"$1"}`),"raster"===n.authority?n.path=`/${q.RASTER_URL_PREFIX}${n.path}`:(n.path=n.path.replace(/^.+\/v4\//,"/"),n.path=`/${q.TILE_URL_VERSION}${n.path}`);const a=this._customAccessToken||function(e){for(const t of e){const e=t.match(/^access_token=(.*)$/);if(e)return e[1]}return null}(n.params)||q.ACCESS_TOKEN;return q.REQUIRE_ACCESS_TOKEN&&a&&this._skuToken&&n.params.push(`sku=${this._skuToken}`),this._makeAPIURL(n,a)}canonicalizeTileURL(e,t){const r=re(e);if(!r.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!r.path.match(/\.[\w]+$/))return e;let n="mapbox://";r.path.match(/^\/raster\/v1\//)?n+=`raster/${r.path.replace(`/${q.RASTER_URL_PREFIX}/`,"")}`:n+=`tiles/${r.path.replace(`/${q.TILE_URL_VERSION}/`,"")}`;let a=r.params;return t&&(a=a.filter((e=>!e.match(/^access_token=/)))),a.length&&(n+=`?${a.join("&")}`),n}canonicalizeTileset(e,t){const r=!!t&&J(t),n=[];for(const t of e.tiles||[])ee(t)?n.push(this.canonicalizeTileURL(t,r)):n.push(t);return n}_makeAPIURL(e,t){const r="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",n=re(q.API_URL);if(e.protocol=n.protocol,e.authority=n.authority,"http"===e.protocol){const t=e.params.indexOf("secure");t>=0&&e.params.splice(t,1)}if("/"!==n.path&&(e.path=`${n.path}${e.path}`),!q.REQUIRE_ACCESS_TOKEN)return ne(e);if(t=t||q.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error(`An API access token is required to use Mapbox GL. ${r}`);if("s"===t[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${r}`)}return e.params=e.params.filter((e=>-1===e.indexOf("access_token"))),e.params.push(`access_token=${t||""}`),ne(e)}},e.ResourceType=xe,e.SegmentVector=Vo,e.SourceCache=_d,e.StencilMode=md,e.StructArrayLayout1ui2=Wi,e.StructArrayLayout2f1f2i16=$i,e.StructArrayLayout2i4=Si,e.StructArrayLayout2ui4=Gi,e.StructArrayLayout3f12=Ri,e.StructArrayLayout3ui6=Ni,e.StructArrayLayout4i8=Pi,e.Texture=Mp,e.Tile=ed,e.Transitionable=ci,e.Uniform1f=bo,e.Uniform1i=class extends yo{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))}},e.Uniform2f=class extends yo{constructor(e,t){super(e,t),this.current=[0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))}},e.Uniform3f=class extends yo{constructor(e,t){super(e,t),this.current=[0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))}},e.Uniform4f=_o,e.UniformColor=xo,e.UniformMatrix3f=class extends yo{constructor(e,t){super(e,t),this.current=Eo}set(e){for(let t=0;t<9;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix3fv(this.location,!1,e);break}}},e.UniformMatrix4f=class extends yo{constructor(e,t){super(e,t),this.current=wo}set(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(let t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}}},e.UnwrappedTileID=Xp,e.ValidationError=Fe,e.VectorTileWorkerSource=class extends Be{constructor(e,t,r,n,a){super(),this.actor=e,this.layerIndex=t,this.availableImages=r,this.loadVectorData=a||Ad,this.loading={},this.loaded={},this.deduped=new Id(e.scheduler),this.isSpriteLoaded=n,this.scheduler=e.scheduler}loadTile(e,t){const r=e.uid,n=e&&e.request,a=n&&n.collectResourceTiming,i=this.loading[r]=new Pd(e);i.abort=this.loadVectorData(e,((o,s)=>{const l=!this.loading[r];if(delete this.loading[r],l||o||!s)return i.status="done",l||(this.loaded[r]=i),t(o);const c=s.rawData,u={};s.expires&&(u.expires=s.expires),s.cacheControl&&(u.cacheControl=s.cacheControl),i.vectorTile=s.vectorTile||new Hl.VectorTile(new Oc(c));const p=()=>{i.parse(i.vectorTile,this.layerIndex,this.availableImages,this.actor,((e,r)=>{if(e||!r)return t(e);const i={};if(a){const e=qp(n);e.length>0&&(i.resourceTiming=JSON.parse(JSON.stringify(e)))}t(null,b({rawTileData:c.slice(0)},r,u,i))}))};this.isSpriteLoaded?p():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add(p,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom}):p()})),this.loaded=this.loaded||{},this.loaded[r]=i}))}reloadTile(e,t){const r=this.loaded,n=e.uid,a=this;if(r&&r[n]){const i=r[n];i.showCollisionBoxes=e.showCollisionBoxes,i.enableTerrain=!!e.enableTerrain;const o=(e,r)=>{const n=i.reloadCallback;n&&(delete i.reloadCallback,i.parse(i.vectorTile,a.layerIndex,this.availableImages,a.actor,n)),t(e,r)};"parsing"===i.status?i.reloadCallback=o:"done"===i.status&&(i.vectorTile?i.parse(i.vectorTile,this.layerIndex,this.availableImages,this.actor,o):o())}}abortTile(e,t){const r=e.uid,n=this.loading[r];n&&(n.abort&&n.abort(),delete this.loading[r]),t()}removeTile(e,t){const r=this.loaded,n=e.uid;r&&r[n]&&delete r[n],t()}},e.WritingMode=au,e.ZoomHistory=da,e.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e},e.addDynamicAttributes=cp,e.altitudeFromMercatorZ=Fp,e.asyncAll=v,e.bezier=h,e.bindAll=k,e.bufferConvexPolygon=function(e,t){const r=[];for(let n=0;n<e.length;n++){const a=g(n-1,-1,e.length-1),i=g(n+1,-1,e.length-1),o=e[n],s=e[i],l=e[a].sub(o).unit(),c=s.sub(o).unit(),u=c.angleWithSep(l.x,l.y),p=l.add(c).unit().mult(-1*t/Math.sin(u/2));r.push(o.add(p))}return r},e.cacheEntryPossiblyAdded=function(e){_e++,_e>ve&&(e.getActor().send("enforceCacheSizeLimit",ge),_e=0)},e.clamp=m,e.clearTileCache=function(e){const t=o.caches.delete(he);e&&t.catch(e).then((()=>e()))},e.clipLine=Pu,e.clone=function(e){var t=new hs(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.clone$1=function(e){var t=new hs(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$2=M,e.collisionCircleLayout=bc,e.config=q,e.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},e.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.create=ys,e.create$1=function(){var e=new hs(16);return hs!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$2=fs,e.createExpression=un,e.createFilter=Cn,e.createLayout=ki,e.createStyleLayer=function(e){return"custom"===e.type?new _p(e):new Ep[e.type](e)},e.cross=function(e,t,r){var n=t[0],a=t[1],i=t[2],o=r[0],s=r[1],l=r[2];return e[0]=a*l-i*s,e[1]=i*o-n*l,e[2]=n*s-a*o,e},e.degToRad=u,e.div=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e},e.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},e.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},e.ease=f,e.easeCubicInOut=d,e.emitValidationErrors=ta,e.endsWith=T,e.enforceCacheSizeLimit=function(e){ye(),fe&&fe.then((t=>{t.keys().then((r=>{for(let n=0;n<r.length-e;n++)t.delete(r[n])}))}))},e.evaluateSizeForFeature=Ec,e.evaluateSizeForZoom=Cc,e.evaluateVariableOffset=Yu,e.evented=ri,e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.exactEquals$1=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.exported=j,e.exported$1=H,e.extend=b,e.filterObject=P,e.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},e.fromQuat=function(e,t){var r=t[0],n=t[1],a=t[2],i=t[3],o=r+r,s=n+n,l=a+a,c=r*o,u=n*o,p=n*s,d=a*o,h=a*s,f=a*l,m=i*o,g=i*s,v=i*l;return e[0]=1-p-f,e[1]=u+v,e[2]=d-g,e[3]=0,e[4]=u-v,e[5]=1-c-f,e[6]=h+m,e[7]=0,e[8]=d+g,e[9]=h-m,e[10]=1-c-p,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.fromRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.furthestTileCorner=function(e){const t=Math.round((e+45+360)%360/90)%4;return p[t]},e.getAABBPointSquareDist=function(e,t,r){let n=0;for(let a=0;a<2;++a){const i=r?r[a]:0;e[a]>i&&(n+=(e[a]-i)*(e[a]-i)),t[a]<i&&(n+=(i-t[a])*(i-t[a]))}return n},e.getAnchorAlignment=gu,e.getAnchorJustification=Qu,e.getBounds=function(e){let t=1/0,r=1/0,n=-1/0,i=-1/0;for(const a of e)t=Math.min(t,a.x),r=Math.min(r,a.y),n=Math.max(n,a.x),i=Math.max(i,a.y);return{min:new a(t,r),max:new a(n,i)}},e.getImage=Oe,e.getJSON=function(e,t){return Ce(b(e,{type:"json"}),t)},e.getMapSessionAPI=pe,e.getPerformanceMeasurement=qp,e.getRTLTextPluginStatus=ni,e.getReferrer=Ee,e.getVideo=function(e,t){const r=o.document.createElement("video");r.muted=!0,r.onloadstart=function(){t(null,r)};for(let t=0;t<e.length;t++){const n=o.document.createElement("source");Pe(e[t])||(r.crossOrigin="Anonymous"),n.src=e[t],r.appendChild(n)}return{cancel:()=>{}}},e.identity=ms,e.identity$1=Os,e.invert=function(e,t){var r=t[0],n=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],p=t[9],d=t[10],h=t[11],f=t[12],m=t[13],g=t[14],v=t[15],y=r*s-n*o,b=r*l-a*o,_=r*c-i*o,x=n*l-a*s,w=n*c-i*s,E=a*c-i*l,C=u*m-p*f,k=u*g-d*f,T=u*v-h*f,S=p*g-d*m,P=p*v-h*m,M=d*v-h*g,I=y*M-b*P+_*S+x*T-w*k+E*C;return I?(e[0]=(s*M-l*P+c*S)*(I=1/I),e[1]=(a*P-n*M-i*S)*I,e[2]=(m*E-g*w+v*x)*I,e[3]=(d*w-p*E-h*x)*I,e[4]=(l*T-o*M-c*k)*I,e[5]=(r*M-a*T+i*k)*I,e[6]=(g*_-f*E-v*b)*I,e[7]=(u*E-d*_+h*b)*I,e[8]=(o*P-s*T+c*C)*I,e[9]=(n*T-r*P-i*C)*I,e[10]=(f*w-m*_+v*y)*I,e[11]=(p*_-u*w-h*y)*I,e[12]=(s*k-o*S-l*C)*I,e[13]=(r*S-n*k+a*C)*I,e[14]=(m*b-f*x-g*y)*I,e[15]=(u*x-p*b+d*y)*I,e):null},e.isMapAuthenticated=function(e){return de.has(e)},e.isMapboxURL=J,e.latFromMercatorY=$p,e.len=Ms,e.length=bs,e.length$1=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},e.loadVectorTile=Ad,e.makeRequest=Ce,e.mercatorXfromLng=Lp,e.mercatorYfromLat=Dp,e.mercatorZfromAltitude=Bp,e.mul=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e},e.mul$1=vs,e.mul$2=Ps,e.multiply=gs,e.multiply$1=ws,e.nextPowerOfTwo=E,e.normalize=Cs,e.normalize$1=function(e,t){var r=t[0],n=t[1],a=t[2],i=t[3],o=r*r+n*n+a*a+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=r*o,e[1]=n*o,e[2]=a*o,e[3]=i*o,e},e.number=rr,e.ortho=function(e,t,r,n,a,i,o){var s=1/(t-r),l=1/(n-a),c=1/(i-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*s,e[13]=(a+n)*l,e[14]=(o+i)*c,e[15]=1,e},e.pbf=Oc,e.perspective=function(e,t,r,n,a){var i,o=1/Math.tan(t/2);return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=a&&a!==1/0?(e[10]=(a+n)*(i=1/(n-a)),e[14]=2*a*n*i):(e[10]=-1,e[14]=-2*n),e},e.pick=function(e,t){const r={};for(let n=0;n<t.length;n++){const a=t[n];a in e&&(r[a]=e[a])}return r},e.plugin=ii,e.pointGeometry=a,e.polygonIntersectsBox=is,e.polygonIntersectsPolygon=Zo,e.polygonizeBounds=function(e,t,r=0,n=!0){const i=new a(r,r),o=e.sub(i),s=t.add(i),l=[o,new a(s.x,o.y),s,new a(o.x,s.y)];return n&&l.push(o),l},e.posAttributes=Jp,e.postMapLoadEvent=ce,e.postTurnstileEvent=se,e.potpack=tu,e.prevPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},e.radToDeg=function(e){return e*c},e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.registerForPluginStateChange=function(e){return e({pluginStatus:Qa,pluginURL:Ja}),ri.on("pluginStateChange",e),e},e.removeAuthState=function(e){de.delete(e)},e.renderColorRamp=Hs,e.rotateX=function(e,t,r){var n=Math.sin(r),a=Math.cos(r),i=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],p=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*a+c*n,e[5]=o*a+u*n,e[6]=s*a+p*n,e[7]=l*a+d*n,e[8]=c*a-i*n,e[9]=u*a-o*n,e[10]=p*a-s*n,e[11]=d*a-l*n,e},e.rotateX$1=zs,e.rotateY=function(e,t,r){var n=Math.sin(r),a=Math.cos(r),i=t[0],o=t[1],s=t[2],l=t[3],c=t[8],u=t[9],p=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*a-c*n,e[1]=o*a-u*n,e[2]=s*a-p*n,e[3]=l*a-d*n,e[8]=i*n+c*a,e[9]=o*n+u*a,e[10]=s*n+p*a,e[11]=l*n+d*a,e},e.rotateZ=function(e,t,r){var n=Math.sin(r),a=Math.cos(r),i=t[0],o=t[1],s=t[2],l=t[3],c=t[4],u=t[5],p=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*a+c*n,e[1]=o*a+u*n,e[2]=s*a+p*n,e[3]=l*a+d*n,e[4]=c*a-i*n,e[5]=u*a-o*n,e[6]=p*a-s*n,e[7]=d*a-l*n,e},e.rotateZ$1=function(e,t,r){r*=.5;var n=t[0],a=t[1],i=t[2],o=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+a*s,e[1]=a*l-n*s,e[2]=i*l+o*s,e[3]=o*l-i*s,e},e.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e},e.scale$1=function(e,t,r){var n=r[0],a=r[1],i=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.scale$2=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e},e.scaleAndAdd=Es,e.setCacheLimits=function(e,t){ge=e,ve=t},e.setRTLTextPlugin=function(e,t,r=!1){if(Qa===Xa||Qa===Za||Qa===Ya)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ja=j.resolveURL(e),Qa=Xa,Ka=t,ti(),r||ai()},e.smoothstep=function(e,t,r){return(r=m((r-e)/(t-e),0,1))*r*(3-2*r)},e.spec=$e,e.storeAuthState=function(e,t){t?de.add(e):de.delete(e)},e.sub=Ss,e.subtract=xs,e.symbolSize=kc,e.transformMat3=function(e,t,r){var n=t[0],a=t[1],i=t[2];return e[0]=n*r[0]+a*r[3]+i*r[6],e[1]=n*r[1]+a*r[4]+i*r[7],e[2]=n*r[2]+a*r[5]+i*r[8],e},e.transformMat4=Is,e.transformMat4$1=function(e,t,r){var n=t[0],a=t[1],i=t[2],o=r[3]*n+r[7]*a+r[11]*i+r[15];return e[0]=(r[0]*n+r[4]*a+r[8]*i+r[12])/(o=o||1),e[1]=(r[1]*n+r[5]*a+r[9]*i+r[13])/o,e[2]=(r[2]*n+r[6]*a+r[10]*i+r[14])/o,e},e.transformQuat=ks,e.translate=function(e,t,r){var n,a,i,o,s,l,c,u,p,d,h,f,m=r[0],g=r[1],v=r[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*v+t[12],e[13]=t[1]*m+t[5]*g+t[9]*v+t[13],e[14]=t[2]*m+t[6]*g+t[10]*v+t[14],e[15]=t[3]*m+t[7]*g+t[11]*v+t[15]):(a=t[1],i=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],p=t[8],d=t[9],h=t[10],f=t[11],e[0]=n=t[0],e[1]=a,e[2]=i,e[3]=o,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=p,e[9]=d,e[10]=h,e[11]=f,e[12]=n*m+s*g+p*v+t[12],e[13]=a*m+l*g+d*v+t[13],e[14]=i*m+c*g+h*v+t[14],e[15]=o*m+u*g+f*v+t[15]),e},e.triggerPluginCompletionEvent=ei,e.uniqueId=x,e.validateCustomStyleLayer=function(e){const t=[],r=e.id;return void 0===r&&t.push({message:`layers.${r}: missing required property "id"`}),void 0===e.render&&t.push({message:`layers.${r}: missing required method "render"`}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),t},e.validateFog=Qn,e.validateLight=Kn,e.validateStyle=Yn,e.values=y,e.vectorTile=Hl,e.version=t,e.warnOnce=A,e.window=o,e.wrap=g})),n(["./shared"],(function(e){function t(e){const r=typeof e;if("number"===r||"boolean"===r||"string"===r||null==e)return JSON.stringify(e);if(Array.isArray(e)){let r="[";for(const n of e)r+=`${t(n)},`;return`${r}]`}const n=Object.keys(e).sort();let a="{";for(let r=0;r<n.length;r++)a+=`${JSON.stringify(n[r])}:${t(e[n[r]])},`;return`${a}}`}function r(r){let n="";for(const a of e.refProperties)n+=`/${t(r[a])}`;return n}class n{constructor(e){this.keyCache={},e&&this.replace(e)}replace(e){this._layerConfigs={},this._layers={},this.update(e,[])}update(t,n){for(const r of t){this._layerConfigs[r.id]=r;const t=this._layers[r.id]=e.createStyleLayer(r);t._featureFilter=e.createFilter(t.filter),this.keyCache[r.id]&&delete this.keyCache[r.id]}for(const e of n)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const a=function(e,t){const n={};for(let a=0;a<e.length;a++){const i=t&&t[e[a].id]||r(e[a]);t&&(t[e[a].id]=i);let o=n[i];o||(o=n[i]=[]),o.push(e[a])}const a=[];for(const e in n)a.push(n[e]);return a}(e.values(this._layerConfigs),this.keyCache);for(const e of a){const t=e.map((e=>this._layers[e.id])),r=t[0];if("none"===r.visibility)continue;const n=r.source||"";let a=this.familiesBySource[n];a||(a=this.familiesBySource[n]={});const i=r.sourceLayer||"_geojsonTileLayer";let o=a[i];o||(o=a[i]=[]),o.push(t)}}}const{ImageBitmap:a}=e.window;class i{loadTile(t,r){const{uid:n,encoding:i,rawImageData:o,padding:s,buildQuadTree:l}=t,c=a&&o instanceof a?this.getImageData(o,s):o;r(null,new e.DEMData(n,c,i,s<1,l))}getImageData(t,r){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(t.width,t.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=t.width,this.offscreenCanvas.height=t.height,this.offscreenCanvasContext.drawImage(t,0,0,t.width,t.height);const n=this.offscreenCanvasContext.getImageData(-r,-r,t.width+2*r,t.height+2*r);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:n.width,height:n.height},n.data)}}var o=function e(t,r){var n,a=t&&t.type;if("FeatureCollection"===a)for(n=0;n<t.features.length;n++)e(t.features[n],r);else if("GeometryCollection"===a)for(n=0;n<t.geometries.length;n++)e(t.geometries[n],r);else if("Feature"===a)e(t.geometry,r);else if("Polygon"===a)s(t.coordinates,r);else if("MultiPolygon"===a)for(n=0;n<t.coordinates.length;n++)s(t.coordinates[n],r);return t};function s(e,t){if(0!==e.length){l(e[0],t);for(var r=1;r<e.length;r++)l(e[r],!t)}}function l(e,t){for(var r=0,n=0,a=e.length,i=a-1;n<a;i=n++)r+=(e[n][0]-e[i][0])*(e[i][1]+e[n][1]);r>=0!=!!t&&e.reverse()}const c=e.vectorTile.VectorTileFeature.prototype.toGeoJSON;class u{constructor(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}loadGeometry(){if(1===this._feature.type){const t=[];for(const r of this._feature.geometry)t.push([new e.pointGeometry(r[0],r[1])]);return t}{const t=[];for(const r of this._feature.geometry){const n=[];for(const t of r)n.push(new e.pointGeometry(t[0],t[1]));t.push(n)}return t}}toGeoJSON(e,t,r){return c.call(this,e,t,r)}}class p{constructor(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t}feature(e){return new u(this._features[e])}}var d=e.vectorTile.VectorTileFeature,h=f;function f(e,t){this.options=t||{},this.features=e,this.length=e.length}function m(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}f.prototype.feature=function(e){return new m(this.features[e],this.options.extent)},m.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var r=0;r<t.length;r++){for(var n=t[r],a=[],i=0;i<n.length;i++)a.push(new e.pointGeometry(n[i][0],n[i][1]));this.geometry.push(a)}return this.geometry},m.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,r=-1/0,n=1/0,a=-1/0,i=0;i<e.length;i++)for(var o=e[i],s=0;s<o.length;s++){var l=o[s];t=Math.min(t,l.x),r=Math.max(r,l.x),n=Math.min(n,l.y),a=Math.max(a,l.y)}return[t,n,r,a]},m.prototype.toGeoJSON=d.prototype.toGeoJSON;var g=y,v=h;function y(t){var r=new e.pbf;return function(e,t){for(var r in e.layers)t.writeMessage(3,b,e.layers[r])}(t,r),r.finish()}function b(e,t){var r;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var n={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<e.length;r++)n.feature=e.feature(r),t.writeMessage(2,_,n);var a=n.keys;for(r=0;r<a.length;r++)t.writeStringField(3,a[r]);var i=n.values;for(r=0;r<i.length;r++)t.writeMessage(4,k,i[r])}function _(e,t){var r=e.feature;void 0!==r.id&&t.writeVarintField(1,r.id),t.writeMessage(2,x,e),t.writeVarintField(3,r.type),t.writeMessage(4,C,r)}function x(e,t){var r=e.feature,n=e.keys,a=e.values,i=e.keycache,o=e.valuecache;for(var s in r.properties){var l=i[s];void 0===l&&(n.push(s),i[s]=l=n.length-1),t.writeVarint(l);var c=r.properties[s],u=typeof c;"string"!==u&&"boolean"!==u&&"number"!==u&&(c=JSON.stringify(c));var p=u+":"+c,d=o[p];void 0===d&&(a.push(c),o[p]=d=a.length-1),t.writeVarint(d)}}function w(e,t){return(t<<3)+(7&e)}function E(e){return e<<1^e>>31}function C(e,t){for(var r=e.loadGeometry(),n=e.type,a=0,i=0,o=r.length,s=0;s<o;s++){var l=r[s],c=1;1===n&&(c=l.length),t.writeVarint(w(1,c));for(var u=3===n?l.length-1:l.length,p=0;p<u;p++){1===p&&1!==n&&t.writeVarint(w(2,u-1));var d=l[p].x-a,h=l[p].y-i;t.writeVarint(E(d)),t.writeVarint(E(h)),a+=d,i+=h}3===n&&t.writeVarint(w(7,1))}}function k(e,t){var r=typeof e;"string"===r?t.writeStringField(1,e):"boolean"===r?t.writeBooleanField(7,e):"number"===r&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function T(e,t,r,n,a,i){if(a-n<=r)return;const o=n+a>>1;S(e,t,o,n,a,i%2),T(e,t,r,n,o-1,i+1),T(e,t,r,o+1,a,i+1)}function S(e,t,r,n,a,i){for(;a>n;){if(a-n>600){const o=a-n+1,s=r-n+1,l=Math.log(o),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(o-c)/o)*(s-o/2<0?-1:1);S(e,t,r,Math.max(n,Math.floor(r-s*c/o+u)),Math.min(a,Math.floor(r+(o-s)*c/o+u)),i)}const o=t[2*r+i];let s=n,l=a;for(P(e,t,n,r),t[2*a+i]>o&&P(e,t,n,a);s<l;){for(P(e,t,s,l),s++,l--;t[2*s+i]<o;)s++;for(;t[2*l+i]>o;)l--}t[2*n+i]===o?P(e,t,n,l):(l++,P(e,t,l,a)),l<=r&&(n=l+1),r<=l&&(a=l-1)}}function P(e,t,r,n){M(e,r,n),M(t,2*r,2*n),M(t,2*r+1,2*n+1)}function M(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function I(e,t,r,n){const a=e-r,i=t-n;return a*a+i*i}g.fromVectorTileJs=y,g.fromGeojsonVt=function(e,t){t=t||{};var r={};for(var n in e)r[n]=new h(e[n].features,t),r[n].name=n,r[n].version=t.version,r[n].extent=t.extent;return y({layers:r})},g.GeoJSONWrapper=v;const A=e=>e[0],O=e=>e[1];class z{constructor(e,t=A,r=O,n=64,a=Float64Array){this.nodeSize=n,this.points=e;const i=e.length<65536?Uint16Array:Uint32Array,o=this.ids=new i(e.length),s=this.coords=new a(2*e.length);for(let n=0;n<e.length;n++)o[n]=n,s[2*n]=t(e[n]),s[2*n+1]=r(e[n]);T(o,s,n,0,o.length-1,0)}range(e,t,r,n){return function(e,t,r,n,a,i,o){const s=[0,e.length-1,0],l=[];let c,u;for(;s.length;){const p=s.pop(),d=s.pop(),h=s.pop();if(d-h<=o){for(let o=h;o<=d;o++)c=t[2*o],u=t[2*o+1],c>=r&&c<=a&&u>=n&&u<=i&&l.push(e[o]);continue}const f=Math.floor((h+d)/2);c=t[2*f],u=t[2*f+1],c>=r&&c<=a&&u>=n&&u<=i&&l.push(e[f]);const m=(p+1)%2;(0===p?r<=c:n<=u)&&(s.push(h),s.push(f-1),s.push(m)),(0===p?a>=c:i>=u)&&(s.push(f+1),s.push(d),s.push(m))}return l}(this.ids,this.coords,e,t,r,n,this.nodeSize)}within(e,t,r){return function(e,t,r,n,a,i){const o=[0,e.length-1,0],s=[],l=a*a;for(;o.length;){const c=o.pop(),u=o.pop(),p=o.pop();if(u-p<=i){for(let a=p;a<=u;a++)I(t[2*a],t[2*a+1],r,n)<=l&&s.push(e[a]);continue}const d=Math.floor((p+u)/2),h=t[2*d],f=t[2*d+1];I(h,f,r,n)<=l&&s.push(e[d]);const m=(c+1)%2;(0===c?r-a<=h:n-a<=f)&&(o.push(p),o.push(d-1),o.push(m)),(0===c?r+a>=h:n+a>=f)&&(o.push(d+1),o.push(u),o.push(m))}return s}(this.ids,this.coords,e,t,r,this.nodeSize)}}const R={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},L=Math.fround||(D=new Float32Array(1),e=>(D[0]=+e,D[0]));var D;class B{constructor(e){this.options=H(Object.create(R),e),this.trees=new Array(this.options.maxZoom+1)}load(e){const{log:t,minZoom:r,maxZoom:n,nodeSize:a}=this.options;t&&console.time("total time");const i=`prepare ${e.length} points`;t&&console.time(i),this.points=e;let o=[];for(let t=0;t<e.length;t++)e[t].geometry&&o.push(F(e[t],t));this.trees[n+1]=new z(o,G,W,a,Float32Array),t&&console.timeEnd(i);for(let e=n;e>=r;e--){const r=+Date.now();o=this._cluster(o,e),this.trees[e]=new z(o,G,W,a,Float32Array),t&&console.log("z%d: %d clusters in %dms",e,o.length,+Date.now()-r)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let r=((e[0]+180)%360+360)%360-180;const n=Math.max(-90,Math.min(90,e[1]));let a=180===e[2]?180:((e[2]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,a=180;else if(r>a){const e=this.getClusters([r,n,180,i],t),o=this.getClusters([-180,n,a,i],t);return e.concat(o)}const o=this.trees[this._limitZoom(t)],s=o.range(j(r),U(i),j(a),U(n)),l=[];for(const e of s){const t=o.points[e];l.push(t.numPoints?N(t):this.points[t.index])}return l}getChildren(e){const t=this._getOriginId(e),r=this._getOriginZoom(e),n="No cluster with the specified id.",a=this.trees[r];if(!a)throw new Error(n);const i=a.points[t];if(!i)throw new Error(n);const o=this.options.radius/(this.options.extent*Math.pow(2,r-1)),s=a.within(i.x,i.y,o),l=[];for(const t of s){const r=a.points[t];r.parentId===e&&l.push(r.numPoints?N(r):this.points[r.index])}if(0===l.length)throw new Error(n);return l}getLeaves(e,t,r){const n=[];return this._appendLeaves(n,e,t=t||10,r=r||0,0),n}getTile(e,t,r){const n=this.trees[this._limitZoom(e)],a=Math.pow(2,e),{extent:i,radius:o}=this.options,s=o/i,l=(r-s)/a,c=(r+1+s)/a,u={features:[]};return this._addTileFeatures(n.range((t-s)/a,l,(t+1+s)/a,c),n.points,t,r,a,u),0===t&&this._addTileFeatures(n.range(1-s/a,l,1,c),n.points,a,r,a,u),t===a-1&&this._addTileFeatures(n.range(0,l,s/a,c),n.points,-1,r,a,u),u.features.length?u:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const r=this.getChildren(e);if(t++,1!==r.length)break;e=r[0].properties.cluster_id}return t}_appendLeaves(e,t,r,n,a){const i=this.getChildren(t);for(const t of i){const i=t.properties;if(i&&i.cluster?a+i.point_count<=n?a+=i.point_count:a=this._appendLeaves(e,i.cluster_id,r,n,a):a<n?a++:e.push(t),e.length===r)break}return a}_addTileFeatures(e,t,r,n,a,i){for(const o of e){const e=t[o],s=e.numPoints;let l,c,u;if(s)l=V(e),c=e.x,u=e.y;else{const t=this.points[e.index];l=t.properties,c=j(t.geometry.coordinates[0]),u=U(t.geometry.coordinates[1])}const p={type:1,geometry:[[Math.round(this.options.extent*(c*a-r)),Math.round(this.options.extent*(u*a-n))]],tags:l};let d;s?d=e.id:this.options.generateId?d=e.index:this.points[e.index].id&&(d=this.points[e.index].id),void 0!==d&&(p.id=d),i.features.push(p)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(+e,this.options.maxZoom+1))}_cluster(e,t){const r=[],{radius:n,extent:a,reduce:i,minPoints:o}=this.options,s=n/(a*Math.pow(2,t));for(let n=0;n<e.length;n++){const a=e[n];if(a.zoom<=t)continue;a.zoom=t;const l=this.trees[t+1],c=l.within(a.x,a.y,s),u=a.numPoints||1;let p=u;for(const e of c){const r=l.points[e];r.zoom>t&&(p+=r.numPoints||1)}if(p>=o){let e=a.x*u,o=a.y*u,s=i&&u>1?this._map(a,!0):null;const d=(n<<5)+(t+1)+this.points.length;for(const r of c){const n=l.points[r];if(n.zoom<=t)continue;n.zoom=t;const c=n.numPoints||1;e+=n.x*c,o+=n.y*c,n.parentId=d,i&&(s||(s=this._map(a,!0)),i(s,this._map(n)))}a.parentId=d,r.push($(e/p,o/p,d,p,s))}else if(r.push(a),p>1)for(const e of c){const n=l.points[e];n.zoom<=t||(n.zoom=t,r.push(n))}}return r}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t){if(e.numPoints)return t?H({},e.properties):e.properties;const r=this.points[e.index].properties,n=this.options.map(r);return t&&n===r?H({},n):n}}function $(e,t,r,n,a){return{x:L(e),y:L(t),zoom:1/0,id:r,parentId:-1,numPoints:n,properties:a}}function F(e,t){const[r,n]=e.geometry.coordinates;return{x:L(j(r)),y:L(U(n)),zoom:1/0,index:t,parentId:-1}}function N(e){return{type:"Feature",id:e.id,properties:V(e),geometry:{type:"Point",coordinates:[(t=e.x,360*(t-.5)),q(e.y)]}};var t}function V(e){const t=e.numPoints,r=t>=1e4?`${Math.round(t/1e3)}k`:t>=1e3?Math.round(t/100)/10+"k":t;return H(H({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:r})}function j(e){return e/360+.5}function U(e){const t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function q(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function H(e,t){for(const r in t)e[r]=t[r];return e}function G(e){return e.x}function W(e){return e.y}function X(e,t,r,n){for(var a,i=n,o=r-t>>1,s=r-t,l=e[t],c=e[t+1],u=e[r],p=e[r+1],d=t+3;d<r;d+=3){var h=Z(e[d],e[d+1],l,c,u,p);if(h>i)a=d,i=h;else if(h===i){var f=Math.abs(d-o);f<s&&(a=d,s=f)}}i>n&&(a-t>3&&X(e,t,a,n),e[a+2]=i,r-a>3&&X(e,a,r,n))}function Z(e,t,r,n,a,i){var o=a-r,s=i-n;if(0!==o||0!==s){var l=((e-r)*o+(t-n)*s)/(o*o+s*s);l>1?(r=a,n=i):l>0&&(r+=o*l,n+=s*l)}return(o=e-r)*o+(s=t-n)*s}function Y(e,t,r,n){var a={id:void 0===e?null:e,type:t,geometry:r,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,r=e.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)K(e,t);else if("Polygon"===r||"MultiLineString"===r)for(var n=0;n<t.length;n++)K(e,t[n]);else if("MultiPolygon"===r)for(n=0;n<t.length;n++)for(var a=0;a<t[n].length;a++)K(e,t[n][a])}(a),a}function K(e,t){for(var r=0;r<t.length;r+=3)e.minX=Math.min(e.minX,t[r]),e.minY=Math.min(e.minY,t[r+1]),e.maxX=Math.max(e.maxX,t[r]),e.maxY=Math.max(e.maxY,t[r+1])}function Q(e,t,r,n){if(t.geometry){var a=t.geometry.coordinates,i=t.geometry.type,o=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),s=[],l=t.id;if(r.promoteId?l=t.properties[r.promoteId]:r.generateId&&(l=n||0),"Point"===i)J(a,s);else if("MultiPoint"===i)for(var c=0;c<a.length;c++)J(a[c],s);else if("LineString"===i)ee(a,s,o,!1);else if("MultiLineString"===i){if(r.lineMetrics){for(c=0;c<a.length;c++)ee(a[c],s=[],o,!1),e.push(Y(l,"LineString",s,t.properties));return}te(a,s,o,!1)}else if("Polygon"===i)te(a,s,o,!0);else{if("MultiPolygon"!==i){if("GeometryCollection"===i){for(c=0;c<t.geometry.geometries.length;c++)Q(e,{id:l,geometry:t.geometry.geometries[c],properties:t.properties},r,n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<a.length;c++){var u=[];te(a[c],u,o,!0),s.push(u)}}e.push(Y(l,i,s,t.properties))}}function J(e,t){t.push(re(e[0])),t.push(ne(e[1])),t.push(0)}function ee(e,t,r,n){for(var a,i,o=0,s=0;s<e.length;s++){var l=re(e[s][0]),c=ne(e[s][1]);t.push(l),t.push(c),t.push(0),s>0&&(o+=n?(a*c-l*i)/2:Math.sqrt(Math.pow(l-a,2)+Math.pow(c-i,2))),a=l,i=c}var u=t.length-3;t[2]=1,X(t,0,u,r),t[u+2]=1,t.size=Math.abs(o),t.start=0,t.end=t.size}function te(e,t,r,n){for(var a=0;a<e.length;a++){var i=[];ee(e[a],i,r,n),t.push(i)}}function re(e){return e/360+.5}function ne(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function ae(e,t,r,n,a,i,o,s){if(n/=t,i>=(r/=t)&&o<n)return e;if(o<r||i>=n)return null;for(var l=[],c=0;c<e.length;c++){var u=e[c],p=u.geometry,d=u.type,h=0===a?u.minX:u.minY,f=0===a?u.maxX:u.maxY;if(h>=r&&f<n)l.push(u);else if(!(f<r||h>=n)){var m=[];if("Point"===d||"MultiPoint"===d)ie(p,m,r,n,a);else if("LineString"===d)oe(p,m,r,n,a,!1,s.lineMetrics);else if("MultiLineString"===d)le(p,m,r,n,a,!1);else if("Polygon"===d)le(p,m,r,n,a,!0);else if("MultiPolygon"===d)for(var g=0;g<p.length;g++){var v=[];le(p[g],v,r,n,a,!0),v.length&&m.push(v)}if(m.length){if(s.lineMetrics&&"LineString"===d){for(g=0;g<m.length;g++)l.push(Y(u.id,d,m[g],u.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===m.length?(d="LineString",m=m[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===m.length?"Point":"MultiPoint"),l.push(Y(u.id,d,m,u.tags))}}}return l.length?l:null}function ie(e,t,r,n,a){for(var i=0;i<e.length;i+=3){var o=e[i+a];o>=r&&o<=n&&(t.push(e[i]),t.push(e[i+1]),t.push(e[i+2]))}}function oe(e,t,r,n,a,i,o){for(var s,l,c=se(e),u=0===a?ue:pe,p=e.start,d=0;d<e.length-3;d+=3){var h=e[d],f=e[d+1],m=e[d+2],g=e[d+3],v=e[d+4],y=0===a?h:f,b=0===a?g:v,_=!1;o&&(s=Math.sqrt(Math.pow(h-g,2)+Math.pow(f-v,2))),y<r?b>r&&(l=u(c,h,f,g,v,r),o&&(c.start=p+s*l)):y>n?b<n&&(l=u(c,h,f,g,v,n),o&&(c.start=p+s*l)):ce(c,h,f,m),b<r&&y>=r&&(l=u(c,h,f,g,v,r),_=!0),b>n&&y<=n&&(l=u(c,h,f,g,v,n),_=!0),!i&&_&&(o&&(c.end=p+s*l),t.push(c),c=se(e)),o&&(p+=s)}var x=e.length-3;h=e[x],f=e[x+1],m=e[x+2],(y=0===a?h:f)>=r&&y<=n&&ce(c,h,f,m),x=c.length-3,i&&x>=3&&(c[x]!==c[0]||c[x+1]!==c[1])&&ce(c,c[0],c[1],c[2]),c.length&&t.push(c)}function se(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function le(e,t,r,n,a,i){for(var o=0;o<e.length;o++)oe(e[o],t,r,n,a,i,!1)}function ce(e,t,r,n){e.push(t),e.push(r),e.push(n)}function ue(e,t,r,n,a,i){var o=(i-t)/(n-t);return e.push(i),e.push(r+(a-r)*o),e.push(1),o}function pe(e,t,r,n,a,i){var o=(i-r)/(a-r);return e.push(t+(n-t)*o),e.push(i),e.push(1),o}function de(e,t){for(var r=[],n=0;n<e.length;n++){var a,i=e[n],o=i.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)a=he(i.geometry,t);else if("MultiLineString"===o||"Polygon"===o){a=[];for(var s=0;s<i.geometry.length;s++)a.push(he(i.geometry[s],t))}else if("MultiPolygon"===o)for(a=[],s=0;s<i.geometry.length;s++){for(var l=[],c=0;c<i.geometry[s].length;c++)l.push(he(i.geometry[s][c],t));a.push(l)}r.push(Y(i.id,o,a,i.tags))}return r}function he(e,t){var r=[];r.size=e.size,void 0!==e.start&&(r.start=e.start,r.end=e.end);for(var n=0;n<e.length;n+=3)r.push(e[n]+t,e[n+1],e[n+2]);return r}function fe(e,t){if(e.transformed)return e;var r,n,a,i=1<<e.z,o=e.x,s=e.y;for(r=0;r<e.features.length;r++){var l=e.features[r],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(n=0;n<c.length;n+=2)l.geometry.push(me(c[n],c[n+1],t,i,o,s));else for(n=0;n<c.length;n++){var p=[];for(a=0;a<c[n].length;a+=2)p.push(me(c[n][a],c[n][a+1],t,i,o,s));l.geometry.push(p)}}return e.transformed=!0,e}function me(e,t,r,n,a,i){return[Math.round(r*(e*n-a)),Math.round(r*(t*n-i))]}function ge(e,t,r,n,a){for(var i=t===a.maxZoom?0:a.tolerance/((1<<t)*a.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:n,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){o.numFeatures++,ve(o,e[s],i,a);var l=e[s].minX,c=e[s].minY,u=e[s].maxX,p=e[s].maxY;l<o.minX&&(o.minX=l),c<o.minY&&(o.minY=c),u>o.maxX&&(o.maxX=u),p>o.maxY&&(o.maxY=p)}return o}function ve(e,t,r,n){var a=t.geometry,i=t.type,o=[];if("Point"===i||"MultiPoint"===i)for(var s=0;s<a.length;s+=3)o.push(a[s]),o.push(a[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===i)ye(o,a,e,r,!1,!1);else if("MultiLineString"===i||"Polygon"===i)for(s=0;s<a.length;s++)ye(o,a[s],e,r,"Polygon"===i,0===s);else if("MultiPolygon"===i)for(var l=0;l<a.length;l++){var c=a[l];for(s=0;s<c.length;s++)ye(o,c[s],e,r,!0,0===s)}if(o.length){var u=t.tags||null;if("LineString"===i&&n.lineMetrics){for(var p in u={},t.tags)u[p]=t.tags[p];u.mapbox_clip_start=a.start/a.size,u.mapbox_clip_end=a.end/a.size}var d={geometry:o,type:"Polygon"===i||"MultiPolygon"===i?3:"LineString"===i||"MultiLineString"===i?2:1,tags:u};null!==t.id&&(d.id=t.id),e.features.push(d)}}function ye(e,t,r,n,a,i){var o=n*n;if(n>0&&t.size<(a?o:n))r.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===n||t[l+2]>o)&&(r.numSimplified++,s.push(t[l]),s.push(t[l+1])),r.numPoints++;a&&function(e,t){for(var r=0,n=0,a=e.length,i=a-2;n<a;i=n,n+=2)r+=(e[n]-e[i])*(e[n+1]+e[i+1]);if(r>0===t)for(n=0,a=e.length;n<a/2;n+=2){var o=e[n],s=e[n+1];e[n]=e[a-2-n],e[n+1]=e[a-1-n],e[a-2-n]=o,e[a-1-n]=s}}(s,i),e.push(s)}}function be(e,t){var r=(t=this.options=function(e,t){for(var r in t)e[r]=t[r];return e}(Object.create(this.options),t)).debug;if(r&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var n=function(e,t){var r=[];if("FeatureCollection"===e.type)for(var n=0;n<e.features.length;n++)Q(r,e.features[n],t,n);else Q(r,"Feature"===e.type?e:{geometry:e},t);return r}(e,t);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(n=function(e,t){var r=t.buffer/t.extent,n=e,a=ae(e,1,-1-r,r,0,-1,2,t),i=ae(e,1,1-r,2+r,0,-1,2,t);return(a||i)&&(n=ae(e,1,-r,1+r,0,-1,2,t)||[],a&&(n=de(a,1).concat(n)),i&&(n=n.concat(de(i,-1)))),n}(n,t)).length&&this.splitTile(n,0,0,0),r&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function _e(e,t,r){return 32*((1<<e)*r+t)+e}function xe(e,t){const r=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);const n=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!n)return t(null,null);const a=new p(n.features);let i=g(a);0===i.byteOffset&&i.byteLength===i.buffer.byteLength||(i=new Uint8Array(i)),t(null,{vectorTile:a,rawData:i.buffer})}be.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},be.prototype.splitTile=function(e,t,r,n,a,i,o){for(var s=[e,t,r,n],l=this.options,c=l.debug;s.length;){n=s.pop(),r=s.pop(),t=s.pop(),e=s.pop();var u=1<<t,p=_e(t,r,n),d=this.tiles[p];if(!d&&(c>1&&console.time("creation"),d=this.tiles[p]=ge(e,t,r,n,l),this.tileCoords.push({z:t,x:r,y:n}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,r,n,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var h="z"+t;this.stats[h]=(this.stats[h]||0)+1,this.total++}if(d.source=e,a){if(t===l.maxZoom||t===a)continue;var f=1<<a-t;if(r!==Math.floor(i/f)||n!==Math.floor(o/f))continue}else if(t===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue;if(d.source=null,0!==e.length){c>1&&console.time("clipping");var m,g,v,y,b,_,x=.5*l.buffer/l.extent,w=.5-x,E=.5+x,C=1+x;m=g=v=y=null,b=ae(e,u,r-x,r+E,0,d.minX,d.maxX,l),_=ae(e,u,r+w,r+C,0,d.minX,d.maxX,l),e=null,b&&(m=ae(b,u,n-x,n+E,1,d.minY,d.maxY,l),g=ae(b,u,n+w,n+C,1,d.minY,d.maxY,l),b=null),_&&(v=ae(_,u,n-x,n+E,1,d.minY,d.maxY,l),y=ae(_,u,n+w,n+C,1,d.minY,d.maxY,l),_=null),c>1&&console.timeEnd("clipping"),s.push(m||[],t+1,2*r,2*n),s.push(g||[],t+1,2*r,2*n+1),s.push(v||[],t+1,2*r+1,2*n),s.push(y||[],t+1,2*r+1,2*n+1)}}},be.prototype.getTile=function(e,t,r){var n=this.options,a=n.extent,i=n.debug;if(e<0||e>24)return null;var o=1<<e,s=_e(e,t=(t%o+o)%o,r);if(this.tiles[s])return fe(this.tiles[s],a);i>1&&console.log("drilling down to z%d-%d-%d",e,t,r);for(var l,c=e,u=t,p=r;!l&&c>0;)c--,u=Math.floor(u/2),p=Math.floor(p/2),l=this.tiles[_e(c,u,p)];return l&&l.source?(i>1&&console.log("found parent tile z%d-%d-%d",c,u,p),i>1&&console.time("drilling down"),this.splitTile(l.source,c,u,p,e,t,r),i>1&&console.timeEnd("drilling down"),this.tiles[s]?fe(this.tiles[s],a):null):null};class we extends e.VectorTileWorkerSource{constructor(e,t,r,n,a){super(e,t,r,n,xe),a&&(this.loadGeoJSON=a)}loadData(t,r){const n=t&&t.request,a=n&&n.collectResourceTiming;this.loadGeoJSON(t,((i,s)=>{if(i||!s)return r(i);if("object"!=typeof s)return r(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));{o(s,!0);try{if(t.filter){const r=e.createExpression(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===r.result)throw new Error(r.value.map((e=>`${e.key}: ${e.message}`)).join(", "));const n=s.features.filter((e=>r.value.evaluate({zoom:0},e)));s={type:"FeatureCollection",features:n}}this._geoJSONIndex=t.cluster?new B(function({superclusterOptions:t,clusterProperties:r}){if(!r||!t)return t;const n={},a={},i={accumulated:null,zoom:0},o={properties:null},s=Object.keys(r);for(const t of s){const[i,o]=r[t],s=e.createExpression(o),l=e.createExpression("string"==typeof i?[i,["accumulated"],["get",t]]:i);n[t]=s.value,a[t]=l.value}return t.map=e=>{o.properties=e;const t={};for(const e of s)t[e]=n[e].evaluate(i,o);return t},t.reduce=(e,t)=>{o.properties=t;for(const t of s)i.accumulated=e[t],e[t]=a[t].evaluate(i,o)},t}(t)).load(s.features):function(e,t){return new be(e,t)}(s,t.geojsonVtOptions)}catch(i){return r(i)}this.loaded={};const l={};if(a){const r=e.getPerformanceMeasurement(n);r&&(l.resourceTiming={},l.resourceTiming[t.source]=JSON.parse(JSON.stringify(r)))}r(null,l)}}))}reloadTile(e,t){const r=this.loaded;return r&&r[e.uid]?super.reloadTile(e,t):this.loadTile(e,t)}loadGeoJSON(t,r){if(t.request)e.getJSON(t.request,r);else{if("string"!=typeof t.data)return r(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));try{return r(null,JSON.parse(t.data))}catch(e){return r(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}getClusterChildren(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}getClusterLeaves(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}class Ee{constructor(t){this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded=!1,this.workerSourceTypes={vector:e.VectorTileWorkerSource,geojson:we},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(e,t)=>{if(this.workerSourceTypes[e])throw new Error(`Worker source with name "${e}" already registered.`);this.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=t=>{if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}checkIfReady(e,t,r){r()}setReferrer(e,t){this.referrer=t}spriteLoaded(t,r){this.isSpriteLoaded=r;for(const n in this.workerSources[t]){const a=this.workerSources[t][n];for(const t in a)a[t]instanceof e.VectorTileWorkerSource&&(a[t].isSpriteLoaded=r,a[t].fire(new e.Event("isSpriteLoaded")))}}setImages(e,t,r){this.availableImages[e]=t;for(const r in this.workerSources[e]){const n=this.workerSources[e][r];for(const e in n)n[e].availableImages=t}r()}enableTerrain(e,t,r){this.terrain=t,r()}setLayers(e,t,r){this.getLayerIndex(e).replace(t),r()}updateLayers(e,t,r){this.getLayerIndex(e).update(t.layers,t.removedIds),r()}loadTile(t,r,n){const a=this.enableTerrain?e.extend({enableTerrain:this.terrain},r):r;this.getWorkerSource(t,r.type,r.source).loadTile(a,n)}loadDEMTile(t,r,n){const a=this.enableTerrain?e.extend({buildQuadTree:this.terrain},r):r;this.getDEMWorkerSource(t,r.source).loadTile(a,n)}reloadTile(t,r,n){const a=this.enableTerrain?e.extend({enableTerrain:this.terrain},r):r;this.getWorkerSource(t,r.type,r.source).reloadTile(a,n)}abortTile(e,t,r){this.getWorkerSource(e,t.type,t.source).abortTile(t,r)}removeTile(e,t,r){this.getWorkerSource(e,t.type,t.source).removeTile(t,r)}removeSource(e,t,r){if(!this.workerSources[e]||!this.workerSources[e][t.type]||!this.workerSources[e][t.type][t.source])return;const n=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==n.removeSource?n.removeSource(t,r):r()}loadWorkerSource(e,t,r){try{this.self.importScripts(t.url),r()}catch(e){r(e.toString())}}syncRTLPluginState(t,r,n){try{e.plugin.setState(r);const t=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=t){this.self.importScripts(t);const r=e.plugin.isParsed();n(r?void 0:new Error(`RTL Text Plugin failed to import scripts from ${t}`),r)}}catch(e){n(e.toString())}}getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}getLayerIndex(e){let t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new n),t}getWorkerSource(e,t,r){return this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),this.workerSources[e][t][r]||(this.workerSources[e][t][r]=new this.workerSourceTypes[t]({send:(t,r,n,a,i,o)=>{this.actor.send(t,r,n,e,i,o)},scheduler:this.actor.scheduler},this.getLayerIndex(e),this.getAvailableImages(e),this.isSpriteLoaded)),this.workerSources[e][t][r]}getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new i),this.demWorkerSources[e][t]}enforceCacheSizeLimit(t,r){e.enforceCacheSizeLimit(r)}getWorkerPerformanceMetrics(e,t,r){r(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Ee(self)),Ee})),n(["./shared"],(function(e){var t=r;function r(e){return!function(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,r=new Blob([""],{type:"text/javascript"}),n=URL.createObjectURL(r);try{t=new Worker(n),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(n),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var r=t.getImageData(0,0,1,1);return r&&r.width===e.width}()?(void 0===n[t=e&&e.failIfMajorPerformanceCaveat]&&(n[t]=function(e){var t,n=function(e){var t=document.createElement("canvas"),n=Object.create(r.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=e,t.getContext("webgl",n)||t.getContext("experimental-webgl",n)}(e);if(!n)return!1;try{t=n.createShader(n.VERTEX_SHADER)}catch(e){return!1}return!(!t||n.isContextLost())&&(n.shaderSource(t,"void main() {}"),n.compileShader(t),!0===n.getShaderParameter(t,n.COMPILE_STATUS))}(t)),n[t]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var t}(e)}var n={};function a(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!a(e[r],t[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!a(e[r],t[r]))return!1;return!0}return e===t}r.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const i={create:function(t,r,n){const a=e.window.document.createElement(t);return void 0!==r&&(a.className=r),n&&n.appendChild(a),a},createNS:function(t,r){return e.window.document.createElementNS(t,r)}},o=e.window.document&&e.window.document.documentElement.style,s=o&&void 0!==o.userSelect?"userSelect":"WebkitUserSelect";let l;i.disableDrag=function(){o&&s&&(l=o[s],o[s]="none")},i.enableDrag=function(){o&&s&&(o[s]=l)},i.setTransform=function(e,t){e.style.transform=t};let c=!1;try{const t=Object.defineProperty({},"passive",{get(){c=!0}});e.window.addEventListener("test",t,t),e.window.removeEventListener("test",t,t)}catch(e){c=!1}i.addEventListener=function(e,t,r,n={}){e.addEventListener(t,r,"passive"in n&&c?n:n.capture)},i.removeEventListener=function(e,t,r,n={}){e.removeEventListener(t,r,"passive"in n&&c?n:n.capture)};const u=function(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",u,!0)};function p(t,r,n){const a=t.offsetWidth===r.width?1:t.offsetWidth/r.width;return new e.pointGeometry((n.clientX-r.left)*a,(n.clientY-r.top)*a)}i.suppressClick=function(){e.window.addEventListener("click",u,!0),e.window.setTimeout((()=>{e.window.removeEventListener("click",u,!0)}),0)},i.mousePos=function(e,t){const r=e.getBoundingClientRect();return p(e,r,t)},i.touchPos=function(e,t){const r=e.getBoundingClientRect(),n=[];for(let a=0;a<t.length;a++)n.push(p(e,r,t[a]));return n},i.mouseButton=function(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button},i.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)};class d{constructor(e,t){this.pos=e,this.dir=t}intersectsPlane(t,r,n){const a=e.dot(r,this.dir);if(Math.abs(a)<1e-6)return!1;const i=e.dot(e.sub(e.create(),t,this.pos),r)/a,o=e.scaleAndAdd(e.create(),this.pos,this.dir,i);return e.copy(n,o),!0}}class h{constructor(e,t){this.points=e,this.planes=t}static fromInvProjectionMatrix(t,r,n){const a=Math.pow(2,n),i=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((n=>{const i=e.transformMat4([],n,t),o=1/i[3]/r*a;return e.mul(i,i,[o,o,1/i[3],o])})),o=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((t=>{const r=e.sub([],i[t[0]],i[t[1]]),n=e.sub([],i[t[2]],i[t[1]]),a=e.normalize([],e.cross([],r,n)),o=-e.dot(a,i[t[1]]);return a.concat(o)}));return new h(i,o)}}class f{constructor(t,r){this.min=t,this.max=r,this.center=e.scale([],e.add([],this.min,this.max),.5)}quadrant(t){const r=[t%2==0,t<2],n=e.clone(this.min),a=e.clone(this.max);for(let e=0;e<r.length;e++)n[e]=r[e]?this.min[e]:this.center[e],a[e]=r[e]?this.center[e]:this.max[e];return a[2]=this.max[2],new f(n,a)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}intersects(t){const r=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let n=!0;for(let a=0;a<t.planes.length;a++){const i=t.planes[a];let o=0;for(let t=0;t<r.length;t++)o+=e.dot$1(i,r[t])>=0;if(0===o)return 0;o!==r.length&&(n=!1)}if(n)return 2;for(let e=0;e<3;e++){let r=Number.MAX_VALUE,n=-Number.MAX_VALUE;for(let a=0;a<t.points.length;a++){const i=t.points[a][e]-this.min[e];r=Math.min(r,i),n=Math.max(n,i)}if(n<0||r>this.max[e]-this.min[e])return 0}return 1}}function m(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}class g extends e.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,callback:t}of this.requestors)this._notify(e,t);this.requestors=[]}}getImage(e){return this.images[e]}addImage(e,t){this._validate(e,t)&&(this.images[e]=t)}_validate(t,r){let n=!0;return this._validateStretch(r.stretchX,r.data&&r.data.width)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchX" value`))),n=!1),this._validateStretch(r.stretchY,r.data&&r.data.height)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchY" value`))),n=!1),this._validateContent(r.content,r)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "content" value`))),n=!1),n}_validateStretch(e,t){if(!e)return!0;let r=0;for(const n of e){if(n[0]<r||n[1]<n[0]||t<n[1])return!1;r=n[1]}return!0}_validateContent(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}updateImage(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e,t){let r=!0;if(!this.isLoaded())for(const t of e)this.images[t]||(r=!1);this.isLoaded()||r?this._notify(e,t):this.requestors.push({ids:e,callback:t})}_notify(t,r){const n={};for(const r of t){this.images[r]||this.fire(new e.Event("styleimagemissing",{id:r}));const t=this.images[r];t?n[r]={data:t.data.clone(),pixelRatio:t.pixelRatio,sdf:t.sdf,version:t.version,stretchX:t.stretchX,stretchY:t.stretchY,content:t.content,hasRenderCallback:Boolean(t.userImage&&t.userImage.render)}:e.warnOnce(`Image "${r}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}r(null,n)}getPixelSize(){const{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(t){const r=this.patterns[t],n=this.getImage(t);if(!n)return null;if(r&&r.position.version===n.version)return r.position;if(r)r.position.version=n.version;else{const r={w:n.data.width+2,h:n.data.height+2,x:0,y:0},a=new e.ImagePosition(r,n);this.patterns[t]={bin:r,position:a}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const r=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,r.RGBA),this.atlasTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const e in this.patterns)t.push(this.patterns[e].bin);const{w:r,h:n}=e.potpack(t),a=this.atlasImage;a.resize({width:r||1,height:n||1});for(const t in this.patterns){const{bin:r}=this.patterns[t],n=r.x+1,i=r.y+1,o=this.images[t].data,s=o.width,l=o.height;e.RGBAImage.copy(o,a,{x:0,y:0},{x:n,y:i},{width:s,height:l}),e.RGBAImage.copy(o,a,{x:0,y:l-1},{x:n,y:i-1},{width:s,height:1}),e.RGBAImage.copy(o,a,{x:0,y:0},{x:n,y:i+l},{width:s,height:1}),e.RGBAImage.copy(o,a,{x:s-1,y:0},{x:n-1,y:i},{width:1,height:l}),e.RGBAImage.copy(o,a,{x:0,y:0},{x:n+s,y:i},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const t of e){if(this.callbackDispatchedThisFrame[t])continue;this.callbackDispatchedThisFrame[t]=!0;const e=this.images[t];m(e)&&this.updateImage(t,e)}}}const v=new e.Properties({anchor:new e.DataConstantProperty(e.spec.light.anchor),position:new class{constructor(){this.specification=e.spec.light.position}possiblyEvaluate(t,r){return function([t,r,n]){const a=e.degToRad(r+90),i=e.degToRad(n);return{x:t*Math.cos(a)*Math.sin(i),y:t*Math.sin(a)*Math.sin(i),z:t*Math.cos(i),azimuthal:r,polar:n}}(t.expression.evaluate(r))}interpolate(t,r,n){return{x:e.number(t.x,r.x,n),y:e.number(t.y,r.y,n),z:e.number(t.z,r.z,n),azimuthal:e.number(t.azimuthal,r.azimuthal,n),polar:e.number(t.polar,r.polar,n)}}},color:new e.DataConstantProperty(e.spec.light.color),intensity:new e.DataConstantProperty(e.spec.light.intensity)}),y="-transition";class b extends e.Evented{constructor(t){super(),this._transitionable=new e.Transitionable(v),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,r={}){if(!this._validate(e.validateLight,t,r))for(const r in t){const n=t[r];e.endsWith(r,y)?this._transitionable.setTransition(r.slice(0,-y.length),n):this._transitionable.setValue(r,n)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,r,n){return(!n||!1!==n.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:r,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}const _=new e.Properties({source:new e.DataConstantProperty(e.spec.terrain.source),exaggeration:new e.DataConstantProperty(e.spec.terrain.exaggeration)}),x="-transition";class w extends e.Evented{constructor(t){super(),this._transitionable=new e.Transitionable(_),this.set(t),this._transitioning=this._transitionable.untransitioned()}get(){return this._transitionable.serialize()}set(t){for(const r in t){const n=t[r];e.endsWith(r,x)?this._transitionable.setTransition(r.slice(0,-x.length),n):this._transitionable.setValue(r,n)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}}function E(t,r,n,a){const i=e.smoothstep(45,65,n),[o,s]=C(t,a),l=e.length(r);let c=1-Math.min(1,Math.exp((l-o)/(s-o)*-6));return c*=c*c,c=Math.min(1,1.00747*c),c*i*t.alpha}function C(e,t){const r=.5/Math.tan(.5*t);return[e.range[0]+r,e.range[1]+r]}const k=new e.Properties({range:new e.DataConstantProperty(e.spec.fog.range),color:new e.DataConstantProperty(e.spec.fog.color),"horizon-blend":new e.DataConstantProperty(e.spec.fog["horizon-blend"])}),T="-transition";class S extends e.Evented{constructor(t){super(),this._transitionable=new e.Transitionable(k),this.set(t),this._transitioning=this._transitionable.untransitioned()}get state(){return{range:this.properties.get("range"),horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(t,r={}){if(!this._validate(e.validateFog,t,r))for(const r in t){const n=t[r];e.endsWith(r,T)?this._transitionable.setTransition(r.slice(0,-T.length),n):this._transitionable.setValue(r,n)}}getOpacity(t){const r=this.properties&&this.properties.get("color")||1;return e.smoothstep(45,65,t)*r.a}getOpacityAtLatLng(t,r){return function(t,r,n){const a=e.MercatorCoordinate.fromLngLat(r),i=n.elevation?n.elevation.getAtPointOrZero(a):0,o=[a.x,a.y,i];return e.transformMat4$1(o,o,n.mercatorFogMatrix),E(t,o,n.pitch,n._fov)}(this.state,t,r)}getFovAdjustedRange(e){return C(this.state,e)}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,r,n){return(!n||!1!==n.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:r,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}class P{constructor(t,r){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=e.uniqueId();const n=this.workerPool.acquire(this.id);for(let e=0;e<n.length;e++){const t=new P.Actor(n[e],r,this.id);t.name=`Worker ${e}`,this.actors.push(t)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(t,r,n){e.asyncAll(this.actors,((e,n)=>{e.send(t,r,n)}),n=n||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((e=>{e.remove()})),this.actors=[],this.workerPool.release(this.id)}}function M(t,r,n){return r*(e.EXTENT/(t.tileSize*Math.pow(2,n-t.tileID.overscaledZ)))}P.Actor=e.Actor;class I{constructor(e,t,r,n){this.screenBounds=e,this.cameraPoint=t,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=r,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this.screenGeometry.map((e=>n.pointCoordinate3D(e))),this.cameraGeometry=this.bufferedCameraGeometry(0)}static createFromScreenPoints(t,r){let n,a;if(t instanceof e.pointGeometry||"number"==typeof t[0]){const i=e.pointGeometry.convert(t);n=[e.pointGeometry.convert(t)],a=r.isPointAboveHorizon(i)}else{const i=e.pointGeometry.convert(t[0]),o=e.pointGeometry.convert(t[1]);n=[i,o],a=e.polygonizeBounds(i,o).every((e=>r.isPointAboveHorizon(e)))}return new I(n,r.getCameraPoint(),a,r)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(t){return e.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}bufferedCameraGeometry(t){const r=this.screenBounds[0],n=1===this.screenBounds.length?this.screenBounds[0].add(new e.pointGeometry(1,1)):this.screenBounds[1],a=e.polygonizeBounds(r,n,0,!1);return this.cameraPoint.y>n.y&&(this.cameraPoint.x>r.x&&this.cameraPoint.x<n.x?a.splice(3,0,this.cameraPoint):this.cameraPoint.x>=n.x?a[2]=this.cameraPoint:this.cameraPoint.x<=r.x&&(a[3]=this.cameraPoint)),e.bufferConvexPolygon(a,t)}containsTile(t,r,n){const a=t.queryPadding+1,i=n?this._bufferedCameraMercator(a,r).map((e=>t.tileID.getTilePoint(e))):this._bufferedScreenMercator(a,r).map((e=>t.tileID.getTilePoint(e))),o=this.screenGeometryMercator.map((e=>t.tileID.getTileVec3(e))),s=o.map((t=>new e.pointGeometry(t[0],t[1]))),l=r.getFreeCameraOptions().position||new e.MercatorCoordinate(0,0,0),c=t.tileID.getTileVec3(l),u=o.map((t=>{const r=e.sub(t,t,c);return e.normalize(r,r),new d(c,r)})),p=M(t,1,r.zoom);if(e.polygonIntersectsBox(i,0,0,e.EXTENT,e.EXTENT))return{queryGeometry:this,tilespaceGeometry:s,tilespaceRays:u,bufferedTilespaceGeometry:i,bufferedTilespaceBounds:(h=e.getBounds(i),h.min.x=e.clamp(h.min.x,0,e.EXTENT),h.min.y=e.clamp(h.min.y,0,e.EXTENT),h.max.x=e.clamp(h.max.x,0,e.EXTENT),h.max.y=e.clamp(h.max.y,0,e.EXTENT),h),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:p};var h}_bufferedScreenMercator(e,t){const r=A(e);if(this._screenRaycastCache[r])return this._screenRaycastCache[r];{const n=this.bufferedScreenGeometry(e).map((e=>t.pointCoordinate3D(e)));return this._screenRaycastCache[r]=n,n}}_bufferedCameraMercator(e,t){const r=A(e);if(this._cameraRaycastCache[r])return this._cameraRaycastCache[r];{const n=this.bufferedCameraGeometry(e).map((e=>t.pointCoordinate3D(e)));return this._cameraRaycastCache[r]=n,n}}}function A(e){return 100*e|0}function O(t,r,n){const a=function(a,i){if(a)return n(a);if(i){const a=e.pick(e.extend(i,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(a.vectorLayers=i.vector_layers,a.vectorLayerIds=a.vectorLayers.map((e=>e.id))),a.tiles=r.canonicalizeTileset(a,t.url),n(null,a)}};return t.url?e.getJSON(r.transformRequest(r.normalizeSourceURL(t.url),e.ResourceType.Source),a):e.exported.frame((()=>a(null,t)))}class z{constructor(t,r,n){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=r||0,this.maxzoom=n||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(t){const r=Math.pow(2,t.z),n=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*r),a=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*r),i=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*r),o=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*r);return t.x>=n&&t.x<i&&t.y>=a&&t.y<o}}class R{constructor(e,t,r){this.context=e;const n=e.gl;this.buffer=n.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const L={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class D{constructor(e,t,r,n){this.length=t.length,this.attributes=r,this.itemSize=t.bytesPerElement,this.dynamicDraw=n,this.context=e;const a=e.gl;this.buffer=a.createBuffer(),e.bindVertexBuffer.set(this.buffer),a.bufferData(a.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?a.DYNAMIC_DRAW:a.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let r=0;r<this.attributes.length;r++){const n=t.attributes[this.attributes[r].name];void 0!==n&&e.enableVertexAttribArray(n)}}setVertexAttribPointers(e,t,r){for(let n=0;n<this.attributes.length;n++){const a=this.attributes[n],i=t.attributes[a.name];void 0!==i&&e.vertexAttribPointer(i,a.components,e[L[a.type]],!1,this.itemSize,a.offset+this.itemSize*(r||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class B{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class $ extends B{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class F extends B{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class N extends B{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class V extends B{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class j extends B{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class U extends B{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class q extends B{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class H extends B{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class G extends B{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class W extends B{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class X extends B{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class Z extends B{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class Y extends B{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class K extends B{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class Q extends B{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class J extends B{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class ee extends B{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class te extends B{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class re extends B{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class ne extends B{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class ae extends B{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class ie extends B{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class oe extends B{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class se extends B{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class le extends B{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class ce extends B{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class ue extends B{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class pe extends B{constructor(e){super(e),this.vao=e.extVertexArrayObject}getDefault(){return null}set(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}class de extends B{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class he extends B{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class fe extends B{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class me extends B{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class ge extends me{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class ve extends me{attachment(){return this.gl.DEPTH_ATTACHMENT}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class ye extends ve{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class be{constructor(e,t,r,n){this.context=e,this.width=t,this.height=r;const a=this.framebuffer=e.gl.createFramebuffer();this.colorAttachment=new ge(e,a),n&&(this.depthAttachment=new ve(e,a))}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}e.deleteFramebuffer(this.framebuffer)}}class _e{constructor(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new $(this),this.clearDepth=new F(this),this.clearStencil=new N(this),this.colorMask=new V(this),this.depthMask=new j(this),this.stencilMask=new U(this),this.stencilFunc=new q(this),this.stencilOp=new H(this),this.stencilTest=new G(this),this.depthRange=new W(this),this.depthTest=new X(this),this.depthFunc=new Z(this),this.blend=new Y(this),this.blendFunc=new K(this),this.blendColor=new Q(this),this.blendEquation=new J(this),this.cullFace=new ee(this),this.cullFaceSide=new te(this),this.frontFace=new re(this),this.program=new ne(this),this.activeTexture=new ae(this),this.viewport=new ie(this),this.bindFramebuffer=new oe(this),this.bindRenderbuffer=new se(this),this.bindTexture=new le(this),this.bindVertexBuffer=new ce(this),this.bindElementBuffer=new ue(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new pe(this),this.pixelStoreUnpack=new de(this),this.pixelStoreUnpackPremultiplyAlpha=new he(this),this.pixelStoreUnpackFlipY=new fe(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(e.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new R(this,e,t)}createVertexBuffer(e,t,r){return new D(this,e,t,r)}createRenderbuffer(e,t,r){const n=this.gl,a=n.createRenderbuffer();return this.bindRenderbuffer.set(a),n.renderbufferStorage(n.RENDERBUFFER,e,t,r),this.bindRenderbuffer.set(null),a}createFramebuffer(e,t,r){return new be(this,e,t,r)}clear({color:e,depth:t,stencil:r}){const n=this.gl;let a=0;e&&(a|=n.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==t&&(a|=n.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(t),this.depthMask.set(!0)),void 0!==r&&(a|=n.STENCIL_BUFFER_BIT,this.clearStencil.set(r),this.stencilMask.set(255)),n.clear(a)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(t){a(t.blendFunction,e.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class xe extends e.Evented{constructor(t,r,n,a){super(),this.id=t,this.dispatcher=n,this.setEventedParent(a),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},r),e.extend(this,e.pick(r,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,((t,r)=>{this._tileJSONRequest=null,this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):r&&(e.extend(this,r),r.bounds&&(this.tileBounds=new z(r.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(r.tiles),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return e.extend({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,r){const n=e.exported.devicePixelRatio>=2,a=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),n,this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(a,e.ResourceType.Tile),((n,a,i,o)=>{if(delete t.request,t.aborted)t.state="unloaded",r(null);else if(n)t.state="errored",r(n);else if(a){this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:i,expires:o});const n=this.map.painter.context,s=n.gl;t.texture=this.map.painter.getTileTexture(a.width),t.texture?t.texture.update(a,{useMipmap:!0}):(t.texture=new e.Texture(n,a,s.RGBA,{useMipmap:!0}),t.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),n.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,n.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.extTextureFilterAnisotropicMax)),t.state="loaded",e.cacheEntryPossiblyAdded(this.dispatcher),r(null)}}))}abortTile(e,t){e.request&&(e.request.cancel(),delete e.request),t()}unloadTile(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}hasTransition(){return!1}}let we;var Ee=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ce extends e.Evented{constructor(e,t,r,n){super(),this.id=e,this.dispatcher=r,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(n),this.options=t}load(t,r){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),((n,a)=>{this._loaded=!0,n?this.fire(new e.ErrorEvent(n)):a&&(this.image=e.exported.getImageData(a),t&&(this.coordinates=t),r&&r(),this._finishLoading())}))}loaded(){return this._loaded}updateImage(e){return this.image&&e.url?(this.options.url=e.url,this.load(e.coordinates,(()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}setCoordinates(t){this.coordinates=t;const r=t.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(t){let r=1/0,n=1/0,a=-1/0,i=-1/0;for(const e of t)r=Math.min(r,e.x),n=Math.min(n,e.y),a=Math.max(a,e.x),i=Math.max(i,e.y);const o=Math.max(a-r,i-n),s=Math.max(0,Math.floor(-Math.log(o)/Math.LN2)),l=Math.pow(2,s);return new e.CanonicalTileID(s,Math.floor((r+a)/2*l),Math.floor((n+i)/2*l))}(r),this.minzoom=this.maxzoom=this.tileID.z;const n=r.map((e=>this.tileID.getTilePoint(e)._round()));return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(n[0].x,n[0].y,0,0),this._boundsArray.emplaceBack(n[1].x,n[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(n[3].x,n[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(n[2].x,n[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const t=this.map.painter.context,r=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,Ee.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(t,this.image,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE));for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}}loadTile(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const ke={vector:class extends e.Evented{constructor(t,r,n,a){if(super(),this.id=t,this.dispatcher=n,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(r,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(a),this._tileWorkers={},this._deduped=new e.DedupedRequest}load(){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,((t,r)=>{this._tileJSONRequest=null,this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):r&&(e.extend(this,r),r.bounds&&(this.tileBounds=new z(r.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(r.tiles,this.map._requestManager._customAccessToken),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.cancel(),e();const t=this.map.style._getSourceCaches(this.id);for(const e of t)e.clearTiles();this.load()}setTiles(e){return this.setSourceProperty((()=>{this._options.tiles=e})),this}setUrl(e){return this.setSourceProperty((()=>{this.url=e,this._options.url=e})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return e.extend({},this._options)}loadTile(t,r){const n=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),a={request:this.map._requestManager.transformRequest(n,e.ResourceType.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile};if(a.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state)"loading"===t.state?t.reloadCallback=r:t.request=t.actor.send("reloadTile",a,i.bind(this));else if(t.actor=this._tileWorkers[n]=this._tileWorkers[n]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",a,i.bind(this),void 0,!0);else{const r=e.loadVectorTile.call({deduped:this._deduped},a,((e,r)=>{e||!r?i.call(this,e):(a.data={cacheControl:r.cacheControl,expires:r.expires,rawData:r.rawData.slice(0)},t.actor&&t.actor.send("loadTile",a,i.bind(this),void 0,!0))}),!0);t.request={cancel:r}}function i(n,a){return delete t.request,t.aborted?r(null):n&&404!==n.status?r(n):(a&&a.resourceTiming&&(t.resourceTiming=a.resourceTiming),this.map._refreshExpiredTiles&&a&&t.setExpiryData(a),t.loadVectorData(a,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),r(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id})}unloadTile(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:xe,"raster-dem":class extends xe{constructor(t,r,n,a){super(t,r,n,a),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox"}loadTile(t,r){const n=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function a(e,n){e&&(t.state="errored",r(e)),n&&(t.dem=n,t.dem.onDeserialize(),t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0,t.state="loaded",r(null))}t.request=e.getImage(this.map._requestManager.transformRequest(n,e.ResourceType.Tile),function(n,i,o,s){if(delete t.request,t.aborted)t.state="unloaded",r(null);else if(n)t.state="errored",r(n);else if(i){this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:o,expires:s});const r=e.window.ImageBitmap&&i instanceof e.window.ImageBitmap&&(null==we&&(we=e.window.OffscreenCanvas&&new e.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof e.window.createImageBitmap),we),n=1-(i.width-e.prevPowerOfTwo(i.width))/2;n<1||t.neighboringTiles||(t.neighboringTiles=this._getNeighboringTiles(t.tileID));const l=r?i:e.exported.getImageData(i,n),c={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:l,encoding:this.encoding,padding:n};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",c,a.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(t){const r=t.canonical,n=Math.pow(2,r.z),a=(r.x-1+n)%n,i=0===r.x?t.wrap-1:t.wrap,o=(r.x+1+n)%n,s=r.x+1===n?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,i,r.z,a,r.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,r.z,o,r.y).key]={backfilled:!1},r.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,i,r.z,a,r.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,r.z,r.x,r.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,r.z,o,r.y-1).key]={backfilled:!1}),r.y+1<n&&(l[new e.OverscaledTileID(t.overscaledZ,i,r.z,a,r.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,r.z,r.x,r.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,r.z,o,r.y+1).key]={backfilled:!1}),l}unloadTile(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded"}},geojson:class extends e.Evented{constructor(t,r,n,a){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=n.getActor(),this.setEventedParent(a),this._data=r.data,this._options=e.extend({},r),this._collectResourceTiming=r.collectResourceTiming,void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId;const i=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*i,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*i,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?r.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,r.clusterMinPoints||2),extent:e.EXTENT,radius:(void 0!==r.clusterRadius?r.clusterRadius:50)*i,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter},r.workerOptions)}onAdd(e){this.map=e,this.setData(this._data)}setData(e){return this._data=e,this._updateWorkerData(),this}getClusterExpansionZoom(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}getClusterChildren(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}getClusterLeaves(e,t,r,n){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:r},n),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new e.Event("dataloading",{dataType:"source"})),this._loaded=!1;const t=e.extend({},this.workerOptions),r=this._data;"string"==typeof r?(t.request=this.map._requestManager.transformRequest(e.exported.resolveURL(r),e.ResourceType.Source),t.request.collectResourceTiming=this._collectResourceTiming):t.data=JSON.stringify(r),this._pendingLoad=this.actor.send(`${this.type}.loadData`,t,((t,r)=>{if(this._loaded=!0,this._pendingLoad=null,t)this.fire(new e.ErrorEvent(t));else{const t={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&r&&r.resourceTiming&&r.resourceTiming[this.id]&&(t.resourceTiming=r.resourceTiming[this.id]),this.fire(new e.Event("data",t)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)}))}loaded(){return this._loaded}loadTile(t,r){const n=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(n,{type:this.type,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((e,a)=>(delete t.request,t.unloadVectorData(),t.aborted?r(null):e?r(e):(t.loadVectorData(a,this.map.painter,"reloadTile"===n),r(null)))),void 0,"loadTile"===n)}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}unloadTile(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return e.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Ce{constructor(e,t,r,n){super(e,t,r,n),this.roundZoom=!0,this.type="video",this.options=t}load(){this._loaded=!1;const t=this.options;this.urls=[];for(const r of t.urls)this.urls.push(this.map._requestManager.transformRequest(r,e.ResourceType.Source).url);e.getVideo(this.urls,((t,r)=>{this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):r&&(this.video=r,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const r=this.video.seekable;t<r.start(0)||t>r.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${r.start(0)} and ${r.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const t=this.map.painter.context,r=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,Ee.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE));for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Ce,canvas:class extends Ce{constructor(t,r,n,a){super(t,r,n,a),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some((e=>!Array.isArray(e)||2!==e.length||e.some((e=>"number"!=typeof e))))||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const r=this.map.painter.context,n=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,Ee.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(r,this.canvas,n.RGBA,{premultiply:!0});for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}},Te=function(t,r,n,a){const i=new ke[r.type](t,r,n,a);if(i.id!==t)throw new Error(`Expected Source id to be ${t} instead of ${i.id}`);return e.bindAll(["load","abort","unload","serialize","prepare"],i),i};function Se(t,r){const n=e.identity([]);return e.scale$1(n,n,[.5*t.width,.5*-t.height,1]),e.translate(n,n,[1,-1,0]),e.multiply(n,n,t.calculateProjMatrix(r.toUnwrapped()))}function Pe(e,t,r,n,a,i,o,s=!1){const l=e.tilesIn(n,o,s);l.sort(Ie);const c=[];for(const n of l)c.push({wrappedTileID:n.tile.tileID.wrapped().key,queryResults:n.tile.queryRenderedFeatures(t,r,e._state,n,a,i,Se(e.transform,n.tile.tileID),s)});const u=function(e){const t={},r={};for(const n of e){const e=n.queryResults,a=n.wrappedTileID,i=r[a]=r[a]||{};for(const r in e){const n=e[r],a=i[r]=i[r]||{},o=t[r]=t[r]||[];for(const e of n)a[e.featureIndex]||(a[e.featureIndex]=!0,o.push(e))}}return t}(c);for(const t in u)u[t].forEach((t=>{const r=t.feature,n=e.getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=n}));return u}function Me(e,t){const r=e.getRenderableIds().map((t=>e.getTileByID(t))),n=[],a={};for(let e=0;e<r.length;e++){const i=r[e],o=i.tileID.canonical.key;a[o]||(a[o]=!0,i.querySourceFeatures(n,t))}return n}function Ie(e,t){const r=e.tileID,n=t.tileID;return r.overscaledZ-n.overscaledZ||r.canonical.y-n.canonical.y||r.wrap-n.wrap||r.canonical.x-n.canonical.x}function Ae(){return null!=Wa.workerClass?new Wa.workerClass:new e.window.Worker(Wa.workerUrl)}const Oe="mapboxgl_preloaded_worker_pool";class ze{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<ze.workerCount;)this.workers.push(new Ae);return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((e=>{e.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Oe]}numActive(){return Object.keys(this.active).length}}let Re;function Le(){return Re||(Re=new ze),Re}function De(t,r){const n={};for(const e in t)"ref"!==e&&(n[e]=t[e]);return e.refProperties.forEach((e=>{e in r&&(n[e]=r[e])})),n}function Be(e){e=e.slice();const t=Object.create(null);for(let r=0;r<e.length;r++)t[e[r].id]=e[r];for(let r=0;r<e.length;r++)"ref"in e[r]&&(e[r]=De(e[r],t[e[r].ref]));return e}ze.workerCount=2;const $e={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog"};function Fe(e,t,r){r.push({command:$e.addSource,args:[e,t[e]]})}function Ne(e,t,r){t.push({command:$e.removeSource,args:[e]}),r[e]=!0}function Ve(e,t,r,n){Ne(e,r,n),Fe(e,t,r)}function je(e,t,r){let n;for(n in e[r])if(e[r].hasOwnProperty(n)&&"data"!==n&&!a(e[r][n],t[r][n]))return!1;for(n in t[r])if(t[r].hasOwnProperty(n)&&"data"!==n&&!a(e[r][n],t[r][n]))return!1;return!0}function Ue(e,t,r,n,i,o){let s;for(s in t=t||{},e=e||{})e.hasOwnProperty(s)&&(a(e[s],t[s])||r.push({command:o,args:[n,s,t[s],i]}));for(s in t)t.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(a(e[s],t[s])||r.push({command:o,args:[n,s,t[s],i]}))}function qe(e){return e.id}function He(e,t){return e[t.id]=t,e}class Ge{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let e=1;e<this.points.length;e++)this._distances[e]=this._distances[e-1]+this.points[e].dist(this.points[e-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);let r=1,n=this._distances[r];const a=t*this.paddedLength+this.padding;for(;n<a&&r<this._distances.length;)n=this._distances[++r];const i=r-1,o=this._distances[i],s=n-o,l=s>0?(a-o)/s:0;return this.points[i].mult(1-l).add(this.points[r].mult(l))}}class We{constructor(e,t,r){const n=this.boxCells=[],a=this.circleCells=[];this.xCellCount=Math.ceil(e/r),this.yCellCount=Math.ceil(t/r);for(let e=0;e<this.xCellCount*this.yCellCount;e++)n.push([]),a.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,r,n,a){this._forEachCell(t,r,n,a,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(a)}insertCircle(e,t,r,n){this._forEachCell(t-n,r-n,t+n,r+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(r),this.circles.push(n)}_insertBoxCell(e,t,r,n,a,i){this.boxCells[a].push(i)}_insertCircleCell(e,t,r,n,a,i){this.circleCells[a].push(i)}_query(e,t,r,n,a,i){if(r<0||e>this.width||n<0||t>this.height)return!a&&[];const o=[];if(e<=0&&t<=0&&this.width<=r&&this.height<=n){if(a)return!0;for(let e=0;e<this.boxKeys.length;e++)o.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],r=this.circles[3*e+1],n=this.circles[3*e+2];o.push({key:this.circleKeys[e],x1:t-n,y1:r-n,x2:t+n,y2:r+n})}return i?o.filter(i):o}return this._forEachCell(e,t,r,n,this._queryCell,o,{hitTest:a,seenUids:{box:{},circle:{}}},i),a?o.length>0:o}_queryCircle(e,t,r,n,a){const i=e-r,o=e+r,s=t-r,l=t+r;if(o<0||i>this.width||l<0||s>this.height)return!n&&[];const c=[];return this._forEachCell(i,s,o,l,this._queryCellCircle,c,{hitTest:n,circle:{x:e,y:t,radius:r},seenUids:{box:{},circle:{}}},a),n?c.length>0:c}query(e,t,r,n,a){return this._query(e,t,r,n,!1,a)}hitTest(e,t,r,n,a){return this._query(e,t,r,n,!0,a)}hitTestCircle(e,t,r,n){return this._queryCircle(e,t,r,!0,n)}_queryCell(e,t,r,n,a,i,o,s){const l=o.seenUids,c=this.boxCells[a];if(null!==c){const a=this.bboxes;for(const u of c)if(!l.box[u]){l.box[u]=!0;const c=4*u;if(e<=a[c+2]&&t<=a[c+3]&&r>=a[c+0]&&n>=a[c+1]&&(!s||s(this.boxKeys[u]))){if(o.hitTest)return i.push(!0),!0;i.push({key:this.boxKeys[u],x1:a[c],y1:a[c+1],x2:a[c+2],y2:a[c+3]})}}}const u=this.circleCells[a];if(null!==u){const a=this.circles;for(const c of u)if(!l.circle[c]){l.circle[c]=!0;const u=3*c;if(this._circleAndRectCollide(a[u],a[u+1],a[u+2],e,t,r,n)&&(!s||s(this.circleKeys[c]))){if(o.hitTest)return i.push(!0),!0;{const e=a[u],t=a[u+1],r=a[u+2];i.push({key:this.circleKeys[c],x1:e-r,y1:t-r,x2:e+r,y2:t+r})}}}}}_queryCellCircle(e,t,r,n,a,i,o,s){const l=o.circle,c=o.seenUids,u=this.boxCells[a];if(null!==u){const e=this.bboxes;for(const t of u)if(!c.box[t]){c.box[t]=!0;const r=4*t;if(this._circleAndRectCollide(l.x,l.y,l.radius,e[r+0],e[r+1],e[r+2],e[r+3])&&(!s||s(this.boxKeys[t])))return i.push(!0),!0}}const p=this.circleCells[a];if(null!==p){const e=this.circles;for(const t of p)if(!c.circle[t]){c.circle[t]=!0;const r=3*t;if(this._circlesCollide(e[r],e[r+1],e[r+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[t])))return i.push(!0),!0}}}_forEachCell(e,t,r,n,a,i,o,s){const l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),u=this._convertToXCellCoord(r),p=this._convertToYCellCoord(n);for(let d=l;d<=u;d++)for(let l=c;l<=p;l++)if(a.call(this,e,t,r,n,this.xCellCount*l+d,i,o,s))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,r,n,a,i){const o=n-e,s=a-t,l=r+i;return l*l>o*o+s*s}_circleAndRectCollide(e,t,r,n,a,i,o){const s=(i-n)/2,l=Math.abs(e-(n+s));if(l>s+r)return!1;const c=(o-a)/2,u=Math.abs(t-(a+c));if(u>c+r)return!1;if(l<=s||u<=c)return!0;const p=l-s,d=u-c;return p*p+d*d<=r*r}}const Xe=Math.tan(85*Math.PI/180);function Ze(t,r,n,a,i){const o=e.create$1();return r?(e.scale$1(o,o,[1/i,1/i,1]),n||e.rotateZ(o,o,a.angle)):e.multiply(o,a.labelPlaneMatrix,t),o}function Ye(t,r,n,a,i){if(r){const r=e.clone$1(t);return e.scale$1(r,r,[i,i,1]),n||e.rotateZ(r,r,-a.angle),r}return a.glCoordMatrix}function Ke(t,r,n=0){const a=[t.x,t.y,n,1];n?e.transformMat4(a,a,r):lt(a,a,r);const i=a[3];return{point:new e.pointGeometry(a[0]/i,a[1]/i),signedDistanceFromCamera:i}}function Qe(e,t){return Math.min(.5+e/t*.5,1.5)}function Je(e,t){const r=e[0]/e[3],n=e[1]/e[3];return r>=-t[0]&&r<=t[0]&&n>=-t[1]&&n<=t[1]}function et(t,r,n,a,i,o,s,l,c){const u=a?t.textSizeData:t.iconSizeData,p=e.evaluateSizeForZoom(u,n.transform.zoom),d=[256/n.width*2+1,256/n.height*2+1],h=a?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;h.clear();const f=t.lineVertexArray,m=a?t.text.placedSymbolArray:t.icon.placedSymbolArray,g=n.transform.width/n.transform.height;let v=!1;for(let a=0;a<m.length;a++){const y=m.get(a);if(y.writingMode!==e.WritingMode.vertical||v||0!==a&&m.get(a-1).writingMode===e.WritingMode.horizontal||(v=!0),y.hidden||y.writingMode===e.WritingMode.vertical&&!v){st(y.numGlyphs,h);continue}v=!1;const b=c?c({x:y.anchorX,y:y.anchorY}):0,_=[y.anchorX,y.anchorY,b,1];if(e.transformMat4(_,_,r),!Je(_,d)){st(y.numGlyphs,h);continue}const x=Qe(n.transform.cameraToCenterDistance,_[3]),w=e.evaluateSizeForFeature(u,p,y),E=s?w/x:w*x,C=new e.pointGeometry(y.anchorX,y.anchorY),k=Ke(C,i,b);if(k.signedDistanceFromCamera<=0){st(y.numGlyphs,h);continue}const T=k.point;let S={};const P=s?null:c,M=nt(y,E,!1,l,r,i,o,t.glyphOffsetArray,f,h,T,C,S,g,P);v=M.useVertical,P&&M.needsFlipping&&(S={}),(M.notEnoughRoom||v||M.needsFlipping&&nt(y,E,!0,l,r,i,o,t.glyphOffsetArray,f,h,T,C,S,g,P).notEnoughRoom)&&st(y.numGlyphs,h)}a?t.text.dynamicLayoutVertexBuffer.updateData(h):t.icon.dynamicLayoutVertexBuffer.updateData(h)}function tt(e,t,r,n,a,i,o,s,l,c,u,p,d){const h=s.glyphStartIndex+s.numGlyphs,f=s.lineStartIndex,m=s.lineStartIndex+s.lineLength,g=t.getoffsetX(s.glyphStartIndex),v=t.getoffsetX(h-1),y=it(e*g,r,n,a,i,o,s.segment,f,m,l,c,u,p,d,!0);if(!y)return null;const b=it(e*v,r,n,a,i,o,s.segment,f,m,l,c,u,p,d,!0);return b?{first:y,last:b}:null}function rt(t,r,n,a){return t.writingMode===e.WritingMode.horizontal&&Math.abs(n.y-r.y)>Math.abs(n.x-r.x)*a?{useVertical:!0}:t.writingMode===e.WritingMode.vertical?r.y<n.y?{needsFlipping:!0}:null:0!==t.flipState&&function(e,t,r){const n=(t.x-e.x)*r;return 0===n||Math.abs((t.y-e.y)/n)>Xe}(r,n,a)?1===t.flipState?{needsFlipping:!0}:null:r.x>n.x?{needsFlipping:!0}:null}function nt(t,r,n,a,i,o,s,l,c,u,p,d,h,f,m){const g=r/24,v=t.lineOffsetX*g,y=t.lineOffsetY*g;let b;if(t.numGlyphs>1){const e=t.glyphStartIndex+t.numGlyphs,r=t.lineStartIndex,i=t.lineStartIndex+t.lineLength,u=tt(g,l,v,y,n,p,d,t,c,o,h,m);if(!u)return{notEnoughRoom:!0};const _=Ke(u.first.point,s).point,x=Ke(u.last.point,s).point;if(a&&!n){const e=rt(t,_,x,f);if(t.flipState=e&&e.needsFlipping?1:2,e)return e}b=[u.first];for(let a=t.glyphStartIndex+1;a<e-1;a++)b.push(it(g*l.getoffsetX(a),v,y,n,p,d,t.segment,r,i,c,o,h,m));b.push(u.last)}else{if(a&&!n){const r=Ke(d,i).point,n=t.lineStartIndex+t.segment+1,a=new e.pointGeometry(c.getx(n),c.gety(n)),o=Ke(a,i),s=rt(t,r,o.signedDistanceFromCamera>0?o.point:at(d,a,r,1,i),f);if(t.flipState=s&&s.needsFlipping?1:2,s)return s}const r=it(g*l.getoffsetX(t.glyphStartIndex),v,y,n,p,d,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,c,o,h,m);if(!r)return{notEnoughRoom:!0};b=[r]}for(const t of b)e.addDynamicAttributes(u,t.point,t.angle);return{}}function at(e,t,r,n,a,i){const o=e.add(e.sub(t)._unit()),s=Ke(o,a,i?i(o):0).point,l=r.sub(s);return r.add(l._mult(n/l.mag()))}function it(t,r,n,a,i,o,s,l,c,u,p,d,h,f,m){const g=a?t-r:t+r;let v=g>0?1:-1,y=0;a&&(v*=-1,y=Math.PI),v<0&&(y+=Math.PI);let b=v>0?l+s:l+s+1,_=i,x=i,w=0,E=0;const C=Math.abs(g),k=[],T=[];let S=o;const P=()=>{const t=b-v;return 0===w?o:new e.pointGeometry(u.getx(t),u.gety(t))},M=()=>at(P(),S,x,C-w+1,p,h);for(;w+E<=C;){if(b+=v,b<l||b>=c)return null;if(x=_,k.push(_),f&&T.push(S||P()),_=d[b],void 0===_){S=new e.pointGeometry(u.getx(b),u.gety(b));const t=Ke(S,p,h?h(S):0);_=t.signedDistanceFromCamera>0?d[b]=t.point:M()}else S=null;w+=E,E=x.dist(_)}m&&h&&(S=S||new e.pointGeometry(u.getx(b),u.gety(b)),d[b]=_=void 0===d[b]?_:M(),E=x.dist(_));const I=(C-w)/E,A=_.sub(x),O=A.mult(I)._add(x);n&&O._add(A._unit()._perp()._mult(n*v));const z=y+Math.atan2(_.y-x.y,_.x-x.x);return k.push(O),f&&(S=S||new e.pointGeometry(u.getx(b),u.gety(b)),T.push(function(t,r,n){const a=1-n;return new e.pointGeometry(t.x*a+r.x*n,t.y*a+r.y*n)}(T.length>0?T[T.length-1]:S,S,I))),{point:O,angle:z,path:k,tilePath:T}}const ot=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function st(e,t){for(let r=0;r<e;r++){const e=t.length;t.resize(e+4),t.float32.set(ot,3*e)}}function lt(e,t,r){const n=t[0],a=t[1];return e[0]=r[0]*n+r[4]*a+r[12],e[1]=r[1]*n+r[5]*a+r[13],e[3]=r[3]*n+r[7]*a+r[15],e}const ct=100;class ut{constructor(e,t,r=new We(e.width+200,e.height+200,25),n=new We(e.width+200,e.height+200,25)){this.transform=e,this.grid=r,this.ignoredGrid=n,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+ct,this.screenBottomBoundary=e.height+ct,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.fogState=t}placeCollisionBox(e,t,r,n,a,i,o){const s=this.projectAndGetPerspectiveRatio(i,t.anchorPointX,t.anchorPointY,t.elevation,t.tileID),l=a*s.perspectiveRatio,c=(t.x1*e+r.x-t.padding)*l+s.point.x,u=(t.y1*e+r.y-t.padding)*l+s.point.y,p=(t.x2*e+r.x+t.padding)*l+s.point.x,d=(t.y2*e+r.y+t.padding)*l+s.point.y,h=s.perspectiveRatio<=.55||s.aboveHorizon;return!this.isInsideGrid(c,u,p,d)||!n&&this.grid.hitTest(c,u,p,d,o)||h?{box:[],offscreen:!1}:{box:[c,u,p,d],offscreen:this.isOffscreen(c,u,p,d)}}placeCollisionCircles(t,r,n,a,i,o,s,l,c,u,p,d,h,f){const m=[],g=this.transform.elevation,v=g?e=>g.getAtTileOffset(f,e.x,e.y):e=>0,y=new e.pointGeometry(r.anchorX,r.anchorY),b=v(y),_=this.projectAndGetPerspectiveRatio(o,y.x,y.y,b,f),{perspectiveRatio:x}=_,w=(u?i/x:i*x)/e.ONE_EM,E=Ke(y,s,b).point,C=_.signedDistanceFromCamera>0?tt(w,a,r.lineOffsetX*w,r.lineOffsetY*w,!1,E,y,r,n,s,{},g&&!u?v:null,u&&!!g):null;let k=!1,T=!1,S=!0;if(C&&!_.aboveHorizon){const r=.5*d*x+h,n=new e.pointGeometry(-100,-100),a=new e.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),i=new Ge,o=C.first,s=C.last;let u=[];for(let e=o.path.length-1;e>=1;e--)u.push(o.path[e]);for(let e=1;e<s.path.length;e++)u.push(s.path[e]);const f=2.5*r;if(l){const e=u.map(g?(e,t)=>{const r=v(t<o.path.length-1?o.tilePath[o.path.length-1-t]:s.tilePath[t-o.path.length+2]);return Ke(e,l,r)}:e=>Ke(e,l));u=e.some((e=>e.signedDistanceFromCamera<=0))?[]:e.map((e=>e.point))}let y=[];if(u.length>0){const t=u[0].clone(),r=u[0].clone();for(let e=1;e<u.length;e++)t.x=Math.min(t.x,u[e].x),t.y=Math.min(t.y,u[e].y),r.x=Math.max(r.x,u[e].x),r.y=Math.max(r.y,u[e].y);y=t.x>=n.x&&r.x<=a.x&&t.y>=n.y&&r.y<=a.y?[u]:r.x<n.x||t.x>a.x||r.y<n.y||t.y>a.y?[]:e.clipLine([u],n.x,n.y,a.x,a.y)}for(const e of y){i.reset(e,.25*r);let n=0;n=i.length<=.5*r?1:Math.ceil(i.paddedLength/f)+1;for(let e=0;e<n;e++){const a=e/Math.max(n-1,1),o=i.lerp(a),s=o.x+ct,l=o.y+ct;m.push(s,l,r,0);const u=s-r,d=l-r,h=s+r,f=l+r;if(S=S&&this.isOffscreen(u,d,h,f),T=T||this.isInsideGrid(u,d,h,f),!t&&this.grid.hitTestCircle(s,l,r,p)&&(k=!0,!c))return{circles:[],offscreen:!1,collisionDetected:k}}}}return{circles:!c&&k||!T?[]:m,offscreen:S,collisionDetected:k}}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const r=[];let n=1/0,a=1/0,i=-1/0,o=-1/0;for(const s of t){const t=new e.pointGeometry(s.x+ct,s.y+ct);n=Math.min(n,t.x),a=Math.min(a,t.y),i=Math.max(i,t.x),o=Math.max(o,t.y),r.push(t)}const s=this.grid.query(n,a,i,o).concat(this.ignoredGrid.query(n,a,i,o)),l={},c={};for(const t of s){const n=t.key;if(void 0===l[n.bucketInstanceId]&&(l[n.bucketInstanceId]={}),l[n.bucketInstanceId][n.featureIndex])continue;const a=[new e.pointGeometry(t.x1,t.y1),new e.pointGeometry(t.x2,t.y1),new e.pointGeometry(t.x2,t.y2),new e.pointGeometry(t.x1,t.y2)];e.polygonIntersectsPolygon(r,a)&&(l[n.bucketInstanceId][n.featureIndex]=!0,void 0===c[n.bucketInstanceId]&&(c[n.bucketInstanceId]=[]),c[n.bucketInstanceId].push(n.featureIndex))}return c}insertCollisionBox(e,t,r,n,a){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:r,featureIndex:n,collisionGroupID:a},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,r,n,a){const i=t?this.ignoredGrid:this.grid,o={bucketInstanceId:r,featureIndex:n,collisionGroupID:a};for(let t=0;t<e.length;t+=4)i.insertCircle(o,e[t],e[t+1],e[t+2])}projectAndGetPerspectiveRatio(t,r,n,a,i){const o=[r,n,a||0,1];let s=!1;if(a||this.transform.pitch>0){e.transformMat4(o,o,t);let l=!1;this.fogState&&i&&(l=function(t,r,n,a,i,o){const s=o.calculateFogTileMatrix(i),l=[r,n,a];return e.transformMat4$1(l,l,s),E(t,l,o.pitch,o._fov)}(this.fogState,r,n,a||0,i.toUnwrapped(),this.transform)>.9),s=o[2]>o[3]||l}else lt(o,o,t);return{point:new e.pointGeometry((o[0]/o[3]+1)/2*this.transform.width+ct,(-o[1]/o[3]+1)/2*this.transform.height+ct),perspectiveRatio:Math.min(.5+this.transform.cameraToCenterDistance/o[3]*.5,1.5),signedDistanceFromCamera:o[3],aboveHorizon:s}}isOffscreen(e,t,r,n){return r<ct||e>=this.screenRightBoundary||n<ct||t>this.screenBottomBoundary}isInsideGrid(e,t,r,n){return r>=0&&e<this.gridRightBoundary&&n>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}class pt{constructor(e,t,r,n){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):n&&r?1:0,this.placed=r}isHidden(){return 0===this.opacity&&!this.placed}}class dt{constructor(e,t,r,n,a){this.text=new pt(e?e.text:null,t,r,a),this.icon=new pt(e?e.icon:null,t,n,a)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ht{constructor(e,t,r){this.text=e,this.icon=t,this.skipFade=r}}class ft{constructor(){this.invProjMatrix=e.create$1(),this.viewportMatrix=e.create$1(),this.circles=[]}}class mt{constructor(e,t,r,n,a){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=r,this.bucketIndex=n,this.tileID=a}}class gt{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function vt(t,r,n,a,i){const{horizontalAlign:o,verticalAlign:s}=e.getAnchorAlignment(t),l=-(o-.5)*r,c=-(s-.5)*n,u=e.evaluateVariableOffset(t,a);return new e.pointGeometry(l+u[0]*i,c+u[1]*i)}function yt(t,r,n,a,i){const o=new e.pointGeometry(t,r);return n&&o._rotate(a?i:-i),o}class bt{constructor(e,t,r,n,a){this.transform=e.clone(),this.collisionIndex=new ut(this.transform,a),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new gt(r),this.collisionCircleArrays={},this.prevPlacement=n,n&&(n.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,r,n,a){const i=n.getBucket(r),o=n.latestFeatureIndex;if(!i||!o||r.id!==i.layerIds[0])return;const s=n.collisionBoxArray,l=i.layers[0].layout,c=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),u=n.tileSize/e.EXTENT,p=this.transform.calculateProjMatrix(n.tileID.toUnwrapped()),d="map"===l.get("text-pitch-alignment"),h="map"===l.get("text-rotation-alignment"),f=M(n,1,this.transform.zoom),m=Ze(p,d,h,this.transform,f);let g=null;if(d){const t=Ye(p,d,h,this.transform,f);g=e.multiply([],this.transform.labelPlaneMatrix,t)}this.retainedQueryData[i.bucketInstanceId]=new mt(i.bucketInstanceId,o,i.sourceLayerIndex,i.index,n.tileID);const v={bucket:i,layout:l,posMatrix:p,textLabelPlaneMatrix:m,labelToScreenMatrix:g,scale:c,textPixelRatio:u,holdingForFade:n.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(i.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.evaluateSizeForZoom(i.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(i.sourceID)};if(a)for(const e of i.sortKeyRanges){const{sortKey:r,symbolInstanceStart:n,symbolInstanceEnd:a}=e;t.push({sortKey:r,symbolInstanceStart:n,symbolInstanceEnd:a,parameters:v})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:i.symbolInstances.length,parameters:v})}attemptAnchorPlacement(e,t,r,n,a,i,o,s,l,c,u,p,d,h,f,m,g,v){const y=[p.textOffset0,p.textOffset1],b=vt(e,r,n,y,a),_=this.collisionIndex.placeCollisionBox(a,t,yt(b.x,b.y,i,o,this.transform.angle),u,s,l,c.predicate);if((!m||0!==this.collisionIndex.placeCollisionBox(h.getSymbolInstanceIconSize(v,this.transform.zoom,d),m,yt(b.x,b.y,i,o,this.transform.angle),u,s,l,c.predicate).box.length)&&_.box.length>0){let t;return this.prevPlacement&&this.prevPlacement.variableOffsets[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID].text&&(t=this.prevPlacement.variableOffsets[p.crossTileID].anchor),this.variableOffsets[p.crossTileID]={textOffset:y,width:r,height:n,anchor:e,textScale:a,prevAnchor:t},this.markUsedJustification(h,e,p,f),h.allowVerticalPlacement&&(this.markUsedOrientation(h,f,p),this.placedOrientations[p.crossTileID]=f),{shift:b,placedGlyphBoxes:_}}}placeLayerBucketPart(t,r,n){const{bucket:a,layout:i,posMatrix:o,textLabelPlaneMatrix:s,labelToScreenMatrix:l,textPixelRatio:c,holdingForFade:u,collisionBoxArray:p,partiallyEvaluatedTextSize:d,partiallyEvaluatedIconSize:h,collisionGroup:f}=t.parameters,m=i.get("text-optional"),g=i.get("icon-optional"),v=i.get("text-allow-overlap"),y=i.get("icon-allow-overlap"),b="map"===i.get("text-rotation-alignment"),_="map"===i.get("text-pitch-alignment"),x="none"!==i.get("icon-text-fit"),w="viewport-y"===i.get("symbol-z-order"),E=v&&(y||!a.hasIconData()||g),C=y&&(v||!a.hasTextData()||m);!a.collisionArrays&&p&&a.deserializeCollisionBoxes(p),n&&a.updateCollisionDebugBuffers(this.transform.zoom,p);const k=(t,p,w)=>{if(r[t.crossTileID])return;if(u)return void(this.placements[t.crossTileID]=new ht(!1,!1,!1));let k=!1,T=!1,S=!0,P=null,M={box:null,offscreen:null},I={box:null,offscreen:null},A=null,O=null,z=null,R=0,L=0,D=0;w.textFeatureIndex?R=w.textFeatureIndex:t.useRuntimeCollisionCircles&&(R=t.featureIndex),w.verticalTextFeatureIndex&&(L=w.verticalTextFeatureIndex);const B=e=>{e.tileID=this.retainedQueryData[a.bucketInstanceId].tileID,(this.transform.elevation||e.elevation)&&(e.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[a.bucketInstanceId].tileID,e.anchorPointX,e.anchorPointY):0)},$=w.textBox;if($){B($);const r=r=>{let n=e.WritingMode.horizontal;if(a.allowVerticalPlacement&&!r&&this.prevPlacement){const e=this.prevPlacement.placedOrientations[t.crossTileID];e&&(this.placedOrientations[t.crossTileID]=e,n=e,this.markUsedOrientation(a,n,t))}return n},n=(r,n)=>{if(a.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&w.verticalTextBox){for(const t of a.writingModes)if(t===e.WritingMode.vertical?(M=n(),I=M):M=r(),M&&M.box&&M.box.length)break}else M=r()};if(i.get("text-variable-anchor")){let s=i.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[t.crossTileID]){const e=this.prevPlacement.variableOffsets[t.crossTileID];s.indexOf(e.anchor)>0&&(s=s.filter((t=>t!==e.anchor)),s.unshift(e.anchor))}const l=(e,r,n)=>{const i=a.getSymbolInstanceTextSize(d,t,this.transform.zoom,p),l=(e.x2-e.x1)*i+2*e.padding,u=(e.y2-e.y1)*i+2*e.padding,m=x&&!y?r:null;m&&B(m);let g={box:[],offscreen:!1};const w=v?2*s.length:s.length;for(let r=0;r<w;++r){const v=this.attemptAnchorPlacement(s[r%s.length],e,l,u,i,b,_,c,o,f,r>=s.length,t,p,a,n,m,d,h);if(v&&(g=v.placedGlyphBoxes,g&&g.box&&g.box.length)){k=!0,P=v.shift;break}}return g};n((()=>l($,w.iconBox,e.WritingMode.horizontal)),(()=>{const r=w.verticalTextBox;return r&&B(r),a.allowVerticalPlacement&&!(M&&M.box&&M.box.length)&&t.numVerticalGlyphVertices>0&&r?l(r,w.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}})),M&&(k=M.box,S=M.offscreen);const u=r(M&&M.box);if(!k&&this.prevPlacement){const e=this.prevPlacement.variableOffsets[t.crossTileID];e&&(this.variableOffsets[t.crossTileID]=e,this.markUsedJustification(a,e.anchor,t,u))}}else{const i=(r,n)=>{const i=a.getSymbolInstanceTextSize(d,t,this.transform.zoom,p),s=this.collisionIndex.placeCollisionBox(i,r,new e.pointGeometry(0,0),v,c,o,f.predicate);return s&&s.box&&s.box.length&&(this.markUsedOrientation(a,n,t),this.placedOrientations[t.crossTileID]=n),s};n((()=>i($,e.WritingMode.horizontal)),(()=>{const r=w.verticalTextBox;return a.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&r?(B(r),i(r,e.WritingMode.vertical)):{box:null,offscreen:null}})),r(M&&M.box&&M.box.length)}}if(A=M,k=A&&A.box&&A.box.length>0,S=A&&A.offscreen,t.useRuntimeCollisionCircles){const r=a.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex),c=e.evaluateSizeForFeature(a.textSizeData,d,r),u=i.get("text-padding");O=this.collisionIndex.placeCollisionCircles(v,r,a.lineVertexArray,a.glyphOffsetArray,c,o,s,l,n,_,f.predicate,t.collisionCircleDiameter,u,this.retainedQueryData[a.bucketInstanceId].tileID),k=v||O.circles.length>0&&!O.collisionDetected,S=S&&O.offscreen}if(w.iconFeatureIndex&&(D=w.iconFeatureIndex),w.iconBox){const t=t=>{B(t);const r=x&&P?yt(P.x,P.y,b,_,this.transform.angle):new e.pointGeometry(0,0),n=a.getSymbolInstanceIconSize(h,this.transform.zoom,p);return this.collisionIndex.placeCollisionBox(n,t,r,y,c,o,f.predicate)};I&&I.box&&I.box.length&&w.verticalIconBox?(z=t(w.verticalIconBox),T=z.box.length>0):(z=t(w.iconBox),T=z.box.length>0),S=S&&z.offscreen}const F=m||0===t.numHorizontalGlyphVertices&&0===t.numVerticalGlyphVertices,N=g||0===t.numIconVertices;if(F||N?N?F||(T=T&&k):k=T&&k:T=k=T&&k,k&&A&&A.box&&this.collisionIndex.insertCollisionBox(A.box,i.get("text-ignore-placement"),a.bucketInstanceId,I&&I.box&&L?L:R,f.ID),T&&z&&this.collisionIndex.insertCollisionBox(z.box,i.get("icon-ignore-placement"),a.bucketInstanceId,D,f.ID),O&&(k&&this.collisionIndex.insertCollisionCircles(O.circles,i.get("text-ignore-placement"),a.bucketInstanceId,R,f.ID),n)){const e=a.bucketInstanceId;let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new ft);for(let e=0;e<O.circles.length;e+=4)t.circles.push(O.circles[e+0]),t.circles.push(O.circles[e+1]),t.circles.push(O.circles[e+2]),t.circles.push(O.collisionDetected?1:0)}this.placements[t.crossTileID]=new ht(k||E,T||C,S||a.justReloaded),r[t.crossTileID]=!0};if(w){const e=a.getSortedSymbolIndexes(this.transform.angle);for(let t=e.length-1;t>=0;--t){const r=e[t];k(a.symbolInstances.get(r),r,a.collisionArrays[r])}}else for(let e=t.symbolInstanceStart;e<t.symbolInstanceEnd;e++)k(a.symbolInstances.get(e),e,a.collisionArrays[e]);if(n&&a.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[a.bucketInstanceId];e.invert(t.invProjMatrix,o),t.viewportMatrix=this.collisionIndex.getViewportMatrix()}a.justReloaded=!1}markUsedJustification(t,r,n,a){let i;i=a===e.WritingMode.vertical?n.verticalPlacedTextSymbolIndex:{left:n.leftJustifiedTextSymbolIndex,center:n.centerJustifiedTextSymbolIndex,right:n.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(r)];const o=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex,n.verticalPlacedTextSymbolIndex];for(const e of o)e>=0&&(t.text.placedSymbolArray.get(e).crossTileID=i>=0&&e!==i?0:n.crossTileID)}markUsedOrientation(t,r,n){const a=r===e.WritingMode.horizontal||r===e.WritingMode.horizontalOnly?r:0,i=r===e.WritingMode.vertical?r:0,o=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex];for(const e of o)t.text.placedSymbolArray.get(e).placedOrientation=a;n.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).placedOrientation=i)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let r=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const n=t?t.symbolFadeChange(e):1,a=t?t.opacities:{},i=t?t.variableOffsets:{},o=t?t.placedOrientations:{};for(const e in this.placements){const t=this.placements[e],i=a[e];i?(this.opacities[e]=new dt(i,n,t.text,t.icon),r=r||t.text!==i.text.placed||t.icon!==i.icon.placed):(this.opacities[e]=new dt(null,n,t.text,t.icon,t.skipFade),r=r||t.text||t.icon)}for(const e in a){const t=a[e];if(!this.opacities[e]){const a=new dt(t,n,!1,!1);a.isHidden()||(this.opacities[e]=a,r=r||t.text.placed||t.icon.placed)}}for(const e in i)this.variableOffsets[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.variableOffsets[e]=i[e]);for(const e in o)this.placedOrientations[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.placedOrientations[e]=o[e]);r?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t){const r={};for(const n of t){const t=n.getBucket(e);t&&n.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,r,n.collisionBoxArray)}}updateBucketOpacities(t,r,n){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const a=t.layers[0].layout,i=new dt(null,0,!1,!1,!0),o=a.get("text-allow-overlap"),s=a.get("icon-allow-overlap"),l=a.get("text-variable-anchor"),c="map"===a.get("text-rotation-alignment"),u="map"===a.get("text-pitch-alignment"),p="none"!==a.get("icon-text-fit"),d=new dt(null,0,o&&(s||!t.hasIconData()||a.get("icon-optional")),s&&(o||!t.hasTextData()||a.get("text-optional")),!0);!t.collisionArrays&&n&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(n);const h=(e,t,r)=>{for(let n=0;n<t/4;n++)e.opacityVertexArray.emplaceBack(r)};for(let n=0;n<t.symbolInstances.length;n++){const a=t.symbolInstances.get(n),{numHorizontalGlyphVertices:o,numVerticalGlyphVertices:s,crossTileID:f}=a;let m=this.opacities[f];r[f]?m=i:m||(m=d,this.opacities[f]=m),r[f]=!0;const g=a.numIconVertices>0,v=this.placedOrientations[a.crossTileID],y=v===e.WritingMode.vertical,b=v===e.WritingMode.horizontal||v===e.WritingMode.horizontalOnly;if(o>0||s>0){const e=Pt(m.text);h(t.text,o,y?Mt:e),h(t.text,s,b?Mt:e);const r=m.text.isHidden();[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach((e=>{e>=0&&(t.text.placedSymbolArray.get(e).hidden=r||y?1:0)})),a.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).hidden=r||b?1:0);const n=this.variableOffsets[a.crossTileID];n&&this.markUsedJustification(t,n.anchor,a,v);const i=this.placedOrientations[a.crossTileID];i&&(this.markUsedJustification(t,"left",a,i),this.markUsedOrientation(t,i,a))}if(g){const e=Pt(m.icon);a.placedIconSymbolIndex>=0&&(h(t.icon,a.numIconVertices,y?Mt:e),t.icon.placedSymbolArray.get(a.placedIconSymbolIndex).hidden=m.icon.isHidden()),a.verticalPlacedIconSymbolIndex>=0&&(h(t.icon,a.numVerticalIconVertices,b?Mt:e),t.icon.placedSymbolArray.get(a.verticalPlacedIconSymbolIndex).hidden=m.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const r=t.collisionArrays[n];if(r){let n=new e.pointGeometry(0,0);if(r.textBox||r.verticalTextBox){let e=!0;if(l){const t=this.variableOffsets[f];t?(n=vt(t.anchor,t.width,t.height,t.textOffset,t.textScale),c&&n._rotate(u?this.transform.angle:-this.transform.angle)):e=!1}r.textBox&&_t(t.textCollisionBox.collisionVertexArray,m.text.placed,!e||y,n.x,n.y),r.verticalTextBox&&_t(t.textCollisionBox.collisionVertexArray,m.text.placed,!e||b,n.x,n.y)}const a=Boolean(!b&&r.verticalIconBox);r.iconBox&&_t(t.iconCollisionBox.collisionVertexArray,m.icon.placed,a,p?n.x:0,p?n.y:0),r.verticalIconBox&&_t(t.iconCollisionBox.collisionVertexArray,m.icon.placed,!a,p?n.x:0,p?n.y:0)}}}if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=e.invProjMatrix,t.placementViewportMatrix=e.viewportMatrix,t.collisionCircleArray=e.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const r=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*r>e}setStale(){this.stale=!0}}function _t(e,t,r,n,a){e.emplaceBack(t?1:0,r?1:0,n||0,a||0),e.emplaceBack(t?1:0,r?1:0,n||0,a||0),e.emplaceBack(t?1:0,r?1:0,n||0,a||0),e.emplaceBack(t?1:0,r?1:0,n||0,a||0)}const xt=Math.pow(2,25),wt=Math.pow(2,24),Et=Math.pow(2,17),Ct=Math.pow(2,16),kt=Math.pow(2,9),Tt=Math.pow(2,8),St=Math.pow(2,1);function Pt(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,r=Math.floor(127*e.opacity);return r*xt+t*wt+r*Et+t*Ct+r*kt+t*Tt+r*St+t}const Mt=0;class It{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&void 0!==e.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,t,r,n,a){const i=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(i,n,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,a())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,i.sort(((e,t)=>e.sortKey-t.sortKey)));this._currentPartIndex<i.length;)if(t.placeLayerBucketPart(i[this._currentPartIndex],this._seenCrossTileIDs,r),this._currentPartIndex++,a())return!0;return!1}}class At{constructor(e,t,r,n,a,i,o,s){this.placement=new bt(e,a,i,o,s),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=n,this._done=!1}isDone(){return this._done}continuePlacement(t,r,n){const a=e.exported.now(),i=()=>{const t=e.exported.now()-a;return!this._forceFullPlacement&&t>2};for(;this._currentPlacementIndex>=0;){const e=r[t[this._currentPlacementIndex]],a=this.placement.collisionIndex.transform.zoom;if("symbol"===e.type&&(!e.minzoom||e.minzoom<=a)&&(!e.maxzoom||e.maxzoom>a)){if(this._inProgressLayer||(this._inProgressLayer=new It(e)),this._inProgressLayer.continuePlacement(n[e.source],this.placement,this._showCollisionBoxes,e,i))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const Ot=512/e.EXTENT/2;class zt{constructor(e,t,r){this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=r;for(let r=0;r<t.length;r++){const n=t.get(r),a=n.key;this.indexedSymbolInstances[a]||(this.indexedSymbolInstances[a]=[]),this.indexedSymbolInstances[a].push({crossTileID:n.crossTileID,coord:this.getScaledCoordinates(n,e)})}}getScaledCoordinates(t,r){const n=Ot/Math.pow(2,r.canonical.z-this.tileID.canonical.z);return{x:Math.floor((r.canonical.x*e.EXTENT+t.anchorX)*n),y:Math.floor((r.canonical.y*e.EXTENT+t.anchorY)*n)}}findMatches(e,t,r){const n=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z);for(let a=0;a<e.length;a++){const i=e.get(a);if(i.crossTileID)continue;const o=this.indexedSymbolInstances[i.key];if(!o)continue;const s=this.getScaledCoordinates(i,t);for(const e of o)if(Math.abs(e.coord.x-s.x)<=n&&Math.abs(e.coord.y-s.y)<=n&&!r[e.crossTileID]){r[e.crossTileID]=!0,i.crossTileID=e.crossTileID;break}}}}class Rt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Lt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const e in this.indexes){const r=this.indexes[e],n={};for(const e in r){const a=r[e];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+t),n[a.tileID.key]=a}this.indexes[e]=n}this.lng=e}addBucket(e,t,r){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let e=0;e<t.symbolInstances.length;e++)t.symbolInstances.get(e).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const n=this.usedCrossTileIDs[e.overscaledZ];for(const r in this.indexes){const a=this.indexes[r];if(Number(r)>e.overscaledZ)for(const r in a){const i=a[r];i.tileID.isChildOf(e)&&i.findMatches(t.symbolInstances,e,n)}else{const i=a[e.scaledTo(Number(r)).key];i&&i.findMatches(t.symbolInstances,e,n)}}for(let e=0;e<t.symbolInstances.length;e++){const a=t.symbolInstances.get(e);a.crossTileID||(a.crossTileID=r.generate(),n[a.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new zt(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const r in t.indexedSymbolInstances)for(const n of t.indexedSymbolInstances[r])delete this.usedCrossTileIDs[e][n.crossTileID]}removeStaleBuckets(e){let t=!1;for(const r in this.indexes){const n=this.indexes[r];for(const a in n)e[n[a].bucketInstanceId]||(this.removeBucketCrossTileIDs(r,n[a]),delete n[a],t=!0)}return t}}class Dt{constructor(){this.layerIndexes={},this.crossTileIDs=new Rt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,r){let n=this.layerIndexes[e.id];void 0===n&&(n=this.layerIndexes[e.id]=new Lt);let a=!1;const i={};n.handleWrapJump(r);for(const r of t){const t=r.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),n.addBucket(r.tileID,t,this.crossTileIDs)&&(a=!0),i[t.bucketInstanceId]=!0)}return n.removeStaleBuckets(i)&&(a=!0),a}pruneUnusedLayers(e){const t={};e.forEach((e=>{t[e]=!0}));for(const e in this.layerIndexes)t[e]||delete this.layerIndexes[e]}}const Bt=(t,r)=>e.emitValidationErrors(t,r&&r.filter((e=>"source.canvas"!==e.identifier))),$t=e.pick($e,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog"]),Ft=e.pick($e,["setCenter","setZoom","setBearing","setPitch"]),Nt=function(){const t={},r=e.spec.$version;for(const n in e.spec.$root){const a=e.spec.$root[n];if(a.required){let e=null;e="version"===n?r:"array"===a.type?[]:{},null!=e&&(t[n]=e)}}return t}(),Vt={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class jt extends e.Evented{constructor(t,r={}){super(),this.map=t,this.dispatcher=new P(Le(),this),this.imageManager=new g,this.imageManager.setEventedParent(this),this.glyphManager=new e.GlyphManager(t._requestManager,r.localFontFamily?e.LocalGlyphMode.all:r.localIdeographFontFamily?e.LocalGlyphMode.ideographs:e.LocalGlyphMode.none,r.localFontFamily||r.localIdeographFontFamily),this.lineAtlas=new e.LineAtlas(256,512),this.crossTileSymbolIndex=new Dt,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());const n=this;this._rtlTextPluginCallback=jt.registerForPluginStateChange((t=>{n.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},((t,r)=>{if(e.triggerPluginCompletionEvent(t),r&&r.every((e=>e)))for(const e in n._sourceCaches){const t=n._sourceCaches[e],r=t.getSource().type;"vector"!==r&&"geojson"!==r||t.reload()}}))})),this.on("data",(e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(const e in this._layers){const r=this._layers[e];r.source===t.id&&this._validateLayer(r)}}))}loadURL(t,r={}){this.fire(new e.Event("dataloading",{dataType:"style"}));const n="boolean"==typeof r.validate?r.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,r.accessToken);const a=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(a,((t,r)=>{this._request=null,t?this.fire(new e.ErrorEvent(t)):r&&this._load(r,n)}))}loadJSON(t,r={}){this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.exported.frame((()=>{this._request=null,this._load(t,!1!==r.validate)}))}loadEmpty(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Nt,!1)}_updateLayerCount(e,t){const r=t?1:-1;e.is3D()&&(this._num3DLayers+=r),"circle"===e.type&&(this._numCircleLayers+=r),"symbol"===e.type&&(this._numSymbolLayers+=r)}_load(t,r){if(r&&Bt(this,e.validateStyle(t)))return;this._loaded=!0,this.stylesheet=t;for(const e in t.sources)this.addSource(e,t.sources[e],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(t.glyphs);const n=Be(this.stylesheet.layers);this._order=n.map((e=>e.id)),this._layers={},this._serializedLayers={};for(let t of n)t=e.createStyleLayer(t),t.setEventedParent(this,{layer:{id:t.id}}),this._layers[t.id]=t,this._serializedLayers[t.id]=t.serialize(),this._updateLayerCount(t,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new b(this.stylesheet.light),this.stylesheet.terrain&&this._createTerrain(this.stylesheet.terrain),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}_loadSprite(t){this._spriteRequest=function(t,r,n){let a,i,o;const s=e.exported.devicePixelRatio>1?"@2x":"";let l=e.getJSON(r.transformRequest(r.normalizeSpriteURL(t,s,".json"),e.ResourceType.SpriteJSON),((e,t)=>{l=null,o||(o=e,a=t,u())})),c=e.getImage(r.transformRequest(r.normalizeSpriteURL(t,s,".png"),e.ResourceType.SpriteImage),((e,t)=>{c=null,o||(o=e,i=t,u())}));function u(){if(o)n(o);else if(a&&i){const t=e.exported.getImageData(i),r={};for(const n in a){const{width:i,height:o,x:s,y:l,sdf:c,pixelRatio:u,stretchX:p,stretchY:d,content:h}=a[n],f=new e.RGBAImage({width:i,height:o});e.RGBAImage.copy(t,f,{x:s,y:l},{x:0,y:0},{width:i,height:o}),r[n]={data:f,pixelRatio:u,sdf:c,stretchX:p,stretchY:d,content:h}}n(null,r)}}return{cancel(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(t,this.map._requestManager,((t,r)=>{if(this._spriteRequest=null,t)this.fire(new e.ErrorEvent(t));else if(r)for(const e in r)this.imageManager.addImage(e,r[e]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new e.Event("data",{dataType:"style"}))}))}_validateLayer(t){const r=this.getSource(t.source);if(!r)return;const n=t.sourceLayer;n&&("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(n))&&this.fire(new e.ErrorEvent(new Error(`Source layer "${n}" does not exist on source "${r.id}" as specified by style layer "${t.id}"`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(e){const t=[];for(const r of e){const e=this._layers[r];"custom"!==e.type&&t.push(e.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(const e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(e){return!!this.terrain&&Vt[e.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(t){if(!this._loaded)return;const r=this._changed;if(this._changed){const e=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);(e.length||r.length)&&this._updateWorkerLayers(e,r);for(const e in this._updatedSources){const t=this._updatedSources[e];"reload"===t?this._reloadSource(e):"clear"===t&&this._clearSource(e)}this._updateTilesForChangedImages();for(const e in this._updatedPaintProps)this._layers[e].updateTransitions(t);this.light.updateTransitions(t),this.fog&&this.fog.updateTransitions(t),this._resetUpdates()}const n={};for(const e in this._sourceCaches){const t=this._sourceCaches[e];n[e]=t.used,t.used=!1}for(const e of this._order){const r=this._layers[e];if(r.recalculate(t,this._availableImages),!r.isHidden(t.zoom)){const e=this._getLayerSourceCache(r);e&&(e.used=!0)}const n=this.map.painter;if(n){const e=r.getProgramIds();if(!e)continue;const a=r.getProgramConfiguration(t.zoom);for(const t of e)n.useProgram(t,a)}}for(const t in n){const r=this._sourceCaches[t];n[t]!==r.used&&r.getSource().fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:r.getSource().id}))}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.fog&&this.fog.recalculate(t),this.z=t.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),r&&this.fire(new e.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(t){if(this._checkLoaded(),Bt(this,e.validateStyle(t)))return!1;(t=e.clone$2(t)).layers=Be(t.layers);const r=function(e,t){if(!e)return[{command:$e.setStyle,args:[t]}];let r=[];try{if(!a(e.version,t.version))return[{command:$e.setStyle,args:[t]}];a(e.center,t.center)||r.push({command:$e.setCenter,args:[t.center]}),a(e.zoom,t.zoom)||r.push({command:$e.setZoom,args:[t.zoom]}),a(e.bearing,t.bearing)||r.push({command:$e.setBearing,args:[t.bearing]}),a(e.pitch,t.pitch)||r.push({command:$e.setPitch,args:[t.pitch]}),a(e.sprite,t.sprite)||r.push({command:$e.setSprite,args:[t.sprite]}),a(e.glyphs,t.glyphs)||r.push({command:$e.setGlyphs,args:[t.glyphs]}),a(e.transition,t.transition)||r.push({command:$e.setTransition,args:[t.transition]}),a(e.light,t.light)||r.push({command:$e.setLight,args:[t.light]}),a(e.fog,t.fog)||r.push({command:$e.setFog,args:[t.fog]});const n={},i=[];!function(e,t,r,n){let i;for(i in t=t||{},e=e||{})e.hasOwnProperty(i)&&(t.hasOwnProperty(i)||Ne(i,r,n));for(i in t)t.hasOwnProperty(i)&&(e.hasOwnProperty(i)?a(e[i],t[i])||("geojson"===e[i].type&&"geojson"===t[i].type&&je(e,t,i)?r.push({command:$e.setGeoJSONSourceData,args:[i,t[i].data]}):Ve(i,t,r,n)):Fe(i,t,r))}(e.sources,t.sources,i,n);const o=[];e.layers&&e.layers.forEach((e=>{n[e.source]?r.push({command:$e.removeLayer,args:[e.id]}):o.push(e)}));let s=e.terrain;s&&n[s.source]&&(r.push({command:$e.setTerrain,args:[void 0]}),s=void 0),r=r.concat(i),a(s,t.terrain)||r.push({command:$e.setTerrain,args:[t.terrain]}),function(e,t,r){t=t||[];const n=(e=e||[]).map(qe),i=t.map(qe),o=e.reduce(He,{}),s=t.reduce(He,{}),l=n.slice(),c=Object.create(null);let u,p,d,h,f,m,g;for(u=0,p=0;u<n.length;u++)d=n[u],s.hasOwnProperty(d)?p++:(r.push({command:$e.removeLayer,args:[d]}),l.splice(l.indexOf(d,p),1));for(u=0,p=0;u<i.length;u++)d=i[i.length-1-u],l[l.length-1-u]!==d&&(o.hasOwnProperty(d)?(r.push({command:$e.removeLayer,args:[d]}),l.splice(l.lastIndexOf(d,l.length-p),1)):p++,m=l[l.length-u],r.push({command:$e.addLayer,args:[s[d],m]}),l.splice(l.length-u,0,d),c[d]=!0);for(u=0;u<i.length;u++)if(d=i[u],h=o[d],f=s[d],!c[d]&&!a(h,f))if(a(h.source,f.source)&&a(h["source-layer"],f["source-layer"])&&a(h.type,f.type)){for(g in Ue(h.layout,f.layout,r,d,null,$e.setLayoutProperty),Ue(h.paint,f.paint,r,d,null,$e.setPaintProperty),a(h.filter,f.filter)||r.push({command:$e.setFilter,args:[d,f.filter]}),a(h.minzoom,f.minzoom)&&a(h.maxzoom,f.maxzoom)||r.push({command:$e.setLayerZoomRange,args:[d,f.minzoom,f.maxzoom]}),h)h.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Ue(h[g],f[g],r,d,g.slice(6),$e.setPaintProperty):a(h[g],f[g])||r.push({command:$e.setLayerProperty,args:[d,g,f[g]]}));for(g in f)f.hasOwnProperty(g)&&!h.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Ue(h[g],f[g],r,d,g.slice(6),$e.setPaintProperty):a(h[g],f[g])||r.push({command:$e.setLayerProperty,args:[d,g,f[g]]}))}else r.push({command:$e.removeLayer,args:[d]}),m=l[l.lastIndexOf(d)+1],r.push({command:$e.addLayer,args:[f,m]})}(o,t.layers,r)}catch(e){console.warn("Unable to compute style diff:",e),r=[{command:$e.setStyle,args:[t]}]}return r}(this.serialize(),t).filter((e=>!(e.command in Ft)));if(0===r.length)return!1;const n=r.filter((e=>!(e.command in $t)));if(n.length>0)throw new Error(`Unimplemented: ${n.map((e=>e.command)).join(", ")}.`);return r.forEach((e=>{"setTransition"!==e.command&&this[e.command].apply(this,e.args)})),this.stylesheet=t,!0}addImage(t,r){if(this.getImage(t))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(t,r),this._afterImageUpdated(t)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(t){if(!this.getImage(t))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,r,n={}){if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error("There is already a source with this ID");if(!r.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(r).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(r.type)>=0&&this._validate(e.validateStyle.source,`sources.${t}`,r,null,n))return;this.map&&this.map._collectResourceTiming&&(r.collectResourceTiming=!0);const a=Te(t,r,this.dispatcher,this);a.setEventedParent(this,(()=>({isSourceLoaded:this.loaded(),source:a.serialize(),sourceId:t})));const i=r=>{const n=(r?"symbol:":"other:")+t,i=this._sourceCaches[n]=new e.SourceCache(n,a,r);(r?this._symbolSourceCaches:this._otherSourceCaches)[t]=i,i.style=this,i.onAdd(this.map)};i(!1),"vector"!==r.type&&"geojson"!==r.type||i(!0),a.onAdd&&a.onAdd(this.map),this._changed=!0}removeSource(t){this._checkLoaded();const r=this.getSource(t);if(void 0===r)throw new Error("There is no source with this ID");for(const r in this._layers)if(this._layers[r].source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while layer "${r}" is using it.`)));if(this.terrain&&this.terrain.get().source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while terrain is using it.`)));const n=this._getSourceCaches(t);for(const t of n)delete this._sourceCaches[t.id],delete this._updatedSources[t.id],t.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t.getSource().id})),t.setEventedParent(null),t.clearTiles();delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],r.setEventedParent(null),r.onRemove&&r.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0}getSource(e){const t=this._getSourceCache(e);return t&&t.getSource()}addLayer(t,r,n={}){this._checkLoaded();const a=t.id;if(this.getLayer(a))return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${a}" already exists on this map`)));let i;if("custom"===t.type){if(Bt(this,e.validateCustomStyleLayer(t)))return;i=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(a,t.source),t=e.clone$2(t),t=e.extend(t,{source:a})),this._validate(e.validateStyle.layer,`layers.${a}`,t,{arrayIndex:-1},n))return;i=e.createStyleLayer(t),this._validateLayer(i),i.setEventedParent(this,{layer:{id:a}}),this._serializedLayers[i.id]=i.serialize(),this._updateLayerCount(i,!0)}const o=r?this._order.indexOf(r):this._order.length;if(r&&-1===o)return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${r}" does not exist on this map.`)));this._order.splice(o,0,a),this._layerOrderChanged=!0,this._layers[a]=i;const s=this._getLayerSourceCache(i);if(this._removedLayers[a]&&i.source&&s&&"custom"!==i.type){const e=this._removedLayers[a];delete this._removedLayers[a],e.type!==i.type?this._updatedSources[i.source]="clear":(this._updatedSources[i.source]="reload",s.pause())}this._updateLayer(i),i.onAdd&&i.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(t,r){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===r)return;const n=this._order.indexOf(t);this._order.splice(n,1);const a=r?this._order.indexOf(r):this._order.length;r&&-1===a?this.fire(new e.ErrorEvent(new Error(`Layer with id "${r}" does not exist on this map.`))):(this._order.splice(a,0,t),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(t){this._checkLoaded();const r=this._layers[t];if(!r)return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be removed.`)));r.setEventedParent(null),this._updateLayerCount(r,!1);const n=this._order.indexOf(t);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=r,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],r.onRemove&&r.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(e){return this._layers[e]}hasLayer(e){return e in this._layers}hasLayerType(e){for(const t in this._layers)if(this._layers[t].type===e)return!0;return!1}setLayerZoomRange(t,r,n){this._checkLoaded();const a=this.getLayer(t);a?a.minzoom===r&&a.maxzoom===n||(null!=r&&(a.minzoom=r),null!=n&&(a.maxzoom=n),this._updateLayer(a)):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(t,r,n={}){this._checkLoaded();const i=this.getLayer(t);if(i){if(!a(i.filter,r))return null==r?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(e.validateStyle.filter,`layers.${i.id}.filter`,r,null,n)||(i.filter=e.clone$2(r),this._updateLayer(i)))}else this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be filtered.`)))}getFilter(t){return e.clone$2(this.getLayer(t).filter)}setLayoutProperty(t,r,n,i={}){this._checkLoaded();const o=this.getLayer(t);o?a(o.getLayoutProperty(r),n)||(o.setLayoutProperty(r,n,i),this._updateLayer(o)):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(t,r){const n=this.getLayer(t);if(n)return n.getLayoutProperty(r);this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style.`)))}setPaintProperty(t,r,n,i={}){this._checkLoaded();const o=this.getLayer(t);o?a(o.getPaintProperty(r),n)||(o.setPaintProperty(r,n,i)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(e,t){return this.getLayer(e).getPaintProperty(t)}setFeatureState(t,r){this._checkLoaded();const n=t.source,a=t.sourceLayer,i=this.getSource(n);if(void 0===i)return void this.fire(new e.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)));const o=i.type;if("geojson"===o&&a)return void this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===o&&!a)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")));const s=this._getSourceCaches(n);for(const e of s)e.setFeatureState(a,t.id,r)}removeFeatureState(t,r){this._checkLoaded();const n=t.source,a=this.getSource(n);if(void 0===a)return void this.fire(new e.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)));const i=a.type,o="vector"===i?t.sourceLayer:void 0;if("vector"===i&&!o)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(r&&"string"!=typeof t.id&&"number"!=typeof t.id)return void this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const s=this._getSourceCaches(n);for(const e of s)e.removeFeatureState(o,t.id,r)}getFeatureState(t){this._checkLoaded();const r=t.source,n=t.sourceLayer,a=this.getSource(r);if(void 0!==a){if("vector"!==a.type||n)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(r)[0].getFeatureState(n,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)))}getTransition(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const t={};for(const e in this._sourceCaches){const r=this._sourceCaches[e].getSource();t[r.id]||(t[r.id]=r.serialize())}return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t,layers:this._serializeLayers(this._order)},(e=>void 0!==e))}_updateLayer(e){this._updatedLayers[e.id]=!0;const t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&"raster"!==t.getSource().type&&(this._updatedSources[e.source]="reload",t.pause()),this._changed=!0}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,r={},n=[];for(let a=this._order.length-1;a>=0;a--){const i=this._order[a];if(t(i)){r[i]=a;for(const t of e){const e=t[i];if(e)for(const t of e)n.push(t)}}}n.sort(((e,t)=>t.intersectionZ-e.intersectionZ));const a=[];for(let i=this._order.length-1;i>=0;i--){const o=this._order[i];if(t(o))for(let e=n.length-1;e>=0;e--){const t=n[e].feature;if(r[t.layer.id]<i)break;a.push(t),n.pop()}else for(const t of e){const e=t[o];if(e)for(const t of e)a.push(t.feature)}}return a}queryRenderedFeatures(t,r,n){r&&r.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",r.filter,null,r);const a={};if(r&&r.layers){if(!Array.isArray(r.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const t of r.layers){const r=this._layers[t];if(!r)return this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be queried for features.`))),[];a[r.source]=!0}}const i=[];r.availableImages=this._availableImages;const o=r&&r.layers?r.layers.some((e=>{const t=this.getLayer(e);return t&&t.is3D()})):this.has3DLayers(),s=I.createFromScreenPoints(t,n);for(const e in this._sourceCaches){const t=this._sourceCaches[e].getSource().id;r.layers&&!a[t]||i.push(Pe(this._sourceCaches[e],this._layers,this._serializedLayers,s,r,n,o,!!this.map._showQueryGeometry))}return this.placement&&i.push(function(e,t,r,n,a,i,o){const s={},l=i.queryRenderedSymbols(n),c=[];for(const e of Object.keys(l).map(Number))c.push(o[e]);c.sort(Ie);for(const r of c){const n=r.featureIndex.lookupSymbolFeatures(l[r.bucketInstanceId],t,r.bucketIndex,r.sourceLayerIndex,a.filter,a.layers,a.availableImages,e);for(const e in n){const t=s[e]=s[e]||[],a=n[e];a.sort(((e,t)=>{const n=r.featureSortOrder;if(n){const r=n.indexOf(e.featureIndex);return n.indexOf(t.featureIndex)-r}return t.featureIndex-e.featureIndex}));for(const e of a)t.push(e)}}for(const t in s)s[t].forEach((n=>{const a=n.feature,i=r(e[t]).getFeatureState(a.layer["source-layer"],a.id);a.source=a.layer.source,a.layer["source-layer"]&&(a.sourceLayer=a.layer["source-layer"]),a.state=i}));return s}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),s.screenGeometry,r,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(i)}querySourceFeatures(t,r){r&&r.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",r.filter,null,r);const n=this._getSourceCaches(t);let a=[];for(const e of n)a=a.concat(Me(e,r));return a}addSourceType(e,t,r){return jt.getSourceType(e)?r(new Error(`A source type called "${e}" already exists.`)):(jt.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},r):r(null,null))}getLight(){return this.light.getLight()}setLight(t,r={}){this._checkLoaded();const n=this.light.getLight();let i=!1;for(const e in t)if(!a(t[e],n[e])){i=!0;break}if(!i)return;const o={now:e.exported.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,r),this.light.updateTransitions(o)}getTerrain(){return this.terrain?this.terrain.get():null}setTerrain(t){if(this._checkLoaded(),!t)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if("object"==typeof t.source){const r="terrain-dem-src";this.addSource(r,t.source),t=e.clone$2(t),t=e.extend(t,{source:r})}if(!this._validate(e.validateStyle.terrain,"terrain",t)){if(this.terrain){const r=this.terrain,n=r.get();for(const i in t)if(!a(t[i],n[i])){r.set(t),this.stylesheet.terrain=t;const n={now:e.exported.now(),transition:e.extend({duration:0},this.stylesheet.transition)};r.updateTransitions(n);break}}else this._createTerrain(t);this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}}_createFog(t){const r=this.fog=new S(t);this.stylesheet.fog=t;const n={now:e.exported.now(),transition:e.extend({duration:0},this.stylesheet.transition)};r.updateTransitions(n)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask((()=>{for(const e of this.map._markers)e._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(t){if(this._checkLoaded(),!t)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const r=this.fog,n=r.get();for(const i in t)if(!a(t[i],n[i])){r.set(t),this.stylesheet.fog=t;const n={now:e.exported.now(),transition:e.extend({duration:0},this.stylesheet.transition)};r.updateTransitions(n);break}}else this._createFog(t);this._markersNeedUpdate=!0}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const e=this._order.filter((e=>this.isLayerDraped(this._layers[e]))),t=this._order.filter((e=>!this.isLayerDraped(this._layers[e])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...e),this._drapedFirstOrder.push(...t)}_createTerrain(t){const r=this.terrain=new w(t);this.stylesheet.terrain=t,this.dispatcher.broadcast("enableTerrain",!0),this._force3DLayerUpdate();const n={now:e.exported.now(),transition:e.extend({duration:0},this.stylesheet.transition)};r.updateTransitions(n)}_force3DLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t)}}_validate(t,r,n,a,i={}){return(!i||!1!==i.validate)&&Bt(this,t.call(e.validateStyle,e.extend({key:r,style:this.serialize(),value:n,styleSpec:e.spec},a)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const e in this._layers)this._layers[e].setEventedParent(null);for(const e in this._sourceCaches)this._sourceCaches[e].clearTiles(),this._sourceCaches[e].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(e){const t=this._getSourceCaches(e);for(const e of t)e.clearTiles()}_reloadSource(e){const t=this._getSourceCaches(e);for(const e of t)e.resume(),e.reload()}_updateSources(e){for(const t in this._sourceCaches)this._sourceCaches[t].update(e)}_generateCollisionBoxes(){for(const e in this._sourceCaches){const t=this._sourceCaches[e];t.resume(),t.reload()}}_updatePlacement(t,r,n,a,i=!1){let o=!1,s=!1;const l={};for(const e of this._order){const r=this._layers[e];if("symbol"!==r.type)continue;if(!l[r.source]){const e=this._getLayerSourceCache(r);if(!e)continue;l[r.source]=e.getRenderableIds(!0).map((t=>e.getTileByID(t))).sort(((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)))}const n=this.crossTileSymbolIndex.addLayer(r,l[r.source],t.center.lng);o=o||n}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),i=i||this._layerOrderChanged||0===n,this._layerOrderChanged&&this.fire(new e.Event("neworder")),(i||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.exported.now(),t.zoom))&&(this.pauseablePlacement=new At(t,this._order,i,r,n,a,this.placement,this.fog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.exported.now()),s=!0),o&&this.pauseablePlacement.placement.setStale()),s||o)for(const e of this._order){const t=this._layers[e];"symbol"===t.type&&this.placement.updateLayerOpacities(t,l[t.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.exported.now())}_releaseSymbolFadeTiles(){for(const e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,t,r){this.imageManager.getImages(t.icons,r),this._updateTilesForChangedImages();const n=e=>{e&&e.setDependencies(t.tileID.key,t.type,t.icons)};n(this._otherSourceCaches[t.source]),n(this._symbolSourceCaches[t.source])}getGlyphs(e,t,r){this.glyphManager.getGlyphs(t.stacks,r)}getResource(t,r,n){return e.makeRequest(r,n)}_getSourceCache(e){return this._otherSourceCaches[e]}_getLayerSourceCache(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}_getSourceCaches(e){const t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}}jt.getSourceType=function(e){return ke[e]},jt.setSourceType=function(e,t){ke[e]=t},jt.registerForPluginStateChange=e.registerForPluginStateChange;var Ut="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}\n#endif",qt="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}";let Ht={},Gt={};Ht=Yt("","\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nfloat unpack_depth(vec4 rgba_depth)\n{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",!0),Gt=Yt("#ifdef FOG\nuniform float u_fog_temporal_offset;float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif","#ifdef FOG\nuniform mat4 u_fog_matrix;vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",!0);const Wt=Yt("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),Xt=Ut;var Zt={background:Yt("uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:Yt("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:Yt("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);vec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nvec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:Yt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Yt("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\ngl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec3 pos=vec3(floor(a_pos*0.5)+extrude,elevation(floor(a_pos*0.5)));gl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:Yt("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Yt("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=u_matrix*vec4(a_pos,elevation(a_pos),1.0);gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Yt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Yt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);}"),fill:Yt("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:Yt("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:Yt("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:Yt("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:Yt("varying vec4 v_color;void main() {vec4 color=v_color;\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#else\nvec3 pos=vec3(pos_nx.xy,t > 0.0 ? height : base);gl_Position=u_matrix*vec4(pos,1);\n#endif\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:Yt("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);\n#else\nvec3 p=vec3(pos_nx.xy,z);gl_Position=u_matrix*vec4(p,1);\n#endif\nvec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:Yt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Yt("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:Yt("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),lineGradient:Yt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:Yt("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),lineSDF:Yt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 dash_from\n#pragma mapbox: initialize mediump vec4 dash_to\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);vec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 dash_from\n#pragma mapbox: initialize mediump vec4 dash_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nfloat tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);v_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:Yt("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:Yt("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));}"),symbolSDF:Yt("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:Yt("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrainRaster:Yt("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef FOG\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nconst float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=u_skirt_height*u_skirt_height*wireframeOffset;\n#endif\nvec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n}"),terrainDepth:Yt("#ifdef GL_ES\nprecision highp float;\n#endif\nvec4 pack_depth(float ndc_z) {float depth=ndc_z*0.5+0.5;const vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Yt("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",qt),skyboxGradient:Yt("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",qt),skyboxCapture:Yt("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}")};function Yt(e,t,r){const n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,a=/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g,i=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),o=e.match(a),s=t.match(a),l=Ut.match(a);let c=s?s.concat(o):o;r||(Ht.staticUniforms&&(c=Ht.staticUniforms.concat(c)),Gt.staticUniforms&&(c=Gt.staticUniforms.concat(c))),c&&(c=c.concat(l));const u={};return{fragmentSource:e=e.replace(n,((e,t,r,n,a)=>(u[a]=!0,"define"===t?`\n#ifndef HAS_UNIFORM_u_${a}\nvarying ${r} ${n} ${a};\n#else\nuniform ${r} ${n} u_${a};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${a}\n    ${r} ${n} ${a} = u_${a};\n#endif\n`))),vertexSource:t=t.replace(n,((e,t,r,n,a)=>{const i="float"===n?"vec2":"vec4",o=a.match(/color/)?"color":i;return u[a]?"define"===t?`\n#ifndef HAS_UNIFORM_u_${a}\nuniform lowp float u_${a}_t;\nattribute ${r} ${i} a_${a};\nvarying ${r} ${n} ${a};\n#else\nuniform ${r} ${n} u_${a};\n#endif\n`:"vec4"===o?`\n#ifndef HAS_UNIFORM_u_${a}\n    ${a} = a_${a};\n#else\n    ${r} ${n} ${a} = u_${a};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${a}\n    ${a} = unpack_mix_${o}(a_${a}, u_${a}_t);\n#else\n    ${r} ${n} ${a} = u_${a};\n#endif\n`:"define"===t?`\n#ifndef HAS_UNIFORM_u_${a}\nuniform lowp float u_${a}_t;\nattribute ${r} ${i} a_${a};\n#else\nuniform ${r} ${n} u_${a};\n#endif\n`:"vec4"===o?`\n#ifndef HAS_UNIFORM_u_${a}\n    ${r} ${n} ${a} = a_${a};\n#else\n    ${r} ${n} ${a} = u_${a};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${a}\n    ${r} ${n} ${a} = unpack_mix_${o}(a_${a}, u_${a}_t);\n#else\n    ${r} ${n} ${a} = u_${a};\n#endif\n`})),staticAttributes:i,staticUniforms:c}}class Kt{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,t,r,n,a,i,o,s){this.context=e;let l=this.boundPaintVertexBuffers.length!==n.length;for(let e=0;!l&&e<n.length;e++)this.boundPaintVertexBuffers[e]!==n[e]&&(l=!0);e.extVertexArrayObject&&this.vao&&this.boundProgram===t&&this.boundLayoutVertexBuffer===r&&!l&&this.boundIndexBuffer===a&&this.boundVertexOffset===i&&this.boundDynamicVertexBuffer===o&&this.boundDynamicVertexBuffer2===s?(e.bindVertexArrayOES.set(this.vao),o&&o.bind(),a&&a.dynamicDraw&&a.bind(),s&&s.bind()):this.freshBind(t,r,n,a,i,o,s)}freshBind(e,t,r,n,a,i,o){let s;const l=e.numAttributes,c=this.context,u=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=r,this.boundIndexBuffer=n,this.boundVertexOffset=a,this.boundDynamicVertexBuffer=i,this.boundDynamicVertexBuffer2=o;else{s=c.currentNumAttributes||0;for(let e=l;e<s;e++)u.disableVertexAttribArray(e)}t.enableAttributes(u,e);for(const t of r)t.enableAttributes(u,e);i&&i.enableAttributes(u,e),o&&o.enableAttributes(u,e),t.bind(),t.setVertexAttribPointers(u,e,a);for(const t of r)t.bind(),t.setVertexAttribPointers(u,e,a);i&&(i.bind(),i.setVertexAttribPointers(u,e,a)),n&&n.bind(),o&&(o.bind(),o.setVertexAttribPointers(u,e,a)),c.currentNumAttributes=l}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Qt(t,r){const n=Math.pow(2,r.canonical.z),a=r.canonical.y;return[new e.MercatorCoordinate(0,a/n).toLngLat().lat,new e.MercatorCoordinate(0,(a+1)/n).toLngLat().lat]}function Jt(t,r,n,a,i,o,s){const l=t.context,c=l.gl,u=n.fbo;if(!u)return;t.prepareDrawTile(r);const p=t.useProgram("hillshade");l.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u.colorAttachment.get());const d=((e,t,r,n)=>{const a=r.paint.get("hillshade-shadow-color"),i=r.paint.get("hillshade-highlight-color"),o=r.paint.get("hillshade-accent-color");let s=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);const l=!e.options.moving;return{u_matrix:n||e.transform.calculateProjMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:Qt(0,t.tileID),u_light:[r.paint.get("hillshade-exaggeration"),s],u_shadow:a,u_highlight:i,u_accent:o}})(t,n,a,t.terrain?r.projMatrix:null);t.prepareDrawProgram(l,p,r.toUnwrapped()),p.draw(l,c.TRIANGLES,i,o,s,e.CullFaceMode.disabled,d,a.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}function er(t,r,n){if(!r.needsDEMTextureUpload)return;const a=t.context,i=a.gl;a.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||t.getTileTexture(n.stride);const o=n.getPixels();r.demTexture?r.demTexture.update(o,{premultiply:!1}):r.demTexture=new e.Texture(a,o,i.RGBA,{premultiply:!1}),r.needsDEMTextureUpload=!1}function tr(t,r,n,a,i,o){const s=t.context,l=s.gl;if(!r.dem)return;const c=r.dem;if(s.activeTexture.set(l.TEXTURE1),er(t,r,c),!r.demTexture)return;r.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const u=c.dim;s.activeTexture.set(l.TEXTURE0);let p=r.fbo;if(!p){const t=new e.Texture(s,{width:u,height:u,data:null},l.RGBA);t.bind(l.LINEAR,l.CLAMP_TO_EDGE),p=r.fbo=s.createFramebuffer(u,u,!0),p.colorAttachment.set(t.texture)}s.bindFramebuffer.set(p.framebuffer),s.viewport.set([0,0,u,u]),t.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,a,i,o,e.CullFaceMode.disabled,((t,r)=>{const n=r.stride,a=e.create$1();return e.ortho(a,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(a,a,[0,-e.EXTENT,0]),{u_matrix:a,u_image:1,u_dimension:[n,n],u_zoom:t.overscaledZ,u_unpack:r.unpackVector}})(r.tileID,c),n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments),r.needsHillshadePrepare=!1}const rr=(t,r)=>({u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_image0:new e.Uniform1i(t,r.u_image0),u_skirt_height:new e.Uniform1f(t,r.u_skirt_height)}),nr=(e,t)=>({u_matrix:e,u_image0:0,u_skirt_height:t}),ar=new class{constructor(){this.operations={}}newMorphing(e,t,r,n,a){if(e in this.operations){const t=this.operations[e];t.to.tileID.key!==r.tileID.key&&(t.queued=r)}else this.operations[e]={startTime:n,phase:0,duration:a,from:t,to:r,queued:null}}getMorphValuesForProxy(e){if(!(e in this.operations))return null;const t=this.operations[e];return{from:t.from,to:t.to,phase:t.phase}}update(e){for(const t in this.operations){const r=this.operations[t];for(r.phase=(e-r.startTime)/r.duration;r.phase>=1||!this._validOp(r);)if(!this._nextOp(r,e)){delete this.operations[t];break}}}_nextOp(e,t){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}_validOp(e){return e.from.hasData()&&e.to.hasData()}},ir={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function or(e,t){const r=1<<e.z;return!t&&(0===e.x||e.x===r-1)||0===e.y||e.y===r-1}const sr=e=>({u_matrix:e});function lr(t,r,n,a,i){if(i>0){const o=e.exported.now(),s=(o-t.timeAdded)/i,l=r?(o-r.timeAdded)/i:-1,c=n.getSource(),u=a.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),p=!r||Math.abs(r.tileID.overscaledZ-u)>Math.abs(t.tileID.overscaledZ-u),d=p&&t.refreshedUponExpiration?1:e.clamp(p?s:1-l,0,1);return t.refreshedUponExpiration&&s>=1&&(t.refreshedUponExpiration=!1),r?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}class cr extends e.SourceCache{constructor(e){const t=Te("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new P(Le(),null),e.style);super("proxy",t,!1),t.setEventedParent(this),this.map=this.getSource().map=e,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(t,r,n){if(t.freezeTileCoverage)return;this.transform=t;const a=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((r,n)=>{if(r[n.key]="",!this._tiles[n.key]){const r=new e.Tile(n,this._source.tileSize*n.overscaleFactor(),t.tileZoom);r.state="loaded",this._tiles[n.key]=r}return r}),{});for(const e in this._tiles)e in a||(this.freeFBO(e),this._tiles[e].state="unloaded",delete this._tiles[e])}freeFBO(e){const t=this.proxyCachedFBO[e];if(void 0!==t){const r=Object.values(t);this.renderCachePool.push(...r),delete this.proxyCachedFBO[e]}}deallocRenderCache(){this.renderCache.forEach((e=>e.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class ur extends e.OverscaledTileID{constructor(e,t,r){super(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y),this.proxyTileKey=t,this.projMatrix=r}}class pr extends e.Elevation{constructor(t,r){super(),this.painter=t,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[n,a,i]=function(t){const r=new e.StructArrayLayout4i8,n=new e.StructArrayLayout3ui6,a=131;r.reserve(17161),n.reserve(33800);const i=e.EXTENT/128,o=e.EXTENT+i/2,s=o+i;for(let t=-i;t<s;t+=i)for(let n=-i;n<s;n+=i){const a=n<0||n>o||t<0||t>o?24575:0,i=e.clamp(Math.round(n),0,e.EXTENT),s=e.clamp(Math.round(t),0,e.EXTENT);r.emplaceBack(i+a,s,i,s)}const l=(e,t)=>{const r=t*a+e;n.emplaceBack(r+1,r,r+a),n.emplaceBack(r+a,r+a+1,r+1)};for(let e=1;e<129;e++)for(let t=1;t<129;t++)l(t,e);return[0,129].forEach((e=>{for(let t=0;t<130;t++)l(t,e),l(e,t)})),[r,n,32768]}(),o=t.context;this.gridBuffer=o.createVertexBuffer(n,Ee.members),this.gridIndexBuffer=o.createIndexBuffer(a),this.gridSegments=e.SegmentVector.simpleSegment(0,0,n.length,a.length),this.gridNoSkirtSegments=e.SegmentVector.simpleSegment(0,0,n.length,i),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new cr(r.map),this.orthoMatrix=e.create$1(),e.ortho(this.orthoMatrix,0,e.EXTENT,0,e.EXTENT,0,1);const s=o.gl;this._overlapStencilMode=new e.StencilMode({func:s.GEQUAL,mask:255},0,255,s.KEEP,s.KEEP,s.REPLACE),this._previousZoom=t.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=r,this._useVertexMorphing=!0,this._exaggeration=1}set style(e){e.on("data",this._onStyleDataEvent.bind(this)),e.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=e,this._checkRenderCacheEfficiency()}update(t,r,n){if(t&&t.terrain){this._style!==t&&(this.style=t),this.enabled=!0;const a=t.terrain.properties;this.sourceCache=t._getSourceCache(a.get("source")),this._exaggeration=a.get("exaggeration");const i=()=>{this.sourceCache.used&&e.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const t=this.sourceCache.getSource().tileSize/128,n=this.proxySourceCache.getSource().tileSize;this.sourceCache.update(r,t*n,!0),this._findCoveringTileCache[this.sourceCache.id]={}};this.sourceCache.usedForTerrain||(this._findCoveringTileCache[this.sourceCache.id]={},this.sourceCache.usedForTerrain=!0,i(),this._initializing=!0),i(),r.updateElevation(!n),this._findCoveringTileCache[this.proxySourceCache.id]={},this.proxySourceCache.update(r),this._emptyDEMTextureDirty=!0}else this._disable()}_checkRenderCacheEfficiency(){const t=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==t.efficiency&&e.warnOnce(`Terrain render cache efficiency is not optimal (${t.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${t.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const e in this._style._sourceCaches)this._style._sourceCaches[e].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach((e=>e.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}set useVertexMorphing(e){this._useVertexMorphing=e}updateTileBinding(t){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const r=this.proxySourceCache,n=this.painter.transform;this._initializing&&(this._initializing=0===n._centerAltitude&&-1===this.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(n.center),-1),this._emptyDEMTextureDirty=!this._initializing);const a=this.proxyCoords=r.getIds().map((e=>{const t=r.getTileByID(e).tileID;return t.projMatrix=n.calculateProjMatrix(t.toUnwrapped()),t}));!function(t,r){const n=r.transform.pointCoordinate(r.transform.getCameraPoint()),a=new e.pointGeometry(n.x,n.y);t.sort(((t,r)=>{if(r.overscaledZ-t.overscaledZ)return r.overscaledZ-t.overscaledZ;const n=new e.pointGeometry(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),i=new e.pointGeometry(r.canonical.x+(1<<r.canonical.z)*r.wrap,r.canonical.y),o=a.mult(1<<t.canonical.z);return o.x-=.5,o.y-=.5,o.distSqr(n)-o.distSqr(i)}))}(a,this.painter),this._previousZoom=n.zoom;const i=this.proxyToSource||{};this.proxyToSource={},a.forEach((e=>{this.proxyToSource[e.key]={}})),this.terrainTileForTile={};const o=this._style._sourceCaches;for(const e in o){const r=o[e];if(!r.used)continue;if(r!==this.sourceCache&&(this._findCoveringTileCache[r.id]={}),this._setupProxiedCoordsForOrtho(r,t[e],i),r.usedForTerrain)continue;const n=t[e];r.getSource().reparseOverscaled&&this._assignTerrainTiles(n)}this.proxiedCoords[r.id]=a.map((e=>new ur(e,e.key,this.orthoMatrix))),this._assignTerrainTiles(a),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(i),this.renderingToTexture=!1,this._updateTimestamp=e.exported.now();const s={};this._visibleDemTiles=[];for(const e of this.proxyCoords){const t=this.terrainTileForTile[e.key];if(!t)continue;const r=t.tileID.key;r in s||(this._visibleDemTiles.push(t),s[r]=r)}}_assignTerrainTiles(e){this._initializing||e.forEach((e=>{if(this.terrainTileForTile[e.key])return;const t=this._findTileCoveringTileID(e,this.sourceCache);t&&(this.terrainTileForTile[e.key]=t)}))}_prepareDEMTextures(){const e=this.painter.context,t=e.gl;for(const r in this.terrainTileForTile){const n=this.terrainTileForTile[r],a=n.dem;!a||n.demTexture&&!n.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),er(this.painter,n,a))}}_prepareDemTileUniforms(e,t,r,n){if(!t||null==t.demTexture)return!1;const a=e.tileID.canonical,i=Math.pow(2,t.tileID.canonical.z-a.z),o=n||"";return r[`u_dem_tl${o}`]=[a.x*i%1,a.y*i%1],r[`u_dem_scale${o}`]=i,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){let e=0;const t=this._visibleDemTiles.reduce(((t,r)=>{if(!r.dem)return t;const n=r.dem.tree.minimums[0];return n>0&&e++,t+n}),0);return e?t/e:0}_updateEmptyDEMTexture(){const t=this.painter.context,r=t.gl;t.activeTexture.set(r.TEXTURE2);const n=this._getLoadedAreaMinimum(),a={width:1,height:1,data:new Uint8Array(e.DEMData.pack(n,this.sourceCache.getSource().encoding))};this._emptyDEMTextureDirty=!1;let i=this._emptyDEMTexture;return i?i.update(a,{premultiply:!1}):i=this._emptyDEMTexture=new e.Texture(t,a,r.RGBA,{premultiply:!1}),i}setupElevationDraw(t,r,n){const a=this.painter.context,i=a.gl,o=(s=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:e.DEMData.getUnpackVector(s),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var s;o.u_dem_size=this.sourceCache.getSource().tileSize,o.u_exaggeration=this.exaggeration();let l=null,c=null,u=1;if(n&&n.morphing&&this._useVertexMorphing){const e=n.morphing.srcDemTile,r=n.morphing.dstDemTile;u=n.morphing.phase,e&&r&&(this._prepareDemTileUniforms(t,e,o,"_prev")&&(c=e),this._prepareDemTileUniforms(t,r,o)&&(l=r))}if(c&&l?(a.activeTexture.set(i.TEXTURE2),l.demTexture.bind(i.NEAREST,i.CLAMP_TO_EDGE,i.NEAREST),a.activeTexture.set(i.TEXTURE4),c.demTexture.bind(i.NEAREST,i.CLAMP_TO_EDGE,i.NEAREST),o.u_dem_lerp=u):(l=this.terrainTileForTile[t.tileID.key],a.activeTexture.set(i.TEXTURE2),(this._prepareDemTileUniforms(t,l,o)?l.demTexture:this.emptyDEMTexture).bind(i.NEAREST,i.CLAMP_TO_EDGE,i.NEAREST)),n&&n.useDepthForOcclusion&&(a.activeTexture.set(i.TEXTURE3),this._depthTexture.bind(i.NEAREST,i.CLAMP_TO_EDGE,i.NEAREST),o.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height]),n&&n.useMeterToDem&&l){const t=(1<<l.tileID.canonical.z)*e.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;o.u_meter_to_dem=t}n&&n.labelPlaneMatrixInv&&(o.u_label_plane_matrix_inv=n.labelPlaneMatrixInv),r.setTerrainUniformValues(a,o)}renderToBackBuffer(t){const r=this.painter,n=this.painter.context;0!==t.length&&(n.bindFramebuffer.set(null),n.viewport.set([0,0,r.width,r.height]),this.renderingToTexture=!1,function(t,r,n,a,i){const o=t.context,s=o.gl;let l,c;const u=t.options.showTerrainWireframe?2:0,p=(e,r)=>{if(c===e)return;const n=[ir[e]];r&&n.push(ir[u]),l=t.useProgram("terrainRaster",null,n),c=e},d=t.colorModeForRenderPass(),h=new e.DepthMode(s.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);ar.update(i);const f=t.transform,m=6*Math.pow(1.5,22-f.zoom)*r.exaggeration();(u?[!1,!0]:[!1]).forEach((u=>{c=-1;const g=u?s.LINES:s.TRIANGLES,[v,y]=u?r.getWirefameBuffer():[r.gridIndexBuffer,r.gridSegments];for(const c of a){const a=n.getTile(c),x=e.StencilMode.disabled,w=r.prevTerrainTileForTile[c.key],E=r.terrainTileForTile[c.key];_=E,null!=(b=w)&&null!=_&&b.hasData()&&_.hasData()&&null!=b.demTexture&&null!=_.demTexture&&b.tileID.key!==_.tileID.key&&ar.newMorphing(c.key,w,E,i,250),o.activeTexture.set(s.TEXTURE0),a.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST);const C=ar.getMorphValuesForProxy(c.key),k=C?1:0;let T;C&&(T={morphing:{srcDemTile:C.from,dstDemTile:C.to,phase:e.easeCubicInOut(C.phase)}});const S=nr(c.projMatrix,or(c.canonical,f.renderWorldCopies)?m/10:m);p(k,u),r.setupElevationDraw(a,l,T),t.prepareDrawProgram(o,l,c.toUnwrapped()),l.draw(o,g,h,x,d,e.CullFaceMode.backCCW,S,"terrain_raster",r.gridBuffer,v,y)}var b,_}))}(r,this,this.proxySourceCache,t,this._updateTimestamp),this.renderingToTexture=!0,t.splice(0,t.length))}renderBatch(t){if(0===this._drapedRenderBatches.length)return t+1;this.renderingToTexture=!0;const r=this.painter,n=this.painter.context,a=this.proxySourceCache,i=this.proxiedCoords[a.id],o=this._drapedRenderBatches.shift(),s=[],l=r.style.order;let c=0;for(const u of i){const i=a.getTileByID(u.proxyTileKey),p=a.proxyCachedFBO[u.key]?a.proxyCachedFBO[u.key][t]:void 0,d=void 0!==p?a.renderCache[p]:this.pool[c++],h=void 0!==p;if(i.texture=d.tex,h&&!d.dirty){s.push(i.tileID);continue}let f;n.bindFramebuffer.set(d.fb.framebuffer),this.renderedToTile=!1,d.dirty&&(n.clear({color:e.Color.transparent}),d.dirty=!1);for(let e=o.start;e<=o.end;++e){const t=r.style._layers[l[e]];if(t.isHidden(r.transform.zoom))continue;const a=r.style._getLayerSourceCache(t),i=a?this.proxyToSource[u.key][a.id]:[u];if(!i)continue;const o=i;n.viewport.set([0,0,d.fb.width,d.fb.height]),f!==(a?a.id:null)&&(this._setupStencil(d,i,t,a),f=a?a.id:null),r.renderLayer(r,a,t,o)}this.renderedToTile?(d.dirty=!0,s.push(i.tileID)):h||--c,5===c&&(c=0,this.renderToBackBuffer(s))}return this.renderToBackBuffer(s),this.renderingToTexture=!1,n.bindFramebuffer.set(null),n.viewport.set([0,0,r.width,r.height]),o.end+1}postRender(){}renderCacheEfficiency(e){const t=e.order.length;if(0===t)return{efficiency:100};let r,n=0,a=0,i=!1;for(let o=0;o<t;++o){const t=e._layers[e.order[o]];this._style.isLayerDraped(t)?(i&&++n,++a):i||(i=!0,r=t.id)}return 0===a?{efficiency:100}:{efficiency:100*(1-n/a),firstUndrapedLayer:r}}getMinElevationBelowMSL(){let e=0;return this._visibleDemTiles.filter((e=>e.dem)).forEach((t=>{e=Math.min(e,t.dem.tree.minimums[0])})),0===e?e:(e-30)*this._exaggeration}raycast(e,t,r){if(!this._visibleDemTiles)return null;const n=this._visibleDemTiles.filter((e=>e.dem)).map((n=>{const a=n.tileID,i=Math.pow(2,a.overscaledZ),{x:o,y:s}=a.canonical,l=o/i,c=(o+1)/i,u=s/i,p=(s+1)/i;return{minx:l,miny:u,maxx:c,maxy:p,t:n.dem.tree.raycastRoot(l,u,c,p,e,t,r),tile:n}}));n.sort(((e,t)=>(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE)));for(const a of n){if(null==a.t)return null;const n=a.tile.dem.tree.raycast(a.minx,a.miny,a.maxx,a.maxy,e,t,r);if(null!=n)return n}return null}_createFBO(){const t=this.painter.context,r=t.gl,n=this.drapeBufferSize;t.activeTexture.set(r.TEXTURE0);const a=new e.Texture(t,{width:n[0],height:n[1],data:null},r.RGBA);a.bind(r.LINEAR,r.CLAMP_TO_EDGE);const i=t.createFramebuffer(n[0],n[1],!1);return i.colorAttachment.set(a.texture),i.depthAttachment=new ye(t,i.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=t.createRenderbuffer(t.gl.DEPTH_STENCIL,n[0],n[1]),this._stencilRef=0,i.depthAttachment.set(this._sharedDepthStencil),t.clear({stencil:0})):i.depthAttachment.set(this._sharedDepthStencil),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&r.texParameterf(r.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:i,tex:a,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const e in this._style._sourceCaches)if(this._style._sourceCaches[e].hasTransition())return!0;return this._style.order.some((e=>{const t=this._style._layers[e],r=t.isHidden(this.painter.transform.zoom),n=t.getCrossfadeParameters(),a=!!n&&1!==n.t,i=t.hasTransition();return"custom"!==t.type&&!r&&(a||i)}))}_clearRasterFadeFromRenderCache(){let e=!1;for(const t in this._style._sourceCaches)if(this._style._sourceCaches[t]._source instanceof xe){e=!0;break}if(e)for(let e=0;e<this._style.order.length;++e){const t=this._style._layers[this._style.order[e]],r=t.isHidden(this.painter.transform.zoom),n=this._style._getLayerSourceCache(t);if("raster"!==t.type||r||!n)continue;const a=t.paint.get("raster-fade-duration");for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][n.id];if(t)for(const e of t){const t=lr(n.getTile(e),n.findLoadedParent(e,0),n,this.painter.transform,a);(1!==t.opacity||0!==t.mix)&&this._clearRenderCacheForTile(n.id,e)}}}}_setupDrapedRenderBatches(){const e=this._style.order,t=e.length;if(0===t)return;const r=[];let n,a=0,i=this._style._layers[e[a]];for(;!this._style.isLayerDraped(i)&&i.isHidden(this.painter.transform.zoom)&&++a<t;)i=this._style._layers[e[a]];for(;a<t;++a){const t=this._style._layers[e[a]];t.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(t)?void 0===n&&(n=a):void 0!==n&&(r.push({start:n,end:a-1}),n=void 0))}void 0!==n&&r.push({start:n,end:a-1}),this._drapedRenderBatches=r}_setupRenderCache(e){const t=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,t.renderCache.length>t.renderCachePool.length){const e=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={};for(let r=0;r<e.length;++r){const n=Object.values(e[r]);t.renderCachePool.push(...n)}}return}this._clearRasterFadeFromRenderCache();const r=this.proxyCoords,n=this._tilesDirty;for(let a=r.length-1;a>=0;a--){const i=r[a];if(t.getTileByID(i.key),void 0!==t.proxyCachedFBO[i.key]){const r=e[i.key],a=this.proxyToSource[i.key];let o=0;for(const e in a){const t=a[e],i=r[e];if(!i||i.length!==t.length||t.some(((t,r)=>t!==i[r]||n[e]&&n[e].hasOwnProperty(t.key)))){o=-1;break}++o}for(const e in t.proxyCachedFBO[i.key])t.renderCache[t.proxyCachedFBO[i.key][e]].dirty=o<0||o!==Object.values(r).length}}const a=[...this._drapedRenderBatches];a.sort(((e,t)=>t.end-t.start-(e.end-e.start)));for(const e of a)for(const n of r){if(t.proxyCachedFBO[n.key])continue;let r=t.renderCachePool.pop();void 0===r&&t.renderCache.length<50&&(r=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==r&&(t.proxyCachedFBO[n.key]={},t.proxyCachedFBO[n.key][e.start]=r,t.renderCache[r].dirty=!0)}this._tilesDirty={}}_setupStencil(e,t,r,n){if(!n||!this._sourceTilesOverlap[n.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const a=this.painter.context,i=a.gl;if(t.length<=1)return void(this._overlapStencilType=!1);let o;if(r.isTileClipped())o=t.length,this._overlapStencilMode.test={func:i.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);o=1,this._overlapStencilMode.test={func:i.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+o>255&&(a.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=o,this._overlapStencilMode.ref=this._stencilRef,r.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref)}stencilModeForRTTOverlap(t){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[t.key]),this._overlapStencilMode):e.StencilMode.disabled}_renderTileClippingMasks(t,r){const n=this.painter,a=this.painter.context,i=a.gl;n._tileClippingMaskIDs={},a.setColorMode(e.ColorMode.disabled),a.setDepthMode(e.DepthMode.disabled);const o=n.useProgram("clippingMask");for(const s of t){const t=n._tileClippingMaskIDs[s.key]=--r;o.draw(a,i.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:i.ALWAYS,mask:0},t,255,i.KEEP,i.KEEP,i.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,sr(s.projMatrix),"$clipping",n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments)}}pointCoordinate(t){const r=this.painter.transform;if(t.x<0||t.x>r.width||t.y<0||t.y>r.height)return null;const n=[t.x,t.y,1,1];e.transformMat4(n,n,r.pixelMatrixInverse),e.scale$2(n,n,1/n[3]),n[0]/=r.worldSize,n[1]/=r.worldSize;const a=r._camera.position,i=e.mercatorZfromAltitude(1,r.center.lat),o=[a[0],a[1],a[2]/i,0],s=e.subtract([],n.slice(0,3),o);e.normalize(s,s);const l=this.raycast(o,s,this._exaggeration);return null!==l&&l?(e.scaleAndAdd(o,o,s,l),o[3]=o[2],o[2]*=i,o):null}drawDepth(){const t=this.painter,r=t.context,n=this.proxySourceCache,a=Math.ceil(t.width),i=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===a&&this._depthFBO.height===i||(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture),!this._depthFBO){const t=r.gl,n=r.createFramebuffer(a,i,!0);r.activeTexture.set(t.TEXTURE0);const o=new e.Texture(r,{width:a,height:i,data:null},t.RGBA);o.bind(t.NEAREST,t.CLAMP_TO_EDGE),n.colorAttachment.set(o.texture);const s=r.createRenderbuffer(r.gl.DEPTH_COMPONENT16,a,i);n.depthAttachment.set(s),this._depthFBO=n,this._depthTexture=o}r.bindFramebuffer.set(this._depthFBO.framebuffer),r.viewport.set([0,0,a,i]),function(t,r,n,a){const i=t.context,o=i.gl;i.clear({depth:1});const s=t.useProgram("terrainDepth"),l=new e.DepthMode(o.LESS,e.DepthMode.ReadWrite,t.depthRangeFor3D);for(const t of a){const a=n.getTile(t),c=nr(t.projMatrix,0);r.setupElevationDraw(a,s),s.draw(i,o.TRIANGLES,l,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.backCCW,c,"terrain_depth",r.gridBuffer,r.gridIndexBuffer,r.gridNoSkirtSegments)}}(t,this,n,this.proxyCoords)}_setupProxiedCoordsForOrtho(e,t,r){if(e.getSource()instanceof Ce)return this._setupProxiedCoordsForImageSource(e,t,r);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};const n=this.proxiedCoords[e.id]=[],a=this.proxyCoords;for(let t=0;t<a.length;t++){const i=a[t],o=this._findTileCoveringTileID(i,e);if(o){const t=this._createProxiedId(i,o,r[i.key]&&r[i.key][e.id]);n.push(t),this.proxyToSource[i.key][e.id]=[t]}}let i=!1;for(let a=0;a<t.length;a++){const o=e.getTile(t[a]);if(!o||!o.hasData())continue;const s=this._findTileCoveringTileID(o.tileID,this.proxySourceCache);if(s&&s.tileID.canonical.z!==o.tileID.canonical.z){const t=this.proxyToSource[s.tileID.key][e.id],a=this._createProxiedId(s.tileID,o,r[s.tileID.key]&&r[s.tileID.key][e.id]);t?t.splice(t.length-1,0,a):this.proxyToSource[s.tileID.key][e.id]=[a],n.push(a),i=!0}}this._sourceTilesOverlap[e.id]=i}_setupProxiedCoordsForImageSource(t,r,n){if(!t.getSource().loaded())return;const a=this.proxiedCoords[t.id]=[],i=this.proxyCoords,o=t.getSource(),s=new e.pointGeometry(o.tileID.x,o.tileID.y)._div(1<<o.tileID.z),l=o.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce(((e,t)=>(e.min.x=Math.min(e.min.x,t.x-s.x),e.min.y=Math.min(e.min.y,t.y-s.y),e.max.x=Math.max(e.max.x,t.x-s.x),e.max.y=Math.max(e.max.y,t.y-s.y),e)),{min:new e.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),c=(t,r)=>{const n=t.wrap+t.canonical.x/(1<<t.canonical.z),a=t.canonical.y/(1<<t.canonical.z),i=e.EXTENT/(1<<t.canonical.z),o=r.wrap+r.canonical.x/(1<<r.canonical.z),s=r.canonical.y/(1<<r.canonical.z);return n+i<o+l.min.x||n>o+l.max.x||a+i<s+l.min.y||a>s+l.max.y};for(let e=0;e<i.length;e++){const o=i[e];for(let e=0;e<r.length;e++){const i=t.getTile(r[e]);if(!i||!i.hasData())continue;if(c(o,i.tileID))continue;const s=this._createProxiedId(o,i,n[o.key]&&n[o.key][t.id]),l=this.proxyToSource[o.key][t.id];l?l.push(s):this.proxyToSource[o.key][t.id]=[s],a.push(s)}}}_createProxiedId(t,r,n){let a=this.orthoMatrix;if(n){const e=n.find((e=>e.key===r.tileID.key));if(e)return e}if(r.tileID.key!==t.key){const n=t.canonical.z-r.tileID.canonical.z;let i,o,s;a=e.create$1();const l=r.tileID.wrap-t.wrap<<t.overscaledZ;n>0?(i=e.EXTENT>>n,o=i*((r.tileID.canonical.x<<n)-t.canonical.x+l),s=i*((r.tileID.canonical.y<<n)-t.canonical.y)):(i=e.EXTENT<<-n,o=e.EXTENT*(r.tileID.canonical.x-(t.canonical.x+l<<-n)),s=e.EXTENT*(r.tileID.canonical.y-(t.canonical.y<<-n))),e.ortho(a,0,i,0,i,0,1),e.translate(a,a,[o,s,0])}return new ur(r.tileID,t.key,a)}_findTileCoveringTileID(t,r){let n=r.getTile(t);if(n&&n.hasData())return n;const a=this._findCoveringTileCache[r.id],i=a[t.key];if(n=i?r.getTileByID(i):null,n&&n.hasData()||null===i)return n;let o=n?n.tileID:t,s=o.overscaledZ;const l=r.getSource().minzoom,c=[];if(!i){const a=r.getSource().maxzoom;if(t.canonical.z>=a){const n=t.canonical.z-a;r.getSource().reparseOverscaled?(s=Math.max(t.canonical.z+2,r.transform.tileZoom),o=new e.OverscaledTileID(s,t.wrap,a,t.canonical.x>>n,t.canonical.y>>n)):0!==n&&(s=a,o=new e.OverscaledTileID(s,t.wrap,a,t.canonical.x>>n,t.canonical.y>>n))}o.key!==t.key&&(c.push(o.key),n=r.getTile(o))}const u=e=>{c.forEach((t=>{a[t]=e})),c.length=0};for(s-=1;s>=l&&(!n||!n.hasData());s--){n&&u(n.tileID.key);const e=o.calculateScaledKey(s);if(n=r.getTileByID(e),n&&n.hasData())break;const t=a[e];if(null===t)break;void 0===t?c.push(e):n=r.getTileByID(t)}return u(n?n.tileID.key:null),n&&n.hasData()?n:null}findDEMTileFor(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}prepareDrawTile(e){this.renderedToTile=!0}_clearRenderCacheForTile(e,t){let r=this._tilesDirty[e];r||(r=this._tilesDirty[e]={}),r[t.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const t=function(t){let r,n,a;const i=new e.StructArrayLayout2ui4,o=131;for(n=1;n<129;n++){for(r=1;r<129;r++)a=n*o+r,i.emplaceBack(a,a+1),i.emplaceBack(a,a+o),i.emplaceBack(a+1,a+o),128===n&&i.emplaceBack(a+o,a+o+1);i.emplaceBack(a+1,a+1+o)}return i}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(t),this.wireframeSegments=e.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,t.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}function dr(e){const t=[];for(let r=0;r<e.length;r++){if(null===e[r])continue;const n=e[r].split(" ");t.push(n.pop())}return t}class hr{static cacheKey(e,t,r){let n=`${e}${r?r.cacheKey:""}`;for(const e of t)n+=`/${e}`;return n}constructor(t,r,n,a,i,o){const s=t.gl;this.program=s.createProgram();const l=dr(n.staticAttributes),c=a?a.getBinderAttributes():[],u=l.concat(c),p=n.staticUniforms?dr(n.staticUniforms):[],d=a?a.getBinderUniforms():[],h=p.concat(d),f=[];for(const e of h)f.indexOf(e)<0&&f.push(e);let m=a?a.defines():[];m=m.concat(o.map((e=>`#define ${e}`)));const g=m.concat(Wt.fragmentSource,Xt,Gt.fragmentSource,n.fragmentSource).join("\n"),v=m.concat(Wt.vertexSource,Xt,Gt.vertexSource,Ht.vertexSource,n.vertexSource).join("\n"),y=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(y,g),s.compileShader(y),s.attachShader(this.program,y);const b=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(b,v),s.compileShader(b),s.attachShader(this.program,b),this.attributes={};const _={};this.numAttributes=u.length;for(let e=0;e<this.numAttributes;e++)u[e]&&(s.bindAttribLocation(this.program,e,u[e]),this.attributes[u[e]]=e);s.linkProgram(this.program),s.deleteShader(b),s.deleteShader(y);for(let e=0;e<f.length;e++){const t=f[e];if(t&&!_[t]){const e=s.getUniformLocation(this.program,t);e&&(_[t]=e)}}this.fixedUniforms=i(t,_),this.binderUniforms=a?a.getUniforms(t,_):[],-1!==o.indexOf("TERRAIN")&&(this.terrainUniforms=((t,r)=>({u_dem:new e.Uniform1i(t,r.u_dem),u_dem_prev:new e.Uniform1i(t,r.u_dem_prev),u_dem_unpack:new e.Uniform4f(t,r.u_dem_unpack),u_dem_tl:new e.Uniform2f(t,r.u_dem_tl),u_dem_scale:new e.Uniform1f(t,r.u_dem_scale),u_dem_tl_prev:new e.Uniform2f(t,r.u_dem_tl_prev),u_dem_scale_prev:new e.Uniform1f(t,r.u_dem_scale_prev),u_dem_size:new e.Uniform1f(t,r.u_dem_size),u_dem_lerp:new e.Uniform1f(t,r.u_dem_lerp),u_exaggeration:new e.Uniform1f(t,r.u_exaggeration),u_depth:new e.Uniform1i(t,r.u_depth),u_depth_size_inv:new e.Uniform2f(t,r.u_depth_size_inv),u_meter_to_dem:new e.Uniform1f(t,r.u_meter_to_dem),u_label_plane_matrix_inv:new e.UniformMatrix4f(t,r.u_label_plane_matrix_inv)}))(t,_)),-1!==o.indexOf("FOG")&&(this.fogUniforms=((t,r)=>({u_fog_matrix:new e.UniformMatrix4f(t,r.u_fog_matrix),u_fog_range:new e.Uniform2f(t,r.u_fog_range),u_fog_color:new e.Uniform4f(t,r.u_fog_color),u_fog_horizon_blend:new e.Uniform1f(t,r.u_fog_horizon_blend),u_fog_temporal_offset:new e.Uniform1f(t,r.u_fog_temporal_offset)}))(t,_))}setTerrainUniformValues(e,t){if(!this.terrainUniforms)return;const r=this.terrainUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)r[e].set(t[e])}}setFogUniformValues(e,t){if(!this.fogUniforms)return;const r=this.fogUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)r[e].location&&r[e].set(t[e])}}draw(e,t,r,n,a,i,o,s,l,c,u,p,d,h,f,m){const g=e.gl;if(this.failedToCreate)return;e.program.set(this.program),e.setDepthMode(r),e.setStencilMode(n),e.setColorMode(a),e.setCullFace(i);for(const e in this.fixedUniforms)this.fixedUniforms[e].set(o[e]);h&&h.setUniforms(e,this.binderUniforms,p,{zoom:d});const v={[g.LINES]:2,[g.TRIANGLES]:3,[g.LINE_STRIP]:1}[t];for(const r of u.get()){const n=r.vaos||(r.vaos={});(n[s]||(n[s]=new Kt)).bind(e,this,l,h?h.getPaintVertexBuffers():[],c,r.vertexOffset,f,m),g.drawElements(t,r.primitiveLength*v,g.UNSIGNED_SHORT,r.primitiveOffset*v*2)}}}function fr(e,t,r){const n=1/M(r,1,t.transform.tileZoom),a=Math.pow(2,r.tileID.overscaledZ),i=r.tileSize*Math.pow(2,t.transform.tileZoom)/a,o=i*(r.tileID.canonical.x+r.tileID.wrap*a),s=i*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture.size,u_scale:[n,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[o>>16,s>>16],u_pixel_coord_lower:[65535&o,65535&s]}}const mr=(t,r,n,a)=>{const i=r.style.light,o=i.properties.get("position"),s=[o.x,o.y,o.z],l=e.create$2();"viewport"===i.properties.get("anchor")&&(e.fromRotation(l,-r.transform.angle),e.transformMat3(s,s,l));const c=i.properties.get("color");return{u_matrix:t,u_lightpos:s,u_lightintensity:i.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+n,u_opacity:a}},gr=(t,r,n,a,i,o,s)=>e.extend(mr(t,r,n,a),fr(o,r,s),{u_height_factor:-Math.pow(2,i.overscaledZ)/s.tileSize/8}),vr=e=>({u_matrix:e}),yr=(t,r,n,a)=>e.extend(vr(t),fr(n,r,a)),br=(e,t)=>({u_matrix:e,u_world:t}),_r=(t,r,n,a,i)=>e.extend(yr(t,r,n,a),{u_world:i}),xr=(t,r,n,a)=>{const i=t.transform;let o;if("map"===a.paint.get("circle-pitch-alignment")){const e=M(n,1,i.zoom);o=[e,e]}else o=i.pixelsToGLUnits;return{u_camera_to_center_distance:i.cameraToCenterDistance,u_matrix:t.translatePosMatrix(r.projMatrix,n,a.paint.get("circle-translate"),a.paint.get("circle-translate-anchor")),u_device_pixel_ratio:e.exported.devicePixelRatio,u_extrude_scale:o}},wr=e=>{const t=[];return"map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},Er=(t,r,n)=>{const a=e.EXTENT/n.tileSize;return{u_matrix:t,u_camera_to_center_distance:r.cameraToCenterDistance,u_extrude_scale:[r.pixelsToGLUnits[0]/a,r.pixelsToGLUnits[1]/a]}},Cr=(e,t,r=1)=>({u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:r}),kr=(e,t,r,n)=>({u_matrix:e,u_extrude_scale:M(t,1,r),u_intensity:n}),Tr=(t,r,n,a)=>{const i=t.transform;return{u_matrix:Ar(t,r,n,a),u_ratio:1/M(r,1,i.zoom),u_device_pixel_ratio:e.exported.devicePixelRatio,u_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]]}},Sr=(t,r,n,a,i)=>e.extend(Tr(t,r,n,a),{u_image:0,u_image_height:i}),Pr=(t,r,n,a,i)=>{const o=t.transform,s=Ir(r,o);return{u_matrix:Ar(t,r,n,i),u_texsize:r.imageAtlasTexture.size,u_ratio:1/M(r,1,o.zoom),u_device_pixel_ratio:e.exported.devicePixelRatio,u_image:0,u_scale:[s,a.fromScale,a.toScale],u_fade:a.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Mr=(t,r,n,a,i)=>{const o=Ir(r,t.transform);return e.extend(Tr(t,r,n,i),{u_texsize:r.lineAtlasTexture.size,u_scale:[o,a.fromScale,a.toScale],u_image:0,u_mix:a.t})};function Ir(e,t){return 1/M(e,1,t.tileZoom)}function Ar(e,t,r,n){return e.translatePosMatrix(n||t.tileID.projMatrix,t,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}const Or=(e,t,r,n,a)=>{return{u_matrix:e,u_tl_parent:t,u_scale_parent:r,u_buffer_scale:1,u_fade_t:n.mix,u_opacity:n.opacity*a.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:a.paint.get("raster-brightness-min"),u_brightness_high:a.paint.get("raster-brightness-max"),u_saturation_factor:(o=a.paint.get("raster-saturation"),o>0?1-1/(1.001-o):-o),u_contrast_factor:(i=a.paint.get("raster-contrast"),i>0?1/(1-i):1+i),u_spin_weights:zr(a.paint.get("raster-hue-rotate"))};var i,o};function zr(e){e*=Math.PI/180;const t=Math.sin(e),r=Math.cos(e);return[(2*r+1)/3,(-Math.sqrt(3)*t-r+1)/3,(Math.sqrt(3)*t-r+1)/3]}const Rr=(e,t,r,n,a,i,o,s,l,c)=>{const u=a.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:u.cameraToCenterDistance,u_pitch:u.pitch/360*2*Math.PI,u_rotate_symbol:+r,u_aspect_ratio:u.width/u.height,u_fade_change:a.options.fadeDuration?a.symbolFadeChange:1,u_matrix:i,u_label_plane_matrix:o,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+n,u_texsize:c,u_texture:0}},Lr=(t,r,n,a,i,o,s,l,c,u,p)=>{const{cameraToCenterDistance:d,_pitch:h}=i.transform;return e.extend(Rr(t,r,n,a,i,o,s,l,c,u),{u_gamma_scale:a?d*Math.cos(i.terrain?0:h):1,u_device_pixel_ratio:e.exported.devicePixelRatio,u_is_halo:+p})},Dr=(t,r,n,a,i,o,s,l,c,u)=>e.extend(Lr(t,r,n,a,i,o,s,l,!0,c,!0),{u_texsize_icon:u,u_texture_icon:1}),Br=(e,t,r)=>({u_matrix:e,u_opacity:t,u_color:r}),$r=(t,r,n,a,i,o)=>e.extend(function(e,t,r,n){const a=r.imageManager.getPattern(e.from.toString()),i=r.imageManager.getPattern(e.to.toString()),{width:o,height:s}=r.imageManager.getPixelSize(),l=Math.pow(2,n.tileID.overscaledZ),c=n.tileSize*Math.pow(2,r.transform.tileZoom)/l,u=c*(n.tileID.canonical.x+n.tileID.wrap*l),p=c*n.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:a.tl,u_pattern_br_a:a.br,u_pattern_tl_b:i.tl,u_pattern_br_b:i.br,u_texsize:[o,s],u_mix:t.t,u_pattern_size_a:a.displaySize,u_pattern_size_b:i.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/M(n,1,r.transform.tileZoom),u_pixel_coord_upper:[u>>16,p>>16],u_pixel_coord_lower:[65535&u,65535&p]}}(a,o,n,i),{u_matrix:t,u_opacity:r}),Fr={fillExtrusion:(t,r)=>({u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_lightpos:new e.Uniform3f(t,r.u_lightpos),u_lightintensity:new e.Uniform1f(t,r.u_lightintensity),u_lightcolor:new e.Uniform3f(t,r.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,r.u_vertical_gradient),u_opacity:new e.Uniform1f(t,r.u_opacity)}),fillExtrusionPattern:(t,r)=>({u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_lightpos:new e.Uniform3f(t,r.u_lightpos),u_lightintensity:new e.Uniform1f(t,r.u_lightintensity),u_lightcolor:new e.Uniform3f(t,r.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,r.u_vertical_gradient),u_height_factor:new e.Uniform1f(t,r.u_height_factor),u_image:new e.Uniform1i(t,r.u_image),u_texsize:new e.Uniform2f(t,r.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,r.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,r.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,r.u_scale),u_fade:new e.Uniform1f(t,r.u_fade),u_opacity:new e.Uniform1f(t,r.u_opacity)}),fill:(t,r)=>({u_matrix:new e.UniformMatrix4f(t,r.u_matrix)}),fillPattern:(t,r)=>({u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_image:new e.Uniform1i(t,r.u_image),u_texsize:new e.Uniform2f(t,r.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,r.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,r.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,r.u_scale),u_fade:new e.Uniform1f(t,r.u_fade)}),fillOutline:(t,r)=>({u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_world:new e.Uniform2f(t,r.u_world)}),fillOutlinePattern:(t,r)=>({u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_world:new e.Uniform2f(t,r.u_world),u_image:new e.Uniform1i(t,r.u_image),u_texsize:new e.Uniform2f(t,r.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,r.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,r.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,r.u_scale),u_fade:new e.Uniform1f(t,r.u_fade)}),circle:(t,r)=>({u_camera_to_center_distance:new e.Uniform1f(t,r.u_camera_to_center_distance),u_extrude_scale:new e.Uniform2f(t,r.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(t,r.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(t,r.u_matrix)}),collisionBox:(t,r)=>({u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_camera_to_center_distance:new e.Uniform1f(t,r.u_camera_to_center_distance),u_extrude_scale:new e.Uniform2f(t,r.u_extrude_scale)}),collisionCircle:(t,r)=>({u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_inv_matrix:new e.UniformMatrix4f(t,r.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(t,r.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(t,r.u_viewport_size)}),debug:(t,r)=>({u_color:new e.UniformColor(t,r.u_color),u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_overlay:new e.Uniform1i(t,r.u_overlay),u_overlay_scale:new e.Uniform1f(t,r.u_overlay_scale)}),clippingMask:(t,r)=>({u_matrix:new e.UniformMatrix4f(t,r.u_matrix)}),heatmap:(t,r)=>({u_extrude_scale:new e.Uniform1f(t,r.u_extrude_scale),u_intensity:new e.Uniform1f(t,r.u_intensity),u_matrix:new e.UniformMatrix4f(t,r.u_matrix)}),heatmapTexture:(t,r)=>({u_image:new e.Uniform1i(t,r.u_image),u_color_ramp:new e.Uniform1i(t,r.u_color_ramp),u_opacity:new e.Uniform1f(t,r.u_opacity)}),hillshade:(t,r)=>({u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_image:new e.Uniform1i(t,r.u_image),u_latrange:new e.Uniform2f(t,r.u_latrange),u_light:new e.Uniform2f(t,r.u_light),u_shadow:new e.UniformColor(t,r.u_shadow),u_highlight:new e.UniformColor(t,r.u_highlight),u_accent:new e.UniformColor(t,r.u_accent)}),hillshadePrepare:(t,r)=>({u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_image:new e.Uniform1i(t,r.u_image),u_dimension:new e.Uniform2f(t,r.u_dimension),u_zoom:new e.Uniform1f(t,r.u_zoom),u_unpack:new e.Uniform4f(t,r.u_unpack)}),line:(t,r)=>({u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_ratio:new e.Uniform1f(t,r.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,r.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,r.u_units_to_pixels)}),lineGradient:(t,r)=>({u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_ratio:new e.Uniform1f(t,r.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,r.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,r.u_units_to_pixels),u_image:new e.Uniform1i(t,r.u_image),u_image_height:new e.Uniform1f(t,r.u_image_height)}),linePattern:(t,r)=>({u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_texsize:new e.Uniform2f(t,r.u_texsize),u_ratio:new e.Uniform1f(t,r.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,r.u_device_pixel_ratio),u_image:new e.Uniform1i(t,r.u_image),u_units_to_pixels:new e.Uniform2f(t,r.u_units_to_pixels),u_scale:new e.Uniform3f(t,r.u_scale),u_fade:new e.Uniform1f(t,r.u_fade)}),lineSDF:(t,r)=>({u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_texsize:new e.Uniform2f(t,r.u_texsize),u_ratio:new e.Uniform1f(t,r.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,r.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,r.u_units_to_pixels),u_image:new e.Uniform1i(t,r.u_image),u_scale:new e.Uniform3f(t,r.u_scale),u_mix:new e.Uniform1f(t,r.u_mix)}),raster:(t,r)=>({u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_tl_parent:new e.Uniform2f(t,r.u_tl_parent),u_scale_parent:new e.Uniform1f(t,r.u_scale_parent),u_buffer_scale:new e.Uniform1f(t,r.u_buffer_scale),u_fade_t:new e.Uniform1f(t,r.u_fade_t),u_opacity:new e.Uniform1f(t,r.u_opacity),u_image0:new e.Uniform1i(t,r.u_image0),u_image1:new e.Uniform1i(t,r.u_image1),u_brightness_low:new e.Uniform1f(t,r.u_brightness_low),u_brightness_high:new e.Uniform1f(t,r.u_brightness_high),u_saturation_factor:new e.Uniform1f(t,r.u_saturation_factor),u_contrast_factor:new e.Uniform1f(t,r.u_contrast_factor),u_spin_weights:new e.Uniform3f(t,r.u_spin_weights)}),symbolIcon:(t,r)=>({u_is_size_zoom_constant:new e.Uniform1i(t,r.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,r.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,r.u_size_t),u_size:new e.Uniform1f(t,r.u_size),u_camera_to_center_distance:new e.Uniform1f(t,r.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,r.u_pitch),u_rotate_symbol:new e.Uniform1i(t,r.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,r.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,r.u_fade_change),u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,r.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,r.u_coord_matrix),u_is_text:new e.Uniform1i(t,r.u_is_text),u_pitch_with_map:new e.Uniform1i(t,r.u_pitch_with_map),u_texsize:new e.Uniform2f(t,r.u_texsize),u_texture:new e.Uniform1i(t,r.u_texture)}),symbolSDF:(t,r)=>({u_is_size_zoom_constant:new e.Uniform1i(t,r.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,r.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,r.u_size_t),u_size:new e.Uniform1f(t,r.u_size),u_camera_to_center_distance:new e.Uniform1f(t,r.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,r.u_pitch),u_rotate_symbol:new e.Uniform1i(t,r.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,r.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,r.u_fade_change),u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,r.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,r.u_coord_matrix),u_is_text:new e.Uniform1i(t,r.u_is_text),u_pitch_with_map:new e.Uniform1i(t,r.u_pitch_with_map),u_texsize:new e.Uniform2f(t,r.u_texsize),u_texture:new e.Uniform1i(t,r.u_texture),u_gamma_scale:new e.Uniform1f(t,r.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,r.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,r.u_is_halo)}),symbolTextAndIcon:(t,r)=>({u_is_size_zoom_constant:new e.Uniform1i(t,r.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,r.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,r.u_size_t),u_size:new e.Uniform1f(t,r.u_size),u_camera_to_center_distance:new e.Uniform1f(t,r.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,r.u_pitch),u_rotate_symbol:new e.Uniform1i(t,r.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,r.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,r.u_fade_change),u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,r.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,r.u_coord_matrix),u_is_text:new e.Uniform1i(t,r.u_is_text),u_pitch_with_map:new e.Uniform1i(t,r.u_pitch_with_map),u_texsize:new e.Uniform2f(t,r.u_texsize),u_texsize_icon:new e.Uniform2f(t,r.u_texsize_icon),u_texture:new e.Uniform1i(t,r.u_texture),u_texture_icon:new e.Uniform1i(t,r.u_texture_icon),u_gamma_scale:new e.Uniform1f(t,r.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,r.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,r.u_is_halo)}),background:(t,r)=>({u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_opacity:new e.Uniform1f(t,r.u_opacity),u_color:new e.UniformColor(t,r.u_color)}),backgroundPattern:(t,r)=>({u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_opacity:new e.Uniform1f(t,r.u_opacity),u_image:new e.Uniform1i(t,r.u_image),u_pattern_tl_a:new e.Uniform2f(t,r.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(t,r.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(t,r.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(t,r.u_pattern_br_b),u_texsize:new e.Uniform2f(t,r.u_texsize),u_mix:new e.Uniform1f(t,r.u_mix),u_pattern_size_a:new e.Uniform2f(t,r.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(t,r.u_pattern_size_b),u_scale_a:new e.Uniform1f(t,r.u_scale_a),u_scale_b:new e.Uniform1f(t,r.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(t,r.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,r.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(t,r.u_tile_units_to_pixels)}),terrainRaster:rr,terrainDepth:rr,skybox:(t,r)=>({u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_sun_direction:new e.Uniform3f(t,r.u_sun_direction),u_cubemap:new e.Uniform1i(t,r.u_cubemap),u_opacity:new e.Uniform1f(t,r.u_opacity),u_temporal_offset:new e.Uniform1f(t,r.u_temporal_offset)}),skyboxGradient:(t,r)=>({u_matrix:new e.UniformMatrix4f(t,r.u_matrix),u_color_ramp:new e.Uniform1i(t,r.u_color_ramp),u_center_direction:new e.Uniform3f(t,r.u_center_direction),u_radius:new e.Uniform1f(t,r.u_radius),u_opacity:new e.Uniform1f(t,r.u_opacity),u_temporal_offset:new e.Uniform1f(t,r.u_temporal_offset)}),skyboxCapture:(t,r)=>({u_matrix_3f:new e.UniformMatrix3f(t,r.u_matrix_3f),u_sun_direction:new e.Uniform3f(t,r.u_sun_direction),u_sun_intensity:new e.Uniform1f(t,r.u_sun_intensity),u_color_tint_r:new e.Uniform4f(t,r.u_color_tint_r),u_color_tint_m:new e.Uniform4f(t,r.u_color_tint_m),u_luminance:new e.Uniform1f(t,r.u_luminance)})};let Nr;function Vr(t,r,n,a,i,o,s){const l=t.context,c=l.gl,u=t.useProgram("collisionBox"),p=[];let d=0,h=0;for(let f=0;f<a.length;f++){const m=a[f],g=r.getTile(m),v=g.getBucket(n);if(!v)continue;let y=m.projMatrix;0===i[0]&&0===i[1]||(y=t.translatePosMatrix(m.projMatrix,g,i,o));const b=s?v.textCollisionBox:v.iconCollisionBox,_=v.collisionCircleArray;if(_.length>0){const r=e.create$1(),n=y;e.mul$1(r,v.placementInvProjMatrix,t.transform.glCoordMatrix),e.mul$1(r,r,v.placementViewportMatrix),p.push({circleArray:_,circleOffset:h,transform:n,invTransform:r}),d+=_.length/4,h=d}b&&(t.terrain&&t.terrain.setupElevationDraw(g,u),u.draw(l,c.LINES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,Er(y,t.transform,g),n.id,b.layoutVertexBuffer,b.indexBuffer,b.segments,null,t.transform.zoom,null,b.collisionVertexBuffer,b.collisionVertexBufferExt))}if(!s||!p.length)return;const f=t.useProgram("collisionCircle"),m=new e.StructArrayLayout2f1f2i16;m.resize(4*d),m._trim();let g=0;for(const e of p)for(let t=0;t<e.circleArray.length/4;t++){const r=4*t,n=e.circleArray[r+0],a=e.circleArray[r+1],i=e.circleArray[r+2],o=e.circleArray[r+3];m.emplace(g++,n,a,i,o,0),m.emplace(g++,n,a,i,o,1),m.emplace(g++,n,a,i,o,2),m.emplace(g++,n,a,i,o,3)}(!Nr||Nr.length<2*d)&&(Nr=function(t){const r=2*t,n=new e.StructArrayLayout3ui6;n.resize(r),n._trim();for(let e=0;e<r;e++){const t=6*e;n.uint16[t+0]=4*e+0,n.uint16[t+1]=4*e+1,n.uint16[t+2]=4*e+2,n.uint16[t+3]=4*e+2,n.uint16[t+4]=4*e+3,n.uint16[t+5]=4*e+0}return n}(d));const v=l.createIndexBuffer(Nr,!0),y=l.createVertexBuffer(m,e.collisionCircleLayout.members,!0);for(const r of p){const a={u_matrix:r.transform,u_inv_matrix:r.invTransform,u_camera_to_center_distance:(b=t.transform).cameraToCenterDistance,u_viewport_size:[b.width,b.height]};f.draw(l,c.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,a,n.id,y,v,e.SegmentVector.simpleSegment(0,2*r.circleOffset,r.circleArray.length,r.circleArray.length/2),null,t.transform.zoom,null,null,null)}var b;y.destroy(),v.destroy()}const jr=e.identity(new Float32Array(16));function Ur(t,r,n,a,i,o){const{horizontalAlign:s,verticalAlign:l}=e.getAnchorAlignment(t),c=-(s-.5)*r,u=-(l-.5)*n,p=e.evaluateVariableOffset(t,a);return new e.pointGeometry((c/i+p[0])*o,(u/i+p[1])*o)}function qr(t,r,n,a,i,o,s,l,c,u,p,d){const h=t.text.placedSymbolArray,f=t.text.dynamicLayoutVertexArray,m=t.icon.dynamicLayoutVertexArray,g={};f.clear();for(let m=0;m<h.length;m++){const v=h.get(m),y=t.allowVerticalPlacement&&!v.placedOrientation,b=v.hidden||!v.crossTileID||y?null:a[v.crossTileID];if(b){const a=new e.pointGeometry(v.anchorX,v.anchorY),h=d(a),m=Ke(a,n?l:s,h),y=Qe(o.cameraToCenterDistance,m.signedDistanceFromCamera);let _=i.evaluateSizeForFeature(t.textSizeData,u,v)*y/e.ONE_EM;n&&(_*=t.tilePixelRatio/c);const{width:x,height:w,anchor:E,textOffset:C,textScale:k}=b,T=Ur(E,x,w,C,k,_),S=n?Ke(a.add(T),s,h).point:m.point.add(r?T.rotate(-o.angle):T),P=t.allowVerticalPlacement&&v.placedOrientation===e.WritingMode.vertical?Math.PI/2:0;for(let t=0;t<v.numGlyphs;t++)e.addDynamicAttributes(f,S,P);p&&v.associatedIconIndex>=0&&(g[v.associatedIconIndex]={shiftedAnchor:S,angle:P})}else st(v.numGlyphs,f)}if(p){m.clear();const r=t.icon.placedSymbolArray;for(let t=0;t<r.length;t++){const n=r.get(t);if(n.hidden)st(n.numGlyphs,m);else{const r=g[t];if(r)for(let t=0;t<n.numGlyphs;t++)e.addDynamicAttributes(m,r.shiftedAnchor,r.angle);else st(n.numGlyphs,m)}}t.icon.dynamicLayoutVertexBuffer.updateData(m)}t.text.dynamicLayoutVertexBuffer.updateData(f)}function Hr(e,t,r){return r.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function Gr(t,r,n,a,i,o,s,l,c,u,p,d){const h=t.context,f=h.gl,m=t.transform,g="map"===l,v="map"===c,y=g&&"point"!==n.layout.get("symbol-placement"),b=g&&!v&&!y,_=void 0!==n.layout.get("symbol-sort-key").constantOr(1);let x=!1;const w=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),E=n.layout.get("text-variable-anchor"),C=[],k=t.terrain&&v?["PITCH_WITH_MAP_TERRAIN"]:null;for(const l of a){const a=r.getTile(l),c=a.getBucket(n);if(!c)continue;const p=i?c.text:c.icon;if(!p||!p.segments.get().length)continue;const d=p.programConfigurations.get(n.id),h=i||c.sdfIcons,w=i?c.textSizeData:c.iconSizeData,T=v||0!==m.pitch,S=t.useProgram(Hr(h,i,c),d,k),P=e.evaluateSizeForZoom(w,m.zoom);let I,A,O,z,R=[0,0],L=null;if(i){if(A=a.glyphAtlasTexture,O=f.LINEAR,I=a.glyphAtlasTexture.size,c.iconsInText){R=a.imageAtlasTexture.size,L=a.imageAtlasTexture;const e="composite"===w.kind||"camera"===w.kind;z=T||t.options.rotating||t.options.zooming||e?f.LINEAR:f.NEAREST}}else{const e=1!==n.layout.get("icon-size").constantOr(0)||c.iconsNeedLinear;A=a.imageAtlasTexture,O=h||t.options.rotating||t.options.zooming||e||T?f.LINEAR:f.NEAREST,I=a.imageAtlasTexture.size}const D=M(a,1,t.transform.zoom),B=Ze(l.projMatrix,v,g,t.transform,D),$=t.terrain&&v&&y?e.invert(new Float32Array(16),B):jr,F=Ye(l.projMatrix,v,g,t.transform,D),N=E&&c.hasTextData(),V="none"!==n.layout.get("icon-text-fit")&&N&&c.hasIconData();if(y){const e=m.elevation;et(c,l.projMatrix,t,i,B,F,v,u,e?t=>e.getAtTileOffset(l,t.x,t.y):null)}const j=t.translatePosMatrix(l.projMatrix,a,o,s),U=y||i&&E||V?jr:B,q=t.translatePosMatrix(F,a,o,s,!0),H=h&&0!==n.paint.get(i?"text-halo-width":"icon-halo-width").constantOr(1);let G;G=h?c.iconsInText?Dr(w.kind,P,b,v,t,j,U,q,I,R):Lr(w.kind,P,b,v,t,j,U,q,i,I,!0):Rr(w.kind,P,b,v,t,j,U,q,i,I);const W={program:S,buffers:p,uniformValues:G,atlasTexture:A,atlasTextureIcon:L,atlasInterpolation:O,atlasInterpolationIcon:z,isSDF:h,hasHalo:H,tile:a,labelPlaneMatrixInv:$};if(_&&c.canOverlap){x=!0;const t=p.segments.get();for(const r of t)C.push({segments:new e.SegmentVector([r]),sortKey:r.sortKey,state:W})}else C.push({segments:p.segments,sortKey:0,state:W})}x&&C.sort(((e,t)=>e.sortKey-t.sortKey));for(const e of C){const r=e.state;if(t.terrain&&t.terrain.setupElevationDraw(r.tile,r.program,{useDepthForOcclusion:!0,labelPlaneMatrixInv:r.labelPlaneMatrixInv}),h.activeTexture.set(f.TEXTURE0),r.atlasTexture.bind(r.atlasInterpolation,f.CLAMP_TO_EDGE),r.atlasTextureIcon&&(h.activeTexture.set(f.TEXTURE1),r.atlasTextureIcon&&r.atlasTextureIcon.bind(r.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),r.isSDF){const a=r.uniformValues;r.hasHalo&&(a.u_is_halo=1,Wr(r.buffers,e.segments,n,t,r.program,w,p,d,a)),a.u_is_halo=0}Wr(r.buffers,e.segments,n,t,r.program,w,p,d,r.uniformValues)}}function Wr(t,r,n,a,i,o,s,l,c){const u=a.context;i.draw(u,u.gl.TRIANGLES,o,s,l,e.CullFaceMode.disabled,c,n.id,t.layoutVertexBuffer,t.indexBuffer,r,n.paint,a.transform.zoom,t.programConfigurations.get(n.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function Xr(t,r,n,a,i,o,s){const l=t.context.gl,c=n.paint.get("fill-pattern"),u=c&&c.constantOr(1),p=n.getCrossfadeParameters();let d,h,f,m,g;s?(h=u&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",d=l.LINES):(h=u?"fillPattern":"fill",d=l.TRIANGLES);for(const v of a){const a=r.getTile(v);if(u&&!a.patternsLoaded())continue;const y=a.getBucket(n);if(!y)continue;t.prepareDrawTile(v);const b=y.programConfigurations.get(n.id),_=t.useProgram(h,b);u&&(t.context.activeTexture.set(l.TEXTURE0),a.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),b.updatePaintBuffers(p));const x=c.constantOr(null);if(x&&a.imageAtlas){const e=a.imageAtlas,t=e.patternPositions[x.to.toString()],r=e.patternPositions[x.from.toString()];t&&r&&b.setConstantPatternPositions(t,r)}const w=t.translatePosMatrix(v.projMatrix,a,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(s){m=y.indexBuffer2,g=y.segments2;const e=t.terrain&&t.terrain.renderingToTexture?t.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];f="fillOutlinePattern"===h&&u?_r(w,t,p,a,e):br(w,e)}else m=y.indexBuffer,g=y.segments,f=u?yr(w,t,p,a):vr(w);t.prepareDrawProgram(t.context,_,v.toUnwrapped()),_.draw(t.context,d,i,t.stencilModeForClipping(v),o,e.CullFaceMode.disabled,f,n.id,y.layoutVertexBuffer,m,g,n.paint,t.transform.zoom,b)}}function Zr(t,r,n,a,i,o,s){const l=t.context,c=l.gl,u=n.paint.get("fill-extrusion-pattern"),p=u.constantOr(1),d=n.getCrossfadeParameters(),h=n.paint.get("fill-extrusion-opacity");for(const f of a){const a=r.getTile(f),m=a.getBucket(n);if(!m)continue;const g=m.programConfigurations.get(n.id),v=t.useProgram(p?"fillExtrusionPattern":"fillExtrusion",g);if(t.terrain){const e=t.terrain;if(!m.enableTerrain)continue;if(e.setupElevationDraw(a,v,{useMeterToDem:!0}),Yr(l,r,f,m,n,e),!m.centroidVertexBuffer){const e=v.attributes.a_centroid_pos;void 0!==e&&c.vertexAttrib2f(e,0,0)}}p&&(t.context.activeTexture.set(c.TEXTURE0),a.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),g.updatePaintBuffers(d));const y=u.constantOr(null);if(y&&a.imageAtlas){const e=a.imageAtlas,t=e.patternPositions[y.to.toString()],r=e.patternPositions[y.from.toString()];t&&r&&g.setConstantPatternPositions(t,r)}const b=t.translatePosMatrix(f.projMatrix,a,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),_=n.paint.get("fill-extrusion-vertical-gradient"),x=p?gr(b,t,_,h,f,d,a):mr(b,t,_,h);t.prepareDrawProgram(l,v,f.toUnwrapped()),v.draw(l,l.gl.TRIANGLES,i,o,s,e.CullFaceMode.backCCW,x,n.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,n.paint,t.transform.zoom,g,t.terrain?m.centroidVertexBuffer:null)}}function Yr(t,r,n,a,i,o){const s=[t=>{let r=t.canonical.x-1,n=t.wrap;return r<0&&(r=(1<<t.canonical.z)-1,n--),new e.OverscaledTileID(t.overscaledZ,n,t.canonical.z,r,t.canonical.y)},t=>{let r=t.canonical.x+1,n=t.wrap;return r===1<<t.canonical.z&&(r=0,n++),new e.OverscaledTileID(t.overscaledZ,n,t.canonical.z,r,t.canonical.y)},t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1),t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)],l=e=>{const t=r.getSource().maxzoom,n=e=>{const t=r.getTileByID(e);if(t&&t.hasData())return t.getBucket(i)};let a,o,s;return(e.overscaledZ===e.canonical.z||e.overscaledZ>=t)&&(a=n(e.key)),e.overscaledZ>=t&&(o=n(e.calculateScaledKey(e.overscaledZ+1))),e.overscaledZ>t&&(s=n(e.calculateScaledKey(e.overscaledZ-1))),a||o||s},c=[0,0,0],u=(t,r)=>(c[0]=Math.min(t.min.y,r.min.y),c[1]=Math.max(t.max.y,r.max.y),c[2]=e.EXTENT-r.min.x>t.max.x?r.min.x-e.EXTENT:t.max.x,c),p=(t,r)=>(c[0]=Math.min(t.min.x,r.min.x),c[1]=Math.max(t.max.x,r.max.x),c[2]=e.EXTENT-r.min.y>t.max.y?r.min.y-e.EXTENT:t.max.y,c),d=[(e,t)=>u(e,t),(e,t)=>u(t,e),(e,t)=>p(e,t),(e,t)=>p(t,e)],h=new e.pointGeometry(0,0);let f,m,g;const v=(t,r,a,i,s)=>{const l=[[i?a:t,i?t:a,0],[i?a:r,i?r:a,0]],c=s<0?e.EXTENT+s:s,u=[i?c:(t+r)/2,i?(t+r)/2:c,0];return 0===a&&s<0||0!==a&&s>0?o.getForTilePoints(g,[u],!0,m):l.push(u),o.getForTilePoints(n,l,!0,f),Math.max(l[0][2],l[1][2],u[2])/o.exaggeration()};for(let t=0;t<4;t++){const r=a.borders[t];if(0===r.length&&(a.borderDone[t]=!0),a.borderDone[t])continue;const i=g=s[t](n),c=l(i);if(!c||!c.enableTerrain)continue;if(m=o.findDEMTileFor(i),!m||!m.dem)continue;if(!f){const e=o.findDEMTileFor(n);if(!e||!e.dem)return;f=e}const u=(t<2?1:5)-t,p=c.borders[u];let y=0;for(let n=0;n<r.length;n++){const i=a.featuresOnBorder[r[n]],o=i.borders[t];let s;for(;y<p.length&&(s=c.featuresOnBorder[p[y]],!(s.borders[u][1]>o[0]+3));)c.borderDone[u]||c.encodeCentroid(void 0,s,!1),y++;if(s&&y<p.length){const r=y;let n=0;for(;!(s.borders[u][0]>o[1]-3)&&(n++,++y!==p.length);)s=c.featuresOnBorder[p[y]];if(s=c.featuresOnBorder[p[r]],i.intersectsCount()>1||s.intersectsCount()>1||1!==n){1!==n&&(y=r),a.encodeCentroid(void 0,i,!1),c.borderDone[u]||c.encodeCentroid(void 0,s,!1);continue}const l=d[t](i,s),f=t%2?e.EXTENT-1:0;h.x=v(l[0],Math.min(e.EXTENT-1,l[1]),f,t<2,l[2]),h.y=0,a.encodeCentroid(h,i,!1),c.borderDone[u]||c.encodeCentroid(h,s,!1)}else a.encodeCentroid(void 0,i,!1)}a.borderDone[t]=a.needsCentroidUpdate=!0,c.borderDone[u]||(c.borderDone[u]=c.needsCentroidUpdate=!0)}(a.needsCentroidUpdate||!a.centroidVertexBuffer&&0!==a.centroidVertexArray.length)&&a.uploadCentroid(t)}const Kr=new e.Color(1,0,0,1),Qr=new e.Color(0,1,0,1),Jr=new e.Color(0,0,1,1),en=new e.Color(1,0,1,1),tn=new e.Color(0,1,1,1);function rn(e,t,r,n){an(e,0,t+r/2,e.transform.width,r,n)}function nn(e,t,r,n){an(e,t-r/2,0,r,e.transform.height,n)}function an(t,r,n,a,i,o){const s=t.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(r*e.exported.devicePixelRatio,n*e.exported.devicePixelRatio,a*e.exported.devicePixelRatio,i*e.exported.devicePixelRatio),s.clear({color:o}),l.disable(l.SCISSOR_TEST)}function on(t,r,n){const a=t.context,i=a.gl,o=n.projMatrix,s=t.useProgram("debug"),l=r.getTileByID(n.key);t.terrain&&t.terrain.setupElevationDraw(l,s);const c=e.DepthMode.disabled,u=e.StencilMode.disabled,p=t.colorModeForRenderPass(),d="$debug";a.activeTexture.set(i.TEXTURE0),t.emptyTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE),s.draw(a,i.LINE_STRIP,c,u,p,e.CullFaceMode.disabled,Cr(o,e.Color.red),d,t.debugBuffer,t.tileBorderIndexBuffer,t.debugSegments);const h=l.latestRawTileData,f=Math.floor((h&&h.byteLength||0)/1024),m=r.getTile(n).tileSize,g=512/Math.min(m,512)*(n.overscaledZ/t.transform.zoom)*.5;let v=n.canonical.toString();n.overscaledZ!==n.canonical.z&&(v+=` => ${n.overscaledZ}`),function(e,t){e.initDebugOverlayCanvas();const r=e.debugOverlayCanvas,n=e.context.gl,a=e.debugOverlayCanvas.getContext("2d");a.clearRect(0,0,r.width,r.height),a.shadowColor="white",a.shadowBlur=2,a.lineWidth=1.5,a.strokeStyle="white",a.textBaseline="top",a.font="bold 36px Open Sans, sans-serif",a.fillText(t,5,5),a.strokeText(t,5,5),e.debugOverlayTexture.update(r),e.debugOverlayTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}(t,`${v} ${f}kb`),s.draw(a,i.TRIANGLES,c,u,e.ColorMode.alphaBlended,e.CullFaceMode.disabled,Cr(o,e.Color.transparent,g),d,t.debugBuffer,t.quadTriangleIndexBuffer,t.debugSegments)}const sn=e.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:ln}=sn;function cn(e,t,r,n){e.emplaceBack(t,r,n)}class un{constructor(t){this.vertexArray=new e.StructArrayLayout3f12,this.indices=new e.StructArrayLayout3ui6,cn(this.vertexArray,-1,-1,1),cn(this.vertexArray,1,-1,1),cn(this.vertexArray,-1,1,1),cn(this.vertexArray,1,1,1),cn(this.vertexArray,-1,-1,-1),cn(this.vertexArray,1,-1,-1),cn(this.vertexArray,-1,1,-1),cn(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=t.createVertexBuffer(this.vertexArray,ln),this.indexBuffer=t.createIndexBuffer(this.indices),this.segment=e.SegmentVector.simpleSegment(0,0,36,12)}}function pn(t,r,n,a,i,o){const s=t.gl,l=r.paint.get("sky-atmosphere-color"),c=r.paint.get("sky-atmosphere-halo-color"),u=r.paint.get("sky-atmosphere-sun-intensity"),p=((e,t,r,n,a)=>({u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:r,u_color_tint_r:[n.r,n.g,n.b,n.a],u_color_tint_m:[a.r,a.g,a.b,a.a],u_luminance:5e-5}))(e.fromMat4([],a),i,u,l,c);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+o,r.skyboxTexture,0),n.draw(t,s.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.frontCW,p,"skyboxCapture",r.skyboxGeometry.vertexBuffer,r.skyboxGeometry.indexBuffer,r.skyboxGeometry.segment)}const dn={symbol:function(t,r,n,a,i){if("translucent"!==t.renderPass)return;const o=e.StencilMode.disabled,s=t.colorModeForRenderPass();n.layout.get("text-variable-anchor")&&function(t,r,n,a,i,o,s){const l=r.transform,c="map"===i,u="map"===o;for(const i of t){const t=a.getTile(i),o=t.getBucket(n);if(!o||!o.text||!o.text.segments.get().length)continue;const p=e.evaluateSizeForZoom(o.textSizeData,l.zoom),d=M(t,1,r.transform.zoom),h=Ze(i.projMatrix,u,c,r.transform,d),f="none"!==n.layout.get("icon-text-fit")&&o.hasIconData();if(p){const r=Math.pow(2,l.zoom-t.tileID.overscaledZ),n=l.elevation;qr(o,c,u,s,e.symbolSize,l,h,i.projMatrix,r,p,f,n?e=>n.getAtTileOffset(i,e.x,e.y):e=>0)}}}(a,t,n,r,n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),i),0!==n.paint.get("icon-opacity").constantOr(1)&&Gr(t,r,n,a,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),o,s),0!==n.paint.get("text-opacity").constantOr(1)&&Gr(t,r,n,a,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),o,s),r.map.showCollisionBoxes&&(Vr(t,r,n,a,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),!0),Vr(t,r,n,a,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),!1))},circle:function(t,r,n,a){if("translucent"!==t.renderPass)return;const i=n.paint.get("circle-opacity"),o=n.paint.get("circle-stroke-width"),s=n.paint.get("circle-stroke-opacity"),l=void 0!==n.layout.get("circle-sort-key").constantOr(1);if(0===i.constantOr(1)&&(0===o.constantOr(1)||0===s.constantOr(1)))return;const c=t.context,u=c.gl,p=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),d=e.StencilMode.disabled,h=t.colorModeForRenderPass(),f=[];for(let i=0;i<a.length;i++){const o=a[i],s=r.getTile(o),c=s.getBucket(n);if(!c)continue;const u=c.programConfigurations.get(n.id),p=wr(n),d={programConfiguration:u,program:t.useProgram("circle",u,p),layoutVertexBuffer:c.layoutVertexBuffer,indexBuffer:c.indexBuffer,uniformValues:xr(t,o,s,n),tile:s};if(l){const t=c.segments.get();for(const r of t)f.push({segments:new e.SegmentVector([r]),sortKey:r.sortKey,state:d})}else f.push({segments:c.segments,sortKey:0,state:d})}l&&f.sort(((e,t)=>e.sortKey-t.sortKey));for(const r of f){const{programConfiguration:a,program:i,layoutVertexBuffer:o,indexBuffer:s,uniformValues:l,tile:f}=r.state,m=r.segments;t.terrain&&t.terrain.setupElevationDraw(f,i,{useDepthForOcclusion:!0}),t.prepareDrawProgram(c,i,f.tileID.toUnwrapped()),i.draw(c,u.TRIANGLES,p,d,h,e.CullFaceMode.disabled,l,n.id,o,s,m,n.paint,t.transform.zoom,a)}},heatmap:function(t,r,n,a){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){const i=t.context,o=i.gl,s=e.StencilMode.disabled,l=new e.ColorMode([o.ONE,o.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,r){const n=e.gl;e.activeTexture.set(n.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);let a=r.heatmapFbo;if(a)n.bindTexture(n.TEXTURE_2D,a.colorAttachment.get()),e.bindFramebuffer.set(a.framebuffer);else{const i=n.createTexture();n.bindTexture(n.TEXTURE_2D,i),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),a=r.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4,!1),function(e,t,r,n){const a=e.gl;a.texImage2D(a.TEXTURE_2D,0,a.RGBA,t.width/4,t.height/4,0,a.RGBA,e.extRenderToTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:a.UNSIGNED_BYTE,null),n.colorAttachment.set(r)}(e,t,i,a)}}(i,t,n),i.clear({color:e.Color.transparent});for(let c=0;c<a.length;c++){const u=a[c];if(r.hasRenderableParent(u))continue;const p=r.getTile(u),d=p.getBucket(n);if(!d)continue;const h=d.programConfigurations.get(n.id),f=t.useProgram("heatmap",h),{zoom:m}=t.transform;t.terrain&&t.terrain.setupElevationDraw(p,f),t.prepareDrawProgram(i,f,u.toUnwrapped()),f.draw(i,o.TRIANGLES,e.DepthMode.disabled,s,l,e.CullFaceMode.disabled,kr(u.projMatrix,p,m,n.paint.get("heatmap-intensity")),n.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,n.paint,t.transform.zoom,h)}i.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,r){const n=t.context,a=n.gl,i=r.heatmapFbo;if(!i)return;n.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,i.colorAttachment.get()),n.activeTexture.set(a.TEXTURE1);let o=r.colorRampTexture;o||(o=r.colorRampTexture=new e.Texture(n,r.colorRamp,a.RGBA)),o.bind(a.LINEAR,a.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(n,a.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,((e,t,r,n)=>({u_image:0,u_color_ramp:1,u_opacity:t.paint.get("heatmap-opacity")}))(0,r),r.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,r.paint,t.transform.zoom)}(t,n))},line:function(t,r,n,a){if("translucent"!==t.renderPass)return;const i=n.paint.get("line-opacity"),o=n.paint.get("line-width");if(0===i.constantOr(1)||0===o.constantOr(1))return;const s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),c=n.paint.get("line-dasharray"),u=c.constantOr(1),p=n.layout.get("line-cap"),d=n.paint.get("line-pattern"),h=d.constantOr(1),f=n.paint.get("line-gradient"),m=n.getCrossfadeParameters(),g=h?"linePattern":u?"lineSDF":f?"lineGradient":"line",v=t.context,y=v.gl;for(const i of a){const a=r.getTile(i);if(h&&!a.patternsLoaded())continue;const o=a.getBucket(n);if(!o)continue;t.prepareDrawTile(i);const b=o.programConfigurations.get(n.id),_=t.useProgram(g,b),x=d.constantOr(null);if(x&&a.imageAtlas){const e=a.imageAtlas,t=e.patternPositions[x.to.toString()],r=e.patternPositions[x.from.toString()];t&&r&&b.setConstantPatternPositions(t,r)}const w=c.constantOr(null),E=p.constantOr(null);if(!h&&w&&E&&a.lineAtlas){const e=a.lineAtlas,t=e.getDash(w.to,E),r=e.getDash(w.from,E);t&&r&&b.setConstantPatternPositions(t,r)}const C=t.terrain?i.projMatrix:null,k=h?Pr(t,a,n,m,C):u?Mr(t,a,n,m,C):f?Sr(t,a,n,C,o.lineClipsArray.length):Tr(t,a,n,C);if(h)v.activeTexture.set(y.TEXTURE0),a.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),b.updatePaintBuffers(m);else if(u)v.activeTexture.set(y.TEXTURE0),a.lineAtlasTexture.bind(y.LINEAR,y.REPEAT),b.updatePaintBuffers(m);else if(f){const a=o.gradients[n.id];let s=a.texture;if(n.gradientVersion!==a.version){let l=256;if(n.stepInterpolant){const n=r.getSource().maxzoom,a=i.canonical.z===n?Math.ceil(1<<t.transform.maxZoom-i.canonical.z):1;l=e.clamp(e.nextPowerOfTwo(o.maxLineLength/e.EXTENT*1024*a),256,v.maxTextureSize)}a.gradient=e.renderColorRamp({expression:n.gradientExpression(),evaluationKey:"lineProgress",resolution:l,image:a.gradient||void 0,clips:o.lineClipsArray}),a.texture?a.texture.update(a.gradient):a.texture=new e.Texture(v,a.gradient,y.RGBA),a.version=n.gradientVersion,s=a.texture}v.activeTexture.set(y.TEXTURE0),s.bind(n.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE)}t.prepareDrawProgram(v,_,i.toUnwrapped()),_.draw(v,y.TRIANGLES,s,t.stencilModeForClipping(i),l,e.CullFaceMode.disabled,k,n.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,n.paint,t.transform.zoom,b,o.layoutVertexBuffer2)}},fill:function(t,r,n,a){const i=n.paint.get("fill-color"),o=n.paint.get("fill-opacity");if(0===o.constantOr(1))return;const s=t.colorModeForRenderPass(),l=n.paint.get("fill-pattern"),c=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===i.constantOr(e.Color.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(t.renderPass===c){const i=t.depthModeForSublayer(1,"opaque"===t.renderPass?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly);Xr(t,r,n,a,i,s,!1)}if("translucent"===t.renderPass&&n.paint.get("fill-antialias")){const i=t.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,e.DepthMode.ReadOnly);Xr(t,r,n,a,i,s,!0)}},"fill-extrusion":function(t,r,n,a){const i=n.paint.get("fill-extrusion-opacity");if(0!==i&&"translucent"===t.renderPass){const o=new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);if(1!==i||n.paint.get("fill-extrusion-pattern").constantOr(1))Zr(t,r,n,a,o,e.StencilMode.disabled,e.ColorMode.disabled),Zr(t,r,n,a,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{const i=t.colorModeForRenderPass();Zr(t,r,n,a,o,e.StencilMode.disabled,i)}}},hillshade:function(t,r,n,a){if("offscreen"!==t.renderPass&&"translucent"!==t.renderPass)return;const i=t.context,o=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),s=t.colorModeForRenderPass(),l=t.terrain&&t.terrain.renderingToTexture,[c,u]="translucent"!==t.renderPass||l?[{},a]:t.stencilConfigForOverlap(a);for(const a of u){const i=r.getTile(a);if(i.needsHillshadePrepare&&"offscreen"===t.renderPass)tr(t,i,n,o,e.StencilMode.disabled,s);else if("translucent"===t.renderPass){const e=l&&t.terrain?t.terrain.stencilModeForRTTOverlap(a):c[a.overscaledZ];Jt(t,a,i,n,o,e,s)}}i.viewport.set([0,0,t.width,t.height])},raster:function(t,r,n,a,i,o){if("translucent"!==t.renderPass)return;if(0===n.paint.get("raster-opacity"))return;if(!a.length)return;const s=t.context,l=s.gl,c=r.getSource(),u=t.useProgram("raster"),p=t.colorModeForRenderPass(),d=t.terrain&&t.terrain.renderingToTexture,[h,f]=c instanceof Ce||d?[{},a]:t.stencilConfigForOverlap(a),m=f[f.length-1].overscaledZ,g=!t.options.moving;for(const a of f){const i=d?e.DepthMode.disabled:t.depthModeForSublayer(a.overscaledZ-m,1===n.paint.get("raster-opacity")?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly,l.LESS),f=a.toUnwrapped(),v=r.getTile(a);if(d&&(!v||!v.hasData()))continue;const y=d?a.projMatrix:t.transform.calculateProjMatrix(f,g),b=t.terrain&&d?t.terrain.stencilModeForRTTOverlap(a):h[a.overscaledZ],_=o?0:n.paint.get("raster-fade-duration");v.registerFadeDuration(_);const x=r.findLoadedParent(a,0),w=lr(v,x,r,t.transform,_);let E,C;t.terrain&&t.terrain.prepareDrawTile(a);const k="nearest"===n.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;s.activeTexture.set(l.TEXTURE0),v.texture.bind(k,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),s.activeTexture.set(l.TEXTURE1),x?(x.texture.bind(k,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),E=Math.pow(2,x.tileID.overscaledZ-v.tileID.overscaledZ),C=[v.tileID.canonical.x*E%1,v.tileID.canonical.y*E%1]):v.texture.bind(k,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST);const T=Or(y,C||[0,0],E||1,w,n);t.prepareDrawProgram(s,u,f),c instanceof Ce?u.draw(s,l.TRIANGLES,i,e.StencilMode.disabled,p,e.CullFaceMode.disabled,T,n.id,c.boundsBuffer,t.quadTriangleIndexBuffer,c.boundsSegments):u.draw(s,l.TRIANGLES,i,b,p,e.CullFaceMode.disabled,T,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,r,n,a){const i=n.paint.get("background-color"),o=n.paint.get("background-opacity");if(0===o)return;const s=t.context,l=s.gl,c=t.transform,u=c.tileSize,p=n.paint.get("background-pattern");if(t.isPatternMissing(p))return;const d=!p&&1===i.a&&1===o&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass!==d)return;const h=e.StencilMode.disabled,f=t.depthModeForSublayer(0,"opaque"===d?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly),m=t.colorModeForRenderPass(),g=t.useProgram(p?"backgroundPattern":"background"),v=a||c.coveringTiles({tileSize:u});p&&(s.activeTexture.set(l.TEXTURE0),t.imageManager.bind(t.context));const y=n.getCrossfadeParameters();for(const r of v){const c=r.toUnwrapped(),d=a?r.projMatrix:t.transform.calculateProjMatrix(c);t.prepareDrawTile(r);const v=p?$r(d,o,t,p,{tileID:r,tileSize:u},y):Br(d,o,i);t.prepareDrawProgram(s,g,c),g.draw(s,l.TRIANGLES,f,h,m,e.CullFaceMode.disabled,v,n.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}},sky:function(t,r,n){const a=n.paint.get("sky-opacity");if(0===a)return;const i=t.context,o=n.paint.get("sky-type"),s=new e.DepthMode(i.gl.LEQUAL,e.DepthMode.ReadOnly,[0,1]),l=t.frameCounter/1e3%1;"atmosphere"===o?"offscreen"===t.renderPass?n.needsSkyboxCapture(t)&&(function(t,r,n,a){const i=t.context,o=i.gl;let s=r.skyboxFbo;if(!s){s=r.skyboxFbo=i.createFramebuffer(32,32,!1),r.skyboxGeometry=new un(i),r.skyboxTexture=i.gl.createTexture(),o.bindTexture(o.TEXTURE_CUBE_MAP,r.skyboxTexture),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MAG_FILTER,o.LINEAR);for(let e=0;e<6;++e)o.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,o.RGBA,32,32,0,o.RGBA,o.UNSIGNED_BYTE,null)}i.bindFramebuffer.set(s.framebuffer),i.viewport.set([0,0,32,32]);const l=r.getCenter(t,!0),c=t.useProgram("skyboxCapture"),u=new Float64Array(16);e.identity(u),e.rotateY(u,u,.5*-Math.PI),pn(i,r,c,u,l,0),e.identity(u),e.rotateY(u,u,.5*Math.PI),pn(i,r,c,u,l,1),e.identity(u),e.rotateX(u,u,.5*-Math.PI),pn(i,r,c,u,l,2),e.identity(u),e.rotateX(u,u,.5*Math.PI),pn(i,r,c,u,l,3),e.identity(u),pn(i,r,c,u,l,4),e.identity(u),e.rotateY(u,u,Math.PI),pn(i,r,c,u,l,5),i.viewport.set([0,0,t.width,t.height])}(t,n),n.markSkyboxValid(t)):"sky"===t.renderPass&&function(t,r,n,a,i){const o=t.context,s=o.gl,l=t.transform,c=t.useProgram("skybox");o.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,r.skyboxTexture);const u=((e,t,r,n,a)=>({u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:n,u_temporal_offset:a}))(l.skyboxMatrix,r.getCenter(t,!1),0,a,i);t.prepareDrawProgram(o,c),c.draw(o,s.TRIANGLES,n,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,u,"skybox",r.skyboxGeometry.vertexBuffer,r.skyboxGeometry.indexBuffer,r.skyboxGeometry.segment)}(t,n,s,a,l):"gradient"===o&&"sky"===t.renderPass&&function(t,r,n,a,i){const o=t.context,s=o.gl,l=t.transform,c=t.useProgram("skyboxGradient");r.skyboxGeometry||(r.skyboxGeometry=new un(o)),o.activeTexture.set(s.TEXTURE0);let u=r.colorRampTexture;u||(u=r.colorRampTexture=new e.Texture(o,r.colorRamp,s.RGBA)),u.bind(s.LINEAR,s.CLAMP_TO_EDGE);const p=((t,r,n,a,i)=>({u_matrix:t,u_color_ramp:0,u_center_direction:r,u_radius:e.degToRad(n),u_opacity:a,u_temporal_offset:i}))(l.skyboxMatrix,r.getCenter(t,!1),r.paint.get("sky-gradient-radius"),a,i);t.prepareDrawProgram(o,c),c.draw(o,s.TRIANGLES,n,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,p,"skyboxGradient",r.skyboxGeometry.vertexBuffer,r.skyboxGeometry.indexBuffer,r.skyboxGeometry.segment)}(t,n,s,a,l)},debug:function(e,t,r){for(let n=0;n<r.length;n++)on(e,t,r[n])},custom:function(t,r,n){const a=t.context,i=n.implementation;if("offscreen"===t.renderPass){const e=i.prerender;e&&(t.setCustomLayerDefaults(),a.setColorMode(t.colorModeForRenderPass()),e.call(i,a.gl,t.transform.customLayerMatrix()),a.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),a.setColorMode(t.colorModeForRenderPass()),a.setStencilMode(e.StencilMode.disabled);const r="3d"===i.renderingMode?new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,e.DepthMode.ReadOnly);a.setDepthMode(r),i.render(a.gl,t.transform.customLayerMatrix()),a.setDirty(),t.setBaseState(),a.bindFramebuffer.set(null)}}};class hn{constructor(t,r){this.context=new _e(t),this.transform=r,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=e.SourceCache.maxUnderzooming+e.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Dt,this.gpuTimers={},this.frameCounter=0}updateTerrain(e,t){const r=!!e&&!!e.terrain;if(!(r||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new pr(this,e));const n=this._terrain;this.transform.elevation=r?n:null,n.update(e,this.transform,t)}_updateFog(e){const t=e.fog;if(!t||t.getOpacity(this.transform.pitch)<1||t.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[r,n]=t.getFovAdjustedRange(this.transform._fov);if(r>n)return void(this.transform.fogCullDistSq=null);const a=r+.78*(n-r);this.transform.fogCullDistSq=a*a}get terrain(){return this._terrain&&this._terrain.enabled?this._terrain:null}resize(t,r){if(this.width=t*e.exported.devicePixelRatio,this.height=r*e.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const e of this.style.order)this.style._layers[e].resize()}setup(){const t=this.context,r=new e.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(e.EXTENT,0),r.emplaceBack(0,e.EXTENT),r.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(r,e.posAttributes.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);const n=new e.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(n,e.posAttributes.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);const a=new e.StructArrayLayout4i8;a.emplaceBack(0,0,0,0),a.emplaceBack(e.EXTENT,0,e.EXTENT,0),a.emplaceBack(0,e.EXTENT,0,e.EXTENT),a.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=t.createVertexBuffer(a,Ee.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);const i=new e.StructArrayLayout2i4;i.emplaceBack(-1,-1),i.emplaceBack(1,-1),i.emplaceBack(-1,1),i.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(i,e.posAttributes.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);const o=new e.StructArrayLayout1ui2;o.emplaceBack(0),o.emplaceBack(1),o.emplaceBack(3),o.emplaceBack(2),o.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(o);const s=new e.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new e.Texture(t,{width:1,height:1,data:new Uint8Array([0,0,0,0])},t.gl.RGBA),this.identityMat=e.create$1();const l=this.context.gl;this.stencilClearMode=new e.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(e.window.performance.now())}clearStencil(){const t=this.context,r=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this.useProgram("clippingMask").draw(t,r.TRIANGLES,e.DepthMode.disabled,this.stencilClearMode,e.ColorMode.disabled,e.CullFaceMode.disabled,sr(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,r,n){if(!(r&&this.currentStencilSource!==r.id&&t.isTileClipped()&&n&&n.length))return;this.currentStencilSource=r.id;const a=this.context,i=a.gl;this.nextStencilID+n.length>256&&this.clearStencil(),a.setColorMode(e.ColorMode.disabled),a.setDepthMode(e.DepthMode.disabled);const o=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const t of n){const r=this._tileClippingMaskIDs[t.key]=this.nextStencilID++;o.draw(a,i.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:i.ALWAYS,mask:0},r,255,i.KEEP,i.KEEP,i.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,sr(t.projMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,r=this.context.gl;return new e.StencilMode({func:r.NOTEQUAL,mask:255},t,255,r.KEEP,r.KEEP,r.REPLACE)}stencilModeForClipping(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);const r=this.context.gl;return new e.StencilMode({func:r.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,r.KEEP,r.KEEP,r.REPLACE)}stencilConfigForOverlap(t){const r=this.context.gl,n=t.sort(((e,t)=>t.overscaledZ-e.overscaledZ)),a=n[n.length-1].overscaledZ,i=n[0].overscaledZ-a+1;if(i>1){this.currentStencilSource=void 0,this.nextStencilID+i>256&&this.clearStencil();const t={};for(let n=0;n<i;n++)t[n+a]=new e.StencilMode({func:r.GEQUAL,mask:255},n+this.nextStencilID,255,r.KEEP,r.KEEP,r.REPLACE);return this.nextStencilID+=i,[t,n]}return[{[a]:e.StencilMode.disabled},n]}colorModeForRenderPass(){const t=this.context.gl;if(this._showOverdrawInspector){const r=1/8;return new e.ColorMode([t.CONSTANT_COLOR,t.ONE],new e.Color(r,r,r,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?e.ColorMode.unblended:e.ColorMode.alphaBlended}depthModeForSublayer(t,r,n){if(!this.opaquePassEnabledForLayer())return e.DepthMode.disabled;const a=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new e.DepthMode(n||this.context.gl.LEQUAL,r,[a,a])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,r){this.style=t,this.options=r,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.exported.now()),this.imageManager.beginFrame();const n=this.style.order,a=this.style._sourceCaches;for(const e in a){const t=a[e];t.used&&t.prepare(this.context)}const i={},o={},s={};for(const e in a){const t=a[e];i[e]=t.getVisibleCoordinates(),o[e]=i[e].slice().reverse(),s[e]=t.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let e=0;e<n.length;e++)if(this.style._layers[n[e]].is3D()){this.opaquePassCutoff=e;break}if(this.terrain&&(this.terrain.updateTileBinding(s),this.opaquePassCutoff=0),!e.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const e of n){const r=this.style._layers[e],n=t._getLayerSourceCache(r);if(!r.hasOffscreenPass()||r.isHidden(this.transform.zoom))continue;const a=n?o[n.id]:void 0;("custom"===r.type||r.isSky()||a&&a.length)&&this.renderLayer(this,n,r,a)}this.depthRangeFor3D=[0,1-(t.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);let l=e.Color.transparent;if(this.style.fog&&(l=this.style.fog.properties.get("color")),this.context.clear({color:r.showOverdrawInspector?e.Color.black:l,depth:1}),this.clearStencil(),this._showOverdrawInspector=r.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=n.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[n[this.currentLayer]],r=t._getLayerSourceCache(e);if(e.isSky())continue;const a=r?o[r.id]:void 0;this._renderTileClippingMasks(e,r,a),this.renderLayer(this,r,e,a)}if(this.renderPass="sky",this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<n.length;this.currentLayer++){const e=this.style._layers[n[this.currentLayer]],r=t._getLayerSourceCache(e);e.isSky()&&this.renderLayer(this,r,e,r?o[r.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<n.length;){const e=this.style._layers[n[this.currentLayer]],r=t._getLayerSourceCache(e);if(e.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(e)){if(e.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const a=r?("symbol"===e.type?s:o)[r.id]:void 0;this._renderTileClippingMasks(e,r,r?i[r.id]:void 0),this.renderLayer(this,r,e,a),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let r=null;e.values(this.style._layers).forEach((e=>{const n=t._getLayerSourceCache(e);n&&!e.isHidden(this.transform.zoom)&&(!r||r.getSource().maxzoom<n.getSource().maxzoom)&&(r=n)})),r&&this.options.showTileBoundaries&&dn.debug(this,r,r.getVisibleCoordinates())}this.options.showPadding&&function(e){const t=e.transform.padding;rn(e,e.transform.height-(t.top||0),3,Kr),rn(e,t.bottom||0,3,Qr),nn(e,t.left||0,3,Jr),nn(e,e.transform.width-(t.right||0),3,en);const r=e.transform.centerPoint;!function(e,t,r,n){an(e,t-1,r-10,2,20,n),an(e,t-10,r-1,20,2,n)}(e,r.x,e.transform.height-r.y,tn)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%e.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(e.window.performance.now()),this.saveCanvasCopy())}renderLayer(e,t,r,n){r.isHidden(this.transform.zoom)||("background"===r.type||"sky"===r.type||"custom"===r.type||n&&n.length)&&(this.id=r.id,this.gpuTimingStart(r),dn[r.type](e,t,r,n,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(e){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;let r=this.gpuTimers[e.id];r||(r=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),r.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,r.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}collectGpuTimers(){const e=this.gpuTimers;return this.gpuTimers={},e}queryGpuTimers(e){const t={};for(const r in e){const n=e[r],a=this.context.extTimerQuery,i=a.getQueryObjectEXT(n.query,a.QUERY_RESULT_EXT)/1e6;a.deleteQueryEXT(n.query),t[r]=i}return t}translatePosMatrix(t,r,n,a,i){if(!n[0]&&!n[1])return t;const o=i?"map"===a?this.transform.angle:0:"viewport"===a?-this.transform.angle:0;if(o){const e=Math.sin(o),t=Math.cos(o);n=[n[0]*t-n[1]*e,n[0]*e+n[1]*t]}const s=[i?n[0]:M(r,n[0],this.transform.zoom),i?n[1]:M(r,n[1],this.transform.zoom),0],l=new Float32Array(16);return e.translate(l,t,s),l}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const t=this.imageManager.getPattern(e.from.toString()),r=this.imageManager.getPattern(e.to.toString());return!t||!r}currentGlobalDefines(){const e=this.terrain&&this.terrain.renderingToTexture,t=this.style&&this.style.fog,r=[];return this.terrain&&!this.terrain.renderingToTexture&&r.push("TERRAIN"),t&&!e&&0!==t.getOpacity(this.transform.pitch)&&r.push("FOG"),e&&r.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&r.push("OVERDRAW_INSPECTOR"),r}useProgram(e,t,r){this.cache=this.cache||{};const n=r||[],a=this.currentGlobalDefines().concat(n),i=hr.cacheKey(e,a,t);return this.cache[i]||(this.cache[i]=new hr(this.context,e,Zt[e],t,Fr[e],a)),this.cache[i]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}prepareDrawTile(e){this.terrain&&this.terrain.prepareDrawTile(e)}prepareDrawProgram(e,t,r){if(this.terrain&&this.terrain.renderingToTexture)return;const n=this.style.fog;if(n){const a=n.getOpacity(this.transform.pitch);0!==a&&t.setFogUniformValues(e,((e,t,r,n)=>{const a=t.properties.get("color"),i=e.frameCounter/1e3%1,o=[a.r/a.a,a.g/a.a,a.b/a.a,n];return{u_fog_matrix:r?e.transform.calculateFogTileMatrix(r):e.identityMat,u_fog_range:t.getFovAdjustedRange(e.transform._fov),u_fog_color:o,u_fog_horizon_blend:t.properties.get("horizon-blend"),u_fog_temporal_offset:i}})(this,n,r,a))}}setTileLoadedFlag(e){this.tileLoaded=e}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const e=this.style&&this.style.fog;return!!e&&0!==e.getOpacity(this.transform.pitch)}}class fn{constructor(e=0,t=0,r=0,n=0){if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(r)||r<0||isNaN(n)||n<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=r,this.right=n}interpolate(t,r,n){return null!=r.top&&null!=t.top&&(this.top=e.number(t.top,r.top,n)),null!=r.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,r.bottom,n)),null!=r.left&&null!=t.left&&(this.left=e.number(t.left,r.left,n)),null!=r.right&&null!=t.right&&(this.right=e.number(t.right,r.right,n)),this}getCenter(t,r){const n=e.clamp((this.left+t-this.right)/2,0,t),a=e.clamp((this.top+r-this.bottom)/2,0,r);return new e.pointGeometry(n,a)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new fn(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function mn(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]}function gn(e,t,r){e[4*t+0]=r[0],e[4*t+1]=r[1],e[4*t+2]=r[2],e[4*t+3]=r[3]}function vn(t,r){const n=mn(t,3);e.fromQuat(t,r),gn(t,3,n)}function yn(e,t){gn(e,3,[t[0],t[1],t[2],1])}function bn(t,r){const n=e.identity$1([]);return e.rotateZ$1(n,n,-r),e.rotateX$1(n,n,-t),n}function _n(t,r){const n=[t[0],t[1],0],a=[r[0],r[1],0];if(e.length(n)>=1e-15){const t=e.normalize([],n);e.scale(a,t,e.dot(a,t)),r[0]=a[0],r[1]=a[1]}const i=e.cross([],r,t);if(e.len(i)<1e-15)return null;const o=Math.atan2(-i[1],i[0]);return bn(Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2]),o)}class xn{constructor(e,t){this.position=e,this.orientation=t}get position(){return this._position}set position(t){this._position=this._renderWorldCopies?function(t){if(!t)return;const r=Array.isArray(t)?new e.MercatorCoordinate(t[0],t[1],t[2]):t;return r.x=e.wrap(r.x,0,1),r}(t):t}lookAtPoint(t,r){if(this.orientation=null,!this.position)return;const n=this._elevation?this._elevation.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(t)):0,a=this.position,i=e.MercatorCoordinate.fromLngLat(t,n),o=[i.x-a.x,i.y-a.y,i.z-a.z];r||(r=[0,0,1]),r[2]=Math.abs(r[2]),this.orientation=_n(o,r)}setPitchBearing(t,r){this.orientation=bn(e.degToRad(t),e.degToRad(-r))}}class wn{constructor(t,r){this._transform=e.identity([]),this._orientation=e.identity$1([]),r&&(this._orientation=r,vn(this._transform,this._orientation)),t&&yn(this._transform,t)}get mercatorPosition(){const t=this.position;return new e.MercatorCoordinate(t[0],t[1],t[2])}get position(){const e=mn(this._transform,3);return[e[0],e[1],e[2]]}set position(e){yn(this._transform,e)}get orientation(){return this._orientation}set orientation(e){this._orientation=e,vn(this._transform,this._orientation)}getPitchBearing(){const e=this.forward(),t=this.right();return{bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}setPitchBearing(e,t){this._orientation=bn(e,t),vn(this._transform,this._orientation)}forward(){const e=mn(this._transform,2);return[-e[0],-e[1],-e[2]]}up(){const e=mn(this._transform,1);return[-e[0],-e[1],-e[2]]}right(){const e=mn(this._transform,0);return[e[0],e[1],e[2]]}getCameraToWorld(t,r){const n=new Float64Array(16);return e.invert(n,this.getWorldToCamera(t,r)),n}getWorldToCameraPosition(t,r,n){const a=this.position;e.scale(a,a,-t);const i=new Float64Array(16);return e.fromScaling(i,[n,n,n]),e.translate(i,i,a),i[10]*=r,i}getWorldToCamera(t,r){const n=new Float64Array(16),a=new Float64Array(4),i=this.position;return e.conjugate(a,this._orientation),e.scale(i,i,-t),e.fromQuat(n,a),e.translate(n,n,i),n[1]*=-1,n[5]*=-1,n[9]*=-1,n[13]*=-1,n[8]*=r,n[9]*=r,n[10]*=r,n[11]*=r,n}getCameraToClipPerspective(t,r,n,a){const i=new Float64Array(16);return e.perspective(i,t,r,n,a),i}getDistanceToElevation(t){const r=0===t?0:e.mercatorZfromAltitude(t,this.position[1]),n=this.forward();return(r-this.position[2])/n[2]}clone(){return new wn([...this.position],[...this.orientation])}}class En{constructor(t,r,n,a,i){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===i||i,this._minZoom=t||0,this._maxZoom=r||22,this._minPitch=null==n?0:n,this._maxPitch=null==a?60:a,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new fn,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._camera=new wn,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._horizonShift=.1}clone(){const e=new En(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._cameraZoom=this._cameraZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._averageElevation=this._averageElevation,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e}get elevation(){return this._elevation}set elevation(e){this._elevation!==e&&(this._elevation=e,e?this._updateCenterElevation()&&this._updateCameraOnTerrain():(this._cameraZoom=null,this._centerAltitude=0),this._calcMatrices())}updateElevation(e){this._terrainEnabled()&&null==this._cameraZoom&&this._updateCenterElevation()&&this._updateCameraOnTerrain(),e&&this._constrainCameraAltitude(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get pixelsPerMeter(){return e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize}get cameraPixelsPerMeter(){return e.mercatorZfromAltitude(1,this.center.lat)*this.cameraWorldSize}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new e.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(t){const r=-e.wrap(t,-180,180)*Math.PI/180;var n;this.angle!==r&&(this._unmodified=!1,this.angle=r,this._calcMatrices(),this.rotationMatrix=(n=new e.ARRAY_TYPE(4),e.ARRAY_TYPE!=Float32Array&&(n[1]=0,n[2]=0),n[0]=1,n[3]=1,n),function(e,t,r){var n=t[0],a=t[1],i=t[2],o=t[3],s=Math.sin(r),l=Math.cos(r);e[0]=n*l+i*s,e[1]=a*l+o*s,e[2]=n*-s+i*l,e[3]=a*-s+o*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const r=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==r&&(this._unmodified=!1,this._pitch=r,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(e){this._averageElevation=e,this._calcFogMatrices()}get zoom(){return this._zoom}set zoom(e){const t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._constrain(),this._calcMatrices())}_setZoom(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}_updateCenterElevation(){if(!this._elevation)return!1;const t=this._elevation.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(this.center),-1);return-1===t?(this._cameraZoom=null,!1):(this._centerAltitude=t,!0)}_updateCameraOnTerrain(){const t=this.cameraToCenterDistance/this.worldSize,r=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat);this._cameraZoom=this._zoomFromMercatorZ(r+t)}sampleAverageElevation(){if(!this._elevation)return 0;const t=this._elevation,r=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],n=this.horizonLineFromTop();let a=0,i=0;for(let o=0;o<r.length;o++){const s=new e.pointGeometry(r[o][0]*this.width,n+r[o][1]*(this.height-n)),l=t.pointCoordinate(s);if(!l)continue;const c=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);a+=l[3]*c,i+=c}return 0===i?NaN:a/i}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCenterElevation()?this._updateCameraOnTerrain():this._cameraZoom=null:this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._cameraZoom||!this._elevation)return;const t=this._cameraZoom,r=this._elevation.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(this.center)),n=e.mercatorZfromAltitude(r,this.center.lat),a=this._mercatorZfromZoom(t),i=this._mercatorZfromZoom(this._maxZoom),o=Math.max(a-n,i);this._setZoom(this._zoomFromMercatorZ(o))}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}computeZoomRelativeTo(t){const r=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));let n;n=t.z<this._camera.position[2]?[r.x,r.y,r.z]:[t.x,t.y,t.z];const a=e.length(e.sub([],this._camera.position,n));return e.clamp(this._zoomFromMercatorZ(a),this._minZoom,this._maxZoom)}setFreeCameraOptions(t){if(!this.height)return;if(!t.position&&!t.orientation)return;this._updateCameraState();let r=!1;if(t.orientation&&!e.exactEquals(t.orientation,this._camera.orientation)&&(r=this._setCameraOrientation(t.orientation)),t.position){const n=[t.position.x,t.position.y,t.position.z];e.exactEquals$1(n,this._camera.position)||(this._setCameraPosition(n),r=!0)}r&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const t=this._camera.position,r=new xn;return r.position=new e.MercatorCoordinate(t[0],t[1],t[2]),r.orientation=this._camera.orientation,r._elevation=this.elevation,r._renderWorldCopies=this._renderWorldCopies,r}_setCameraOrientation(t){if(!e.length$1(t))return!1;e.normalize$1(t,t);const r=e.transformQuat([],[0,0,-1],t),n=e.transformQuat([],[0,-1,0],t);if(n[2]<0)return!1;const a=_n(r,n);return!!a&&(this._camera.orientation=a,!0)}_setCameraPosition(t){const r=this.zoomScale(this.minZoom)*this.tileSize,n=this.zoomScale(this.maxZoom)*this.tileSize,a=this.cameraToCenterDistance;t[2]=e.clamp(t[2],a/n,a/r),this._camera.position=t}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,r){this._unmodified=!1,this._edgeInsets.interpolate(e,t,r),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}getVisibleUnwrappedCoordinates(t){const r=[new e.UnwrappedTileID(0,t)];if(this._renderWorldCopies){const n=this.pointCoordinate(new e.pointGeometry(0,0)),a=this.pointCoordinate(new e.pointGeometry(this.width,0)),i=this.pointCoordinate(new e.pointGeometry(this.width,this.height)),o=this.pointCoordinate(new e.pointGeometry(0,this.height)),s=Math.floor(Math.min(n.x,a.x,i.x,o.x)),l=Math.floor(Math.max(n.x,a.x,i.x,o.x)),c=1;for(let n=s-c;n<=l+c;n++)0!==n&&r.push(new e.UnwrappedTileID(n,t))}return r}coveringTiles(t){let r=this.coveringZoomLevel(t);const n=r,a=this.elevation&&!t.isTerrainDEM;if(void 0!==t.minzoom&&r<t.minzoom)return[];void 0!==t.maxzoom&&r>t.maxzoom&&(r=t.maxzoom);const i=e.MercatorCoordinate.fromLngLat(this.center),o=1<<r,s=[o*i.x,o*i.y,0],l=h.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,r),c=this.pointCoordinate(this.getCameraPoint()),u=o*e.mercatorZfromAltitude(1,this.center.lat),p=this._camera.position[2]/e.mercatorZfromAltitude(1,this.center.lat),d=[o*c.x,o*c.y,p],m=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),g=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation?r:0,v=t.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,y=t.isTerrainDEM?-v:this._elevation?this._elevation.getMinElevationBelowMSL():0,b=e=>({aabb:new f([e*o,0,y],[(e+1)*o,o,v]),zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}),_=[],x=[],w=r,E=t.reparseOverscaled?n:r,C=e=>{if(!this._elevation||!e.tileID)return;const t=this._elevation.getMinMaxForTile(e.tileID),r=e.aabb;t?(r.min[2]=t.min,r.max[2]=t.max,r.center[2]=(r.min[2]+r.max[2])/2):(e.shouldSplit=S(e),e.shouldSplit||(r.min[2]=r.max[2]=r.center[2]=this._centerAltitude))},k=e=>e*e,T=k((p-this._centerAltitude)*u),S=e=>{if(e.zoom<g)return!0;if(e.zoom===w)return!1;if(null!=e.shouldSplit)return e.shouldSplit;const t=e.aabb.distanceX(d),r=e.aabb.distanceY(d);let n=T;a&&(n=k(e.aabb.distanceZ(d)*u));const i=t*t+r*r+n;return i<k((1<<w-e.zoom)*m*((e,t)=>{if(t*k(.707)<e)return 1;const r=Math.sqrt(t/e);return r/(1.4144271570014144+(Math.pow(1.1,r-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(n,T),i))};if(this._renderWorldCopies)for(let e=1;e<=3;e++)_.push(b(-e)),_.push(b(e));for(_.push(b(0));_.length>0;){const n=_.pop(),i=n.x,o=n.y;let c=n.fullyVisible;if(!c){const e=n.aabb.intersects(l);if(0===e)continue;c=2===e}if(n.zoom!==w&&S(n))for(let t=0;t<4;t++){const r=(i<<1)+t%2,s=(o<<1)+(t>>1),l={aabb:n.aabb.quadrant(t),zoom:n.zoom+1,x:r,y:s,wrap:n.wrap,fullyVisible:c,tileID:void 0,shouldSplit:void 0};a&&(l.tileID=new e.OverscaledTileID(n.zoom+1===w?E:n.zoom+1,n.wrap,n.zoom+1,r,s),C(l)),_.push(l)}else{const a=n.zoom===w?E:n.zoom;if(t.minzoom&&t.minzoom>a)continue;const l=s[0]-(.5+i+(n.wrap<<n.zoom))*(1<<r-n.zoom),c=s[1]-.5-o,u=n.tileID?n.tileID:new e.OverscaledTileID(a,n.wrap,n.zoom,i,o);x.push({tileID:u,distanceSq:l*l+c*c})}}if(this.fogCullDistSq){const t=this.fogCullDistSq;x.splice(0,x.length,...x.filter((r=>{const n=[0,0,0,1],i=[e.EXTENT,e.EXTENT,0,1],o=this.calculateFogTileMatrix(r.tileID.toUnwrapped());e.transformMat4(n,n,o),e.transformMat4(i,i,o);const s=e.getAABBPointSquareDist(n,i);if(0===s)return!0;let l=!1;const c=this.horizonLineFromTop();if(s>t&&0!==c){const t=this.calculateProjMatrix(r.tileID.toUnwrapped());let n;a&&this._elevation&&(n=this._elevation.getMinMaxForTile(r.tileID)),n||(n={min:y,max:v});const i=e.furthestTileCorner(this.bearing),o=[i[0]*e.EXTENT,i[1]*e.EXTENT,n.max];e.transformMat4$1(o,o,t),l=(1-o[1])*this.height*.5<c}return s<t||l})))}return x.sort(((e,t)=>e.distanceSq-t.distanceSq)).map((e=>e.tileID))}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(t){const r=e.clamp(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.pointGeometry(e.mercatorXfromLng(t.lng)*this.worldSize,e.mercatorYfromLat(r)*this.worldSize)}unproject(t){return new e.MercatorCoordinate(t.x/this.worldSize,t.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(t,r){const n=this.pointCoordinate(r),a=this.pointCoordinate(this.centerPoint),i=this.locationCoordinate(t),o=new e.MercatorCoordinate(i.x-(n.x-a.x),i.y-(n.y-a.y));this.center=this.coordinateLocation(o),this._renderWorldCopies&&(this.center=this.center.wrap())}setLocation(e){this.center=this.coordinateLocation(e),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(e){return this._coordinatePoint(this.locationCoordinate(e),!1)}locationPoint3D(e){return this._coordinatePoint(this.locationCoordinate(e),!0)}pointLocation(e){return this.coordinateLocation(this.pointCoordinate(e))}pointLocation3D(e){return this.coordinateLocation(this.pointCoordinate3D(e))}locationCoordinate(t){return e.MercatorCoordinate.fromLngLat(t)}coordinateLocation(e){return e.toLngLat()}pointRayIntersection(t,r){const n=null!=r?r:this._centerAltitude,a=[t.x,t.y,0,1],i=[t.x,t.y,1,1];e.transformMat4(a,a,this.pixelMatrixInverse),e.transformMat4(i,i,this.pixelMatrixInverse);const o=i[3];e.scale$2(a,a,1/a[3]),e.scale$2(i,i,1/o);const s=a[2],l=i[2];return{p0:a,p1:i,t:s===l?0:(n-s)/(l-s)}}screenPointToMercatorRay(t){const r=[t.x,t.y,0,1],n=[t.x,t.y,1,1];return e.transformMat4(r,r,this.pixelMatrixInverse),e.transformMat4(n,n,this.pixelMatrixInverse),e.scale$2(r,r,1/r[3]),e.scale$2(n,n,1/n[3]),r[2]=e.mercatorZfromAltitude(r[2],this._center.lat)*this.worldSize,n[2]=e.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,e.scale$2(r,r,1/this.worldSize),e.scale$2(n,n,1/this.worldSize),new d([r[0],r[1],r[2]],e.normalize([],e.sub([],n,r)))}rayIntersectionCoordinate(t){const{p0:r,p1:n,t:a}=t,i=e.mercatorZfromAltitude(r[2],this._center.lat),o=e.mercatorZfromAltitude(n[2],this._center.lat);return new e.MercatorCoordinate(e.number(r[0],n[0],a)/this.worldSize,e.number(r[1],n[1],a)/this.worldSize,e.number(i,o,a))}pointCoordinate(t){const r=this.horizonLineFromTop(!1),n=new e.pointGeometry(t.x,Math.max(r,t.y));return this.rayIntersectionCoordinate(this.pointRayIntersection(n))}pointCoordinate3D(t){if(!this.elevation)return this.pointCoordinate(t);const r=this.elevation;let n=this.elevation.pointCoordinate(t);if(n)return new e.MercatorCoordinate(n[0],n[1],n[2]);let a=0,i=this.horizonLineFromTop();if(t.y>i)return this.pointCoordinate(t);const o=.02*i,s=t.clone();for(let t=0;t<10&&i-a>o;t++){s.y=e.number(a,i,.66);const t=r.pointCoordinate(s);t?(i=s.y,n=t):a=s.y}return n?new e.MercatorCoordinate(n[0],n[1],n[2]):this.pointCoordinate(t)}isPointAboveHorizon(e){if(this.elevation)return!this.elevation.pointCoordinate(e);{const t=this.horizonLineFromTop();return e.y<t}}_coordinatePoint(t,r){const n=r&&this.elevation?this.elevation.getAtPointOrZero(t,this._centerAltitude):this._centerAltitude,a=[t.x*this.worldSize,t.y*this.worldSize,n+t.toAltitude(),1];return e.transformMat4(a,a,this.pixelMatrix),a[3]>0?new e.pointGeometry(a[0]/a[3],a[1]/a[3]):new e.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}getBounds(){return this._terrainEnabled()?this._getBounds3D():(new e.LngLatBounds).extend(this.pointLocation(new e.pointGeometry(this._edgeInsets.left,this._edgeInsets.top))).extend(this.pointLocation(new e.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top))).extend(this.pointLocation(new e.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom))).extend(this.pointLocation(new e.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom)))}_getBounds3D(){const t=this.elevation,r=t.visibleDemTiles.reduce(((e,t)=>{if(t.dem){const r=t.dem.tree;e.min=Math.min(e.min,r.minimums[0]),e.max=Math.max(e.max,r.maximums[0])}return e}),{min:Number.MAX_VALUE,max:0});r.min*=t.exaggeration(),r.max*=t.exaggeration();const n=this.horizonLineFromTop();return[new e.pointGeometry(0,n),new e.pointGeometry(this.width,n),new e.pointGeometry(this.width,this.height),new e.pointGeometry(0,this.height)].reduce(((e,t)=>e.extend(this.coordinateLocation(this.rayIntersectionCoordinate(this.pointRayIntersection(t,r.min)))).extend(this.coordinateLocation(this.rayIntersectionCoordinate(this.pointRayIntersection(t,r.max))))),new e.LngLatBounds)}horizonLineFromTop(e=!0){const t=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,r=this.height/2-.97*t;return e?Math.max(0,r):r}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(t,r){const n=t.canonical,a=r/this.zoomScale(n.z),i=n.x+Math.pow(2,n.z)*t.wrap,o=e.identity(new Float64Array(16));return e.translate(o,o,[i*a,n.y*a,0]),e.scale$1(o,o,[a/e.EXTENT,a/e.EXTENT,1]),o}calculateFogTileMatrix(t){const r=t.key,n=this._fogTileMatrixCache;if(n[r])return n[r];const a=this.calculatePosMatrix(t,this.cameraWorldSize);return e.multiply(a,this.worldToFogMatrix,a),n[r]=new Float32Array(a),n[r]}calculateProjMatrix(t,r=!1){const n=t.key,a=r?this._alignedProjMatrixCache:this._projMatrixCache;if(a[n])return a[n];const i=this.calculatePosMatrix(t,this.worldSize);return e.multiply(i,r?this.alignedProjMatrix:this.projMatrix,i),a[n]=new Float32Array(i),a[n]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation)return;const t=this._elevation;this._updateCameraState();const r=this._camera.position,n=this._camera.forward();if(r[2]<=0||n[2]>=0)return;const a=e.mercatorZfromAltitude(1,this._center.lat);r[2]/=a,n[2]/=a,e.normalize(n,n);const i=t.raycast(r,n,t.exaggeration());if(i){const t=e.scaleAndAdd([],r,n,i),a=new e.MercatorCoordinate(t[0],t[1],e.mercatorZfromAltitude(t[2],e.latFromMercatorY(t[1]))),o=this._camera.position,s=a.z+e.length([a.x-o[0],a.y-o[1],a.z-o[2]]);this._cameraZoom=this._zoomFromMercatorZ(s),this._centerAltitude=a.toAltitude(),this._center=a.toLngLat(),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const t=this._elevation;this._updateCameraState();const r=t.getAtPointOrZero(this._camera.mercatorPosition),n=this._minimumHeightOverTerrain()*Math.cos(e.degToRad(this._maxPitch)),a=e.mercatorZfromAltitude(r,this._center.lat),i=this._camera.position[2]-a;if(i<n){const t=e.MercatorCoordinate.fromLngLat(this._center,this._centerAltitude),r=this._camera.mercatorPosition,a=[t.x-r.x,t.y-r.y,t.z-r.z],o=e.length(a);a[2]-=n-i;const s=e.length(a);if(0===s)return;e.scale(a,a,o/s),this._camera.position=[t.x-a[0],t.y-a[1],t.z-a[2]],this._camera.orientation=_n(a,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let t,r,n,a,i=-90,o=90,s=-180,l=180;const c=this.size,u=this._unmodified;if(this.latRange){const r=this.latRange;i=e.mercatorYfromLat(r[1])*this.worldSize,o=e.mercatorYfromLat(r[0])*this.worldSize,t=o-i<c.y?c.y/(o-i):0}if(this.lngRange){const t=this.lngRange;s=e.mercatorXfromLng(t[0])*this.worldSize,l=e.mercatorXfromLng(t[1])*this.worldSize,r=l-s<c.x?c.x/(l-s):0}const p=this.point,d=Math.max(r||0,t||0);if(d)return this.center=this.unproject(new e.pointGeometry(r?(l+s)/2:p.x,t?(o+i)/2:p.y)),this.zoom+=this.scaleZoom(d),this._unmodified=u,void(this._constraining=!1);if(this.latRange){const e=p.y,t=c.y/2;e-t<i&&(a=i+t),e+t>o&&(a=o-t)}if(this.lngRange){const e=p.x,t=c.x/2;e-t<s&&(n=s+t),e+t>l&&(n=l-t)}void 0===n&&void 0===a||(this.center=this.unproject(new e.pointGeometry(void 0!==n?n:p.x,void 0!==a?a:p.y))),this._constrainCameraAltitude(),this._unmodified=u,this._constraining=!1}_minZoomForBounds(){const t=(e,t)=>Math.log2(e/(this.tileSize*Math.abs(t[1]-t[0])));let r=0;if(this.latRange){const n=this.latRange;r=t(this.height,[e.mercatorYfromLat(n[0]),e.mercatorYfromLat(n[1])])}let n=0;if(this.lngRange){const r=this.lngRange;n=t(this.width,[e.mercatorXfromLng(r[0]),e.mercatorXfromLng(r[1])])}return Math.max(r,n)}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const t=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const r=this.pixelsPerMeter;this._updateCameraState();const n=Math.PI/2+this._pitch,a=this.fovAboveCenter,i=this.elevation?this.elevation.getMinElevationBelowMSL()*r:0,o=(this._camera.position[2]*this.worldSize-i)/Math.cos(this._pitch),s=Math.sin(a)*o/Math.sin(e.clamp(Math.PI-n-a,.01,Math.PI-.01)),l=this.point,c=l.x,u=l.y,p=Math.cos(Math.PI/2-this._pitch)*s+o,d=Math.min(1.01*p,o*(1/this._horizonShift)),h=this.height/50,f=this._camera.getWorldToCamera(this.worldSize,r),m=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,h,d);m[8]=2*-t.x/this.width,m[9]=2*t.y/this.height;let g=e.mul$1([],m,f);this.mercatorMatrix=e.scale$1([],g,[this.worldSize,this.worldSize,this.worldSize/r]),this.projMatrix=g,this.invProjMatrix=e.invert(new Float64Array(16),this.projMatrix);const v=new Float32Array(16);e.identity(v),e.scale$1(v,v,[1,-1,1]),e.rotateX(v,v,this._pitch),e.rotateZ(v,v,this.angle);const y=e.perspective(new Float32Array(16),this._fov,this.width/this.height,h,d),b=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;y[8]=2*-t.x/this.width,y[9]=2*(t.y+b)/this.height,this.skyboxMatrix=e.multiply(v,y,v);const _=this.width%2/2,x=this.height%2/2,w=Math.cos(this.angle),E=Math.sin(this.angle),C=c-Math.round(c)+w*_+E*x,k=u-Math.round(u)+w*x+E*_,T=new Float64Array(g);if(e.translate(T,T,[C>.5?C-1:C,k>.5?k-1:k,0]),this.alignedProjMatrix=T,g=e.create$1(),e.scale$1(g,g,[this.width/2,-this.height/2,1]),e.translate(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=e.create$1(),e.scale$1(g,g,[1,-1,1]),e.translate(g,g,[-1,-1,0]),e.scale$1(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),g=e.invert(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._projMatrixCache={},this._alignedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const t=this.cameraWorldSize,r=this.cameraPixelsPerMeter,n=this._camera.position,a=1/this.height,i=[t,t,r];e.scale(i,i,a),e.scale(n,n,-1),e.multiply$1(n,n,i);const o=e.create$1();e.translate(o,o,n),e.scale$1(o,o,i),this.mercatorFogMatrix=o,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(t,r,a)}_updateCameraState(){if(!this.height)return;this._camera.setPitchBearing(this._pitch,this.angle);const t=this._camera.forward(),r=this.cameraToCenterDistance,n=this.point,a=this._mercatorZfromZoom(this._cameraZoom?this._cameraZoom:this._zoom)-e.mercatorZfromAltitude(this._centerAltitude,this.center.lat),i=this.cameraToCenterDistance/a;this._camera.position=[n.x/this.worldSize-t[0]*r/i,n.y/this.worldSize-t[1]*r/i,e.mercatorZfromAltitude(this._centerAltitude,this._center.lat)+-t[2]*r/i]}_translateCameraConstrained(t){const r=this._maxCameraBoundsDistance()*Math.cos(this._pitch),n=t[2];let a=1;n>0&&(a=Math.min((r-this._camera.position[2])/n,1)),this._camera.position=e.scaleAndAdd([],this._camera.position,t,a),this._updateStateFromCamera()}_updateStateFromCamera(){const t=this._camera.position,r=this._camera.forward(),{pitch:n,bearing:a}=this._camera.getPitchBearing(),i=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat),o=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.degToRad(this._maxPitch)),s=Math.max((t[2]-i)/Math.cos(n),o),l=this._zoomFromMercatorZ(s);e.scaleAndAdd(t,t,r,s),this._pitch=e.clamp(n,e.degToRad(this.minPitch),e.degToRad(this.maxPitch)),this.angle=e.wrap(a,-Math.PI,Math.PI),this._setZoom(e.clamp(l,this._minZoom,this._maxZoom)),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._center=new e.MercatorCoordinate(t[0],t[1],t[2]).toLngLat(),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(e){return Math.pow(2,e)*this.tileSize}_mercatorZfromZoom(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}_minimumHeightOverTerrain(){const e=Math.min((null!=this._cameraZoom?this._cameraZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(e)}_zoomFromMercatorZ(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}_terrainEnabled(){return!!this._elevation}isHorizonVisibleForPoints(t,r){const n=Math.min(t.x,r.x),a=Math.max(t.x,r.x),i=Math.min(t.y,r.y),o=Math.max(t.y,r.y),s=[new e.pointGeometry(n,i),new e.pointGeometry(a,o),new e.pointGeometry(n,o),new e.pointGeometry(a,i)],l=this._renderWorldCopies?-3:0,c=this._renderWorldCopies?4:1;for(const e of s){const t=this.pointRayIntersection(e);if(t.t<0)return!0;const r=this.rayIntersectionCoordinate(t);if(r.x<l||r.y<0||r.x>c||r.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+e.radToDeg(this.fovAboveCenter)>88||this.isHorizonVisibleForPoints(new e.pointGeometry(0,0),new e.pointGeometry(this.width,this.height))}zoomDeltaToMovement(t,r){const n=e.length(e.sub([],this._camera.position,t)),a=this._zoomFromMercatorZ(n)+r;return n-this._mercatorZfromZoom(a)}getCameraPoint(){const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.pointGeometry(0,t))}}function Cn(e,t){let r=!1,n=null;const a=()=>{n=null,r&&(e(),n=setTimeout(a,t),r=!1)};return()=>(r=!0,n||a(),n)}class kn{constructor(t){this._hashName=t&&encodeURIComponent(t),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Cn(this._updateHashUnthrottled.bind(this),300)}addTo(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(t){const r=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,a=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,a),o=Math.round(r.lng*i)/i,s=Math.round(r.lat*i)/i,l=this._map.getBearing(),c=this._map.getPitch();let u="";if(u+=t?`/${o}/${s}/${n}`:`${n}/${s}/${o}`,(l||c)&&(u+="/"+Math.round(10*l)/10),c&&(u+=`/${Math.round(c)}`),this._hashName){const t=this._hashName;let r=!1;const n=e.window.location.hash.slice(1).split("&").map((e=>{const n=e.split("=")[0];return n===t?(r=!0,`${n}=${u}`):e})).filter((e=>e));return r||n.push(`${t}=${u}`),`#${n.join("&")}`}return`#${u}`}_getCurrentHash(){const t=e.window.location.hash.replace("#","");if(this._hashName){let e;return t.split("&").map((e=>e.split("="))).forEach((t=>{t[0]===this._hashName&&(e=t)})),(e&&e[1]||"").split("/")}return t.split("/")}_onHashChange(){const e=this._getCurrentHash();if(e.length>=3&&!e.some((e=>isNaN(e)))){const t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());e.window.history.replaceState(e.window.history.state,null,t)}}const Tn={linearity:.3,easing:e.bezier(0,0,.3,1)},Sn=e.extend({deceleration:2500,maxSpeed:1400},Tn),Pn=e.extend({deceleration:20,maxSpeed:1400},Tn),Mn=e.extend({deceleration:1e3,maxSpeed:360},Tn),In=e.extend({deceleration:1e3,maxSpeed:90},Tn);class An{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.exported.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,r=e.exported.now();for(;t.length>0&&r-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const r={zoom:0,bearing:0,pitch:0,pan:new e.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:e}of this._inertiaBuffer)r.zoom+=e.zoomDelta||0,r.bearing+=e.bearingDelta||0,r.pitch+=e.pitchDelta||0,e.panDelta&&r.pan._add(e.panDelta),e.around&&(r.around=e.around),e.pinchAround&&(r.pinchAround=e.pinchAround);const n=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,a={};if(r.pan.mag()){const i=zn(r.pan.mag(),n,e.extend({},Sn,t||{}));a.offset=r.pan.mult(i.amount/r.pan.mag()),a.center=this._map.transform.center,On(a,i)}if(r.zoom){const e=zn(r.zoom,n,Pn);a.zoom=this._map.transform.zoom+e.amount,On(a,e)}if(r.bearing){const t=zn(r.bearing,n,Mn);a.bearing=this._map.transform.bearing+e.clamp(t.amount,-179,179),On(a,t)}if(r.pitch){const e=zn(r.pitch,n,In);a.pitch=this._map.transform.pitch+e.amount,On(a,e)}if(a.zoom||a.bearing){const e=void 0===r.pinchAround?r.around:r.pinchAround;a.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),e.extend(a,{noMoveStart:!0})}}function On(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function zn(t,r,n){const{maxSpeed:a,linearity:i,deceleration:o}=n,s=e.clamp(t*i/(r/1e3),-a,a),l=Math.abs(s)/(o*i);return{easing:n.easing,duration:1e3*l,amount:s*(l/2)}}class Rn extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,r,n,a={}){const o=i.mousePos(r.getCanvasContainer(),n),s=r.unproject(o);super(t,e.extend({point:o,lngLat:s,originalEvent:n},a)),this._defaultPrevented=!1,this.target=r}}class Ln extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,r,n){const a="touchend"===t?n.changedTouches:n.touches,o=i.touchPos(r.getCanvasContainer(),a),s=o.map((e=>r.unproject(e))),l=o.reduce(((e,t,r,n)=>e.add(t.div(n.length))),new e.pointGeometry(0,0));super(t,{points:o,point:l,lngLats:s,lngLat:r.unproject(l),originalEvent:n}),this._defaultPrevented=!1}}class Dn extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,r){super(e,{originalEvent:r}),this._defaultPrevented=!1}}class Bn{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new Dn(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new Rn(e.type,this._map,e))}mouseup(e){this._map.fire(new Rn(e.type,this._map,e))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new Rn(e.type,this._map,e))}dblclick(e){return this._firePreventable(new Rn(e.type,this._map,e))}mouseover(e){this._map.fire(new Rn(e.type,this._map,e))}mouseout(e){this._map.fire(new Rn(e.type,this._map,e))}touchstart(e){return this._firePreventable(new Ln(e.type,this._map,e))}touchmove(e){this._map.fire(new Ln(e.type,this._map,e))}touchend(e){this._map.fire(new Ln(e.type,this._map,e))}touchcancel(e){this._map.fire(new Ln(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class $n{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(e){this._map.fire(new Rn(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Rn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new Rn(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Fn{constructor(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(i.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const r=t;if(this._lastPos.equals(r)||!this._box&&r.dist(this._startPos)<this._clickTolerance)return;const n=this._startPos;this._lastPos=r,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));const a=Math.min(n.x,r.x),o=Math.max(n.x,r.x),s=Math.min(n.y,r.y),l=Math.max(n.y,r.y);this._map._requestDomTask((()=>{this._box&&(i.setTransform(this._box,`translate(${a}px,${s}px)`),this._box.style.width=o-a+"px",this._box.style.height=l-s+"px")}))}mouseupWindow(t,r){if(!this._active)return;if(0!==t.button)return;const n=this._startPos,a=r;if(this.reset(),i.suppressClick(),n.x!==a.x||n.y!==a.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:e=>e.fitScreenCoordinates(n,a,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",t)}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,r){return this._map.fire(new e.Event(t,{originalEvent:r}))}}function Nn(e,t){const r={};for(let n=0;n<e.length;n++)r[e[n].identifier]=t[n];return r}class Vn{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,r,n){(this.centroid||n.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),n.length===this.numTouches&&(this.centroid=function(t){const r=new e.pointGeometry(0,0);for(const e of t)r._add(e);return r.div(t.length)}(r),this.touches=Nn(n,r)))}touchmove(e,t,r){if(this.aborted||!this.centroid)return;const n=Nn(r,t);for(const e in this.touches){const t=this.touches[e],r=n[e];(!r||r.dist(t)>30)&&(this.aborted=!0)}}touchend(e,t,r){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===r.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class jn{constructor(e){this.singleTap=new Vn(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,t,r){this.singleTap.touchstart(e,t,r)}touchmove(e,t,r){this.singleTap.touchmove(e,t,r)}touchend(e,t,r){const n=this.singleTap.touchend(e,t,r);if(n){const t=e.timeStamp-this.lastTime<500,r=!this.lastTap||this.lastTap.dist(n)<30;if(t&&r||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=n,this.count===this.numTaps)return this.reset(),n}}}class Un{constructor(){this._zoomIn=new jn({numTouches:1,numTaps:2}),this._zoomOut=new jn({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,r){this._zoomIn.touchstart(e,t,r),this._zoomOut.touchstart(e,t,r)}touchmove(e,t,r){this._zoomIn.touchmove(e,t,r),this._zoomOut.touchmove(e,t,r)}touchend(e,t,r){const n=this._zoomIn.touchend(e,t,r),a=this._zoomOut.touchend(e,t,r);return n?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(n)},{originalEvent:e})}):a?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(a)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const qn={0:1,2:2};class Hn{constructor(e){this.reset(),this._clickTolerance=e.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(e,t){return!1}_move(e,t){return{}}mousedown(e,t){if(this._lastPoint)return;const r=i.mouseButton(e);this._correctButton(e,r)&&(this._lastPoint=t,this._eventButton=r)}mousemoveWindow(e,t){const r=this._lastPoint;if(r)if(e.preventDefault(),function(e,t){const r=qn[t];return void 0===e.buttons||(e.buttons&r)!==r}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(r)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(r,t)}mouseupWindow(e){this._lastPoint&&i.mouseButton(e)===this._eventButton&&(this._moved&&i.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gn extends Hn{mousedown(e,t){super.mousedown(e,t),this._lastPoint&&(this._active=!0)}_correctButton(e,t){return 0===t&&!e.ctrlKey}_move(e,t){return{around:t,panDelta:t.sub(e)}}}class Wn extends Hn{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const r=.8*(t.x-e.x);if(r)return this._active=!0,{bearingDelta:r}}contextmenu(e){e.preventDefault()}}class Xn extends Hn{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const r=-.5*(t.y-e.y);if(r)return this._active=!0,{pitchDelta:r}}contextmenu(e){e.preventDefault()}}class Zn{constructor(e){this._minTouches=1,this._clickTolerance=e.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new e.pointGeometry(0,0)}touchstart(e,t,r){return this._calculateTransform(e,t,r)}touchmove(e,t,r){if(this._active&&!(r.length<this._minTouches))return e.preventDefault(),this._calculateTransform(e,t,r)}touchend(e,t,r){this._calculateTransform(e,t,r),this._active&&r.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,r,n){n.length>0&&(this._active=!0);const a=Nn(n,r),i=new e.pointGeometry(0,0),o=new e.pointGeometry(0,0);let s=0;for(const e in a){const t=a[e],r=this._touches[e];r&&(i._add(t),o._add(t.sub(r)),s++,a[e]=t)}if(this._touches=a,s<this._minTouches||!o.mag())return;const l=o.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:i.div(s),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yn{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(e){}_move(e,t,r){return{}}touchstart(e,t,r){this._firstTwoTouches||r.length<2||(this._firstTwoTouches=[r[0].identifier,r[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,r){if(!this._firstTwoTouches)return;e.preventDefault();const[n,a]=this._firstTwoTouches,i=Kn(r,t,n),o=Kn(r,t,a);if(!i||!o)return;const s=this._aroundCenter?null:i.add(o).div(2);return this._move([i,o],s,e)}touchend(e,t,r){if(!this._firstTwoTouches)return;const[n,a]=this._firstTwoTouches,o=Kn(r,t,n),s=Kn(r,t,a);o&&s||(this._active&&i.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Kn(e,t,r){for(let n=0;n<e.length;n++)if(e[n].identifier===r)return t[n]}function Qn(e,t){return Math.log(e/t)/Math.LN2}class Jn extends Yn{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const r=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Qn(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Qn(this._distance,r),pinchAround:t}}}function ea(e,t){return 180*e.angleWith(t)/Math.PI}class ta extends Yn{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t){const r=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ea(this._vector,r),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,r=ea(e,this._startVector);return Math.abs(r)<t}}function ra(e){return Math.abs(e.y)>Math.abs(e.x)}class na extends Yn{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(e){this._lastPoints=e,ra(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,t,r){const n=e[0].sub(this._lastPoints[0]),a=e[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(n,a,r.timeStamp),this._valid)return this._lastPoints=e,this._active=!0,{pitchDelta:(n.y+a.y)/2*-.5}}gestureBeginsVertically(e,t,r){if(void 0!==this._valid)return this._valid;const n=e.mag()>=2,a=t.mag()>=2;if(!n&&!a)return;if(!n||!a)return void 0===this._firstMove&&(this._firstMove=r),r-this._firstMove<100&&void 0;const i=e.y>0==t.y>0;return ra(e)&&ra(t)&&i}}const aa={panStep:100,bearingStep:15,pitchStep:10};class ia{constructor(){const e=aa;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,r=0,n=0,a=0,i=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?r=-1:(e.preventDefault(),a=-1);break;case 39:e.shiftKey?r=1:(e.preventDefault(),a=1);break;case 38:e.shiftKey?n=1:(e.preventDefault(),i=-1);break;case 40:e.shiftKey?n=-1:(e.preventDefault(),i=1);break;default:return}return this._rotationDisabled&&(r=0,n=0),{cameraAnimation:o=>{const s=o.getZoom();o.easeTo({duration:300,easeId:"keyboardHandler",easing:oa,zoom:t?Math.round(s)+t*(e.shiftKey?2:1):s,bearing:o.getBearing()+r*this._bearingStep,pitch:o.getPitch()+n*this._pitchStep,offset:[-a*this._panStep,-i*this._panStep],center:o.getCenter()},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function oa(e){return e*(2-e)}const sa=4.000244140625;class la{constructor(t,r){this._map=t,this._el=t.getCanvasContainer(),this._handler=r,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll(["_onTimeout"],this)}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=e&&"center"===e.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(t){if(!this.isEnabled())return;let r=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const n=e.exported.now(),a=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==r&&r%sa==0?this._type="wheel":0!==r&&Math.abs(r)<4?this._type="trackpad":a>400?(this._type=null,this._lastValue=r,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(a*r)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,r+=this._lastValue)),t.shiftKey&&r&&(r/=4),this._type&&(this._lastWheelEvent=t,this._delta-=r,this._active||this._start(t)),t.preventDefault()}_onTimeout(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const t=i.mousePos(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const t=this._map.transform,r=()=>t._terrainEnabled()?t.computeZoomRelativeTo(this._aroundCoord):t.zoom;if(0!==this._delta){const e="wheel"===this._type&&Math.abs(this._delta)>sa?this._wheelZoomRate:this._defaultZoomRate;let n=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==n&&(n=1/n);const a=r(),i=Math.pow(2,a),o="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):i;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(o*n))),"wheel"===this._type&&(this._startZoom=r(),this._easing=this._smoothOutEasing(200)),this._delta=0}const n="number"==typeof this._targetZoom?this._targetZoom:r(),a=this._startZoom,i=this._easing;let o,s=!1;if("wheel"===this._type&&a&&i){const t=Math.min((e.exported.now()-this._lastWheelEventTime)/200,1),r=i(t);o=e.number(a,n,r),t<1?this._frameId||(this._frameId=!0):s=!0}else o=n,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:o-r(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let r=e.ease;if(this._prevEase){const t=this._prevEase,n=(e.exported.now()-t.start)/t.duration,a=t.easing(n+.01)-t.easing(n),i=.27/Math.sqrt(a*a+1e-4)*.01,o=Math.sqrt(.0729-i*i);r=e.bezier(i,o,.25,1)}return this._prevEase={start:e.exported.now(),duration:t,easing:r},r}reset(){this._active=!1}}class ca{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ua{constructor(){this.reset()}reset(){this._active=!1}dblclick(e,t){return e.preventDefault(),{cameraAnimation:r=>{r.easeTo({duration:300,zoom:r.getZoom()+(e.shiftKey?-1:1),around:r.unproject(t)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class pa{constructor(){this._tap=new jn({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(e,t,r){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?r.length>0&&(this._swipePoint=t[0],this._swipeTouch=r[0].identifier):this._tap.touchstart(e,t,r))}touchmove(e,t,r){if(this._tapTime){if(this._swipePoint){if(r[0].identifier!==this._swipeTouch)return;const n=t[0],a=n.y-this._swipePoint.y;return this._swipePoint=n,e.preventDefault(),this._active=!0,{zoomDelta:a/128}}}else this._tap.touchmove(e,t,r)}touchend(e,t,r){this._tapTime?this._swipePoint&&0===r.length&&this.reset():this._tap.touchend(e,t,r)&&(this._tapTime=e.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class da{constructor(e,t,r){this._el=e,this._mousePan=t,this._touchPan=r}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ha{constructor(e,t,r){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=r}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class fa{constructor(e,t,r,n){this._el=e,this._touchZoom=t,this._touchRotate=r,this._tapDragZoom=n,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const ma=e=>e.zoom||e.drag||e.pitch||e.rotate;class ga extends e.Event{}class va{constructor(){this.constants=[1,1,.01],this.radius=0}setup(t,r){const n=e.sub([],r,t);this.radius=e.length(n[2]<0?e.div([],n,this.constants):[n[0],n[1],0])}projectRay(t){e.div(t,t,this.constants),e.normalize(t,t),e.mul$2(t,t,this.constants);const r=e.scale([],t,this.radius);if(r[2]>0){const t=e.scale([],[0,0,1],e.dot(r,[0,0,1])),n=e.scale([],e.normalize([],[r[0],r[1],0]),this.radius),a=e.add([],r,e.scale([],e.sub([],e.add([],n,t),r),2));r[0]=a[0],r[1]=a[1]}return r}}function ya(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class ba{constructor(t,r){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new An(t),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new va,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(r),e.bindAll(["handleEvent","handleWindowEvent"],this);const n=this._el;this._listeners=[[n,"touchstart",{passive:!0}],[n,"touchmove",{passive:!1}],[n,"touchend",void 0],[n,"touchcancel",void 0],[n,"mousedown",void 0],[n,"mousemove",void 0],[n,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[n,"mouseover",void 0],[n,"mouseout",void 0],[n,"dblclick",void 0],[n,"click",void 0],[n,"keydown",{capture:!1}],[n,"keyup",void 0],[n,"wheel",{passive:!1}],[n,"contextmenu",void 0],[e.window,"blur",void 0]];for(const[t,r,n]of this._listeners)i.addEventListener(t,r,t===e.window.document?this.handleWindowEvent:this.handleEvent,n)}destroy(){for(const[t,r,n]of this._listeners)i.removeEventListener(t,r,t===e.window.document?this.handleWindowEvent:this.handleEvent,n)}_addDefaultHandlers(e){const t=this._map,r=t.getCanvasContainer();this._add("mapEvent",new Bn(t,e));const n=t.boxZoom=new Fn(t,e);this._add("boxZoom",n);const a=new Un,i=new ua;t.doubleClickZoom=new ca(i,a),this._add("tapZoom",a),this._add("clickZoom",i);const o=new pa;this._add("tapDragZoom",o);const s=t.touchPitch=new na;this._add("touchPitch",s);const l=new Wn(e),c=new Xn(e);t.dragRotate=new ha(e,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const u=new Gn(e),p=new Zn(e);t.dragPan=new da(r,u,p),this._add("mousePan",u),this._add("touchPan",p,["touchZoom","touchRotate"]);const d=new ta,h=new Jn;t.touchZoomRotate=new fa(r,h,d,o),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",h,["touchPan","touchRotate"]),this._add("blockableMapEvent",new $n(t));const f=t.scrollZoom=new la(t,this);this._add("scrollZoom",f,["mousePan"]);const m=t.keyboard=new ia;this._add("keyboard",m);for(const r of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])e.interactive&&e[r]&&t[r].enable(e[r])}_add(e,t,r){this._handlers.push({handlerName:e,handler:t,allowed:r}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(ma(this._eventsInProgress))||this.isZooming()}_blockedByActive(e,t,r){for(const n in e)if(n!==r&&(!t||t.indexOf(n)<0))return!0;return!1}handleWindowEvent(e){this.handleEvent(e,`${e.type}Window`)}_getMapTouches(e){const t=[];for(const r of e)this._el.contains(r.target)&&t.push(r);return t}handleEvent(e,t){if("blur"===e.type)return void this.stop(!0);this._updatingCamera=!0;const r="renderFrame"===e.type,n=r?void 0:e,a={needsRenderFrame:!1},o={},s={},l=e.touches?this._getMapTouches(e.touches):void 0,c=l?i.touchPos(this._el,l):r?void 0:i.mousePos(this._el,e);for(const{handlerName:r,handler:i,allowed:u}of this._handlers){if(!i.isEnabled())continue;let p;this._blockedByActive(s,u,r)?i.reset():i[t||e.type]&&(p=i[t||e.type](e,c,l),this.mergeHandlerResult(a,o,p,r,n),p&&p.needsRenderFrame&&this._triggerRenderFrame()),(p||i.isActive())&&(s[r]=i)}const u={};for(const e in this._previousActiveHandlers)s[e]||(u[e]=n);this._previousActiveHandlers=s,(Object.keys(u).length||ya(a))&&(this._changes.push([a,o,u]),this._triggerRenderFrame()),(Object.keys(s).length||ya(a))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:p}=a;p&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],p(this._map))}mergeHandlerResult(t,r,n,a,i){if(!n)return;e.extend(t,n);const o={handlerName:a,originalEvent:n.originalEvent||i};void 0!==n.zoomDelta&&(r.zoom=o),void 0!==n.panDelta&&(r.drag=o),void 0!==n.pitchDelta&&(r.pitch=o),void 0!==n.bearingDelta&&(r.rotate=o)}_applyChanges(){const t={},r={},n={};for(const[a,i,o]of this._changes)a.panDelta&&(t.panDelta=(t.panDelta||new e.pointGeometry(0,0))._add(a.panDelta)),a.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+a.zoomDelta),a.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+a.bearingDelta),a.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+a.pitchDelta),void 0!==a.around&&(t.around=a.around),void 0!==a.aroundCoord&&(t.aroundCoord=a.aroundCoord),void 0!==a.pinchAround&&(t.pinchAround=a.pinchAround),a.noInertia&&(t.noInertia=a.noInertia),e.extend(r,i),e.extend(n,o);this._updateMapTransform(t,r,n),this._changes=[]}_updateMapTransform(t,r,n){const a=this._map,i=a.transform,o=e=>[e.x,e.y,e.z];if((e=>{const t=this._eventsInProgress.drag;return t&&!this._handlersById[t.handlerName].isActive()})()&&!ya(t)){const e=i.zoom;i.cameraElevationReference="sea",i.recenterOnTerrain(),i.cameraElevationReference="ground",e!==i.zoom&&this._map._update(!0)}if(!ya(t))return this._fireEvents(r,n,!0);let{panDelta:s,zoomDelta:l,bearingDelta:c,pitchDelta:u,around:p,aroundCoord:d,pinchAround:h}=t;void 0!==h&&(p=h),(e=>r.drag&&!this._eventsInProgress.drag)()&&p&&(this._dragOrigin=o(i.pointCoordinate3D(p)),this._trackingEllipsoid.setup(i._camera.position,this._dragOrigin)),i.cameraElevationReference="sea",a._stop(!0),p=p||a.transform.centerPoint,c&&(i.bearing+=c),u&&(i.pitch+=u),i._updateCameraState();const f=[0,0,0];if(s){const e=i.screenPointToMercatorRay(p),t=i.screenPointToMercatorRay(p.sub(s)),r=this._trackingEllipsoid.projectRay(e.dir),n=this._trackingEllipsoid.projectRay(t.dir);f[0]=n[0]-r[0],f[1]=n[1]-r[1]}const m=i.zoom,g=[0,0,0];if(l){const t=o(d||i.pointCoordinate3D(p)),r={dir:e.normalize([],e.sub([],t,i._camera.position))},n=i.screenPointToMercatorRay(i.centerPoint);if(r.dir[2]<0){const a=e.altitudeFromMercatorZ(t[2],t[1]),s=i.rayIntersectionCoordinate(i.pointRayIntersection(i.centerPoint,a)),c=i.zoomDeltaToMovement(o(s),l)*(n.dir[2]/r.dir[2]);e.scale(g,r.dir,c)}else if(i._terrainEnabled()){const n=i.zoomDeltaToMovement(t,l);e.scale(g,r.dir,n)}}const v=e.add(f,f,g);i._translateCameraConstrained(v),l&&Math.abs(i.zoom-m)>1e-4&&i.recenterOnTerrain(),i.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(r,n,!0)}_fireEvents(t,r,n){const a=ma(this._eventsInProgress),i=ma(t),o={};for(const e in t){const{originalEvent:r}=t[e];this._eventsInProgress[e]||(o[`${e}start`]=r),this._eventsInProgress[e]=t[e]}!a&&i&&this._fireEvent("movestart",i.originalEvent);for(const e in o)this._fireEvent(e,o[e]);i&&this._fireEvent("move",i.originalEvent);for(const e in t){const{originalEvent:r}=t[e];this._fireEvent(e,r)}const s={};let l;for(const e in this._eventsInProgress){const{handlerName:t,originalEvent:n}=this._eventsInProgress[e];this._handlersById[t].isActive()||(delete this._eventsInProgress[e],l=r[t]||n,s[`${e}end`]=l)}for(const e in s)this._fireEvent(e,s[e]);const c=ma(this._eventsInProgress);if(n&&(a||i)&&!c){this._updatingCamera=!0;const t=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),r=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;t?(r(t.bearing||this._map.getBearing())&&(t.bearing=0),this._map.easeTo(t,{originalEvent:l})):(this._map.fire(new e.Event("moveend",{originalEvent:l})),r(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,r){this._map.fire(new e.Event(t,r?{originalEvent:r}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((e=>{delete this._frameId,this.handleEvent(new ga("renderFrame",{timeStamp:e})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class _a extends e.Evented{constructor(t,r){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=r.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}getCenter(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(t,r,n){return t=e.pointGeometry.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},r),n)}panTo(t,r,n){return this.easeTo(e.extend({center:t},r),n)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(t,r,n){return this.easeTo(e.extend({zoom:t},r),n)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(t,r,n){return this.easeTo(e.extend({bearing:t},r),n)}resetNorth(t,r){return this.rotateTo(0,e.extend({duration:1e3},t),r),this}resetNorthPitch(t,r){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),r),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(t,r){t=e.LngLatBounds.convert(t);const n=r&&r.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),n,r)}_extendCameraOptions(t){const r={top:0,bottom:0,right:0,left:0};if("number"==typeof(t=e.extend({padding:r,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){const e=t.padding;t.padding={top:e,bottom:e,right:e,left:e}}return t.padding=e.extend(r,t.padding),t}_cameraForBoxAndBearing(t,r,n,a){const i=this._extendCameraOptions(a),o=this.transform,s=o.padding,l=o.project(e.LngLat.convert(t)),c=o.project(e.LngLat.convert(r)),u=l.rotate(-e.degToRad(n)),p=c.rotate(-e.degToRad(n)),d=new e.pointGeometry(Math.max(u.x,p.x),Math.max(u.y,p.y)),h=new e.pointGeometry(Math.min(u.x,p.x),Math.min(u.y,p.y)),f=d.sub(h),m=(o.width-(s.left+s.right+i.padding.left+i.padding.right))/f.x,g=(o.height-(s.top+s.bottom+i.padding.top+i.padding.bottom))/f.y;if(g<0||m<0)return void e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const v=Math.min(o.scaleZoom(o.scale*Math.min(m,g)),i.maxZoom),y="number"==typeof i.offset.x?new e.pointGeometry(i.offset.x,i.offset.y):e.pointGeometry.convert(i.offset),b=new e.pointGeometry((i.padding.left-i.padding.right)/2,(i.padding.top-i.padding.bottom)/2).rotate(n*Math.PI/180),_=y.add(b).mult(o.scale/o.zoomScale(v));return{center:o.unproject(l.add(c).div(2).sub(_)),zoom:v,bearing:n}}_cameraForBox(t,r,n,a,i){const o=this._extendCameraOptions(i);n=n||0,a=a||0,t=e.LngLat.convert(t),r=e.LngLat.convert(r);const s=this.transform.clone();s.padding=o.padding;const l=this.getFreeCameraOptions(),c=new e.LngLat(.5*(t.lng+r.lng),.5*(t.lat+r.lat)),u=.5*(n+a);if(s._camera.position[2]<e.mercatorZfromAltitude(u,c.lat))return void e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");l.lookAtPoint(c),s.setFreeCameraOptions(l);const p=e.MercatorCoordinate.fromLngLat(t),d=e.MercatorCoordinate.fromLngLat(r),m=s.pointRayIntersection(s.centerPoint,u),g=[(v=s.rayIntersectionCoordinate(m)).x,v.y,v.z];var v;const y=s.screenPointToMercatorRay(s.centerPoint);let b,_=0;do{const r=Math.floor(s.zoom),i=1<<r,o=Math.min(i*p.x,i*d.x),l=Math.min(i*p.y,i*d.y),c=Math.max(i*p.x,i*d.x),u=Math.max(i*p.y,i*d.y),m=new f([o,l,n],[c,u,a]),v=h.fromInvProjectionMatrix(s.invProjMatrix,s.worldSize,r);if(2!==m.intersects(v)){b&&(s._camera.position=e.scaleAndAdd([],s._camera.position,y.dir,-b),s._updateStateFromCamera());break}const _=e.sub([],s._camera.position,g);b=.5*e.length(_),s._camera.position=e.scaleAndAdd([],s._camera.position,y.dir,b);try{s._updateStateFromCamera()}catch(t){return void e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++_<10);return{center:s.center,zoom:s.zoom,bearing:s.bearing,pitch:s.pitch}}fitBounds(e,t,r){return this._fitInternal(this.cameraForBounds(e,t),t,r)}_raycastElevationBox(t,r){const n=this.transform.elevation;if(!n)return;const a=new e.pointGeometry(t.x,r.y),i=new e.pointGeometry(r.x,t.y),o=n.pointCoordinate(t);if(!o)return;const s=n.pointCoordinate(r);if(!s)return;const l=n.pointCoordinate(a);if(!l)return;const c=n.pointCoordinate(i);if(!c)return;const u=new e.MercatorCoordinate(o[0],o[1]).toLngLat(),p=new e.MercatorCoordinate(s[0],s[1]).toLngLat(),d=new e.MercatorCoordinate(l[0],l[1]).toLngLat(),h=new e.MercatorCoordinate(c[0],c[1]).toLngLat(),f=Math.min(u.lng,Math.min(p.lng,Math.min(d.lng,h.lng))),m=Math.min(u.lat,Math.min(p.lat,Math.min(d.lat,h.lat))),g=Math.max(u.lng,Math.max(p.lng,Math.max(d.lng,h.lng))),v=Math.max(u.lat,Math.max(p.lat,Math.max(d.lat,h.lat))),y=Math.min(o[3],Math.min(s[3],Math.min(l[3],c[3]))),b=Math.max(o[3],Math.max(s[3],Math.max(l[3],c[3])));return{minLngLat:new e.LngLat(f,m),maxLngLat:new e.LngLat(g,v),minAltitude:y,maxAltitude:b}}fitScreenCoordinates(t,r,n,a,i){let o,s,l,c;const u=e.pointGeometry.convert(t),p=e.pointGeometry.convert(r),d=this._raycastElevationBox(u,p);if(d)o=d.minLngLat,s=d.maxLngLat,l=d.minAltitude,c=d.maxAltitude;else{if(this.transform.isHorizonVisibleForPoints(u,p))return this;o=this.transform.pointLocation(u),s=this.transform.pointLocation(p)}return this._fitInternal(0===this.transform.pitch?this._cameraForBoxAndBearing(this.transform.pointLocation(e.pointGeometry.convert(t)),this.transform.pointLocation(e.pointGeometry.convert(r)),n,a):this._cameraForBox(o,s,l,c,a),a,i)}_fitInternal(t,r,n){return t?(delete(r=e.extend(t,r)).padding,r.linear?this.easeTo(r,n):this.flyTo(r,n)):this}jumpTo(t,r){this.stop();const n=this.transform;let a=!1,i=!1,o=!1;return"zoom"in t&&n.zoom!==+t.zoom&&(a=!0,n.zoom=+t.zoom),void 0!==t.center&&(n.center=e.LngLat.convert(t.center)),"bearing"in t&&n.bearing!==+t.bearing&&(i=!0,n.bearing=+t.bearing),"pitch"in t&&n.pitch!==+t.pitch&&(o=!0,n.pitch=+t.pitch),null==t.padding||n.isPaddingEqual(t.padding)||(n.padding=t.padding),this.fire(new e.Event("movestart",r)).fire(new e.Event("move",r)),a&&this.fire(new e.Event("zoomstart",r)).fire(new e.Event("zoom",r)).fire(new e.Event("zoomend",r)),i&&this.fire(new e.Event("rotatestart",r)).fire(new e.Event("rotate",r)).fire(new e.Event("rotateend",r)),o&&this.fire(new e.Event("pitchstart",r)).fire(new e.Event("pitch",r)).fire(new e.Event("pitchend",r)),this.fire(new e.Event("moveend",r))}getFreeCameraOptions(){return this.transform.getFreeCameraOptions()}setFreeCameraOptions(t,r){this.stop();const n=this.transform,a=n.zoom,i=n.pitch,o=n.bearing;n.setFreeCameraOptions(t);const s=a!==n.zoom,l=i!==n.pitch,c=o!==n.bearing;return this.fire(new e.Event("movestart",r)).fire(new e.Event("move",r)),s&&this.fire(new e.Event("zoomstart",r)).fire(new e.Event("zoom",r)).fire(new e.Event("zoomend",r)),c&&this.fire(new e.Event("rotatestart",r)).fire(new e.Event("rotate",r)).fire(new e.Event("rotateend",r)),l&&this.fire(new e.Event("pitchstart",r)).fire(new e.Event("pitch",r)).fire(new e.Event("pitchend",r)),this.fire(new e.Event("moveend",r)),this}easeTo(t,r){this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||!t.essential&&e.exported.prefersReducedMotion)&&(t.duration=0);const n=this.transform,a=this.getZoom(),i=this.getBearing(),o=this.getPitch(),s=this.getPadding(),l="zoom"in t?+t.zoom:a,c="bearing"in t?this._normalizeBearing(t.bearing,i):i,u="pitch"in t?+t.pitch:o,p="padding"in t?t.padding:n.padding,d=e.pointGeometry.convert(t.offset);let h=n.centerPoint.add(d);const f=n.pointLocation(h),m=e.LngLat.convert(t.center||f);this._normalizeCenter(m);const g=n.project(f),v=n.project(m).sub(g),y=n.zoomScale(l-a);let b,_;t.around&&(b=e.LngLat.convert(t.around),_=n.locationPoint(b));const x={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==a,this._rotating=this._rotating||i!==c,this._pitching=this._pitching||u!==o,this._padding=!n.isPaddingEqual(p),this._easeId=t.easeId,this._prepareEase(r,t.noMoveStart,x),this._ease((t=>{if(this._zooming&&(n.zoom=e.number(a,l,t)),this._rotating&&(n.bearing=e.number(i,c,t)),this._pitching&&(n.pitch=e.number(o,u,t)),this._padding&&(n.interpolatePadding(s,p,t),h=n.centerPoint.add(d)),b)n.setLocationAtPoint(b,_);else{const e=n.zoomScale(n.zoom-a),r=l>a?Math.min(2,y):Math.max(.5,y),i=Math.pow(r,1-t),o=n.unproject(g.add(v.mult(t*i)).mult(e));n.setLocationAtPoint(n.renderWorldCopies?o.wrap():o,h)}this._fireMoveEvents(r)}),(e=>{n.recenterOnTerrain(),this._afterEase(r,e)}),t),this}_prepareEase(t,r,n={}){this._moving=!0,this.transform.cameraElevationReference="sea",r||n.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!n.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!n.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!n.pitching&&this.fire(new e.Event("pitchstart",t))}_fireMoveEvents(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))}_afterEase(t,r){if(this._easeId&&r&&this._easeId===r)return;delete this._easeId,this.transform.cameraElevationReference="ground";const n=this._zooming,a=this._rotating,i=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,n&&this.fire(new e.Event("zoomend",t)),a&&this.fire(new e.Event("rotateend",t)),i&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}flyTo(t,r){if(!t.essential&&e.exported.prefersReducedMotion){const n=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(n,r)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);const n=this.transform,a=this.getZoom(),i=this.getBearing(),o=this.getPitch(),s=this.getPadding(),l="zoom"in t?e.clamp(+t.zoom,n.minZoom,n.maxZoom):a,c="bearing"in t?this._normalizeBearing(t.bearing,i):i,u="pitch"in t?+t.pitch:o,p="padding"in t?t.padding:n.padding,d=n.zoomScale(l-a),h=e.pointGeometry.convert(t.offset);let f=n.centerPoint.add(h);const m=n.pointLocation(f),g=e.LngLat.convert(t.center||m);this._normalizeCenter(g);const v=n.project(m),y=n.project(g).sub(v);let b=t.curve;const _=Math.max(n.width,n.height),x=_/d,w=y.mag();if("minZoom"in t){const r=e.clamp(Math.min(t.minZoom,a,l),n.minZoom,n.maxZoom),i=_/n.zoomScale(r-a);b=Math.sqrt(i/w*2)}const E=b*b;function C(e){const t=(x*x-_*_+(e?-1:1)*E*E*w*w)/(2*(e?x:_)*E*w);return Math.log(Math.sqrt(t*t+1)-t)}function k(e){return(Math.exp(e)-Math.exp(-e))/2}function T(e){return(Math.exp(e)+Math.exp(-e))/2}const S=C(0);let P=function(e){return T(S)/T(S+b*e)},M=function(e){return _*((T(S)*(k(t=S+b*e)/T(t))-k(S))/E)/w;var t},I=(C(1)-S)/b;if(Math.abs(w)<1e-6||!isFinite(I)){if(Math.abs(_-x)<1e-6)return this.easeTo(t,r);const e=x<_?-1:1;I=Math.abs(Math.log(x/_))/b,M=function(){return 0},P=function(t){return Math.exp(e*b*t)}}return t.duration="duration"in t?+t.duration:1e3*I/("screenSpeed"in t?+t.screenSpeed/b:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=i!==c,this._pitching=u!==o,this._padding=!n.isPaddingEqual(p),this._prepareEase(r,!1),this._ease((t=>{const d=t*I,m=1/P(d);n.zoom=1===t?l:a+n.scaleZoom(m),this._rotating&&(n.bearing=e.number(i,c,t)),this._pitching&&(n.pitch=e.number(o,u,t)),this._padding&&(n.interpolatePadding(s,p,t),f=n.centerPoint.add(h));const b=1===t?g:n.unproject(v.add(y.mult(M(d))).mult(m));n.setLocationAtPoint(n.renderWorldCopies?b.wrap():b,f),n._updateCenterElevation(),this._fireMoveEvents(r)}),(()=>this._afterEase(r)),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const e=this._onEaseEnd;delete this._onEaseEnd,e.call(this,t)}if(!e){const e=this.handlers;e&&e.stop(!1)}return this}_ease(t,r,n){!1===n.animate||0===n.duration?(t(1),r()):(this._easeStart=e.exported.now(),this._easeOptions=n,this._onEaseFrame=t,this._onEaseEnd=r,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const t=Math.min((e.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,r){t=e.wrap(t,-180,180);const n=Math.abs(t-r);return Math.abs(t-360-r)<n&&(t-=360),Math.abs(t+360-r)<n&&(t+=360),t}_normalizeCenter(e){const t=this.transform;if(!t.renderWorldCopies||t.lngRange)return;const r=e.lng-t.center.lng;e.lng+=r>180?-360:r<-180?360:0}}class xa{constructor(t={}){this.options=t,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(e){const t=this.options&&this.options.compact;return this._map=e,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=i.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=i.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){i.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(e,t){const r=this._map._getUIString(`AttributionControl.${t}`);e.title=r,e.setAttribute("aria-label",r)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))}_updateEditLink(){let t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));const r=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){const n=r.reduce(((e,t,n)=>(t.value&&(e+=`${t.key}=${t.value}${n<r.length-1?"&":""}`),e)),"?");t.href=`${e.config.FEEDBACK_URL}/${n}${this._map._hash?this._map._hash.getHashString(!0):""}`,t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}}_updateData(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map((e=>"string"!=typeof e?"":e))):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style._sourceCaches;for(const r in t){const n=t[r];if(n.used){const t=n.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e.sort(((e,t)=>e.length-t.length)),e=e.filter(((t,r)=>{for(let n=r+1;n<e.length;n++)if(e[n].indexOf(t)>=0)return!1;return!0}));const r=e.join(" | ");r!==this._attribHTML&&(this._attribHTML=r,e.length?(this._innerContainer.innerHTML=r,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class wa{constructor(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)}onAdd(e){this._map=e,this._container=i.create("div","mapboxgl-ctrl");const t=i.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(const t in e){const r=e[t].getSource();if(r.hasOwnProperty("mapbox_logo")&&!r.mapbox_logo)return!1}return!0}_updateCompact(){const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}}}class Ea{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,r=t?this._queue.concat(t):this._queue;for(const t of r)if(t.id===e)return void(t.cancelled=!0)}run(e=0){const t=this._currentlyRunning=this._queue;this._queue=[];for(const r of t)if(!r.cancelled&&(r.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Ca(t,r,n){if(t=new e.LngLat(t.lng,t.lat),r){const a=new e.LngLat(t.lng-360,t.lat),i=new e.LngLat(t.lng+360,t.lat),o=360*Math.ceil(Math.abs(t.lng-n.center.lng)/360),s=n.locationPoint(t).distSqr(r),l=r.x<0||r.y<0||r.x>n.width||r.y>n.height;n.locationPoint(a).distSqr(r)<s&&(l||Math.abs(a.lng-n.center.lng)<o)?t=a:n.locationPoint(i).distSqr(r)<s&&(l||Math.abs(i.lng-n.center.lng)<o)&&(t=i)}for(;Math.abs(t.lng-n.center.lng)>180;){const e=n.locationPoint(t);if(e.x>=0&&e.y>=0&&e.x<=n.width&&e.y<=n.height)break;t.lng>n.center.lng?t.lng-=360:t.lng+=360}return t}const ka={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ta(e,t,r){const n=e.classList;for(const e in ka)n.remove(`mapboxgl-${r}-anchor-${e}`);n.add(`mapboxgl-${r}-anchor-${t}`)}class Sa extends e.Evented{constructor(t,r){if(super(),(t instanceof e.window.HTMLElement||r)&&(t=e.extend({element:t},r)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&"auto"!==t.pitchAlignment?t.pitchAlignment:this._rotationAlignment,t&&t.element)this._element=t.element,this._offset=e.pointGeometry.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=i.create("div"),this._element.setAttribute("aria-label","Map marker");const r=i.createNS("http://www.w3.org/2000/svg","svg"),n=41,a=27;r.setAttributeNS(null,"display","block"),r.setAttributeNS(null,"height",`${n}px`),r.setAttributeNS(null,"width",`${a}px`),r.setAttributeNS(null,"viewBox",`0 0 ${a} ${n}`);const o=i.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"stroke","none"),o.setAttributeNS(null,"stroke-width","1"),o.setAttributeNS(null,"fill","none"),o.setAttributeNS(null,"fill-rule","evenodd");const s=i.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");const l=i.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const e of c){const t=i.createNS("http://www.w3.org/2000/svg","ellipse");t.setAttributeNS(null,"opacity","0.04"),t.setAttributeNS(null,"cx","10.5"),t.setAttributeNS(null,"cy","5.80029008"),t.setAttributeNS(null,"rx",e.rx),t.setAttributeNS(null,"ry",e.ry),l.appendChild(t)}const u=i.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill",this._color);const p=i.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),u.appendChild(p);const d=i.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"opacity","0.25"),d.setAttributeNS(null,"fill","#000000");const h=i.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),d.appendChild(h);const f=i.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(6.0, 7.0)"),f.setAttributeNS(null,"fill","#FFFFFF");const m=i.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");const g=i.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#000000"),g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962");const v=i.createNS("http://www.w3.org/2000/svg","circle");v.setAttributeNS(null,"fill","#FFFFFF"),v.setAttributeNS(null,"cx","5.5"),v.setAttributeNS(null,"cy","5.5"),v.setAttributeNS(null,"r","5.4999962"),m.appendChild(g),m.appendChild(v),s.appendChild(l),s.appendChild(u),s.appendChild(d),s.appendChild(f),s.appendChild(m),r.appendChild(s),r.setAttributeNS(null,"height",n*this._scale+"px"),r.setAttributeNS(null,"width",a*this._scale+"px"),this._element.appendChild(r),this._offset=e.pointGeometry.convert(t&&t.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(e=>{e.preventDefault()})),this._element.addEventListener("mousedown",(e=>{e.preventDefault()})),Ta(this._element,this._anchor,"marker"),this._popup=null}addTo(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("remove",this._clearFadeTimer),e._addMarker(this),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._map.off("remove",this._clearFadeTimer),this._map._removeMarker(this),delete this._map),this._clearFadeTimer(),i.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,r=13.5,n=Math.sqrt(Math.pow(r,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[n,-1*(t-r+n)],"bottom-right":[-n,-1*(t-r+n)],left:[r,-1*(t-r)],right:[-r,-1*(t-r)]}:this._offset}this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(e){const t=e.code,r=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==r&&13!==r||this.togglePopup()}_onMapClick(e){const t=e.originalEvent.target,r=this._element;this._popup&&(t===r||r.contains(t))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this}_evaluateOpacity(){const e=this._pos?this._pos.sub(this._transformedOffset()):null;if(!this._withinScreenBounds(e))return void this._clearFadeTimer();const t=this._map.unproject(e);let r=!1;if(this._map.getTerrain()){const e=this._map.getFreeCameraOptions();if(e.position){const n=e.position.toLngLat();r=n.distanceTo(t)<.9*n.distanceTo(this._lngLat)}}const n=(1-this._map._queryFogOpacity(t))*(r?.2:1);this._element.style.opacity=`${n}`,this._popup&&this._popup._setOpacity(`${n}`),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_withinScreenBounds(e){const t=this._map.transform;return!!e&&e.x>=0&&e.x<t.width&&e.y>=0&&e.y<t.height}_update(e){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Ca(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._transformedOffset());let t="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?t=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(t=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let r="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?r="rotateX(0deg)":"map"===this._pitchAlignment&&(r=`rotateX(${this._map.getPitch()}deg)`),e&&"moveend"!==e.type||(this._pos=this._pos.round()),this._map._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&i.setTransform(this._element,`${ka[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${r} ${t}`),!this._map.getTerrain()&&!this._map.getFog()||this._fadeTimer||(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}_transformedOffset(){if(!this._defaultMarker)return this._offset;const e=this._map.transform,t=this._offset.mult(this._scale);return"map"===this._rotationAlignment&&t._rotate(e.angle),"map"===this._pitchAlignment&&(t.y*=Math.cos(e._pitch)),t}getOffset(){return this._offset}setOffset(t){return this._offset=e.pointGeometry.convert(t),this._update(),this}_onMove(t){if(!this._isDragging){const e=this._clickTolerance||this._map._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=e}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}_addDragHandler(e){this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._transformedOffset()),this._pointerdownPos=e.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}class Pa{constructor(e){this.jumpTo(e)}getValue(t){if(t<=this._startTime)return this._start;if(t>=this._endTime)return this._end;const r=e.easeCubicInOut((t-this._startTime)/(this._endTime-this._startTime));return this._start*(1-r)+this._end*r}isEasing(e){return e>=this._startTime&&e<=this._endTime}jumpTo(e){this._startTime=-1/0,this._endTime=-1/0,this._start=e,this._end=e}easeTo(e,t,r){this._start=this.getValue(t),this._end=e,this._startTime=t,this._endTime=t+r}}const Ma={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},{HTMLImageElement:Ia,HTMLElement:Aa,ImageBitmap:Oa}=e.window,za={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function Ra(e){e.parentNode&&e.parentNode.removeChild(e)}const La={showCompass:!0,showZoom:!0,visualizePitch:!1};class Da{constructor(t,r,n=!1){this._clickTolerance=10,this.element=r,this.mouseRotate=new Wn({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,n&&(this.mousePitch=new Xn({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener(r,"mousedown",this.mousedown),i.addEventListener(r,"touchstart",this.touchstart,{passive:!1}),i.addEventListener(r,"touchmove",this.touchmove),i.addEventListener(r,"touchend",this.touchend),i.addEventListener(r,"touchcancel",this.reset)}down(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),i.disableDrag()}move(e,t){const r=this.map,n=this.mouseRotate.mousemoveWindow(e,t);if(n&&n.bearingDelta&&r.setBearing(r.getBearing()+n.bearingDelta),this.mousePitch){const n=this.mousePitch.mousemoveWindow(e,t);n&&n.pitchDelta&&r.setPitch(r.getPitch()+n.pitchDelta)}}off(){const e=this.element;i.removeEventListener(e,"mousedown",this.mousedown),i.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),i.removeEventListener(e,"touchmove",this.touchmove),i.removeEventListener(e,"touchend",this.touchend),i.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){i.enableDrag(),i.removeEventListener(e.window,"mousemove",this.mousemove),i.removeEventListener(e.window,"mouseup",this.mouseup)}mousedown(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),i.mousePos(this.element,t)),i.addEventListener(e.window,"mousemove",this.mousemove),i.addEventListener(e.window,"mouseup",this.mouseup)}mousemove(e){this.move(e,i.mousePos(this.element,e))}mouseup(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}touchstart(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=i.touchPos(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>e.preventDefault()},this._startPos))}touchmove(e){1!==e.targetTouches.length?this.reset():(this._lastPos=i.touchPos(this.element,e.targetTouches)[0],this.move({preventDefault:()=>e.preventDefault()},this._lastPos))}touchend(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Ba={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1};let $a,Fa=0,Na=!1;const Va={maxWidth:100,unit:"metric"};function ja(e,t,r){const n=r&&r.maxWidth||100,a=e._container.clientHeight/2,i=e.unproject([0,a]),o=e.unproject([n,a]),s=i.distanceTo(o);if(r&&"imperial"===r.unit){const r=3.2808*s;r>5280?Ua(t,n,r/5280,e._getUIString("ScaleControl.Miles"),e):Ua(t,n,r,e._getUIString("ScaleControl.Feet"),e)}else r&&"nautical"===r.unit?Ua(t,n,s/1852,e._getUIString("ScaleControl.NauticalMiles"),e):s>=1e3?Ua(t,n,s/1e3,e._getUIString("ScaleControl.Kilometers"),e):Ua(t,n,s,e._getUIString("ScaleControl.Meters"),e)}function Ua(e,t,r,n,a){const i=function(e){const t=Math.pow(10,`${Math.floor(e)}`.length-1);let r=e/t;return r=r>=10?10:r>=5?5:r>=3?3:r>=2?2:r>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(r),t*r}(r),o=i/r;a._requestDomTask((()=>{e.style.width=t*o+"px",e.innerHTML=`${i}&nbsp;${n}`}))}const qa={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ha=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ga(t){if(t){if("number"==typeof t){const r=Math.round(Math.sqrt(.5*Math.pow(t,2)));return{center:new e.pointGeometry(0,0),top:new e.pointGeometry(0,t),"top-left":new e.pointGeometry(r,r),"top-right":new e.pointGeometry(-r,r),bottom:new e.pointGeometry(0,-t),"bottom-left":new e.pointGeometry(r,-r),"bottom-right":new e.pointGeometry(-r,-r),left:new e.pointGeometry(t,0),right:new e.pointGeometry(-t,0)}}if(t instanceof e.pointGeometry||Array.isArray(t)){const r=e.pointGeometry.convert(t);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:e.pointGeometry.convert(t.center||[0,0]),top:e.pointGeometry.convert(t.top||[0,0]),"top-left":e.pointGeometry.convert(t["top-left"]||[0,0]),"top-right":e.pointGeometry.convert(t["top-right"]||[0,0]),bottom:e.pointGeometry.convert(t.bottom||[0,0]),"bottom-left":e.pointGeometry.convert(t["bottom-left"]||[0,0]),"bottom-right":e.pointGeometry.convert(t["bottom-right"]||[0,0]),left:e.pointGeometry.convert(t.left||[0,0]),right:e.pointGeometry.convert(t.right||[0,0])}}return Ga(new e.pointGeometry(0,0))}const Wa={version:e.version,supported:t,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:class extends _a{constructor(t){if(null!=(t=e.extend({},za,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new En(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),t),this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=t.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming,this._optimizeForTerrain=t.optimizeForTerrain,this._renderTaskQueue=new Ea,this._domRenderTaskQueue=new Ea,this._controls=[],this._markers=[],this._mapId=e.uniqueId(),this._locale=e.extend({},Ma,t.locale),this._clickTolerance=t.clickTolerance,this._averageElevationLastSampledAt=-1/0,this._averageElevation=new Pa(0),this._requestManager=new e.RequestManager(t.transformRequest,t.accessToken,t.testMode),this._silenceAuthErrors=!!t.testMode,"string"==typeof t.container){if(this._container=e.window.document.getElementById(t.container),!this._container)throw new Error(`Container '${t.container}' not found.`)}else{if(!(t.container instanceof Aa))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1),e.window.addEventListener("orientationchange",this._onWindowResize,!1),e.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1)),this.handlers=new ba(this,t),this._hash=t.hash&&new kn("string"==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),this._localFontFamily=t.localFontFamily,this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),t.attributionControl&&this.addControl(new xa({customAttribution:t.customAttribution})),this._logoControl=new wa,this.addControl(this._logoControl,t.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(t=>{this._update("style"===t.dataType),this.fire(new e.Event(`${t.dataType}data`,t))})),this.on("dataloading",(t=>{this.fire(new e.Event(`${t.dataType}dataloading`,t))}))}_getMapId(){return this._mapId}addControl(t,r){if(void 0===r&&(r=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const n=t.onAdd(this);this._controls.push(t);const a=this._controlPositions[r];return-1!==r.indexOf("bottom")?a.insertBefore(n,a.firstChild):a.appendChild(n),this}removeControl(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(t);return r>-1&&this._controls.splice(r,1),t.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(t){const r=this._containerDimensions(),n=r[0],a=r[1];this._resizeCanvas(n,a),this.transform.resize(n,a),this.painter.resize(n,a);const i=!this._moving;return i&&(this.stop(),this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t))),this.fire(new e.Event("resize",t)),i&&this.fire(new e.Event("moveend",t)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}setMinZoom(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e&&this.setPitch(e),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(e){if((e=null==e?85:e)>85)throw new Error("maxPitch must be less than or equal to 85");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this._update()}project(t){return this.transform.locationPoint3D(e.LngLat.convert(t))}unproject(t){return this.transform.pointLocation3D(e.pointGeometry.convert(t))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()}_createDelegatedListener(e,t,r){if("mouseenter"===e||"mouseover"===e){let n=!1;const a=a=>{const i=this.getLayer(t)?this.queryRenderedFeatures(a.point,{layers:[t]}):[];i.length?n||(n=!0,r.call(this,new Rn(e,this,a.originalEvent,{features:i}))):n=!1};return{layer:t,listener:r,delegates:{mousemove:a,mouseout:()=>{n=!1}}}}if("mouseleave"===e||"mouseout"===e){let n=!1;const a=a=>{(this.getLayer(t)?this.queryRenderedFeatures(a.point,{layers:[t]}):[]).length?n=!0:n&&(n=!1,r.call(this,new Rn(e,this,a.originalEvent)))},i=t=>{n&&(n=!1,r.call(this,new Rn(e,this,t.originalEvent)))};return{layer:t,listener:r,delegates:{mousemove:a,mouseout:i}}}{const n=e=>{const n=this.getLayer(t)?this.queryRenderedFeatures(e.point,{layers:[t]}):[];n.length&&(e.features=n,r.call(this,e),delete e.features)};return{layer:t,listener:r,delegates:{[e]:n}}}}on(e,t,r){if(void 0===r)return super.on(e,t);const n=this._createDelegatedListener(e,t,r);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(n);for(const e in n.delegates)this.on(e,n.delegates[e]);return this}once(e,t,r){if(void 0===r)return super.once(e,t);const n=this._createDelegatedListener(e,t,r);for(const e in n.delegates)this.once(e,n.delegates[e]);return this}off(e,t,r){return void 0===r?super.off(e,t):(this._delegatedListeners&&this._delegatedListeners[e]&&(n=>{const a=this._delegatedListeners[e];for(let e=0;e<a.length;e++){const n=a[e];if(n.layer===t&&n.listener===r){for(const e in n.delegates)this.off(e,n.delegates[e]);return a.splice(e,1),this}}})(),this)}queryRenderedFeatures(t,r){return this.style?(void 0!==r||void 0===t||t instanceof e.pointGeometry||Array.isArray(t)||(r=t,t=void 0),this.style.queryRenderedFeatures(t=t||[[0,0],[this.transform.width,this.transform.height]],r=r||{},this.transform)):[]}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}queryTerrainElevation(t,r){const n=this.transform.elevation;return n?(r=e.extend({},{exaggerated:!0},r),n.getAtPoint(e.MercatorCoordinate.fromLngLat(t),null,r.exaggerated)):null}setStyle(t,r){return!1!==(r=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},r)).diff&&r.localIdeographFontFamily===this._localIdeographFontFamily&&r.localFontFamily===this._localFontFamily&&this.style&&t?(this._diffStyle(t,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._localFontFamily=r.localFontFamily,this._updateStyle(t,r))}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error(`Missing UI string '${e}'`);return t}_updateStyle(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),delete this.style),e&&(this.style=new jt(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new jt(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(t,r){if("string"==typeof t){const n=this._requestManager.normalizeStyleURL(t),a=this._requestManager.transformRequest(n,e.ResourceType.Style);e.getJSON(a,((t,n)=>{t?this.fire(new e.ErrorEvent(t)):n&&this._updateDiff(n,r)}))}else"object"==typeof t&&this._updateDiff(t,r)}_updateDiff(t,r){try{this.style.setState(t)&&this._update(!0)}catch(n){e.warnOnce(`Unable to perform style diff: ${n.message||n.error||n}.  Rebuilding the style from scratch.`),this._updateStyle(t,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(t){const r=this.style&&this.style._getSourceCaches(t);if(0!==r.length)return r.every((e=>e.loaded()));this.fire(new e.ErrorEvent(new Error(`There is no source with ID '${t}'`)))}areTilesLoaded(){const e=this.style&&this.style._sourceCaches;for(const t in e){const r=e[t]._tiles;for(const e in r){const t=r[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}}return!0}addSourceType(e,t,r){return this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,r)}removeSource(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}getSource(e){return this.style.getSource(e)}addImage(t,r,{pixelRatio:n=1,sdf:a=!1,stretchX:i,stretchY:o,content:s}={}){if(this._lazyInitEmptyStyle(),r instanceof Ia||Oa&&r instanceof Oa){const{width:l,height:c,data:u}=e.exported.getImageData(r);this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},u),pixelRatio:n,stretchX:i,stretchY:o,content:s,sdf:a,version:0})}else{if(void 0===r.width||void 0===r.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:l,height:c,data:u}=r,p=r;this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},new Uint8Array(u)),pixelRatio:n,stretchX:i,stretchY:o,content:s,sdf:a,version:0,userImage:p}),p.onAdd&&p.onAdd(this,t)}}}updateImage(t,r){const n=this.style.getImage(t);if(!n)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const a=r instanceof Ia||Oa&&r instanceof Oa?e.exported.getImageData(r):r,{width:i,height:o,data:s}=a;return void 0===i||void 0===o?this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):i!==n.data.width||o!==n.data.height?this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(n.data.replace(s,!(r instanceof Ia||Oa&&r instanceof Oa)),void this.style.updateImage(t,n))}hasImage(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(t,r){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),((t,n)=>{r(t,n instanceof Ia?e.exported.getImageData(n):n)}))}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}setLayerZoomRange(e,t,r){return this.style.setLayerZoomRange(e,t,r),this._update(!0)}setFilter(e,t,r={}){return this.style.setFilter(e,t,r),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,r,n={}){return this.style.setPaintProperty(e,t,r,n),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,r,n={}){return this.style.setLayoutProperty(e,t,r,n),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setLight(e,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(e){return this._lazyInitEmptyStyle(),this.style.setTerrain(e),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(e){return this._lazyInitEmptyStyle(),this.style.setFog(e),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(t){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(e.LngLat.convert(t),this.transform):0}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}_containerDimensions(){let e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]}_detectMissingCSS(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=i.create("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();const t=this._canvasContainer=i.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const r=this._containerDimensions();this._resizeCanvas(r[0],r[1]);const n=this._controlContainer=i.create("div","mapboxgl-control-container",e),a=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((e=>{a[e]=i.create("div",`mapboxgl-ctrl-${e}`,n)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(t,r){const n=e.exported.devicePixelRatio||1;this._canvas.width=n*t,this._canvas.height=n*r,this._canvas.style.width=`${t}px`,this._canvas.style.height=`${r}px`}_addMarker(e){this._markers.push(e)}_removeMarker(e){const t=this._markers.indexOf(e);-1!==t&&this._markers.splice(t,1)}_setupPainter(){const r=e.extend({},t.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),n=this._canvas.getContext("webgl",r)||this._canvas.getContext("experimental-webgl",r);n?(e.storeAuthState(n,!0),this.painter=new hn(n,this.transform),this.on("data",(e=>{"source"===e.dataType&&this.painter.setTileLoadedFlag(!0)})),e.exported$1.testSupport(n)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))}_contextRestored(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))}_onMapScroll(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_requestDomTask(e){!this.isMoving()&&this.loaded()?e():this._domRenderTaskQueue.add(e)}_render(t){let r;const n=this.painter.context.extTimerQuery,a=e.exported.now();this.listens("gpu-timing-frame")&&(r=n.createQueryEXT(),n.beginQueryEXT(n.TIME_ELAPSED_EXT,r));let i=this._updateAverageElevation(a);if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(t),this._domRenderTaskQueue.run(t),this._removed)return;let o=!1;const s=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const t=this.transform.zoom,r=e.exported.now();this.style.zoomHistory.update(t,r);const n=new e.EvaluationParameters(t,{now:r,fadeDuration:s,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),a=n.crossFadingFactor();1===a&&a===this._crossFadingFactor||(o=!0,this._crossFadingFactor=a),this.style.update(n)}if(this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const t=e.exported.now()-a;n.endQueryEXT(n.TIME_ELAPSED_EXT,r),setTimeout((()=>{const a=n.getQueryObjectEXT(r,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(r),this.fire(new e.Event("gpu-timing-frame",{cpuTime:t,gpuTime:a}))}),50)}if(this.listens("gpu-timing-layer")){const t=this.painter.collectGpuTimers();setTimeout((()=>{const r=this.painter.queryGpuTimers(t);this.fire(new e.Event("gpu-timing-layer",{layerTimes:r}))}),50)}const l=this._sourcesDirty||this._styleDirty||this._placementDirty||i;if(l||this._repaint)this.triggerRepaint();else{const t=!this.isMoving()&&this.loaded();if(t&&(i=this._updateAverageElevation(a,!0)),i)this.triggerRepaint();else if(this._triggerFrame(!1),t&&(this.fire(new e.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const t=this._calculateSpeedIndex();this.fire(new e.Event("speedindexcompleted",{speedIndex:t})),this.speedIndexTiming=!1}}return!this._loaded||this._fullyLoaded||l||(this._fullyLoaded=!0,this._authenticate()),this}_updateAverageElevation(e,t=!1){const r=e=>(this.transform.averageElevation=e,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&r(0);if((t||e-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(e)){const t=this.transform.averageElevation;let n=this.transform.sampleAverageElevation();isNaN(n)?n=0:this._averageElevationLastSampledAt=e;const a=Math.abs(t-n);if(a>1){if(this._isInitialLoad)return this._averageElevation.jumpTo(n),r(n);this._averageElevation.easeTo(n,e,300)}else if(a>1e-4)return this._averageElevation.jumpTo(n),r(n)}return!!this._averageElevation.isEasing(e)&&r(this._averageElevation.getValue(e))}_authenticate(){e.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(t=>{if(t&&(t.message===e.AUTH_ERR_MSG||401===t.status)){const t=this.painter.context.gl;e.storeAuthState(t,!1),this._logoControl instanceof wa&&this._logoControl._updateLogo(),t&&t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT|t.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new e.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),e.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());const r=this.painter.context.gl,n=r.createFramebuffer();function a(e){r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0);const t=new Uint8Array(r.drawingBufferWidth*r.drawingBufferHeight*4);return r.readPixels(0,0,r.drawingBufferWidth,r.drawingBufferHeight,r.RGBA,r.UNSIGNED_BYTE,t),t}return r.bindFramebuffer(r.FRAMEBUFFER,n),this._canvasPixelComparison(a(e),t.canvasCopies.map(a),t.timeStamps)}_canvasPixelComparison(e,t,r){let n=r[1]-r[0];const a=e.length/4;for(let i=0;i<t.length;i++){const o=t[i];let s=0;for(let t=0;t<o.length;t+=4)o[t]===e[t]&&o[t+1]===e[t+1]&&o[t+2]===e[t+2]&&o[t+3]===e[t+3]&&(s+=1);n+=(r[i+2]-r[i+1])*(1-s/a)}return n}remove(){this._hash&&this._hash.remove();for(const e of this._controls)e.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),Ra(this._canvasContainer),Ra(this._controlContainer),Ra(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),e.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new e.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(t){this._renderNextFrame=this._renderNextFrame||t,this.style&&!this._frame&&(this._frame=e.exported.frame((e=>{const t=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,t&&this._render(e)})))}_onWindowOnline(){this._update()}_onWindowResize(e){this._trackResize&&this.resize({originalEvent:e})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(e){this._showTerrainWireframe!==e&&(this._showTerrainWireframe=e,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}_setCacheLimits(t,r){e.setCacheLimits(t,r)}get version(){return e.version}},NavigationControl:class{constructor(t){this.options=e.extend({},La,t),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(e=>this._map.zoomIn({},{originalEvent:e}))),i.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(e=>this._map.zoomOut({},{originalEvent:e}))),i.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})})),this._compassIcon=i.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))}_updateZoomButtons(){const e=this._map.getZoom(),t=e===this._map.getMaxZoom(),r=e===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=r,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",r.toString())}_rotateCompassArrow(){const e=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._map._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=e)}))}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Da(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){i.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(e,t){const r=i.create("button",e,this._container);return r.type="button",r.addEventListener("click",t),r}_setButtonTitle(e,t){const r=this._map._getUIString(`NavigationControl.${t}`);e.title=r,e.setAttribute("aria-label",r)}},GeolocateControl:class extends e.Evented{constructor(t){super(),this.options=e.extend({},Ba,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation"],this),this._onDeviceOrientationListener=this._onDeviceOrientation.bind(this),this._updateMarkerRotationThrottled=Cn(this._updateMarkerRotation,20)}onAdd(t){var r;return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),r=this._setupUI,void 0!==$a?r($a):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then((e=>{$a="denied"!==e.state,r($a)})):($a=!!e.window.navigator.geolocation,r($a)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),i.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Fa=0,Na=!1}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),r=e.coords;return t&&(r.longitude<t.getWest()||r.longitude>t.getEast()||r.latitude<t.getSouth()||r.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}}_updateCamera(t){const r=new e.LngLat(t.coords.longitude,t.coords.latitude),n=t.coords.accuracy,a=this._map.getBearing(),i=e.extend({bearing:a},this.options.fitBoundsOptions);this._map.fitBounds(r.toBounds(n),i,{geolocateSource:!0})}_updateMarker(t){if(t){const r=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(r).addTo(this._map),this._userLocationDotMarker.setLngLat(r).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const e=this._map._container.clientHeight/2,t=this._map.unproject([0,e]),r=this._map.unproject([100,e]),n=t.distanceTo(r)/100,a=Math.ceil(2*this._accuracy/n);this._circleElement.style.width=`${a}px`,this._circleElement.style.height=`${a}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&Na)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(t){if(this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this._geolocateButton=i.create("button","mapboxgl-ctrl-geolocate",this._container),i.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location"),this._dotElement.appendChild(i.create("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(i.create("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Sa({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=i.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Sa({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(t=>{t.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new e.Event("trackuserlocationend")))}))}_onDeviceOrientation(e){this._userLocationDotMarker&&(e.webkitCompassHeading?this._heading=e.webkitCompassHeading:!0===e.absolute&&(this._heading=-1*e.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Fa--,Na=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Fa++,Fa>1?(t={maximumAge:6e5,timeout:0},Na=!0):(t=this.options.positionOptions,Na=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const t=()=>{e.window.addEventListener("ondeviceorientationabsolute"in e.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientationListener)};void 0!==e.window.DeviceMotionEvent&&"function"==typeof e.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((e=>{"granted"===e&&t()})).catch(console.error):t()}_clearWatch(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),e.window.removeEventListener("deviceorientation",this._onDeviceOrientationListener),e.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientationListener),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:xa,ScaleControl:class{constructor(t){this.options=e.extend({},Va,t),e.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){ja(this._map,this._container,this.options)}onAdd(e){return this._map=e,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(e){this.options.unit=e,ja(this._map,this._container,this.options)}},FullscreenControl:class{constructor(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof e.window.HTMLElement?this._container=t.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in e.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){i.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!e.window.document.fullscreenEnabled&&!e.window.document.webkitFullscreenEnabled)}_setupUI(){const t=this._fullscreenButton=i.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);i.create("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden",!0),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(e.window.document.fullscreenElement||e.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends e.Evented{constructor(t){super(),this.options=e.extend(Object.create(qa),t),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(t){return this.setDOMContent(e.window.document.createTextNode(t))}setHTML(t){const r=e.window.document.createDocumentFragment(),n=e.window.document.createElement("body");let a;for(n.innerHTML=t;a=n.firstChild,a;)r.appendChild(a);return this.setDOMContent(r)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=i.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(e),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(e){this._container&&this._container.classList.add(e)}removeClassName(e){this._container&&this._container.classList.remove(e)}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){if(this._container)return this._container.classList.toggle(e)}_createCloseButton(){this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(e){this._update(e.point)}_onMouseMove(e){this._update(e.point)}_onDrag(e){this._update(e.point)}_update(e){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((e=>this._container.classList.add(e))),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ca(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!e)return;const t=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);let r=this.options.anchor;const n=Ga(this.options.offset);if(!r){const e=this._container.offsetWidth,a=this._container.offsetHeight;let i;i=t.y+n.bottom.y<a?["top"]:t.y>this._map.transform.height-a?["bottom"]:[],t.x<e/2?i.push("left"):t.x>this._map.transform.width-e/2&&i.push("right"),r=0===i.length?"bottom":i.join("-")}const a=t.add(n[r]).round();this._map._requestDomTask((()=>{this._container&&r&&(i.setTransform(this._container,`${ka[r]} translate(${a.x}px,${a.y}px)`),Ta(this._container,r,"popup"))}))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(Ha);e&&e.focus()}_onClose(){this.remove()}_setOpacity(e){this._content&&(this._content.style.opacity=e),this._tip&&(this._tip.style.opacity=e)}},Marker:Sa,Style:jt,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.pointGeometry,MercatorCoordinate:e.MercatorCoordinate,FreeCameraOptions:xn,Evented:e.Evented,config:e.config,prewarm:function(){Le().acquire(Oe)},clearPrewarmedResources:function(){const e=Re;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(Oe),Re=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return ze.workerCount},set workerCount(e){ze.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage(t){e.clearTileCache(t)},workerUrl:"",workerClass:null,setNow:e.exported.setNow,restoreNow:e.exported.restoreNow};return Wa})),r}()},7899:function(e,t,r){"use strict";r.r(t)},7824:function(e){var t=1e3,r=60*t,n=60*r,a=24*n,i=7*a,o=365.25*a;function s(e,t,r,n){var a=t>=1.5*r;return Math.round(e/r)+" "+n+(a?"s":"")}e.exports=function(e,l){l=l||{};var c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!s)return;var l=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*o;case"weeks":case"week":case"w":return l*i;case"days":case"day":case"d":return l*a;case"hours":case"hour":case"hrs":case"hr":case"h":return l*n;case"minutes":case"minute":case"mins":case"min":case"m":return l*r;case"seconds":case"second":case"secs":case"sec":case"s":return l*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}(e);if("number"===c&&isFinite(e))return l.long?function(e){var i=Math.abs(e);if(i>=a)return s(e,i,a,"day");if(i>=n)return s(e,i,n,"hour");if(i>=r)return s(e,i,r,"minute");if(i>=t)return s(e,i,t,"second");return e+" ms"}(e):function(e){var i=Math.abs(e);if(i>=a)return Math.round(e/a)+"d";if(i>=n)return Math.round(e/n)+"h";if(i>=r)return Math.round(e/r)+"m";if(i>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},7418:function(e){"use strict";var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,i){for(var o,s,l=a(e),c=1;c<arguments.length;c++){for(var u in o=Object(arguments[c]))r.call(o,u)&&(l[u]=o[u]);if(t){s=t(o);for(var p=0;p<s.length;p++)n.call(o,s[p])&&(l[s[p]]=o[s[p]])}}return l}},1830:function(e,t){t.encode=function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t},t.decode=function(e){for(var t={},r=e.split("&"),n=0,a=r.length;n<a;n++){var i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},4187:function(e){var t=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var n=e,a=e.indexOf("["),i=e.indexOf("]");-1!=a&&-1!=i&&(e=e.substring(0,a)+e.substring(a,i).replace(/:/g,";")+e.substring(i,e.length));for(var o,s,l=t.exec(e||""),c={},u=14;u--;)c[r[u]]=l[u]||"";return-1!=a&&-1!=i&&(c.source=n,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=function(e,t){var r=/\/{2,9}/g,n=t.replace(r,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||n.splice(0,1);"/"==t.substr(t.length-1,1)&&n.splice(n.length-1,1);return n}(0,c.path),c.queryKey=(o=c.query,s={},o.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(s[t]=r)})),s),c}},1040:function(e){"use strict";function t(e,t,r,n,a){}t.resetWarningCache=function(){0},e.exports=t},7425:function(e,t,r){"use strict";var n=r(1805);e.exports=function(e){return n(e,!1)}},2703:function(e,t,r){"use strict";var n=r(414);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,r,a,i,o){if(o!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return r.PropTypes=r,r}},1805:function(e,t,r){"use strict";var n=r(9864),a=r(7418),i=r(414),o=r(1040),s=Function.call.bind(Object.prototype.hasOwnProperty);function l(){return null}e.exports=function(e,t){var r="function"==typeof Symbol&&Symbol.iterator;var c="<<anonymous>>",u={array:f("array"),bool:f("boolean"),func:f("function"),number:f("number"),object:f("object"),string:f("string"),symbol:f("symbol"),any:h(l),arrayOf:function(e){return h((function(t,r,n,a,o){if("function"!=typeof e)return new d("Property `"+o+"` of component `"+n+"` has invalid PropType notation inside arrayOf.");var s=t[r];if(!Array.isArray(s))return new d("Invalid "+a+" `"+o+"` of type `"+g(s)+"` supplied to `"+n+"`, expected an array.");for(var l=0;l<s.length;l++){var c=e(s,l,n,a,o+"["+l+"]",i);if(c instanceof Error)return c}return null}))},element:h((function(t,r,n,a,i){var o=t[r];return e(o)?null:new d("Invalid "+a+" `"+i+"` of type `"+g(o)+"` supplied to `"+n+"`, expected a single ReactElement.")})),elementType:h((function(e,t,r,a,i){var o=e[t];return n.isValidElementType(o)?null:new d("Invalid "+a+" `"+i+"` of type `"+g(o)+"` supplied to `"+r+"`, expected a single ReactElement type.")})),instanceOf:function(e){return h((function(t,r,n,a,i){if(!(t[r]instanceof e)){var o=e.name||c;return new d("Invalid "+a+" `"+i+"` of type `"+(((s=t[r]).constructor&&s.constructor.name?s.constructor.name:c)+"` supplied to `")+n+"`, expected instance of `"+o+"`.")}var s;return null}))},node:h((function(e,t,r,n,a){return m(e[t])?null:new d("Invalid "+n+" `"+a+"` supplied to `"+r+"`, expected a ReactNode.")})),objectOf:function(e){return h((function(t,r,n,a,o){if("function"!=typeof e)return new d("Property `"+o+"` of component `"+n+"` has invalid PropType notation inside objectOf.");var l=t[r],c=g(l);if("object"!==c)return new d("Invalid "+a+" `"+o+"` of type `"+c+"` supplied to `"+n+"`, expected an object.");for(var u in l)if(s(l,u)){var p=e(l,u,n,a,o+"."+u,i);if(p instanceof Error)return p}return null}))},oneOf:function(e){if(!Array.isArray(e))return l;return h((function(t,r,n,a,i){for(var o=t[r],s=0;s<e.length;s++)if(p(o,e[s]))return null;var l=JSON.stringify(e,(function(e,t){return"symbol"===v(t)?String(t):t}));return new d("Invalid "+a+" `"+i+"` of value `"+String(o)+"` supplied to `"+n+"`, expected one of "+l+".")}))},oneOfType:function(e){if(!Array.isArray(e))return l;for(var t=0;t<e.length;t++){var r=e[t];if("function"!=typeof r)return y(r),l}return h((function(t,r,n,a,o){for(var s=0;s<e.length;s++)if(null==(0,e[s])(t,r,n,a,o,i))return null;return new d("Invalid "+a+" `"+o+"` supplied to `"+n+"`.")}))},shape:function(e){return h((function(t,r,n,a,o){var s=t[r],l=g(s);if("object"!==l)return new d("Invalid "+a+" `"+o+"` of type `"+l+"` supplied to `"+n+"`, expected `object`.");for(var c in e){var u=e[c];if(u){var p=u(s,c,n,a,o+"."+c,i);if(p)return p}}return null}))},exact:function(e){return h((function(t,r,n,o,s){var l=t[r],c=g(l);if("object"!==c)return new d("Invalid "+o+" `"+s+"` of type `"+c+"` supplied to `"+n+"`, expected `object`.");var u=a({},t[r],e);for(var p in u){var h=e[p];if(!h)return new d("Invalid "+o+" `"+s+"` key `"+p+"` supplied to `"+n+"`.\nBad object: "+JSON.stringify(t[r],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var f=h(l,p,n,o,s+"."+p,i);if(f)return f}return null}))}};function p(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function d(e){this.message=e,this.stack=""}function h(e){function r(r,n,a,o,s,l,u){if((o=o||c,l=l||a,u!==i)&&t){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}return null==n[a]?r?null===n[a]?new d("The "+s+" `"+l+"` is marked as required in `"+o+"`, but its value is `null`."):new d("The "+s+" `"+l+"` is marked as required in `"+o+"`, but its value is `undefined`."):null:e(n,a,o,s,l)}var n=r.bind(null,!1);return n.isRequired=r.bind(null,!0),n}function f(e){return h((function(t,r,n,a,i,o){var s=t[r];return g(s)!==e?new d("Invalid "+a+" `"+i+"` of type `"+v(s)+"` supplied to `"+n+"`, expected `"+e+"`."):null}))}function m(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(m);if(null===t||e(t))return!0;var n=function(e){var t=e&&(r&&e[r]||e["@@iterator"]);if("function"==typeof t)return t}(t);if(!n)return!1;var a,i=n.call(t);if(n!==t.entries){for(;!(a=i.next()).done;)if(!m(a.value))return!1}else for(;!(a=i.next()).done;){var o=a.value;if(o&&!m(o[1]))return!1}return!0;default:return!1}}function g(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function v(e){if(null==e)return""+e;var t=g(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function y(e){var t=v(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return d.prototype=Error.prototype,u.checkPropTypes=o,u.resetWarningCache=o.resetWarningCache,u.PropTypes=u,u}},5697:function(e,t,r){e.exports=r(2703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4448:function(e,t,r){"use strict";var n=r(7294),a=r(7418),i=r(3840);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!n)throw Error(o(227));var s=new Set,l={};function c(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(l[e]=t,e=0;e<t.length;e++)s.add(t[e])}var p=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h=Object.prototype.hasOwnProperty,f={},m={};function g(e,t,r,n,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function _(e,t,r,n){var a=v.hasOwnProperty(t)?v[t]:null;(null!==a?0===a.type:!n&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,r,n){if(null==t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,a,n)&&(r=null),n||null===a?function(e){return!!h.call(m,e)||!h.call(f,e)&&(d.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=null===r?3!==a.type&&"":r:(t=a.attributeName,n=a.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(a=a.type)||4===a&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);v[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);v[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);v[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,E=60106,C=60107,k=60108,T=60114,S=60109,P=60110,M=60112,I=60113,A=60120,O=60115,z=60116,R=60121,L=60128,D=60129,B=60130,$=60131;if("function"==typeof Symbol&&Symbol.for){var F=Symbol.for;w=F("react.element"),E=F("react.portal"),C=F("react.fragment"),k=F("react.strict_mode"),T=F("react.profiler"),S=F("react.provider"),P=F("react.context"),M=F("react.forward_ref"),I=F("react.suspense"),A=F("react.suspense_list"),O=F("react.memo"),z=F("react.lazy"),R=F("react.block"),F("react.scope"),L=F("react.opaque.id"),D=F("react.debug_trace_mode"),B=F("react.offscreen"),$=F("react.legacy_hidden")}var N,V="function"==typeof Symbol&&Symbol.iterator;function j(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=V&&e[V]||e["@@iterator"])?e:null}function U(e){if(void 0===N)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||""}return"\n"+N+e}var q=!1;function H(e,t){if(!e||q)return"";q=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var n=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){n=e}e.call(t.prototype)}else{try{throw Error()}catch(e){n=e}e()}}catch(e){if(e&&n&&"string"==typeof e.stack){for(var a=e.stack.split("\n"),i=n.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s])return"\n"+a[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{q=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?U(e):""}function G(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=H(e.type,!1);case 11:return e=H(e.type.render,!1);case 22:return e=H(e.type._render,!1);case 1:return e=H(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case C:return"Fragment";case E:return"Portal";case T:return"Profiler";case k:return"StrictMode";case I:return"Suspense";case A:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case P:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case M:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case O:return W(e.type);case R:return W(e._render);case z:t=e._payload,e=e._init;try{return W(e(t))}catch(e){}}return null}function X(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Z(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=Z(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Z(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function Q(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var r=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function ee(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=X(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function re(e,t){te(e,t);var r=X(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ae(e,t.type,r):t.hasOwnProperty("defaultValue")&&ae(e,t.type,X(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ne(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ae(e,t,r){"number"===t&&Q(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function ie(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return n.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+X(r),t=null,a=0;a<e.length;a++){if(e[a].value===r)return e[a].selected=!0,void(n&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(o(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(o(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:X(r)}}function ce(e,t){var r=X(t.value),n=X(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function ue(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var pe="http://www.w3.org/1999/xhtml",de="http://www.w3.org/2000/svg";function he(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?he(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var me,ge,ve=(ge=function(e,t){if(e.namespaceURI!==de||"innerHTML"in e)e.innerHTML=t;else{for((me=me||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=me.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction((function(){return ge(e,t)}))}:ge);function ye(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var be={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_e=["Webkit","ms","Moz","O"];function xe(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||be.hasOwnProperty(e)&&be[e]?(""+t).trim():t+"px"}function we(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),a=xe(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}Object.keys(be).forEach((function(e){_e.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),be[t]=be[e]}))}));var Ee=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ce(e,t){if(t){if(Ee[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(o(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Pe=null,Me=null;function Ie(e){if(e=ea(e)){if("function"!=typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=ra(t),Se(e.stateNode,e.type,t))}}function Ae(e){Pe?Me?Me.push(e):Me=[e]:Pe=e}function Oe(){if(Pe){var e=Pe,t=Me;if(Me=Pe=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function ze(e,t){return e(t)}function Re(e,t,r,n,a){return e(t,r,n,a)}function Le(){}var De=ze,Be=!1,$e=!1;function Fe(){null===Pe&&null===Me||(Le(),Oe())}function Ne(e,t){var r=e.stateNode;if(null===r)return null;var n=ra(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(o(231,t,typeof r));return r}var Ve=!1;if(p)try{var je={};Object.defineProperty(je,"passive",{get:function(){Ve=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(ge){Ve=!1}function Ue(e,t,r,n,a,i,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(e){this.onError(e)}}var qe=!1,He=null,Ge=!1,We=null,Xe={onError:function(e){qe=!0,He=e}};function Ze(e,t,r,n,a,i,o,s,l){qe=!1,He=null,Ue.apply(Xe,arguments)}function Ye(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Ke(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Qe(e){if(Ye(e)!==e)throw Error(o(188))}function Je(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(o(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(n=a.return)){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return Qe(a),e;if(i===n)return Qe(a),t;i=i.sibling}throw Error(o(188))}if(r.return!==n.return)r=a,n=i;else{for(var s=!1,l=a.child;l;){if(l===r){s=!0,r=a,n=i;break}if(l===n){s=!0,n=a,r=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===r){s=!0,r=i,n=a;break}if(l===n){s=!0,n=i,r=a;break}l=l.sibling}if(!s)throw Error(o(189))}}if(r.alternate!==n)throw Error(o(190))}if(3!==r.tag)throw Error(o(188));return r.stateNode.current===r?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var r=e.alternate;null!==t;){if(t===e||t===r)return!0;t=t.return}return!1}var tt,rt,nt,at,it=!1,ot=[],st=null,lt=null,ct=null,ut=new Map,pt=new Map,dt=[],ht="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ft(e,t,r,n,a){return{blockedOn:e,domEventName:t,eventSystemFlags:16|r,nativeEvent:a,targetContainers:[n]}}function mt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":lt=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":ut.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":pt.delete(t.pointerId)}}function gt(e,t,r,n,a,i){return null===e||e.nativeEvent!==i?(e=ft(t,r,n,a,i),null!==t&&(null!==(t=ea(t))&&rt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function vt(e){var t=Jn(e.target);if(null!==t){var r=Ye(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Ke(r)))return e.blockedOn=t,void at(e.lanePriority,(function(){i.unstable_runWithPriority(e.priority,(function(){nt(r)}))}))}else if(3===t&&r.stateNode.hydrate)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=ea(r))&&rt(t),e.blockedOn=r,!1;t.shift()}return!0}function bt(e,t,r){yt(e)&&r.delete(t)}function _t(){for(it=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ea(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var r=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r){e.blockedOn=r;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==st&&yt(st)&&(st=null),null!==lt&&yt(lt)&&(lt=null),null!==ct&&yt(ct)&&(ct=null),ut.forEach(bt),pt.forEach(bt)}function xt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,_t)))}function wt(e){function t(t){return xt(t,e)}if(0<ot.length){xt(ot[0],e);for(var r=1;r<ot.length;r++){var n=ot[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==st&&xt(st,e),null!==lt&&xt(lt,e),null!==ct&&xt(ct,e),ut.forEach(t),pt.forEach(t),r=0;r<dt.length;r++)(n=dt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<dt.length&&null===(r=dt[0]).blockedOn;)vt(r),null===r.blockedOn&&dt.shift()}function Et(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ct={animationend:Et("Animation","AnimationEnd"),animationiteration:Et("Animation","AnimationIteration"),animationstart:Et("Animation","AnimationStart"),transitionend:Et("Transition","TransitionEnd")},kt={},Tt={};function St(e){if(kt[e])return kt[e];if(!Ct[e])return e;var t,r=Ct[e];for(t in r)if(r.hasOwnProperty(t)&&t in Tt)return kt[e]=r[t];return e}p&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete Ct.animationend.animation,delete Ct.animationiteration.animation,delete Ct.animationstart.animation),"TransitionEvent"in window||delete Ct.transitionend.transition);var Pt=St("animationend"),Mt=St("animationiteration"),It=St("animationstart"),At=St("transitionend"),Ot=new Map,zt=new Map,Rt=["abort","abort",Pt,"animationEnd",Mt,"animationIteration",It,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",At,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var r=0;r<e.length;r+=2){var n=e[r],a=e[r+1];a="on"+(a[0].toUpperCase()+a.slice(1)),zt.set(n,t),Ot.set(n,a),c(a,[n])}}(0,i.unstable_now)();var Dt=8;function Bt(e){if(0!=(1&e))return Dt=15,1;if(0!=(2&e))return Dt=14,2;if(0!=(4&e))return Dt=13,4;var t=24&e;return 0!==t?(Dt=12,t):0!=(32&e)?(Dt=11,32):0!==(t=192&e)?(Dt=10,t):0!=(256&e)?(Dt=9,256):0!==(t=3584&e)?(Dt=8,t):0!=(4096&e)?(Dt=7,4096):0!==(t=4186112&e)?(Dt=6,t):0!==(t=62914560&e)?(Dt=5,t):67108864&e?(Dt=4,67108864):0!=(134217728&e)?(Dt=3,134217728):0!==(t=805306368&e)?(Dt=2,t):0!=(1073741824&e)?(Dt=1,1073741824):(Dt=8,e)}function $t(e,t){var r=e.pendingLanes;if(0===r)return Dt=0;var n=0,a=0,i=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==i)n=i,a=Dt=15;else if(0!==(i=134217727&r)){var l=i&~o;0!==l?(n=Bt(l),a=Dt):0!==(s&=i)&&(n=Bt(s),a=Dt)}else 0!==(i=r&~o)?(n=Bt(i),a=Dt):0!==s&&(n=Bt(s),a=Dt);if(0===n)return 0;if(n=r&((0>(n=31-qt(n))?0:1<<n)<<1)-1,0!==t&&t!==n&&0==(t&o)){if(Bt(t),a<=Dt)return t;Dt=a}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)a=1<<(r=31-qt(t)),n|=e[r],t&=~a;return n}function Ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Nt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Vt(24&~t))?Nt(10,t):e;case 10:return 0===(e=Vt(192&~t))?Nt(8,t):e;case 8:return 0===(e=Vt(3584&~t))&&(0===(e=Vt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Vt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Vt(e){return e&-e}function jt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ut(e,t,r){e.pendingLanes|=t;var n=t-1;e.suspendedLanes&=n,e.pingedLanes&=n,(e=e.eventTimes)[t=31-qt(t)]=r}var qt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Ht(e)/Gt|0)|0},Ht=Math.log,Gt=Math.LN2;var Wt=i.unstable_UserBlockingPriority,Xt=i.unstable_runWithPriority,Zt=!0;function Yt(e,t,r,n){Be||Le();var a=Qt,i=Be;Be=!0;try{Re(a,e,t,r,n)}finally{(Be=i)||Fe()}}function Kt(e,t,r,n){Xt(Wt,Qt.bind(null,e,t,r,n))}function Qt(e,t,r,n){var a;if(Zt)if((a=0==(4&t))&&0<ot.length&&-1<ht.indexOf(e))e=ft(null,e,t,r,n),ot.push(e);else{var i=Jt(e,t,r,n);if(null===i)a&&mt(e,n);else{if(a){if(-1<ht.indexOf(e))return e=ft(i,e,t,r,n),void ot.push(e);if(function(e,t,r,n,a){switch(t){case"focusin":return st=gt(st,e,t,r,n,a),!0;case"dragenter":return lt=gt(lt,e,t,r,n,a),!0;case"mouseover":return ct=gt(ct,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return ut.set(i,gt(ut.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,pt.set(i,gt(pt.get(i)||null,e,t,r,n,a)),!0}return!1}(i,e,t,r,n))return;mt(e,n)}On(e,t,n,null,r)}}}function Jt(e,t,r,n){var a=Te(n);if(null!==(a=Jn(a))){var i=Ye(a);if(null===i)a=null;else{var o=i.tag;if(13===o){if(null!==(a=Ke(i)))return a;a=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;a=null}else i!==a&&(a=null)}}return On(e,t,n,a,r),null}var er=null,tr=null,rr=null;function nr(){if(rr)return rr;var e,t,r=tr,n=r.length,a="value"in er?er.value:er.textContent,i=a.length;for(e=0;e<n&&r[e]===a[e];e++);var o=n-e;for(t=1;t<=o&&r[n-t]===a[i-t];t++);return rr=a.slice(e,1<t?1-t:void 0)}function ar(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ir(){return!0}function or(){return!1}function sr(e){function t(t,r,n,a,i){for(var o in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?ir:or,this.isPropagationStopped=or,this}return a(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ir)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ir)},persist:function(){},isPersistent:ir}),t}var lr,cr,ur,pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dr=sr(pr),hr=a({},pr,{view:0,detail:0}),fr=sr(hr),mr=a({},hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ur&&(ur&&"mousemove"===e.type?(lr=e.screenX-ur.screenX,cr=e.screenY-ur.screenY):cr=lr=0,ur=e),lr)},movementY:function(e){return"movementY"in e?e.movementY:cr}}),gr=sr(mr),vr=sr(a({},mr,{dataTransfer:0})),yr=sr(a({},hr,{relatedTarget:0})),br=sr(a({},pr,{animationName:0,elapsedTime:0,pseudoElement:0})),_r=sr(a({},pr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),xr=sr(a({},pr,{data:0})),wr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Er={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cr[e])&&!!t[e]}function Tr(){return kr}var Sr=sr(a({},hr,{key:function(e){if(e.key){var t=wr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ar(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Er[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tr,charCode:function(e){return"keypress"===e.type?ar(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ar(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Pr=sr(a({},mr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mr=sr(a({},hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tr})),Ir=sr(a({},pr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ar=sr(a({},mr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Or=[9,13,27,32],zr=p&&"CompositionEvent"in window,Rr=null;p&&"documentMode"in document&&(Rr=document.documentMode);var Lr=p&&"TextEvent"in window&&!Rr,Dr=p&&(!zr||Rr&&8<Rr&&11>=Rr),Br=String.fromCharCode(32),$r=!1;function Fr(e,t){switch(e){case"keyup":return-1!==Or.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Vr=!1;var jr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ur(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jr[e.type]:"textarea"===t}function qr(e,t,r,n){Ae(n),0<(t=Rn(t,"onChange")).length&&(r=new dr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Hr=null,Gr=null;function Wr(e){Tn(e,0)}function Xr(e){if(K(ta(e)))return e}function Zr(e,t){if("change"===e)return t}var Yr=!1;if(p){var Kr;if(p){var Qr="oninput"in document;if(!Qr){var Jr=document.createElement("div");Jr.setAttribute("oninput","return;"),Qr="function"==typeof Jr.oninput}Kr=Qr}else Kr=!1;Yr=Kr&&(!document.documentMode||9<document.documentMode)}function en(){Hr&&(Hr.detachEvent("onpropertychange",tn),Gr=Hr=null)}function tn(e){if("value"===e.propertyName&&Xr(Gr)){var t=[];if(qr(t,Gr,e,Te(e)),e=Wr,Be)e(t);else{Be=!0;try{ze(e,t)}finally{Be=!1,Fe()}}}}function rn(e,t,r){"focusin"===e?(en(),Gr=r,(Hr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xr(Gr)}function an(e,t){if("click"===e)return Xr(t)}function on(e,t){if("input"===e||"change"===e)return Xr(t)}var sn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},ln=Object.prototype.hasOwnProperty;function cn(e,t){if(sn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!ln.call(t,r[n])||!sn(e[r[n]],t[r[n]]))return!1;return!0}function un(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pn(e,t){var r,n=un(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=un(n)}}function dn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hn(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(e){r=!1}if(!r)break;t=Q((e=t.contentWindow).document)}return t}function fn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var mn=p&&"documentMode"in document&&11>=document.documentMode,gn=null,vn=null,yn=null,bn=!1;function _n(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;bn||null==gn||gn!==Q(n)||("selectionStart"in(n=gn)&&fn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},yn&&cn(yn,n)||(yn=n,0<(n=Rn(vn,"onSelect")).length&&(t=new dr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=gn)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Rt,2);for(var xn="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),wn=0;wn<xn.length;wn++)zt.set(xn[wn],0);u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var En="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cn=new Set("cancel close invalid load scroll toggle".split(" ").concat(En));function kn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,a,i,s,l,c){if(Ze.apply(this,arguments),qe){if(!qe)throw Error(o(198));var u=He;qe=!1,He=null,Ge||(Ge=!0,We=u)}}(n,t,void 0,e),e.currentTarget=null}function Tn(e,t){t=0!=(4&t);for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var s=n[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;kn(a,s,c),i=l}else for(o=0;o<n.length;o++){if(l=(s=n[o]).instance,c=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;kn(a,s,c),i=l}}}if(Ge)throw e=We,Ge=!1,We=null,e}function Sn(e,t){var r=na(t),n=e+"__bubble";r.has(n)||(An(t,e,2,!1),r.add(n))}var Pn="_reactListening"+Math.random().toString(36).slice(2);function Mn(e){e[Pn]||(e[Pn]=!0,s.forEach((function(t){Cn.has(t)||In(t,!1,e,null),In(t,!0,e,null)})))}function In(e,t,r,n){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,i=r;if("selectionchange"===e&&9!==r.nodeType&&(i=r.ownerDocument),null!==n&&!t&&Cn.has(e)){if("scroll"!==e)return;a|=2,i=n}var o=na(i),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(a|=4),An(i,e,a,t),o.add(s))}function An(e,t,r,n){var a=zt.get(t);switch(void 0===a?2:a){case 0:a=Yt;break;case 1:a=Kt;break;default:a=Qt}r=a.bind(null,t,r,e),a=void 0,!Ve||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),n?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function On(e,t,r,n,a){var i=n;if(0==(1&t)&&0==(2&t)&&null!==n)e:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var s=n.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=n.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=Jn(s)))return;if(5===(l=o.tag)||6===l){n=i=o;continue e}s=s.parentNode}}n=n.return}!function(e,t,r){if($e)return e(t,r);$e=!0;try{De(e,t,r)}finally{$e=!1,Fe()}}((function(){var n=i,a=Te(r),o=[];e:{var s=Ot.get(e);if(void 0!==s){var l=dr,c=e;switch(e){case"keypress":if(0===ar(r))break e;case"keydown":case"keyup":l=Sr;break;case"focusin":c="focus",l=yr;break;case"focusout":c="blur",l=yr;break;case"beforeblur":case"afterblur":l=yr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=vr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Mr;break;case Pt:case Mt:case It:l=br;break;case At:l=Ir;break;case"scroll":l=fr;break;case"wheel":l=Ar;break;case"copy":case"cut":case"paste":l=_r;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Pr}var u=0!=(4&t),p=!u&&"scroll"===e,d=u?null!==s?s+"Capture":null:s;u=[];for(var h,f=n;null!==f;){var m=(h=f).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==d&&(null!=(m=Ne(f,d))&&u.push(zn(f,m,h)))),p)break;f=f.return}0<u.length&&(s=new l(s,c,null,r,a),o.push({event:s,listeners:u}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(c=r.relatedTarget||r.fromElement)||!Jn(c)&&!c[Kn])&&(l||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?Jn(c):null)&&(c!==(p=Ye(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(u=gr,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Pr,m="onPointerLeave",d="onPointerEnter",f="pointer"),p=null==l?s:ta(l),h=null==c?s:ta(c),(s=new u(m,f+"leave",l,r,a)).target=p,s.relatedTarget=h,m=null,Jn(a)===n&&((u=new u(d,f+"enter",c,r,a)).target=h,u.relatedTarget=p,m=u),p=m,l&&c)e:{for(d=c,f=0,h=u=l;h;h=Ln(h))f++;for(h=0,m=d;m;m=Ln(m))h++;for(;0<f-h;)u=Ln(u),f--;for(;0<h-f;)d=Ln(d),h--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break e;u=Ln(u),d=Ln(d)}u=null}else u=null;null!==l&&Dn(o,s,l,u,!1),null!==c&&null!==p&&Dn(o,p,c,u,!0)}if("select"===(l=(s=n?ta(n):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Zr;else if(Ur(s))if(Yr)g=on;else{g=nn;var v=rn}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=an);switch(g&&(g=g(e,n))?qr(o,g,r,a):(v&&v(e,s,n),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ae(s,"number",s.value)),v=n?ta(n):window,e){case"focusin":(Ur(v)||"true"===v.contentEditable)&&(gn=v,vn=n,yn=null);break;case"focusout":yn=vn=gn=null;break;case"mousedown":bn=!0;break;case"contextmenu":case"mouseup":case"dragend":bn=!1,_n(o,r,a);break;case"selectionchange":if(mn)break;case"keydown":case"keyup":_n(o,r,a)}var y;if(zr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vr?Fr(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(Dr&&"ko"!==r.locale&&(Vr||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vr&&(y=nr()):(tr="value"in(er=a)?er.value:er.textContent,Vr=!0)),0<(v=Rn(n,b)).length&&(b=new xr(b,e,null,r,a),o.push({event:b,listeners:v}),y?b.data=y:null!==(y=Nr(r))&&(b.data=y))),(y=Lr?function(e,t){switch(e){case"compositionend":return Nr(t);case"keypress":return 32!==t.which?null:($r=!0,Br);case"textInput":return(e=t.data)===Br&&$r?null:e;default:return null}}(e,r):function(e,t){if(Vr)return"compositionend"===e||!zr&&Fr(e,t)?(e=nr(),rr=tr=er=null,Vr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dr&&"ko"!==t.locale?null:t.data;default:return null}}(e,r))&&(0<(n=Rn(n,"onBeforeInput")).length&&(a=new xr("onBeforeInput","beforeinput",null,r,a),o.push({event:a,listeners:n}),a.data=y))}Tn(o,t)}))}function zn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Rn(e,t){for(var r=t+"Capture",n=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Ne(e,r))&&n.unshift(zn(e,i,a)),null!=(i=Ne(e,t))&&n.push(zn(e,i,a))),e=e.return}return n}function Ln(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Dn(e,t,r,n,a){for(var i=t._reactName,o=[];null!==r&&r!==n;){var s=r,l=s.alternate,c=s.stateNode;if(null!==l&&l===n)break;5===s.tag&&null!==c&&(s=c,a?null!=(l=Ne(r,i))&&o.unshift(zn(r,l,s)):a||null!=(l=Ne(r,i))&&o.push(zn(r,l,s))),r=r.return}0!==o.length&&e.push({event:t,listeners:o})}function Bn(){}var $n=null,Fn=null;function Nn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Vn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var jn="function"==typeof setTimeout?setTimeout:void 0,Un="function"==typeof clearTimeout?clearTimeout:void 0;function qn(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Hn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Gn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var Wn=0;var Xn=Math.random().toString(36).slice(2),Zn="__reactFiber$"+Xn,Yn="__reactProps$"+Xn,Kn="__reactContainer$"+Xn,Qn="__reactEvents$"+Xn;function Jn(e){var t=e[Zn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Kn]||r[Zn]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=Gn(e);null!==e;){if(r=e[Zn])return r;e=Gn(e)}return t}r=(e=r).parentNode}return null}function ea(e){return!(e=e[Zn]||e[Kn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ta(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ra(e){return e[Yn]||null}function na(e){var t=e[Qn];return void 0===t&&(t=e[Qn]=new Set),t}var aa=[],ia=-1;function oa(e){return{current:e}}function sa(e){0>ia||(e.current=aa[ia],aa[ia]=null,ia--)}function la(e,t){ia++,aa[ia]=e.current,e.current=t}var ca={},ua=oa(ca),pa=oa(!1),da=ca;function ha(e,t){var r=e.type.contextTypes;if(!r)return ca;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in r)i[a]=t[a];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function fa(e){return null!=(e=e.childContextTypes)}function ma(){sa(pa),sa(ua)}function ga(e,t,r){if(ua.current!==ca)throw Error(o(168));la(ua,t),la(pa,r)}function va(e,t,r){var n=e.stateNode;if(e=t.childContextTypes,"function"!=typeof n.getChildContext)return r;for(var i in n=n.getChildContext())if(!(i in e))throw Error(o(108,W(t)||"Unknown",i));return a({},r,n)}function ya(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ca,da=ua.current,la(ua,e),la(pa,pa.current),!0}function ba(e,t,r){var n=e.stateNode;if(!n)throw Error(o(169));r?(e=va(e,t,da),n.__reactInternalMemoizedMergedChildContext=e,sa(pa),sa(ua),la(ua,e)):sa(pa),la(pa,r)}var _a=null,xa=null,wa=i.unstable_runWithPriority,Ea=i.unstable_scheduleCallback,Ca=i.unstable_cancelCallback,ka=i.unstable_shouldYield,Ta=i.unstable_requestPaint,Sa=i.unstable_now,Pa=i.unstable_getCurrentPriorityLevel,Ma=i.unstable_ImmediatePriority,Ia=i.unstable_UserBlockingPriority,Aa=i.unstable_NormalPriority,Oa=i.unstable_LowPriority,za=i.unstable_IdlePriority,Ra={},La=void 0!==Ta?Ta:function(){},Da=null,Ba=null,$a=!1,Fa=Sa(),Na=1e4>Fa?Sa:function(){return Sa()-Fa};function Va(){switch(Pa()){case Ma:return 99;case Ia:return 98;case Aa:return 97;case Oa:return 96;case za:return 95;default:throw Error(o(332))}}function ja(e){switch(e){case 99:return Ma;case 98:return Ia;case 97:return Aa;case 96:return Oa;case 95:return za;default:throw Error(o(332))}}function Ua(e,t){return e=ja(e),wa(e,t)}function qa(e,t,r){return e=ja(e),Ea(e,t,r)}function Ha(){if(null!==Ba){var e=Ba;Ba=null,Ca(e)}Ga()}function Ga(){if(!$a&&null!==Da){$a=!0;var e=0;try{var t=Da;Ua(99,(function(){for(;e<t.length;e++){var r=t[e];do{r=r(!0)}while(null!==r)}})),Da=null}catch(t){throw null!==Da&&(Da=Da.slice(e+1)),Ea(Ma,Ha),t}finally{$a=!1}}}var Wa=x.ReactCurrentBatchConfig;function Xa(e,t){if(e&&e.defaultProps){for(var r in t=a({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}var Za=oa(null),Ya=null,Ka=null,Qa=null;function Ja(){Qa=Ka=Ya=null}function ei(e){var t=Za.current;sa(Za),e.type._context._currentValue=t}function ti(e,t){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)===t){if(null===r||(r.childLanes&t)===t)break;r.childLanes|=t}else e.childLanes|=t,null!==r&&(r.childLanes|=t);e=e.return}}function ri(e,t){Ya=e,Qa=Ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Ro=!0),e.firstContext=null)}function ni(e,t){if(Qa!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Qa=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Ka){if(null===Ya)throw Error(o(308));Ka=t,Ya.dependencies={lanes:0,firstContext:t,responders:null}}else Ka=Ka.next=t;return e._currentValue}var ai=!1;function ii(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function oi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function si(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function li(e,t){if(null!==(e=e.updateQueue)){var r=(e=e.shared).pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function ci(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var a=null,i=null;if(null!==(r=r.firstBaseUpdate)){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===i?a=i=o:i=i.next=o,r=r.next}while(null!==r);null===i?a=i=t:i=i.next=t}else a=i=t;return r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ui(e,t,r,n){var i=e.updateQueue;ai=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(null!==l){i.shared.pending=null;var c=l,u=c.next;c.next=null,null===s?o=u:s.next=u,s=c;var p=e.alternate;if(null!==p){var d=(p=p.updateQueue).lastBaseUpdate;d!==s&&(null===d?p.firstBaseUpdate=u:d.next=u,p.lastBaseUpdate=c)}}if(null!==o){for(d=i.baseState,s=0,p=u=c=null;;){l=o.lane;var h=o.eventTime;if((n&l)===l){null!==p&&(p=p.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(l=t,h=r,m.tag){case 1:if("function"==typeof(f=m.payload)){d=f.call(h,d,l);break e}d=f;break e;case 3:f.flags=-4097&f.flags|64;case 0:if(null==(l="function"==typeof(f=m.payload)?f.call(h,d,l):f))break e;d=a({},d,l);break e;case 2:ai=!0}}null!==o.callback&&(e.flags|=32,null===(l=i.effects)?i.effects=[o]:l.push(o))}else h={eventTime:h,lane:l,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===p?(u=p=h,c=d):p=p.next=h,s|=l;if(null===(o=o.next)){if(null===(l=i.shared.pending))break;o=l.next,l.next=null,i.lastBaseUpdate=l,i.shared.pending=null}}null===p&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=p,$s|=s,e.lanes=s,e.memoizedState=d}}function pi(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(null!==a){if(n.callback=null,n=r,"function"!=typeof a)throw Error(o(191,a));a.call(n)}}}var di=(new n.Component).refs;function hi(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:a({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var fi={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=cl(),a=ul(e),i=si(n,a);i.payload=t,null!=r&&(i.callback=r),li(e,i),pl(e,a,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=cl(),a=ul(e),i=si(n,a);i.tag=1,i.payload=t,null!=r&&(i.callback=r),li(e,i),pl(e,a,n)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=cl(),n=ul(e),a=si(r,n);a.tag=2,null!=t&&(a.callback=t),li(e,a),pl(e,n,r)}};function mi(e,t,r,n,a,i,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!cn(r,n)||!cn(a,i))}function gi(e,t,r){var n=!1,a=ca,i=t.contextType;return"object"==typeof i&&null!==i?i=ni(i):(a=fa(t)?da:ua.current,i=(n=null!=(n=t.contextTypes))?ha(e,a):ca),t=new t(r,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=fi,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function vi(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&fi.enqueueReplaceState(t,t.state,null)}function yi(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs=di,ii(e);var i=t.contextType;"object"==typeof i&&null!==i?a.context=ni(i):(i=fa(t)?da:ua.current,a.context=ha(e,i)),ui(e,r,a,n),a.state=e.memoizedState,"function"==typeof(i=t.getDerivedStateFromProps)&&(hi(e,t,i,r),a.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(t=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&fi.enqueueReplaceState(a,a.state,null),ui(e,r,a,n),a.state=e.memoizedState),"function"==typeof a.componentDidMount&&(e.flags|=4)}var bi=Array.isArray;function _i(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(o(309));var n=r.stateNode}if(!n)throw Error(o(147,e));var a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=n.refs;t===di&&(t=n.refs={}),null===e?delete t[a]:t[a]=e})._stringRef=a,t)}if("string"!=typeof e)throw Error(o(284));if(!r._owner)throw Error(o(290,e))}return e}function xi(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function wi(e){function t(t,r){if(e){var n=t.lastEffect;null!==n?(n.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r,r.nextEffect=null,r.flags=8}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Ul(e,t)).index=0,e.sibling=null,e}function i(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags=2,r):n:(t.flags=2,r):r}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Wl(r,e.mode,n)).return=e,t):((t=a(t,r)).return=e,t)}function c(e,t,r,n){return null!==t&&t.elementType===r.type?((n=a(t,r.props)).ref=_i(e,t,r),n.return=e,n):((n=ql(r.type,r.key,r.props,null,e.mode,n)).ref=_i(e,t,r),n.return=e,n)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Xl(r,e.mode,n)).return=e,t):((t=a(t,r.children||[])).return=e,t)}function p(e,t,r,n,i){return null===t||7!==t.tag?((t=Hl(r,e.mode,n,i)).return=e,t):((t=a(t,r)).return=e,t)}function d(e,t,r){if("string"==typeof t||"number"==typeof t)return(t=Wl(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case w:return(r=ql(t.type,t.key,t.props,null,e.mode,r)).ref=_i(e,null,t),r.return=e,r;case E:return(t=Xl(t,e.mode,r)).return=e,t}if(bi(t)||j(t))return(t=Hl(t,e.mode,r,null)).return=e,t;xi(e,t)}return null}function h(e,t,r,n){var a=null!==t?t.key:null;if("string"==typeof r||"number"==typeof r)return null!==a?null:l(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case w:return r.key===a?r.type===C?p(e,t,r.props.children,n,a):c(e,t,r,n):null;case E:return r.key===a?u(e,t,r,n):null}if(bi(r)||j(r))return null!==a?null:p(e,t,r,n,null);xi(e,r)}return null}function f(e,t,r,n,a){if("string"==typeof n||"number"==typeof n)return l(t,e=e.get(r)||null,""+n,a);if("object"==typeof n&&null!==n){switch(n.$$typeof){case w:return e=e.get(null===n.key?r:n.key)||null,n.type===C?p(t,e,n.props.children,a,n.key):c(t,e,n,a);case E:return u(t,e=e.get(null===n.key?r:n.key)||null,n,a)}if(bi(n)||j(n))return p(t,e=e.get(r)||null,n,a,null);xi(t,n)}return null}function m(a,o,s,l){for(var c=null,u=null,p=o,m=o=0,g=null;null!==p&&m<s.length;m++){p.index>m?(g=p,p=null):g=p.sibling;var v=h(a,p,s[m],l);if(null===v){null===p&&(p=g);break}e&&p&&null===v.alternate&&t(a,p),o=i(v,o,m),null===u?c=v:u.sibling=v,u=v,p=g}if(m===s.length)return r(a,p),c;if(null===p){for(;m<s.length;m++)null!==(p=d(a,s[m],l))&&(o=i(p,o,m),null===u?c=p:u.sibling=p,u=p);return c}for(p=n(a,p);m<s.length;m++)null!==(g=f(p,a,m,s[m],l))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),o=i(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&p.forEach((function(e){return t(a,e)})),c}function g(a,s,l,c){var u=j(l);if("function"!=typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var p=u=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=h(a,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(a,m),s=i(b,s,g),null===p?u=b:p.sibling=b,p=b,m=v}if(y.done)return r(a,m),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(a,y.value,c))&&(s=i(y,s,g),null===p?u=y:p.sibling=y,p=y);return u}for(m=n(a,m);!y.done;g++,y=l.next())null!==(y=f(m,a,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=i(y,s,g),null===p?u=y:p.sibling=y,p=y);return e&&m.forEach((function(e){return t(a,e)})),u}return function(e,n,i,l){var c="object"==typeof i&&null!==i&&i.type===C&&null===i.key;c&&(i=i.props.children);var u="object"==typeof i&&null!==i;if(u)switch(i.$$typeof){case w:e:{for(u=i.key,c=n;null!==c;){if(c.key===u){switch(c.tag){case 7:if(i.type===C){r(e,c.sibling),(n=a(c,i.props.children)).return=e,e=n;break e}break;default:if(c.elementType===i.type){r(e,c.sibling),(n=a(c,i.props)).ref=_i(e,c,i),n.return=e,e=n;break e}}r(e,c);break}t(e,c),c=c.sibling}i.type===C?((n=Hl(i.props.children,e.mode,l,i.key)).return=e,e=n):((l=ql(i.type,i.key,i.props,null,e.mode,l)).ref=_i(e,n,i),l.return=e,e=l)}return s(e);case E:e:{for(c=i.key;null!==n;){if(n.key===c){if(4===n.tag&&n.stateNode.containerInfo===i.containerInfo&&n.stateNode.implementation===i.implementation){r(e,n.sibling),(n=a(n,i.children||[])).return=e,e=n;break e}r(e,n);break}t(e,n),n=n.sibling}(n=Xl(i,e.mode,l)).return=e,e=n}return s(e)}if("string"==typeof i||"number"==typeof i)return i=""+i,null!==n&&6===n.tag?(r(e,n.sibling),(n=a(n,i)).return=e,e=n):(r(e,n),(n=Wl(i,e.mode,l)).return=e,e=n),s(e);if(bi(i))return m(e,n,i,l);if(j(i))return g(e,n,i,l);if(u&&xi(e,i),void 0===i&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,W(e.type)||"Component"))}return r(e,n)}}var Ei=wi(!0),Ci=wi(!1),ki={},Ti=oa(ki),Si=oa(ki),Pi=oa(ki);function Mi(e){if(e===ki)throw Error(o(174));return e}function Ii(e,t){switch(la(Pi,t),la(Si,e),la(Ti,ki),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fe(null,"");break;default:t=fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}sa(Ti),la(Ti,t)}function Ai(){sa(Ti),sa(Si),sa(Pi)}function Oi(e){Mi(Pi.current);var t=Mi(Ti.current),r=fe(t,e.type);t!==r&&(la(Si,e),la(Ti,r))}function zi(e){Si.current===e&&(sa(Ti),sa(Si))}var Ri=oa(0);function Li(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Di=null,Bi=null,$i=!1;function Fi(e,t){var r=Vl(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function Ni(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Vi(e){if($i){var t=Bi;if(t){var r=t;if(!Ni(e,t)){if(!(t=Hn(r.nextSibling))||!Ni(e,t))return e.flags=-1025&e.flags|2,$i=!1,void(Di=e);Fi(Di,r)}Di=e,Bi=Hn(t.firstChild)}else e.flags=-1025&e.flags|2,$i=!1,Di=e}}function ji(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Di=e}function Ui(e){if(e!==Di)return!1;if(!$i)return ji(e),$i=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Vn(t,e.memoizedProps))for(t=Bi;t;)Fi(e,t),t=Hn(t.nextSibling);if(ji(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){Bi=Hn(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}Bi=null}}else Bi=Di?Hn(e.stateNode.nextSibling):null;return!0}function qi(){Bi=Di=null,$i=!1}var Hi=[];function Gi(){for(var e=0;e<Hi.length;e++)Hi[e]._workInProgressVersionPrimary=null;Hi.length=0}var Wi=x.ReactCurrentDispatcher,Xi=x.ReactCurrentBatchConfig,Zi=0,Yi=null,Ki=null,Qi=null,Ji=!1,eo=!1;function to(){throw Error(o(321))}function ro(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!sn(e[r],t[r]))return!1;return!0}function no(e,t,r,n,a,i){if(Zi=i,Yi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Wi.current=null===e||null===e.memoizedState?Io:Ao,e=r(n,a),eo){i=0;do{if(eo=!1,!(25>i))throw Error(o(301));i+=1,Qi=Ki=null,t.updateQueue=null,Wi.current=Oo,e=r(n,a)}while(eo)}if(Wi.current=Mo,t=null!==Ki&&null!==Ki.next,Zi=0,Qi=Ki=Yi=null,Ji=!1,t)throw Error(o(300));return e}function ao(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Qi?Yi.memoizedState=Qi=e:Qi=Qi.next=e,Qi}function io(){if(null===Ki){var e=Yi.alternate;e=null!==e?e.memoizedState:null}else e=Ki.next;var t=null===Qi?Yi.memoizedState:Qi.next;if(null!==t)Qi=t,Ki=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Ki=e).memoizedState,baseState:Ki.baseState,baseQueue:Ki.baseQueue,queue:Ki.queue,next:null},null===Qi?Yi.memoizedState=Qi=e:Qi=Qi.next=e}return Qi}function oo(e,t){return"function"==typeof t?t(e):t}function so(e){var t=io(),r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=e;var n=Ki,a=n.baseQueue,i=r.pending;if(null!==i){if(null!==a){var s=a.next;a.next=i.next,i.next=s}n.baseQueue=a=i,r.pending=null}if(null!==a){a=a.next,n=n.baseState;var l=s=i=null,c=a;do{var u=c.lane;if((Zi&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),n=c.eagerReducer===e?c.eagerState:e(n,c.action);else{var p={lane:u,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(s=l=p,i=n):l=l.next=p,Yi.lanes|=u,$s|=u}c=c.next}while(null!==c&&c!==a);null===l?i=n:l.next=s,sn(n,t.memoizedState)||(Ro=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=l,r.lastRenderedState=n}return[t.memoizedState,r.dispatch]}function lo(e){var t=io(),r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(null!==a){r.pending=null;var s=a=a.next;do{i=e(i,s.action),s=s.next}while(s!==a);sn(i,t.memoizedState)||(Ro=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function co(e,t,r){var n=t._getVersion;n=n(t._source);var a=t._workInProgressVersionPrimary;if(null!==a?e=a===n:(e=e.mutableReadLanes,(e=(Zi&e)===e)&&(t._workInProgressVersionPrimary=n,Hi.push(t))),e)return r(t._source);throw Hi.push(t),Error(o(350))}function uo(e,t,r,n){var a=Is;if(null===a)throw Error(o(349));var i=t._getVersion,s=i(t._source),l=Wi.current,c=l.useState((function(){return co(a,t,r)})),u=c[1],p=c[0];c=Qi;var d=e.memoizedState,h=d.refs,f=h.getSnapshot,m=d.source;d=d.subscribe;var g=Yi;return e.memoizedState={refs:h,source:t,subscribe:n},l.useEffect((function(){h.getSnapshot=r,h.setSnapshot=u;var e=i(t._source);if(!sn(s,e)){e=r(t._source),sn(p,e)||(u(e),e=ul(g),a.mutableReadLanes|=e&a.pendingLanes),e=a.mutableReadLanes,a.entangledLanes|=e;for(var n=a.entanglements,o=e;0<o;){var l=31-qt(o),c=1<<l;n[l]|=e,o&=~c}}}),[r,t,n]),l.useEffect((function(){return n(t._source,(function(){var e=h.getSnapshot,r=h.setSnapshot;try{r(e(t._source));var n=ul(g);a.mutableReadLanes|=n&a.pendingLanes}catch(e){r((function(){throw e}))}}))}),[t,n]),sn(f,r)&&sn(m,t)&&sn(d,n)||((e={pending:null,dispatch:null,lastRenderedReducer:oo,lastRenderedState:p}).dispatch=u=Po.bind(null,Yi,e),c.queue=e,c.baseQueue=null,p=co(a,t,r),c.memoizedState=c.baseState=p),p}function po(e,t,r){return uo(io(),e,t,r)}function ho(e){var t=ao();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:oo,lastRenderedState:e}).dispatch=Po.bind(null,Yi,e),[t.memoizedState,e]}function fo(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=Yi.updateQueue)?(t={lastEffect:null},Yi.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function mo(e){return e={current:e},ao().memoizedState=e}function go(){return io().memoizedState}function vo(e,t,r,n){var a=ao();Yi.flags|=e,a.memoizedState=fo(1|t,r,void 0,void 0===n?null:n)}function yo(e,t,r,n){var a=io();n=void 0===n?null:n;var i=void 0;if(null!==Ki){var o=Ki.memoizedState;if(i=o.destroy,null!==n&&ro(n,o.deps))return void fo(t,r,i,n)}Yi.flags|=e,a.memoizedState=fo(1|t,r,i,n)}function bo(e,t){return vo(516,4,e,t)}function _o(e,t){return yo(516,4,e,t)}function xo(e,t){return yo(4,2,e,t)}function wo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Eo(e,t,r){return r=null!=r?r.concat([e]):null,yo(4,2,wo.bind(null,t,e),r)}function Co(){}function ko(e,t){var r=io();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&ro(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function To(e,t){var r=io();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&ro(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function So(e,t){var r=Va();Ua(98>r?98:r,(function(){e(!0)})),Ua(97<r?97:r,(function(){var r=Xi.transition;Xi.transition=1;try{e(!1),t()}finally{Xi.transition=r}}))}function Po(e,t,r){var n=cl(),a=ul(e),i={lane:a,action:r,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),t.pending=i,o=e.alternate,e===Yi||null!==o&&o===Yi)eo=Ji=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,l=o(s,r);if(i.eagerReducer=o,i.eagerState=l,sn(l,s))return}catch(e){}pl(e,a,n)}}var Mo={readContext:ni,useCallback:to,useContext:to,useEffect:to,useImperativeHandle:to,useLayoutEffect:to,useMemo:to,useReducer:to,useRef:to,useState:to,useDebugValue:to,useDeferredValue:to,useTransition:to,useMutableSource:to,useOpaqueIdentifier:to,unstable_isNewReconciler:!1},Io={readContext:ni,useCallback:function(e,t){return ao().memoizedState=[e,void 0===t?null:t],e},useContext:ni,useEffect:bo,useImperativeHandle:function(e,t,r){return r=null!=r?r.concat([e]):null,vo(4,2,wo.bind(null,t,e),r)},useLayoutEffect:function(e,t){return vo(4,2,e,t)},useMemo:function(e,t){var r=ao();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ao();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e=(e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Po.bind(null,Yi,e),[n.memoizedState,e]},useRef:mo,useState:ho,useDebugValue:Co,useDeferredValue:function(e){var t=ho(e),r=t[0],n=t[1];return bo((function(){var t=Xi.transition;Xi.transition=1;try{n(e)}finally{Xi.transition=t}}),[e]),r},useTransition:function(){var e=ho(!1),t=e[0];return mo(e=So.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,r){var n=ao();return n.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:r},uo(n,e,t,r)},useOpaqueIdentifier:function(){if($i){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,r("r:"+(Wn++).toString(36))),Error(o(355))})),r=ho(t)[1];return 0==(2&Yi.mode)&&(Yi.flags|=516,fo(5,(function(){r("r:"+(Wn++).toString(36))}),void 0,null)),t}return ho(t="r:"+(Wn++).toString(36)),t},unstable_isNewReconciler:!1},Ao={readContext:ni,useCallback:ko,useContext:ni,useEffect:_o,useImperativeHandle:Eo,useLayoutEffect:xo,useMemo:To,useReducer:so,useRef:go,useState:function(){return so(oo)},useDebugValue:Co,useDeferredValue:function(e){var t=so(oo),r=t[0],n=t[1];return _o((function(){var t=Xi.transition;Xi.transition=1;try{n(e)}finally{Xi.transition=t}}),[e]),r},useTransition:function(){var e=so(oo)[0];return[go().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return so(oo)[0]},unstable_isNewReconciler:!1},Oo={readContext:ni,useCallback:ko,useContext:ni,useEffect:_o,useImperativeHandle:Eo,useLayoutEffect:xo,useMemo:To,useReducer:lo,useRef:go,useState:function(){return lo(oo)},useDebugValue:Co,useDeferredValue:function(e){var t=lo(oo),r=t[0],n=t[1];return _o((function(){var t=Xi.transition;Xi.transition=1;try{n(e)}finally{Xi.transition=t}}),[e]),r},useTransition:function(){var e=lo(oo)[0];return[go().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return lo(oo)[0]},unstable_isNewReconciler:!1},zo=x.ReactCurrentOwner,Ro=!1;function Lo(e,t,r,n){t.child=null===e?Ci(t,null,r,n):Ei(t,e.child,r,n)}function Do(e,t,r,n,a){r=r.render;var i=t.ref;return ri(t,a),n=no(e,t,r,n,i,a),null===e||Ro?(t.flags|=1,Lo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,rs(e,t,a))}function Bo(e,t,r,n,a,i){if(null===e){var o=r.type;return"function"!=typeof o||jl(o)||void 0!==o.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=ql(r.type,null,n,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,$o(e,t,o,n,a,i))}return o=e.child,0==(a&i)&&(a=o.memoizedProps,(r=null!==(r=r.compare)?r:cn)(a,n)&&e.ref===t.ref)?rs(e,t,i):(t.flags|=1,(e=Ul(o,n)).ref=t.ref,e.return=t,t.child=e)}function $o(e,t,r,n,a,i){if(null!==e&&cn(e.memoizedProps,n)&&e.ref===t.ref){if(Ro=!1,0==(i&a))return t.lanes=e.lanes,rs(e,t,i);0!=(16384&e.flags)&&(Ro=!0)}return Vo(e,t,r,n,i)}function Fo(e,t,r){var n=t.pendingProps,a=n.children,i=null!==e?e.memoizedState:null;if("hidden"===n.mode||"unstable-defer-without-hiding"===n.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},bl(t,r);else{if(0==(1073741824&r))return e=null!==i?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},bl(t,e),null;t.memoizedState={baseLanes:0},bl(t,null!==i?i.baseLanes:r)}else null!==i?(n=i.baseLanes|r,t.memoizedState=null):n=r,bl(t,n);return Lo(e,t,a,r),t.child}function No(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=128)}function Vo(e,t,r,n,a){var i=fa(r)?da:ua.current;return i=ha(t,i),ri(t,a),r=no(e,t,r,n,i,a),null===e||Ro?(t.flags|=1,Lo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,rs(e,t,a))}function jo(e,t,r,n,a){if(fa(r)){var i=!0;ya(t)}else i=!1;if(ri(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),gi(t,r,n),yi(t,r,n,a),n=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=r.contextType;"object"==typeof c&&null!==c?c=ni(c):c=ha(t,c=fa(r)?da:ua.current);var u=r.getDerivedStateFromProps,p="function"==typeof u||"function"==typeof o.getSnapshotBeforeUpdate;p||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==n||l!==c)&&vi(t,o,n,c),ai=!1;var d=t.memoizedState;o.state=d,ui(t,n,o,a),l=t.memoizedState,s!==n||d!==l||pa.current||ai?("function"==typeof u&&(hi(t,r,u,n),l=t.memoizedState),(s=ai||mi(t,r,s,n,d,l,c))?(p||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4)):("function"==typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=c,n=s):("function"==typeof o.componentDidMount&&(t.flags|=4),n=!1)}else{o=t.stateNode,oi(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Xa(t.type,s),o.props=c,p=t.pendingProps,d=o.context,"object"==typeof(l=r.contextType)&&null!==l?l=ni(l):l=ha(t,l=fa(r)?da:ua.current);var h=r.getDerivedStateFromProps;(u="function"==typeof h||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==p||d!==l)&&vi(t,o,n,l),ai=!1,d=t.memoizedState,o.state=d,ui(t,n,o,a);var f=t.memoizedState;s!==p||d!==f||pa.current||ai?("function"==typeof h&&(hi(t,r,h,n),f=t.memoizedState),(c=ai||mi(t,r,c,n,d,f,l))?(u||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(n,f,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(n,f,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=n,t.memoizedState=f),o.props=n,o.state=f,o.context=l,n=c):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),n=!1)}return Uo(e,t,r,n,i,a)}function Uo(e,t,r,n,a,i){No(e,t);var o=0!=(64&t.flags);if(!n&&!o)return a&&ba(t,r,!1),rs(e,t,i);n=t.stateNode,zo.current=t;var s=o&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&o?(t.child=Ei(t,e.child,null,i),t.child=Ei(t,null,s,i)):Lo(e,t,s,i),t.memoizedState=n.state,a&&ba(t,r,!0),t.child}function qo(e){var t=e.stateNode;t.pendingContext?ga(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ga(0,t.context,!1),Ii(e,t.containerInfo)}var Ho,Go,Wo,Xo={dehydrated:null,retryLane:0};function Zo(e,t,r){var n,a=t.pendingProps,i=Ri.current,o=!1;return(n=0!=(64&t.flags))||(n=(null===e||null!==e.memoizedState)&&0!=(2&i)),n?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(i|=1),la(Ri,1&i),null===e?(void 0!==a.fallback&&Vi(t),e=a.children,i=a.fallback,o?(e=Yo(t,e,i,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Xo,e):"number"==typeof a.unstable_expectedLoadTime?(e=Yo(t,e,i,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Xo,t.lanes=33554432,e):((r=Gl({mode:"visible",children:e},t.mode,r,null)).return=t,t.child=r)):(e.memoizedState,o?(a=Qo(e,t,a.children,a.fallback,r),o=t.child,i=e.child.memoizedState,o.memoizedState=null===i?{baseLanes:r}:{baseLanes:i.baseLanes|r},o.childLanes=e.childLanes&~r,t.memoizedState=Xo,a):(r=Ko(e,t,a.children,r),t.memoizedState=null,r))}function Yo(e,t,r,n){var a=e.mode,i=e.child;return t={mode:"hidden",children:t},0==(2&a)&&null!==i?(i.childLanes=0,i.pendingProps=t):i=Gl(t,a,0,null),r=Hl(r,a,n,null),i.return=e,r.return=e,i.sibling=r,e.child=i,r}function Ko(e,t,r,n){var a=e.child;return e=a.sibling,r=Ul(a,{mode:"visible",children:r}),0==(2&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=r}function Qo(e,t,r,n,a){var i=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:r};return 0==(2&i)&&t.child!==o?((r=t.child).childLanes=0,r.pendingProps=s,null!==(o=r.lastEffect)?(t.firstEffect=r.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):r=Ul(o,s),null!==e?n=Ul(e,n):(n=Hl(n,i,a,null)).flags|=2,n.return=t,r.return=t,r.sibling=n,t.child=r,n}function Jo(e,t){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ti(e.return,t)}function es(e,t,r,n,a,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a,lastEffect:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=a,o.lastEffect=i)}function ts(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Lo(e,t,n.children,r),0!=(2&(n=Ri.current)))n=1&n|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Jo(e,r);else if(19===e.tag)Jo(e,r);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(la(Ri,n),0==(2&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;null!==r;)null!==(e=r.alternate)&&null===Li(e)&&(a=r),r=r.sibling;null===(r=a)?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),es(t,!1,a,r,i,t.lastEffect);break;case"backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Li(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}es(t,!0,r,null,i,t.lastEffect);break;case"together":es(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function rs(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),$s|=t.lanes,0!=(r&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(r=Ul(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Ul(e,e.pendingProps)).return=t;r.sibling=null}return t.child}return null}function ns(e,t){if(!$i)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function as(e,t,r){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return fa(t.type)&&ma(),null;case 3:return Ai(),sa(pa),sa(ua),Gi(),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(Ui(t)?t.flags|=4:n.hydrate||(t.flags|=256)),null;case 5:zi(t);var i=Mi(Pi.current);if(r=t.type,null!==e&&null!=t.stateNode)Go(e,t,r,n),e.ref!==t.ref&&(t.flags|=128);else{if(!n){if(null===t.stateNode)throw Error(o(166));return null}if(e=Mi(Ti.current),Ui(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[Zn]=t,n[Yn]=s,r){case"dialog":Sn("cancel",n),Sn("close",n);break;case"iframe":case"object":case"embed":Sn("load",n);break;case"video":case"audio":for(e=0;e<En.length;e++)Sn(En[e],n);break;case"source":Sn("error",n);break;case"img":case"image":case"link":Sn("error",n),Sn("load",n);break;case"details":Sn("toggle",n);break;case"input":ee(n,s),Sn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Sn("invalid",n);break;case"textarea":le(n,s),Sn("invalid",n)}for(var c in Ce(r,s),e=null,s)s.hasOwnProperty(c)&&(i=s[c],"children"===c?"string"==typeof i?n.textContent!==i&&(e=["children",i]):"number"==typeof i&&n.textContent!==""+i&&(e=["children",""+i]):l.hasOwnProperty(c)&&null!=i&&"onScroll"===c&&Sn("scroll",n));switch(r){case"input":Y(n),ne(n,s,!0);break;case"textarea":Y(n),ue(n);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(n.onclick=Bn)}n=e,t.updateQueue=n,null!==n&&(t.flags|=4)}else{switch(c=9===i.nodeType?i:i.ownerDocument,e===pe&&(e=he(r)),e===pe?"script"===r?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof n.is?e=c.createElement(r,{is:n.is}):(e=c.createElement(r),"select"===r&&(c=e,n.multiple?c.multiple=!0:n.size&&(c.size=n.size))):e=c.createElementNS(e,r),e[Zn]=t,e[Yn]=n,Ho(e,t),t.stateNode=e,c=ke(r,n),r){case"dialog":Sn("cancel",e),Sn("close",e),i=n;break;case"iframe":case"object":case"embed":Sn("load",e),i=n;break;case"video":case"audio":for(i=0;i<En.length;i++)Sn(En[i],e);i=n;break;case"source":Sn("error",e),i=n;break;case"img":case"image":case"link":Sn("error",e),Sn("load",e),i=n;break;case"details":Sn("toggle",e),i=n;break;case"input":ee(e,n),i=J(e,n),Sn("invalid",e);break;case"option":i=ie(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=a({},n,{value:void 0}),Sn("invalid",e);break;case"textarea":le(e,n),i=se(e,n),Sn("invalid",e);break;default:i=n}Ce(r,i);var u=i;for(s in u)if(u.hasOwnProperty(s)){var p=u[s];"style"===s?we(e,p):"dangerouslySetInnerHTML"===s?null!=(p=p?p.__html:void 0)&&ve(e,p):"children"===s?"string"==typeof p?("textarea"!==r||""!==p)&&ye(e,p):"number"==typeof p&&ye(e,""+p):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(l.hasOwnProperty(s)?null!=p&&"onScroll"===s&&Sn("scroll",e):null!=p&&_(e,s,p,c))}switch(r){case"input":Y(e),ne(e,n,!1);break;case"textarea":Y(e),ue(e);break;case"option":null!=n.value&&e.setAttribute("value",""+X(n.value));break;case"select":e.multiple=!!n.multiple,null!=(s=n.value)?oe(e,!!n.multiple,s,!1):null!=n.defaultValue&&oe(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Bn)}Nn(r,n)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Wo(0,t,e.memoizedProps,n);else{if("string"!=typeof n&&null===t.stateNode)throw Error(o(166));r=Mi(Pi.current),Mi(Ti.current),Ui(t)?(n=t.stateNode,r=t.memoizedProps,n[Zn]=t,n.nodeValue!==r&&(t.flags|=4)):((n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[Zn]=t,t.stateNode=n)}return null;case 13:return sa(Ri),n=t.memoizedState,0!=(64&t.flags)?(t.lanes=r,t):(n=null!==n,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Ui(t):r=null!==e.memoizedState,n&&!r&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Ri.current)?0===Ls&&(Ls=3):(0!==Ls&&3!==Ls||(Ls=4),null===Is||0==(134217727&$s)&&0==(134217727&Fs)||ml(Is,Os))),(n||r)&&(t.flags|=4),null);case 4:return Ai(),null===e&&Mn(t.stateNode.containerInfo),null;case 10:return ei(t),null;case 17:return fa(t.type)&&ma(),null;case 19:if(sa(Ri),null===(n=t.memoizedState))return null;if(s=0!=(64&t.flags),null===(c=n.rendering))if(s)ns(n,!1);else{if(0!==Ls||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Li(e))){for(t.flags|=64,ns(n,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===n.lastEffect&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=r,r=t.child;null!==r;)e=n,(s=r).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return la(Ri,1&Ri.current|2),t.child}e=e.sibling}null!==n.tail&&Na()>Us&&(t.flags|=64,s=!0,ns(n,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Li(c))){if(t.flags|=64,s=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),ns(n,!0),null===n.tail&&"hidden"===n.tailMode&&!c.alternate&&!$i)return null!==(t=t.lastEffect=n.lastEffect)&&(t.nextEffect=null),null}else 2*Na()-n.renderingStartTime>Us&&1073741824!==r&&(t.flags|=64,s=!0,ns(n,!1),t.lanes=33554432);n.isBackwards?(c.sibling=t.child,t.child=c):(null!==(r=n.last)?r.sibling=c:t.child=c,n.last=c)}return null!==n.tail?(r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=Na(),r.sibling=null,t=Ri.current,la(Ri,s?1&t|2:1&t),r):null;case 23:case 24:return _l(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==n.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function is(e){switch(e.tag){case 1:fa(e.type)&&ma();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ai(),sa(pa),sa(ua),Gi(),0!=(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return zi(e),null;case 13:return sa(Ri),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return sa(Ri),null;case 4:return Ai(),null;case 10:return ei(e),null;case 23:case 24:return _l(),null;default:return null}}function os(e,t){try{var r="",n=t;do{r+=G(n),n=n.return}while(n);var a=r}catch(e){a="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:a}}function ss(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}Ho=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Go=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Mi(Ti.current);var o,s=null;switch(r){case"input":i=J(e,i),n=J(e,n),s=[];break;case"option":i=ie(e,i),n=ie(e,n),s=[];break;case"select":i=a({},i,{value:void 0}),n=a({},n,{value:void 0}),s=[];break;case"textarea":i=se(e,i),n=se(e,n),s=[];break;default:"function"!=typeof i.onClick&&"function"==typeof n.onClick&&(e.onclick=Bn)}for(p in Ce(r,n),r=null,i)if(!n.hasOwnProperty(p)&&i.hasOwnProperty(p)&&null!=i[p])if("style"===p){var c=i[p];for(o in c)c.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else"dangerouslySetInnerHTML"!==p&&"children"!==p&&"suppressContentEditableWarning"!==p&&"suppressHydrationWarning"!==p&&"autoFocus"!==p&&(l.hasOwnProperty(p)?s||(s=[]):(s=s||[]).push(p,null));for(p in n){var u=n[p];if(c=null!=i?i[p]:void 0,n.hasOwnProperty(p)&&u!==c&&(null!=u||null!=c))if("style"===p)if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(s||(s=[]),s.push(p,r)),r=u;else"dangerouslySetInnerHTML"===p?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(s=s||[]).push(p,u)):"children"===p?"string"!=typeof u&&"number"!=typeof u||(s=s||[]).push(p,""+u):"suppressContentEditableWarning"!==p&&"suppressHydrationWarning"!==p&&(l.hasOwnProperty(p)?(null!=u&&"onScroll"===p&&Sn("scroll",e),s||c===u||(s=[])):"object"==typeof u&&null!==u&&u.$$typeof===L?u.toString():(s=s||[]).push(p,u))}r&&(s=s||[]).push("style",r);var p=s;(t.updateQueue=p)&&(t.flags|=4)}},Wo=function(e,t,r,n){r!==n&&(t.flags|=4)};var ls="function"==typeof WeakMap?WeakMap:Map;function cs(e,t,r){(r=si(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ws||(Ws=!0,Xs=n),ss(0,t)},r}function us(e,t,r){(r=si(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var a=t.value;r.payload=function(){return ss(0,t),n(a)}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(r.callback=function(){"function"!=typeof n&&(null===Zs?Zs=new Set([this]):Zs.add(this),ss(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}var ps="function"==typeof WeakSet?WeakSet:Set;function ds(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Bl(e,t)}else t.current=null}function hs(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var r=e.memoizedProps,n=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?r:Xa(t.type,r),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&qn(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(o(163))}function fs(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=r.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=r.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var a=e;n=a.next,0!=(4&(a=a.tag))&&0!=(1&a)&&(Rl(r,e),zl(r,e)),e=n}while(e!==t)}return;case 1:return e=r.stateNode,4&r.flags&&(null===t?e.componentDidMount():(n=r.elementType===r.type?t.memoizedProps:Xa(r.type,t.memoizedProps),e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=r.updateQueue)&&pi(r,t,e));case 3:if(null!==(t=r.updateQueue)){if(e=null,null!==r.child)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}pi(r,t,e)}return;case 5:return e=r.stateNode,void(null===t&&4&r.flags&&Nn(r.type,r.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===r.memoizedState&&(r=r.alternate,null!==r&&(r=r.memoizedState,null!==r&&(r=r.dehydrated,null!==r&&wt(r)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(o(163))}function ms(e,t){for(var r=e;;){if(5===r.tag){var n=r.stateNode;if(t)"function"==typeof(n=n.style).setProperty?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var a=r.memoizedProps.style;a=null!=a&&a.hasOwnProperty("display")?a.display:null,n.style.display=xe("display",a)}}else if(6===r.tag)r.stateNode.nodeValue=t?"":r.memoizedProps;else if((23!==r.tag&&24!==r.tag||null===r.memoizedState||r===e)&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function gs(e,t){if(xa&&"function"==typeof xa.onCommitFiberUnmount)try{xa.onCommitFiberUnmount(_a,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var n=r,a=n.destroy;if(n=n.tag,void 0!==a)if(0!=(4&n))Rl(t,r);else{n=t;try{a()}catch(e){Bl(n,e)}}r=r.next}while(r!==e)}break;case 1:if(ds(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Bl(t,e)}break;case 5:ds(t);break;case 4:ws(e,t)}}function vs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ys(e){return 5===e.tag||3===e.tag||4===e.tag}function bs(e){e:{for(var t=e.return;null!==t;){if(ys(t))break e;t=t.return}throw Error(o(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var n=!1;break;case 3:case 4:t=t.containerInfo,n=!0;break;default:throw Error(o(161))}16&r.flags&&(ye(t,""),r.flags&=-17);e:t:for(r=e;;){for(;null===r.sibling;){if(null===r.return||ys(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;5!==r.tag&&6!==r.tag&&18!==r.tag;){if(2&r.flags)continue t;if(null===r.child||4===r.tag)continue t;r.child.return=r,r=r.child}if(!(2&r.flags)){r=r.stateNode;break e}}n?_s(e,r,t):xs(e,r,t)}function _s(e,t,r){var n=e.tag,a=5===n||6===n;if(a)e=a?e.stateNode:e.stateNode.instance,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!=(r=r._reactRootContainer)||null!==t.onclick||(t.onclick=Bn));else if(4!==n&&null!==(e=e.child))for(_s(e,t,r),e=e.sibling;null!==e;)_s(e,t,r),e=e.sibling}function xs(e,t,r){var n=e.tag,a=5===n||6===n;if(a)e=a?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(xs(e,t,r),e=e.sibling;null!==e;)xs(e,t,r),e=e.sibling}function ws(e,t){for(var r,n,a=t,i=!1;;){if(!i){i=a.return;e:for(;;){if(null===i)throw Error(o(160));switch(r=i.stateNode,i.tag){case 5:n=!1;break e;case 3:case 4:r=r.containerInfo,n=!0;break e}i=i.return}i=!0}if(5===a.tag||6===a.tag){e:for(var s=e,l=a,c=l;;)if(gs(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===l)break e;for(;null===c.sibling;){if(null===c.return||c.return===l)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}n?(s=r,l=a.stateNode,8===s.nodeType?s.parentNode.removeChild(l):s.removeChild(l)):r.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){r=a.stateNode.containerInfo,n=!0,a.child.return=a,a=a.child;continue}}else if(gs(e,a),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(i=!1)}a.sibling.return=a.return,a=a.sibling}}function Es(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var n=r=r.next;do{3==(3&n.tag)&&(e=n.destroy,n.destroy=void 0,void 0!==e&&e()),n=n.next}while(n!==r)}return;case 1:return;case 5:if(null!=(r=t.stateNode)){n=t.memoizedProps;var a=null!==e?e.memoizedProps:n;e=t.type;var i=t.updateQueue;if(t.updateQueue=null,null!==i){for(r[Yn]=n,"input"===e&&"radio"===n.type&&null!=n.name&&te(r,n),ke(e,a),t=ke(e,n),a=0;a<i.length;a+=2){var s=i[a],l=i[a+1];"style"===s?we(r,l):"dangerouslySetInnerHTML"===s?ve(r,l):"children"===s?ye(r,l):_(r,s,l,t)}switch(e){case"input":re(r,n);break;case"textarea":ce(r,n);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,null!=(i=n.value)?oe(r,!!n.multiple,i,!1):e!==!!n.multiple&&(null!=n.defaultValue?oe(r,!!n.multiple,n.defaultValue,!0):oe(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((r=t.stateNode).hydrate&&(r.hydrate=!1,wt(r.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(js=Na(),ms(t.child,!0)),void Cs(t);case 19:return void Cs(t);case 17:return;case 23:case 24:return void ms(t,null!==t.memoizedState)}throw Error(o(163))}function Cs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new ps),t.forEach((function(t){var n=Fl.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}function ks(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Ts=Math.ceil,Ss=x.ReactCurrentDispatcher,Ps=x.ReactCurrentOwner,Ms=0,Is=null,As=null,Os=0,zs=0,Rs=oa(0),Ls=0,Ds=null,Bs=0,$s=0,Fs=0,Ns=0,Vs=null,js=0,Us=1/0;function qs(){Us=Na()+500}var Hs,Gs=null,Ws=!1,Xs=null,Zs=null,Ys=!1,Ks=null,Qs=90,Js=[],el=[],tl=null,rl=0,nl=null,al=-1,il=0,ol=0,sl=null,ll=!1;function cl(){return 0!=(48&Ms)?Na():-1!==al?al:al=Na()}function ul(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===Va()?1:2;if(0===il&&(il=Bs),0!==Wa.transition){0!==ol&&(ol=null!==Vs?Vs.pendingLanes:0),e=il;var t=4186112&~ol;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Va(),0!=(4&Ms)&&98===e?e=Nt(12,il):e=Nt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),il),e}function pl(e,t,r){if(50<rl)throw rl=0,nl=null,Error(o(185));if(null===(e=dl(e,t)))return null;Ut(e,t,r),e===Is&&(Fs|=t,4===Ls&&ml(e,Os));var n=Va();1===t?0!=(8&Ms)&&0==(48&Ms)?gl(e):(hl(e,r),0===Ms&&(qs(),Ha())):(0==(4&Ms)||98!==n&&99!==n||(null===tl?tl=new Set([e]):tl.add(e)),hl(e,r)),Vs=e}function dl(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}function hl(e,t){for(var r=e.callbackNode,n=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var l=31-qt(s),c=1<<l,u=i[l];if(-1===u){if(0==(c&n)||0!=(c&a)){u=t,Bt(c);var p=Dt;i[l]=10<=p?u+250:6<=p?u+5e3:-1}}else u<=t&&(e.expiredLanes|=c);s&=~c}if(n=$t(e,e===Is?Os:0),t=Dt,0===n)null!==r&&(r!==Ra&&Ca(r),e.callbackNode=null,e.callbackPriority=0);else{if(null!==r){if(e.callbackPriority===t)return;r!==Ra&&Ca(r)}15===t?(r=gl.bind(null,e),null===Da?(Da=[r],Ba=Ea(Ma,Ga)):Da.push(r),r=Ra):14===t?r=qa(99,gl.bind(null,e)):r=qa(r=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),fl.bind(null,e)),e.callbackPriority=t,e.callbackNode=r}}function fl(e){if(al=-1,ol=il=0,0!=(48&Ms))throw Error(o(327));var t=e.callbackNode;if(Ol()&&e.callbackNode!==t)return null;var r=$t(e,e===Is?Os:0);if(0===r)return null;var n=r,a=Ms;Ms|=16;var i=El();for(Is===e&&Os===n||(qs(),xl(e,n));;)try{Tl();break}catch(t){wl(e,t)}if(Ja(),Ss.current=i,Ms=a,null!==As?n=0:(Is=null,Os=0,n=Ls),0!=(Bs&Fs))xl(e,0);else if(0!==n){if(2===n&&(Ms|=64,e.hydrate&&(e.hydrate=!1,qn(e.containerInfo)),0!==(r=Ft(e))&&(n=Cl(e,r))),1===n)throw t=Ds,xl(e,0),ml(e,r),hl(e,Na()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=r,n){case 0:case 1:throw Error(o(345));case 2:Ml(e);break;case 3:if(ml(e,r),(62914560&r)===r&&10<(n=js+500-Na())){if(0!==$t(e,0))break;if(((a=e.suspendedLanes)&r)!==r){cl(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=jn(Ml.bind(null,e),n);break}Ml(e);break;case 4:if(ml(e,r),(4186112&r)===r)break;for(n=e.eventTimes,a=-1;0<r;){var s=31-qt(r);i=1<<s,(s=n[s])>a&&(a=s),r&=~i}if(r=a,10<(r=(120>(r=Na()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ts(r/1960))-r)){e.timeoutHandle=jn(Ml.bind(null,e),r);break}Ml(e);break;case 5:Ml(e);break;default:throw Error(o(329))}}return hl(e,Na()),e.callbackNode===t?fl.bind(null,e):null}function ml(e,t){for(t&=~Ns,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-qt(t),n=1<<r;e[r]=-1,t&=~n}}function gl(e){if(0!=(48&Ms))throw Error(o(327));if(Ol(),e===Is&&0!=(e.expiredLanes&Os)){var t=Os,r=Cl(e,t);0!=(Bs&Fs)&&(r=Cl(e,t=$t(e,t)))}else r=Cl(e,t=$t(e,0));if(0!==e.tag&&2===r&&(Ms|=64,e.hydrate&&(e.hydrate=!1,qn(e.containerInfo)),0!==(t=Ft(e))&&(r=Cl(e,t))),1===r)throw r=Ds,xl(e,0),ml(e,t),hl(e,Na()),r;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ml(e),hl(e,Na()),null}function vl(e,t){var r=Ms;Ms|=1;try{return e(t)}finally{0===(Ms=r)&&(qs(),Ha())}}function yl(e,t){var r=Ms;Ms&=-2,Ms|=8;try{return e(t)}finally{0===(Ms=r)&&(qs(),Ha())}}function bl(e,t){la(Rs,zs),zs|=t,Bs|=t}function _l(){zs=Rs.current,sa(Rs)}function xl(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,Un(r)),null!==As)for(r=As.return;null!==r;){var n=r;switch(n.tag){case 1:null!=(n=n.type.childContextTypes)&&ma();break;case 3:Ai(),sa(pa),sa(ua),Gi();break;case 5:zi(n);break;case 4:Ai();break;case 13:case 19:sa(Ri);break;case 10:ei(n);break;case 23:case 24:_l()}r=r.return}Is=e,As=Ul(e.current,null),Os=zs=Bs=t,Ls=0,Ds=null,Ns=Fs=$s=0}function wl(e,t){for(;;){var r=As;try{if(Ja(),Wi.current=Mo,Ji){for(var n=Yi.memoizedState;null!==n;){var a=n.queue;null!==a&&(a.pending=null),n=n.next}Ji=!1}if(Zi=0,Qi=Ki=Yi=null,eo=!1,Ps.current=null,null===r||null===r.return){Ls=1,Ds=t,As=null;break}e:{var i=e,o=r.return,s=r,l=t;if(t=Os,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l;if(0==(2&s.mode)){var u=s.alternate;u?(s.updateQueue=u.updateQueue,s.memoizedState=u.memoizedState,s.lanes=u.lanes):(s.updateQueue=null,s.memoizedState=null)}var p=0!=(1&Ri.current),d=o;do{var h;if(h=13===d.tag){var f=d.memoizedState;if(null!==f)h=null!==f.dehydrated;else{var m=d.memoizedProps;h=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!p)}}if(h){var g=d.updateQueue;if(null===g){var v=new Set;v.add(c),d.updateQueue=v}else g.add(c);if(0==(2&d.mode)){if(d.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=si(-1,1);y.tag=2,li(s,y)}s.lanes|=1;break e}l=void 0,s=t;var b=i.pingCache;if(null===b?(b=i.pingCache=new ls,l=new Set,b.set(c,l)):void 0===(l=b.get(c))&&(l=new Set,b.set(c,l)),!l.has(s)){l.add(s);var _=$l.bind(null,i,c,s);c.then(_,_)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);l=Error((W(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ls&&(Ls=2),l=os(l,s),d=o;do{switch(d.tag){case 3:i=l,d.flags|=4096,t&=-t,d.lanes|=t,ci(d,cs(0,i,t));break e;case 1:i=l;var x=d.type,w=d.stateNode;if(0==(64&d.flags)&&("function"==typeof x.getDerivedStateFromError||null!==w&&"function"==typeof w.componentDidCatch&&(null===Zs||!Zs.has(w)))){d.flags|=4096,t&=-t,d.lanes|=t,ci(d,us(d,i,t));break e}}d=d.return}while(null!==d)}Pl(r)}catch(e){t=e,As===r&&null!==r&&(As=r=r.return);continue}break}}function El(){var e=Ss.current;return Ss.current=Mo,null===e?Mo:e}function Cl(e,t){var r=Ms;Ms|=16;var n=El();for(Is===e&&Os===t||xl(e,t);;)try{kl();break}catch(t){wl(e,t)}if(Ja(),Ms=r,Ss.current=n,null!==As)throw Error(o(261));return Is=null,Os=0,Ls}function kl(){for(;null!==As;)Sl(As)}function Tl(){for(;null!==As&&!ka();)Sl(As)}function Sl(e){var t=Hs(e.alternate,e,zs);e.memoizedProps=e.pendingProps,null===t?Pl(e):As=t,Ps.current=null}function Pl(e){var t=e;do{var r=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(r=as(r,t,zs)))return void(As=r);if(24!==(r=t).tag&&23!==r.tag||null===r.memoizedState||0!=(1073741824&zs)||0==(4&r.mode)){for(var n=0,a=r.child;null!==a;)n|=a.lanes|a.childLanes,a=a.sibling;r.childLanes=n}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(r=is(t)))return r.flags&=2047,void(As=r);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Ls&&(Ls=5)}function Ml(e){var t=Va();return Ua(99,Il.bind(null,e,t)),null}function Il(e,t){do{Ol()}while(null!==Ks);if(0!=(48&Ms))throw Error(o(327));var r=e.finishedWork;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(o(177));e.callbackNode=null;var n=r.lanes|r.childLanes,a=n,i=e.pendingLanes&~a;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=a,e.mutableReadLanes&=a,e.entangledLanes&=a,a=e.entanglements;for(var s=e.eventTimes,l=e.expirationTimes;0<i;){var c=31-qt(i),u=1<<c;a[c]=0,s[c]=-1,l[c]=-1,i&=~u}if(null!==tl&&0==(24&n)&&tl.has(e)&&tl.delete(e),e===Is&&(As=Is=null,Os=0),1<r.flags?null!==r.lastEffect?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,null!==n){if(a=Ms,Ms|=32,Ps.current=null,$n=Zt,fn(s=hn())){if("selectionStart"in s)l={start:s.selectionStart,end:s.selectionEnd};else e:if(l=(l=s.ownerDocument)&&l.defaultView||window,(u=l.getSelection&&l.getSelection())&&0!==u.rangeCount){l=u.anchorNode,i=u.anchorOffset,c=u.focusNode,u=u.focusOffset;try{l.nodeType,c.nodeType}catch(e){l=null;break e}var p=0,d=-1,h=-1,f=0,m=0,g=s,v=null;t:for(;;){for(var y;g!==l||0!==i&&3!==g.nodeType||(d=p+i),g!==c||0!==u&&3!==g.nodeType||(h=p+u),3===g.nodeType&&(p+=g.nodeValue.length),null!==(y=g.firstChild);)v=g,g=y;for(;;){if(g===s)break t;if(v===l&&++f===i&&(d=p),v===c&&++m===u&&(h=p),null!==(y=g.nextSibling))break;v=(g=v).parentNode}g=y}l=-1===d||-1===h?null:{start:d,end:h}}else l=null;l=l||{start:0,end:0}}else l=null;Fn={focusedElem:s,selectionRange:l},Zt=!1,sl=null,ll=!1,Gs=n;do{try{Al()}catch(e){if(null===Gs)throw Error(o(330));Bl(Gs,e),Gs=Gs.nextEffect}}while(null!==Gs);sl=null,Gs=n;do{try{for(s=e;null!==Gs;){var b=Gs.flags;if(16&b&&ye(Gs.stateNode,""),128&b){var _=Gs.alternate;if(null!==_){var x=_.ref;null!==x&&("function"==typeof x?x(null):x.current=null)}}switch(1038&b){case 2:bs(Gs),Gs.flags&=-3;break;case 6:bs(Gs),Gs.flags&=-3,Es(Gs.alternate,Gs);break;case 1024:Gs.flags&=-1025;break;case 1028:Gs.flags&=-1025,Es(Gs.alternate,Gs);break;case 4:Es(Gs.alternate,Gs);break;case 8:ws(s,l=Gs);var w=l.alternate;vs(l),null!==w&&vs(w)}Gs=Gs.nextEffect}}catch(e){if(null===Gs)throw Error(o(330));Bl(Gs,e),Gs=Gs.nextEffect}}while(null!==Gs);if(x=Fn,_=hn(),b=x.focusedElem,s=x.selectionRange,_!==b&&b&&b.ownerDocument&&dn(b.ownerDocument.documentElement,b)){null!==s&&fn(b)&&(_=s.start,void 0===(x=s.end)&&(x=_),"selectionStart"in b?(b.selectionStart=_,b.selectionEnd=Math.min(x,b.value.length)):(x=(_=b.ownerDocument||document)&&_.defaultView||window).getSelection&&(x=x.getSelection(),l=b.textContent.length,w=Math.min(s.start,l),s=void 0===s.end?w:Math.min(s.end,l),!x.extend&&w>s&&(l=s,s=w,w=l),l=pn(b,w),i=pn(b,s),l&&i&&(1!==x.rangeCount||x.anchorNode!==l.node||x.anchorOffset!==l.offset||x.focusNode!==i.node||x.focusOffset!==i.offset)&&((_=_.createRange()).setStart(l.node,l.offset),x.removeAllRanges(),w>s?(x.addRange(_),x.extend(i.node,i.offset)):(_.setEnd(i.node,i.offset),x.addRange(_))))),_=[];for(x=b;x=x.parentNode;)1===x.nodeType&&_.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<_.length;b++)(x=_[b]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Zt=!!$n,Fn=$n=null,e.current=r,Gs=n;do{try{for(b=e;null!==Gs;){var E=Gs.flags;if(36&E&&fs(b,Gs.alternate,Gs),128&E){_=void 0;var C=Gs.ref;if(null!==C){var k=Gs.stateNode;switch(Gs.tag){case 5:_=k;break;default:_=k}"function"==typeof C?C(_):C.current=_}}Gs=Gs.nextEffect}}catch(e){if(null===Gs)throw Error(o(330));Bl(Gs,e),Gs=Gs.nextEffect}}while(null!==Gs);Gs=null,La(),Ms=a}else e.current=r;if(Ys)Ys=!1,Ks=e,Qs=t;else for(Gs=n;null!==Gs;)t=Gs.nextEffect,Gs.nextEffect=null,8&Gs.flags&&((E=Gs).sibling=null,E.stateNode=null),Gs=t;if(0===(n=e.pendingLanes)&&(Zs=null),1===n?e===nl?rl++:(rl=0,nl=e):rl=0,r=r.stateNode,xa&&"function"==typeof xa.onCommitFiberRoot)try{xa.onCommitFiberRoot(_a,r,void 0,64==(64&r.current.flags))}catch(e){}if(hl(e,Na()),Ws)throw Ws=!1,e=Xs,Xs=null,e;return 0!=(8&Ms)||Ha(),null}function Al(){for(;null!==Gs;){var e=Gs.alternate;ll||null===sl||(0!=(8&Gs.flags)?et(Gs,sl)&&(ll=!0):13===Gs.tag&&ks(e,Gs)&&et(Gs,sl)&&(ll=!0));var t=Gs.flags;0!=(256&t)&&hs(e,Gs),0==(512&t)||Ys||(Ys=!0,qa(97,(function(){return Ol(),null}))),Gs=Gs.nextEffect}}function Ol(){if(90!==Qs){var e=97<Qs?97:Qs;return Qs=90,Ua(e,Ll)}return!1}function zl(e,t){Js.push(t,e),Ys||(Ys=!0,qa(97,(function(){return Ol(),null})))}function Rl(e,t){el.push(t,e),Ys||(Ys=!0,qa(97,(function(){return Ol(),null})))}function Ll(){if(null===Ks)return!1;var e=Ks;if(Ks=null,0!=(48&Ms))throw Error(o(331));var t=Ms;Ms|=32;var r=el;el=[];for(var n=0;n<r.length;n+=2){var a=r[n],i=r[n+1],s=a.destroy;if(a.destroy=void 0,"function"==typeof s)try{s()}catch(e){if(null===i)throw Error(o(330));Bl(i,e)}}for(r=Js,Js=[],n=0;n<r.length;n+=2){a=r[n],i=r[n+1];try{var l=a.create;a.destroy=l()}catch(e){if(null===i)throw Error(o(330));Bl(i,e)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return Ms=t,Ha(),!0}function Dl(e,t,r){li(e,t=cs(0,t=os(r,t),1)),t=cl(),null!==(e=dl(e,1))&&(Ut(e,1,t),hl(e,t))}function Bl(e,t){if(3===e.tag)Dl(e,e,t);else for(var r=e.return;null!==r;){if(3===r.tag){Dl(r,e,t);break}if(1===r.tag){var n=r.stateNode;if("function"==typeof r.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===Zs||!Zs.has(n))){var a=us(r,e=os(t,e),1);if(li(r,a),a=cl(),null!==(r=dl(r,1)))Ut(r,1,a),hl(r,a);else if("function"==typeof n.componentDidCatch&&(null===Zs||!Zs.has(n)))try{n.componentDidCatch(t,e)}catch(e){}break}}r=r.return}}function $l(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=cl(),e.pingedLanes|=e.suspendedLanes&r,Is===e&&(Os&r)===r&&(4===Ls||3===Ls&&(62914560&Os)===Os&&500>Na()-js?xl(e,0):Ns|=r),hl(e,t)}function Fl(e,t){var r=e.stateNode;null!==r&&r.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===Va()?1:2:(0===il&&(il=Bs),0===(t=Vt(62914560&~il))&&(t=4194304))),r=cl(),null!==(e=dl(e,t))&&(Ut(e,t,r),hl(e,r))}function Nl(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Vl(e,t,r,n){return new Nl(e,t,r,n)}function jl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ul(e,t){var r=e.alternate;return null===r?((r=Vl(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ql(e,t,r,n,a,i){var s=2;if(n=e,"function"==typeof e)jl(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case C:return Hl(r.children,a,i,t);case D:s=8,a|=16;break;case k:s=8,a|=1;break;case T:return(e=Vl(12,r,t,8|a)).elementType=T,e.type=T,e.lanes=i,e;case I:return(e=Vl(13,r,t,a)).type=I,e.elementType=I,e.lanes=i,e;case A:return(e=Vl(19,r,t,a)).elementType=A,e.lanes=i,e;case B:return Gl(r,a,i,t);case $:return(e=Vl(24,r,t,a)).elementType=$,e.lanes=i,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case P:s=9;break e;case M:s=11;break e;case O:s=14;break e;case z:s=16,n=null;break e;case R:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Vl(s,r,t,a)).elementType=e,t.type=n,t.lanes=i,t}function Hl(e,t,r,n){return(e=Vl(7,e,n,t)).lanes=r,e}function Gl(e,t,r,n){return(e=Vl(23,e,n,t)).elementType=B,e.lanes=r,e}function Wl(e,t,r){return(e=Vl(6,e,null,t)).lanes=r,e}function Xl(e,t,r){return(t=Vl(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zl(e,t,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=jt(0),this.expirationTimes=jt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jt(0),this.mutableSourceEagerHydrationData=null}function Yl(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}function Kl(e,t,r,n){var a=t.current,i=cl(),s=ul(a);e:if(r){t:{if(Ye(r=r._reactInternals)!==r||1!==r.tag)throw Error(o(170));var l=r;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(fa(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(o(171))}if(1===r.tag){var c=r.type;if(fa(c)){r=va(r,c,l);break e}}r=l}else r=ca;return null===t.context?t.context=r:t.pendingContext=r,(t=si(i,s)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),li(a,t),pl(a,s,i),s}function Ql(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Jl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function ec(e,t){Jl(e,t),(e=e.alternate)&&Jl(e,t)}function tc(e,t,r){var n=null!=r&&null!=r.hydrationOptions&&r.hydrationOptions.mutableSources||null;if(r=new Zl(e,t,null!=r&&!0===r.hydrate),t=Vl(3,null,null,2===t?7:1===t?3:0),r.current=t,t.stateNode=r,ii(t),e[Kn]=r.current,Mn(8===e.nodeType?e.parentNode:e),n)for(e=0;e<n.length;e++){var a=(t=n[e])._getVersion;a=a(t._source),null==r.mutableSourceEagerHydrationData?r.mutableSourceEagerHydrationData=[t,a]:r.mutableSourceEagerHydrationData.push(t,a)}this._internalRoot=r}function rc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function nc(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i._internalRoot;if("function"==typeof a){var s=a;a=function(){var e=Ql(o);s.call(e)}}Kl(t,o,e,a)}else{if(i=r._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new tc(e,0,t?{hydrate:!0}:void 0)}(r,n),o=i._internalRoot,"function"==typeof a){var l=a;a=function(){var e=Ql(o);l.call(e)}}yl((function(){Kl(t,o,e,a)}))}return Ql(o)}function ac(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!rc(t))throw Error(o(200));return Yl(e,t,null,r)}Hs=function(e,t,r){var n=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pa.current)Ro=!0;else{if(0==(r&n)){switch(Ro=!1,t.tag){case 3:qo(t),qi();break;case 5:Oi(t);break;case 1:fa(t.type)&&ya(t);break;case 4:Ii(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value;var a=t.type._context;la(Za,a._currentValue),a._currentValue=n;break;case 13:if(null!==t.memoizedState)return 0!=(r&t.child.childLanes)?Zo(e,t,r):(la(Ri,1&Ri.current),null!==(t=rs(e,t,r))?t.sibling:null);la(Ri,1&Ri.current);break;case 19:if(n=0!=(r&t.childLanes),0!=(64&e.flags)){if(n)return ts(e,t,r);t.flags|=64}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),la(Ri,Ri.current),n)break;return null;case 23:case 24:return t.lanes=0,Fo(e,t,r)}return rs(e,t,r)}Ro=0!=(16384&e.flags)}else Ro=!1;switch(t.lanes=0,t.tag){case 2:if(n=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=ha(t,ua.current),ri(t,r),a=no(null,t,n,e,a,r),t.flags|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,fa(n)){var i=!0;ya(t)}else i=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,ii(t);var s=n.getDerivedStateFromProps;"function"==typeof s&&hi(t,n,s,e),a.updater=fi,t.stateNode=a,a._reactInternals=t,yi(t,n,e,r),t=Uo(null,t,n,!0,i,r)}else t.tag=0,Lo(null,t,a,r),t=t.child;return t;case 16:a=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=(i=a._init)(a._payload),t.type=a,i=t.tag=function(e){if("function"==typeof e)return jl(e)?1:0;if(null!=e){if((e=e.$$typeof)===M)return 11;if(e===O)return 14}return 2}(a),e=Xa(a,e),i){case 0:t=Vo(null,t,a,e,r);break e;case 1:t=jo(null,t,a,e,r);break e;case 11:t=Do(null,t,a,e,r);break e;case 14:t=Bo(null,t,a,Xa(a.type,e),n,r);break e}throw Error(o(306,a,""))}return t;case 0:return n=t.type,a=t.pendingProps,Vo(e,t,n,a=t.elementType===n?a:Xa(n,a),r);case 1:return n=t.type,a=t.pendingProps,jo(e,t,n,a=t.elementType===n?a:Xa(n,a),r);case 3:if(qo(t),n=t.updateQueue,null===e||null===n)throw Error(o(282));if(n=t.pendingProps,a=null!==(a=t.memoizedState)?a.element:null,oi(e,t),ui(t,n,null,r),(n=t.memoizedState.element)===a)qi(),t=rs(e,t,r);else{if((i=(a=t.stateNode).hydrate)&&(Bi=Hn(t.stateNode.containerInfo.firstChild),Di=t,i=$i=!0),i){if(null!=(e=a.mutableSourceEagerHydrationData))for(a=0;a<e.length;a+=2)(i=e[a])._workInProgressVersionPrimary=e[a+1],Hi.push(i);for(r=Ci(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|1024,r=r.sibling}else Lo(e,t,n,r),qi();t=t.child}return t;case 5:return Oi(t),null===e&&Vi(t),n=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,s=a.children,Vn(n,a)?s=null:null!==i&&Vn(n,i)&&(t.flags|=16),No(e,t),Lo(e,t,s,r),t.child;case 6:return null===e&&Vi(t),null;case 13:return Zo(e,t,r);case 4:return Ii(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Ei(t,null,n,r):Lo(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,Do(e,t,n,a=t.elementType===n?a:Xa(n,a),r);case 7:return Lo(e,t,t.pendingProps,r),t.child;case 8:case 12:return Lo(e,t,t.pendingProps.children,r),t.child;case 10:e:{n=t.type._context,a=t.pendingProps,s=t.memoizedProps,i=a.value;var l=t.type._context;if(la(Za,l._currentValue),l._currentValue=i,null!==s)if(l=s.value,0===(i=sn(l,i)?0:0|("function"==typeof n._calculateChangedBits?n._calculateChangedBits(l,i):1073741823))){if(s.children===a.children&&!pa.current){t=rs(e,t,r);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.dependencies;if(null!==c){s=l.child;for(var u=c.firstContext;null!==u;){if(u.context===n&&0!=(u.observedBits&i)){1===l.tag&&((u=si(-1,r&-r)).tag=2,li(l,u)),l.lanes|=r,null!==(u=l.alternate)&&(u.lanes|=r),ti(l.return,r),c.lanes|=r;break}u=u.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}Lo(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=(i=t.pendingProps).children,ri(t,r),n=n(a=ni(a,i.unstable_observedBits)),t.flags|=1,Lo(e,t,n,r),t.child;case 14:return i=Xa(a=t.type,t.pendingProps),Bo(e,t,a,i=Xa(a.type,i),n,r);case 15:return $o(e,t,t.type,t.pendingProps,n,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Xa(n,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,fa(n)?(e=!0,ya(t)):e=!1,ri(t,r),gi(t,n,a),yi(t,n,a,r),Uo(null,t,n,!0,e,r);case 19:return ts(e,t,r);case 23:case 24:return Fo(e,t,r)}throw Error(o(156,t.tag))},tc.prototype.render=function(e){Kl(e,this._internalRoot,null,null)},tc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Kl(null,e,null,(function(){t[Kn]=null}))},tt=function(e){13===e.tag&&(pl(e,4,cl()),ec(e,4))},rt=function(e){13===e.tag&&(pl(e,67108864,cl()),ec(e,67108864))},nt=function(e){if(13===e.tag){var t=cl(),r=ul(e);pl(e,r,t),ec(e,r)}},at=function(e,t){return t()},Se=function(e,t,r){switch(t){case"input":if(re(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=ra(n);if(!a)throw Error(o(90));K(n),re(n,a)}}}break;case"textarea":ce(e,r);break;case"select":null!=(t=r.value)&&oe(e,!!r.multiple,t,!1)}},ze=vl,Re=function(e,t,r,n,a){var i=Ms;Ms|=4;try{return Ua(98,e.bind(null,t,r,n,a))}finally{0===(Ms=i)&&(qs(),Ha())}},Le=function(){0==(49&Ms)&&(function(){if(null!==tl){var e=tl;tl=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,hl(e,Na())}))}Ha()}(),Ol())},De=function(e,t){var r=Ms;Ms|=2;try{return e(t)}finally{0===(Ms=r)&&(qs(),Ha())}};var ic={Events:[ea,ta,ra,Ae,Oe,Ol,{current:!1}]},oc={findFiberByHostInstance:Jn,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},sc={bundleType:oc.bundleType,version:oc.version,rendererPackageName:oc.rendererPackageName,rendererConfig:oc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Je(e))?null:e.stateNode},findFiberByHostInstance:oc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{_a=lc.inject(sc),xa=lc}catch(ge){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ic,t.createPortal=ac,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Je(t))?null:e.stateNode},t.flushSync=function(e,t){var r=Ms;if(0!=(48&r))return e(t);Ms|=1;try{if(e)return Ua(99,e.bind(null,t))}finally{Ms=r,Ha()}},t.hydrate=function(e,t,r){if(!rc(t))throw Error(o(200));return nc(null,e,t,!0,r)},t.render=function(e,t,r){if(!rc(t))throw Error(o(200));return nc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!rc(e))throw Error(o(40));return!!e._reactRootContainer&&(yl((function(){nc(null,null,e,!1,(function(){e._reactRootContainer=null,e[Kn]=null}))})),!0)},t.unstable_batchedUpdates=vl,t.unstable_createPortal=function(e,t){return ac(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!rc(r))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return nc(e,t,r,!1,n)},t.version="17.0.2"},3935:function(e,t,r){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=r(4448)},9921:function(e,t){"use strict";var r="function"==typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,o=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,u=r?Symbol.for("react.async_mode"):60111,p=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,f=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,y=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,_=r?Symbol.for("react.scope"):60119;function x(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case u:case p:case i:case s:case o:case h:return e;default:switch(e=e&&e.$$typeof){case c:case d:case g:case m:case l:return e;default:return t}}case a:return t}}}function w(e){return x(e)===p}t.AsyncMode=u,t.ConcurrentMode=p,t.ContextConsumer=c,t.ContextProvider=l,t.Element=n,t.ForwardRef=d,t.Fragment=i,t.Lazy=g,t.Memo=m,t.Portal=a,t.Profiler=s,t.StrictMode=o,t.Suspense=h,t.isAsyncMode=function(e){return w(e)||x(e)===u},t.isConcurrentMode=w,t.isContextConsumer=function(e){return x(e)===c},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return x(e)===d},t.isFragment=function(e){return x(e)===i},t.isLazy=function(e){return x(e)===g},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===a},t.isProfiler=function(e){return x(e)===s},t.isStrictMode=function(e){return x(e)===o},t.isSuspense=function(e){return x(e)===h},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===p||e===s||e===o||e===h||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===y||e.$$typeof===b||e.$$typeof===_||e.$$typeof===v)},t.typeOf=x},9864:function(e,t,r){"use strict";e.exports=r(9921)},3052:function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=s(r(4648)),i=s(r(5697)),o=r(6486);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}r(7899);var u=function(e){function t(){var e,r,n;l(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=n=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={error:!1,errorMsg:"",query:n.props.query?n.props.query:"",queryResults:[],publicKey:n.props.publicKey,resetSearch:!!n.props.resetSearch&&n.props.resetSearch},n._updateQuery=function(e){n.setState({query:e.target.value});var t="https://api.mapbox.com/geocoding/v5/mapbox.places/"+n.state.query+".json?access_token="+n.state.publicKey;if(n.props.country&&(t="https://api.mapbox.com/geocoding/v5/mapbox.places/"+n.state.query+".json?access_token="+n.state.publicKey+"&country="+n.props.country),n.state.query.length>2)return fetch(t,{headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(e){n.setState({error:!1,queryResults:e.features})})).catch((function(e){n.setState({error:!0,errorMsg:"There was a problem retrieving data from mapbox",queryResults:[]})}));n.setState({error:!1,queryResults:[]})},n._resetSearch=function(){n.state.resetSearch?n.setState({query:"",queryResults:[]}):n.setState({queryResults:[]})},n._onSuggestionSelect=function(e){!1===n.state.resetSearch&&n.setState({query:e.target.getAttribute("data-suggestion")}),n.props.onSuggestionSelect(e.target.getAttribute("data-suggestion"),e.target.getAttribute("data-lat"),e.target.getAttribute("data-lng"),e.target.getAttribute("data-text"))},c(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"render",value:function(){var e=this;return a.default.createElement("div",null,a.default.createElement("input",{placeholder:this.props.placeholder||"Search",className:this.props.inputClass?this.props.inputClass+" react-mapbox-ac-input":"react-mapbox-ac-input",onChange:this._updateQuery,value:this.state.query,type:"text"}),a.default.createElement("span",null,a.default.createElement("div",{className:"react-mapbox-ac-menu",style:this.state.queryResults.length>0||this.state.error?{display:"block"}:{display:"none"},onClick:this._resetSearch},(0,o.map)(this.state.queryResults,(function(t,r){return a.default.createElement("div",{className:"react-mapbox-ac-suggestion",onClick:e._onSuggestionSelect,key:r,"data-suggestion":t.place_name,"data-lng":t.center[0],"data-lat":t.center[1],"data-text":t.text},t.place_name)})),this.state.error&&a.default.createElement("div",{className:"react-mapbox-ac-suggestion"},this.state.errorMsg))))}}]),t}(a.default.Component);u.propTypes={inputClass:i.default.string,publicKey:i.default.string.isRequired,placeholder:i.default.string,onSuggestionSelect:i.default.func.isRequired,country:i.default.string,query:i.default.string,resetSearch:i.default.bool}},722:function(e){"use strict";var t={escape:function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))},unescape:function(e){var t={"=0":"=","=2":":"};return(""+("."===e[0]&&"$"===e[1]?e.substring(2):e.substring(1))).replace(/(=0|=2)/g,(function(e){return t[e]}))}};e.exports=t},9842:function(e,t,r){"use strict";var n=r(1994),a=(r(3759),function(e){var t=this;if(t.instancePool.length){var r=t.instancePool.pop();return t.call(r,e),r}return new t(e)}),i=function(e){var t=this;e instanceof t||n("25"),e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},o=a,s={addPoolingTo:function(e,t){var r=e;return r.instancePool=[],r.getPooled=t||o,r.poolSize||(r.poolSize=10),r.release=i,r},oneArgumentPooler:a,twoArgumentPooler:function(e,t){var r=this;if(r.instancePool.length){var n=r.instancePool.pop();return r.call(n,e,t),n}return new r(e,t)},threeArgumentPooler:function(e,t,r){var n=this;if(n.instancePool.length){var a=n.instancePool.pop();return n.call(a,e,t,r),a}return new n(e,t,r)},fourArgumentPooler:function(e,t,r,n){var a=this;if(a.instancePool.length){var i=a.instancePool.pop();return a.call(i,e,t,r,n),i}return new a(e,t,r,n)}};e.exports=s},1311:function(e,t,r){"use strict";var n=r(7418),a=r(4997),i=r(794),o=r(7034),s=r(9652),l=r(362),c=r(3010),u=r(2916),p=r(7270),d=s.createElement,h=s.createFactory,f=s.cloneElement,m=n,g={Children:{map:i.map,forEach:i.forEach,count:i.count,toArray:i.toArray,only:p},Component:a.Component,PureComponent:a.PureComponent,createElement:d,cloneElement:f,isValidElement:s.isValidElement,PropTypes:l,createClass:u,createFactory:h,createMixin:function(e){return e},DOM:o,version:c,__spread:m};e.exports=g},4997:function(e,t,r){"use strict";var n=r(1994),a=r(7418),i=r(8198),o=(r(9985),r(3677));r(3759),r(3013);function s(e,t,r){this.props=e,this.context=t,this.refs=o,this.updater=r||i}function l(e,t,r){this.props=e,this.context=t,this.refs=o,this.updater=r||i}function c(){}s.prototype.isReactComponent={},s.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&n("85"),this.updater.enqueueSetState(this,e),t&&this.updater.enqueueCallback(this,t,"setState")},s.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e,"forceUpdate")},c.prototype=s.prototype,l.prototype=new c,l.prototype.constructor=l,a(l.prototype,s.prototype),l.prototype.isPureReactComponent=!0,e.exports={Component:s,PureComponent:l}},794:function(e,t,r){"use strict";var n=r(9842),a=r(9652),i=r(139),o=r(9587),s=n.twoArgumentPooler,l=n.fourArgumentPooler,c=/\/+/g;function u(e){return(""+e).replace(c,"$&/")}function p(e,t){this.func=e,this.context=t,this.count=0}function d(e,t,r){var n=e.func,a=e.context;n.call(a,t,e.count++)}function h(e,t,r,n){this.result=e,this.keyPrefix=t,this.func=r,this.context=n,this.count=0}function f(e,t,r){var n=e.result,o=e.keyPrefix,s=e.func,l=e.context,c=s.call(l,t,e.count++);Array.isArray(c)?m(c,n,r,i.thatReturnsArgument):null!=c&&(a.isValidElement(c)&&(c=a.cloneAndReplaceKey(c,o+(!c.key||t&&t.key===c.key?"":u(c.key)+"/")+r)),n.push(c))}function m(e,t,r,n,a){var i="";null!=r&&(i=u(r)+"/");var s=h.getPooled(t,i,n,a);o(e,f,s),h.release(s)}function g(e,t,r){return null}p.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},n.addPoolingTo(p,s),h.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},n.addPoolingTo(h,l);var v={forEach:function(e,t,r){if(null==e)return e;var n=p.getPooled(t,r);o(e,d,n),p.release(n)},map:function(e,t,r){if(null==e)return e;var n=[];return m(e,n,null,t,r),n},mapIntoWithKeyPrefixInternal:m,count:function(e,t){return o(e,g,null)},toArray:function(e){var t=[];return m(e,t,null,i.thatReturnsArgument),t}};e.exports=v},8027:function(e){"use strict";e.exports={current:null}},7034:function(e,t,r){"use strict";var n=r(9652).createFactory,a={a:n("a"),abbr:n("abbr"),address:n("address"),area:n("area"),article:n("article"),aside:n("aside"),audio:n("audio"),b:n("b"),base:n("base"),bdi:n("bdi"),bdo:n("bdo"),big:n("big"),blockquote:n("blockquote"),body:n("body"),br:n("br"),button:n("button"),canvas:n("canvas"),caption:n("caption"),cite:n("cite"),code:n("code"),col:n("col"),colgroup:n("colgroup"),data:n("data"),datalist:n("datalist"),dd:n("dd"),del:n("del"),details:n("details"),dfn:n("dfn"),dialog:n("dialog"),div:n("div"),dl:n("dl"),dt:n("dt"),em:n("em"),embed:n("embed"),fieldset:n("fieldset"),figcaption:n("figcaption"),figure:n("figure"),footer:n("footer"),form:n("form"),h1:n("h1"),h2:n("h2"),h3:n("h3"),h4:n("h4"),h5:n("h5"),h6:n("h6"),head:n("head"),header:n("header"),hgroup:n("hgroup"),hr:n("hr"),html:n("html"),i:n("i"),iframe:n("iframe"),img:n("img"),input:n("input"),ins:n("ins"),kbd:n("kbd"),keygen:n("keygen"),label:n("label"),legend:n("legend"),li:n("li"),link:n("link"),main:n("main"),map:n("map"),mark:n("mark"),menu:n("menu"),menuitem:n("menuitem"),meta:n("meta"),meter:n("meter"),nav:n("nav"),noscript:n("noscript"),object:n("object"),ol:n("ol"),optgroup:n("optgroup"),option:n("option"),output:n("output"),p:n("p"),param:n("param"),picture:n("picture"),pre:n("pre"),progress:n("progress"),q:n("q"),rp:n("rp"),rt:n("rt"),ruby:n("ruby"),s:n("s"),samp:n("samp"),script:n("script"),section:n("section"),select:n("select"),small:n("small"),source:n("source"),span:n("span"),strong:n("strong"),style:n("style"),sub:n("sub"),summary:n("summary"),sup:n("sup"),table:n("table"),tbody:n("tbody"),td:n("td"),textarea:n("textarea"),tfoot:n("tfoot"),th:n("th"),thead:n("thead"),time:n("time"),title:n("title"),tr:n("tr"),track:n("track"),u:n("u"),ul:n("ul"),var:n("var"),video:n("video"),wbr:n("wbr"),circle:n("circle"),clipPath:n("clipPath"),defs:n("defs"),ellipse:n("ellipse"),g:n("g"),image:n("image"),line:n("line"),linearGradient:n("linearGradient"),mask:n("mask"),path:n("path"),pattern:n("pattern"),polygon:n("polygon"),polyline:n("polyline"),radialGradient:n("radialGradient"),rect:n("rect"),stop:n("stop"),svg:n("svg"),text:n("text"),tspan:n("tspan")};e.exports=a},9652:function(e,t,r){"use strict";var n=r(7418),a=r(8027),i=(r(3620),r(9985),Object.prototype.hasOwnProperty),o=r(1547),s={key:!0,ref:!0,__self:!0,__source:!0};function l(e){return void 0!==e.ref}function c(e){return void 0!==e.key}var u=function(e,t,r,n,a,i,s){return{$$typeof:o,type:e,key:t,ref:r,props:s,_owner:i}};u.createElement=function(e,t,r){var n,o={},p=null,d=null;if(null!=t)for(n in l(t)&&(d=t.ref),c(t)&&(p=""+t.key),void 0===t.__self?null:t.__self,void 0===t.__source?null:t.__source,t)i.call(t,n)&&!s.hasOwnProperty(n)&&(o[n]=t[n]);var h=arguments.length-2;if(1===h)o.children=r;else if(h>1){for(var f=Array(h),m=0;m<h;m++)f[m]=arguments[m+2];0,o.children=f}if(e&&e.defaultProps){var g=e.defaultProps;for(n in g)void 0===o[n]&&(o[n]=g[n])}return u(e,p,d,0,0,a.current,o)},u.createFactory=function(e){var t=u.createElement.bind(null,e);return t.type=e,t},u.cloneAndReplaceKey=function(e,t){return u(e.type,t,e.ref,e._self,e._source,e._owner,e.props)},u.cloneElement=function(e,t,r){var o,p,d=n({},e.props),h=e.key,f=e.ref,m=(e._self,e._source,e._owner);if(null!=t)for(o in l(t)&&(f=t.ref,m=a.current),c(t)&&(h=""+t.key),e.type&&e.type.defaultProps&&(p=e.type.defaultProps),t)i.call(t,o)&&!s.hasOwnProperty(o)&&(void 0===t[o]&&void 0!==p?d[o]=p[o]:d[o]=t[o]);var g=arguments.length-2;if(1===g)d.children=r;else if(g>1){for(var v=Array(g),y=0;y<g;y++)v[y]=arguments[y+2];d.children=v}return u(e.type,h,f,0,0,m,d)},u.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===o},e.exports=u},1547:function(e){"use strict";var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=t},8198:function(e,t,r){"use strict";r(3620);var n={isMounted:function(e){return!1},enqueueCallback:function(e,t){},enqueueForceUpdate:function(e){},enqueueReplaceState:function(e,t){},enqueueSetState:function(e,t){}};e.exports=n},362:function(e,t,r){"use strict";var n=r(9652).isValidElement,a=r(7425);e.exports=a(n)},3010:function(e){"use strict";e.exports="15.7.0"},9985:function(e){"use strict";e.exports=!1},2916:function(e,t,r){"use strict";var n=r(4997).Component,a=r(9652).isValidElement,i=r(8198),o=r(6511);e.exports=o(n,a,i)},9900:function(e){"use strict";var t="function"==typeof Symbol&&Symbol.iterator;e.exports=function(e){var r=e&&(t&&e[t]||e["@@iterator"]);if("function"==typeof r)return r}},3013:function(e){"use strict";e.exports=function(){}},7270:function(e,t,r){"use strict";var n=r(1994),a=r(9652);r(3759);e.exports=function(e){return a.isValidElement(e)||n("143"),e}},1994:function(e){"use strict";e.exports=function(e){for(var t=arguments.length-1,r="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,n=0;n<t;n++)r+="&args[]="+encodeURIComponent(arguments[n+1]);r+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var a=new Error(r);throw a.name="Invariant Violation",a.framesToPop=1,a}},9587:function(e,t,r){"use strict";var n=r(1994),a=(r(8027),r(1547)),i=r(9900),o=(r(3759),r(722));r(3620);function s(e,t){return e&&"object"==typeof e&&null!=e.key?o.escape(e.key):t.toString(36)}function l(e,t,r,c){var u,p=typeof e;if("undefined"!==p&&"boolean"!==p||(e=null),null===e||"string"===p||"number"===p||"object"===p&&e.$$typeof===a)return r(c,e,""===t?"."+s(e,0):t),1;var d=0,h=""===t?".":t+":";if(Array.isArray(e))for(var f=0;f<e.length;f++)d+=l(u=e[f],h+s(u,f),r,c);else{var m=i(e);if(m){var g,v=m.call(e);if(m!==e.entries)for(var y=0;!(g=v.next()).done;)d+=l(u=g.value,h+s(u,y++),r,c);else for(;!(g=v.next()).done;){var b=g.value;b&&(d+=l(u=b[1],h+o.escape(b[0])+":"+s(u,0),r,c))}}else if("object"===p){var _=String(e);n("31","[object Object]"===_?"object with keys {"+Object.keys(e).join(", ")+"}":_,"")}}return d}e.exports=function(e,t,r){return null==e?0:l(e,"",t,r)}},4648:function(e,t,r){"use strict";e.exports=r(1311)},2408:function(e,t,r){"use strict";var n=r(7418),a=60103,i=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,l=60112;t.Suspense=60113;var c=60115,u=60116;if("function"==typeof Symbol&&Symbol.for){var p=Symbol.for;a=p("react.element"),i=p("react.portal"),t.Fragment=p("react.fragment"),t.StrictMode=p("react.strict_mode"),t.Profiler=p("react.profiler"),o=p("react.provider"),s=p("react.context"),l=p("react.forward_ref"),t.Suspense=p("react.suspense"),c=p("react.memo"),u=p("react.lazy")}var d="function"==typeof Symbol&&Symbol.iterator;function h(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||f}function v(){}function y(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||f}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(h(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=g.prototype;var b=y.prototype=new v;b.constructor=y,n(b,g.prototype),b.isPureReactComponent=!0;var _={current:null},x=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var n,i={},o=null,s=null;if(null!=t)for(n in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,n)&&!w.hasOwnProperty(n)&&(i[n]=t[n]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===i[n]&&(i[n]=l[n]);return{$$typeof:a,type:e,key:o,ref:s,props:i,_owner:_.current}}function C(e){return"object"==typeof e&&null!==e&&e.$$typeof===a}var k=/\/+/g;function T(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function S(e,t,r,n,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case a:case i:l=!0}}if(l)return o=o(l=e),e=""===n?"."+T(l,0):n,Array.isArray(o)?(r="",null!=e&&(r=e.replace(k,"$&/")+"/"),S(o,t,r,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,r+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(k,"$&/")+"/")+e)),t.push(o)),1;if(l=0,n=""===n?".":n+":",Array.isArray(e))for(var c=0;c<e.length;c++){var u=n+T(s=e[c],c);l+=S(s,t,r,u,o)}else if("function"==typeof(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e)))for(e=u.call(e),c=0;!(s=e.next()).done;)l+=S(s=s.value,t,r,u=n+T(s,c++),o);else if("object"===s)throw t=""+e,Error(h(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function P(e,t,r){if(null==e)return e;var n=[],a=0;return S(e,n,"","",(function(e){return t.call(r,e,a++)})),n}function M(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var I={current:null};function A(){var e=I.current;if(null===e)throw Error(h(321));return e}var O={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:_,IsSomeRendererActing:{current:!1},assign:n};t.Children={map:P,forEach:function(e,t,r){P(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error(h(143));return e}},t.Component=g,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null==e)throw Error(h(267,e));var i=n({},e.props),o=e.key,s=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,l=_.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)x.call(t,u)&&!w.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){c=Array(u);for(var p=0;p<u;p++)c[p]=arguments[p+2];i.children=c}return{$$typeof:a,type:e.type,key:o,ref:s,props:i,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return A().useCallback(e,t)},t.useContext=function(e,t){return A().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return A().useEffect(e,t)},t.useImperativeHandle=function(e,t,r){return A().useImperativeHandle(e,t,r)},t.useLayoutEffect=function(e,t){return A().useLayoutEffect(e,t)},t.useMemo=function(e,t){return A().useMemo(e,t)},t.useReducer=function(e,t,r){return A().useReducer(e,t,r)},t.useRef=function(e){return A().useRef(e)},t.useState=function(e){return A().useState(e)},t.version="17.0.2"},7294:function(e,t,r){"use strict";e.exports=r(2408)},8500:function(e,t,r){"use strict";var n=r(4890).qC;t.Uo="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?n:n.apply(null,arguments)},"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__},3488:function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e){var t=(0,a.default)(e);return{getItem:function(e){return new Promise((function(r,n){r(t.getItem(e))}))},setItem:function(e,r){return new Promise((function(n,a){n(t.setItem(e,r))}))},removeItem:function(e){return new Promise((function(r,n){r(t.removeItem(e))}))}}};var n,a=(n=r(7290))&&n.__esModule?n:{default:n}},7290:function(e,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(){}t.__esModule=!0,t.default=function(e){var t="".concat(e,"Storage");return function(e){if("object"!==("undefined"==typeof self?"undefined":r(self))||!(e in self))return!1;try{var t=self[e],n="redux-persist ".concat(e," test");t.setItem(n,"test"),t.getItem(n),t.removeItem(n)}catch(e){return!1}return!0}(t)?self[t]:a};var a={getItem:n,setItem:n,removeItem:n}},6734:function(e,t,r){"use strict";var n;t.Z=void 0;var a=(0,((n=r(3488))&&n.__esModule?n:{default:n}).default)("local");t.Z=a},4890:function(e,t,r){"use strict";function n(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}r.d(t,{qC:function(){return c},MT:function(){return l}});var a="function"==typeof Symbol&&Symbol.observable||"@@observable",i=function(){return Math.random().toString(36).substring(7).split("").join(".")},o={INIT:"@@redux/INIT"+i(),REPLACE:"@@redux/REPLACE"+i(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+i()}};function s(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function l(e,t,r){var i;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(n(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(n(1));return r(l)(e,t)}if("function"!=typeof e)throw new Error(n(2));var c=e,u=t,p=[],d=p,h=!1;function f(){d===p&&(d=p.slice())}function m(){if(h)throw new Error(n(3));return u}function g(e){if("function"!=typeof e)throw new Error(n(4));if(h)throw new Error(n(5));var t=!0;return f(),d.push(e),function(){if(t){if(h)throw new Error(n(6));t=!1,f();var r=d.indexOf(e);d.splice(r,1),p=null}}}function v(e){if(!s(e))throw new Error(n(7));if(void 0===e.type)throw new Error(n(8));if(h)throw new Error(n(9));try{h=!0,u=c(u,e)}finally{h=!1}for(var t=p=d,r=0;r<t.length;r++){(0,t[r])()}return e}function y(e){if("function"!=typeof e)throw new Error(n(10));c=e,v({type:o.REPLACE})}function b(){var e,t=g;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(n(11));function r(){e.next&&e.next(m())}return r(),{unsubscribe:t(r)}}})[a]=function(){return this},e}return v({type:o.INIT}),(i={dispatch:v,subscribe:g,getState:m,replaceReducer:y})[a]=b,i}function c(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}},5666:function(e){var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),o=new P(n||[]);return i._invoke=function(e,t,r){var n=p;return function(a,i){if(n===h)throw new Error("Generator is already running");if(n===f){if("throw"===a)throw i;return I()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var s=k(o,r);if(s){if(s===m)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===p)throw n=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var l=u(e,t,r);if("normal"===l.type){if(n=r.done?f:d,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=f,r.method="throw",r.arg=l.arg)}}}(e,r,o),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var p="suspendedStart",d="suspendedYield",h="executing",f="completed",m={};function g(){}function v(){}function y(){}var b={};b[i]=function(){return this};var _=Object.getPrototypeOf,x=_&&_(_(M([])));x&&x!==r&&n.call(x,i)&&(b=x);var w=y.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(a,i,o,s){var l=u(e[a],e,i);if("throw"!==l.type){var c=l.arg,p=c.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(p).then((function(e){c.value=e,o(c)}),(function(e){return r("throw",e,o,s)}))}s(l.arg)}var a;this._invoke=function(e,n){function i(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(i,i):i()}}function k(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method))return m;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var a=u(n,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function M(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}return{next:I}}function I(){return{value:t,done:!0}}return v.prototype=w.constructor=y,y.constructor=v,v.displayName=l(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},E(C.prototype),C.prototype[o]=function(){return this},e.AsyncIterator=C,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var o=new C(c(t,r,n,a),i);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},E(w),l(w,s,"Generator"),w[i]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=M,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return s.type="throw",s.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},53:function(e,t){"use strict";var r,n,a,i;if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var c=null,u=null,p=function(){if(null!==c)try{var e=t.unstable_now();c(!0,e),c=null}catch(e){throw setTimeout(p,0),e}};r=function(e){null!==c?setTimeout(r,0,e):(c=e,setTimeout(p,0))},n=function(e,t){u=setTimeout(e,t)},a=function(){clearTimeout(u)},t.unstable_shouldYield=function(){return!1},i=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,h=window.clearTimeout;if("undefined"!=typeof console){var f=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof f&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,v=-1,y=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},i=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var _=new MessageChannel,x=_.port2;_.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();b=e+y;try{g(!0,e)?x.postMessage(null):(m=!1,g=null)}catch(e){throw x.postMessage(null),e}}else m=!1},r=function(e){g=e,m||(m=!0,x.postMessage(null))},n=function(e,r){v=d((function(){e(t.unstable_now())}),r)},a=function(){h(v),v=-1}}function w(e,t){var r=e.length;e.push(t);e:for(;;){var n=r-1>>>1,a=e[n];if(!(void 0!==a&&0<k(a,t)))break e;e[n]=t,e[r]=a,r=n}}function E(e){return void 0===(e=e[0])?null:e}function C(e){var t=e[0];if(void 0!==t){var r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,a=e.length;n<a;){var i=2*(n+1)-1,o=e[i],s=i+1,l=e[s];if(void 0!==o&&0>k(o,r))void 0!==l&&0>k(l,o)?(e[n]=l,e[s]=r,n=s):(e[n]=o,e[i]=r,n=i);else{if(!(void 0!==l&&0>k(l,r)))break e;e[n]=l,e[s]=r,n=s}}}return t}return null}function k(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}var T=[],S=[],P=1,M=null,I=3,A=!1,O=!1,z=!1;function R(e){for(var t=E(S);null!==t;){if(null===t.callback)C(S);else{if(!(t.startTime<=e))break;C(S),t.sortIndex=t.expirationTime,w(T,t)}t=E(S)}}function L(e){if(z=!1,R(e),!O)if(null!==E(T))O=!0,r(D);else{var t=E(S);null!==t&&n(L,t.startTime-e)}}function D(e,r){O=!1,z&&(z=!1,a()),A=!0;var i=I;try{for(R(r),M=E(T);null!==M&&(!(M.expirationTime>r)||e&&!t.unstable_shouldYield());){var o=M.callback;if("function"==typeof o){M.callback=null,I=M.priorityLevel;var s=o(M.expirationTime<=r);r=t.unstable_now(),"function"==typeof s?M.callback=s:M===E(T)&&C(T),R(r)}else C(T);M=E(T)}if(null!==M)var l=!0;else{var c=E(S);null!==c&&n(L,c.startTime-r),l=!1}return l}finally{M=null,I=i,A=!1}}var B=i;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){O||A||(O=!0,r(D))},t.unstable_getCurrentPriorityLevel=function(){return I},t.unstable_getFirstCallbackNode=function(){return E(T)},t.unstable_next=function(e){switch(I){case 1:case 2:case 3:var t=3;break;default:t=I}var r=I;I=t;try{return e()}finally{I=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=B,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=I;I=e;try{return t()}finally{I=r}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"==typeof o&&null!==o?o="number"==typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:P++,callback:i,priorityLevel:e,startTime:o,expirationTime:l=o+l,sortIndex:-1},o>s?(e.sortIndex=o,w(S,e),null===E(T)&&e===E(S)&&(z?a():z=!0,n(L,o-s))):(e.sortIndex=l,w(T,e),O||A||(O=!0,r(D))),e},t.unstable_wrapCallback=function(e){var t=I;return function(){var r=I;I=t;try{return e.apply(this,arguments)}finally{I=r}}}},3840:function(e,t,r){"use strict";e.exports=r(53)},751:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.io=t.Socket=t.Manager=t.protocol=void 0;const n=r(6744),a=r(7703),i=r(1227)("socket.io-client");e.exports=t=s;const o=t.managers={};function s(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};const r=n.url(e,t.path||"/socket.io"),s=r.source,l=r.id,c=r.path,u=o[l]&&c in o[l].nsps;let p;return t.forceNew||t["force new connection"]||!1===t.multiplex||u?(i("ignoring socket cache for %s",s),p=new a.Manager(s,t)):(o[l]||(i("new io instance for %s",s),o[l]=new a.Manager(s,t)),p=o[l]),r.query&&!t.query&&(t.query=r.queryKey),p.socket(r.path,t)}t.io=s;var l=r(5485);Object.defineProperty(t,"protocol",{enumerable:!0,get:function(){return l.protocol}}),t.connect=s;var c=r(7703);Object.defineProperty(t,"Manager",{enumerable:!0,get:function(){return c.Manager}});var u=r(2277);Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return u.Socket}}),t.default=s},7703:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Manager=void 0;const n=r(5983),a=r(2277),i=r(5485),o=r(5657),s=r(7913),l=r(8791),c=r(1227)("socket.io-client:manager");class u extends l.StrictEventEmitter{constructor(e,t){super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new s({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||i;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(c("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=n(this.uri,this.opts);const t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const a=o.on(t,"open",(function(){r.onopen(),e&&e()})),i=o.on(t,"error",(t=>{c("error"),r.cleanup(),r._readyState="closed",this.emitReserved("error",t),e?e(t):r.maybeReconnectOnOpen()}));if(!1!==this._timeout){const e=this._timeout;c("connect attempt will timeout after %d",e),0===e&&a();const r=setTimeout((()=>{c("connect attempt timed out after %d",e),a(),t.close(),t.emit("error",new Error("timeout"))}),e);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}return this.subs.push(a),this.subs.push(i),this}connect(e){return this.open(e)}onopen(){c("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(o.on(e,"ping",this.onping.bind(this)),o.on(e,"data",this.ondata.bind(this)),o.on(e,"error",this.onerror.bind(this)),o.on(e,"close",this.onclose.bind(this)),o.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){this.decoder.add(e)}ondecoded(e){this.emitReserved("packet",e)}onerror(e){c("error",e),this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r||(r=new a.Socket(this,e,t),this.nsps[e]=r),r}_destroy(e){const t=Object.keys(this.nsps);for(const e of t){if(this.nsps[e].active)return void c("socket %s is still active, skipping close",e)}this._close()}_packet(e){c("writing packet %j",e);const t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){c("cleanup"),this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){c("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,"opening"===this._readyState&&this.cleanup(),this.backoff.reset(),this._readyState="closed",this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e){c("onclose"),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();c("will wait %dms before reconnect attempt",t),this._reconnecting=!0;const r=setTimeout((()=>{e.skipReconnect||(c("attempting reconnect"),this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(c("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):(c("reconnect success"),e.onreconnect())})))}),t);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}t.Manager=u},5657:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=void 0,t.on=function(e,t,r){return e.on(t,r),function(){e.off(t,r)}}},2277:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=void 0;const n=r(5485),a=r(5657),i=r(8791),o=r(1227)("socket.io-client:socket"),s=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class l extends i.StrictEventEmitter{constructor(e,t,r){super(),this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},r&&r.auth&&(this.auth=r.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const e=this.io;this.subs=[a.on(e,"open",this.onopen.bind(this)),a.on(e,"packet",this.onpacket.bind(this)),a.on(e,"error",this.onerror.bind(this)),a.on(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(s.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');t.unshift(e);const r={type:n.PacketType.EVENT,data:t,options:{}};r.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(o("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),r.id=this.ids++);const a=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!a||!this.connected)?o("discard packet as the transport is not currently writable"):this.connected?this.packet(r):this.sendBuffer.push(r),this.flags={},this}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){o("transport is open - connecting"),"function"==typeof this.auth?this.auth((e=>{this.packet({type:n.PacketType.CONNECT,data:e})})):this.packet({type:n.PacketType.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e){o("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",e)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case n.PacketType.CONNECT:if(e.data&&e.data.sid){const t=e.data.sid;this.onconnect(t)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case n.PacketType.EVENT:case n.PacketType.BINARY_EVENT:this.onevent(e);break;case n.PacketType.ACK:case n.PacketType.BINARY_ACK:this.onack(e);break;case n.PacketType.DISCONNECT:this.ondisconnect();break;case n.PacketType.CONNECT_ERROR:const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];o("emitting event %j",t),null!=e.id&&(o("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const r of t)r.apply(this,e)}super.emit.apply(this,e)}ack(e){const t=this;let r=!1;return function(...a){r||(r=!0,o("sending ack %j",a),t.packet({type:n.PacketType.ACK,id:e,data:a}))}}onack(e){const t=this.acks[e.id];"function"==typeof t?(o("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):o("bad ack %s",e.id)}onconnect(e){o("socket connected with id %s",e),this.id=e,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>this.packet(e))),this.sendBuffer=[]}ondisconnect(){o("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(o("performing disconnect (%s)",this.nsp),this.packet({type:n.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}t.Socket=l},8791:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StrictEventEmitter=void 0;const n=r(8767);t.StrictEventEmitter=class extends n{on(e,t){return super.on(e,t),this}once(e,t){return super.once(e,t),this}emit(e,...t){return super.emit(e,...t),this}emitReserved(e,...t){return super.emit(e,...t),this}listeners(e){return super.listeners(e)}}},6744:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.url=void 0;const n=r(4187),a=r(1227)("socket.io-client:url");t.url=function(e,t="",r){let i=e;r=r||"undefined"!=typeof location&&location,null==e&&(e=r.protocol+"//"+r.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(a("protocol-less url %s",e),e=void 0!==r?r.protocol+"//"+e:"https://"+e),a("parse %s",e),i=n(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const o=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+o+":"+i.port+t,i.href=i.protocol+"://"+o+(r&&r.port===i.port?"":":"+i.port),i}},7719:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reconstructPacket=t.deconstructPacket=void 0;const n=r(2986);function a(e,t){if(!e)return e;if(n.isBinary(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=a(e[n],t);return r}if("object"==typeof e&&!(e instanceof Date)){const r={};for(const n in e)e.hasOwnProperty(n)&&(r[n]=a(e[n],t));return r}return e}function i(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=i(e[r],t);else if("object"==typeof e)for(const r in e)e.hasOwnProperty(r)&&(e[r]=i(e[r],t));return e}t.deconstructPacket=function(e){const t=[],r=e.data,n=e;return n.data=a(r,t),n.attachments=t.length,{packet:n,buffers:t}},t.reconstructPacket=function(e,t){return e.data=i(e.data,t),e.attachments=void 0,e}},5485:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Decoder=t.Encoder=t.PacketType=t.protocol=void 0;const n=r(8767),a=r(7719),i=r(2986),o=r(1227)("socket.io-parser");var s;t.protocol=5,function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(s=t.PacketType||(t.PacketType={}));t.Encoder=class{encode(e){return o("encoding packet %j",e),e.type!==s.EVENT&&e.type!==s.ACK||!i.hasBinary(e)?[this.encodeAsString(e)]:(e.type=e.type===s.EVENT?s.BINARY_EVENT:s.BINARY_ACK,this.encodeAsBinary(e))}encodeAsString(e){let t=""+e.type;return e.type!==s.BINARY_EVENT&&e.type!==s.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data)),o("encoded %j as %s",e,t),t}encodeAsBinary(e){const t=a.deconstructPacket(e),r=this.encodeAsString(t.packet),n=t.buffers;return n.unshift(r),n}};class l extends n{constructor(){super()}add(e){let t;if("string"==typeof e)t=this.decodeString(e),t.type===s.BINARY_EVENT||t.type===s.BINARY_ACK?(this.reconstructor=new c(t),0===t.attachments&&super.emit("decoded",t)):super.emit("decoded",t);else{if(!i.isBinary(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emit("decoded",t))}}decodeString(e){let t=0;const r={type:Number(e.charAt(0))};if(void 0===s[r.type])throw new Error("unknown packet type "+r.type);if(r.type===s.BINARY_EVENT||r.type===s.BINARY_ACK){const n=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const a=e.substring(n,t);if(a!=Number(a)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(a)}if("/"===e.charAt(t+1)){const n=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}r.nsp=e.substring(n,t)}else r.nsp="/";const n=e.charAt(t+1);if(""!==n&&Number(n)==n){const n=t+1;for(;++t;){const r=e.charAt(t);if(null==r||Number(r)!=r){--t;break}if(t===e.length)break}r.id=Number(e.substring(n,t+1))}if(e.charAt(++t)){const n=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(t));if(!l.isPayloadValid(r.type,n))throw new Error("invalid payload");r.data=n}return o("decoded %s as %j",e,r),r}static isPayloadValid(e,t){switch(e){case s.CONNECT:return"object"==typeof t;case s.DISCONNECT:return void 0===t;case s.CONNECT_ERROR:return"string"==typeof t||"object"==typeof t;case s.EVENT:case s.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case s.ACK:case s.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}t.Decoder=l;class c{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=a.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}},2986:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasBinary=t.isBinary=void 0;const r="function"==typeof ArrayBuffer,n=Object.prototype.toString,a="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===n.call(Blob),i="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===n.call(File);function o(e){return r&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||a&&e instanceof Blob||i&&e instanceof File}t.isBinary=o,t.hasBinary=function e(t,r){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(e(t[r]))return!0;return!1}if(o(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return!0;return!1}},4395:function(e){var t,r;t=this,r=function(){var e=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function t(t){return t.match(e)||[]}function r(e){return{language:(e=t(e))[1]||"",extlang:e[2]||"",script:e[3]||"",region:e[4]||""}}function n(e,t,r){Object.defineProperty(e,t,{value:r,enumerable:!0})}function a(e,a,i){function o(r){return t(r)[e]||""}n(o,"pattern",a),n(r,i,o)}return a(1,/^[a-zA-Z]{2,3}$/,"language"),a(2,/^[a-zA-Z]{3}$/,"extlang"),a(3,/^[a-zA-Z]{4}$/,"script"),a(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),n(r,"split",(function(e){return t(e).filter((function(e,t){return e&&t}))})),r},e.exports?e.exports=r():t.subtag=r()},504:function(e,t,r){"use strict";var n=r(7247);e.exports=n,"undefined"!=typeof window&&(window.Suggestions=n)},8945:function(e){"use strict";var t=function(e){return this.component=e,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};t.prototype.show=function(){this.element.style.display="block"},t.prototype.hide=function(){this.element.style.display="none"},t.prototype.add=function(e){this.items.push(e)},t.prototype.clear=function(){this.items=[],this.active=0},t.prototype.isEmpty=function(){return!this.items.length},t.prototype.isVisible=function(){return"block"===this.element.style.display},t.prototype.draw=function(){if(this.element.innerHTML="",0!==this.items.length){for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()}else this.hide()},t.prototype.drawItem=function(e,t){var r=document.createElement("li"),n=document.createElement("a");t&&(r.className+=" active"),n.innerHTML=e.string,r.appendChild(n),this.element.appendChild(r),r.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),r.addEventListener("mouseup",function(){this.handleMouseUp.call(this,e)}.bind(this))},t.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()},t.prototype.move=function(e){this.active=e,this.draw()},t.prototype.previous=function(){this.move(0===this.active?this.items.length-1:this.active-1)},t.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)},t.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()},e.exports=t},7247:function(e,t,r){"use strict";var n=r(7529),a=r(3261),i=r(8945),o=function(e,t,r){return r=r||{},this.options=n({minLength:2,limit:5,filter:!0,hideOnBlur:!0},r),this.el=e,this.data=t||[],this.list=new i(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(e){this.handleKeyUp(e.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(e){this.handleKeyDown(e)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(e){this.handlePaste(e)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};o.prototype.handleKeyUp=function(e){40!==e&&38!==e&&27!==e&&13!==e&&9!==e&&this.handleInputChange(this.el.value)},o.prototype.handleKeyDown=function(e){switch(e.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&e.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next()}},o.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},o.prototype.handlePaste=function(e){if(e.clipboardData)this.handleInputChange(e.clipboardData.getData("Text"));else{var t=this;setTimeout((function(){t.handleInputChange(e.target.value)}),100)}},o.prototype.handleInputChange=function(e){this.query=this.normalize(e),this.list.clear(),this.query.length<this.options.minLength?this.list.draw():this.getCandidates(function(e){for(var t=0;t<e.length&&(this.list.add(e[t]),t!==this.options.limit-1);t++);this.list.draw()}.bind(this))},o.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},o.prototype.update=function(e){this.data=e,this.handleKeyUp()},o.prototype.clear=function(){this.data=[],this.list.clear()},o.prototype.normalize=function(e){return e=e.toLowerCase()},o.prototype.match=function(e,t){return e.indexOf(t)>-1},o.prototype.value=function(e){if(this.selected=e,this.el.value=this.getItemValue(e),document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),this.el.dispatchEvent(t)}else this.el.fireEvent("onchange")},o.prototype.getCandidates=function(e){var t={pre:"<strong>",post:"</strong>",extract:function(e){return this.getItemValue(e)}.bind(this)};e(this.options.filter?a.filter(this.query,this.data,t).map(function(e){return{original:e.original,string:this.render(e.original,e.string)}}.bind(this)):this.data.map(function(e){return{original:e,string:this.render(e)}}.bind(this)))},o.prototype.getItemValue=function(e){return e},o.prototype.render=function(e,t){if(t)return t;for(var r=e.original?this.getItemValue(e.original):this.getItemValue(e),n=this.normalize(r),a=n.lastIndexOf(this.query);a>-1;){var i=a+this.query.length;r=r.slice(0,a)+"<strong>"+r.slice(a,i)+"</strong>"+r.slice(i),a=n.slice(0,a).lastIndexOf(this.query)}return r},o.prototype.renderError=function(e){this.list.drawError(e)},e.exports=o},7529:function(e){e.exports=function(){for(var e={},r=0;r<arguments.length;r++){var n=arguments[r];for(var a in n)t.call(n,a)&&(e[a]=n[a])}return e};var t=Object.prototype.hasOwnProperty},2281:function(e){"use strict";var t,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),n={},a=0,i=0;function o(e){var t="";do{t=r[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function s(){var e=o(+new Date);return e!==t?(a=0,t=e):e+"."+o(a++)}for(;i<64;i++)n[r[i]]=i;s.encode=o,s.decode=function(e){var t=0;for(i=0;i<e.length;i++)t=64*t+n[e.charAt(i)];return t},e.exports=s}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){"use strict";var e={};r.r(e),r.d(e,{auroraPreloaderContent:function(){return g},bindMethods:function(){return B},cancelAnimationFrame:function(){return _},colorHexToRgb:function(){return I},colorHsbToHsl:function(){return R},colorHslToHsb:function(){return L},colorHslToRgb:function(){return z},colorRgbToHex:function(){return A},colorRgbToHsl:function(){return O},colorThemeCSSProperties:function(){return D},deleteProps:function(){return y},eventNameToColonCase:function(){return v},extend:function(){return M},flattenArray:function(){return $},getTranslate:function(){return k},id:function(){return p},iosPreloaderContent:function(){return m},isObject:function(){return S},mdPreloaderContent:function(){return f},merge:function(){return P},nextFrame:function(){return w},nextTick:function(){return x},now:function(){return E},parseUrlQuery:function(){return C},requestAnimationFrame:function(){return b},serializeObject:function(){return T},uniqueNumber:function(){return u}});var t={};function n(e){return null!==e&&"object"==typeof e&&"constructor"in e&&e.constructor===Object}function a(e,t){void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(t).forEach((function(r){void 0===e[r]?e[r]=t[r]:n(t[r])&&n(e[r])&&Object.keys(t[r]).length>0&&a(e[r],t[r])}))}r.r(t),r.d(t,{$:function(){return J},add:function(){return et},addClass:function(){return ee},animate:function(){return it},animationEnd:function(){return be},append:function(){return De},appendTo:function(){return Be},attr:function(){return ae},blur:function(){return ut},change:function(){return yt},children:function(){return Ke},click:function(){return ct},closest:function(){return Ze},css:function(){return Pe},data:function(){return se},dataset:function(){return ce},default:function(){return At},detach:function(){return Je},each:function(){return Me},empty:function(){return tt},eq:function(){return Le},filter:function(){return Ie},find:function(){return Ye},focus:function(){return pt},focusin:function(){return dt},focusout:function(){return ht},hasClass:function(){return ne},height:function(){return we},hide:function(){return ke},html:function(){return Ae},index:function(){return Re},insertAfter:function(){return Ve},insertBefore:function(){return Ne},is:function(){return ze},keydown:function(){return mt},keypress:function(){return gt},keyup:function(){return ft},mousedown:function(){return bt},mouseenter:function(){return wt},mouseleave:function(){return Et},mousemove:function(){return _t},mouseout:function(){return Ct},mouseover:function(){return kt},mouseup:function(){return xt},next:function(){return je},nextAll:function(){return Ue},off:function(){return me},offset:function(){return Ce},on:function(){return fe},once:function(){return ge},outerHeight:function(){return Ee},outerWidth:function(){return xe},parent:function(){return We},parents:function(){return Xe},prepend:function(){return $e},prependTo:function(){return Fe},prev:function(){return qe},prevAll:function(){return He},prop:function(){return oe},remove:function(){return Qe},removeAttr:function(){return ie},removeClass:function(){return te},removeData:function(){return le},resize:function(){return Mt},scroll:function(){return It},scrollLeft:function(){return at},scrollTo:function(){return rt},scrollTop:function(){return nt},show:function(){return Te},siblings:function(){return Ge},stop:function(){return ot},styles:function(){return Se},submit:function(){return vt},text:function(){return Oe},toggleClass:function(){return re},touchend:function(){return St},touchmove:function(){return Pt},touchstart:function(){return Tt},transform:function(){return de},transition:function(){return he},transitionEnd:function(){return ye},trigger:function(){return ve},val:function(){return ue},value:function(){return pe},width:function(){return _e}});var i={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function o(){var e="undefined"!=typeof document?document:{};return a(e,i),e}var s={document:i,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(e){return"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0)},cancelAnimationFrame:function(e){"undefined"!=typeof setTimeout&&clearTimeout(e)}};function l(){var e="undefined"!=typeof window?window:{};return a(e,s),e}var c=0;function u(){return c+=1}function p(e,t){void 0===e&&(e="xxxxxxxxxx"),void 0===t&&(t="0123456789abcdef");var r=t.length;return e.replace(/x/g,(function(){return t[Math.floor(Math.random()*r)]}))}var d,h,f='\n  <span class="preloader-inner">\n    <svg viewBox="0 0 36 36">\n      <circle cx="18" cy="18" r="16"></circle>\n    </svg>\n  </span>\n'.trim(),m=('\n  <span class="preloader-inner">\n    '+[0,1,2,3,4,5,6,7].map((function(){return'<span class="preloader-inner-line"></span>'})).join("")+"\n  </span>\n").trim(),g='\n  <span class="preloader-inner">\n    <span class="preloader-inner-circle"></span>\n  </span>\n';function v(e){var t;return e.split("").map((function(e,r){return e.match(/[A-Z]/)&&0!==r&&!t?(t=!0,":"+e.toLowerCase()):e.toLowerCase()})).join("")}function y(e){var t=e;Object.keys(t).forEach((function(e){try{t[e]=null}catch(e){}try{delete t[e]}catch(e){}}))}function b(e){return l().requestAnimationFrame(e)}function _(e){return l().cancelAnimationFrame(e)}function x(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function w(e){return b((function(){b(e)}))}function E(){return Date.now()}function C(e){var t,r,n,a,i=l(),o={},s=e||i.location.href;if("string"==typeof s&&s.length)for(a=(r=(s=s.indexOf("?")>-1?s.replace(/\S*\?/,""):"").split("&").filter((function(e){return""!==e}))).length,t=0;t<a;t+=1)n=r[t].replace(/#\S+/g,"").split("="),o[decodeURIComponent(n[0])]=void 0===n[1]?void 0:decodeURIComponent(n.slice(1).join("="))||"";return o}function k(e,t){void 0===t&&(t="x");var r,n,a,i=l(),o=i.getComputedStyle(e,null);return i.WebKitCSSMatrix?((n=o.transform||o.webkitTransform).split(",").length>6&&(n=n.split(", ").map((function(e){return e.replace(",",".")})).join(", ")),a=new i.WebKitCSSMatrix("none"===n?"":n)):r=(a=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===t&&(n=i.WebKitCSSMatrix?a.m41:16===r.length?parseFloat(r[12]):parseFloat(r[4])),"y"===t&&(n=i.WebKitCSSMatrix?a.m42:16===r.length?parseFloat(r[13]):parseFloat(r[5])),n||0}function T(e,t){if(void 0===t&&(t=[]),"string"==typeof e)return e;var r,n=[];function a(e){if(t.length>0){for(var r="",n=0;n<t.length;n+=1)r+=0===n?t[n]:"["+encodeURIComponent(t[n])+"]";return r+"["+encodeURIComponent(e)+"]"}return encodeURIComponent(e)}function i(e){return encodeURIComponent(e)}return Object.keys(e).forEach((function(o){var s;if(Array.isArray(e[o])){s=[];for(var l=0;l<e[o].length;l+=1)Array.isArray(e[o][l])||"object"!=typeof e[o][l]?s.push(a(o)+"[]="+i(e[o][l])):((r=t.slice()).push(o),r.push(String(l)),s.push(T(e[o][l],r)));s.length>0&&n.push(s.join("&"))}else null===e[o]||""===e[o]?n.push(a(o)+"="):"object"==typeof e[o]?((r=t.slice()).push(o),""!==(s=T(e[o],r))&&n.push(s)):void 0!==e[o]&&""!==e[o]?n.push(a(o)+"="+i(e[o])):""===e[o]&&n.push(a(o))})),n.join("&")}function S(e){return"object"==typeof e&&null!==e&&e.constructor&&e.constructor===Object}function P(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0];t.splice(0,1);for(var a=t,i=0;i<a.length;i+=1){var o=t[i];if(null!=o)for(var s=Object.keys(Object(o)),l=0,c=s.length;l<c;l+=1){var u=s[l],p=Object.getOwnPropertyDescriptor(o,u);void 0!==p&&p.enumerable&&(n[u]=o[u])}}return n}function M(){for(var e,t,r=!0,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];"boolean"==typeof a[0]?(r=a[0],e=a[1],a.splice(0,2),t=a):(e=a[0],a.splice(0,1),t=a);for(var o=0;o<t.length;o+=1){var s=a[o];if(null!=s)for(var l=Object.keys(Object(s)),c=0,u=l.length;c<u;c+=1){var p=l[c],d=Object.getOwnPropertyDescriptor(s,p);void 0!==d&&d.enumerable&&(r?S(e[p])&&S(s[p])?M(e[p],s[p]):!S(e[p])&&S(s[p])?(e[p]={},M(e[p],s[p])):e[p]=s[p]:e[p]=s[p])}}return e}function I(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,r,n){return t+t+r+r+n+n})),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return r?r.slice(1).map((function(e){return parseInt(e,16)})):null}function A(e,t,r){return"#"+[e,t,r].map((function(e){var t=e.toString(16);return 1===t.length?"0"+t:t})).join("")}function O(e,t,r){e/=255,t/=255,r/=255;var n,a=Math.max(e,t,r),i=Math.min(e,t,r),o=a-i;0===o?n=0:a===e?n=(t-r)/o%6:a===t?n=(r-e)/o+2:a===r&&(n=(e-t)/o+4);var s=(i+a)/2;return n<0&&(n=6+n),[60*n,0===o?0:o/(1-Math.abs(2*s-1)),s]}function z(e,t,r){var n,a=(1-Math.abs(2*r-1))*t,i=e/60,o=a*(1-Math.abs(i%2-1));Number.isNaN(e)||void 0===e?n=[0,0,0]:i<=1?n=[a,o,0]:i<=2?n=[o,a,0]:i<=3?n=[0,a,o]:i<=4?n=[0,o,a]:i<=5?n=[o,0,a]:i<=6&&(n=[a,0,o]);var s=r-a/2;return n.map((function(e){return Math.max(0,Math.min(255,Math.round(255*(e+s))))}))}function R(e,t,r){var n={h:e,s:0,l:0},a=t,i=r;return n.l=(2-a)*i/2,n.s=n.l&&n.l<1?a*i/(n.l<.5?2*n.l:2-2*n.l):n.s,[n.h,n.s,n.l]}function L(e,t,r){var n={h:e,s:0,b:0},a=r,i=t*(a<.5?a:1-a);return n.b=a+i,n.s=a>0?2*i/n.b:n.s,[n.h,n.s,n.b]}function D(){for(var e,t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];if(1===n.length?t=I(e=n[0]):3===n.length&&(t=n,e=A.apply(void 0,t)),!t)return{};var i=O.apply(void 0,t),o=[i[0],i[1],Math.max(0,i[2]-.08)],s=[i[0],i[1],Math.max(0,i[2]+.08)],l=A.apply(void 0,z.apply(void 0,o)),c=A.apply(void 0,z.apply(void 0,s));return{"--f7-theme-color":e,"--f7-theme-color-rgb":t.join(", "),"--f7-theme-color-shade":l,"--f7-theme-color-tint":c}}function B(e,t){Object.keys(t).forEach((function(r){S(t[r])&&Object.keys(t[r]).forEach((function(n){"function"==typeof t[r][n]&&(t[r][n]=t[r][n].bind(e))})),e[r]=t[r]}))}function $(){for(var e=[],t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach((function(t){Array.isArray(t)?e.push.apply(e,$.apply(void 0,t)):e.push(t)})),e}function F(){return d||(d=function(){var e=l(),t=o();return{touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),pointerEvents:!!e.PointerEvent&&"maxTouchPoints"in e.navigator&&e.navigator.maxTouchPoints>=0,passiveListener:function(){var t=!1;try{var r=Object.defineProperty({},"passive",{get:function(){t=!0}});e.addEventListener("testPassiveListener",null,r)}catch(e){}return t}(),intersectionObserver:"IntersectionObserver"in e}}()),d}function N(e,t){return void 0===e&&(e={}),h&&!t||(h=function(e){var t=(void 0===e?{}:e).userAgent,r=F(),n=l(),a=n.navigator.platform,i=t||n.navigator.userAgent,o={ios:!1,android:!1,androidChrome:!1,desktop:!1,iphone:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,macos:!1,windows:!1,cordova:!(!n.cordova&&!n.phonegap),phonegap:!(!n.cordova&&!n.phonegap),electron:!1,capacitor:!!n.Capacitor,nwjs:!1},s=n.screen.width,c=n.screen.height,u=i.match(/(Android);?[\s\/]+([\d.]+)?/),p=i.match(/(iPad).*OS\s([\d_]+)/),d=i.match(/(iPod)(.*OS\s([\d_]+))?/),h=!p&&i.match(/(iPhone\sOS|iOS|iPhone;\sCPU\sOS)\s([\d_]+)/),f=i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0,m=i.indexOf("Edge/")>=0,g=i.indexOf("Gecko/")>=0&&i.indexOf("Firefox/")>=0,v="Win32"===a,y=i.toLowerCase().indexOf("electron")>=0,b="undefined"!=typeof nw&&"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.nw,_="MacIntel"===a;return!p&&_&&r.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(s+"x"+c)>=0&&((p=i.match(/(Version)\/([\d.]+)/))||(p=[0,1,"13_0_0"]),_=!1),o.ie=f,o.edge=m,o.firefox=g,u&&!v&&(o.os="android",o.osVersion=u[2],o.android=!0,o.androidChrome=i.toLowerCase().indexOf("chrome")>=0),(p||h||d)&&(o.os="ios",o.ios=!0),h&&!d&&(o.osVersion=h[2].replace(/_/g,"."),o.iphone=!0),p&&(o.osVersion=p[2].replace(/_/g,"."),o.ipad=!0),d&&(o.osVersion=d[3]?d[3].replace(/_/g,"."):null,o.ipod=!0),o.ios&&o.osVersion&&i.indexOf("Version/")>=0&&"10"===o.osVersion.split(".")[0]&&(o.osVersion=i.toLowerCase().split("version/")[1].split(" ")[0]),o.webView=!(!(h||p||d)||!i.match(/.*AppleWebKit(?!.*Safari)/i)&&!n.navigator.standalone)||n.matchMedia&&n.matchMedia("(display-mode: standalone)").matches,o.webview=o.webView,o.standalone=o.webView,o.desktop=!(o.ios||o.android)||y||b,o.desktop&&(o.electron=y,o.nwjs=b,o.macos=_,o.windows=v,o.macos&&(o.os="macos"),o.windows&&(o.os="windows")),o.pixelRatio=n.devicePixelRatio||1,o.prefersColorScheme=function(){var e;return n.matchMedia&&n.matchMedia("(prefers-color-scheme: light)").matches&&(e="light"),n.matchMedia&&n.matchMedia("(prefers-color-scheme: dark)").matches&&(e="dark"),e},o}(e)),h}var V=function(){function e(e){void 0===e&&(e=[]);this.eventsParents=e,this.eventsListeners={}}var t=e.prototype;return t.on=function(e,t,r){var n=this;if("function"!=typeof t)return n;var a=r?"unshift":"push";return e.split(" ").forEach((function(e){n.eventsListeners[e]||(n.eventsListeners[e]=[]),n.eventsListeners[e][a](t)})),n},t.once=function(e,t,r){var n=this;if("function"!=typeof t)return n;function a(){n.off(e,a),a.f7proxy&&delete a.f7proxy;for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];t.apply(n,i)}return a.f7proxy=t,n.on(e,a,r)},t.off=function(e,t){var r=this;return r.eventsListeners?(e.split(" ").forEach((function(e){void 0===t?r.eventsListeners[e]=[]:r.eventsListeners[e]&&r.eventsListeners[e].forEach((function(n,a){(n===t||n.f7proxy&&n.f7proxy===t)&&r.eventsListeners[e].splice(a,1)}))})),r):r},t.emit=function(){var e,t,r,n,a=this;if(!a.eventsListeners)return a;for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];"string"==typeof o[0]||Array.isArray(o[0])?(e=o[0],t=o.slice(1,o.length),r=a,n=a.eventsParents):(e=o[0].events,t=o[0].data,r=o[0].context||a,n=o[0].local?[]:o[0].parents||a.eventsParents);var l=Array.isArray(e)?e:e.split(" "),c=l.map((function(e){return e.replace("local::","")})),u=l.filter((function(e){return e.indexOf("local::")<0}));return c.forEach((function(e){if(a.eventsListeners&&a.eventsListeners[e]){var n=[];a.eventsListeners[e].forEach((function(e){n.push(e)})),n.forEach((function(e){e.apply(r,t)}))}})),n&&n.length>0&&n.forEach((function(e){e.emit.apply(e,[u].concat(t))})),a},e}();function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var q=function(e){var t,r;function n(t,r){var n;void 0===t&&(t={}),void 0===r&&(r=[]);var a=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n=e.call(this,r)||this);return a.params=t,a.params&&a.params.on&&Object.keys(a.params.on).forEach((function(e){a.on(e,a.params.on[e])})),n}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,U(t,r);var a,i,o,s=n.prototype;return s.useModuleParams=function(e,t){if(e.params){var r={};Object.keys(e.params).forEach((function(e){void 0!==t[e]&&(r[e]=M({},t[e]))})),M(t,e.params),Object.keys(r).forEach((function(e){M(t[e],r[e])}))}},s.useModulesParams=function(e){var t=this;t.modules&&Object.keys(t.modules).forEach((function(r){var n=t.modules[r];n.params&&M(e,n.params)}))},s.useModule=function(e,t){void 0===e&&(e=""),void 0===t&&(t={});var r=this;if(r.modules){var n="string"==typeof e?r.modules[e]:e;n&&(n.instance&&Object.keys(n.instance).forEach((function(e){var t=n.instance[e];r[e]="function"==typeof t?t.bind(r):t})),n.on&&r.on&&Object.keys(n.on).forEach((function(e){r.on(e,n.on[e])})),n.vnode&&(r.vnodeHooks||(r.vnodeHooks={}),Object.keys(n.vnode).forEach((function(e){Object.keys(n.vnode[e]).forEach((function(t){var a=n.vnode[e][t];r.vnodeHooks[t]||(r.vnodeHooks[t]={}),r.vnodeHooks[t][e]||(r.vnodeHooks[t][e]=[]),r.vnodeHooks[t][e].push(a.bind(r))}))}))),n.create&&n.create.bind(r)(t))}},s.useModules=function(e){void 0===e&&(e={});var t=this;t.modules&&Object.keys(t.modules).forEach((function(r){var n=e[r]||{};t.useModule(r,n)}))},n.installModule=function(e){var t=this;t.prototype.modules||(t.prototype.modules={});var r=e.name||Object.keys(t.prototype.modules).length+"_"+E();if(t.prototype.modules[r]=e,e.proto&&Object.keys(e.proto).forEach((function(r){t.prototype[r]=e.proto[r]})),e.static&&Object.keys(e.static).forEach((function(r){t[r]=e.static[r]})),e.install){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];e.install.apply(t,a)}return t},n.use=function(e){var t=this;if(Array.isArray(e))return e.forEach((function(e){return t.installModule(e)})),t;for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return t.installModule.apply(t,[e].concat(n))},a=n,o=[{key:"components",set:function(e){this.use&&this.use(e)}}],(i=null)&&j(a.prototype,i),o&&j(a,o),n}(V);function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function X(e,t,r){return(X=W()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&G(a,r.prototype),a}).apply(null,arguments)}function Z(e){var t="function"==typeof Map?new Map:void 0;return(Z=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return X(e,arguments,H(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),G(n,e)})(e)}var Y=function(e){var t,r;function n(t){var r,n,a;return r=e.call.apply(e,[this].concat(t))||this,n=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r),a=n.__proto__,Object.defineProperty(n,"__proto__",{get:function(){return a},set:function(e){a.__proto__=e}}),r}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n}(Z(Array));function K(e){void 0===e&&(e=[]);var t=[];return e.forEach((function(e){Array.isArray(e)?t.push.apply(t,K(e)):t.push(e)})),t}function Q(e,t){return Array.prototype.filter.call(e,t)}function J(e,t){var r=l(),n=o(),a=[];if(!t&&e instanceof Y)return e;if(!e)return new Y(a);if("string"==typeof e){var i=e.trim();if(i.indexOf("<")>=0&&i.indexOf(">")>=0){var s="div";0===i.indexOf("<li")&&(s="ul"),0===i.indexOf("<tr")&&(s="tbody"),0!==i.indexOf("<td")&&0!==i.indexOf("<th")||(s="tr"),0===i.indexOf("<tbody")&&(s="table"),0===i.indexOf("<option")&&(s="select");var c=n.createElement(s);c.innerHTML=i;for(var u=0;u<c.childNodes.length;u+=1)a.push(c.childNodes[u])}else a=function(e,t){if("string"!=typeof e)return[e];for(var r=[],n=t.querySelectorAll(e),a=0;a<n.length;a+=1)r.push(n[a]);return r}(e.trim(),t||n)}else if(e.nodeType||e===r||e===n)a.push(e);else if(Array.isArray(e)){if(e instanceof Y)return e;a=e}return new Y(function(e){for(var t=[],r=0;r<e.length;r+=1)-1===t.indexOf(e[r])&&t.push(e[r]);return t}(a))}function ee(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=K(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).add.apply(t,n)})),this}function te(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=K(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).remove.apply(t,n)})),this}function re(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=K(t.map((function(e){return e.split(" ")})));this.forEach((function(e){n.forEach((function(t){e.classList.toggle(t)}))}))}function ne(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=K(t.map((function(e){return e.split(" ")})));return Q(this,(function(e){return n.filter((function(t){return e.classList.contains(t)})).length>0})).length>0}function ae(e,t){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var r=0;r<this.length;r+=1)if(2===arguments.length)this[r].setAttribute(e,t);else for(var n in e)this[r][n]=e[n],this[r].setAttribute(n,e[n]);return this}function ie(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this}function oe(e,t){if(1!==arguments.length||"string"!=typeof e){for(var r=0;r<this.length;r+=1)if(2===arguments.length)this[r][e]=t;else for(var n in e)this[r][n]=e[n];return this}return this[0]?this[0][e]:this}function se(e,t){var r;if(void 0===t){if(!(r=this[0]))return;if(r.dom7ElementDataStorage&&e in r.dom7ElementDataStorage)return r.dom7ElementDataStorage[e];var n=r.getAttribute("data-"+e);return n||void 0}for(var a=0;a<this.length;a+=1)(r=this[a]).dom7ElementDataStorage||(r.dom7ElementDataStorage={}),r.dom7ElementDataStorage[e]=t;return this}function le(e){for(var t=0;t<this.length;t+=1){var r=this[t];r.dom7ElementDataStorage&&r.dom7ElementDataStorage[e]&&(r.dom7ElementDataStorage[e]=null,delete r.dom7ElementDataStorage[e])}}function ce(){var e=this[0];if(e){var t,r={};if(e.dataset)for(var n in e.dataset)r[n]=e.dataset[n];else for(var a=0;a<e.attributes.length;a+=1){var i=e.attributes[a];i.name.indexOf("data-")>=0&&(r[(t=i.name.split("data-")[1],t.toLowerCase().replace(/-(.)/g,(function(e,t){return t.toUpperCase()})))]=i.value)}for(var o in r)"false"===r[o]?r[o]=!1:"true"===r[o]?r[o]=!0:parseFloat(r[o])===1*r[o]&&(r[o]*=1);return r}}function ue(e){if(void 0===e){var t=this[0];if(!t)return;if(t.multiple&&"select"===t.nodeName.toLowerCase()){for(var r=[],n=0;n<t.selectedOptions.length;n+=1)r.push(t.selectedOptions[n].value);return r}return t.value}for(var a=0;a<this.length;a+=1){var i=this[a];if(Array.isArray(e)&&i.multiple&&"select"===i.nodeName.toLowerCase())for(var o=0;o<i.options.length;o+=1)i.options[o].selected=e.indexOf(i.options[o].value)>=0;else i.value=e}return this}function pe(e){return this.val(e)}function de(e){for(var t=0;t<this.length;t+=1)this[t].style.transform=e;return this}function he(e){for(var t=0;t<this.length;t+=1)this[t].style.transitionDuration="string"!=typeof e?e+"ms":e;return this}function fe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],a=t[1],i=t[2],o=t[3];function s(e){var t=e.target;if(t){var r=e.target.dom7EventData||[];if(r.indexOf(e)<0&&r.unshift(e),J(t).is(a))i.apply(t,r);else for(var n=J(t).parents(),o=0;o<n.length;o+=1)J(n[o]).is(a)&&i.apply(n[o],r)}}function l(e){var t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),i.apply(this,t)}"function"==typeof t[1]&&(n=t[0],i=t[1],o=t[2],a=void 0),o||(o=!1);for(var c,u=n.split(" "),p=0;p<this.length;p+=1){var d=this[p];if(a)for(c=0;c<u.length;c+=1){var h=u[c];d.dom7LiveListeners||(d.dom7LiveListeners={}),d.dom7LiveListeners[h]||(d.dom7LiveListeners[h]=[]),d.dom7LiveListeners[h].push({listener:i,proxyListener:s}),d.addEventListener(h,s,o)}else for(c=0;c<u.length;c+=1){var f=u[c];d.dom7Listeners||(d.dom7Listeners={}),d.dom7Listeners[f]||(d.dom7Listeners[f]=[]),d.dom7Listeners[f].push({listener:i,proxyListener:l}),d.addEventListener(f,l,o)}}return this}function me(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],a=t[1],i=t[2],o=t[3];"function"==typeof t[1]&&(n=t[0],i=t[1],o=t[2],a=void 0),o||(o=!1);for(var s=n.split(" "),l=0;l<s.length;l+=1)for(var c=s[l],u=0;u<this.length;u+=1){var p=this[u],d=void 0;if(!a&&p.dom7Listeners?d=p.dom7Listeners[c]:a&&p.dom7LiveListeners&&(d=p.dom7LiveListeners[c]),d&&d.length)for(var h=d.length-1;h>=0;h-=1){var f=d[h];i&&f.listener===i||i&&f.listener&&f.listener.dom7proxy&&f.listener.dom7proxy===i?(p.removeEventListener(c,f.proxyListener,o),d.splice(h,1)):i||(p.removeEventListener(c,f.proxyListener,o),d.splice(h,1))}}return this}function ge(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],s=r[3];function l(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];o.apply(this,r),e.off(a,i,l,s),l.dom7proxy&&delete l.dom7proxy}return"function"==typeof r[1]&&(a=r[0],o=r[1],s=r[2],i=void 0),l.dom7proxy=o,e.on(a,i,l,s)}function ve(){for(var e=l(),t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(var a=r[0].split(" "),i=r[1],o=0;o<a.length;o+=1)for(var s=a[o],c=0;c<this.length;c+=1){var u=this[c];if(e.CustomEvent){var p=new e.CustomEvent(s,{detail:i,bubbles:!0,cancelable:!0});u.dom7EventData=r.filter((function(e,t){return t>0})),u.dispatchEvent(p),u.dom7EventData=[],delete u.dom7EventData}}return this}function ye(e){var t=this;return e&&t.on("transitionend",(function r(n){n.target===this&&(e.call(this,n),t.off("transitionend",r))})),this}function be(e){var t=this;return e&&t.on("animationend",(function r(n){n.target===this&&(e.call(this,n),t.off("animationend",r))})),this}function _e(){var e=l();return this[0]===e?e.innerWidth:this.length>0?parseFloat(this.css("width")):null}function xe(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function we(){var e=l();return this[0]===e?e.innerHeight:this.length>0?parseFloat(this.css("height")):null}function Ee(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function Ce(){if(this.length>0){var e=l(),t=o(),r=this[0],n=r.getBoundingClientRect(),a=t.body,i=r.clientTop||a.clientTop||0,s=r.clientLeft||a.clientLeft||0,c=r===e?e.scrollY:r.scrollTop,u=r===e?e.scrollX:r.scrollLeft;return{top:n.top+c-i,left:n.left+u-s}}return null}function ke(){for(var e=0;e<this.length;e+=1)this[e].style.display="none";return this}function Te(){for(var e=l(),t=0;t<this.length;t+=1){var r=this[t];"none"===r.style.display&&(r.style.display=""),"none"===e.getComputedStyle(r,null).getPropertyValue("display")&&(r.style.display="block")}return this}function Se(){var e=l();return this[0]?e.getComputedStyle(this[0],null):{}}function Pe(e,t){var r,n=l();if(1===arguments.length){if("string"!=typeof e){for(r=0;r<this.length;r+=1)for(var a in e)this[r].style[a]=e[a];return this}if(this[0])return n.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(r=0;r<this.length;r+=1)this[r].style[e]=t;return this}return this}function Me(e){return e?(this.forEach((function(t,r){e.apply(t,[t,r])})),this):this}function Ie(e){return J(Q(this,e))}function Ae(e){if(void 0===e)return this[0]?this[0].innerHTML:null;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this}function Oe(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this}function ze(e){var t,r,n=l(),a=o(),i=this[0];if(!i||void 0===e)return!1;if("string"==typeof e){if(i.matches)return i.matches(e);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(e);if(i.msMatchesSelector)return i.msMatchesSelector(e);for(t=J(e),r=0;r<t.length;r+=1)if(t[r]===i)return!0;return!1}if(e===a)return i===a;if(e===n)return i===n;if(e.nodeType||e instanceof Y){for(t=e.nodeType?[e]:e,r=0;r<t.length;r+=1)if(t[r]===i)return!0;return!1}return!1}function Re(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}}function Le(e){if(void 0===e)return this;var t=this.length;if(e>t-1)return J([]);if(e<0){var r=t+e;return J(r<0?[]:[this[r]])}return J([this[e]])}function De(){for(var e,t=o(),r=0;r<arguments.length;r+=1){e=r<0||arguments.length<=r?void 0:arguments[r];for(var n=0;n<this.length;n+=1)if("string"==typeof e){var a=t.createElement("div");for(a.innerHTML=e;a.firstChild;)this[n].appendChild(a.firstChild)}else if(e instanceof Y)for(var i=0;i<e.length;i+=1)this[n].appendChild(e[i]);else this[n].appendChild(e)}return this}function Be(e){return J(e).append(this),this}function $e(e){var t,r,n=o();for(t=0;t<this.length;t+=1)if("string"==typeof e){var a=n.createElement("div");for(a.innerHTML=e,r=a.childNodes.length-1;r>=0;r-=1)this[t].insertBefore(a.childNodes[r],this[t].childNodes[0])}else if(e instanceof Y)for(r=0;r<e.length;r+=1)this[t].insertBefore(e[r],this[t].childNodes[0]);else this[t].insertBefore(e,this[t].childNodes[0]);return this}function Fe(e){return J(e).prepend(this),this}function Ne(e){for(var t=J(e),r=0;r<this.length;r+=1)if(1===t.length)t[0].parentNode.insertBefore(this[r],t[0]);else if(t.length>1)for(var n=0;n<t.length;n+=1)t[n].parentNode.insertBefore(this[r].cloneNode(!0),t[n])}function Ve(e){for(var t=J(e),r=0;r<this.length;r+=1)if(1===t.length)t[0].parentNode.insertBefore(this[r],t[0].nextSibling);else if(t.length>1)for(var n=0;n<t.length;n+=1)t[n].parentNode.insertBefore(this[r].cloneNode(!0),t[n].nextSibling)}function je(e){return this.length>0?e?this[0].nextElementSibling&&J(this[0].nextElementSibling).is(e)?J([this[0].nextElementSibling]):J([]):this[0].nextElementSibling?J([this[0].nextElementSibling]):J([]):J([])}function Ue(e){var t=[],r=this[0];if(!r)return J([]);for(;r.nextElementSibling;){var n=r.nextElementSibling;e?J(n).is(e)&&t.push(n):t.push(n),r=n}return J(t)}function qe(e){if(this.length>0){var t=this[0];return e?t.previousElementSibling&&J(t.previousElementSibling).is(e)?J([t.previousElementSibling]):J([]):t.previousElementSibling?J([t.previousElementSibling]):J([])}return J([])}function He(e){var t=[],r=this[0];if(!r)return J([]);for(;r.previousElementSibling;){var n=r.previousElementSibling;e?J(n).is(e)&&t.push(n):t.push(n),r=n}return J(t)}function Ge(e){return this.nextAll(e).add(this.prevAll(e))}function We(e){for(var t=[],r=0;r<this.length;r+=1)null!==this[r].parentNode&&(e?J(this[r].parentNode).is(e)&&t.push(this[r].parentNode):t.push(this[r].parentNode));return J(t)}function Xe(e){for(var t=[],r=0;r<this.length;r+=1)for(var n=this[r].parentNode;n;)e?J(n).is(e)&&t.push(n):t.push(n),n=n.parentNode;return J(t)}function Ze(e){var t=this;return void 0===e?J([]):(t.is(e)||(t=t.parents(e).eq(0)),t)}function Ye(e){for(var t=[],r=0;r<this.length;r+=1)for(var n=this[r].querySelectorAll(e),a=0;a<n.length;a+=1)t.push(n[a]);return J(t)}function Ke(e){for(var t=[],r=0;r<this.length;r+=1)for(var n=this[r].children,a=0;a<n.length;a+=1)e&&!J(n[a]).is(e)||t.push(n[a]);return J(t)}function Qe(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}function Je(){return this.remove()}function et(){for(var e,t,r=this,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];for(e=0;e<a.length;e+=1){var o=J(a[e]);for(t=0;t<o.length;t+=1)r.push(o[t])}return r}function tt(){for(var e=0;e<this.length;e+=1){var t=this[e];if(1===t.nodeType){for(var r=0;r<t.childNodes.length;r+=1)t.childNodes[r].parentNode&&t.childNodes[r].parentNode.removeChild(t.childNodes[r]);t.textContent=""}}return this}function rt(){for(var e=l(),t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],s=r[3],c=r[4];return 4===r.length&&"function"==typeof s&&(c=s,a=r[0],i=r[1],o=r[2],c=r[3],s=r[4]),void 0===s&&(s="swing"),this.each((function(){var t,r,n,l,u,p,d,h,f=this,m=i>0||0===i,g=a>0||0===a;if(void 0===s&&(s="swing"),m&&(t=f.scrollTop,o||(f.scrollTop=i)),g&&(r=f.scrollLeft,o||(f.scrollLeft=a)),o){m&&(n=f.scrollHeight-f.offsetHeight,u=Math.max(Math.min(i,n),0)),g&&(l=f.scrollWidth-f.offsetWidth,p=Math.max(Math.min(a,l),0));var v=null;m&&u===t&&(m=!1),g&&p===r&&(g=!1),e.requestAnimationFrame((function n(a){void 0===a&&(a=(new Date).getTime()),null===v&&(v=a);var i,l=Math.max(Math.min((a-v)/o,1),0),y="linear"===s?l:.5-Math.cos(l*Math.PI)/2;m&&(d=t+y*(u-t)),g&&(h=r+y*(p-r)),m&&u>t&&d>=u&&(f.scrollTop=u,i=!0),m&&u<t&&d<=u&&(f.scrollTop=u,i=!0),g&&p>r&&h>=p&&(f.scrollLeft=p,i=!0),g&&p<r&&h<=p&&(f.scrollLeft=p,i=!0),i?c&&c():(m&&(f.scrollTop=d),g&&(f.scrollLeft=h),e.requestAnimationFrame(n))}))}}))}function nt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],a=t[1],i=t[2],o=t[3];3===t.length&&"function"==typeof i&&(n=t[0],a=t[1],o=t[2],i=t[3]);var s=this;return void 0===n?s.length>0?s[0].scrollTop:null:s.scrollTo(void 0,n,a,i,o)}function at(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],a=t[1],i=t[2],o=t[3];3===t.length&&"function"==typeof i&&(n=t[0],a=t[1],o=t[2],i=t[3]);var s=this;return void 0===n?s.length>0?s[0].scrollLeft:null:s.scrollTo(n,void 0,a,i,o)}function it(e,t){var r,n=l(),a=this,i={props:Object.assign({},e),params:Object.assign({duration:300,easing:"swing"},t),elements:a,animating:!1,que:[],easingProgress:function(e,t){return"swing"===e?.5-Math.cos(t*Math.PI)/2:"function"==typeof e?e(t):t},stop:function(){i.frameId&&n.cancelAnimationFrame(i.frameId),i.animating=!1,i.elements.each((function(e){delete e.dom7AnimateInstance})),i.que=[]},done:function(e){if(i.animating=!1,i.elements.each((function(e){delete e.dom7AnimateInstance})),e&&e(a),i.que.length>0){var t=i.que.shift();i.animate(t[0],t[1])}},animate:function(e,t){if(i.animating)return i.que.push([e,t]),i;var r=[];i.elements.each((function(t,a){var o,s,l,c,u;t.dom7AnimateInstance||(i.elements[a].dom7AnimateInstance=i),r[a]={container:t},Object.keys(e).forEach((function(i){o=n.getComputedStyle(t,null).getPropertyValue(i).replace(",","."),s=parseFloat(o),l=o.replace(s,""),c=parseFloat(e[i]),u=e[i]+l,r[a][i]={initialFullValue:o,initialValue:s,unit:l,finalValue:c,finalFullValue:u,currentValue:s}}))}));var o,s,l=null,c=0,u=0,p=!1;return i.animating=!0,i.frameId=n.requestAnimationFrame((function d(){var h,f;o=(new Date).getTime(),p||(p=!0,t.begin&&t.begin(a)),null===l&&(l=o),t.progress&&t.progress(a,Math.max(Math.min((o-l)/t.duration,1),0),l+t.duration-o<0?0:l+t.duration-o,l),r.forEach((function(n){var a=n;s||a.done||Object.keys(e).forEach((function(n){if(!s&&!a.done){h=Math.max(Math.min((o-l)/t.duration,1),0),f=i.easingProgress(t.easing,h);var p=a[n],d=p.initialValue,m=p.finalValue,g=p.unit;a[n].currentValue=d+f*(m-d);var v=a[n].currentValue;(m>d&&v>=m||m<d&&v<=m)&&(a.container.style[n]=m+g,(u+=1)===Object.keys(e).length&&(a.done=!0,c+=1),c===r.length&&(s=!0)),s?i.done(t.complete):a.container.style[n]=v+g}}))})),s||(i.frameId=n.requestAnimationFrame(d))})),i}};if(0===i.elements.length)return a;for(var o=0;o<i.elements.length;o+=1)i.elements[o].dom7AnimateInstance?r=i.elements[o].dom7AnimateInstance:i.elements[o].dom7AnimateInstance=i;return r||(r=i),"stop"===e?r.stop():r.animate(i.props,i.params),a}function ot(){for(var e=this,t=0;t<e.length;t+=1)e[t].dom7AnimateInstance&&e[t].dom7AnimateInstance.stop()}J.fn=Y.prototype;var st="resize scroll".split(" ");function lt(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(void 0===r[0]){for(var a=0;a<this.length;a+=1)st.indexOf(e)<0&&(e in this[a]?this[a][e]():J(this[a]).trigger(e));return this}return this.on.apply(this,[e].concat(r))}}var ct=lt("click"),ut=lt("blur"),pt=lt("focus"),dt=lt("focusin"),ht=lt("focusout"),ft=lt("keyup"),mt=lt("keydown"),gt=lt("keypress"),vt=lt("submit"),yt=lt("change"),bt=lt("mousedown"),_t=lt("mousemove"),xt=lt("mouseup"),wt=lt("mouseenter"),Et=lt("mouseleave"),Ct=lt("mouseout"),kt=lt("mouseover"),Tt=lt("touchstart"),St=lt("touchend"),Pt=lt("touchmove"),Mt=lt("resize"),It=lt("scroll"),At=J;Object.keys(t).forEach((function(e){"$"!==e&&(J.fn[e]=t[e])}));var Ot=J;function zt(e,t,r){return(zt=Rt()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&Lt(a,r.prototype),a}).apply(null,arguments)}function Rt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Lt(e,t){return(Lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dt(e){void 0===e&&(e={});var t=e,r=t.defaultSelector,n=t.constructor,a=t.domProp,i=t.app,o=t.addMethods,s={create:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return zt(n,i?[i].concat(t):t)},get:function(e){if(void 0===e&&(e=r),e instanceof n)return e;var t=Ot(e);return 0!==t.length?t[0][a]:void 0},destroy:function(e){var t=s.get(e);if(t&&t.destroy)return t.destroy()}};return o&&Array.isArray(o)&&o.forEach((function(e){s[e]=function(t){void 0===t&&(t=r);for(var n=s.get(t),a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];if(n&&n[e])return n[e].apply(n,i)}})),s}function Bt(){return(Bt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function $t(e){void 0===e&&(e={});var t=e,r=t.defaultSelector,n=t.constructor,a=t.app;return M(Dt({defaultSelector:r,constructor:n,app:a,domProp:"f7Modal"}),{open:function(e,t,r){var i=Ot(e);if(i.length>1&&r){var o=Ot(r).parents(".page");o.length&&i.each((function(e){var t=Ot(e);t.parents(o)[0]===o[0]&&(i=t)}))}if(i.length>1&&(i=i.eq(i.length-1)),i.length){var s=i[0].f7Modal;if(!s){var l=i.dataset();s=new n(a,Bt({el:i},l))}return s.open(t)}},close:function(e,t,i){void 0===e&&(e=r);var o=Ot(e);if(o.length){if(o.length>1){var s;if(i){var l=Ot(i);l.length&&(s=l.parents(o))}o=s&&s.length>0?s:o.eq(o.length-1)}var c=o[0].f7Modal;if(!c){var u=o.dataset();c=new n(a,Bt({el:o},u))}return c.close(t)}}})}var Ft=[];var Nt=function(e){var t=this,r=l(),n=o();return new Promise((function(a,i){var o,s,l,c=t.instance;if(e){if("string"==typeof e){var u=e.match(/([a-z0-9-]*)/i);if(e.indexOf(".")<0&&u&&u[0].length===e.length){if(!c||c&&!c.params.lazyModulesPath)return void i(new Error('Framework7: "lazyModulesPath" app parameter must be specified to fetch module by name'));o=c.params.lazyModulesPath+"/"+e+"/"+e+".js"}else o=e}else"function"==typeof e?l=e:s=e;if(l){var d=l(t,!1);if(!d)return void i(new Error("Framework7: Can't find Framework7 component in specified component function"));if(t.prototype.modules&&t.prototype.modules[d.name])return void a();g(d),a()}if(s){var h=s;if(!h)return void i(new Error("Framework7: Can't find Framework7 component in specified component"));if(t.prototype.modules&&t.prototype.modules[h.name])return void a();g(h),a()}if(o){if(Ft.indexOf(o)>=0)return void a();Ft.push(o);var f=new Promise((function(e,a){t.request.get(o,(function(i){var s="f7_component_loader_callback_"+p(),l=n.createElement("script");l.innerHTML="window."+s+" = function (Framework7, Framework7AutoInstallComponent) {return "+i.trim()+"}",Ot("head").append(l);var c=r[s];delete r[s],Ot(l).remove();var u=c(t,!1);u?(t.prototype.modules&&t.prototype.modules[u.name]||g(u),e()):a(new Error("Framework7: Can't find Framework7 component in "+o+" file"))}),(function(e,t){a(e,t)}))})),m=new Promise((function(e){t.request.get(o.replace(".js",c.rtl?".rtl.css":".css"),(function(t){var r=n.createElement("style");r.innerHTML=t,Ot("head").append(r),e()}),(function(){e()}))}));Promise.all([f,m]).then((function(){a()})).catch((function(e){i(e)}))}}else i(new Error("Framework7: Lazy module must be specified"));function g(e){t.use(e),c&&(c.useModuleParams(e,c.params),c.useModule(e))}}))};function Vt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ut(e,t){return(Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qt=function(e){var t,r;function n(t){var r;if(void 0===t&&(t={}),r=e.call(this,t)||this,n.instance&&"undefined"!=typeof window)throw new Error("Framework7 is already initialized and can't be initialized more than once");var a=N({userAgent:t.userAgent||void 0}),i=F(),s=M({},t),c=jt(r);c.device=a,c.support=i;var u=l(),p=o();n.instance=c;var d={version:"1.0.0",id:"io.framework7.myapp",el:"body",theme:"auto",language:u.navigator.language,routes:[],name:"Framework7",lazyModulesPath:null,initOnDeviceReady:!0,init:!0,autoDarkTheme:!1,iosTranslucentBars:!0,iosTranslucentModals:!0,component:void 0,componentUrl:void 0,userAgent:null,url:null};return c.useModulesParams(d),c.params=M(d,t),M(c,{id:c.params.id,name:c.params.name,version:c.params.version,routes:c.params.routes,language:c.params.language,theme:"auto"===c.params.theme?a.ios?"ios":a.desktop&&a.electron?"aurora":"md":c.params.theme,passedParams:s,online:u.navigator.onLine}),t.store&&(c.params.store=t.store),c.$el&&c.$el[0]&&(c.$el[0].f7=c),c.useModules(),c.initStore(),c.params.init&&(a.cordova&&c.params.initOnDeviceReady?Ot(p).on("deviceready",(function(){c.init()})):c.init()),c||jt(r)}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,Ut(t,r);var a,i,s,c=n.prototype;return c.mount=function(e){var t=this,r=l(),n=o(),a=Ot(e||t.params.el).eq(0);t.$el=a,t.$el&&t.$el[0]&&(t.el=t.$el[0],t.el.f7=t,t.rtl="rtl"===a.css("direction"));var i="(prefers-color-scheme: dark)",s="(prefers-color-scheme: light)";t.mq={},r.matchMedia&&(t.mq.dark=r.matchMedia(i),t.mq.light=r.matchMedia(s)),t.colorSchemeListener=function(e){var r=e.matches,a=e.media;if(r){var o=n.querySelector("html");a===i?(o.classList.add("theme-dark"),t.darkTheme=!0,t.emit("darkThemeChange",!0)):a===s&&(o.classList.remove("theme-dark"),t.darkTheme=!1,t.emit("darkThemeChange",!1))}},t.emit("mount")},c.initStore=function(){var e=this;void 0!==e.params.store&&e.params.store.__store?e.store=e.params.store:e.store=e.createStore(e.params.store)},c.enableAutoDarkTheme=function(){var e=l(),t=o();if(e.matchMedia){var r=this,n=t.querySelector("html");r.mq.dark&&r.mq.light&&(r.mq.dark.addListener(r.colorSchemeListener),r.mq.light.addListener(r.colorSchemeListener)),r.mq.dark&&r.mq.dark.matches?(n.classList.add("theme-dark"),r.darkTheme=!0,r.emit("darkThemeChange",!0)):r.mq.light&&r.mq.light.matches&&(n.classList.remove("theme-dark"),r.darkTheme=!1,r.emit("darkThemeChange",!1))}},c.disableAutoDarkTheme=function(){if(l().matchMedia){var e=this;e.mq.dark&&e.mq.dark.removeListener(e.colorSchemeListener),e.mq.light&&e.mq.light.removeListener(e.colorSchemeListener)}},c.initAppComponent=function(e){var t=this;t.router.componentLoader(t.params.component,t.params.componentUrl,{componentOptions:{el:t.$el[0]}},(function(r){t.$el=Ot(r),t.$el[0].f7=t,t.$elComponent=r.f7Component,t.el=t.$el[0],e&&e()}),(function(){}))},c.init=function(e){var t=this;t.mount(e);var r=function(){if(!t.initialized){t.$el.addClass("framework7-initializing"),t.rtl&&Ot("html").attr("dir","rtl"),t.params.autoDarkTheme&&t.enableAutoDarkTheme();var e=l();e.addEventListener("offline",(function(){t.online=!1,t.emit("offline"),t.emit("connection",!1)})),e.addEventListener("online",(function(){t.online=!0,t.emit("online"),t.emit("connection",!0)})),t.$el.addClass("framework7-root"),Ot("html").removeClass("ios md aurora").addClass(t.theme);var r=t.device;t.params.iosTranslucentBars&&"ios"===t.theme&&r.ios&&Ot("html").addClass("ios-translucent-bars"),t.params.iosTranslucentModals&&"ios"===t.theme&&r.ios&&Ot("html").addClass("ios-translucent-modals"),w((function(){t.$el.removeClass("framework7-initializing")})),t.initialized=!0,t.emit("init")}};return t.params.component||t.params.componentUrl?t.initAppComponent((function(){r()})):r(),t},c.loadModule=function(){return n.loadModule.apply(n,arguments)},c.loadModules=function(){return n.loadModules.apply(n,arguments)},c.getVnodeHooks=function(e,t){var r=this;return r.vnodeHooks&&r.vnodeHooks[e]&&r.vnodeHooks[e][t]||[]},a=n,s=[{key:"Dom7",get:function(){return Ot}},{key:"$",get:function(){return Ot}},{key:"device",get:function(){return N()}},{key:"support",get:function(){return F()}},{key:"Class",get:function(){return q}},{key:"Events",get:function(){return V}}],(i=[{key:"$",get:function(){return Ot}}])&&Vt(a.prototype,i),s&&Vt(a,s),n}(q);qt.ModalMethods=$t,qt.ConstructorMethods=Dt,qt.loadModule=Nt,qt.loadModules=function(e){return Promise.all(e.map((function(e){return qt.loadModule(e)})))};var Ht=qt,Gt={name:"device",static:{getDevice:N},on:{init:function(){var e=o(),t=N(),r=[],n=e.querySelector("html"),a=e.querySelector('meta[name="apple-mobile-web-app-status-bar-style"]');n&&(t.standalone&&t.ios&&a&&"black-translucent"===a.content&&r.push("device-full-viewport"),r.push("device-pixel-ratio-"+Math.floor(t.pixelRatio)),t.os&&!t.desktop?r.push("device-"+t.os):t.desktop&&(r.push("device-desktop"),t.os&&r.push("device-"+t.os)),(t.cordova||t.phonegap)&&r.push("device-cordova"),t.capacitor&&r.push("device-capacitor"),r.forEach((function(e){n.classList.add(e)})))}}},Wt={name:"support",static:{getSupport:F}},Xt={name:"utils",proto:{utils:e},static:{utils:e}},Zt={name:"resize",create:function(){var e=this;e.getSize=function(){if(!e.el)return{width:0,height:0,left:0,top:0};var t=e.$el.offset(),r=[e.el.offsetWidth,e.el.offsetHeight,t.left,t.top],n=r[0],a=r[1],i=r[2],o=r[3];return e.width=n,e.height=a,e.left=i,e.top=o,{width:n,height:a,left:i,top:o}}},on:{init:function(){var e=this,t=l();e.getSize(),t.addEventListener("resize",(function(){e.emit("resize")}),!1),t.addEventListener("orientationchange",(function(){e.emit("orientationchange")}))},orientationchange:function(){var e=o();N().ipad&&(e.body.scrollLeft=0,setTimeout((function(){e.body.scrollLeft=0}),0))},resize:function(){this.getSize()}}};function Yt(e){var t="function"==typeof Map?new Map:void 0;return(Yt=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Kt(e,arguments,er(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Jt(n,e)})(e)}function Kt(e,t,r){return(Kt=Qt()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&Jt(a,r.prototype),a}).apply(null,arguments)}function Qt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Jt(e,t){return(Jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function er(e){return(er=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var tr={},rr=0,nr=function(e){Object.assign(this,e)},ar=function(e){var t,r;function n(t){var r;return r=e.call(this)||this,Object.assign(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r),t),r}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,Jt(t,r),n}(Yt(Error)),ir=function(e){return new Promise((function(t,r){var n=l(),a=o(),i=M({},tr);"beforeCreate beforeOpen beforeSend error complete success statusCode".split(" ").forEach((function(e){delete i[e]}));var s=M({url:n.location.toString(),method:"GET",data:!1,async:!0,cache:!0,user:"",password:"",headers:{},xhrFields:{},statusCode:{},processData:!0,dataType:"text",contentType:"application/x-www-form-urlencoded",timeout:0},i),c=M({},s,e);if(e.abortController&&(c.abortController=e.abortController),c.abortController&&c.abortController.canceled)r(new ar({options:c,status:"canceled",message:"canceled"}));else if(!1!==S("beforeCreate",c)){c.type&&(c.method=c.type);var u,p=c.url.indexOf("?")>=0?"&":"?",d=c.method.toUpperCase();if(("GET"===d||"HEAD"===d||"OPTIONS"===d||"DELETE"===d)&&c.data)(u="string"==typeof c.data?c.data.indexOf("?")>=0?c.data.split("?")[1]:c.data:T(c.data)).length&&(c.url+=p+u,"?"===p&&(p="&"));if("json"===c.dataType&&c.url.indexOf("callback=")>=0){var h,f="f7jsonp_"+(Date.now()+(rr+=1)),m=c.url.split("callback="),g=m[0]+"callback="+f;if(m[1].indexOf("&")>=0){var v=m[1].split("&").filter((function(e){return e.indexOf("=")>0})).join("&");v.length>0&&(g+="&"+v)}var y=a.createElement("script");return y.type="text/javascript",y.onerror=function(){clearTimeout(h),S("error",null,"scripterror","scripterror"),r(new ar({options:c,status:"scripterror",message:"scripterror"})),S("complete",null,"scripterror")},y.src=g,n[f]=function(e){clearTimeout(h),S("success",e),y.parentNode.removeChild(y),y=null,delete n[f],t(new nr({options:c,data:e}))},a.querySelector("head").appendChild(y),void(c.timeout>0&&(h=setTimeout((function(){y.parentNode.removeChild(y),y=null,S("error",null,"timeout","timeout"),r(new ar({options:c,status:"timeout",message:"timeout"}))}),c.timeout)))}"GET"!==d&&"HEAD"!==d&&"OPTIONS"!==d&&"DELETE"!==d||!1===c.cache&&(c.url+=p+"_nocache"+Date.now());var b=new XMLHttpRequest;if(c.abortController){var _=!1;c.abortController.onAbort=function(){_||(_=!0,b.abort(),r(new ar({options:c,xhr:b,status:"canceled",message:"canceled"})))}}if(b.requestUrl=c.url,b.requestParameters=c,!1!==S("beforeOpen",b,c)){b.open(d,c.url,c.async,c.user,c.password);var x=null;if(("POST"===d||"PUT"===d||"PATCH"===d)&&c.data)if(c.processData)if([ArrayBuffer,Blob,Document,FormData].indexOf(c.data.constructor)>=0)x=c.data;else{var w="---------------------------"+Date.now().toString(16);"multipart/form-data"===c.contentType?b.setRequestHeader("Content-Type","multipart/form-data; boundary="+w):b.setRequestHeader("Content-Type",c.contentType),x="";var E=T(c.data);if("multipart/form-data"===c.contentType){E=E.split("&");for(var C=[],k=0;k<E.length;k+=1)C.push('Content-Disposition: form-data; name="'+E[k].split("=")[0]+'"\r\n\r\n'+E[k].split("=")[1]+"\r\n");x="--"+w+"\r\n"+C.join("--"+w+"\r\n")+"--"+w+"--\r\n"}else x="application/json"===c.contentType?JSON.stringify(c.data):E}else x=c.data,b.setRequestHeader("Content-Type",c.contentType);"json"!==c.dataType||c.headers&&c.headers.Accept||b.setRequestHeader("Accept","application/json"),c.headers&&Object.keys(c.headers).forEach((function(e){void 0!==c.headers[e]&&b.setRequestHeader(e,c.headers[e])})),void 0===c.crossDomain&&(c.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(c.url)&&RegExp.$2!==n.location.host),c.crossDomain||b.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.xhrFields&&M(b,c.xhrFields),b.onload=function(){var e;if(b.status>=200&&b.status<300||0===b.status)if("json"===c.dataType){var n;try{e=JSON.parse(b.responseText)}catch(e){n=!0}n?(S("error",b,"parseerror","parseerror"),r(new ar({options:c,xhr:b,status:"parseerror",message:"parseerror"}))):(S("success",e,b.status,b),t(new nr({options:c,data:e,status:b.status,xhr:b})))}else S("success",e="text"===b.responseType||""===b.responseType?b.responseText:b.response,b.status,b),t(new nr({options:c,data:e,status:b.status,xhr:b}));else S("error",b,b.status,b.statusText),r(new ar({options:c,xhr:b,status:b.status,message:b.statusText}));c.statusCode&&(tr.statusCode&&tr.statusCode[b.status]&&tr.statusCode[b.status](b),c.statusCode[b.status]&&c.statusCode[b.status](b)),S("complete",b,b.status)},b.onerror=function(){S("error",b,b.status,b.status),r(new ar({options:c,xhr:b,status:b.status,message:b.statusText})),S("complete",b,"error")},c.timeout>0&&(b.timeout=c.timeout,b.ontimeout=function(){S("error",b,"timeout","timeout"),r(new ar({options:c,xhr:b,status:"timeout",message:"timeout"})),S("complete",b,"timeout")}),!1!==S("beforeSend",b,c)?b.send(x):r(new ar({options:c,xhr:b,status:"canceled",message:"canceled"}))}else r(new ar({options:c,xhr:b,status:"canceled",message:"canceled"}))}else r(new ar({options:c,status:"canceled",message:"canceled"}));function S(e){for(var t,r,n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return tr[e]&&(t=tr[e].apply(tr,a)),c[e]&&(r=c[e].apply(c,a)),"boolean"!=typeof t&&(t=!0),"boolean"!=typeof r&&(r=!0),(!c.abortController||!c.abortController.canceled||"beforeCreate"!==e&&"beforeOpen"!==e&&"beforeSend"!==e)&&(t&&r)}}))};function or(e){for(var t=[],r=t[0],n=t[1],a=t[2],i=t[3],o=t[4],s=arguments.length,l=new Array(s>1?s-1:0),c=1;c<s;c++)l[c-1]=arguments[c];"function"==typeof l[1]?(r=l[0],a=l[1],i=l[2],o=l[3]):(r=l[0],n=l[1],a=l[2],i=l[3],o=l[4]),[a,i].forEach((function(e){"string"==typeof e&&(o=e,e===a?a=void 0:i=void 0)}));var u={url:r,method:"post"===e||"postJSON"===e?"POST":"GET",data:n,success:a,error:i,dataType:o=o||("json"===e||"postJSON"===e?"json":void 0)};return"postJSON"===e&&M(u,{contentType:"application/json",processData:!1,crossDomain:!0,data:"string"==typeof n?n:JSON.stringify(n)}),ir(u)}Object.assign(ir,{get:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return or.apply(void 0,["get"].concat(t))},post:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return or.apply(void 0,["post"].concat(t))},json:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return or.apply(void 0,["json"].concat(t))},getJSON:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return or.apply(void 0,["json"].concat(t))},postJSON:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return or.apply(void 0,["postJSON"].concat(t))}}),ir.abortController=function(){var e={canceled:!1,onAbort:null,abort:function(){e.canceled=!0,e.onAbort&&e.onAbort()}};return e},ir.setup=function(e){e.type&&!e.method&&M(e,{method:e.type}),M(tr,e)};var sr={name:"request",proto:{request:ir},static:{request:ir}};var lr={name:"touch",params:{touch:{touchClicksDistanceThreshold:5,disableContextMenu:!1,tapHold:!1,tapHoldDelay:750,tapHoldPreventClicks:!0,activeState:!0,activeStateElements:"a, button, label, span, .actions-button, .stepper-button, .stepper-button-plus, .stepper-button-minus, .card-expandable, .menu-item, .link, .item-link, .accordion-item-toggle",activeStateOnMouseMove:!1,mdTouchRipple:!0,iosTouchRipple:!1,auroraTouchRipple:!1,touchRippleElements:".ripple, .link, .item-link, .list-button, .links-list a, .button, button, .input-clear-button, .dialog-button, .tab-link, .item-radio, .item-checkbox, .actions-button, .searchbar-disable-button, .fab a, .checkbox, .radio, .data-table .sortable-cell:not(.input-cell), .notification-close-button, .stepper-button, .stepper-button-minus, .stepper-button-plus, .menu-item-content, .list.accordion-list .accordion-item-toggle",touchRippleInsetElements:".ripple-inset, .icon-only, .searchbar-disable-button, .input-clear-button, .notification-close-button, .md .navbar .link.back"}},create:function(){var e=F();M(this,{touchEvents:{start:e.touch?"touchstart":e.pointerEvents?"pointerdown":"mousedown",move:e.touch?"touchmove":e.pointerEvents?"pointermove":"mousemove",end:e.touch?"touchend":e.pointerEvents?"pointerup":"mouseup"}})},on:{init:function(){var e,t,r,n,a,i,s,c,u,p,d,h,f=this,m=N(),g=F(),v=l(),y=o(),b=f.params.touch,_=b[f.theme+"TouchRipple"];function x(e){var t,r=Ot(e),n=r.parents(b.activeStateElements);if(r.closest(".no-active-state").length)return null;if(r.is(b.activeStateElements)&&(t=r),n.length>0&&(t=t?t.add(n):n),t&&t.length>1){for(var a,i=[],o=0;o<t.length;o+=1)a||(i.push(t[o]),(t.eq(o).hasClass("prevent-active-state-propagation")||t.eq(o).hasClass("no-active-state-propagation"))&&(a=!0));t=Ot(i)}return t||r}function w(e){return e.parents(".page-content").length>0}function E(){c&&c.addClass("active-state")}function C(){c&&(c.removeClass("active-state"),c=null)}function k(e,t,r){e&&(p=f.touchRipple.create(f,e,t,r))}function T(){p&&(p.remove(),p=void 0,d=void 0)}function S(r){(d=function(e){var t=b.touchRippleElements,r=Ot(e);if(r.is(t))return!r.hasClass("no-ripple")&&r;if(r.parents(t).length>0){var n=r.parents(t).eq(0);return!n.hasClass("no-ripple")&&n}return!1}(r))&&0!==d.length?w(d)?(clearTimeout(h),h=setTimeout((function(){T(),k(d,e,t)}),80)):(T(),k(d,e,t)):d=void 0}function P(){clearTimeout(h),T()}function M(){p||!d||n?T():(clearTimeout(h),k(d,e,t),setTimeout(T,0))}function I(){Ot(".active-state").removeClass("active-state"),_&&M()}function A(e,t){f.emit({events:e,data:[t]})}function O(e){A("touchstart touchstart:active",e)}function z(e){A("touchmove touchmove:active",e)}function R(e){A("touchend touchend:active",e)}function L(e){A("touchstart:passive",e)}function D(e){A("touchmove:passive",e)}function B(e){A("touchend:passive",e)}m.ios&&m.webView&&v.addEventListener("touchstart",(function(){}));var $=!!g.passiveListener&&{passive:!0},V=!g.passiveListener||{passive:!0,capture:!0},j=!!g.passiveListener&&{passive:!1},U=!g.passiveListener||{passive:!1,capture:!0};y.addEventListener("click",(function(e){A("click",e)}),!0),g.passiveListener?(y.addEventListener(f.touchEvents.start,O,U),y.addEventListener(f.touchEvents.move,z,j),y.addEventListener(f.touchEvents.end,R,j),y.addEventListener(f.touchEvents.start,L,V),y.addEventListener(f.touchEvents.move,D,$),y.addEventListener(f.touchEvents.end,B,$)):(y.addEventListener(f.touchEvents.start,(function(e){O(e),L(e)}),!0),y.addEventListener(f.touchEvents.move,(function(e){z(e),D(e)}),!1),y.addEventListener(f.touchEvents.end,(function(e){R(e),B(e)}),!1)),g.touch?(f.on("click",(function(e){var t=e&&e.detail&&"f7Overswipe"===e.detail,n=s;return r&&e.target!==r&&(n=!t),b.tapHold&&b.tapHoldPreventClicks&&a&&(n=!0),n&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault()),b.tapHold&&(i=setTimeout((function(){a=!1}),m.ios||m.androidChrome?100:400)),s=!1,r=null,!n})),f.on("touchstart",(function(o){return n=!1,a=!1,s=!1,o.targetTouches.length>1?(c&&C(),!0):(o.touches.length>1&&c&&C(),b.tapHold&&(i&&clearTimeout(i),i=setTimeout((function(){o&&o.touches&&o.touches.length>1||(a=!0,o.preventDefault(),s=!0,Ot(o.target).trigger("taphold",o),f.emit("taphold",o))}),b.tapHoldDelay)),r=o.target,e=o.targetTouches[0].pageX,t=o.targetTouches[0].pageY,b.activeState&&((c=x(r))&&!w(c)?E():c&&(u=setTimeout(E,80))),_&&S(r),!0)})),f.on("touchmove",(function(r){var a,o;if("touchmove"===r.type&&(a=r.targetTouches[0],o=b.touchClicksDistanceThreshold),o&&a){var l=a.pageX,c=a.pageY;(Math.abs(l-e)>o||Math.abs(c-t)>o)&&(n=!0)}else n=!0;n&&(s=!0,b.tapHold&&clearTimeout(i),b.activeState&&(clearTimeout(u),C()),_&&P())})),f.on("touchend",(function(e){return clearTimeout(u),clearTimeout(i),y.activeElement===e.target?(b.activeState&&C(),_&&M(),!0):(b.activeState&&(E(),setTimeout(C,0)),_&&M(),!(b.tapHoldPreventClicks&&a||s)||(e.cancelable&&e.preventDefault(),s=!0,!1))})),y.addEventListener("touchcancel",(function(){r=null,clearTimeout(u),clearTimeout(i),b.activeState&&C(),_&&M()}),{passive:!0})):b.activeState&&(f.on("touchstart",(function(r){var n=x(r.target);n&&(n.addClass("active-state"),"which"in r&&3===r.which&&setTimeout((function(){Ot(".active-state").removeClass("active-state")}),0)),_&&(e=r.pageX,t=r.pageY,S(r.target,r.pageX,r.pageY))})),f.on("touchmove",(function(){b.activeStateOnMouseMove||Ot(".active-state").removeClass("active-state"),_&&P()})),f.on("touchend",I),y.addEventListener("pointercancel",I,{passive:!0})),y.addEventListener("contextmenu",(function(e){b.disableContextMenu&&(m.ios||m.android||m.cordova||v.Capacitor&&v.Capacitor.isNative)&&e.preventDefault(),_&&(c&&C(),M())}))}}};function cr(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"!==n&&"+"!==n&&"?"!==n)if("\\"!==n)if("{"!==n)if("}"!==n)if(":"!==n)if("("!==n)t.push({type:"CHAR",index:r,value:e[r++]});else{var a=1,i="";if("?"===e[s=r+1])throw new TypeError('Pattern cannot start with "?" at '+s);for(;s<e.length;)if("\\"!==e[s]){if(")"===e[s]){if(0==--a){s++;break}}else if("("===e[s]&&(a++,"?"!==e[s+1]))throw new TypeError("Capturing groups are not allowed at "+s);i+=e[s++]}else i+=e[s++]+e[s++];if(a)throw new TypeError("Unbalanced pattern at "+r);if(!i)throw new TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:i}),r=s}else{for(var o="",s=r+1;s<e.length;){var l=e.charCodeAt(s);if(!(l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||95===l))break;o+=e[s++]}if(!o)throw new TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:o}),r=s}else t.push({type:"CLOSE",index:r,value:e[r++]});else t.push({type:"OPEN",index:r,value:e[r++]});else t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});else t.push({type:"MODIFIER",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),n=t.prefixes,a=void 0===n?"./":n,i="[^"+pr(t.delimiter||"/#?")+"]+?",o=[],s=0,l=0,c="",u=function(e){if(l<r.length&&r[l].type===e)return r[l++].value},p=function(e){var t=u(e);if(void 0!==t)return t;var n=r[l],a=n.type,i=n.index;throw new TypeError("Unexpected "+a+" at "+i+", expected "+e)},d=function(){for(var e,t="";e=u("CHAR")||u("ESCAPED_CHAR");)t+=e;return t};l<r.length;){var h=u("CHAR"),f=u("NAME"),m=u("PATTERN");if(f||m){var g=h||"";-1===a.indexOf(g)&&(c+=g,g=""),c&&(o.push(c),c=""),o.push({name:f||s++,prefix:g,suffix:"",pattern:m||i,modifier:u("MODIFIER")||""})}else{var v=h||u("ESCAPED_CHAR");if(v)c+=v;else if(c&&(o.push(c),c=""),u("OPEN")){g=d();var y=u("NAME")||"",b=u("PATTERN")||"",_=d();p("CLOSE"),o.push({name:y||(b?s++:""),pattern:y&&!b?i:b,prefix:g,suffix:_,modifier:u("MODIFIER")||""})}else p("END")}}return o}function ur(e,t){return function(e,t){void 0===t&&(t={});var r=dr(t),n=t.encode,a=void 0===n?function(e){return e}:n,i=t.validate,o=void 0===i||i,s=e.map((function(e){if("object"==typeof e)return new RegExp("^(?:"+e.pattern+")$",r)}));return function(t){for(var r="",n=0;n<e.length;n++){var i=e[n];if("string"!=typeof i){var l=t?t[i.name]:void 0,c="?"===i.modifier||"*"===i.modifier,u="*"===i.modifier||"+"===i.modifier;if(Array.isArray(l)){if(!u)throw new TypeError('Expected "'+i.name+'" to not repeat, but got an array');if(0===l.length){if(c)continue;throw new TypeError('Expected "'+i.name+'" to not be empty')}for(var p=0;p<l.length;p++){var d=a(l[p],i);if(o&&!s[n].test(d))throw new TypeError('Expected all "'+i.name+'" to match "'+i.pattern+'", but got "'+d+'"');r+=i.prefix+d+i.suffix}}else if("string"!=typeof l&&"number"!=typeof l){if(!c){var h=u?"an array":"a string";throw new TypeError('Expected "'+i.name+'" to be '+h)}}else{d=a(String(l),i);if(o&&!s[n].test(d))throw new TypeError('Expected "'+i.name+'" to match "'+i.pattern+'", but got "'+d+'"');r+=i.prefix+d+i.suffix}}else r+=i}return r}}(cr(e,t),t)}function pr(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function dr(e){return e&&e.sensitive?"":"i"}function hr(e,t,r){return function(e,t,r){void 0===r&&(r={});for(var n=r.strict,a=void 0!==n&&n,i=r.start,o=void 0===i||i,s=r.end,l=void 0===s||s,c=r.encode,u=void 0===c?function(e){return e}:c,p="["+pr(r.endsWith||"")+"]|$",d="["+pr(r.delimiter||"/#?")+"]",h=o?"^":"",f=0,m=e;f<m.length;f++){var g=m[f];if("string"==typeof g)h+=pr(u(g));else{var v=pr(u(g.prefix)),y=pr(u(g.suffix));if(g.pattern)if(t&&t.push(g),v||y)if("+"===g.modifier||"*"===g.modifier){var b="*"===g.modifier?"?":"";h+="(?:"+v+"((?:"+g.pattern+")(?:"+y+v+"(?:"+g.pattern+"))*)"+y+")"+b}else h+="(?:"+v+"("+g.pattern+")"+y+")"+g.modifier;else h+="("+g.pattern+")"+g.modifier;else h+="(?:"+v+y+")"+g.modifier}}if(l)a||(h+=d+"?"),h+=r.endsWith?"(?="+p+")":"$";else{var _=e[e.length-1],x="string"==typeof _?d.indexOf(_[_.length-1])>-1:void 0===_;a||(h+="(?:"+d+"(?="+p+"))?"),x||(h+="(?="+d+"|"+p+")")}return new RegExp(h,dr(r))}(cr(e,r),t,r)}function fr(e,t,r){return e instanceof RegExp?function(e,t){if(!t)return e;for(var r=/\((?:\?<(.*?)>)?(?!\?)/g,n=0,a=r.exec(e.source);a;)t.push({name:a[1]||n++,prefix:"",suffix:"",modifier:"",pattern:""}),a=r.exec(e.source);return e}(e,t):Array.isArray(e)?function(e,t,r){var n=e.map((function(e){return fr(e,t,r).source}));return new RegExp("(?:"+n.join("|")+")",dr(r))}(e,t,r):hr(e,t,r)}var mr={queue:[],clearQueue:function(){0!==mr.queue.length&&mr.queue.shift()()},routerQueue:[],clearRouterQueue:function(){if(0!==mr.routerQueue.length){var e=mr.routerQueue.pop(),t=e.router,r=e.stateUrl,n=e.action,a=t.params.animate;!1===t.params.browserHistoryAnimate&&(a=!1),"back"===n&&t.back({animate:a,browserHistory:!1}),"load"===n&&t.navigate(r,{animate:a,browserHistory:!1})}},handle:function(e){if(!mr.blockPopstate){var t=e.state;mr.previousState=mr.state,mr.state=t,mr.allowChange=!0,mr.clearQueue(),(t=mr.state)||(t={}),this.views.forEach((function(e){var r=e.router,n=t[e.id];if(!n&&e.params.browserHistory&&(n={url:e.router.history[0]}),n){var a=n.url||void 0,i=r.params.animate;!1===r.params.browserHistoryAnimate&&(i=!1),a!==r.url&&(r.history.indexOf(a)>=0?r.allowPageChange?r.back({animate:i,browserHistory:!1}):mr.routerQueue.push({action:"back",router:r}):r.allowPageChange?r.navigate(a,{animate:i,browserHistory:!1}):mr.routerQueue.unshift({action:"load",stateUrl:a,router:r}))}}))}},initViewState:function(e,t){var r,n=l(),a=M({},mr.state||{},((r={})[e]=t,r));mr.state=a,n.history.replaceState(a,"")},push:function(e,t,r){var n,a=l();if("#!/"===r.substr(-3)&&(r=r.replace("#!/","")),mr.allowChange){mr.previousState=mr.state;var i=M({},mr.previousState||{},((n={})[e]=t,n));mr.state=i,a.history.pushState(i,"",r)}else mr.queue.push((function(){mr.push(e,t,r)}))},replace:function(e,t,r){var n,a=l();if("#!/"===r.substr(-3)&&(r=r.replace("#!/","")),mr.allowChange){mr.previousState=mr.state;var i=M({},mr.previousState||{},((n={})[e]=t,n));mr.state=i,a.history.replaceState(i,"",r)}else mr.queue.push((function(){mr.replace(e,t,r)}))},go:function(e){var t=l();mr.allowChange=!1,t.history.go(e)},back:function(){var e=l();mr.allowChange=!1,e.history.back()},allowChange:!0,previousState:{},state:{},blockPopstate:!0,init:function(e){var t=l(),r=o();mr.state=t.history.state,Ot(t).on("load",(function(){setTimeout((function(){mr.blockPopstate=!1}),0)})),r.readyState&&"complete"===r.readyState&&(mr.blockPopstate=!1),Ot(t).on("popstate",mr.handle.bind(e))}},gr=mr;var vr=function(e){var t,r,n,a,i,o,s,l,c,u=e,p=u.$el,d=u.$navbarsEl,h=u.app,f=u.params,m=F(),g=N(),v=!1,y=!1,b={},_=[],x=[],w=!0,C=[],k=[],T=f[h.theme+"SwipeBackAnimateShadow"],S=f[h.theme+"SwipeBackAnimateOpacity"],P=f[h.theme+"SwipeBackActiveArea"],M=f[h.theme+"SwipeBackThreshold"],I=h.rtl?"right center":"left center",A=h.rtl?"calc(100% - var(--f7-navbar-large-title-padding-left) - var(--f7-safe-area-left)) center":"calc(var(--f7-navbar-large-title-padding-left) + var(--f7-safe-area-left)) center";function O(e){var t=void 0===e?{}:e,r=t.progress,n=t.reset,a=t.transition,i=t.reflow,o=["overflow","transform","transform-origin","opacity"];if(!0===a||!1===a)for(var s=0;s<l.length;s+=1){var c=l[s];c&&c.el&&(!0===a&&c.el.classList.add("navbar-page-transitioning"),!1===a&&c.el.classList.remove("navbar-page-transitioning"))}i&&l.length&&l[0]&&l[0].el&&(l[0].el._clientLeft=l[0].el.clientLeft);for(var u=0;u<l.length;u+=1){var p=l[u];if(p&&p.el){!p.className||p.classNameSet||n||(p.el.classList.add(p.className),p.classNameSet=!0),p.className&&n&&p.el.classList.remove(p.className);for(var d=0;d<o.length;d+=1){var h=o[d];p[h]&&(n?p.el.style[h]="":"function"==typeof p[h]?p.el.style[h]=p[h](r):p.el.style[h]=p[h])}}}}function z(e){var r=f[h.theme+"SwipeBack"];!w||!r||v||h.swipeout&&h.swipeout.el||!u.allowPageChange||Ot(e.target).closest(".range-slider, .calendar-months").length>0||Ot(e.target).closest(".page-master, .page-master-detail").length>0&&f.masterDetailBreakpoint>0&&h.width>=f.masterDetailBreakpoint||(y=!1,v=!0,t=void 0,b.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,b.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,a=E(),i=u.dynamicNavbar)}function R(e){if(v){var a="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,c="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;if(void 0===t&&(t=!!(t||Math.abs(c-b.y)>Math.abs(a-b.x))||a<b.x&&!h.rtl||a>b.x&&h.rtl),t||e.f7PreventSwipeBack||h.preventSwipeBack)v=!1;else{if(!y){var m=!1,w=Ot(e.target),E=w.closest(".swipeout");E.length>0&&(!h.rtl&&E.find(".swipeout-actions-left").length>0&&(m=!0),h.rtl&&E.find(".swipeout-actions-right").length>0&&(m=!0)),((_=w.closest(".page")).hasClass("no-swipeback")||w.closest(".no-swipeback, .card-opened").length>0)&&(m=!0),(x=p.find(".page-previous:not(.stacked)")).length>1&&(x=x.eq(x.length-1));b.x,p.offset().left;if(r=p.width(),(h.rtl?b.x<p.offset().left-p[0].scrollLeft+(r-P):b.x-p.offset().left>P)&&(m=!0),0!==x.length&&0!==_.length||(m=!0),m)return void(v=!1);T&&0===(o=_.find(".page-shadow-effect")).length&&(o=Ot('<div class="page-shadow-effect"></div>'),_.append(o)),S&&0===(s=x.find(".page-opacity-effect")).length&&(s=Ot('<div class="page-opacity-effect"></div>'),x.append(s)),i&&(C=d.find(".navbar-current:not(.stacked)"),(k=d.find(".navbar-previous:not(.stacked)")).length>1&&(k=k.eq(k.length-1)),l=function(){var e,t,r=[],n=h.rtl?-1:1,a=C.hasClass("navbar-transparent")&&!C.hasClass("navbar-large")&&!C.hasClass("navbar-transparent-visible"),i=C.hasClass("navbar-large"),o=C.hasClass("navbar-large-collapsed"),s=C.hasClass("navbar-large-transparent")||C.hasClass("navbar-large")&&C.hasClass("navbar-transparent"),l=k.hasClass("navbar-transparent")&&!k.hasClass("navbar-large")&&!k.hasClass("navbar-transparent-visible"),c=k.hasClass("navbar-large"),u=k.hasClass("navbar-large-collapsed"),p=k.hasClass("navbar-large-transparent")||k.hasClass("navbar-large")&&k.hasClass("navbar-transparent"),d=i&&!o,m=c&&!u,v=C.find(".left, .title, .right, .subnavbar, .fading, .title-large, .navbar-bg"),y=k.find(".left, .title, .right, .subnavbar, .fading, .title-large, .navbar-bg");return f.iosAnimateNavbarBackIcon&&(e=C.hasClass("sliding")||C.find(".navbar-inner.sliding").length?C.find(".left").find(".back .icon + span").eq(0):C.find(".left.sliding").find(".back .icon + span").eq(0),t=k.hasClass("sliding")||k.find(".navbar-inner.sliding").length?k.find(".left").find(".back .icon + span").eq(0):k.find(".left.sliding").find(".back .icon + span").eq(0),e.length&&y.each((function(t){Ot(t).hasClass("title")&&(t.f7NavbarLeftOffset+=e.prev(".icon")[0].offsetWidth)}))),v.each((function(t){var l=Ot(t),c=l.hasClass("subnavbar"),u=l.hasClass("left"),p=l.hasClass("title"),h=l.hasClass("navbar-bg");if((!p&&!h||!a)&&(d||!l.hasClass(".title-large"))){var v={el:t};if(d){if(p)return;if(l.hasClass("title-large"))return r.indexOf(v)<0&&r.push(v),v.overflow="visible",void l.find(".title-large-text").each((function(e){r.push({el:e,transform:function(e){return"translateX("+100*e*n+"%)"}})}))}if(m&&(d||l.hasClass("title-large")&&(r.indexOf(v)<0&&r.push(v),v.opacity=0),u))return r.indexOf(v)<0&&r.push(v),v.opacity=function(e){return 1-Math.pow(e,.33)},void l.find(".back span").each((function(e){r.push({el:e,"transform-origin":I,transform:function(e){return"translateX(calc("+e+" * (var(--f7-navbarTitleLargeOffset) - var(--f7-navbarLeftTextOffset)))) translateY(calc("+e+" * (var(--f7-navbar-large-title-height) - var(--f7-navbar-large-title-padding-vertical) / 2))) scale("+(1+1*e)+")"}})}));if(h)return r.indexOf(v)<0&&r.push(v),d||m||(o?(s&&(v.className="ios-swipeback-navbar-bg-large"),v.transform=function(e){return"translateX("+100*e*n+"%) translateY(calc(-1 * var(--f7-navbar-large-title-height)))"}):v.transform=function(e){return"translateX("+100*e*n+"%)"}),!d&&m&&(v.className="ios-swipeback-navbar-bg-large",v.transform=function(e){return"translateX("+100*e*n+"%) translateY(calc(-1 * "+(1-e)+" * var(--f7-navbar-large-title-height)))"}),d&&m&&(v.transform=function(e){return"translateX("+100*e*n+"%)"}),void(d&&!m&&(v.transform=function(e){return"translateX("+100*e*n+"%) translateY(calc(-"+e+" * var(--f7-navbar-large-title-height)))"}));if(!l.hasClass("title-large")){var y=l.hasClass("sliding")||l.parents(".navbar-inner.sliding").length;if(r.indexOf(v)<0&&r.push(v),(!c||c&&!y)&&(v.opacity=function(e){return 1-Math.pow(e,.33)}),y){var b=v;if(u&&e.length&&f.iosAnimateNavbarBackIcon){var _={el:e[0]};b=_,r.push(_)}b.transform=function(e){var t=e*b.el.f7NavbarRightOffset;return 1===g.pixelRatio&&(t=Math.round(t)),c&&i?"translate3d("+t+"px, calc(-1 * var(--f7-navbar-large-collapse-progress) * var(--f7-navbar-large-title-height)), 0)":"translate3d("+t+"px,0,0)"}}}}})),y.each((function(e){var a=Ot(e),i=a.hasClass("subnavbar"),o=a.hasClass("left"),s=a.hasClass("title"),h=a.hasClass("navbar-bg");if(!s&&!h||!l){var v={el:e};if(m){if(s)return;if(r.indexOf(v)<0&&r.push(v),a.hasClass("title-large"))return v.opacity=1,v.overflow="visible",void a.find(".title-large-text").each((function(e){r.push({el:e,"transform-origin":A,opacity:function(e){return Math.pow(e,3)},transform:function(e){return"translateX(calc("+(1-e)+" * (var(--f7-navbarLeftTextOffset) - var(--f7-navbarTitleLargeOffset)))) translateY(calc("+(e-1)+" * var(--f7-navbar-large-title-height) + "+(1-e)+" * var(--f7-navbar-large-title-padding-vertical))) scale("+(.5+.5*e)+")"}})}))}if(h)return r.indexOf(v)<0&&r.push(v),d||m||(u?(p&&(v.className="ios-swipeback-navbar-bg-large"),v.transform=function(e){return"translateX("+(100*e-100)*n+"%) translateY(calc(-1 * var(--f7-navbar-large-title-height)))"}):v.transform=function(e){return"translateX("+(100*e-100)*n+"%)"}),!d&&m&&(v.transform=function(e){return"translateX("+(100*e-100)*n+"%) translateY(calc(-1 * "+(1-e)+" * var(--f7-navbar-large-title-height)))"}),d&&!m&&(v.className="ios-swipeback-navbar-bg-large",v.transform=function(e){return"translateX("+(100*e-100)*n+"%) translateY(calc(-"+e+" * var(--f7-navbar-large-title-height)))"}),void(d&&m&&(v.transform=function(e){return"translateX("+(100*e-100)*n+"%)"}));if(!a.hasClass("title-large")){var y=a.hasClass("sliding")||k.children(".navbar-inner.sliding").length;if(r.indexOf(v)<0&&r.push(v),(!i||i&&!y)&&(v.opacity=function(e){return Math.pow(e,3)}),y){var b=v;if(o&&t.length&&f.iosAnimateNavbarBackIcon){var _={el:t[0]};b=_,r.push(_)}b.transform=function(e){var t=b.el.f7NavbarLeftOffset*(1-e);return 1===g.pixelRatio&&(t=Math.round(t)),i&&c?"translate3d("+t+"px, calc(-1 * var(--f7-navbar-large-collapse-progress) * var(--f7-navbar-large-title-height)), 0)":"translate3d("+t+"px,0,0)"}}}}})),r}()),Ot(".sheet.modal-in").length>0&&h.sheet&&h.sheet.close(Ot(".sheet.modal-in"))}e.f7PreventSwipePanel=!0,y=!0,h.preventSwipePanelBySwipeBack=!0,e.preventDefault();var z=h.rtl?-1:1;(n=(a-b.x-M)*z)<0&&(n=0);var R=Math.min(Math.max(n/r,0),1),L={percentage:R,progress:R,currentPageEl:_[0],previousPageEl:x[0],currentNavbarEl:C[0],previousNavbarEl:k[0]};p.trigger("swipeback:move",L),u.emit("swipebackMove",L);var D=n*z,B=(n/5-r/5)*z;h.rtl?(D=Math.max(D,-r),B=Math.max(B,0)):(D=Math.min(D,r),B=Math.min(B,0)),1===g.pixelRatio&&(D=Math.round(D),B=Math.round(B)),u.swipeBackActive=!0,Ot([_[0],x[0]]).addClass("page-swipeback-active"),_.transform("translate3d("+D+"px,0,0)"),T&&(o[0].style.opacity=1-1*R),"ios"===h.theme&&x.transform("translate3d("+B+"px,0,0)"),S&&(s[0].style.opacity=1-1*R),i&&O({progress:R})}}}function L(){if(h.preventSwipePanelBySwipeBack=!1,!v||!y)return v=!1,void(y=!1);v=!1,y=!1,u.swipeBackActive=!1;var e=Ot([_[0],x[0]]);if(e.removeClass("page-swipeback-active"),0===n)return e.transform(""),o&&o.length>0&&o.remove(),s&&s.length>0&&s.remove(),void(i&&O({reset:!0}));var t=E()-a,l=!1;(t<300&&n>10||t>=300&&n>r/2)&&(_.removeClass("page-current").addClass("page-next"+("ios"!==h.theme?" page-next-on-right":"")),x.removeClass("page-previous").addClass("page-current").removeAttr("aria-hidden"),o&&(o[0].style.opacity=""),s&&(s[0].style.opacity=""),i&&(u.setNavbarPosition(C,"next"),u.setNavbarPosition(k,"current",!1)),l=!0),e.addClass("page-transitioning page-transitioning-swipeback"),g.ios&&(_[0]._clientLeft=_[0].clientLeft),e.transform(""),i&&O({progress:l?1:0,transition:!0,reflow:!!g.ios}),w=!1,u.allowPageChange=!1;var c={currentPageEl:_[0],previousPageEl:x[0],currentNavbarEl:C[0],previousNavbarEl:k[0]};l?(u.currentRoute=x[0].f7Page.route,u.currentPage=x[0],u.pageCallback("beforeOut",_,C,"current","next",{route:_[0].f7Page.route,swipeBack:!0}),u.pageCallback("beforeIn",x,k,"previous","current",{route:x[0].f7Page.route,swipeBack:!0},_[0]),p.trigger("swipeback:beforechange",c),u.emit("swipebackBeforeChange",c)):(p.trigger("swipeback:beforereset",c),u.emit("swipebackBeforeReset",c)),_.transitionEnd((function(){e.removeClass("page-transitioning page-transitioning-swipeback"),i&&O({reset:!0,transition:!1}),w=!0,u.allowPageChange=!0,l?(1===u.history.length&&u.history.unshift(u.url),u.history.pop(),u.saveHistory(),f.browserHistory&&gr.back(),u.pageCallback("afterOut",_,C,"current","next",{route:_[0].f7Page.route,swipeBack:!0}),u.pageCallback("afterIn",x,k,"previous","current",{route:x[0].f7Page.route,swipeBack:!0}),f.stackPages&&u.initialPages.indexOf(_[0])>=0?(_.addClass("stacked"),i&&C.addClass("stacked")):(u.pageCallback("beforeRemove",_,C,"next",{swipeBack:!0}),u.removePage(_),i&&u.removeNavbar(C)),p.trigger("swipeback:afterchange",c),u.emit("swipebackAfterChange",c),u.emit("routeChanged",u.currentRoute,u.previousRoute,u),f.preloadPreviousPage&&u.back(u.history[u.history.length-2],{preload:!0})):(p.trigger("swipeback:afterreset",c),u.emit("swipebackAfterReset",c)),o&&o.length>0&&o.remove(),s&&s.length>0&&s.remove()}))}c=!("touchstart"!==h.touchEvents.start||!m.passiveListener)&&{passive:!0,capture:!1},p.on(h.touchEvents.start,z,c),h.on("touchmove:active",R),h.on("touchend:passive",L),u.on("routerDestroy",(function(){var e=!("touchstart"!==h.touchEvents.start||!m.passiveListener)&&{passive:!0,capture:!1};p.off(h.touchEvents.start,z,e),h.off("touchmove:active",R),h.off("touchend:passive",L)}))};function yr(e,t,r){var n=this,a=t.route.redirect,i="forward"===e?"navigate":"back";if(r.initial&&n.params.browserHistory&&(r.replaceState=!0,r.history=!0),"function"==typeof a){n.allowPageChange=!1;var o=a.call(n,{router:n,to:t,resolve:function(e,t){void 0===t&&(t={}),n.allowPageChange=!0,n[i](e,M({},r,t))},reject:function(){n.allowPageChange=!0},direction:e,app:n.app});return o&&"string"==typeof o?(n.allowPageChange=!0,n[i](o,r)):n}return n[i](a,r)}function br(e,t,r,n,a,i,o,s){var l=[];Array.isArray(r)?l.push.apply(l,r):r&&"function"==typeof r&&l.push(r),t&&(Array.isArray(t)?l.push.apply(l,t):l.push(t)),function t(){0!==l.length?l.shift().call(e,{router:e,to:n,from:a,resolve:function(){t()},reject:function(){o()},direction:s,app:e.app}):i()}()}function _r(e,t,r,n,a){var i=this;function o(){e&&e.route&&(i.params.routesBeforeEnter||e.route.beforeEnter)?(i.allowPageChange=!1,br(i,i.params.routesBeforeEnter,e.route.beforeEnter,e,t,(function(){i.allowPageChange=!0,r()}),(function(){n()}),a)):r()}t&&t.route&&(i.params.routesBeforeLeave||t.route.beforeLeave)?(i.allowPageChange=!1,br(i,i.params.routesBeforeLeave,t.route.beforeLeave,e,t,(function(){i.allowPageChange=!0,o()}),(function(){n()}),a)):o()}function xr(e,t){if(!e.view)throw new Error("Framework7: it is not allowed to use router methods on global app router. Use router methods only on related View, e.g. app.views.main.router."+t+"(...)")}function wr(e,t,r,n){function a(e){e.then((function(e){r({component:e.default||e._default||e})})).catch((function(e){throw n(),new Error(e)}))}if(t instanceof Promise)a(t);else{var i=t.call(e);i instanceof Promise?a(i):r({component:i})}}function Er(){return(Er=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Cr(e,t,r){void 0===r&&(r={});var n,a,i,s=o(),l=Ot(t),c=e.app,u=e.view,p=M(!1,{animate:e.params.animate,browserHistory:!0,replaceState:!1,history:!0,reloadCurrent:e.params.reloadPages,reloadPrevious:!1,reloadAll:!1,clearPreviousHistory:!1,reloadDetail:e.params.reloadDetail,on:{}},r),d=e.params.masterDetailBreakpoint>0,h=d&&p.route&&p.route.route&&(!0===p.route.route.master||"function"==typeof p.route.route.master&&p.route.route.master(c,e)),f=0,m=e.currentRoute.modal;if(m||"popup popover sheet loginScreen actions customModal panel".split(" ").forEach((function(t){e.currentRoute&&e.currentRoute.route&&e.currentRoute.route[t]&&(m=!0,i=t)})),m){var g=e.currentRoute.modal||e.currentRoute.route.modalInstance||c[i].get(),v=e.history[e.history.length-2],y=e.findMatchingRoute(v);!y&&v&&(y={url:v,path:v.split("?")[0],query:C(v),route:{path:v.split("?")[0],url:v}}),e.modalRemove(g)}var b,_,x,w,E=e.dynamicNavbar,k=e.$el,T=l,S=p.reloadPrevious||p.reloadCurrent||p.reloadAll;if(e.allowPageChange=!1,0===T.length)return e.allowPageChange=!0,e;T.length&&e.removeThemeElements(T),E&&(x=T.children(".navbar"),_=e.$navbarsEl,0===x.length&&T[0]&&T[0].f7Page&&(x=T[0].f7Page.$navbarEl)),p.route&&p.route.route&&p.route.route.keepAlive&&!p.route.route.keepAliveData&&(p.route.route.keepAliveData={pageEl:l[0]});var P,I,A,O,z=k.children(".page:not(.stacked)").filter((function(e){return e!==T[0]}));if(E&&(P=_.children(".navbar:not(.stacked)").filter((function(e){return e!==x[0]}))),p.reloadPrevious&&z.length<2)return e.allowPageChange=!0,e;if(d&&!p.reloadAll){for(var R=0;R<z.length;R+=1)n||!z[R].classList.contains("page-master")||(n=z[R]);if((I=!h&&n)&&n)for(var L=0;L<z.length;L+=1)z[L].classList.contains("page-master-detail")&&(a=z[L]);A=I&&p.reloadDetail&&c.width>=e.params.masterDetailBreakpoint&&n}I&&(O=!a||A||p.reloadAll||p.reloadCurrent);var D="next";if(p.reloadCurrent||p.reloadAll||A?D="current":p.reloadPrevious&&(D="previous"),T.removeClass("page-previous page-current page-next").addClass("page-"+D+(h?" page-master":"")+(I?" page-master-detail":"")+(O?" page-master-detail-root":"")).removeClass("stacked").trigger("page:unstack").trigger("page:position",{position:D}),e.emit("pageUnstack",T[0]),e.emit("pagePosition",T[0],D),(h||I)&&(T.trigger("page:role",{role:h?"master":"detail",root:!!O}),e.emit("pageRole",T[0],{role:h?"master":"detail",detailRoot:!!O})),E&&x.length&&(x.removeClass("navbar-previous navbar-current navbar-next").addClass("navbar-"+D+(h?" navbar-master":"")+(I?" navbar-master-detail":"")+(O?" navbar-master-detail-root":"")).removeClass("stacked"),x.trigger("navbar:position",{position:D}),e.emit("navbarPosition",x[0],D),(h||I)&&e.emit("navbarRole",x[0],{role:h?"master":"detail",detailRoot:!!O})),p.reloadCurrent||A)A?(b=z.filter((function(e){return!e.classList.contains("page-master")})),E&&(w=Ot(b.map((function(e){return c.navbar.getElByPage(e)})))),b.length>1&&n&&(f=b.length-1,Ot(n).removeClass("page-master-stacked").trigger("page:masterunstack"),e.emit("pageMasterUnstack",n),E&&(Ot(c.navbar.getElByPage(n)).removeClass("navbar-master-stacked"),e.emit("navbarMasterUnstack",c.navbar.getElByPage(n))))):(b=z.eq(z.length-1),E&&(w=Ot(c.navbar.getElByPage(b))));else if(p.reloadPrevious)b=z.eq(z.length-2),E&&(w=Ot(c.navbar.getElByPage(b)));else if(p.reloadAll)b=z.filter((function(e){return e!==T[0]})),E&&(w=P.filter((function(e){return e!==x[0]})));else{var B=[],$=[];if(z.length>1){var F=0;for(F=0;F<z.length-1;F+=1)if(n&&z[F]===n)z.eq(F).addClass("page-master-stacked"),z.eq(F).trigger("page:masterstack"),e.emit("pageMasterStack",z[F]),E&&(Ot(c.navbar.getElByPage(n)).addClass("navbar-master-stacked"),e.emit("navbarMasterStack",c.navbar.getElByPage(n)));else{var N=c.navbar.getElByPage(z.eq(F));e.params.stackPages?(z.eq(F).addClass("stacked"),z.eq(F).trigger("page:stack"),e.emit("pageStack",z[F]),E&&Ot(N).addClass("stacked")):(B.push(z[F]),e.pageCallback("beforeRemove",z[F],P&&P[F],"previous",void 0,p),e.removePage(z[F]),E&&N&&($.push(N),e.removeNavbar(N)))}}b=k.children(".page:not(.stacked)").filter((function(e){return e!==T[0]&&B.indexOf(e)<0})),E&&(w=_.children(".navbar:not(.stacked)").filter((function(e){return e!==x[0]&&$.indexOf($)<0}))),B=[],$=[]}if(I&&!p.reloadAll&&((b.length>1||A)&&(b=b.filter((function(e){return!e.classList.contains("page-master")}))),w&&(w.length>1||A)&&(w=w.filter((function(e){return!e.classList.contains("navbar-master")})))),e.params.browserHistory&&(p.browserHistory||p.replaceState)&&!p.reloadPrevious){var V=e.params.browserHistoryRoot||"";gr[p.reloadCurrent||A&&a||p.reloadAll||p.replaceState?"replace":"push"](u.id,{url:p.route.url},V+e.params.browserHistorySeparator+p.route.url)}p.reloadPrevious||(e.currentPageEl=T[0],E&&x.length?e.currentNavbarEl=x[0]:delete e.currentNavbarEl,e.currentRoute=p.route);var j=p.route.url;p.history&&(((p.reloadCurrent||A&&a)&&e.history.length)>0||p.replaceState?(A&&f>0&&(e.history=e.history.slice(0,e.history.length-f)),e.history[e.history.length-(p.reloadPrevious?2:1)]=j):p.reloadPrevious?e.history[e.history.length-2]=j:p.reloadAll?e.history=[j]:e.history.push(j)),e.saveHistory();var U=T.parents(s).length>0,q=T[0].f7Component;if(p.reloadPrevious?(q&&!U?q.mount((function(e){Ot(e).insertBefore(b)})):T.insertBefore(b),E&&x.length&&(x.find(".title-large").length&&x.addClass("navbar-large"),w.length?x.insertBefore(w):(e.$navbarsEl.parents(s).length||e.$el.prepend(e.$navbarsEl),_.append(x)))):(b.next(".page")[0]!==T[0]&&(q&&!U?q.mount((function(e){k.append(e)})):k.append(T[0])),E&&x.length&&(x.find(".title-large").length&&x.addClass("navbar-large"),e.$navbarsEl.parents(s).length||e.$el.prepend(e.$navbarsEl),_.append(x[0]))),U?p.route&&p.route.route&&p.route.route.keepAlive&&!T[0].f7PageMounted&&(T[0].f7PageMounted=!0,e.pageCallback("mounted",T,x,D,S?D:"current",p,b)):e.pageCallback("mounted",T,x,D,S?D:"current",p,b),(p.reloadCurrent||A)&&b.length>0?e.params.stackPages&&e.initialPages.indexOf(b[0])>=0?(b.addClass("stacked"),b.trigger("page:stack"),e.emit("pageStack",b[0]),E&&w.addClass("stacked")):(e.pageCallback("beforeOut",b,w,"current",void 0,p),e.pageCallback("afterOut",b,w,"current",void 0,p),e.pageCallback("beforeRemove",b,w,"current",void 0,p),e.removePage(b),E&&w&&w.length&&e.removeNavbar(w)):p.reloadAll?b.each((function(t,r){var n=Ot(t),a=Ot(c.navbar.getElByPage(n));e.params.stackPages&&e.initialPages.indexOf(n[0])>=0?(n.addClass("stacked"),n.trigger("page:stack"),e.emit("pageStack",n[0]),E&&a.addClass("stacked")):(n.hasClass("page-current")&&(e.pageCallback("beforeOut",b,w,"current",void 0,p),e.pageCallback("afterOut",b,w,"current",void 0,p)),e.pageCallback("beforeRemove",n,w&&w.eq(r),"previous",void 0,p),e.removePage(n),E&&a.length&&e.removeNavbar(a))})):p.reloadPrevious&&(e.params.stackPages&&e.initialPages.indexOf(b[0])>=0?(b.addClass("stacked"),b.trigger("page:stack"),e.emit("pageStack",b[0]),E&&w.addClass("stacked")):(e.pageCallback("beforeRemove",b,w,"previous",void 0,p),e.removePage(b),E&&w&&w.length&&e.removeNavbar(w))),p.route.route.tab&&e.tabLoad(p.route.route.tab,M({},p,{history:!1,browserHistory:!1})),d&&u.checkMasterDetailBreakpoint(),e.pageCallback("init",T,x,D,S?D:"current",p,b),p.reloadCurrent||p.reloadAll||A)return e.allowPageChange=!0,e.pageCallback("beforeIn",T,x,D,"current",p),T.removeAttr("aria-hidden"),E&&x&&x.removeAttr("aria-hidden"),e.pageCallback("afterIn",T,x,D,"current",p),p.reloadCurrent&&p.clearPreviousHistory&&e.clearPreviousHistory(),A&&(e.setPagePosition(Ot(n),"previous"),n.f7Page&&n.f7Page.navbarEl&&e.setNavbarPosition(Ot(n.f7Page.navbarEl),"previous")),e;if(p.reloadPrevious)return e.allowPageChange=!0,e;function H(){e.setPagePosition(T,"current",!1),e.setPagePosition(b,"previous",!b.hasClass("page-master")),E&&(e.setNavbarPosition(x,"current",!1),e.setNavbarPosition(w,"previous",!w.hasClass("navbar-master"))),e.allowPageChange=!0,e.pageCallback("afterOut",b,w,"current","previous",p),e.pageCallback("afterIn",T,x,"next","current",p);var t=(e.params.preloadPreviousPage||e.params[c.theme+"SwipeBack"])&&!h;t||(T.hasClass("smart-select-page")||T.hasClass("photo-browser-page")||T.hasClass("autocomplete-page")||T.hasClass("color-picker-page"))&&(t=!0),t||(e.params.stackPages?(b.addClass("stacked"),b.trigger("page:stack"),e.emit("pageStack",b[0]),E&&w.addClass("stacked")):T.attr("data-name")&&"smart-select-page"===T.attr("data-name")||(e.pageCallback("beforeRemove",b,w,"previous",void 0,p),e.removePage(b),E&&w.length&&e.removeNavbar(w))),p.clearPreviousHistory&&e.clearPreviousHistory(),e.emit("routeChanged",e.currentRoute,e.previousRoute,e),e.params.browserHistory&&gr.clearRouterQueue()}function G(){e.setPagePosition(b,"current",!1),e.setPagePosition(T,"next",!1),E&&(e.setNavbarPosition(w,"current",!1),e.setNavbarPosition(x,"next",!1))}if(e.pageCallback("beforeOut",b,w,"current","previous",p),e.pageCallback("beforeIn",T,x,"next","current",p),!p.animate||h&&c.width>=e.params.masterDetailBreakpoint)H();else{var W=e.params[e.app.theme+"PageLoadDelay"],X=e.params.transition;p.transition&&(X=p.transition),!X&&e.currentRoute&&e.currentRoute.route&&(X=e.currentRoute.route.transition),!X&&e.currentRoute&&e.currentRoute.route.options&&(X=e.currentRoute.route.options.transition),X&&(T[0].f7PageTransition=X),W?setTimeout((function(){G(),e.animate(b,T,w,x,"forward",X,(function(){H()}))}),W):(G(),e.animate(b,T,w,x,"forward",X,(function(){H()})))}return e}function kr(e,t,r,n){if(void 0===t&&(t={}),void 0===r&&(r={}),!e.allowPageChange&&!n)return e;var a=t,i=r,o=a.url,s=a.content,l=a.el,c=a.pageName,u=a.component,p=a.componentUrl;if(!i.reloadCurrent&&i.route&&i.route.route&&i.route.route.parentPath&&e.currentRoute.route&&e.currentRoute.route.parentPath===i.route.route.parentPath){if(i.route.url===e.url)return e.allowPageChange=!0,!1;var d=Object.keys(i.route.params).length===Object.keys(e.currentRoute.params).length;if(d&&Object.keys(i.route.params).forEach((function(t){t in e.currentRoute.params&&e.currentRoute.params[t]===i.route.params[t]||(d=!1)})),d)return!!i.route.route.tab&&e.tabLoad(i.route.route.tab,i);if(!d&&i.route.route.tab&&e.currentRoute.route.tab&&e.currentRoute.parentPath===i.route.parentPath)return e.tabLoad(i.route.route.tab,i)}if(i.route&&i.route.url&&e.url===i.route.url&&!i.reloadCurrent&&!i.reloadPrevious&&!e.params.allowDuplicateUrls)return e.allowPageChange=!0,!1;if(!i.route&&o&&(i.route=e.parseRouteUrl(o),M(i.route,{route:{url:o,path:o}})),(o||p||u)&&(e.allowPageChange=!1),s)Cr(e,e.getPageEl(s),i);else if(l)Cr(e,e.getPageEl(l),i);else if(c)Cr(e,e.$el.children('.page[data-name="'+c+'"]').eq(0),i);else if(u||p)try{e.pageComponentLoader({routerEl:e.el,component:u,componentUrl:p,options:i,resolve:function(t,r){return Cr(e,t,M(i,r))},reject:function(){return e.allowPageChange=!0,e}})}catch(t){throw e.allowPageChange=!0,t}else o&&(e.xhrAbortController&&(e.xhrAbortController.abort(),e.xhrAbortController=!1),e.xhrRequest(o,i).then((function(t){Cr(e,e.getPageEl(t),i)})).catch((function(){e.allowPageChange=!0})));return e}function Tr(e,t,r){var n,a,i,s,l,c,u,p,d=N(),h=o(),f=Ot(t),m=e.app,g=e.view,v=M({animate:e.params.animate,browserHistory:!0,replaceState:!1},r),y=e.params.masterDetailBreakpoint>0,b=y&&v.route&&v.route.route&&(!0===v.route.route.master||"function"==typeof v.route.route.master&&v.route.route.master(m,e)),_=e.dynamicNavbar,x=f,w=e.$el.children(".page-current"),E=0===w.length&&v.preload,C=y&&w.hasClass("page-master");if(x.length&&e.removeThemeElements(x),_&&(s=x.children(".navbar"),i=e.$navbarsEl,0===s.length&&x[0]&&x[0].f7Page&&(s=x[0].f7Page.$navbarEl),l=i.find(".navbar-current")),e.allowPageChange=!1,0===x.length||0===w.length&&!v.preload)return e.allowPageChange=!0,e;if(e.removeThemeElements(x),v.route&&v.route.route&&v.route.route.keepAlive&&!v.route.route.keepAliveData&&(v.route.route.keepAliveData={pageEl:f[0]}),y){for(var k=e.$el.children(".page:not(.stacked)").filter((function(e){return e!==x[0]})),T=0;T<k.length;T+=1)n||!k[T].classList.contains("page-master")||(n=k[T]);!(c=!b&&n&&e.history.indexOf(v.route.url)>e.history.indexOf(n.f7Page.route.url))&&!b&&n&&n.f7Page&&v.route.route.masterRoute&&(c=v.route.route.masterRoute.path===n.f7Page.route.route.path)}if(c&&n&&n.f7Page&&(u=e.history.indexOf(v.route.url)-e.history.indexOf(n.f7Page.route.url)==1),x.addClass("page-"+(E?"current":"previous")+(b?" page-master":"")+(c?" page-master-detail":"")+(u?" page-master-detail-root":"")).removeClass("stacked").removeAttr("aria-hidden").trigger("page:unstack").trigger("page:position",{position:E?"current":"previous"}),e.emit("pageUnstack",x[0]),e.emit("pagePosition",x[0],E?"current":"previous"),(b||c)&&(x.trigger("page:role",{role:b?"master":"detail",root:!!u}),e.emit("pageRole",x[0],{role:b?"master":"detail",detailRoot:!!u})),_&&s.length>0&&(s.addClass("navbar-"+(E?"current":"previous")+(b?" navbar-master":"")+(c?" navbar-master-detail":"")+(u?" navbar-master-detail-root":"")).removeClass("stacked").removeAttr("aria-hidden"),s.trigger("navbar:position",{position:E?"current":"previous"}),e.emit("navbarPosition",s[0],E?"current":"previous"),(b||u)&&e.emit("navbarRole",s[0],{role:b?"master":"detail",detailRoot:!!u})),v.force&&(w.prev(".page-previous:not(.stacked)").length>0||0===w.prev(".page-previous").length))if(e.history.indexOf(v.route.url)>=0?(p=e.history.length-e.history.indexOf(v.route.url)-1,e.history=e.history.slice(0,e.history.indexOf(v.route.url)+2),g.history=e.history):e.history[[e.history.length-2]]?e.history[e.history.length-2]=v.route.url:e.history.unshift(e.url),p&&e.params.stackPages)w.prevAll(".page-previous").each((function(t){var r,i=Ot(t);_&&(r=Ot(m.navbar.getElByPage(i))),i[0]!==x[0]&&i.index()>x.index()&&(e.initialPages.indexOf(i[0])>=0?(i.addClass("stacked"),i.trigger("page:stack"),e.emit("pageStack",i[0]),_&&r.addClass("stacked")):(e.pageCallback("beforeRemove",i,r,"previous",void 0,v),i[0]===n&&(a=!0),e.removePage(i),_&&r.length>0&&e.removeNavbar(r)))}));else{var S,P=w.prev(".page-previous:not(.stacked)");_&&(S=Ot(m.navbar.getElByPage(P))),e.params.stackPages&&e.initialPages.indexOf(P[0])>=0?(P.addClass("stacked"),P.trigger("page:stack"),e.emit("pageStack",P[0]),S.addClass("stacked")):P.length>0&&(e.pageCallback("beforeRemove",P,S,"previous",void 0,v),P[0]===n&&(a=!0),e.removePage(P),_&&S.length&&e.removeNavbar(S))}var I=x.parents(h).length>0,A=x[0].f7Component;function O(){E&&(!I&&A?A.mount((function(t){e.$el.append(t)})):e.$el.append(x)),0===x.next(w).length&&(!I&&A?A.mount((function(e){Ot(e).insertBefore(w)})):x.insertBefore(w)),_&&s.length&&(s.find(".title-large").length&&s.addClass("navbar-large"),s.insertBefore(l),l.length>0?s.insertBefore(l):(e.$navbarsEl.parents(h).length||e.$el.prepend(e.$navbarsEl),i.append(s))),I?v.route&&v.route.route&&v.route.route.keepAlive&&!x[0].f7PageMounted&&(x[0].f7PageMounted=!0,e.pageCallback("mounted",x,s,"previous","current",v,w)):e.pageCallback("mounted",x,s,"previous","current",v,w)}if(v.preload){O(),v.route.route.tab&&e.tabLoad(v.route.route.tab,M({},v,{history:!1,browserHistory:!1,preload:!0})),b&&(x.removeClass("page-master-stacked").trigger("page:masterunstack"),e.emit("pageMasterUnstack",x[0]),_&&(Ot(m.navbar.getElByPage(x)).removeClass("navbar-master-stacked"),e.emit("navbarMasterUnstack",m.navbar.getElByPage(x)))),e.pageCallback("init",x,s,"previous","current",v,w),E&&(e.pageCallback("beforeIn",x,s,"current",void 0,v),e.pageCallback("afterIn",x,s,"current",void 0,v));var z=x.prevAll(".page-previous:not(.stacked):not(.page-master)");return z.length>0&&z.each((function(t){var r,n=Ot(t);_&&(r=Ot(m.navbar.getElByPage(n))),e.params.stackPages&&e.initialPages.indexOf(t)>=0?(n.addClass("stacked"),n.trigger("page:stack"),e.emit("pageStack",n[0]),_&&r.addClass("stacked")):(e.pageCallback("beforeRemove",n,r,"previous",void 0),e.removePage(n),_&&r.length&&e.removeNavbar(r))})),e.allowPageChange=!0,e}if(!(d.ie||d.edge||d.firefox&&!d.ios)&&e.params.browserHistory&&v.browserHistory)if(v.replaceState){var R=e.params.browserHistoryRoot||"";gr.replace(g.id,{url:v.route.url},R+e.params.browserHistorySeparator+v.route.url)}else p?gr.go(-p):gr.back();if(v.replaceState?e.history[e.history.length-1]=v.route.url:(1===e.history.length&&e.history.unshift(e.url),e.history.pop()),e.saveHistory(),e.currentPageEl=x[0],_&&s.length?e.currentNavbarEl=s[0]:delete e.currentNavbarEl,e.currentRoute=v.route,(d.ie||d.edge||d.firefox&&!d.ios)&&e.params.browserHistory&&v.browserHistory)if(v.replaceState){var L=e.params.browserHistoryRoot||"";gr.replace(g.id,{url:v.route.url},L+e.params.browserHistorySeparator+v.route.url)}else p?gr.go(-p):gr.back();function D(){e.setPagePosition(x,"current",!1),e.setPagePosition(w,"next",!0),_&&(e.setNavbarPosition(s,"current",!1),e.setNavbarPosition(l,"next",!0)),e.pageCallback("afterOut",w,l,"current","next",v),e.pageCallback("afterIn",x,s,"previous","current",v),e.params.stackPages&&e.initialPages.indexOf(w[0])>=0?(w.addClass("stacked"),w.trigger("page:stack"),e.emit("pageStack",w[0]),_&&l.addClass("stacked")):(e.pageCallback("beforeRemove",w,l,"next",void 0,v),e.removePage(w),_&&l.length&&e.removeNavbar(l)),e.allowPageChange=!0,e.emit("routeChanged",e.currentRoute,e.previousRoute,e),(e.params.preloadPreviousPage||e.params[m.theme+"SwipeBack"])&&e.history[e.history.length-2]&&!b&&e.back(e.history[e.history.length-2],{preload:!0}),e.params.browserHistory&&gr.clearRouterQueue()}if(O(),v.route.route.tab&&e.tabLoad(v.route.route.tab,M({},v,{history:!1,browserHistory:!1})),y&&(C||a)&&g.checkMasterDetailBreakpoint(!1),e.pageCallback("init",x,s,"previous","current",v,w),e.pageCallback("beforeOut",w,l,"current","next",v),e.pageCallback("beforeIn",x,s,"previous","current",v),!v.animate||C&&m.width>=e.params.masterDetailBreakpoint)D();else{var B=e.params.transition;w[0]&&w[0].f7PageTransition&&(B=w[0].f7PageTransition,delete w[0].f7PageTransition),v.transition&&(B=v.transition),!B&&e.previousRoute&&e.previousRoute.route&&(B=e.previousRoute.route.transition),!B&&e.previousRoute&&e.previousRoute.route&&e.previousRoute.route.options&&(B=e.previousRoute.route.options.transition),e.setPagePosition(w,"current"),e.setPagePosition(x,"previous",!1),_&&(e.setNavbarPosition(l,"current"),e.setNavbarPosition(s,"previous",!1)),e.animate(w,x,l,s,"backward",B,(function(){D()}))}return e}function Sr(e,t,r,n){if(!e.allowPageChange&&!n)return e;var a=t,i=r,o=a.url,s=a.content,l=a.el,c=a.pageName,u=a.component,p=a.componentUrl;if(i.route.url&&e.url===i.route.url&&!i.reloadCurrent&&!i.reloadPrevious&&!e.params.allowDuplicateUrls)return!1;if(!i.route&&o&&(i.route=e.parseRouteUrl(o)),(o||p||u)&&(e.allowPageChange=!1),s)Tr(e,e.getPageEl(s),i);else if(l)Tr(e,e.getPageEl(l),i);else if(c)Tr(e,e.$el.children('.page[data-name="'+c+'"]').eq(0),i);else if(u||p)try{e.pageComponentLoader({routerEl:e.el,component:u,componentUrl:p,options:i,resolve:function(t,r){return Tr(e,t,M(i,r))},reject:function(){return e.allowPageChange=!0,e}})}catch(t){throw e.allowPageChange=!0,t}else o&&(e.xhrAbortController&&(e.xhrAbortController.abort(),e.xhrAbortController=!1),e.xhrRequest(o,i).then((function(t){Tr(e,e.getPageEl(t),i)})).catch((function(){e.allowPageChange=!0})));return e}function Pr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mr(e,t){return(Mr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ir=function(e){var t,r;function n(t,r){var n,a=Pr(n=e.call(this,{},[void 0===r?t:r])||this);a.isAppRouter=void 0===r,a.isAppRouter?M(!1,a,{app:t,params:t.params.view,routes:t.routes||[],cache:t.cache}):M(!1,a,{app:t,view:r,viewId:r.id,id:r.params.routerId,params:r.params,routes:r.routes,history:r.history,scrollHistory:r.scrollHistory,cache:t.cache,dynamicNavbar:"ios"===t.theme&&r.params.iosDynamicNavbar,initialPages:[],initialNavbars:[]}),a.useModules(),a.allowPageChange=!0;var i={},o={};return Object.defineProperty(a,"currentRoute",{enumerable:!0,configurable:!0,set:function(e){void 0===e&&(e={}),o=M({},i),(i=e)&&(a.url=i.url,a.emit("routeChange",e,o,a))},get:function(){return i}}),Object.defineProperty(a,"previousRoute",{enumerable:!0,configurable:!0,get:function(){return o},set:function(e){o=e}}),a||Pr(n)}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,Mr(t,r);var a=n.prototype;return a.mount=function(){var e=this,t=e.view;M(!1,e,{tempDom:o().createElement("div"),$el:t.$el,el:t.el,$navbarsEl:t.$navbarsEl,navbarsEl:t.navbarsEl}),e.emit("local::mount routerMount",e)},a.animatableNavElements=function(e,t,r,n,a){var i,o,s=this,l=s.dynamicNavbar,c=s.params.iosAnimateNavbarBackIcon;function u(e,t){var r,n=e.hasClass("sliding")||t.hasClass("sliding"),a=e.hasClass("subnavbar"),i=!n||!a,o=e.find(".back .icon");return n&&c&&e.hasClass("left")&&o.length>0&&o.next("span").length&&(e=o.next("span"),r=!0),{$el:e,isIconLabel:r,leftOffset:e[0].f7NavbarLeftOffset,rightOffset:e[0].f7NavbarRightOffset,isSliding:n,isSubnavbar:a,needsOpacityTransition:i}}return l&&(i=[],o=[],e.children(".navbar-inner").children(".left, .right, .title, .subnavbar").each((function(t){var o=Ot(t);o.hasClass("left")&&n&&"forward"===a||o.hasClass("title")&&r||i.push(u(o,e.children(".navbar-inner")))})),t.hasClass("navbar-master")&&s.params.masterDetailBreakpoint>0&&s.app.width>=s.params.masterDetailBreakpoint||t.children(".navbar-inner").children(".left, .right, .title, .subnavbar").each((function(e){var i=Ot(e);i.hasClass("left")&&r&&!n&&"forward"===a||i.hasClass("left")&&r&&"backward"===a||i.hasClass("title")&&n||o.push(u(i,t.children(".navbar-inner")))})),[o,i].forEach((function(e){e.forEach((function(t){var r=t,n=t.isSliding,a=t.$el,s=e===o?i:o;n&&a.hasClass("title")&&s&&s.forEach((function(e){if(e.isIconLabel){var t=e.$el[0];r.leftOffset+=t&&t.offsetLeft||0}}))}))}))),{newNavEls:i,oldNavEls:o}},a.animate=function(e,t,r,n,a,i,o){var s=this;if(s.params.animateCustom)s.params.animateCustom.apply(s,[e,t,r,n,a,o]);else{var l=s.dynamicNavbar,c="ios"===s.app.theme;if(i){var u="router-transition-custom router-transition-"+i+"-"+a;return("forward"===a?t:e).animationEnd((function(){s.$el.removeClass(u),l&&s.$navbarsEl.length&&(n&&s.$navbarsEl.prepend(n),r&&s.$navbarsEl.prepend(r)),o&&o()})),l&&(n&&t&&(s.setNavbarPosition(n,""),n.removeClass("navbar-next navbar-previous navbar-current"),t.prepend(n)),r&&e&&(s.setNavbarPosition(r,""),r.removeClass("navbar-next navbar-previous navbar-current"),e.prepend(r))),void s.$el.addClass(u)}var p,d,h,f,m,g,v,y="router-transition-"+a+" router-transition";if(c&&l){s.params.masterDetailBreakpoint>0&&s.app.width>=s.params.masterDetailBreakpoint&&(r.hasClass("navbar-master")&&n.hasClass("navbar-master-detail")||r.hasClass("navbar-master-detail")&&n.hasClass("navbar-master"))||(g=r&&r.hasClass("navbar-large"),v=n&&n.hasClass("navbar-large"),h=g&&!r.hasClass("navbar-large-collapsed"),f=v&&!n.hasClass("navbar-large-collapsed"),m=h&&!f||f&&!h);var b=s.animatableNavElements(n,r,f,h,a);p=b.newNavEls,d=b.oldNavEls}("forward"===a?t:e).animationEnd((function(){s.dynamicNavbar&&(n&&(n.removeClass("router-navbar-transition-to-large router-navbar-transition-from-large"),n.addClass("navbar-no-title-large-transition"),w((function(){n.removeClass("navbar-no-title-large-transition")}))),r&&r.removeClass("router-navbar-transition-to-large router-navbar-transition-from-large"),n.hasClass("sliding")||n.children(".navbar-inner.sliding").length?n.find(".title, .left, .right, .left .icon, .subnavbar").transform(""):n.find(".sliding").transform(""),r.hasClass("sliding")||r.children(".navbar-inner.sliding").length?r.find(".title, .left, .right, .left .icon, .subnavbar").transform(""):r.find(".sliding").transform("")),s.$el.removeClass(y),o&&o()})),l?(_(0),w((function(){s.$el.addClass(y),m&&(s.el._clientLeft=s.el.clientLeft),_(1)}))):s.$el.addClass(y)}function _(e){c&&l&&(1===e&&(f&&(n.addClass("router-navbar-transition-to-large"),r.addClass("router-navbar-transition-to-large")),h&&(n.addClass("router-navbar-transition-from-large"),r.addClass("router-navbar-transition-from-large"))),p.forEach((function(t){var r=t.$el,n="forward"===a?t.rightOffset:t.leftOffset;t.isSliding&&(t.isSubnavbar&&v?r[0].style.setProperty("transform","translate3d("+n*(1-e)+"px, calc(-1 * var(--f7-navbar-large-collapse-progress) * var(--f7-navbar-large-title-height)), 0)","important"):r.transform("translate3d("+n*(1-e)+"px,0,0)"))})),d.forEach((function(t){var r=t.$el,n="forward"===a?t.leftOffset:t.rightOffset;t.isSliding&&(t.isSubnavbar&&g?r.transform("translate3d("+n*e+"px, calc(-1 * var(--f7-navbar-large-collapse-progress) * var(--f7-navbar-large-title-height)), 0)"):r.transform("translate3d("+n*e+"px,0,0)"))})))}},a.removeModal=function(e){this.removeEl(e)},a.removeTabContent=function(e){Ot(e).html("")},a.removeNavbar=function(e){this.removeEl(e)},a.removePage=function(e){var t=Ot(e),r=t&&t[0]&&t[0].f7Page;r&&r.route&&r.route.route&&r.route.route.keepAlive?t.remove():this.removeEl(e)},a.removeEl=function(e){if(e){var t=this,r=Ot(e);0!==r.length&&(r.find(".tab").each((function(e){Ot(e).children().each((function(e){e.f7Component&&(Ot(e).trigger("tab:beforeremove"),e.f7Component.destroy())}))})),r[0].f7Component&&r[0].f7Component.destroy&&r[0].f7Component.destroy(),t.params.removeElements&&(t.params.removeElementsWithTimeout?setTimeout((function(){r.remove()}),t.params.removeElementsTimeout):r.remove()))}},a.getPageEl=function(e){var t=this;if("string"==typeof e)t.tempDom.innerHTML=e;else{if(Ot(e).hasClass("page"))return e;t.tempDom.innerHTML="",Ot(t.tempDom).append(e)}return t.findElement(".page",t.tempDom)},a.findElement=function(e,t,r){var n=this,a=n.view,i=n.app,o=Ot(t),s=e;r&&(s+=":not(.stacked)");var l=o.find(s).filter((function(e){return 0===Ot(e).parents(".popup, .dialog, .popover, .actions-modal, .sheet-modal, .login-screen, .page").length}));return l.length>1&&("string"==typeof a.selector&&(l=o.find(a.selector+" "+s)),l.length>1&&(l=o.find("."+i.params.viewMainClass+" "+s))),1===l.length?l:(r||(l=n.findElement(s,o,!0)),l&&1===l.length?l:l&&l.length>1?Ot(l[0]):void 0)},a.flattenRoutes=function(e){void 0===e&&(e=this.routes);var t=this,r=[];return e.forEach((function(e){var n=!1;if("tabs"in e&&e.tabs){var a=e.tabs.map((function(t){var r=M({},e,{path:(e.path+"/"+t.path).replace("///","/").replace("//","/"),parentPath:e.path,tab:t});return delete r.tabs,delete r.routes,r}));n=!0,r=r.concat(t.flattenRoutes(a))}if("detailRoutes"in e){var i=e.detailRoutes.map((function(t){var r=M({},t);return r.masterRoute=e,r.masterRoutePath=e.path,r}));r=r.concat(e,t.flattenRoutes(i))}if("routes"in e){var o=e.routes.map((function(t){var r=M({},t);return r.path=(e.path+"/"+r.path).replace("///","/").replace("//","/"),r}));r=n?r.concat(t.flattenRoutes(o)):r.concat(e,t.flattenRoutes(o))}"routes"in e||"tabs"in e&&e.tabs||"detailRoutes"in e||r.push(e)})),r},a.parseRouteUrl=function(e){if(!e)return{};var t=C(e),r=e.split("#")[1],n=e.split("#")[0].split("?")[0];return{query:t,hash:r,params:{},url:e,path:n}},a.generateUrl=function(e){if(void 0===e&&(e={}),"string"==typeof e)return e;var t=e,r=t.name,n=t.path,a=t.params,i=t.query;if(!r&&!n)throw new Error('Framework7: "name" or "path" parameter is required');var o=this,s=r?o.findRouteByKey("name",r):o.findRouteByKey("path",n);if(!s)throw r?new Error('Framework7: route with name "'+r+'" not found'):new Error('Framework7: route with path "'+n+'" not found');var l=o.constructRouteUrl(s,{params:a,query:i});if(!l)throw new Error("Framework7: can't construct URL for route with name \""+r+'"');return l},a.constructRouteUrl=function(e,t){var r,n=void 0===t?{}:t,a=n.params,i=n.query,o=e.path,s=ur(o);try{r=s(a||{})}catch(e){throw new Error("Framework7: error constructing route URL from passed params:\nRoute: "+o+"\n"+e.toString())}return i&&("string"==typeof i?r+="?"+i:Object.keys(i).length&&(r+="?"+T(i))),r},a.findTabRouteUrl=function(e){var t,r=this,n=Ot(e),a=r.currentRoute.route.parentPath,i=n.attr("id");return r.flattenRoutes(r.routes).forEach((function(e){e.parentPath===a&&e.tab&&e.tab.id===i&&(t=r.currentRoute.params&&Object.keys(r.currentRoute.params).length>0?r.constructRouteUrl(e,{params:r.currentRoute.params,query:r.currentRoute.query}):e.path)})),t},a.findRouteByKey=function(e,t){var r,n=this.routes;return this.flattenRoutes(n).forEach((function(n){r||n[e]===t&&(r=n)})),r},a.findMatchingRoute=function(e){if(e){var t,r=this,n=r.routes,a=r.flattenRoutes(n),i=r.parseRouteUrl(e),o=i.path,s=i.query,l=i.hash,c=i.params;return a.forEach((function(r){if(!t){var n,a,i=[],u=[r.path];if(r.alias&&("string"==typeof r.alias?u.push(r.alias):Array.isArray(r.alias)&&r.alias.forEach((function(e){u.push(e)}))),u.forEach((function(e){n||(n=fr(e,i).exec(o))})),n)i.forEach((function(e,t){if("number"!=typeof e.name){var r=n[t+1];c[e.name]=null==r?r:decodeURIComponent(r)}})),r.parentPath&&(a=o.split("/").slice(0,r.parentPath.split("/").length-1).join("/")),t={query:s,hash:l,params:c,url:e,path:o,parentPath:a,route:r,name:r.name}}})),t}},a.replaceRequestUrlParams=function(e,t){void 0===e&&(e=""),void 0===t&&(t={});var r=e;return"string"==typeof r&&r.indexOf("{{")>=0&&t&&t.route&&t.route.params&&Object.keys(t.route.params).length&&Object.keys(t.route.params).forEach((function(e){var n=new RegExp("{{"+e+"}}","g");r=r.replace(n,t.route.params[e]||"")})),r},a.removeFromXhrCache=function(e){for(var t=this.cache.xhr,r=!1,n=0;n<t.length;n+=1)t[n].url===e&&(r=n);!1!==r&&t.splice(r,1)},a.xhrRequest=function(e,t){var r=this,n=r.params,a=t.ignoreCache,i=e,o=i.indexOf("?")>=0;return n.passRouteQueryToRequest&&t&&t.route&&t.route.query&&Object.keys(t.route.query).length&&(i+=(o?"&":"?")+T(t.route.query),o=!0),n.passRouteParamsToRequest&&t&&t.route&&t.route.params&&Object.keys(t.route.params).length&&(i+=(o?"&":"?")+T(t.route.params),o=!0),i.indexOf("{{")>=0&&(i=r.replaceRequestUrlParams(i,t)),n.xhrCacheIgnoreGetParameters&&i.indexOf("?")>=0&&(i=i.split("?")[0]),new Promise((function(e,o){if(n.xhrCache&&!a&&i.indexOf("nocache")<0&&n.xhrCacheIgnore.indexOf(i)<0)for(var s=0;s<r.cache.xhr.length;s+=1){var l=r.cache.xhr[s];if(l.url===i&&E()-l.time<n.xhrCacheDuration)return void e(l.content)}r.xhrAbortController=r.app.request.abortController(),r.app.request({abortController:r.xhrAbortController,url:i,method:"GET",beforeSend:function(e){r.emit("routerAjaxStart",e,t)},complete:function(a,s){r.emit("routerAjaxComplete",a),"error"!==s&&"timeout"!==s&&a.status>=200&&a.status<300||0===a.status?(n.xhrCache&&""!==a.responseText&&(r.removeFromXhrCache(i),r.cache.xhr.push({url:i,time:E(),content:a.responseText})),r.emit("routerAjaxSuccess",a,t),e(a.responseText)):(r.emit("routerAjaxError",a,t),o(a))},error:function(e){r.emit("routerAjaxError",e,t),o(e)}})}))},a.setNavbarPosition=function(e,t,r){e.removeClass("navbar-previous navbar-current navbar-next"),t&&e.addClass("navbar-"+t),!1===r?e.removeAttr("aria-hidden"):!0===r&&e.attr("aria-hidden","true"),e.trigger("navbar:position",{position:t}),this.emit("navbarPosition",e[0],t)},a.setPagePosition=function(e,t,r){e.removeClass("page-previous page-current page-next"),e.addClass("page-"+t),!1===r?e.removeAttr("aria-hidden"):!0===r&&e.attr("aria-hidden","true"),e.trigger("page:position",{position:t}),this.emit("pagePosition",e[0],t)},a.removeThemeElements=function(e){var t,r=this.app.theme;"ios"===r?t=".md-only, .aurora-only, .if-md, .if-aurora, .if-not-ios, .not-ios":"md"===r?t=".ios-only, .aurora-only, .if-ios, .if-aurora, .if-not-md, .not-md":"aurora"===r&&(t=".ios-only, .md-only, .if-ios, .if-md, .if-not-aurora, .not-aurora"),Ot(e).find(t).remove()},a.getPageData=function(e,t,r,n,a,i){void 0===a&&(a={});var o,s,l=this,c=Ot(e).eq(0),u=Ot(t).eq(0),p=c[0].f7Page||{};if(("next"===r&&"current"===n||"current"===r&&"previous"===n)&&(o="forward"),("current"===r&&"next"===n||"previous"===r&&"current"===n)&&(o="backward"),p&&!p.fromPage){var d=Ot(i);d.length&&(s=d[0].f7Page)}(s=p.pageFrom||s)&&s.pageFrom&&(s.pageFrom=null);var h={app:l.app,view:l.view,router:l,$el:c,el:c[0],$pageEl:c,pageEl:c[0],$navbarEl:u,navbarEl:u[0],name:c.attr("data-name"),position:r,from:r,to:n,direction:o,route:p.route?p.route:a,pageFrom:s};return c[0].f7Page=h,h},a.pageCallback=function(e,t,r,n,a,i,o){if(void 0===i&&(i={}),t){var s=this,l=Ot(t);if(l.length){var c=Ot(r),u=i.route,p=s.params.restoreScrollTopOnBack&&!(s.params.masterDetailBreakpoint>0&&l.hasClass("page-master")&&s.app.width>=s.params.masterDetailBreakpoint),d=l[0].f7Page&&l[0].f7Page.route&&l[0].f7Page.route.route&&l[0].f7Page.route.route.keepAlive;"beforeRemove"===e&&d&&(e="beforeUnmount");var h="page"+(e[0].toUpperCase()+e.slice(1,e.length)),f="page:"+e.toLowerCase(),m={};(m="beforeRemove"===e&&l[0].f7Page?M(l[0].f7Page,{from:n,to:a,position:n}):s.getPageData(l[0],c[0],n,a,u,o)).swipeBack=!!i.swipeBack;var g=i.route?i.route.route:{},y=g.on,b=void 0===y?{}:y,_=g.once,x=void 0===_?{}:_;if(i.on&&M(b,i.on),i.once&&M(x,i.once),"mounted"===e&&C(),"init"===e){if(p&&("previous"===n||!n)&&"current"===a&&s.scrollHistory[m.route.url]&&!l.hasClass("no-restore-scroll")){var w=l.find(".page-content");w.length>0&&(w=w.filter((function(e){return 0===Ot(e).parents(".tab:not(.tab-active)").length&&!Ot(e).is(".tab:not(.tab-active)")}))),w.scrollTop(s.scrollHistory[m.route.url])}if(C(),l[0].f7PageInitialized)return l.trigger("page:reinit",m),void s.emit("pageReinit",m);l[0].f7PageInitialized=!0}if(p&&"beforeOut"===e&&"current"===n&&"previous"===a){var E=l.find(".page-content");E.length>0&&(E=E.filter((function(e){return 0===Ot(e).parents(".tab:not(.tab-active)").length&&!Ot(e).is(".tab:not(.tab-active)")}))),s.scrollHistory[m.route.url]=E.scrollTop()}p&&"beforeOut"===e&&"current"===n&&"next"===a&&delete s.scrollHistory[m.route.url],l.trigger(f,m),s.emit(h,m),"beforeRemove"!==e&&"beforeUnmount"!==e||(l[0].f7RouteEventsAttached&&(l[0].f7RouteEventsOn&&Object.keys(l[0].f7RouteEventsOn).forEach((function(e){l.off(v(e),l[0].f7RouteEventsOn[e])})),l[0].f7RouteEventsOnce&&Object.keys(l[0].f7RouteEventsOnce).forEach((function(e){l.off(v(e),l[0].f7RouteEventsOnce[e])})),l[0].f7RouteEventsAttached=null,l[0].f7RouteEventsOn=null,l[0].f7RouteEventsOnce=null,delete l[0].f7RouteEventsAttached,delete l[0].f7RouteEventsOn,delete l[0].f7RouteEventsOnce),d||(l[0].f7Page&&l[0].f7Page.navbarEl&&delete l[0].f7Page.navbarEl.f7Page,l[0].f7Page=null))}}function C(){l[0].f7RouteEventsAttached||(l[0].f7RouteEventsAttached=!0,b&&Object.keys(b).length>0&&(l[0].f7RouteEventsOn=b,Object.keys(b).forEach((function(e){b[e]=b[e].bind(s),l.on(v(e),b[e])}))),x&&Object.keys(x).length>0&&(l[0].f7RouteEventsOnce=x,Object.keys(x).forEach((function(e){x[e]=x[e].bind(s),l.once(v(e),x[e])}))))}},a.saveHistory=function(){var e=this,t=l();e.view.history=e.history,e.params.browserHistory&&e.params.browserHistoryStoreHistory&&t.localStorage&&(t.localStorage["f7router-"+e.view.id+"-history"]=JSON.stringify(e.history))},a.restoreHistory=function(){var e=this,t=l();e.params.browserHistory&&e.params.browserHistoryStoreHistory&&t.localStorage&&t.localStorage["f7router-"+e.view.id+"-history"]&&(e.history=JSON.parse(t.localStorage["f7router-"+e.view.id+"-history"]),e.view.history=e.history)},a.clearHistory=function(){var e=this;e.history=[],e.view&&(e.view.history=[]),e.saveHistory()},a.updateCurrentUrl=function(e){var t=this;xr(t,"updateCurrentUrl"),t.history.length?t.history[t.history.length-1]=e:t.history.push(e);var r=t.parseRouteUrl(e),n=r.query,a=r.hash,i=r.params,o=r.url,s=r.path;if(t.currentRoute&&M(t.currentRoute,{query:n,hash:a,params:i,url:o,path:s}),t.params.browserHistory){var l=t.params.browserHistoryRoot||"";gr.replace(t.view.id,{url:e},l+t.params.browserHistorySeparator+e)}t.saveHistory(),t.emit("routeUrlUpdate",t.currentRoute,t)},a.getInitialUrl=function(){var e=this;if(e.initialUrl)return{initialUrl:e.initialUrl,historyRestored:e.historyRestored};var t,r=e.app,n=e.view,a=o(),i=l(),s=r.params.url&&"string"==typeof r.params.url&&"undefined"!=typeof URL?new URL(r.params.url):a.location,c=e.params.url,u=s.href.split(s.origin)[1],p=e.params,d=p.browserHistory,h=p.browserHistoryOnLoad,f=p.browserHistorySeparator,m=e.params.browserHistoryRoot;return(i.cordova||i.Capacitor&&i.Capacitor.isNative)&&d&&!f&&!m&&s.pathname.indexOf("index.html")&&(console.warn("Framework7: wrong or not complete browserHistory configuration, trying to guess browserHistoryRoot"),m=s.pathname.split("index.html")[0]),d&&h?(m&&u.indexOf(m)>=0&&""===(u=u.split(m)[1])&&(u="/"),c=f.length>0&&u.indexOf(f)>=0?u.split(f)[1]:u,e.restoreHistory(),e.history.indexOf(c)>=0?e.history=e.history.slice(0,e.history.indexOf(c)+1):e.params.url===c?e.history=[c]:gr.state&&gr.state[n.id]&&gr.state[n.id].url===e.history[e.history.length-1]?c=e.history[e.history.length-1]:e.history=[u.split(f)[0]||"/",c],e.history.length>1?t=!0:e.history=[],e.saveHistory()):(c||(c=u),s.search&&c.indexOf("?")<0&&(c+=s.search),s.hash&&c.indexOf("#")<0&&(c+=s.hash)),e.initialUrl=c,e.historyRestored=t,{initialUrl:c,historyRestored:t}},a.init=function(){var e=this,t=e.app,r=e.view,n=o();e.mount();var a=e.getInitialUrl(),i=a.initialUrl,s=a.historyRestored;(r&&e.params.iosSwipeBack&&"ios"===t.theme||r&&e.params.mdSwipeBack&&"md"===t.theme||r&&e.params.auroraSwipeBack&&"aurora"===t.theme)&&vr(e);var l,c=e.params,u=c.browserHistory,p=c.browserHistoryOnLoad,d=c.browserHistoryAnimateOnLoad,h=c.browserHistoryInitialMatch;if(e.history.length>1){var f=h?i:e.history[0];(l=e.findMatchingRoute(f))||(l=M(e.parseRouteUrl(f),{route:{url:f,path:f.split("?")[0]}}))}else(l=e.findMatchingRoute(i))||(l=M(e.parseRouteUrl(i),{route:{url:i,path:i.split("?")[0]}}));if(e.params.stackPages&&e.$el.children(".page").each((function(t){var r=Ot(t);e.initialPages.push(r[0]),e.dynamicNavbar&&r.children(".navbar").length>0&&e.initialNavbars.push(r.children(".navbar")[0])})),0===e.$el.children(".page:not(.stacked)").length&&i&&e.params.loadInitialPage)e.navigate(i,{initial:!0,reloadCurrent:!0,browserHistory:!1,animate:!1,once:{modalOpen:function(){s&&((e.params.preloadPreviousPage||e.params[t.theme+"SwipeBack"])&&e.history.length>1&&e.back({preload:!0}))},pageAfterIn:function(){s&&((e.params.preloadPreviousPage||e.params[t.theme+"SwipeBack"])&&e.history.length>1&&e.back({preload:!0}))}}});else if(e.$el.children(".page:not(.stacked)").length){var m;if(e.currentRoute=l,e.$el.children(".page:not(.stacked)").each((function(a){var i,o=Ot(a);e.setPagePosition(o,"current"),e.dynamicNavbar&&((i=o.children(".navbar")).length>0?(e.$navbarsEl.parents(n).length||e.$el.prepend(e.$navbarsEl),e.setNavbarPosition(i,"current"),e.$navbarsEl.append(i),i.children(".title-large").length&&i.addClass("navbar-large"),o.children(".navbar").remove()):(e.$navbarsEl.addClass("navbar-hidden"),i.children(".title-large").length&&e.$navbarsEl.addClass("navbar-hidden navbar-large-hidden"))),e.currentRoute&&e.currentRoute.route&&(!0===e.currentRoute.route.master||"function"==typeof e.currentRoute.route.master&&e.currentRoute.route.master(t,e))&&e.params.masterDetailBreakpoint>0&&(o.addClass("page-master"),o.trigger("page:role",{role:"master"}),i&&i.length&&i.addClass("navbar-master"),r.checkMasterDetailBreakpoint());var s={route:e.currentRoute};e.currentRoute&&e.currentRoute.route&&e.currentRoute.route.options&&M(s,e.currentRoute.route.options),e.currentPageEl=o[0],e.dynamicNavbar&&i.length&&(e.currentNavbarEl=i[0]),e.removeThemeElements(o),e.dynamicNavbar&&i.length&&e.removeThemeElements(i),s.route.route.tab&&(m=!0,e.tabLoad(s.route.route.tab,M({},s))),e.pageCallback("init",o,i,"current",void 0,s),e.pageCallback("beforeIn",o,i,"current",void 0,s),e.pageCallback("afterIn",o,i,"current",void 0,s)})),s)if(h)(e.params.preloadPreviousPage||e.params[t.theme+"SwipeBack"])&&e.history.length>1&&e.back({preload:!0});else e.navigate(i,{initial:!0,browserHistory:!1,history:!1,animate:d,once:{pageAfterIn:function(){(e.params.preloadPreviousPage||e.params[t.theme+"SwipeBack"])&&e.history.length>2&&e.back({preload:!0})}}});s||m||(e.history.push(i),e.saveHistory())}!(i&&u&&p)||gr.state&&gr.state[r.id]||gr.initViewState(r.id,{url:i}),e.emit("local::init routerInit",e)},a.destroy=function(){var e=this;e.emit("local::destroy routerDestroy",e),Object.keys(e).forEach((function(t){e[t]=null,delete e[t]})),e=null},n}(q);Ir.prototype.navigate=function(e,t){void 0===t&&(t={});var r,n,a,i,o,s,l,c=this;if(c.swipeBackActive)return c;if("string"==typeof e?r=e:(r=e.url,n=e.route,a=e.name,i=e.path,o=e.query,s=e.params),a||i)return(r=c.generateUrl({path:i,name:a,params:s,query:o}))?c.navigate(r,t):c;var u=c.app;if(xr(c,"navigate"),"#"===r||""===r)return c;var p=r.replace("./","");if("/"!==p[0]&&0!==p.indexOf("#")){var d=c.currentRoute.parentPath||c.currentRoute.path;p=((d?d+"/":"/")+p).replace("///","/").replace("//","/")}if(!(l=n?M(c.parseRouteUrl(p),{route:M({},n)}):c.findMatchingRoute(p)))return c;if(l.route&&l.route.viewName){var h=l.route.viewName,f=u.views[h];if(!f)throw new Error('Framework7: There is no View with "'+h+'" name that was specified in this route');if(f!==c.view)return f.router.navigate(e,t)}if(l.route.redirect)return yr.call(c,"forward",l,t);var m={};if(l.route.options?M(m,l.route.options,t):M(m,t),m.openIn&&(!c.params.ignoreOpenIn||c.params.ignoreOpenIn&&c.history.length>0))return function(e,t,r){var n={url:t,route:{path:t,options:Er({},r,{openIn:void 0})}},a=Er({},r);if("popup"===r.openIn&&(a.content='<div class="popup popup-router-open-in" data-url="'+t+'"><div class="view view-init" data-links-view="'+e.view.selector+'" data-url="'+t+'" data-ignore-open-in="true"></div></div>',n.route.popup=a),"loginScreen"===r.openIn&&(a.content='<div class="login-screen login-screen-router-open-in" data-url="'+t+'"><div class="view view-init" data-links-view="'+e.view.selector+'" data-url="'+t+'" data-ignore-open-in="true"></div></div>',n.route.loginScreen=a),"sheet"===r.openIn&&(a.content='<div class="sheet-modal sheet-modal-router-open-in" data-url="'+t+'"><div class="sheet-modal-inner"><div class="view view-init" data-links-view="'+e.view.selector+'" data-url="'+t+'" data-ignore-open-in="true"></div></div></div>',n.route.sheet=a),"popover"===r.openIn&&(a.targetEl=r.clickedEl||r.targetEl,a.content='<div class="popover popover-router-open-in" data-url="'+t+'"><div class="popover-inner"><div class="view view-init" data-links-view="'+e.view.selector+'" data-url="'+t+'" data-ignore-open-in="true"></div></div></div>',n.route.popover=a),r.openIn.indexOf("panel")>=0){var i=r.openIn.split(":"),o=i[1]||"left",s=i[2]||"cover";a.targetEl=r.clickedEl||r.targetEl,a.content='<div class="panel panel-router-open-in panel-'+o+" panel-"+s+'" data-url="'+t+'"><div class="view view-init" data-links-view="'+e.view.selector+'" data-url="'+t+'" data-ignore-open-in="true"></div></div>',n.route.panel=a}return e.navigate(n)}(c,p,m);function g(){var e=!1;function t(e,t){c.allowPageChange=!1;var r=!1;"popup popover sheet loginScreen actions customModal panel".split(" ").forEach((function(n){if(e[n]){r=!0;var a=M({},l,{route:e});c.allowPageChange=!0,c.modalLoad(n,a,M(m,t),"forward")}})),r||kr(c,e,M(m,t),!0)}function r(){c.allowPageChange=!0}"popup popover sheet loginScreen actions customModal panel".split(" ").forEach((function(t){l.route[t]&&!e&&(e=!0,c.modalLoad(t,l,m,"forward"))})),l.route.keepAlive&&l.route.keepAliveData&&(kr(c,{el:l.route.keepAliveData.pageEl},m,!1),e=!0),"url content component pageName el componentUrl".split(" ").forEach((function(t){var r;l.route[t]&&!e&&(e=!0,kr(c,((r={})[t]=l.route[t],r),m,!1))})),e||(l.route.async&&(c.allowPageChange=!1,l.route.async.call(c,{router:c,to:m.route,from:c.currentRoute,resolve:t,reject:r,direction:"forward",app:u})),l.route.asyncComponent&&wr(c,l.route.asyncComponent,t,r))}function v(){c.allowPageChange=!0}if(m.route=l,c.params.masterDetailBreakpoint>0&&l.route.masterRoute){var y=!0,b=!1;if(c.currentRoute&&c.currentRoute.route&&(!(!0===c.currentRoute.route.master||"function"==typeof c.currentRoute.route.master&&c.currentRoute.route.master(u,c))||c.currentRoute.route!==l.route.masterRoute&&c.currentRoute.route.path!==l.route.masterRoute.path||(y=!1),!c.currentRoute.route.masterRoute||c.currentRoute.route.masterRoute!==l.route.masterRoute&&c.currentRoute.route.masterRoute.path!==l.route.masterRoute.path||(y=!1,b=!0)),y||b&&t.reloadAll)return c.navigate({path:l.route.masterRoute.path,params:l.params||{}},{animate:!1,reloadAll:t.reloadAll,reloadCurrent:t.reloadCurrent,reloadPrevious:t.reloadPrevious,browserHistory:!t.initial,history:!t.initial,once:{pageAfterIn:function(){c.navigate(e,M({},t,{animate:!1,reloadAll:!1,reloadCurrent:!1,reloadPrevious:!1,history:!t.initial,browserHistory:!t.initial}))}}}),c}return _r.call(c,l,c.currentRoute,(function(){l.route.modules?u.loadModules(Array.isArray(l.route.modules)?l.route.modules:[l.route.modules]).then((function(){g()})).catch((function(){v()})):g()}),(function(){v()}),"forward"),c},Ir.prototype.refreshPage=function(){var e=this;return xr(e,"refreshPage"),e.navigate(e.currentRoute.url,{ignoreCache:!0,reloadCurrent:!0})},Ir.prototype.tabLoad=function(e,t){void 0===t&&(t={});var r,n,a=this,i=M({animate:a.params.animate,browserHistory:!0,history:!0,parentPageEl:null,preload:!1,on:{}},t);i.route&&(i.preload||i.route===a.currentRoute||(n=a.previousRoute,a.currentRoute=i.route),i.preload?(r=i.route,n=a.currentRoute):(r=a.currentRoute,n||(n=a.previousRoute)),a.params.browserHistory&&i.browserHistory&&!i.reloadPrevious&&gr.replace(a.view.id,{url:i.route.url},(a.params.browserHistoryRoot||"")+a.params.browserHistorySeparator+i.route.url),i.history&&(a.history[Math.max(a.history.length-1,0)]=i.route.url,a.saveHistory()));var o,s=Ot(i.parentPageEl||a.currentPageEl);o=s.length&&s.find("#"+e.id).length?s.find("#"+e.id).eq(0):a.view.selector?a.view.selector+" #"+e.id:"#"+e.id;var l,c=a.app.tab.show({tabEl:o,animate:i.animate,tabRoute:i.route}),u=c.$newTabEl,p=c.$oldTabEl,d=c.animated,h=c.onTabsChanged;if(u&&u.parents(".page").length>0&&i.route){var f=u.parents(".page")[0].f7Page;f&&i.route&&(f.route=i.route)}if(u[0].f7RouterTabLoaded)return p&&p.length?(d?h((function(){a.emit("routeChanged",a.currentRoute,a.previousRoute,a)})):a.emit("routeChanged",a.currentRoute,a.previousRoute,a),a):a;function m(t,r){var n=t.url,i=t.content,o=t.el,s=t.component,l=t.componentUrl;function c(t){a.allowPageChange=!0,t&&("string"==typeof t?u.html(t):(u.html(""),t.f7Component?t.f7Component.mount((function(e){u.append(e)})):u.append(t)),u[0].f7RouterTabLoaded=!0,function(t){a.removeThemeElements(u);var r=u;"string"!=typeof t&&(r=Ot(t)),r.trigger("tab:init tab:mounted",e),a.emit("tabInit tabMounted",u[0],e),p&&p.length&&(d?h((function(){a.emit("routeChanged",a.currentRoute,a.previousRoute,a),a.params.unloadTabContent&&a.tabRemove(p,u,e)})):(a.emit("routeChanged",a.currentRoute,a.previousRoute,a),a.params.unloadTabContent&&a.tabRemove(p,u,e)))}(t))}if(i)c(i);else if(o)c(o);else if(s||l)try{a.tabComponentLoader({tabEl:u[0],component:s,componentUrl:l,options:r,resolve:c,reject:function(){return a.allowPageChange=!0,a}})}catch(e){throw a.allowPageChange=!0,e}else n&&(a.xhrAbortController&&(a.xhrAbortController.abort(),a.xhrAbortController=!1),a.xhrRequest(n,r).then((function(e){c(e)})).catch((function(){a.allowPageChange=!0})))}function g(e,t){m(e,M(i,t))}function v(){a.allowPageChange=!0}return"url content component el componentUrl".split(" ").forEach((function(t){var r;e[t]&&(l=!0,m(((r={})[t]=e[t],r),i))})),e.async?e.async.call(a,{router:a,to:r,from:n,resolve:g,reject:v,app:a.app}):e.asyncComponent?wr(a,e.asyncComponent,g,v):l||(a.allowPageChange=!0),a},Ir.prototype.tabRemove=function(e,t,r){var n;e[0]&&(e[0].f7RouterTabLoaded=!1,delete e[0].f7RouterTabLoaded),e.children().each((function(e){e.f7Component&&(n=!0,Ot(e).trigger("tab:beforeremove",r),e.f7Component.destroy())})),n||e.trigger("tab:beforeremove",r),this.emit("tabBeforeRemove",e[0],t[0],r),this.removeTabContent(e[0],r)},Ir.prototype.modalLoad=function(e,t,r,n){void 0===r&&(r={});var a,i=this,o=i.app,s="panel"===e,l=s?"panel":"modal",c=M({animate:i.params.animate,browserHistory:!0,history:!0,on:{},once:{}},r),u=M({},t.route[e]),p=t.route,d=function(e,t){var r,n=c.on,a=c.once;"open"===t&&(r=n.modalOpen||a.modalOpen||n.panelOpen||a.panelOpen),"close"===t&&(r=n.modalClose||a.modalClose||n.panelClose||a.panelClose),"closed"===t&&(r=n.modalClosed||a.modalClosed||n.panelClosed||a.panelClosed),r&&r(e)};function h(){var r=o[e].create(u);p.modalInstance=r;var n=r.el;function a(){r.close()}r.on(l+"Open",(function(){n||(i.removeThemeElements(r.el),r.$el.trigger(e.toLowerCase()+":init "+e.toLowerCase()+":mounted",t,r),i.emit((s?"":"modalInit")+" "+e+"Init "+e+"Mounted",r.el,t,r)),i.once("swipeBackMove",a),d(r,"open")})),r.on(l+"Close",(function(){i.off("swipeBackMove",a),r.closeByRouter||i.back(),d(r,"close")})),r.on(l+"Closed",(function(){r.$el.trigger(e.toLowerCase()+":beforeremove",t,r),r.emit((s?"":"modalBeforeRemove ")+e+"BeforeRemove",r.el,t,r);var n=r.el.f7Component;d(r,"closed"),n&&n.destroy(),x((function(){(n||u.component)&&i.removeModal(r.el),r.destroy(),delete r.route,delete p.modalInstance}))})),c.route&&(i.params.browserHistory&&c.browserHistory&&gr.push(i.view.id,{url:c.route.url,modal:e},(i.params.browserHistoryRoot||"")+i.params.browserHistorySeparator+c.route.url),c.route!==i.currentRoute&&(r.route=M(c.route,{modal:r}),i.currentRoute=r.route),c.history&&!c.reloadCurrent&&(i.history.push(c.route.url),i.saveHistory())),n&&(i.removeThemeElements(r.el),r.$el.trigger(e.toLowerCase()+":init "+e.toLowerCase()+":mounted",t,r),i.emit(l+"Init "+e+"Init "+e+"Mounted",r.el,t,r)),r.open(!1===c.animate||!0===c.animate?c.animate:void 0)}function f(e,t){var r=e.url,n=e.content,a=e.component,s=e.componentUrl;function l(e){e&&("string"==typeof e?u.content=e:e.f7Component?e.f7Component.mount((function(e){u.el=e,o.$el.append(e)})):u.el=e,h())}if(n)l(n);else if(a||s)try{i.modalComponentLoader({rootEl:o.el,component:a,componentUrl:s,options:t,resolve:l,reject:function(){return i.allowPageChange=!0,i}})}catch(e){throw i.allowPageChange=!0,e}else r?(i.xhrAbortController&&(i.xhrAbortController.abort(),i.xhrAbortController=!1),i.xhrRequest(r,t).then((function(e){u.content=e,h()})).catch((function(){i.allowPageChange=!0}))):h()}function m(e,t){f(e,M(c,t))}function g(){i.allowPageChange=!0}return"url content component el componentUrl template".split(" ").forEach((function(e){var t;u[e]&&!a&&(a=!0,f(((t={})[e]=u[e],t),c))})),a||"actions"!==e||h(),u.async&&u.async.call(i,{router:i,to:c.route,from:i.currentRoute,resolve:m,reject:g,direction:n,app:o}),u.asyncComponent&&wr(i,u.asyncComponent,m,g),i},Ir.prototype.modalRemove=function(e){M(e,{closeByRouter:!0}),e.close()},Ir.prototype.back=function(){var e,t,r,n=this,a=N();if(n.swipeBackActive)return n;"object"==typeof(arguments.length<=0?void 0:arguments[0])?t=(arguments.length<=0?void 0:arguments[0])||{}:(e=arguments.length<=0?void 0:arguments[0],t=(arguments.length<=1?void 0:arguments[1])||{});var i=t,o=i.name,s=i.params,l=i.query;if(o)return(e=n.generateUrl({name:o,params:s,query:l}))?n.back(e,M({},t,{name:null,params:null,query:null})):n;var c=n.app;xr(n,"back");var u,p=n.currentRoute.modal;if(p||"popup popover sheet loginScreen actions customModal panel".split(" ").forEach((function(e){n.currentRoute.route[e]&&(p=!0,u=e)})),p&&!t.preload){var d,h=n.currentRoute.modal||n.currentRoute.route.modalInstance||c[u].get(),f=n.history[n.history.length-2];if(h&&h.$el){var m=h.$el.prevAll(".modal-in");if(m.length&&m[0].f7Modal){var g=m[0];n.$el.parents(g).length||(d=g.f7Modal.route)}}if(d||(d=n.findMatchingRoute(f)),!d&&f&&(d={url:f,path:f.split("?")[0],query:C(f),route:{path:f.split("?")[0],url:f}}),!(e&&0!==e.replace(/[# ]/g,"").trim().length||d&&h))return n;var v=t.force&&d&&e;if(d&&h){var y=a.ie||a.edge||a.firefox&&!a.ios,b=n.params.browserHistory&&!1!==t.browserHistory,_=n.currentRoute&&n.currentRoute.route&&n.currentRoute.route.options&&!1===n.currentRoute.route.options.browserHistory;!b||y||_||gr.back(),n.currentRoute=d,n.history.pop(),n.saveHistory(),b&&y&&!_&&gr.back(),n.modalRemove(h),v&&n.navigate(e,{reloadCurrent:!0})}else h&&(n.modalRemove(h),e&&n.navigate(e,{reloadCurrent:!0}));return n}var x,w=n.$el.children(".page-current").prevAll(".page-previous:not(.page-master)").eq(0);if(n.params.masterDetailBreakpoint>0){var E=[];n.$el.children(".page").each((function(e){E.push(e.className)}));var k=n.$el.children(".page-current").prevAll(".page-master").eq(0);if(k.length){var T=n.history[n.history.length-2],S=n.findMatchingRoute(T);S&&k[0].f7Page&&S.route===k[0].f7Page.route.route&&(w=k,t.preload||(x=c.width>=n.params.masterDetailBreakpoint))}}if(!t.force&&w.length&&!x){if(n.params.browserHistory&&w[0].f7Page&&n.history[n.history.length-2]!==w[0].f7Page.route.url)return n.back(n.history[n.history.length-2],M(t,{force:!0})),n;var P=w[0].f7Page.route;return _r.call(n,P,n.currentRoute,(function(){Sr(n,{el:w},M(t,{route:P}))}),(function(){}),"backward"),n}if("#"===e&&(e=void 0),e&&"/"!==e[0]&&0!==e.indexOf("#")&&(e=((n.path||"/")+e).replace("//","/")),!e&&n.history.length>1&&(e=n.history[n.history.length-2]),x&&!t.force&&n.history[n.history.length-3])return n.back(n.history[n.history.length-3],M({},t||{},{force:!0,animate:!1}));if(x&&!t.force)return n;if((r=n.findMatchingRoute(e))||e&&(r={url:e,path:e.split("?")[0],query:C(e),route:{path:e.split("?")[0],url:e}}),!r)return n;if(r.route.redirect)return yr.call(n,"backward",r,t);var I,A={};if(r.route.options?M(A,r.route.options,t):M(A,t),A.route=r,A.force&&n.params.stackPages&&(n.$el.children(".page-previous.stacked").each((function(e){e.f7Page&&e.f7Page.route&&e.f7Page.route.url===r.url&&(I=!0,Sr(n,{el:e},A))})),I))return n;function O(){var e=!1;function t(e,t){n.allowPageChange=!1,Sr(n,e,M(A,t),!0)}function a(){n.allowPageChange=!0}r.route.keepAlive&&r.route.keepAliveData&&(Sr(n,{el:r.route.keepAliveData.pageEl},A),e=!0),"url content component pageName el componentUrl".split(" ").forEach((function(t){var a;r.route[t]&&!e&&(e=!0,Sr(n,((a={})[t]=r.route[t],a),A))})),e||(r.route.async&&(n.allowPageChange=!1,r.route.async.call(n,{router:n,to:r,from:n.currentRoute,resolve:t,reject:a,direction:"backward",app:c})),r.route.asyncComponent&&wr(n,r.route.asyncComponent,t,a))}function z(){n.allowPageChange=!0}return A.preload?O():_r.call(n,r,n.currentRoute,(function(){r.route.modules?c.loadModules(Array.isArray(r.route.modules)?r.route.modules:[r.route.modules]).then((function(){O()})).catch((function(){z()})):O()}),(function(){z()}),"backward"),n},Ir.prototype.clearPreviousHistory=function(){var e=this;xr(e,"clearPreviousHistory");var t=e.history[e.history.length-1];!function(e){xr(e,"clearPreviousPages");var t=e.app,r=e.dynamicNavbar;e.$el.children(".page").filter((function(t){return!(!e.currentRoute||!e.currentRoute.modal&&!e.currentRoute.panel)||t!==e.currentPageEl})).each((function(n){var a=Ot(n),i=Ot(t.navbar.getElByPage(a));e.params.stackPages&&e.initialPages.indexOf(a[0])>=0?(a.addClass("stacked"),r&&i.addClass("stacked")):(e.pageCallback("beforeRemove",a,i,"previous",void 0,{}),e.removePage(a),r&&i.length&&e.removeNavbar(i))}))}(e),e.history=[t],e.view.history=[t],e.saveHistory()};var Ar=Ir,Or={name:"router",static:{Router:Ar},instance:{cache:{xhr:[],templates:[],components:[]}},create:function(){var e=this;e.app?e.params.router&&(e.router=new Ar(e.app,e)):e.router=new Ar(e)}};var zr=function(e){var t=e.app,r=F();if(!e.resizableInitialized){M(e,{resizable:!0,resizableWidth:null,resizableInitialized:!0});var n=Ot("html"),a=e.$el;if(a){var i,o,s,l,c,u,p,d={};(i=e.$el.children(".view-resize-handler")).length||(e.$el.append('<div class="view-resize-handler"></div>'),i=e.$el.children(".view-resize-handler")),e.$resizeHandlerEl=i,a.addClass("view-resizable");var h=!!r.passiveListener&&{passive:!0};e.$el.on(t.touchEvents.start,".view-resize-handler",m,h),t.on("touchmove:active",g),t.on("touchend:passive",v),t.on("resize",y),e.on("beforeOpen",y),e.once("viewDestroy",(function(){a.removeClass("view-resizable"),e.$resizeHandlerEl.remove(),e.$el.off(t.touchEvents.start,".view-resize-handler",m,h),t.off("touchmove:active",g),t.off("touchend:passive",v),t.off("resize",y),e.off("beforeOpen",y)}))}}function f(e){if(!e)return null;if(e.indexOf("%")>=0||e.indexOf("vw")>=0)return parseInt(e,10)/100*t.width;var r=parseInt(e,10);return Number.isNaN(r)?null:r}function m(t){if(e.resizable&&a.hasClass("view-resizable")&&a.hasClass("view-master-detail")){d.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,d.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY,s=!1,o=!0;var r=a.children(".page-master");u=f(r.css("min-width")),p=f(r.css("max-width"))}}function g(r){if(o){r.f7PreventSwipePanel=!0;var h="touchmove"===r.type?r.targetTouches[0].pageX:r.pageX;s||(c=i[0].offsetLeft+i[0].offsetWidth,a.addClass("view-resizing"),n.css("cursor","col-resize")),s=!0,r.preventDefault(),l=h-d.x;var f=c+l;u&&!Number.isNaN(u)&&(f=Math.max(f,u)),p&&!Number.isNaN(p)&&(f=Math.min(f,p)),f=Math.min(Math.max(f,0),t.width),e.resizableWidth=f,n[0].style.setProperty("--f7-page-master-width",f+"px"),a.trigger("view:resize",f),e.emit("local::resize viewResize",e,f)}}function v(){if(Ot("html").css("cursor",""),!o||!s)return o=!1,void(s=!1);o=!1,s=!1,n[0].style.setProperty("--f7-page-master-width",e.resizableWidth+"px"),a.removeClass("view-resizing")}function y(){e.resizableWidth&&(u=f(i.css("min-width")),p=f(i.css("max-width")),u&&!Number.isNaN(u)&&e.resizableWidth<u&&(e.resizableWidth=Math.max(e.resizableWidth,u)),p&&!Number.isNaN(p)&&e.resizableWidth>p&&(e.resizableWidth=Math.min(e.resizableWidth,p)),e.resizableWidth=Math.min(Math.max(e.resizableWidth,0),t.width),n[0].style.setProperty("--f7-page-master-width",e.resizableWidth+"px"))}};function Rr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lr(e,t){return(Lr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Dr=function(e){var t,r;function n(t,r,n){var a;void 0===n&&(n={});var i,o=Rr(a=e.call(this,n,[t])||this);if(!o.params.routerId&&!Ot(r).length){var s="Framework7: can't create a View instance because ";throw new Error(s+="string"==typeof r?'the selector "'+r+"\" didn't match any element":"el must be an HTMLElement or Dom7 object")}return o.params=M({el:r},{routes:[],routesAdd:[]},t.params.view,n),o.params.routes.length>0?o.routes=o.params.routes:o.routes=[].concat(t.routes,o.params.routesAdd),M(!1,o,{app:t,name:o.params.name,main:o.params.main,history:[],scrollHistory:{}}),o.useModules(),t.views.push(o),o.main&&(t.views.main=o),o.name&&(t.views[o.name]=o),o.index=t.views.indexOf(o),i=o.name?"view_"+o.name:o.main?"view_main":"view_"+o.index,o.id=i,o.params.init?(t.initialized?o.init():t.on("init",(function(){o.init()})),o||Rr(a)):o||Rr(a)}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,Lr(t,r);var a=n.prototype;return a.destroy=function(){var e=this,t=e.app;e.$el.trigger("view:beforedestroy"),e.emit("local::beforeDestroy viewBeforeDestroy",e),t.off("resize",e.checkMasterDetailBreakpoint),e.main?(t.views.main=null,delete t.views.main):e.name&&(t.views[e.name]=null,delete t.views[e.name]),e.$el[0].f7View=null,delete e.$el[0].f7View,t.views.splice(t.views.indexOf(e),1),e.params.router&&e.router&&e.router.destroy(),e.emit("local::destroy viewDestroy",e),Object.keys(e).forEach((function(t){e[t]=null,delete e[t]})),e=null},a.checkMasterDetailBreakpoint=function(e){var t=this,r=t.app,n=t.$el.hasClass("view-master-detail"),a=r.width>=t.params.masterDetailBreakpoint&&t.$el.children(".page-master").length;void 0===e&&a||!0===e?(t.$el.addClass("view-master-detail"),n||(t.emit("local::masterDetailBreakpoint viewMasterDetailBreakpoint",t),t.$el.trigger("view:masterDetailBreakpoint"))):(t.$el.removeClass("view-master-detail"),n&&(t.emit("local::masterDetailBreakpoint viewMasterDetailBreakpoint",t),t.$el.trigger("view:masterDetailBreakpoint")))},a.initMasterDetail=function(){var e=this,t=e.app;e.checkMasterDetailBreakpoint=e.checkMasterDetailBreakpoint.bind(e),e.checkMasterDetailBreakpoint(),e.params.masterDetailResizable&&zr(e),t.on("resize",e.checkMasterDetailBreakpoint)},a.mount=function(e){var t,r,n=this,a=n.app,i=n.params.el||e,o=Ot(i);t="string"==typeof i?i:(o.attr("id")?"#"+o.attr("id"):"")+(o.attr("class")?"."+o.attr("class").replace(/ /g,".").replace(".active",""):""),"ios"===a.theme&&n.params.iosDynamicNavbar&&0===(r=o.children(".navbars").eq(0)).length&&(r=Ot('<div class="navbars"></div>')),M(n,{$el:o,el:o[0],main:n.main||o.hasClass("view-main"),$navbarsEl:r,navbarsEl:r?r[0]:void 0,selector:t}),n.main&&(a.views.main=n),o&&o[0]&&(o[0].f7View=n),n.emit("local::mount viewMount",n)},a.init=function(e){var t=this;t.mount(e),t.params.router&&(t.params.masterDetailBreakpoint>0&&t.initMasterDetail(),t.router.init(),t.$el.trigger("view:init"),t.emit("local::init viewInit",t))},n}(q);Dr.use(Or);var Br=Dr;var $r={name:"clicks",params:{clicks:{externalLinks:".external"}},on:{init:function(){!function(e){e.on("click",(function(t){var r=l(),n=Ot(t.target),a=n.closest("a"),i=a.length>0,o=i&&a.attr("href");if(i&&(a.is(e.params.clicks.externalLinks)||o&&o.indexOf("javascript:")>=0)){var s=a.attr("target");o&&r.cordova&&r.cordova.InAppBrowser&&("_system"===s||"_blank"===s)?(t.preventDefault(),r.cordova.InAppBrowser.open(o,s)):o&&r.Capacitor&&r.Capacitor.Plugins&&r.Capacitor.Plugins.Browser&&("_system"===s||"_blank"===s)&&(t.preventDefault(),r.Capacitor.Plugins.Browser.open({url:o}))}else{Object.keys(e.modules).forEach((function(r){var a=e.modules[r].clicks;a&&(t.preventF7Router||Object.keys(a).forEach((function(r){var i=n.closest(r).eq(0);i.length>0&&a[r].call(e,i,i.dataset(),t)})))}));var c={};if(i&&(t.preventDefault(),c=a.dataset()),c.clickedEl=a[0],!t.preventF7Router&&!a.hasClass("prevent-router")&&!a.hasClass("router-prevent")&&(o&&o.length>0&&"#"!==o[0]||a.hasClass("back"))){var u;if(c.view&&"current"===c.view?u=e.views.current:c.view?u=Ot(c.view)[0].f7View:(u=n.parents(".view")[0]&&n.parents(".view")[0].f7View,!a.hasClass("back")&&u&&u.params.linksView&&("string"==typeof u.params.linksView?u=Ot(u.params.linksView)[0].f7View:u.params.linksView instanceof Br&&(u=u.params.linksView))),u||e.views.main&&(u=e.views.main),!u||!u.router)return;a[0].f7RouteProps&&(c.props=a[0].f7RouteProps),a.hasClass("back")?u.router.back(o,c):u.router.navigate(o,c)}}}))}(this)}}},Fr={name:"history",static:{history:gr},on:{init:function(){gr.init(this)}}},Nr={registrations:[],register:function(e,t){var r=this;return"serviceWorker"in l().navigator&&r.serviceWorker.container?new Promise((function(n,a){r.serviceWorker.container.register(e,t?{scope:t}:{}).then((function(e){Nr.registrations.push(e),r.emit("serviceWorkerRegisterSuccess",e),n(e)})).catch((function(e){r.emit("serviceWorkerRegisterError",e),a(e)}))})):new Promise((function(e,t){t(new Error("Service worker is not supported"))}))},unregister:function(e){var t,r=this;return"serviceWorker"in l().navigator&&r.serviceWorker.container?(t=e?Array.isArray(e)?e:[e]:Nr.registrations,Promise.all(t.map((function(e){return new Promise((function(t,n){e.unregister().then((function(){Nr.registrations.indexOf(e)>=0&&Nr.registrations.splice(Nr.registrations.indexOf(e),1),r.emit("serviceWorkerUnregisterSuccess",e),t()})).catch((function(t){r.emit("serviceWorkerUnregisterError",e,t),n(t)}))}))})))):new Promise((function(e,t){t(new Error("Service worker is not supported"))}))}},Vr={name:"sw",params:{serviceWorker:{path:void 0,scope:void 0}},create:function(){var e=this,t=l();M(e,{serviceWorker:{container:"serviceWorker"in t.navigator?t.navigator.serviceWorker:void 0,registrations:Nr.registrations,register:Nr.register.bind(e),unregister:Nr.unregister.bind(e)}})},on:{init:function(){var e=l();if("serviceWorker"in e.navigator){var t=this;if(!(t.device.cordova||e.Capacitor&&e.Capacitor.isNative)&&t.serviceWorker.container){var r=t.params.serviceWorker.path,n=t.params.serviceWorker.scope;if(r&&(!Array.isArray(r)||r.length))(Array.isArray(r)?r:[r]).forEach((function(e){t.serviceWorker.register(e,n)}))}}}}};function jr(){return(jr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Ur=function(e){void 0===e&&(e={});var t={__store:!0},r=jr({},e.state||{}),n=jr({},e.actions||{}),a=jr({},e.getters||{}),i=M({},r),o=[],s={},l={};Object.keys(a).forEach((function(e){s[e]=[],l[e]=[]}));var c=function(e){return a[e]({state:t.state})},u=function(e,t){l[e]||(l[e]=[]),l[e].push(t)};t.__removeCallback=function(e){!function(e){Object.keys(l).forEach((function(t){var r=l[t];r.indexOf(e)>=0&&r.splice(r.indexOf(e),1)}))}(e)};var p=function(e,t){if(void 0===t&&(t=!0),"constructor"!==e){o=[];var r=c(e);!function(e,t){s[e]||(s[e]=[]),t.forEach((function(t){s[e].indexOf(t)<0&&s[e].push(t)}))}(e,o);var n={value:r,onUpdated:function(t){u(e,t)}};if(!t)return n;var a=function(e){n.value=e};return n.__callback=a,u(e,a),n}};return t.state=new Proxy(i,{set:function(e,t,r){var n;return e[t]=r,n=t,Object.keys(s).filter((function(e){return s[e].indexOf(n)>=0})).forEach((function(e){l[e]&&l[e].length&&l[e].forEach((function(t){t(c(e))}))})),!0},get:function(e,t){return o.push(t),e[t]}}),t.getters=new Proxy(a,{set:function(){return!1},get:function(e,t){if(e[t])return p(t,!0)}}),t._gettersPlain=new Proxy(a,{set:function(){return!1},get:function(e,t){if(e[t])return p(t,!1)}}),t.dispatch=function(e,r){return new Promise((function(a,i){if(!n[e])throw i(),new Error('Framework7: Store action "'+e+'" is not found');a(n[e]({state:t.state,dispatch:t.dispatch},r))}))},t},qr={name:"store",static:{createStore:Ur},proto:{createStore:Ur}},Hr=function(){var e=l();return e.Capacitor&&e.Capacitor.isNative&&e.Capacitor.Plugins&&e.Capacitor.Plugins.StatusBar},Gr={hide:function(){var e=l();N().cordova&&e.StatusBar&&e.StatusBar.hide(),Hr()&&e.Capacitor.Plugins.StatusBar.hide()},show:function(){var e=l();N().cordova&&e.StatusBar&&e.StatusBar.show(),Hr()&&e.Capacitor.Plugins.StatusBar.show()},onClick:function(){var e;(e=Ot(".popup.modal-in").length>0?Ot(".popup.modal-in").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"):Ot(".panel.panel-in").length>0?Ot(".panel.panel-in").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"):Ot(".views > .view.tab-active").length>0?Ot(".views > .view.tab-active").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"):Ot(".views").length>0?Ot(".views").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"):this.$el.children(".view").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"))&&e.length>0&&(e.hasClass("tab")&&(e=e.parent(".tabs").children(".page-content.tab-active")),e.length>0&&e.scrollTop(0,300))},setTextColor:function(e){var t=l();N().cordova&&t.StatusBar&&("white"===e?t.StatusBar.styleLightContent():t.StatusBar.styleDefault()),Hr()&&("white"===e?t.Capacitor.Plugins.StatusBar.setStyle({style:"DARK"}):t.Capacitor.Plugins.StatusBar.setStyle({style:"LIGHT"}))},setBackgroundColor:function(e){var t=l();N().cordova&&t.StatusBar&&t.StatusBar.backgroundColorByHexString(e),Hr()&&t.Capacitor.Plugins.StatusBar.setBackgroundColor({color:e})},isVisible:function(){var e=l(),t=N();return new Promise((function(r){t.cordova&&e.StatusBar&&r(e.StatusBar.isVisible),Hr()&&e.Capacitor.Plugins.StatusBar.getInfo().then((function(e){r(e.visible)})),r(!1)}))},overlaysWebView:function(e){void 0===e&&(e=!0);var t=l();N().cordova&&t.StatusBar&&t.StatusBar.overlaysWebView(e),Hr()&&t.Capacitor.Plugins.StatusBar.setOverlaysWebView({overlay:e})},init:function(){var e=l(),t=N(),r=this.params.statusbar;if(r.enabled){var n=t.cordova&&e.StatusBar,a=Hr();(n||a)&&(r.scrollTopOnClick&&Ot(e).on("statusTap",Gr.onClick.bind(this)),t.ios&&(r.iosOverlaysWebView?Gr.overlaysWebView(!0):Gr.overlaysWebView(!1),"white"===r.iosTextColor?Gr.setTextColor("white"):Gr.setTextColor("black")),t.android&&(r.androidOverlaysWebView?Gr.overlaysWebView(!0):Gr.overlaysWebView(!1),"white"===r.androidTextColor?Gr.setTextColor("white"):Gr.setTextColor("black"))),r.iosBackgroundColor&&t.ios&&Gr.setBackgroundColor(r.iosBackgroundColor),r.androidBackgroundColor&&t.android&&Gr.setBackgroundColor(r.androidBackgroundColor)}}},Wr={name:"statusbar",params:{statusbar:{enabled:!0,scrollTopOnClick:!0,iosOverlaysWebView:!0,iosTextColor:"black",iosBackgroundColor:null,androidOverlaysWebView:!1,androidTextColor:"black",androidBackgroundColor:null}},create:function(){B(this,{statusbar:Gr})},on:{init:function(){Gr.init.call(this)}}};var Xr={name:"view",params:{view:{init:!0,name:void 0,main:!1,router:!0,linksView:null,stackPages:!1,xhrCache:!0,xhrCacheIgnore:[],xhrCacheIgnoreGetParameters:!1,xhrCacheDuration:6e5,componentCache:!0,preloadPreviousPage:!0,allowDuplicateUrls:!1,reloadPages:!1,reloadDetail:!1,masterDetailBreakpoint:0,masterDetailResizable:!1,removeElements:!0,removeElementsWithTimeout:!1,removeElementsTimeout:0,restoreScrollTopOnBack:!0,unloadTabContent:!0,passRouteQueryToRequest:!0,passRouteParamsToRequest:!1,loadInitialPage:!0,iosSwipeBack:!0,iosSwipeBackAnimateShadow:!0,iosSwipeBackAnimateOpacity:!0,iosSwipeBackActiveArea:30,iosSwipeBackThreshold:0,mdSwipeBack:!1,mdSwipeBackAnimateShadow:!0,mdSwipeBackAnimateOpacity:!1,mdSwipeBackActiveArea:30,mdSwipeBackThreshold:0,auroraSwipeBack:!1,auroraSwipeBackAnimateShadow:!1,auroraSwipeBackAnimateOpacity:!0,auroraSwipeBackActiveArea:30,auroraSwipeBackThreshold:0,browserHistory:!1,browserHistoryRoot:void 0,browserHistoryAnimate:!0,browserHistoryAnimateOnLoad:!1,browserHistorySeparator:"#!",browserHistoryOnLoad:!0,browserHistoryInitialMatch:!1,browserHistoryStoreHistory:!0,animate:!0,iosDynamicNavbar:!0,iosAnimateNavbarBackIcon:!0,iosPageLoadDelay:0,mdPageLoadDelay:0,auroraPageLoadDelay:0,routesBeforeEnter:null,routesBeforeLeave:null}},static:{View:Br},create:function(){var e=this;M(e,{views:M([],{create:function(t,r){return new Br(e,t,r)},get:function(e){var t=Ot(e);if(t.length&&t[0].f7View)return t[0].f7View}})}),Object.defineProperty(e.views,"current",{enumerable:!0,configurable:!0,get:function(){return function(e){var t=Ot(".popover.modal-in .view"),r=Ot(".popup.modal-in .view"),n=Ot(".panel.panel-in .view"),a=Ot(".views");0===a.length&&(a=e.$el);var i=a.children(".view");if(0===i.length&&(i=a.children(".tabs").children(".view")),i.length>1&&i.hasClass("tab")&&0===(i=a.children(".view.tab-active")).length&&(i=a.children(".tabs").children(".view.tab-active")),t.length>0&&t[0].f7View)return t[0].f7View;if(r.length>0&&r[0].f7View)return r[0].f7View;if(n.length>0&&n[0].f7View)return n[0].f7View;if(i.length>0){if(1===i.length&&i[0].f7View)return i[0].f7View;if(i.length>1)return e.views.main}}(e)}}),e.view=e.views},on:{init:function(){var e=this;Ot(".view-init").each((function(t){if(!t.f7View){var r=Ot(t).dataset();e.views.create(t,r)}}))},"modalOpen panelOpen":function(e){var t=this;e.$el.find(".view-init").each((function(e){if(!e.f7View){var r=Ot(e).dataset();t.views.create(e,r)}}))},"modalBeforeDestroy panelBeforeDestroy":function(e){e&&e.$el&&e.$el.find(".view-init").each((function(e){var t=e.f7View;t&&t.destroy()}))}},vnode:{"view-init":{insert:function(e){var t=e.elm;if(!t.f7View){var r=Ot(t).dataset();this.views.create(t,r)}},destroy:function(e){var t=e.elm.f7View;t&&t.destroy()}}}},Zr={size:function(e){var t=this,r=Ot(e);if(r.hasClass("navbars"))r=r.children(".navbar").each((function(e){t.navbar.size(e)}));else{var n=r.children(".navbar-inner");if(n.length){var a=n.hasClass("navbar-inner-centered-title")||t.params.navbar[t.theme+"CenterTitle"],i="ios"===t.theme&&!t.params.navbar[t.theme+"CenterTitle"];if((a||i)&&!(r.hasClass("stacked")||r.parents(".stacked").length>0||r.parents(".tab:not(.tab-active)").length>0||r.parents(".popup:not(.modal-in)").length>0)){"ios"!==t.theme&&t.params.navbar[t.theme+"CenterTitle"]&&n.addClass("navbar-inner-centered-title"),"ios"!==t.theme||t.params.navbar.iosCenterTitle||n.addClass("navbar-inner-left-title");var o,s,l,c,u=r.parents(".view").eq(0),p=t.rtl?n.children(".right"):n.children(".left"),d=t.rtl?n.children(".left"):n.children(".right"),h=n.children(".title"),f=n.children(".subnavbar"),m=0===p.length,g=0===d.length,v=m?0:p.outerWidth(!0),y=g?0:d.outerWidth(!0),b=h.outerWidth(!0),_=n.styles(),x=n[0].offsetWidth-parseInt(_.paddingLeft,10)-parseInt(_.paddingRight,10),w=r.hasClass("navbar-previous"),E=n.hasClass("sliding");u.length>0&&u[0].f7View&&(s=(o=u[0].f7View.router)&&o.dynamicNavbar),g&&(l=x-b),m&&(l=0),m||g||(l=(x-y-b+v)/2);var C=(x-b)/2;x-v-y>b?(C<v&&(C=v),C+b>x-y&&(C=x-y-b),c=C-l):c=0;var k=t.rtl?-1:1;if(s&&"ios"===t.theme){if(h.hasClass("sliding")||h.length>0&&E){var T=-(l+c)*k,S=(x-l-c-b)*k;if(w&&o&&o.params.iosAnimateNavbarBackIcon){var P=r.parent().find(".navbar-current").children(".left.sliding").find(".back .icon ~ span");P.length>0&&(T+=P[0].offsetLeft)}h[0].f7NavbarLeftOffset=T,h[0].f7NavbarRightOffset=S}if(!m&&(p.hasClass("sliding")||E))if(t.rtl)p[0].f7NavbarLeftOffset=-(x-p[0].offsetWidth)/2*k,p[0].f7NavbarRightOffset=v*k;else if(p[0].f7NavbarLeftOffset=-v,p[0].f7NavbarRightOffset=(x-p[0].offsetWidth)/2,o&&o.params.iosAnimateNavbarBackIcon&&p.find(".back .icon").length>0&&p.find(".back .icon ~ span").length){var M=p[0].f7NavbarLeftOffset,I=p[0].f7NavbarRightOffset;p[0].f7NavbarLeftOffset=0,p[0].f7NavbarRightOffset=0,p.find(".back .icon ~ span")[0].f7NavbarLeftOffset=M,p.find(".back .icon ~ span")[0].f7NavbarRightOffset=I-p.find(".back .icon")[0].offsetWidth}g||!d.hasClass("sliding")&&!E||(t.rtl?(d[0].f7NavbarLeftOffset=-y*k,d[0].f7NavbarRightOffset=(x-d[0].offsetWidth)/2*k):(d[0].f7NavbarLeftOffset=-(x-d[0].offsetWidth)/2,d[0].f7NavbarRightOffset=y)),f.length&&(f.hasClass("sliding")||E)&&(f[0].f7NavbarLeftOffset=t.rtl?f[0].offsetWidth:-f[0].offsetWidth,f[0].f7NavbarRightOffset=-f[0].f7NavbarLeftOffset)}if(a){var A=c;t.rtl&&m&&g&&h.length>0&&(A=-A),h.css({left:A+"px"})}}}}},hide:function(e,t,r,n){void 0===t&&(t=!0),void 0===r&&(r=!1),void 0===n&&(n=!1);var a=this,i=Ot(e),o=i.hasClass("navbar")&&i.parent(".navbars").length&&!n;if(o&&(i=i.parents(".navbars")),i.length&&!i.hasClass("navbar-hidden")){var s="navbar-hidden"+(t?" navbar-transitioning":"");(o?i.find(".navbar-current .title-large").length:i.find(".title-large").length)&&(s+=" navbar-large-hidden"),r&&(s+=" navbar-hidden-statusbar"),i.transitionEnd((function(){i.removeClass("navbar-transitioning")})),i.addClass(s),o?i.children(".navbar").each((function(e){Ot(e).trigger("navbar:hide"),a.emit("navbarHide",e)})):(i.trigger("navbar:hide"),a.emit("navbarHide",i[0]))}},show:function(e,t,r){void 0===e&&(e=".navbar-hidden"),void 0===t&&(t=!0),void 0===r&&(r=!1);var n=this,a=Ot(e),i=a.hasClass("navbar")&&a.parent(".navbars").length&&!r;i&&(a=a.parents(".navbars")),a.length&&a.hasClass("navbar-hidden")&&(t&&(a.addClass("navbar-transitioning"),a.transitionEnd((function(){a.removeClass("navbar-transitioning")}))),a.removeClass("navbar-hidden navbar-large-hidden navbar-hidden-statusbar"),i?a.children(".navbar").each((function(e){Ot(e).trigger("navbar:show"),n.emit("navbarShow",e)})):(a.trigger("navbar:show"),n.emit("navbarShow",a[0])))},getElByPage:function(e){var t,r,n;if(e.$navbarEl||e.$el?(n=e,t=e.$el):(t=Ot(e)).length>0&&(n=t[0].f7Page),n&&n.$navbarEl&&n.$navbarEl.length>0?r=n.$navbarEl:t&&(r=t.children(".navbar")),r&&(!r||0!==r.length))return r[0]},getPageByEl:function(e){var t,r=Ot(e);return r.parents(".page").length?r.parents(".page")[0]:(r.parents(".view").find(".page").each((function(e){e&&e.f7Page&&e.f7Page.navbarEl&&r[0]===e.f7Page.navbarEl&&(t=e)})),t)},collapseLargeTitle:function(e){var t=this,r=Ot(e);if(!(r.hasClass("navbars")&&((r=r.find(".navbar")).length>1&&(r=Ot(e).find(".navbar-large.navbar-current")),r.length>1||!r.length))){var n=Ot(t.navbar.getPageByEl(r));r.addClass("navbar-large-collapsed"),n.eq(0).addClass("page-with-navbar-large-collapsed").trigger("page:navbarlargecollapsed"),t.emit("pageNavbarLargeCollapsed",n[0]),r.trigger("navbar:collapse"),t.emit("navbarCollapse",r[0])}},expandLargeTitle:function(e){var t=this,r=Ot(e);if(!(r.hasClass("navbars")&&((r=r.find(".navbar-large")).length>1&&(r=Ot(e).find(".navbar-large.navbar-current")),r.length>1||!r.length))){var n=Ot(t.navbar.getPageByEl(r));r.removeClass("navbar-large-collapsed"),n.eq(0).removeClass("page-with-navbar-large-collapsed").trigger("page:navbarlargeexpanded"),t.emit("pageNavbarLargeExpanded",n[0]),r.trigger("navbar:expand"),t.emit("navbarExpand",r[0])}},toggleLargeTitle:function(e){var t=Ot(e);t.hasClass("navbars")&&((t=t.find(".navbar-large")).length>1&&(t=Ot(e).find(".navbar-large.navbar-current")),t.length>1||!t.length)||(t.hasClass("navbar-large-collapsed")?this.navbar.expandLargeTitle(t):this.navbar.collapseLargeTitle(t))},initNavbarOnScroll:function(e,t,r,n,a){var i,o,s,l,c,u,p,d,h,f,m,g,v,y,b=this,_=F(),x=Ot(e),w=Ot(t),E=w.find(".title-large"),C=E.length||w.hasClass(".navbar-large"),k=44,T=b.params.navbar.snapPageScrollToLargeTitle,S=b.params.navbar.snapPageScrollToTransparentNavbar;(n||r&&C)&&((h=w.css("--f7-navbar-large-title-height"))&&h.indexOf("px")>=0?(h=parseInt(h,10),Number.isNaN(h)&&E.length?h=E[0].offsetHeight:Number.isNaN(h)&&("ios"===b.theme?h=52:"md"===b.theme?h=48:"aurora"===b.theme&&(h=38))):E.length?h=E[0].offsetHeight:"ios"===b.theme?h=52:"md"===b.theme?h=48:"aurora"===b.theme&&(h=38)),r&&C&&(k+=h);function P(){x.find(".page-content").each((function(e){e.f7ScrollableDistance=e.scrollHeight-e.offsetHeight}))}function M(){w.hasClass("with-searchbar-expandable-enabled")||!g||o<0||(o>=h/2&&o<h?Ot(g).scrollTop(h,100):o<h&&Ot(g).scrollTop(0,200))}function I(){w.hasClass("with-searchbar-expandable-enabled")||!g||o<0||(o>=f/2&&o<f?Ot(g).scrollTop(f,100):o<f&&Ot(g).scrollTop(0,200))}var A=null,O=null;function z(e){g=this,e&&e.target&&e.target!==g||(o=g.scrollTop,m=o,n?function(e){if(!w.hasClass("navbar-hidden")&&!w.parent(".navbars").hasClass("navbar-hidden")){var t=w.hasClass("navbar-large-transparent")||w.hasClass("navbar-large")&&w.hasClass("navbar-transparent");A=O;var r=Math.min(h,e.f7ScrollableDistance||h);O=Math.min(Math.max(o/r,0),1);var n=A>0&&A<1;w.hasClass("with-searchbar-expandable-enabled")||(d=w.hasClass("navbar-large-collapsed"),0===O&&d?b.navbar.expandLargeTitle(w[0]):1!==O||d||b.navbar.collapseLargeTitle(w[0]),0===O&&d||0===O&&n||1===O&&!d||1===O&&n?("md"===b.theme&&w.find(".navbar-inner").css("overflow",""),w.find(".title").css("opacity",""),w.find(".title-large-text, .subnavbar").css("transform",""),t?w.find(".navbar-bg").css("opacity",""):w.find(".navbar-bg").css("transform","")):O>0&&O<1&&("md"===b.theme&&w.find(".navbar-inner").css("overflow","visible"),w.find(".title").css("opacity",O),w.find(".title-large-text, .subnavbar").css("transform","translate3d(0px, "+-1*O*h+"px, 0)"),t?w.find(".navbar-bg").css("opacity",O):w.find(".navbar-bg").css("transform","translate3d(0px, "+-1*O*h+"px, 0)")),T&&(_.touch?y&&(clearTimeout(y),y=null,y=setTimeout((function(){M(),clearTimeout(y),y=null}),70)):(clearTimeout(v),v=setTimeout((function(){M()}),300))))}}(g):a&&function(){var e=w.hasClass("navbar-hidden")||w.parent(".navbars").hasClass("navbar-hidden");if(!w.hasClass("with-searchbar-expandable-enabled")&&!e){f||(f=t.offsetHeight);var r=o/f,n=w.hasClass("navbar-transparent-visible");if(r=Math.max(Math.min(r,1),0),n&&1===r||!n&&0===r)w.find(".navbar-bg, .title").css("opacity","");else{if(n&&0===r)return w.trigger("navbar:transparenthide"),b.emit("navbarTransparentHide",w[0]),w.removeClass("navbar-transparent-visible"),void w.find(".navbar-bg, .title").css("opacity","");if(!n&&1===r)return w.trigger("navbar:transparentshow"),b.emit("navbarTransparentShow",w[0]),w.addClass("navbar-transparent-visible"),void w.find(".navbar-bg, .title").css("opacity","");w.find(".navbar-bg, .title").css("opacity",r),S&&(_.touch?y&&(clearTimeout(y),y=null,y=setTimeout((function(){I(),clearTimeout(y),y=null}),70)):(clearTimeout(v),v=setTimeout((function(){I()}),300)))}}}(),x.hasClass("page-previous")||r&&(x.hasClass("page-with-card-opened")||(s=g.scrollHeight,l=g.offsetHeight,c=o+l>=s,p=w.hasClass("navbar-hidden")||w.parent(".navbars").hasClass("navbar-hidden"),c?b.params.navbar.showOnPageScrollEnd&&(u="show"):u=i>o?b.params.navbar.showOnPageScrollTop||o<=k?"show":"hide":o>k?"hide":"show","show"===u&&p?(b.navbar.show(w,!0,!0),p=!1):"hide"!==u||p||(b.navbar.hide(w,!0,!1,!0),p=!0),i=o)))}function R(){m=!1}function L(){clearTimeout(y),y=null,y=setTimeout((function(){!1!==m&&(a&&!n?I():M(),clearTimeout(y),y=null)}),70)}x.on("scroll",".page-content",z,!0),_.touch&&(n&&T||a&&S)&&(b.on("touchstart:passive",R),b.on("touchend:passive",L)),P(),(n||a)&&x.find(".page-content").each((function(e){e.scrollTop>0&&z.call(e)})),b.on("resize",P),x[0].f7DetachNavbarScrollHandlers=function(){b.off("resize",P),delete x[0].f7DetachNavbarScrollHandlers,x.off("scroll",".page-content",z,!0),_.touch&&(n&&T||a&&S)&&(b.off("touchstart:passive",R),b.off("touchend:passive",L))}}},Yr={name:"navbar",create:function(){B(this,{navbar:Zr})},params:{navbar:{scrollTopOnTitleClick:!0,iosCenterTitle:!0,mdCenterTitle:!1,auroraCenterTitle:!0,hideOnPageScroll:!1,showOnPageScrollEnd:!0,showOnPageScrollTop:!0,collapseLargeTitleOnScroll:!0,snapPageScrollToLargeTitle:!0,snapPageScrollToTransparentNavbar:!0}},on:{"panelBreakpoint panelCollapsedBreakpoint panelResize viewResize resize viewMasterDetailBreakpoint":function(){var e=this;Ot(".navbar").each((function(t){e.navbar.size(t)}))},pageBeforeRemove:function(e){e.$el[0].f7DetachNavbarScrollHandlers&&e.$el[0].f7DetachNavbarScrollHandlers()},pageBeforeIn:function(e){var t=this;if("ios"===t.theme){var r,n=e.$el.parents(".view")[0].f7View,a=t.navbar.getElByPage(e);if(r=a?Ot(a).parents(".navbars"):e.$el.parents(".view").children(".navbars"),e.$el.hasClass("no-navbar")||n.router.dynamicNavbar&&!a){var i=!!(e.pageFrom&&e.router.history.length>0);t.navbar.hide(r,i)}else t.navbar.show(r)}},pageReinit:function(e){var t=Ot(this.navbar.getElByPage(e));t&&0!==t.length&&this.navbar.size(t)},pageInit:function(e){var t,r,n,a=this,i=Ot(a.navbar.getElByPage(e));i&&0!==i.length&&(a.navbar.size(i),i.find(".title-large").length>0&&i.addClass("navbar-large"),i.hasClass("navbar-large")&&(a.params.navbar.collapseLargeTitleOnScroll&&(t=!0),e.$el.addClass("page-with-navbar-large")),!t&&i.hasClass("navbar-transparent")&&(r=!0),(a.params.navbar.hideOnPageScroll||e.$el.find(".hide-navbar-on-scroll").length||e.$el.hasClass("hide-navbar-on-scroll")||e.$el.find(".hide-bars-on-scroll").length||e.$el.hasClass("hide-bars-on-scroll"))&&(n=!(e.$el.find(".keep-navbar-on-scroll").length||e.$el.hasClass("keep-navbar-on-scroll")||e.$el.find(".keep-bars-on-scroll").length||e.$el.hasClass("keep-bars-on-scroll"))),(t||n||r)&&a.navbar.initNavbarOnScroll(e.el,i[0],n,t,r))},"panelOpen panelSwipeOpen modalOpen":function(e){var t=this;e.$el.find(".navbar:not(.navbar-previous):not(.stacked)").each((function(e){t.navbar.size(e)}))},tabShow:function(e){var t=this;Ot(e).find(".navbar:not(.navbar-previous):not(.stacked)").each((function(e){t.navbar.size(e)}))}},clicks:{".navbar .title":function(e){if(this.params.navbar.scrollTopOnTitleClick&&!(e.closest("a").length>0)){var t,r=e.parents(".navbar"),n=r.parents(".navbars");0===(t=r.parents(".page-content")).length&&(r.parents(".page").length>0&&(t=r.parents(".page").find(".page-content")),0===t.length&&n.length&&n.nextAll(".page-current:not(.stacked)").length>0&&(t=n.nextAll(".page-current:not(.stacked)").find(".page-content")),0===t.length&&r.nextAll(".page-current:not(.stacked)").length>0&&(t=r.nextAll(".page-current:not(.stacked)").find(".page-content"))),t&&t.length>0&&(t.hasClass("tab")&&(t=t.parent(".tabs").children(".page-content.tab-active")),t.length>0&&t.scrollTop(0,300))}}},vnode:{navbar:{postpatch:function(e){this.navbar.size(e.elm)}}}},Kr={setHighlight:function(e){if("ios"!==this.theme){var t=Ot(e);if(0!==t.length&&(t.hasClass("tabbar")||t.hasClass("tabbar-labels"))){var r=t.find(".tab-link-highlight"),n=t.find(".tab-link").length;if(0!==n){0===r.length?(t.children(".toolbar-inner").append('<span class="tab-link-highlight"></span>'),r=t.find(".tab-link-highlight")):r.next().length&&t.children(".toolbar-inner").append(r);var a,i,o=t.find(".tab-link-active");if(t.hasClass("tabbar-scrollable")&&o&&o[0])a=o[0].offsetWidth+"px",i=o[0].offsetLeft+"px";else{var s=o.index();a=100/n+"%",i=100*(this.rtl?-s:s)+"%"}w((function(){r.css("width",a).transform("translate3d("+i+",0,0)")}))}else r.remove()}}},init:function(e){this.toolbar.setHighlight(e)},hide:function(e,t){void 0===t&&(t=!0);var r=Ot(e);if(!r.hasClass("toolbar-hidden")){var n="toolbar-hidden"+(t?" toolbar-transitioning":"");r.transitionEnd((function(){r.removeClass("toolbar-transitioning")})),r.addClass(n),r.trigger("toolbar:hide"),this.emit("toolbarHide",r[0])}},show:function(e,t){void 0===t&&(t=!0);var r=Ot(e);r.hasClass("toolbar-hidden")&&(t&&(r.addClass("toolbar-transitioning"),r.transitionEnd((function(){r.removeClass("toolbar-transitioning")}))),r.removeClass("toolbar-hidden"),r.trigger("toolbar:show"),this.emit("toolbarShow",r[0]))},initToolbarOnScroll:function(e){var t,r,n,a,i,o,s,l=this,c=Ot(e),u=c.parents(".view").children(".toolbar");(0===u.length&&(u=c.find(".toolbar")),0===u.length&&(u=c.parents(".views").children(".tabbar, .tabbar-labels")),0!==u.length)&&(c.on("scroll",".page-content",p,!0),c[0].f7ScrollToolbarHandler=p);function p(e){if(!c.hasClass("page-with-card-opened")&&!c.hasClass("page-previous")){var p=this;e&&e.target&&e.target!==p||(r=p.scrollTop,n=p.scrollHeight,a=p.offsetHeight,i=r+a>=n,s=u.hasClass("toolbar-hidden"),i?l.params.toolbar.showOnPageScrollEnd&&(o="show"):o=t>r?l.params.toolbar.showOnPageScrollTop||r<=44?"show":"hide":r>44?"hide":"show","show"===o&&s?(l.toolbar.show(u),s=!1):"hide"!==o||s||(l.toolbar.hide(u),s=!0),t=r)}}}},Qr={name:"toolbar",create:function(){B(this,{toolbar:Kr})},params:{toolbar:{hideOnPageScroll:!1,showOnPageScrollEnd:!0,showOnPageScrollTop:!0}},on:{pageBeforeRemove:function(e){e.$el[0].f7ScrollToolbarHandler&&e.$el.off("scroll",".page-content",e.$el[0].f7ScrollToolbarHandler,!0)},pageBeforeIn:function(e){var t=e.$el.parents(".view").children(".toolbar");0===t.length&&(t=e.$el.parents(".views").children(".tabbar, .tabbar-labels")),0===t.length&&(t=e.$el.find(".toolbar")),0!==t.length&&(e.$el.hasClass("no-toolbar")?this.toolbar.hide(t):this.toolbar.show(t))},pageInit:function(e){var t=this;if(e.$el.find(".tabbar, .tabbar-labels").each((function(e){t.toolbar.init(e)})),t.params.toolbar.hideOnPageScroll||e.$el.find(".hide-toolbar-on-scroll").length||e.$el.hasClass("hide-toolbar-on-scroll")||e.$el.find(".hide-bars-on-scroll").length||e.$el.hasClass("hide-bars-on-scroll")){if(e.$el.find(".keep-toolbar-on-scroll").length||e.$el.hasClass("keep-toolbar-on-scroll")||e.$el.find(".keep-bars-on-scroll").length||e.$el.hasClass("keep-bars-on-scroll"))return;t.toolbar.initToolbarOnScroll(e.el)}},init:function(){var e=this;e.$el.find(".tabbar, .tabbar-labels").each((function(t){e.toolbar.init(t)}))}},vnode:{tabbar:{insert:function(e){this.toolbar.init(e.elm)}}}},Jr={name:"subnavbar",on:{pageInit:function(e){e.$navbarEl&&e.$navbarEl.length&&e.$navbarEl.find(".subnavbar").length&&e.$el.addClass("page-with-subnavbar"),e.$el.find(".subnavbar").filter((function(t){return Ot(t).parents(".page")[0]===e.$el[0]})).length&&e.$el.addClass("page-with-subnavbar")}}},en=function(){function e(e,t,r,n){var a=this;if(t){var i=t[0].getBoundingClientRect(),o=i.left,s=i.top,l=i.width,c=i.height,u=r-o,p=n-s,d=Math.max(Math.pow(Math.pow(c,2)+Math.pow(l,2),.5),48),h=!1,f=e.params.touch.touchRippleInsetElements||"";if(f&&t.is(f)&&(h=!0),h&&(d=Math.max(Math.min(l,c),48)),h||"hidden"!==t.css("overflow"))a.rippleTransform="translate3d("+(l/2-u)+"px, "+(c/2-p)+"px, 0) scale(1)";else{var m=(d/2+Math.pow(Math.pow(u-l/2,2)+Math.pow(p-c/2,2),.5))/(d/2);a.rippleTransform="translate3d(0px, 0px, 0) scale("+m+")"}return h&&t.addClass("ripple-inset"),a.$rippleWaveEl=Ot('<div class="ripple-wave" style="width: '+d+"px; height: "+d+"px; margin-top:-"+d/2+"px; margin-left:-"+d/2+"px; left:"+u+"px; top:"+p+"px; --f7-ripple-transform: "+a.rippleTransform+'"></div>'),t.prepend(a.$rippleWaveEl),a.$rippleWaveEl.animationEnd((function(){a.$rippleWaveEl&&(a.$rippleWaveEl.hasClass("ripple-wave-out")||(a.$rippleWaveEl.addClass("ripple-wave-in"),a.shouldBeRemoved&&a.out()))})),a}}var t=e.prototype;return t.destroy=function(){var e=this;e.$rippleWaveEl&&e.$rippleWaveEl.remove(),Object.keys(e).forEach((function(t){e[t]=null,delete e[t]})),e=null},t.out=function(){var e=this,t=this.$rippleWaveEl;clearTimeout(e.removeTimeout),t.addClass("ripple-wave-out"),e.removeTimeout=setTimeout((function(){e.destroy()}),300),t.animationEnd((function(){clearTimeout(e.removeTimeout),e.destroy()}))},t.remove=function(){var e=this;e.shouldBeRemoved||(e.removeTimeout=setTimeout((function(){e.destroy()}),400),e.shouldBeRemoved=!0,e.$rippleWaveEl.hasClass("ripple-wave-in")&&e.out())},e}();function tn(e,t,r){return(tn=rn()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&nn(a,r.prototype),a}).apply(null,arguments)}function rn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function nn(e,t){return(nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var an={name:"touch-ripple",static:{TouchRipple:en},create:function(){this.touchRipple={create:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return tn(en,t)}}}};function on(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sn(e,t){return(sn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ln=[],cn=[];var un=function(e){var t,r;function n(t,r){var n,a=on(n=e.call(this,r,[t])||this),i={};a.useModulesParams(i),a.params=M(i,r),a.opened=!1;var o=a.params.containerEl?Ot(a.params.containerEl).eq(0):t.$el;return o.length||(o=t.$el),a.$containerEl=o,a.containerEl=o[0],a.useModules(),on(n)||on(n)}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,sn(t,r);var a=n.prototype;return a.onOpen=function(){var e=this;e.opened=!0,ln.push(e),Ot("html").addClass("with-modal-"+e.type.toLowerCase()),e.$el.trigger("modal:open "+e.type.toLowerCase()+":open"),e.emit("local::open modalOpen "+e.type+"Open",e)},a.onOpened=function(){var e=this;e.$el.trigger("modal:opened "+e.type.toLowerCase()+":opened"),e.emit("local::opened modalOpened "+e.type+"Opened",e)},a.onClose=function(){var e=this;e.opened=!1,e.type&&e.$el&&(ln.splice(ln.indexOf(e),1),Ot("html").removeClass("with-modal-"+e.type.toLowerCase()),e.$el.trigger("modal:close "+e.type.toLowerCase()+":close"),e.emit("local::close modalClose "+e.type+"Close",e))},a.onClosed=function(){var e=this;e.type&&e.$el&&(e.$el.removeClass("modal-out"),e.$el.hide(),e.$el.trigger("modal:closed "+e.type.toLowerCase()+":closed"),e.emit("local::closed modalClosed "+e.type+"Closed",e))},a.open=function(e){var t,r=this,n=o(),a=r.app,i=r.$el,s=r.$backdropEl,l=r.type,c=!0;if(void 0!==e?c=e:void 0!==r.params.animate&&(c=r.params.animate),!i||i.hasClass("modal-in"))return!1===e&&i[0]&&"dialog"!==l&&(i[0].style.display="block"),r;if("dialog"===l&&a.params.modal.queueDialogs&&(Ot(".dialog.modal-in").length>0?t=!0:ln.length>0&&ln.forEach((function(e){"dialog"===e.type&&(t=!0)})),t))return cn.push(r),r;var u=i.parent(),p=i.parents(n).length>0;function d(){i.hasClass("modal-out")?r.onClosed():i.hasClass("modal-in")&&r.onOpened()}return u.is(r.$containerEl)||(r.$containerEl.append(i),r.once(l+"Closed",(function(){p?u.append(i):i.remove()}))),i.show(),r._clientLeft=i[0].clientLeft,c?(s&&(s.removeClass("not-animated"),s.addClass("backdrop-in")),i.animationEnd((function(){d()})),i.transitionEnd((function(){d()})),i.removeClass("modal-out not-animated").addClass("modal-in"),r.onOpen()):(s&&s.addClass("backdrop-in not-animated"),i.removeClass("modal-out").addClass("modal-in not-animated"),r.onOpen(),r.onOpened()),r},a.close=function(e){var t=this,r=t.$el,n=t.$backdropEl,a=!0;if(void 0!==e?a=e:void 0!==t.params.animate&&(a=t.params.animate),!r||!r.hasClass("modal-in"))return cn.indexOf(t)>=0&&cn.splice(cn.indexOf(t),1),t;if(n){var i=!0;"popup"===t.type&&t.$el.prevAll(".popup.modal-in").add(t.$el.nextAll(".popup.modal-in")).each((function(e){var r=e.f7Modal;r&&r.params.closeByBackdropClick&&r.params.backdrop&&r.backdropEl===t.backdropEl&&(i=!1)})),i&&(n[a?"removeClass":"addClass"]("not-animated"),n.removeClass("backdrop-in"))}function o(){r.hasClass("modal-out")?t.onClosed():r.hasClass("modal-in")&&t.onOpened()}return r[a?"removeClass":"addClass"]("not-animated"),a?(r.animationEnd((function(){o()})),r.transitionEnd((function(){o()})),r.removeClass("modal-in").addClass("modal-out"),t.onClose()):(r.addClass("not-animated").removeClass("modal-in").addClass("modal-out"),t.onClose(),t.onClosed()),"dialog"===t.type&&0!==cn.length&&cn.shift().open(),t},a.destroy=function(){var e=this;e.destroyed||(e.emit("local::beforeDestroy modalBeforeDestroy "+e.type+"BeforeDestroy",e),e.$el&&(e.$el.trigger("modal:beforedestroy "+e.type.toLowerCase()+":beforedestroy"),e.$el.length&&e.$el[0].f7Modal&&delete e.$el[0].f7Modal),y(e),e.destroyed=!0)},n}(q);function pn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dn(e,t){return(dn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var hn=function(e){var t,r;function n(t,r){var n,a,i,o=M({backdrop:!0,closeByBackdropClick:!0,on:{}},r),s=pn(n=e.call(this,t,o)||this);if(s.params=o,(a=s.params.el?Ot(s.params.el):Ot(s.params.content))&&a.length>0&&a[0].f7Modal)return a[0].f7Modal||pn(n);if(0===a.length)return s.destroy()||pn(n);function l(e){s&&!s.destroyed&&i&&e.target===i[0]&&s.close()}return s.params.backdrop&&0===(i=t.$el.children(".custom-modal-backdrop")).length&&(i=Ot('<div class="custom-modal-backdrop"></div>'),t.$el.append(i)),s.on("customModalOpened",(function(){s.params.closeByBackdropClick&&s.params.backdrop&&t.on("click",l)})),s.on("customModalClose",(function(){s.params.closeByBackdropClick&&s.params.backdrop&&t.off("click",l)})),M(s,{app:t,$el:a,el:a[0],$backdropEl:i,backdropEl:i&&i[0],type:"customModal"}),a[0].f7Modal=s,s||pn(n)}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,dn(t,r),n}(un),fn={name:"modal",static:{Modal:un,CustomModal:hn},create:function(){var e=this;e.customModal={create:function(t){return new hn(e,t)}}},params:{modal:{queueDialogs:!0}}};Ht.use([Gt,Wt,Xt,Zt,sr,lr,$r,Or,Fr,Vr,qr,Wr,Xr,Yr,Qr,Jr,an,fn]);var mn=Ht;function gn(e){var t={};return Object.keys(e).forEach((function(r){void 0!==e[r]&&(t[r]=e[r])})),t}function vn(e){return"string"==typeof e&&""!==e}function yn(e){return"object"==typeof e&&null!==e&&e.constructor&&e.constructor===Object}function bn(){return Date.now()}function _n(){for(var e,t,r=!0,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];"boolean"==typeof a[0]?(r=a[0],e=a[1],a.splice(0,2),t=a):(e=a[0],a.splice(0,1),t=a);for(var o=0;o<t.length;o+=1){var s=a[o];if(null!=s)for(var l=Object.keys(Object(s)),c=0,u=l.length;c<u;c+=1){var p=l[c],d=Object.getOwnPropertyDescriptor(s,p);void 0!==d&&d.enumerable&&(r?yn(e[p])&&yn(s[p])?_n(e[p],s[p]):!yn(e[p])&&yn(s[p])?(e[p]={},_n(e[p],s[p])):e[p]=s[p]:e[p]=s[p])}}return e}function xn(){for(var e=[],t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach((function(t){Array.isArray(t)?e.push.apply(e,xn.apply(void 0,t)):e.push(t)})),e}function wn(){for(var e=[],t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r.forEach((function(t){"object"==typeof t&&t.constructor===Object?Object.keys(t).forEach((function(r){t[r]&&e.push(r)})):t&&e.push(t)}));var a=[];return e.forEach((function(e){a.indexOf(e)<0&&a.push(e)})),a.join(" ")}function En(e){void 0===e&&(e={});var t={};if(!e)return t;var r=e.children;if(!r||0===r.length)return t;function n(e,r){t[e]||(t[e]=[]),t[e].push(r)}if(Array.isArray(r))r.forEach((function(e){e&&n(e.props&&e.props.slot||"default",e)}));else{var a="default";r.props&&r.props.slot&&(a=r.props.slot),n(a,r)}return t}function Cn(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];t&&t.trim().length&&"string"==typeof t&&t.trim().split(" ").forEach((function(t){var r=(t||"").trim();if(r){var a="on"+(r=r.charAt(0).toUpperCase()+r.slice(1));e[a]&&e[a].apply(e,n)}}))}function kn(e){void 0===e&&(e={});var t={};return Object.keys(e).forEach((function(r){0!==r.indexOf("data-")&&0!==r.indexOf("aria-")&&"role"!==r||(t[r]=e[r])})),t}var Tn,Sn,Pn=0,Mn=0;function In(){return Pn+=1,bn()+"_"+Pn}function An(){return Mn+=1,bn()+"_"+Mn}var On={},zn={views:[],tabs:[],modals:null},Rn=function(){Tn&&(On.ios="ios"===Tn.theme,On.md="md"===Tn.theme,On.aurora="aurora"===Tn.theme)},Ln=function(){Pn=0,Mn=0,delete On.ios,delete On.md,delete On.aurora,zn.views=[],zn.tabs=[],zn.modals=null},Dn=function(e,t,r){void 0===t&&(t={}),void 0===r&&(r=!0);var n=_n({},t,{el:e,init:r});if(void 0!==t.store&&(n.store=t.store),n.routes||(n.routes=[]),n.userAgent&&("auto"===n.theme||!n.theme)){var a=mn.getDevice({userAgent:n.userAgent},!0);On.ios=!!a.ios,On.aurora=a.desktop&&a.electron,On.md=!On.ios&&!On.aurora}if(!Tn||"undefined"==typeof window){"undefined"==typeof window&&Ln();var i=new mn(n);Tn=i,Rn(),i.initialized?(Tn=i,Sn.emit("ready",Tn)):i.on("init",(function(){Tn=i,Sn.emit("ready",Tn)}))}},Bn=function(e){e&&(Tn&&Tn.initialized?e(Tn):Sn.once("ready",e))},$n=function(e){for(var t=[],r=0;r<e.children.length;r+=1)t.push(e.children[r]);return t},Fn={proto:{pageComponentLoader:function(e){var t,r=e.routerEl,n=e.component,a=e.options,i=e.resolve,o=e.reject,s=this.id,l=r;if(zn.views.forEach((function(e){(e.el&&e.el===r||e.routerId&&e.routerId===s)&&(t=e)})),t){var c,u={component:n,id:An(),props:_n({f7route:a.route,f7router:this},a.route.params,a.props||{})},p=$n(l);Sn.on("viewRouterDidUpdate",(function e(r){if(r===t&&!c){var n=$n(l);if(!function(e,t){return e.length===t.length&&new Set([].concat(e,t)).size===e.length}(p,n)){Sn.off("viewRouterDidUpdate",e);var a=l.children[l.children.length-1];u.el=a,i(a),c=!0}}})),t.pages.push(u),t.setPages(t.pages)}else o()},removePage:function(e){if(e){var t,r=this;if((t="length"in e&&e[0]?e[0].f7Page:e.f7Page)&&t.route&&t.route.route&&t.route.route.keepAlive)r.app.$(e).remove();else{var n,a,i;if(zn.views.forEach((function(e){e.el&&e.el===r.el&&(n=e)})),"length"in e){if(0===e.length)return;a=e[0]}else a=e;if(a)n.pages.forEach((function(e,t){e.el===a&&(i=!0,n.pages.splice(t,1),n.setPages(n.pages))})),i||a.parentNode.removeChild(a)}}},tabComponentLoader:function(e){var t,r=void 0===e?{}:e,n=r.tabEl,a=r.component,i=r.options,o=r.resolve,s=r.reject;if(n||s(),zn.tabs.forEach((function(e){e.el&&e.el===n&&(t=e)})),t){var l,c={id:An(),component:a,props:_n({f7route:i.route,f7router:this},i.route.route&&i.route.route.tab&&i.route.route.tab.options&&i.route.route.tab.options.props||{},i.route.params,i.props||{})};Sn.on("tabRouterDidUpdate",(function e(r){if(r===t&&!l){Sn.off("tabRouterDidUpdate",e);var a=n.children[0];o(a),l=!0}})),t.setTabContent(c)}else s()},removeTabContent:function(e){var t;e&&(zn.tabs.forEach((function(r){r.el&&r.el===e&&(t=r)})),t?t.setTabContent(null):e.innerHTML="")},modalComponentLoader:function(e){var t=void 0===e?{}:e,r=t.component,n=t.options,a=t.resolve,i=t.reject,o=zn.modals;if(o){var s,l={component:r,id:An(),props:_n({f7route:n.route,f7router:this},n.route.params,n.props||{})};Sn.on("modalsRouterDidUpdate",(function e(){if(!s){Sn.off("modalsRouterDidUpdate",e);var t=o.el.children[o.el.children.length-1];l.el=t,a(t),s=!0}})),o.modals.push(l),o.setModals(o.modals)}else i()},removeModal:function(e){var t,r=zn.modals;r&&(r.modals.forEach((function(r){r.el===e&&(t=r)})),r.modals.splice(r.modals.indexOf(t),1),r.setModals(r.modals))}}},Nn={name:"reactPlugin",installed:!1,install:function(e){if(void 0===e&&(e={}),!Nn.installed){Nn.installed=!0,Sn=new mn.Events;var t=e,r=t.theme,n=t.userAgent;if("md"===r&&(On.md=!0),"ios"===r&&(On.ios=!0),"aurora"===r&&(On.aurora=!0),("undefined"!=typeof window||!!n)&&(!r||"auto"===r)){var a=mn.getDevice({userAgent:n},!0);On.ios=!!a.ios,On.aurora=a.desktop&&a.electron,On.md=!On.ios&&!On.aurora}Bn((function(){Rn()})),mn.Router.use(Fn)}}},Vn=Nn,jn=function(e,t){for(var r=t||{},n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];var o=a||[],s=Object.keys(r).map((function(e){return"_"===e[0]?r[e]?e.replace("_",""):"":e+'="'+r[e]+'"'})).filter((function(e){return!!e})).join(" ");if(["path","img","circle","polygon","line","input"].indexOf(e)>=0)return("<"+e+" "+s+" />").trim();var l=o.filter((function(e){return!!e})).map((function(e){return Array.isArray(e)?e.join(""):e})).join("");return("<"+e+" "+s+">"+l+"</"+e+">").trim()};function Un(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qn(e,t){return(qn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Hn=function(e){var t,r;function n(t,r){var n,a=M({title:t.params.dialog.title,text:void 0,content:"",buttons:[],verticalButtons:!1,onClick:void 0,cssClass:void 0,destroyOnClose:!1,on:{}},r);void 0===a.closeByBackdropClick&&(a.closeByBackdropClick=t.params.dialog.closeByBackdropClick),void 0===a.backdrop&&(a.backdrop=t.params.dialog.backdrop);var i,s,l,c=Un(n=e.call(this,t,a)||this),u=N(),p=o(),d=a.title,h=a.text,f=a.content,m=a.buttons,g=a.verticalButtons,v=a.cssClass,y=a.backdrop;if(c.params=a,c.params.el)i=Ot(c.params.el);else{var b=["dialog"];0===m.length&&b.push("dialog-no-buttons"),m.length>0&&b.push("dialog-buttons-"+m.length),g&&b.push("dialog-buttons-vertical"),v&&b.push(v);var _="";m.length>0&&(_=jn("div",{class:"dialog-buttons"},m.map((function(e){return jn("span",{class:"dialog-button"+(e.bold?" dialog-button-bold":"")+(e.color?" color-"+e.color:"")+(e.cssClass?" "+e.cssClass:"")},e.text)}))));var x=jn("div",{class:b.join(" ")},jn("div",{class:"dialog-inner"},d&&jn("div",{class:"dialog-title"},d),h&&jn("div",{class:"dialog-text"},h),f),_);i=Ot(x)}if(i&&i.length>0&&i[0].f7Modal)return i[0].f7Modal||Un(n);if(0===i.length)return c.destroy()||Un(n);function w(e){var t=Ot(this).index(),r=m[t];r.onClick&&r.onClick(c,e),c.params.onClick&&c.params.onClick(c,t),!1!==r.close&&c.close()}function E(e){var t=e.keyCode;m.forEach((function(r,n){r.keyCodes&&r.keyCodes.indexOf(t)>=0&&(p.activeElement&&p.activeElement.blur(),r.onClick&&r.onClick(c,e),c.params.onClick&&c.params.onClick(c,n),!1!==r.close&&c.close())}))}function C(e){var t=e.target;0===Ot(t).closest(c.el).length&&c.params.closeByBackdropClick&&c.backdropEl&&c.backdropEl===t&&c.close()}return y&&0===(s=t.$el.children(".dialog-backdrop")).length&&(s=Ot('<div class="dialog-backdrop"></div>'),t.$el.append(s)),m&&m.length>0&&(c.on("open",(function(){i.find(".dialog-button").each((function(e,t){m[t].keyCodes&&(l=!0),Ot(e).on("click",w)})),!l||u.ios||u.android||u.cordova||u.capacitor||Ot(p).on("keydown",E)})),c.on("close",(function(){i.find(".dialog-button").each((function(e){Ot(e).off("click",w)})),!l||u.ios||u.android||u.cordova||u.capacitor||Ot(p).off("keydown",E),l=!1}))),M(c,{app:t,$el:i,el:i[0],$backdropEl:s,backdropEl:s&&s[0],type:"dialog",setProgress:function(e,r){return t.progressbar.set(i.find(".progressbar"),e,r),c},setText:function(e){var t=i.find(".dialog-text");return 0===t.length&&(t=Ot('<div class="dialog-text"></div>'),void 0!==d?t.insertAfter(i.find(".dialog-title")):i.find(".dialog-inner").prepend(t)),t.html(e),c.params.text=e,c},setTitle:function(e){var t=i.find(".dialog-title");return 0===t.length&&(t=Ot('<div class="dialog-title"></div>'),i.find(".dialog-inner").prepend(t)),t.html(e),c.params.title=e,c}}),c.on("opened",(function(){c.params.closeByBackdropClick&&t.on("click",C)})),c.on("close",(function(){c.params.closeByBackdropClick&&t.off("click",C)})),i[0].f7Modal=c,c.params.destroyOnClose&&c.once("closed",(function(){setTimeout((function(){c.destroy()}),0)})),c||Un(n)}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,qn(t,r),n}(un);function Gn(){return(Gn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Wn={name:"dialog",params:{dialog:{title:void 0,buttonOk:"OK",buttonCancel:"Cancel",usernamePlaceholder:"Username",passwordPlaceholder:"Password",preloaderTitle:"Loading... ",progressTitle:"Loading... ",backdrop:!0,closeByBackdropClick:!1,destroyPredefinedDialogs:!0,keyboardActions:!0,autoFocus:!0}},static:{Dialog:Hn},create:function(){var e=this;function t(){return e.params.dialog.title||e.name}var r=e.params.dialog.destroyPredefinedDialogs,n=e.params.dialog.keyboardActions,a=e.params.dialog.autoFocus?{on:{opened:function(e){e.$el.find("input").eq(0).focus()}}}:{};e.dialog=M($t({app:e,constructor:Hn,defaultSelector:".dialog.modal-in"}),{alert:function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];var s=i[0],l=i[1],c=i[2];return 2===i.length&&"function"==typeof i[1]&&(s=i[0],c=i[1],l=i[2]),new Hn(e,{title:void 0===l?t():l,text:s,buttons:[{text:e.params.dialog.buttonOk,bold:!0,onClick:c,keyCodes:n?[13,27]:null}],destroyOnClose:r}).open()},prompt:function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];var l=o[0],c=o[1],u=o[2],p=o[3],d=o[4];return"function"==typeof o[1]&&(l=o[0],u=o[1],p=o[2],d=o[3],c=o[4]),d=null==d?"":d,new Hn(e,Gn({title:void 0===c?t():c,text:l,content:'<div class="dialog-input-field input"><input type="text" class="dialog-input" value="'+d+'"></div>',buttons:[{text:e.params.dialog.buttonCancel,keyCodes:n?[27]:null,color:"aurora"===e.theme?"gray":null},{text:e.params.dialog.buttonOk,bold:!0,keyCodes:n?[13]:null}],onClick:function(e,t){var r=e.$el.find(".dialog-input").val();0===t&&p&&p(r),1===t&&u&&u(r)},destroyOnClose:r},a)).open()},confirm:function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];var s=i[0],l=i[1],c=i[2],u=i[3];return"function"==typeof i[1]&&(s=i[0],c=i[1],u=i[2],l=i[3]),new Hn(e,{title:void 0===l?t():l,text:s,buttons:[{text:e.params.dialog.buttonCancel,onClick:u,keyCodes:n?[27]:null,color:"aurora"===e.theme?"gray":null},{text:e.params.dialog.buttonOk,bold:!0,onClick:c,keyCodes:n?[13]:null}],destroyOnClose:r}).open()},login:function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];var l=o[0],c=o[1],u=o[2],p=o[3];return"function"==typeof o[1]&&(l=o[0],u=o[1],p=o[2],c=o[3]),new Hn(e,Gn({title:void 0===c?t():c,text:l,content:'\n              <div class="dialog-input-field dialog-input-double input">\n                <input type="text" name="dialog-username" placeholder="'+e.params.dialog.usernamePlaceholder+'" class="dialog-input">\n              </div>\n              <div class="dialog-input-field dialog-input-double input">\n                <input type="password" name="dialog-password" placeholder="'+e.params.dialog.passwordPlaceholder+'" class="dialog-input">\n              </div>',buttons:[{text:e.params.dialog.buttonCancel,keyCodes:n?[27]:null,color:"aurora"===e.theme?"gray":null},{text:e.params.dialog.buttonOk,bold:!0,keyCodes:n?[13]:null}],onClick:function(e,t){var r=e.$el.find('[name="dialog-username"]').val(),n=e.$el.find('[name="dialog-password"]').val();0===t&&p&&p(r,n),1===t&&u&&u(r,n)},destroyOnClose:r},a)).open()},password:function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];var l=o[0],c=o[1],u=o[2],p=o[3];return"function"==typeof o[1]&&(l=o[0],u=o[1],p=o[2],c=o[3]),new Hn(e,Gn({title:void 0===c?t():c,text:l,content:'\n              <div class="dialog-input-field input">\n                <input type="password" name="dialog-password" placeholder="'+e.params.dialog.passwordPlaceholder+'" class="dialog-input">\n              </div>',buttons:[{text:e.params.dialog.buttonCancel,keyCodes:n?[27]:null,color:"aurora"===e.theme?"gray":null},{text:e.params.dialog.buttonOk,bold:!0,keyCodes:n?[13]:null}],onClick:function(e,t){var r=e.$el.find('[name="dialog-password"]').val();0===t&&p&&p(r),1===t&&u&&u(r)},destroyOnClose:r},a)).open()},preloader:function(t,n){var a={iosPreloaderContent:m,mdPreloaderContent:f,auroraPreloaderContent:g}[e.theme+"PreloaderContent"]||"";return new Hn(e,{title:null==t?e.params.dialog.preloaderTitle:t,content:'<div class="preloader'+(n?" color-"+n:"")+'">'+a+"</div>",cssClass:"dialog-preloader",destroyOnClose:r}).open()},progress:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var i=n[0],o=n[1],s=n[2];2===n.length?"number"==typeof n[0]?(o=n[0],s=n[1],i=n[2]):"string"==typeof n[0]&&"string"==typeof n[1]&&(i=n[0],s=n[1],o=n[2]):1===n.length&&"number"==typeof n[0]&&(o=n[0],i=n[1],s=n[2]);var l=void 0===o,c=new Hn(e,{title:void 0===i?e.params.dialog.progressTitle:i,cssClass:"dialog-progress",content:'\n              <div class="progressbar'+(l?"-infinite":"")+(s?" color-"+s:"")+'">\n                '+(l?"":"<span></span>")+"\n              </div>\n            ",destroyOnClose:r});return l||c.setProgress(o),c.open()}})}};function Xn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zn(e,t){return(Zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Yn=function(e){var t,r;function n(t,r){var n,a,i,s,c,u=M({on:{}},t.params.popup,r),p=Xn(n=e.call(this,t,u)||this),d=l(),h=o(),f=F(),m=N();if(p.params=u,(a=p.params.el?Ot(p.params.el).eq(0):Ot(p.params.content).filter((function(e){return 1===e.nodeType})).eq(0))&&a.length>0&&a[0].f7Modal)return a[0].f7Modal||Xn(n);if(0===a.length)return p.destroy()||Xn(n);function g(e){var t=e.target,r=Ot(t);if(!(!m.desktop&&m.cordova&&(d.Keyboard&&d.Keyboard.isVisible||d.cordova.plugins&&d.cordova.plugins.Keyboard&&d.cordova.plugins.Keyboard.isVisible))&&0===r.closest(p.el).length&&p.params&&p.params.closeByBackdropClick&&p.params.backdrop&&p.backdropEl&&p.backdropEl===t){var n=!0;p.$el.nextAll(".popup.modal-in").each((function(e){var t=e.f7Modal;t&&t.params.closeByBackdropClick&&t.params.backdrop&&t.backdropEl===p.backdropEl&&(n=!1)})),n&&p.close()}}function v(e){27===e.keyCode&&p.params.closeOnEscape&&p.close()}function y(e){return(t.height-2*e)/t.height}p.params.backdrop&&p.params.backdropEl?i=Ot(p.params.backdropEl):p.params.backdrop&&0===(i=p.$containerEl.children(".popup-backdrop")).length&&(i=Ot('<div class="popup-backdrop"></div>'),p.$containerEl.append(i)),M(p,{app:t,push:a.hasClass("popup-push")||p.params.push,$el:a,el:a[0],$backdropEl:i,backdropEl:i&&i[0],type:"popup",$htmlEl:Ot("html")}),p.params.push&&a.addClass("popup-push");var b,_,w,C,k,T,S,P,I,A,O,z=!0,R=!1,L=!1;function D(e){!R&&z&&p.params.swipeToClose&&(p.params.swipeHandler&&0===Ot(e.target).closest(p.params.swipeHandler).length||(R=!0,L=!1,b={x:"touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,y:"touchstart"===e.type?e.targetTouches[0].pageY:e.pageY},C=E(),w=void 0,p.params.swipeHandler||"touchstart"!==e.type||(T=Ot(e.target).closest(".page-content")[0])))}function B(e){if(R){if(_={x:"touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,y:"touchmove"===e.type?e.targetTouches[0].pageY:e.pageY},void 0===w&&(w=!!(w||Math.abs(_.x-b.x)>Math.abs(_.y-b.y))),w)return R=!1,void(L=!1);k=b.y-_.y,c&&s&&k>0&&(k=0);var r=k<0?"to-bottom":"to-top";if(a.transition(0),"string"==typeof p.params.swipeToClose&&r!==p.params.swipeToClose)return a.transform(""),void a.transition("");if(L)p.emit("local::swipeMove popupSwipeMove",p),p.$el.trigger("popup:swipemove");else{if(c&&s&&(A=a[0].offsetHeight,0===(O=a.prevAll(".popup.modal-in").eq(0)).length&&(O=t.$el.children(".view, .views"))),T&&(S=T.scrollTop,I=T.scrollHeight,P=T.offsetHeight,!(I===P||"to-bottom"===r&&0===S||"to-top"===r&&S===I-P)))return a.transform(""),a.transition(""),R=!1,void(L=!1);L=!0,p.emit("local::swipeStart popupSwipeStart",p),p.$el.trigger("popup:swipestart")}if(e.preventDefault(),c&&s){var n=1-Math.abs(k/A),i=1-(1-y(s))*n;O.hasClass("popup")?O.hasClass("popup-push")?O.transition(0).forEach((function(e){e.style.setProperty("transform","translate3d(0, calc(-1 * "+n+" * (var(--f7-popup-push-offset) + 10px)) , 0px) scale("+i+")","important")})):O.transition(0).forEach((function(e){e.style.setProperty("transform","translate3d(0, 0px , 0px) scale("+i+")","important")})):O.transition(0).forEach((function(e){e.style.setProperty("transform","translate3d(0,0,0) scale("+i+")","important")}))}a.transition(0).transform("translate3d(0,"+-k+"px,0)")}}function $(){if(R=!1,L){p.emit("local::swipeEnd popupSwipeEnd",p),p.$el.trigger("popup:swipeend"),L=!1,z=!1,a.transition(""),c&&s&&O.transition("").transform("");var e=k<=0?"to-bottom":"to-top";if("string"==typeof p.params.swipeToClose&&e!==p.params.swipeToClose)return a.transform(""),void(z=!0);var t=Math.abs(k),r=(new Date).getTime()-C;r<300&&t>20||r>=300&&t>100?x((function(){"to-bottom"===e?a.addClass("swipe-close-to-bottom"):a.addClass("swipe-close-to-top"),a.transform(""),p.emit("local::swipeclose popupSwipeClose",p),p.$el.trigger("popup:swipeclose"),p.close(),z=!0})):(z=!0,a.transform(""))}}var V,j=!!f.passiveListener&&{passive:!0};p.params.swipeToClose&&(a.on(t.touchEvents.start,D,j),t.on("touchmove",B),t.on("touchend:passive",$),p.once("popupDestroy",(function(){a.off(t.touchEvents.start,D,j),t.off("touchmove",B),t.off("touchend:passive",$)})));var U=function(){var e=c;p.push&&(c=p.push&&(t.width<630||t.height<630||a.hasClass("popup-tablet-fullscreen"))),c&&!e?q():c&&e?p.$htmlEl[0].style.setProperty("--f7-popup-push-scale",y(s)):!c&&e&&(p.$htmlEl.removeClass("with-modal-popup-push"),p.$htmlEl[0].style.removeProperty("--f7-popup-push-scale"))},q=function(){t.off("resize",U),p.push&&(c=p.push&&(t.width<630||t.height<630||a.hasClass("popup-tablet-fullscreen"))),c&&(s=parseInt(a.css("--f7-popup-push-offset"),10),Number.isNaN(s)&&(s=0),s&&(a.addClass("popup-push"),p.$htmlEl.addClass("with-modal-popup-push"),p.$htmlEl[0].style.setProperty("--f7-popup-push-scale",y(s)))),t.on("resize",U)};return p.on("open",(function(){V=!1,p.params.closeOnEscape&&Ot(h).on("keydown",v),a.prevAll(".popup.modal-in").addClass("popup-behind"),q()})),p.on("opened",(function(){a.removeClass("swipe-close-to-bottom swipe-close-to-top"),p.params.closeByBackdropClick&&t.on("click",g)})),p.on("close",(function(){V=p.$el.prevAll(".popup-push.modal-in").length>0,p.params.closeOnEscape&&Ot(h).off("keydown",v),p.params.closeByBackdropClick&&t.off("click",g),a.prevAll(".popup.modal-in").eq(0).removeClass("popup-behind"),c&&s&&!V&&(p.$htmlEl.removeClass("with-modal-popup-push"),p.$htmlEl.addClass("with-modal-popup-push-closing")),t.off("resize",U)})),p.on("closed",(function(){a.removeClass("popup-behind"),c&&s&&!V&&(p.$htmlEl.removeClass("with-modal-popup-push-closing"),p.$htmlEl[0].style.removeProperty("--f7-popup-push-scale"))})),a[0].f7Modal=p,p||Xn(n)}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,Zn(t,r),n}(un),Kn={name:"popup",params:{popup:{backdrop:!0,backdropEl:void 0,closeByBackdropClick:!0,closeOnEscape:!1,swipeToClose:!1,swipeHandler:null,push:!1,containerEl:null}},static:{Popup:Yn},create:function(){this.popup=$t({app:this,constructor:Yn,defaultSelector:".popup.modal-in",parentSelector:".popup"})},clicks:{".popup-open":function(e,t){void 0===t&&(t={});this.popup.open(t.popup,t.animate,e)},".popup-close":function(e,t){void 0===t&&(t={});this.popup.close(t.popup,t.animate,e)}}};function Qn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jn(e,t){return(Jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ea=function(e){var t,r;function n(t,r){var n,a,i=M({on:{}},r),o=Qn(n=e.call(this,t,i)||this);return o.params=i,(a=o.params.el?Ot(o.params.el).eq(0):Ot(o.params.content).filter((function(e){return 1===e.nodeType})).eq(0))&&a.length>0&&a[0].f7Modal?a[0].f7Modal||Qn(n):0===a.length?o.destroy()||Qn(n):(M(o,{app:t,$el:a,el:a[0],type:"loginScreen"}),a[0].f7Modal=o,o||Qn(n))}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,Jn(t,r),n}(un),ta={name:"loginScreen",static:{LoginScreen:ea},create:function(){this.loginScreen=$t({app:this,constructor:ea,defaultSelector:".login-screen.modal-in"})},clicks:{".login-screen-open":function(e,t){void 0===t&&(t={});this.loginScreen.open(t.loginScreen,t.animate,e)},".login-screen-close":function(e,t){void 0===t&&(t={});this.loginScreen.close(t.loginScreen,t.animate,e)}}};function ra(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function na(e,t){return(na=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var aa=function(e){var t,r;function n(t,r){var n,a,i=M({on:{}},t.params.popover,r),s=ra(n=e.call(this,t,i)||this),c=N(),u=l(),p=o();if(s.params=i,(a=s.params.el?Ot(s.params.el).eq(0):Ot(s.params.content).filter((function(e){return 1===e.nodeType})).eq(0))&&a.length>0&&a[0].f7Modal)return a[0].f7Modal||ra(n);var d,h,f=Ot(s.params.targetEl).eq(0);if(0===a.length)return s.destroy()||ra(n);s.params.backdrop&&s.params.backdropEl?d=Ot(s.params.backdropEl):s.params.backdrop&&0===(d=s.$containerEl.children(".popover-backdrop")).length&&(d=Ot('<div class="popover-backdrop"></div>'),s.$containerEl.append(d)),0===a.find(".popover-angle").length?(h=Ot('<div class="popover-angle"></div>'),a.prepend(h)):h=a.find(".popover-angle");var m=s.open;function g(){s.resize()}function v(e){var t=e.target,r=Ot(t);!c.desktop&&c.cordova&&(u.Keyboard&&u.Keyboard.isVisible||u.cordova.plugins&&u.cordova.plugins.Keyboard&&u.cordova.plugins.Keyboard.isVisible)||0===r.closest(s.el).length&&(s.params.closeByBackdropClick&&s.params.backdrop&&s.backdropEl&&s.backdropEl===t||s.params.closeByOutsideClick)&&s.close()}function y(e){27===e.keyCode&&s.params.closeOnEscape&&s.close()}return M(s,{app:t,$el:a,el:a[0],$targetEl:f,targetEl:f[0],$angleEl:h,angleEl:h[0],$backdropEl:d,backdropEl:d&&d[0],type:"popover",open:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],a=t[1];return"boolean"==typeof t[0]&&(a=t[0],n=t[1]),n&&(s.$targetEl=Ot(n),s.targetEl=s.$targetEl[0]),m.call(s,a)}}),s.on("popoverOpen",(function(){s.resize(),t.on("resize",g),Ot(u).on("keyboardDidShow keyboardDidHide",g),s.on("popoverClose popoverBeforeDestroy",(function(){t.off("resize",g),Ot(u).off("keyboardDidShow keyboardDidHide",g)}))})),s.params.closeOnEscape&&(s.on("popoverOpen",(function(){Ot(p).on("keydown",y)})),s.on("popoverClose",(function(){Ot(p).off("keydown",y)}))),s.on("popoverOpened",(function(){(s.params.closeByOutsideClick||s.params.closeByBackdropClick)&&t.on("click",v)})),s.on("popoverClose",(function(){(s.params.closeByOutsideClick||s.params.closeByBackdropClick)&&t.off("click",v)})),a[0].f7Modal=s,s||ra(n)}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,na(t,r),n.prototype.resize=function(){var e=this,t=e.app,r=e.$el,n=e.$targetEl,a=e.$angleEl,i=e.params,o=i.targetX,s=i.targetY;r.css({left:"",top:""});var l,c,u,p,d,h,f=[r.width(),r.height()],m=f[0],g=f[1],v=0;"ios"===t.theme||"aurora"===t.theme?(a.removeClass("on-left on-right on-top on-bottom").css({left:"",top:""}),v=a.width()/2):r.removeClass("popover-on-left popover-on-right popover-on-top popover-on-bottom popover-on-middle").css({left:"",top:""});var y=parseInt(Ot("html").css("--f7-safe-area-top"),10),b=parseInt(Ot("html").css("--f7-safe-area-left"),10),_=parseInt(Ot("html").css("--f7-safe-area-right"),10);if(Number.isNaN(y)&&(y=0),Number.isNaN(b)&&(b=0),Number.isNaN(_)&&(_=0),n&&n.length>0){u=n.outerWidth(),p=n.outerHeight();var x=n.offset();d=x.left-t.left,h=x.top-t.top;var w=n.parents(".page");w.length>0&&(h-=w[0].scrollTop)}else void 0!==o&&"undefined"!==s&&(d=o,h=s,u=e.params.targetWidth||0,p=e.params.targetHeight||0);var E,C=0,k=0,T=0,S="md"===t.theme?"bottom":"top";"md"===t.theme?(g<t.height-h-p?(S="bottom",k=h+p):g<h-y?(k=h-g,S="top"):(S="middle",k=p/2+h-g/2),k=Math.max(8,Math.min(k,t.height-g-8)),d<t.width/2?(E="right",C="middle"===S?d+u:d):(E="left",C="middle"===S?d-m:d+u-m),C=Math.max(8,Math.min(C,t.width-m-8-_),b),r.addClass("popover-on-"+S+" popover-on-"+E)):(g+v<h-y?k=h-g-v:g+v<t.height-h-p?(S="bottom",k=h+p+v):(S="middle",T=k=p/2+h-g/2,T-=k=Math.max(5,Math.min(k,t.height-g-5))),"top"===S||"bottom"===S?(T=C=u/2+d-m/2,C=Math.max(5,Math.min(C,t.width-m-5)),b&&(C=Math.max(C,b)),_&&C+m>t.width-5-_&&(C=t.width-5-_-m),"top"===S&&a.addClass("on-bottom"),"bottom"===S&&a.addClass("on-top"),l=m/2-v+(T-=C),l=Math.max(Math.min(l,m-2*v-13),13),a.css({left:l+"px"})):"middle"===S&&(C=d-m-v,a.addClass("on-right"),(C<5||C+m+_>t.width||C<b)&&(C<5&&(C=d+u+v),C+m+_>t.width&&(C=t.width-m-5-_),C<b&&(C=b),a.removeClass("on-right").addClass("on-left")),c=g/2-v+T,c=Math.max(Math.min(c,g-2*v-13),13),a.css({top:c+"px"})));r.css({top:k+"px",left:C+"px"})},n}(un),ia={name:"popover",params:{popover:{backdrop:!0,backdropEl:void 0,closeByBackdropClick:!0,closeByOutsideClick:!0,closeOnEscape:!1,containerEl:null}},static:{Popover:aa},create:function(){var e=this;e.popover=M($t({app:e,constructor:aa,defaultSelector:".popover.modal-in"}),{open:function(t,r,n){var a=Ot(t);if(a.length>1){var i=Ot(r).parents(".page");i.length&&a.each((function(e){var t=Ot(e);t.parents(i)[0]===i[0]&&(a=t)}))}a.length>1&&(a=a.eq(a.length-1));var o=a[0].f7Modal,s=a.dataset();return o||(o=new aa(e,Object.assign({el:a,targetEl:r},s))),o.open(r,n)}})},clicks:{".popover-open":function(e,t){void 0===t&&(t={});this.popover.open(t.popover,e,t.animate)},".popover-close":function(e,t){void 0===t&&(t={});this.popover.close(t.popover,t.animate,e)}}};function oa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sa(e,t){return(sa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var la=function(e){var t,r;function n(t,r){var n,a,i,s,c=M({on:{}},t.params.actions,r),u=oa(n=e.call(this,t,c)||this),p=N(),d=l(),h=o();if(u.params=c,u.params.buttons&&(a=u.params.buttons,Array.isArray(a[0])||(a=[a])),u.groups=a,u.params.el?i=Ot(u.params.el).eq(0):u.params.content?i=Ot(u.params.content).filter((function(e){return 1===e.nodeType})).eq(0):u.params.buttons&&(u.params.convertToPopover&&(u.popoverHtml=u.renderPopover()),u.actionsHtml=u.render()),i&&i.length>0&&i[0].f7Modal)return i[0].f7Modal||oa(n);if(i&&0===i.length&&!u.actionsHtml&&!u.popoverHtml)return u.destroy()||oa(n);u.params.backdrop&&u.params.backdropEl?s=Ot(u.params.backdropEl):u.params.backdrop&&0===(s=u.$containerEl.children(".actions-backdrop")).length&&(s=Ot('<div class="actions-backdrop"></div>'),u.$containerEl.append(s));var f,m=u.open,g=u.close;function v(e){var t,r,n=Ot(this);if(n.hasClass("list-button")||n.hasClass("item-link")?(t=n.parents("li").index(),r=n.parents(".list").index()):(t=n.index(),r=n.parents(".actions-group").index()),void 0!==a){var i=a[r][t];i.onClick&&i.onClick(u,e),u.params.onClick&&u.params.onClick(u,e),!1!==i.close&&u.close()}}function y(e){var t=e.target,r=Ot(t);!p.desktop&&p.cordova&&(d.Keyboard&&d.Keyboard.isVisible||d.cordova.plugins&&d.cordova.plugins.Keyboard&&d.cordova.plugins.Keyboard.isVisible)||0===r.closest(u.el).length&&(u.params.closeByBackdropClick&&u.params.backdrop&&u.backdropEl&&u.backdropEl===t||u.params.closeByOutsideClick)&&u.close()}function b(e){27===e.keyCode&&u.params.closeOnEscape&&u.close()}return u.open=function(e){var r=!1,n=u.params,a=n.targetEl,i=n.targetX,o=n.targetY,s=n.targetWidth,l=n.targetHeight;return u.params.convertToPopover&&(a||void 0!==i&&void 0!==o)&&(u.params.forceToPopover||p.ios&&p.ipad||t.width>=768||p.desktop&&"aurora"===t.theme)&&(r=!0),r&&u.popoverHtml?((f=t.popover.create({content:u.popoverHtml,backdrop:u.params.backdrop,targetEl:a,targetX:i,targetY:o,targetWidth:s,targetHeight:l,on:{open:function(){u.$el||(u.$el=f.$el),u.$el.trigger("modal:open "+u.type.toLowerCase()+":open"),u.emit("local::open modalOpen "+u.type+"Open",u)},opened:function(){u.$el||(u.$el=f.$el),u.$el.trigger("modal:opened "+u.type.toLowerCase()+":opened"),u.emit("local::opened modalOpened "+u.type+"Opened",u)},close:function(){u.$el||(u.$el=f.$el),u.$el.trigger("modal:close "+u.type.toLowerCase()+":close"),u.emit("local::close modalClose "+u.type+"Close",u)},closed:function(){u.$el||(u.$el=f.$el),u.$el.trigger("modal:closed "+u.type.toLowerCase()+":closed"),u.emit("local::closed modalClosed "+u.type+"Closed",u)}}})).open(e),f.once("popoverOpened",(function(){f.$el.find(".list-button, .item-link").each((function(e){Ot(e).on("click",v)}))})),f.once("popoverClosed",(function(){f.$el.find(".list-button, .item-link").each((function(e){Ot(e).off("click",v)})),x((function(){f.destroy(),f=void 0}))}))):(u.$el=u.actionsHtml?Ot(u.actionsHtml):u.$el,u.$el[0].f7Modal=u,u.groups&&(u.$el.find(".actions-button").each((function(e){Ot(e).on("click",v)})),u.once("actionsClosed",(function(){u.$el.find(".actions-button").each((function(e){Ot(e).off("click",v)}))}))),u.el=u.$el[0],m.call(u,e)),u},u.close=function(e){return f?f.close(e):g.call(u,e),u},M(u,{app:t,$el:i,el:i?i[0]:void 0,$backdropEl:s,backdropEl:s&&s[0],type:"actions"}),u.params.closeOnEscape&&(u.on("open",(function(){Ot(h).on("keydown",b)})),u.on("close",(function(){Ot(h).off("keydown",b)}))),u.on("opened",(function(){(u.params.closeByBackdropClick||u.params.closeByOutsideClick)&&t.on("click",y)})),u.on("close",(function(){(u.params.closeByBackdropClick||u.params.closeByOutsideClick)&&t.off("click",y)})),i&&(i[0].f7Modal=u),u||oa(n)}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,sa(t,r);var a=n.prototype;return a.render=function(){var e=this;if(e.params.render)return e.params.render.call(e,e);var t=e.groups,r=e.params.cssClass;return jn("div",{class:"actions-modal"+(e.params.grid?" actions-grid":"")+" "+(r||"")},t.map((function(e){return jn("div",{class:"actions-group"},e.map((function(e){var t=["actions-"+(e.label?"label":"button")],r=e.color,n=e.bg,a=e.bold,i=e.disabled,o=e.label,s=e.text,l=e.icon;return r&&t.push("color-"+r),n&&t.push("bg-color-"+n),a&&t.push("actions-button-bold"),i&&t.push("disabled"),o?jn("div",{class:t.join(" ")},s):jn("div",{class:t.join(" ")},l&&jn("div",{class:"actions-button-media"},l),jn("div",{class:"actions-button-text"},s))})))})))},a.renderPopover=function(){var e=this;if(e.params.renderPopover)return e.params.renderPopover.call(e,e);var t=e.groups,r=e.params.cssClass;return jn("div",{class:"popover popover-from-actions "+(r||"")},jn("div",{class:"popover-inner"},t.map((function(e){return jn("div",{class:"list"},jn("ul",null,e.map((function(e){var t=[],r=e.color,n=e.bg,a=e.bold,i=e.disabled,o=e.label,s=e.text,l=e.icon;return r&&t.push("color-"+r),n&&t.push("bg-color-"+n),a&&t.push("popover-from-actions-bold"),i&&t.push("disabled"),o?(t.push("popover-from-actions-label"),'<li class="'+t.join(" ")+'">'+s+"</li>"):l?(t.push("item-link item-content"),jn("li",null,jn("a",{class:t.join(" ")},jn("div",{class:"item-media"},l),jn("div",{class:"item-inner"},jn("div",{class:"item-title"},s))))):(t.push("list-button"),jn("li",null,jn("a",{class:t.join(" ")},s)))}))))}))))},n}(un),ca={name:"actions",params:{actions:{convertToPopover:!0,forceToPopover:!1,backdrop:!0,backdropEl:void 0,cssClass:null,closeByBackdropClick:!0,closeOnEscape:!1,render:null,renderPopover:null,containerEl:null}},static:{Actions:la},create:function(){this.actions=$t({app:this,constructor:la,defaultSelector:".actions-modal.modal-in"})},clicks:{".actions-open":function(e,t){void 0===t&&(t={});this.actions.open(t.actions,t.animate,e)},".actions-close":function(e,t){void 0===t&&(t={});this.actions.close(t.actions,t.animate,e)}}};function ua(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pa(e,t){return(pa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var da=function(e){var t,r;function n(t,r){var n,a,i,s,c,u=M({on:{}},t.params.sheet,r),p=ua(n=e.call(this,t,u)||this),d=l(),h=o(),f=F(),m=N();if(p.params=u,void 0===p.params.backdrop&&(p.params.backdrop="ios"!==t.theme),(a=p.params.el?Ot(p.params.el).eq(0):Ot(p.params.content).filter((function(e){return 1===e.nodeType})).eq(0))&&a.length>0&&a[0].f7Modal)return a[0].f7Modal||ua(n);if(0===a.length)return p.destroy()||ua(n);function g(e){var t=e.target,r=Ot(t);!m.desktop&&m.cordova&&(d.Keyboard&&d.Keyboard.isVisible||d.cordova.plugins&&d.cordova.plugins.Keyboard&&d.cordova.plugins.Keyboard.isVisible)||0===r.closest(p.el).length&&(p.params.closeByBackdropClick&&p.params.backdrop&&p.backdropEl&&p.backdropEl===t||p.params.closeByOutsideClick)&&p.close()}function v(e){27===e.keyCode&&p.params.closeOnEscape&&p.close()}function y(e){return(t.height-2*e)/t.height}p.params.backdrop&&p.params.backdropEl?i=Ot(p.params.backdropEl):p.params.backdrop&&0===(i=p.$containerEl.children(".sheet-backdrop")).length&&(i=Ot('<div class="sheet-backdrop"></div>'),p.$containerEl.append(i)),M(p,{app:t,push:a.hasClass("sheet-modal-push")||p.params.push,$el:a,el:a[0],$backdropEl:i,backdropEl:i&&i[0],type:"sheet",$htmlEl:Ot("html")}),p.params.push&&a.addClass("sheet-modal-push");var b,_,x,w,C,T,S,P,I,A,O,z,R,L,D,B,$,V,j=!1,U=!1;function q(e){j||!p.params.swipeToClose&&!p.params.swipeToStep||p.params.swipeHandler&&0===Ot(e.target).closest(p.params.swipeHandler).length||(j=!0,U=!1,b={x:"touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,y:"touchstart"===e.type?e.targetTouches[0].pageY:e.pageY},w=E(),x=void 0,T=a.hasClass("sheet-modal-top"),p.params.swipeHandler||"touchstart"!==e.type||(D=Ot(e.target).closest(".page-content")[0]))}function H(e){if(j){if(_={x:"touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,y:"touchmove"===e.type?e.targetTouches[0].pageY:e.pageY},void 0===x&&(x=!!(x||Math.abs(_.x-b.x)>Math.abs(_.y-b.y))),x)return j=!1,void(U=!1);var r,n=(C=b.y-_.y)<0?"to-bottom":"to-top";if(!U){if(D&&!a.hasClass("modal-in-swipe-step")&&(B=D.scrollTop,$=D.scrollHeight,V=D.offsetHeight,!($===V||"to-bottom"===n&&0===B||"to-top"===n&&B===$-V)))return a.transform(""),j=!1,void(U=!1);p.push&&c&&(R=t.$el.children(".view, .views")),A=a[0].offsetHeight,P=k(a[0],"y"),T?(O=p.params.swipeToClose?-A:-S,z=0):(O=0,z=p.params.swipeToClose?A:S),U=!0}if(I=P-C,I=Math.min(Math.max(I,O),z),e.preventDefault(),p.push&&c){var i=(I-P)/A;p.params.swipeToStep&&(i=T?I/S:1-(S-I)/S),i=Math.abs(i);var o=1-(i=Math.min(Math.max(i,0),1)),s=1-(1-y(c))*o;R.transition(0).forEach((function(e){e.style.setProperty("transform","translate3d(0,0,0) scale("+s+")","important")})),p.params.swipeToStep&&R.css("border-radius",L*o+"px")}if(a.transition(0).transform("translate3d(0,"+I+"px,0)"),p.params.swipeToStep)r=T?1-I/S:(S-I)/S,r=Math.min(Math.max(r,0),1),a.trigger("sheet:stepprogress",r),p.emit("local::stepProgress sheetStepProgress",p,r)}}function G(){if(j=!1,U){U=!1,a.transform("").transition(""),p.push&&c&&(R.transition("").transform(""),R.css("border-radius",""));var e=C<0?"to-bottom":"to-top",t=Math.abs(C);if(0!==t&&I!==P){var r=(new Date).getTime()-w;if(p.params.swipeToStep){var n=T?"to-bottom":"to-top",i=T?"to-top":"to-bottom",o=Math.abs(I),s=Math.abs(S);if(r<300&&t>10)return e===n&&o<s&&(a.removeClass("modal-in-swipe-step"),a.trigger("sheet:stepprogress",1),p.emit("local::stepProgress sheetStepProgress",p,1),a.trigger("sheet:stepopen"),p.emit("local::stepOpen sheetStepOpen",p),p.push&&c&&(p.$htmlEl[0].style.setProperty("--f7-sheet-push-scale",y(c)),R.css("border-radius",""))),e===i&&o>s&&(p.params.swipeToClose?p.close():(a.addClass("modal-in-swipe-step"),a.trigger("sheet:stepprogress",0),p.emit("local::stepProgress sheetStepProgress",p,0),a.trigger("sheet:stepclose"),p.emit("local::stepClose sheetStepClose",p),p.push&&c&&(p.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale"),R.css("border-radius","0px")))),void(e===i&&o<=s&&(a.addClass("modal-in-swipe-step"),a.trigger("sheet:stepprogress",0),p.emit("local::stepProgress sheetStepProgress",p,0),a.trigger("sheet:stepclose"),p.emit("local::stepClose sheetStepClose",p),p.push&&c&&(p.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale"),R.css("border-radius","0px"))));if(r>=300){var l=!a.hasClass("modal-in-swipe-step");l?l&&(o>s+(A-s)/2?p.params.swipeToClose&&p.close():o>s/2&&(a.addClass("modal-in-swipe-step"),a.trigger("sheet:stepprogress",0),p.emit("local::stepProgress sheetStepProgress",p,0),a.trigger("sheet:stepclose"),p.emit("local::stepClose sheetStepClose",p),p.push&&c&&(p.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale"),R.css("border-radius","0px")))):o<s/2?(a.removeClass("modal-in-swipe-step"),a.trigger("sheet:stepprogress",1),p.emit("local::stepProgress sheetStepProgress",p,1),a.trigger("sheet:stepopen"),p.emit("local::stepOpen sheetStepOpen",p),p.push&&c&&(p.$htmlEl[0].style.setProperty("--f7-sheet-push-scale",y(c)),R.css("border-radius",""))):o-s>(A-s)/2&&p.params.swipeToClose&&p.close()}}else{if(e!==(T?"to-top":"to-bottom"))return;(r<300&&t>20||r>=300&&t>A/2)&&p.close()}}}}function W(){p.setSwipeStep(!0)}p.setSwipeStep=function(e){void 0===e&&(e=!0);var t=a.find(".sheet-modal-swipe-step").eq(0);t.length&&(S=a.hasClass("sheet-modal-top")?-(t.offset().top-a.offset().top+t[0].offsetHeight):a[0].offsetHeight-(t.offset().top-a.offset().top+t[0].offsetHeight),a[0].style.setProperty("--f7-sheet-swipe-step",S+"px"),e||a.addClass("modal-in-swipe-step"))};var X=!!f.passiveListener&&{passive:!0};return(p.params.swipeToClose||p.params.swipeToStep)&&(a.on(t.touchEvents.start,q,X),t.on("touchmove",H),t.on("touchend:passive",G),p.once("sheetDestroy",(function(){a.off(t.touchEvents.start,q,X),t.off("touchmove",H),t.off("touchend:passive",G)}))),p.on("open",(function(){p.params.closeOnEscape&&Ot(h).on("keydown",v),a.prevAll(".popup.modal-in").addClass("popup-behind"),p.params.swipeToStep&&(p.setSwipeStep(!1),t.on("resize",W)),p.params.scrollToEl&&function(){var e=Ot(p.params.scrollToEl).eq(0);if(0!==e.length&&0!==(s=e.parents(".page-content")).length){var t,r=parseInt(s.css("padding-top"),10),n=parseInt(s.css("padding-bottom"),10),i=s[0].offsetHeight-r-a.height(),o=s[0].scrollHeight-r-a.height(),l=s.scrollTop(),c=e.offset().top-r+e[0].offsetHeight;if(c>i){var u=l+c-i;u+i>o&&(t=u+i-o+n,i===o&&(t=a.height()),s.css({"padding-bottom":t+"px"})),s.scrollTop(u,300)}}}(),p.push&&(c=parseInt(a.css("--f7-sheet-push-offset"),10),Number.isNaN(c)&&(c=0),c&&(a.addClass("sheet-modal-push"),p.$htmlEl.addClass("with-modal-sheet-push"),p.params.swipeToStep?(R=t.$el.children(".view, .views"),L=parseFloat(a.css("border-"+(T?"bottom":"top")+"-left-radius")),R.css("border-radius","0px")):p.$htmlEl[0].style.setProperty("--f7-sheet-push-scale",y(c))))})),p.on("opened",(function(){(p.params.closeByOutsideClick||p.params.closeByBackdropClick)&&t.on("click",g)})),p.on("close",(function(){p.params.swipeToStep&&(a.removeClass("modal-in-swipe-step"),t.off("resize",W)),p.params.closeOnEscape&&Ot(h).off("keydown",v),p.params.scrollToEl&&s&&s.length>0&&s.css({"padding-bottom":""}),(p.params.closeByOutsideClick||p.params.closeByBackdropClick)&&t.off("click",g),a.prevAll(".popup.modal-in").eq(0).removeClass("popup-behind"),p.push&&c&&(p.$htmlEl.removeClass("with-modal-sheet-push"),p.$htmlEl.addClass("with-modal-sheet-push-closing"))})),p.on("closed",(function(){p.push&&c&&(p.$htmlEl.removeClass("with-modal-sheet-push-closing"),p.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale"))})),p.stepOpen=function(){a.removeClass("modal-in-swipe-step"),p.push&&(c||(c=parseInt(a.css("--f7-sheet-push-offset"),10),Number.isNaN(c)&&(c=0)),c&&p.$htmlEl[0].style.setProperty("--f7-sheet-push-scale",y(c)))},p.stepClose=function(){a.addClass("modal-in-swipe-step"),p.push&&p.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale")},p.stepToggle=function(){a.toggleClass("modal-in-swipe-step")},a[0].f7Modal=p,p||ua(n)}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,pa(t,r),n}(un),ha={name:"sheet",params:{sheet:{push:!1,backdrop:void 0,backdropEl:void 0,closeByBackdropClick:!0,closeByOutsideClick:!1,closeOnEscape:!1,swipeToClose:!1,swipeToStep:!1,swipeHandler:null,containerEl:null}},static:{Sheet:da},create:function(){var e=this;e.sheet=M({},$t({app:e,constructor:da,defaultSelector:".sheet-modal.modal-in"}),{stepOpen:function(t){var r=e.sheet.get(t);if(r&&r.stepOpen)return r.stepOpen()},stepClose:function(t){var r=e.sheet.get(t);if(r&&r.stepClose)return r.stepClose()},stepToggle:function(t){var r=e.sheet.get(t);if(r&&r.stepToggle)return r.stepToggle()}})},clicks:{".sheet-open":function(e,t){void 0===t&&(t={});Ot(".sheet-modal.modal-in").length>0&&t.sheet&&Ot(t.sheet)[0]!==Ot(".sheet-modal.modal-in")[0]&&this.sheet.close(".sheet-modal.modal-in"),this.sheet.open(t.sheet,t.animate,e)},".sheet-close":function(e,t){void 0===t&&(t={});this.sheet.close(t.sheet,t.animate,e)}}};function fa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ma(e,t){return(ma=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ga=function(e){var t,r;function n(t,r){var n,a=M({on:{}},t.params.toast,r),i=fa(n=e.call(this,t,a)||this),o=l();i.app=t,i.params=a;var s,c,u=i.params,p=u.closeButton,d=u.closeTimeout;if(i.params.el)s=Ot(i.params.el);else{var h=i.render();s=Ot(h)}return s&&s.length>0&&s[0].f7Modal?s[0].f7Modal||fa(n):0===s.length?i.destroy()||fa(n):(M(i,{$el:s,el:s[0],type:"toast"}),s[0].f7Modal=i,p&&(s.find(".toast-button").on("click",(function(){i.emit("local::closeButtonClick toastCloseButtonClick",i),i.close()})),i.on("beforeDestroy",(function(){s.find(".toast-button").off("click")}))),i.on("open",(function(){Ot(".toast.modal-in").each((function(e){var r=t.toast.get(e);e!==i.el&&r&&r.close()})),d&&(c=x((function(){i.close()}),d))})),i.on("close",(function(){o.clearTimeout(c)})),i.params.destroyOnClose&&i.once("closed",(function(){setTimeout((function(){i.destroy()}),0)})),i||fa(n))}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,ma(t,r),n.prototype.render=function(){var e=this;if(e.params.render)return e.params.render.call(e,e);var t=e.params,r=t.position,n=t.horizontalPosition,a=t.cssClass,i=t.icon,o=t.text,s=t.closeButton,l=t.closeButtonColor,c=t.closeButtonText;return jn("div",{class:"toast toast-"+r+" "+("top"===r||"bottom"===r?"toast-horizontal-"+n:"")+" "+(a||"")+" "+(i?"toast-with-icon":"")},jn("div",{class:"toast-content"},i&&jn("div",{class:"toast-icon"},i),jn("div",{class:"toast-text"},o),s&&!i&&jn("a",{class:"toast-button button "+(l?"color-"+l:"")},c)))},n}(un),va={name:"toast",static:{Toast:ga},create:function(){var e=this;e.toast=M({},$t({app:e,constructor:ga,defaultSelector:".toast.modal-in"}),{show:function(t){return M(t,{destroyOnClose:!0}),new ga(e,t).open()}})},params:{toast:{icon:null,text:null,position:"bottom",horizontalPosition:"left",closeButton:!1,closeButtonColor:null,closeButtonText:"Ok",closeTimeout:null,cssClass:null,render:null,containerEl:null}}},ya={init:function(e){var t={iosPreloaderContent:m,mdPreloaderContent:f,auroraPreloaderContent:g},r=Ot(e);0===r.length||r.children(".preloader-inner").length>0||r.children(".preloader-inner-line").length>0||r.append(t[this.theme+"PreloaderContent"])},visible:!1,show:function(e){void 0===e&&(e="white");if(!ya.visible){var t={iosPreloaderContent:m,mdPreloaderContent:f,auroraPreloaderContent:g}[this.theme+"PreloaderContent"]||"";Ot("html").addClass("with-modal-preloader"),this.$el.append('\n      <div class="preloader-backdrop"></div>\n      <div class="preloader-modal">\n        <div class="preloader color-'+e+'">'+t+"</div>\n      </div>\n    "),ya.visible=!0}},showIn:function(e,t){void 0===t&&(t="white");var r={iosPreloaderContent:m,mdPreloaderContent:f,auroraPreloaderContent:g}[this.theme+"PreloaderContent"]||"";Ot(e||"html").addClass("with-modal-preloader"),Ot(e||this.$el).append('\n      <div class="preloader-backdrop"></div>\n      <div class="preloader-modal">\n        <div class="preloader color-'+t+'">'+r+"</div>\n      </div>\n    ")},hide:function(){ya.visible&&(Ot("html").removeClass("with-modal-preloader"),this.$el.find(".preloader-backdrop, .preloader-modal").remove(),ya.visible=!1)},hideIn:function(e){Ot(e||"html").removeClass("with-modal-preloader"),Ot(e||this.$el).find(".preloader-backdrop, .preloader-modal").remove()}},ba={name:"preloader",create:function(){B(this,{preloader:ya})},on:{photoBrowserOpen:function(e){var t=this;e.$el.find(".preloader").each((function(e){t.preloader.init(e)}))},tabMounted:function(e){var t=this;Ot(e).find(".preloader").each((function(e){t.preloader.init(e)}))},pageInit:function(e){var t=this;e.$el.find(".preloader").each((function(e){t.preloader.init(e)}))}},vnode:{preloader:{insert:function(e){var t=e.elm;this.preloader.init(t)}}}},_a={set:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2];if("number"==typeof r[0]&&(i=r[0],o=r[1],a=e.$el),null==i)return a;i||(i=0);var s=Ot(a||e.$el);if(0===s.length)return a;var l,c=Math.min(Math.max(i,0),100);if(0===(l=s.hasClass("progressbar")?s.eq(0):s.children(".progressbar")).length||l.hasClass("progressbar-infinite"))return l;var u=l.children("span");return 0===u.length&&(u=Ot("<span></span>"),l.append(u)),u.transition(void 0!==o?o:"").transform("translate3d("+(-100+c)+"%,0,0)"),l[0]},show:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],s="determined";2===r.length?"string"!=typeof r[0]&&"object"!=typeof r[0]||"string"!=typeof r[1]?"number"==typeof r[0]&&"string"==typeof r[1]&&(i=r[0],o=r[1],a=e.$el):(a=r[0],o=r[1],i=r[2],s="infinite"):1===r.length?"number"==typeof r[0]?(a=e.$el,i=r[0]):"string"==typeof r[0]&&(s="infinite",a=e.$el,o=r[0]):0===r.length&&(s="infinite",a=e.$el);var l,c=Ot(a);if(0!==c.length)return c.hasClass("progressbar")||c.hasClass("progressbar-infinite")?l=c:0===(l=c.children(".progressbar:not(.progressbar-out), .progressbar-infinite:not(.progressbar-out)")).length&&(l=Ot('\n          <span class="progressbar'+("infinite"===s?"-infinite":"")+(o?" color-"+o:"")+' progressbar-in">\n            '+("infinite"===s?"":"<span></span>")+"\n          </span>"),c.append(l)),void 0!==i&&e.progressbar.set(l,i),l[0]},hide:function(e,t){void 0===t&&(t=!0);var r,n=Ot(e||this.$el);if(0!==n.length)return 0===(r=n.hasClass("progressbar")||n.hasClass("progressbar-infinite")?n:n.children(".progressbar, .progressbar-infinite")).length||!r.hasClass("progressbar-in")||r.hasClass("progressbar-out")||r.removeClass("progressbar-in").addClass("progressbar-out").animationEnd((function(){t&&r.remove()})),r}},xa={name:"progressbar",create:function(){B(this,{progressbar:_a})},on:{tabMounted:function(e){var t=this;Ot(e).find(".progressbar").each((function(e){var r=Ot(e);t.progressbar.set(r,r.attr("data-progress"))}))},pageInit:function(e){var t=this;e.$el.find(".progressbar").each((function(e){var r=Ot(e);t.progressbar.set(r,r.attr("data-progress"))}))}},vnode:{progressbar:{insert:function(e){var t=e.elm;this.progressbar.set(t,t.getAttribute("data-progress"))},update:function(e){var t=e.elm;this.progressbar.set(t,t.getAttribute("data-progress"))}}}},wa={init:function(){var e,t,r,n,a,i,s,l,c,u,p,d,h,f,m,g,v,y,b,_,x,w=this,E=o();function C(n,o){t=!1,e=!0,x=!1,r="touchstart"===n.type?n.targetTouches[0].pageY:n.pageY,a=Ot(n.target).closest("li").eq(0),h=a.index(),s=a.parents(".sortable");var l=a.parents(".list-group");l.length&&l.parents(s).length&&(s=l),i=s.children("ul").children("li:not(.disallow-sorting):not(.no-sorting)"),w.panel&&(w.panel.allowOpen=!1),w.swipeout&&(w.swipeout.allow=!1),o&&(a.addClass("sorting"),s.addClass("sortable-sorting"),x=!0)}var k=!!F().passiveListener&&{passive:!1,capture:!1};Ot(E).on(w.touchEvents.start,".list.sortable .sortable-handler",C,k),w.on("touchmove:active",(function(o){if(e&&a){var h="touchmove"===o.type?o.targetTouches[0].pageY:o.pageY;if(!t){f=a.parents(".page"),m=a.parents(".page-content");var x=parseInt(m.css("padding-top"),10),w=parseInt(m.css("padding-bottom"),10);_=m[0].scrollTop,v=f.offset().top+x,g=f.height()-x-w,a.addClass("sorting"),s.addClass("sortable-sorting"),y=a[0].offsetTop,c=a[0].offsetTop,u=a.parent().height()-y-a.height(),l=a[0].offsetHeight,b=a.offset().top}t=!0,o.preventDefault(),o.f7PreventSwipePanel=!0,n=h-r;var E=m[0].scrollTop-_,C=Math.min(Math.max(n+E,-c),u);a.transform("translate3d(0,"+C+"px,0)");var k,T=44,S=!0;n+E+T<-c&&(S=!1),n+E-T>u&&(S=!1),d=void 0,p=void 0,S&&(b+n+l+T>v+g&&(k=b+n+l+T-(v+g)),b+n<v+T&&(k=b+n-v-T),k&&(m[0].scrollTop+=k)),i.each((function(e){var t=Ot(e);if(t[0]!==a[0]){var r=t[0].offsetTop,n=t.height(),i=y+C;i>=r-n/2&&a.index()<t.index()?(t.transform("translate3d(0, "+-l+"px,0)"),p=t,d=void 0):i<=r+n/2&&a.index()>t.index()?(t.transform("translate3d(0, "+l+"px,0)"),p=void 0,d||(d=t)):t.transform("translate3d(0, 0%,0)")}}))}})),w.on("touchend:passive",(function(){if(!e||!t)return e&&!t&&(w.panel&&(w.panel.allowOpen=!0),w.swipeout&&(w.swipeout.allow=!0),x&&(a.removeClass("sorting"),s.removeClass("sortable-sorting"))),e=!1,void(t=!1);var r;w.panel&&(w.panel.allowOpen=!0),w.swipeout&&(w.swipeout.allow=!0),i.transform(""),a.removeClass("sorting"),s.removeClass("sortable-sorting"),p?r=p.index():d&&(r=d.index());var n=s.dataset().sortableMoveElements;if(void 0===n&&(n=w.params.sortable.moveElements),n&&(p&&a.insertAfter(p),d&&a.insertBefore(d)),(p||d)&&s.hasClass("virtual-list")){void 0===(h=a[0].f7VirtualListIndex)&&(h=a.attr("data-virtual-list-index")),d?void 0===(r=d[0].f7VirtualListIndex)&&(r=d.attr("data-virtual-list-index")):void 0===(r=p[0].f7VirtualListIndex)&&(r=p.attr("data-virtual-list-index")),r=null!==r?parseInt(r,10):void 0;var o=s[0].f7VirtualList;h&&(h=parseInt(h,10)),r&&(r=parseInt(r,10)),o&&o.moveItem(h,r)}void 0===r||Number.isNaN(r)||r===h||(a.trigger("sortable:sort",{from:h,to:r}),w.emit("sortableSort",a[0],{from:h,to:r,el:a[0]},s[0])),d=void 0,p=void 0,e=!1,t=!1})),Ot(E).on("taphold",".sortable-tap-hold",(function(e,t){C(t,!0)}))},enable:function(e){void 0===e&&(e=".list.sortable");var t=Ot(e);0!==t.length&&(t.addClass("sortable-enabled"),t.trigger("sortable:enable"),this.emit("sortableEnable",t[0]))},disable:function(e){void 0===e&&(e=".list.sortable");var t=Ot(e);0!==t.length&&(t.removeClass("sortable-enabled"),t.trigger("sortable:disable"),this.emit("sortableDisable",t[0]))},toggle:function(e){void 0===e&&(e=".list.sortable");var t=Ot(e);0!==t.length&&(t.hasClass("sortable-enabled")?this.sortable.disable(t):this.sortable.enable(t))}},Ea={name:"sortable",params:{sortable:{moveElements:!0}},create:function(){B(this,{sortable:wa})},on:{init:function(){this.params.sortable&&this.sortable.init()}},clicks:{".sortable-enable":function(e,t){void 0===t&&(t={});this.sortable.enable(t.sortable)},".sortable-disable":function(e,t){void 0===t&&(t={});this.sortable.disable(t.sortable)},".sortable-toggle":function(e,t){void 0===t&&(t={});this.sortable.toggle(t.sortable)}}},Ca={init:function(){var e,t,r,n,a,i,s,l,c,u,p,d,h,f,m,g,v,y,b,_,x,w=this,E=o(),C={};var k=!!F().passiveListener&&{passive:!0};w.on("touchstart",(function(e){if(Ca.el){var t=Ot(e.target);Ot(Ca.el).is(t[0])||t.parents(".swipeout").is(Ca.el)||t.hasClass("modal-in")||(t.attr("class")||"").indexOf("-backdrop")>0||t.hasClass("actions-modal")||t.parents(".actions-modal.modal-in, .dialog.modal-in").length>0||w.swipeout.close(Ca.el)}})),Ot(E).on(w.touchEvents.start,"li.swipeout",(function(a){w.swipeout.allow&&(t=!1,e=!0,r=void 0,C.x="touchstart"===a.type?a.targetTouches[0].pageX:a.pageX,C.y="touchstart"===a.type?a.targetTouches[0].pageY:a.pageY,n=(new Date).getTime(),i=Ot(this))}),k),w.on("touchmove:active",(function(n){if(e){var o="touchmove"===n.type?n.targetTouches[0].pageX:n.pageX,E="touchmove"===n.type?n.targetTouches[0].pageY:n.pageY;if(void 0===r&&(r=!!(r||Math.abs(E-C.y)>Math.abs(o-C.x))),r)e=!1;else{if(!t){if(Ot(".list.sortable-opened").length>0)return;s=i.find(".swipeout-content"),l=i.find(".swipeout-actions-right"),c=i.find(".swipeout-actions-left"),u=null,p=null,m=null,g=null,b=null,y=null,c.length>0&&(u=c.outerWidth(),m=c.children("a"),y=c.find(".swipeout-overswipe")),l.length>0&&(p=l.outerWidth(),g=l.children("a"),b=l.find(".swipeout-overswipe")),(h=i.hasClass("swipeout-opened"))&&(f=i.find(".swipeout-actions-left.swipeout-actions-opened").length>0?"left":"right"),i.removeClass("swipeout-transitioning"),w.params.swipeout.noFollow||(i.find(".swipeout-actions-opened").removeClass("swipeout-actions-opened"),i.removeClass("swipeout-opened"))}if(t=!0,n.preventDefault(),a=o-C.x,d=a,h&&("right"===f?d-=p:d+=u),d>0&&0===c.length||d<0&&0===l.length){if(!h)return e=!1,t=!1,s.transform(""),g&&g.length>0&&g.transform(""),void(m&&m.length>0&&m.transform(""));d=0}var k,T;if(d<0?v="to-left":d>0?v="to-right":v||(v="to-left"),n.f7PreventSwipePanel=!0,w.params.swipeout.noFollow)return h?("right"===f&&a>0&&w.swipeout.close(i),"left"===f&&a<0&&w.swipeout.close(i)):(a<0&&l.length>0&&w.swipeout.open(i,"right"),a>0&&c.length>0&&w.swipeout.open(i,"left")),e=!1,void(t=!1);if(_=!1,x=!1,l.length>0){var S=d;if(T=S/p,S<-p){var P=S/-p;S=-p-Math.pow(-S-p,.8),d=S,b.length>0&&P>w.params.swipeout.overswipeRatio&&(x=!0)}"to-left"!==v&&(T=0,S=0),g.each((function(e){var t=Ot(e);void 0===e.f7SwipeoutButtonOffset&&(t[0].f7SwipeoutButtonOffset=e.offsetLeft),k=e.f7SwipeoutButtonOffset,b.length>0&&t.hasClass("swipeout-overswipe")&&"to-left"===v&&(t.css({left:(x?-k:0)+"px"}),x?(t.hasClass("swipeout-overswipe-active")||(i.trigger("swipeout:overswipeenter"),w.emit("swipeoutOverswipeEnter",i[0])),t.addClass("swipeout-overswipe-active")):(t.hasClass("swipeout-overswipe-active")&&(i.trigger("swipeout:overswipeexit"),w.emit("swipeoutOverswipeExit",i[0])),t.removeClass("swipeout-overswipe-active"))),t.transform("translate3d("+(S-k*(1+Math.max(T,-1)))+"px,0,0)")}))}if(c.length>0){var M=d;if(T=M/u,M>u){var I=M/p;M=u+Math.pow(M-u,.8),d=M,y.length>0&&I>w.params.swipeout.overswipeRatio&&(_=!0)}"to-right"!==v&&(M=0,T=0),m.each((function(e,t){var r=Ot(e);void 0===e.f7SwipeoutButtonOffset&&(r[0].f7SwipeoutButtonOffset=u-e.offsetLeft-e.offsetWidth),k=e.f7SwipeoutButtonOffset,y.length>0&&r.hasClass("swipeout-overswipe")&&"to-right"===v&&(r.css({left:(_?k:0)+"px"}),_?(r.hasClass("swipeout-overswipe-active")||(i.trigger("swipeout:overswipeenter"),w.emit("swipeoutOverswipeEnter",i[0])),r.addClass("swipeout-overswipe-active")):(r.hasClass("swipeout-overswipe-active")&&(i.trigger("swipeout:overswipeexit"),w.emit("swipeoutOverswipeExit",i[0])),r.removeClass("swipeout-overswipe-active"))),m.length>1&&r.css("z-index",m.length-t),r.transform("translate3d("+(M+k*(1-Math.min(T,1)))+"px,0,0)")}))}i.trigger("swipeout",T),w.emit("swipeout",i[0],T),s.transform("translate3d("+d+"px,0,0)")}}})),w.on("touchend:passive",(function(){if(!e||!t)return e=!1,void(t=!1);e=!1,t=!1;var r,o,f,y,b=(new Date).getTime()-n,E="to-left"===v?l:c,C="to-left"===v?p:u;if(r=b<300&&(a<-10&&"to-left"===v||a>10&&"to-right"===v)||b>=300&&Math.abs(d)>C/2?"open":"close",b<300&&(0===Math.abs(d)&&(r="close"),Math.abs(d)===C&&(r="open")),"open"===r){Ca.el=i[0],i.trigger("swipeout:open"),w.emit("swipeoutOpen",i[0]),i.addClass("swipeout-opened swipeout-transitioning");var k="to-left"===v?-C:C;if(s.transform("translate3d("+k+"px,0,0)"),E.addClass("swipeout-actions-opened"),o="to-left"===v?g:m)for(f=0;f<o.length;f+=1)Ot(o[f]).transform("translate3d("+k+"px,0,0)");x&&l.find(".swipeout-overswipe").trigger("click","f7Overswipe"),_&&c.find(".swipeout-overswipe").trigger("click","f7Overswipe")}else i.trigger("swipeout:close"),w.emit("swipeoutClose",i[0]),Ca.el=void 0,i.addClass("swipeout-transitioning").removeClass("swipeout-opened"),s.transform(""),E.removeClass("swipeout-actions-opened");m&&m.length>0&&m!==o&&m.each((function(e){var t=Ot(e);void 0===(y=e.f7SwipeoutButtonOffset)&&(t[0].f7SwipeoutButtonOffset=u-e.offsetLeft-e.offsetWidth),t.transform("translate3d("+y+"px,0,0)")})),g&&g.length>0&&g!==o&&g.each((function(e){var t=Ot(e);void 0===(y=e.f7SwipeoutButtonOffset)&&(t[0].f7SwipeoutButtonOffset=e.offsetLeft),t.transform("translate3d("+-y+"px,0,0)")})),s.transitionEnd((function(){h&&"open"===r||!h&&"close"===r||(i.trigger("open"===r?"swipeout:opened":"swipeout:closed"),w.emit("open"===r?"swipeoutOpened":"swipeoutClosed",i[0]),i.removeClass("swipeout-transitioning"),h&&"close"===r&&(l.length>0&&g.transform(""),c.length>0&&m.transform("")))}))}))},allow:!0,el:void 0,open:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2];"function"==typeof r[1]&&(a=r[0],o=r[1],i=r[2]);var s=Ot(a).eq(0);if(0!==s.length&&s.hasClass("swipeout")&&!s.hasClass("swipeout-opened")){i||(i=s.find(".swipeout-actions-right").length>0?"right":"left");var l=s.find(".swipeout-actions-"+i),c=s.find(".swipeout-content");if(0!==l.length){s.trigger("swipeout:open").addClass("swipeout-opened").removeClass("swipeout-transitioning"),e.emit("swipeoutOpen",s[0]),l.addClass("swipeout-actions-opened");var u=l.children("a"),p=l.outerWidth(),d="right"===i?-p:p;u.length>1&&u.each((function(e,t){var r=Ot(e);"right"===i?r.transform("translate3d("+-e.offsetLeft+"px,0,0)"):r.css("z-index",u.length-t).transform("translate3d("+(p-e.offsetWidth-e.offsetLeft)+"px,0,0)")})),s.addClass("swipeout-transitioning"),c.transitionEnd((function(){s.trigger("swipeout:opened"),e.emit("swipeoutOpened",s[0]),o&&o.call(s[0])})),w((function(){u.transform("translate3d("+d+"px,0,0)"),c.transform("translate3d("+d+"px,0,0)")})),Ca.el=s[0]}}},close:function(e,t){var r=this,n=Ot(e).eq(0);if(0!==n.length&&n.hasClass("swipeout-opened")){var a,i=n.find(".swipeout-actions-opened").hasClass("swipeout-actions-right")?"right":"left",o=n.find(".swipeout-actions-opened").removeClass("swipeout-actions-opened"),s=o.children("a"),l=o.outerWidth();r.swipeout.allow=!1,n.trigger("swipeout:close"),r.emit("swipeoutClose",n[0]),n.removeClass("swipeout-opened").addClass("swipeout-transitioning"),n.find(".swipeout-content").transform("").transitionEnd(c),a=setTimeout(c,500),s.each((function(e){var t=Ot(e);"right"===i?t.transform("translate3d("+-e.offsetLeft+"px,0,0)"):t.transform("translate3d("+(l-e.offsetWidth-e.offsetLeft)+"px,0,0)"),t.css({left:"0px"}).removeClass("swipeout-overswipe-active")})),Ca.el&&Ca.el===n[0]&&(Ca.el=void 0)}function c(){r.swipeout.allow=!0,n.hasClass("swipeout-opened")||(n.removeClass("swipeout-transitioning"),s.transform(""),n.trigger("swipeout:closed"),r.emit("swipeoutClosed",n[0]),t&&t.call(n[0]),a&&clearTimeout(a))}},delete:function(e,t){var r=this,n=Ot(e).eq(0);0!==n.length&&(Ca.el=void 0,n.trigger("swipeout:delete"),r.emit("swipeoutDelete",n[0]),n.css({height:n.outerHeight()+"px"}),n.transitionEnd((function(){if(n.trigger("swipeout:deleted"),r.emit("swipeoutDeleted",n[0]),t&&t.call(n[0]),n.parents(".virtual-list").length>0){var e=n.parents(".virtual-list")[0].f7VirtualList,a=n[0].f7VirtualListIndex;e&&void 0!==a&&e.deleteItem(a)}else r.params.swipeout.removeElements?r.params.swipeout.removeElementsWithTimeout?setTimeout((function(){n.remove()}),r.params.swipeout.removeElementsTimeout):n.remove():n.removeClass("swipeout-deleting swipeout-transitioning")})),w((function(){n.addClass("swipeout-deleting swipeout-transitioning").css({height:"0px"}).find(".swipeout-content").transform("translate3d(-100%,0,0)")})))}},ka={name:"swipeout",params:{swipeout:{actionsNoFold:!1,noFollow:!1,removeElements:!0,removeElementsWithTimeout:!1,removeElementsTimeout:0,overswipeRatio:1.2}},create:function(){B(this,{swipeout:Ca})},clicks:{".swipeout-open":function(e,t){void 0===t&&(t={});this.swipeout.open(t.swipeout,t.side)},".swipeout-close":function(e){var t=e.closest(".swipeout");0!==t.length&&this.swipeout.close(t)},".swipeout-delete":function(e,t){void 0===t&&(t={});var r=this,n=e.closest(".swipeout");if(0!==n.length){var a=t,i=a.confirm,o=a.confirmTitle;t.confirm?r.dialog.confirm(i,o,(function(){r.swipeout.delete(n)})):r.swipeout.delete(n)}}},on:{init:function(){this.params.swipeout&&this.swipeout.init()}}},Ta={toggleClicked:function(e){var t=e.closest(".accordion-item").eq(0);t.length||(t=e.parents("li").eq(0));var r=e.parents(".accordion-item-content").eq(0);r.length&&r.parents(t).length||e.parents("li").length>1&&e.parents("li")[0]!==t[0]||this.accordion.toggle(t)},open:function(e){var t=this,r=Ot(e),n=!1;function a(){n=!0}if(r.trigger("accordion:beforeopen",{prevent:a},a),t.emit("accordionBeforeOpen",r[0],a),!n){var i=r.parents(".accordion-list").eq(0),o=r.children(".accordion-item-content");if(o.removeAttr("aria-hidden"),0===o.length&&(o=r.find(".accordion-item-content")),0!==o.length){var s=i.length>0&&r.parent().children(".accordion-item-opened");s.length>0&&t.accordion.close(s),o.transitionEnd((function(){r.hasClass("accordion-item-opened")?(o.transition(0),o.css("height","auto"),w((function(){o.transition(""),r.trigger("accordion:opened"),t.emit("accordionOpened",r[0])}))):(o.css("height",""),r.trigger("accordion:closed"),t.emit("accordionClosed",r[0]))})),o.css("height",o[0].scrollHeight+"px"),r.trigger("accordion:open"),r.addClass("accordion-item-opened"),t.emit("accordionOpen",r[0])}}},close:function(e){var t=this,r=Ot(e),n=!1;function a(){n=!0}if(r.trigger("accordion:beforeclose",{prevent:a},a),t.emit("accordionBeforeClose",r[0],a),!n){var i=r.children(".accordion-item-content");0===i.length&&(i=r.find(".accordion-item-content")),r.removeClass("accordion-item-opened"),i.attr("aria-hidden",!0),i.transition(0),i.css("height",i[0].scrollHeight+"px"),i.transitionEnd((function(){r.hasClass("accordion-item-opened")?(i.transition(0),i.css("height","auto"),w((function(){i.transition(""),r.trigger("accordion:opened"),t.emit("accordionOpened",r[0])}))):(i.css("height",""),r.trigger("accordion:closed"),t.emit("accordionClosed",r[0]))})),w((function(){i.transition(""),i.css("height",""),r.trigger("accordion:close"),t.emit("accordionClose",r[0])}))}},toggle:function(e){var t=Ot(e);0!==t.length&&(t.hasClass("accordion-item-opened")?this.accordion.close(e):this.accordion.open(e))}},Sa={name:"accordion",create:function(){B(this,{accordion:Ta})},clicks:{".accordion-item .item-link, .accordion-item-toggle, .links-list.accordion-list > ul > li > a":function(e){Ta.toggleClicked.call(this,e)}}};function Pa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ma(e,t){return(Ma=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ia=function(e){var t,r;function n(t,r){var n;void 0===r&&(r={});var a,i=Pa(n=e.call(this,r,[t])||this),s=N(),l=o();"md"===t.theme?a=48:"ios"===t.theme?a=44:"aurora"===t.theme&&(a=38);var c={cols:1,height:a,cache:!0,dynamicHeightBufferSize:1,showFilteredItemsOnly:!1,renderExternal:void 0,setListHeight:!0,searchByItem:void 0,searchAll:void 0,ul:null,createUl:!0,scrollableParentEl:void 0,renderItem:function(e){return('\n          <li>\n            <div class="item-content">\n              <div class="item-inner">\n                <div class="item-title">'+e+"</div>\n              </div>\n            </div>\n          </li>\n        ").trim()},on:{}};if(i.useModulesParams(c),i.params=M(c,r),void 0!==i.params.height&&i.params.height||(i.params.height=a),i.$el=Ot(r.el),i.el=i.$el[0],0===i.$el.length)return Pa(n);i.$el[0].f7VirtualList=i,i.items=i.params.items,i.params.showFilteredItemsOnly&&(i.filteredItems=[]),i.params.renderItem&&(i.renderItem=i.params.renderItem),i.$pageContentEl=i.$el.parents(".page-content"),i.pageContentEl=i.$pageContentEl[0],i.$scrollableParentEl=i.params.scrollableParentEl?Ot(i.params.scrollableParentEl).eq(0):i.$pageContentEl,!i.$scrollableParentEl.length&&i.$pageContentEl.length&&(i.$scrollableParentEl=i.$pageContentEl),i.scrollableParentEl=i.$scrollableParentEl[0],void 0!==i.params.updatableScroll?i.updatableScroll=i.params.updatableScroll:(i.updatableScroll=!0,s.ios&&s.osVersion.split(".")[0]<8&&(i.updatableScroll=!1));var u,p=i.params.ul;i.$ul=p?Ot(i.params.ul):i.$el.children("ul"),0===i.$ul.length&&i.params.createUl&&(i.$el.append("<ul></ul>"),i.$ul=i.$el.children("ul")),i.ul=i.$ul[0],u=i.ul||i.params.createUl?i.$ul:i.$el,M(i,{$itemsWrapEl:u,itemsWrapEl:u[0],domCache:{},displayDomCache:{},tempDomElement:l.createElement("ul"),lastRepaintY:null,fragment:l.createDocumentFragment(),pageHeight:void 0,rowsPerScreen:void 0,rowsBefore:void 0,rowsAfter:void 0,rowsToRender:void 0,maxBufferHeight:0,listHeight:void 0,dynamicHeight:"function"==typeof i.params.height}),i.useModules();var d,h,f,m,g=i.handleScroll.bind(i),v=i.handleResize.bind(i);return i.attachEvents=function(){d=i.$el.parents(".page").eq(0),h=i.$el.parents(".tab").filter((function(e){return 0===Ot(e).parent(".tabs").parent(".tabs-animated-wrap, .tabs-swipeable-wrap").length})).eq(0),f=i.$el.parents(".panel").eq(0),m=i.$el.parents(".popup").eq(0),i.$scrollableParentEl.on("scroll",g),d.length&&d.on("page:reinit",v),h.length&&h.on("tab:show",v),f.length&&f.on("panel:open",v),m.length&&m.on("popup:open",v),t.on("resize",v)},i.detachEvents=function(){i.$scrollableParentEl.off("scroll",g),d.length&&d.off("page:reinit",v),h.length&&h.off("tab:show",v),f.length&&f.off("panel:open",v),m.length&&m.off("popup:open",v),t.off("resize",v)},i.init(),i||Pa(n)}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,Ma(t,r);var a=n.prototype;return a.setListSize=function(){var e=this,t=e.filteredItems||e.items;if(e.pageHeight=e.$scrollableParentEl[0].offsetHeight,e.dynamicHeight){e.listHeight=0,e.heights=[];for(var r=0;r<t.length;r+=1){var n=e.params.height(t[r]);e.listHeight+=n,e.heights.push(n)}}else e.listHeight=Math.ceil(t.length/e.params.cols)*e.params.height,e.rowsPerScreen=Math.ceil(e.pageHeight/e.params.height),e.rowsBefore=e.params.rowsBefore||2*e.rowsPerScreen,e.rowsAfter=e.params.rowsAfter||e.rowsPerScreen,e.rowsToRender=e.rowsPerScreen+e.rowsBefore+e.rowsAfter,e.maxBufferHeight=e.rowsBefore/2*e.params.height;(e.updatableScroll||e.params.setListHeight)&&e.$itemsWrapEl.css({height:e.listHeight+"px"})},a.render=function(e,t){var r=this;e&&(r.lastRepaintY=null);var n=-(r.$el[0].getBoundingClientRect().top-r.$scrollableParentEl[0].getBoundingClientRect().top);if(void 0!==t&&(n=t),null===r.lastRepaintY||Math.abs(n-r.lastRepaintY)>r.maxBufferHeight||!r.updatableScroll&&r.$scrollableParentEl[0].scrollTop+r.pageHeight>=r.$scrollableParentEl[0].scrollHeight){r.lastRepaintY=n;var a,i,o,s=r.filteredItems||r.items,l=0,c=0;if(r.dynamicHeight){var u,p=0;r.maxBufferHeight=r.pageHeight;for(var d=0;d<r.heights.length;d+=1)u=r.heights[d],void 0===a&&(p+u>=n-2*r.pageHeight*r.params.dynamicHeightBufferSize?a=d:l+=u),void 0===i&&((p+u>=n+2*r.pageHeight*r.params.dynamicHeightBufferSize||d===r.heights.length-1)&&(i=d+1),c+=u),p+=u;i=Math.min(i,s.length)}else(a=(parseInt(n/r.params.height,10)-r.rowsBefore)*r.params.cols)<0&&(a=0),i=Math.min(a+r.rowsToRender*r.params.cols,s.length);var h,f=[];for(r.reachEnd=!1,h=a;h<i;h+=1){var m=void 0,g=r.items.indexOf(s[h]);h===a&&(r.currentFromIndex=g),h===i-1&&(r.currentToIndex=g),r.filteredItems?r.items[g]===r.filteredItems[r.filteredItems.length-1]&&(r.reachEnd=!0):g===r.items.length-1&&(r.reachEnd=!0),r.params.renderExternal?f.push(s[h]):r.domCache[g]?(m=r.domCache[g]).f7VirtualListIndex=g:(r.renderItem?r.tempDomElement.innerHTML=r.renderItem(s[h],g).trim():r.tempDomElement.innerHTML=s[h].toString().trim(),m=r.tempDomElement.childNodes[0],r.params.cache&&(r.domCache[g]=m),m.f7VirtualListIndex=g),h===a&&(o=r.dynamicHeight?l:h*r.params.height/r.params.cols),r.params.renderExternal||(m.style.top=o+"px",r.emit("local::itemBeforeInsert vlItemBeforeInsert",r,m,s[h]),r.fragment.appendChild(m))}r.updatableScroll||(r.dynamicHeight?r.itemsWrapEl.style.height=c+"px":r.itemsWrapEl.style.height=h*r.params.height/r.params.cols+"px"),r.params.renderExternal?s&&0===s.length&&(r.reachEnd=!0):(r.emit("local::beforeClear vlBeforeClear",r,r.fragment),r.itemsWrapEl.innerHTML="",r.emit("local::itemsBeforeInsert vlItemsBeforeInsert",r,r.fragment),s&&0===s.length?(r.reachEnd=!0,r.params.emptyTemplate&&(r.itemsWrapEl.innerHTML=r.params.emptyTemplate)):r.itemsWrapEl.appendChild(r.fragment),r.emit("local::itemsAfterInsert vlItemsAfterInsert",r,r.fragment)),void 0!==t&&e&&r.$scrollableParentEl.scrollTop(t,0),r.params.renderExternal&&r.params.renderExternal(r,{fromIndex:a,toIndex:i,listHeight:r.listHeight,topPosition:o,items:f})}},a.filterItems=function(e,t){void 0===t&&(t=!0);var r=this;r.filteredItems=[];for(var n=0;n<e.length;n+=1)r.filteredItems.push(r.items[e[n]]);t&&(r.$scrollableParentEl[0].scrollTop=0),r.update()},a.resetFilter=function(){var e=this;e.params.showFilteredItemsOnly?e.filteredItems=[]:(e.filteredItems=null,delete e.filteredItems),e.update()},a.scrollToItem=function(e){var t=this;if(e>t.items.length)return!1;var r=0;if(t.dynamicHeight)for(var n=0;n<e;n+=1)r+=t.heights[n];else r=e*t.params.height;var a=t.$el[0].offsetTop;return t.render(!0,a+r-parseInt(t.$scrollableParentEl.css("padding-top"),10)),!0},a.handleScroll=function(){this.render()},a.isVisible=function(){var e=this;return!!(e.el.offsetWidth||e.el.offsetHeight||e.el.getClientRects().length)},a.handleResize=function(){var e=this;e.isVisible()&&(e.setListSize(),e.render(!0))},a.appendItems=function(e){for(var t=0;t<e.length;t+=1)this.items.push(e[t]);this.update()},a.appendItem=function(e){this.appendItems([e])},a.replaceAllItems=function(e){var t=this;t.items=e,delete t.filteredItems,t.domCache={},t.update()},a.replaceItem=function(e,t){var r=this;r.items[e]=t,r.params.cache&&delete r.domCache[e],r.update()},a.prependItems=function(e){for(var t=this,r=e.length-1;r>=0;r-=1)t.items.unshift(e[r]);if(t.params.cache){var n={};Object.keys(t.domCache).forEach((function(r){n[parseInt(r,10)+e.length]=t.domCache[r]})),t.domCache=n}t.update()},a.prependItem=function(e){this.prependItems([e])},a.moveItem=function(e,t){var r=this,n=e,a=t;if(n!==a){var i=r.items.splice(n,1)[0];if(a>=r.items.length?(r.items.push(i),a=r.items.length-1):r.items.splice(a,0,i),r.params.cache){var o={};Object.keys(r.domCache).forEach((function(e){var t=parseInt(e,10),i=n<a?n:a,s=n<a?a:n,l=n<a?-1:1;(t<i||t>s)&&(o[t]=r.domCache[t]),t===i&&(o[s]=r.domCache[t]),t>i&&t<=s&&(o[t+l]=r.domCache[t])})),r.domCache=o}r.update()}},a.insertItemBefore=function(e,t){var r=this;if(0!==e)if(e>=r.items.length)r.appendItem(t);else{if(r.items.splice(e,0,t),r.params.cache){var n={};Object.keys(r.domCache).forEach((function(t){var a=parseInt(t,10);a>=e&&(n[a+1]=r.domCache[a])})),r.domCache=n}r.update()}else r.prependItem(t)},a.deleteItems=function(e){for(var t,r=this,n=0,a=function(a){var i=e[a];void 0!==t&&i>t&&(n=-a),i+=n,t=e[a];var o=r.items.splice(i,1)[0];if(r.filteredItems&&r.filteredItems.indexOf(o)>=0&&r.filteredItems.splice(r.filteredItems.indexOf(o),1),r.params.cache){var s={};Object.keys(r.domCache).forEach((function(e){var t=parseInt(e,10);t===i?delete r.domCache[i]:parseInt(e,10)>i?s[t-1]=r.domCache[e]:s[t]=r.domCache[e]})),r.domCache=s}},i=0;i<e.length;i+=1)a(i);r.update()},a.deleteAllItems=function(){var e=this;e.items=[],delete e.filteredItems,e.params.cache&&(e.domCache={}),e.update()},a.deleteItem=function(e){this.deleteItems([e])},a.clearCache=function(){this.domCache={}},a.update=function(e){var t=this;e&&t.params.cache&&(t.domCache={}),t.setListSize(),t.render(!0)},a.init=function(){var e=this;e.attachEvents(),e.setListSize(),e.render()},a.destroy=function(){var e=this;e.detachEvents(),e.$el[0].f7VirtualList=null,delete e.$el[0].f7VirtualList,y(e),e=null},n}(q),Aa={name:"virtualList",static:{VirtualList:Ia},create:function(){this.virtualList=Dt({defaultSelector:".virtual-list",constructor:Ia,app:this,domProp:"f7VirtualList"})}};function Oa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function za(e,t){return(za=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ra=function(e){var t,r;function n(t,r){var n;void 0===r&&(r={});var a,i,o,s,l=Oa(n=e.call(this,r,[t])||this),c={el:null,listEl:null,indexes:"auto",iosItemHeight:14,mdItemHeight:14,auroraItemHeight:14,scrollList:!0,label:!1,renderItem:function(e,t){return("\n          <li>"+e+"</li>\n        ").trim()},renderSkipPlaceholder:function(){return'<li class="list-index-skip-placeholder"></li>'},on:{}};if(l.useModulesParams(c),l.params=M(c,r),!l.params.el)return l||Oa(n);if((a=Ot(l.params.el))[0].f7ListIndex)return a[0].f7ListIndex||Oa(n);if(0===(s=a.find("ul")).length&&(s=Ot("<ul></ul>"),a.append(s)),l.params.listEl&&(i=Ot(l.params.listEl)),"auto"===l.params.indexes&&!i)return l||Oa(n);function u(){var e={index:l};l.calcSize(),e!==l.height&&l.render()}function p(e){var t=Ot(e.target).closest("li");if(t.length){var r=t.index();if(l.skipRate>0){var n=r/(t.siblings("li").length-1);r=Math.round((l.indexes.length-1)*n)}var a=l.indexes[r];l.$el.trigger("listindex:click",{content:a,index:r}),l.emit("local::click listIndexClick",l,a,r),l.$el.trigger("listindex:select",{content:a,index:r}),l.emit("local::select listIndexSelect",l,a,r),l.$listEl&&l.params.scrollList&&l.scrollListToIndex(a,r)}}i?o=i.parents(".page-content").eq(0):0===(o=a.siblings(".page-content").eq(0)).length&&(o=a.parents(".page").eq(0).find(".page-content").eq(0)),a[0].f7ListIndex=l,M(l,{app:t,$el:a,el:a&&a[0],$ul:s,ul:s&&s[0],$listEl:i,listEl:i&&i[0],$pageContentEl:o,pageContentEl:o&&o[0],indexes:r.indexes,height:0,skipRate:0}),l.useModules();var d,h,f,m,g,v={},y=null;function b(e){var t=s.children();t.length&&(f=t[0].getBoundingClientRect().top,m=t[t.length-1].getBoundingClientRect().top+t[0].offsetHeight,v.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,v.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,d=!0,h=!1,y=null)}function _(e){if(d){!h&&l.params.label&&(g=Ot('<span class="list-index-label"></span>'),a.append(g)),h=!0;var t="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;e.preventDefault();var r=(t-f)/(m-f);r=Math.min(Math.max(r,0),1);var n=Math.round((l.indexes.length-1)*r),i=l.indexes[n],o=m-f,s=(l.height-o)/2+(1-r)*o;n!==y&&(l.params.label&&g.html(i).transform("translateY(-"+s+"px)"),l.$listEl&&l.params.scrollList&&l.scrollListToIndex(i,n)),y=n,l.$el.trigger("listindex:select"),l.emit("local::select listIndexSelect",l,i,n)}}function x(){d&&(d=!1,h=!1,l.params.label&&(g&&g.remove(),g=void 0))}var w=!!F().passiveListener&&{passive:!0};return l.attachEvents=function(){a.parents(".tab").on("tab:show",u),a.parents(".page").on("page:reinit",u),a.parents(".panel").on("panel:open",u),a.parents(".sheet-modal, .actions-modal, .popup, .popover, .login-screen, .dialog, .toast").on("modal:open",u),t.on("resize",u),a.on("click",p),a.on(t.touchEvents.start,b,w),t.on("touchmove:active",_),t.on("touchend:passive",x)},l.detachEvents=function(){a.parents(".tab").off("tab:show",u),a.parents(".page").off("page:reinit",u),a.parents(".panel").off("panel:open",u),a.parents(".sheet-modal, .actions-modal, .popup, .popover, .login-screen, .dialog, .toast").off("modal:open",u),t.off("resize",u),a.off("click",p),a.off(t.touchEvents.start,b,w),t.off("touchmove:active",_),t.off("touchend:passive",x)},l.init(),l||Oa(n)}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,za(t,r);var a=n.prototype;return a.scrollListToIndex=function(e,t){var r,n=this,a=n.$listEl,i=n.$pageContentEl,o=n.app;if(!a||!i||0===i.length)return n;if(a.find(".list-group-title, .item-divider").each((function(t){if(!r){var n=Ot(t);n.text()===e&&(r=n)}})),!r||0===r.length)return n;var s=r.parent().offset().top,l=parseInt(i.css("padding-top"),10),c=i[0].scrollTop,u=r.offset().top;if(i.parents(".page-with-navbar-large").length){var p=o.navbar.getElByPage(i.parents(".page-with-navbar-large").eq(0)),d=Ot(p).find(".title-large");d.length&&(l-=d[0].offsetHeight||0)}return s<=l?i.scrollTop(s+c-l):i.scrollTop(u+c-l),n},a.renderSkipPlaceholder=function(){return this.params.renderSkipPlaceholder.call(this)},a.renderItem=function(e,t){return this.params.renderItem.call(this,e,t)},a.render=function(){var e,t=this,r=t.$ul,n=t.indexes,a=t.skipRate,i=n.map((function(r,n){if(n%a!=0&&a>0)return e=!0,"";var i=t.renderItem(r,n);return e&&(i=t.renderSkipPlaceholder()+i),e=!1,i})).join("");return r.html(i),t},a.calcSize=function(){var e=this,t=e.app,r=e.params,n=e.el,a=e.indexes,i=n.offsetHeight,o=r[t.theme+"ItemHeight"],s=Math.floor(i/o),l=a.length,c=0;return l>s&&(c=Math.ceil((2*l-1)/s)),e.height=i,e.skipRate=c,e},a.calcIndexes=function(){var e=this;return"auto"===e.params.indexes?(e.indexes=[],e.$listEl.find(".list-group-title, .item-divider").each((function(t){var r=Ot(t).text();e.indexes.indexOf(r)<0&&e.indexes.push(r)}))):e.indexes=e.params.indexes,e},a.update=function(){var e=this;return e.calcIndexes(),e.calcSize(),e.render(),e},a.init=function(){var e=this;e.calcIndexes(),e.calcSize(),e.render(),e.attachEvents()},a.destroy=function(){var e=this;e.$el.trigger("listindex:beforedestroy",e),e.emit("local::beforeDestroy listIndexBeforeDestroy"),e.detachEvents(),e.$el[0]&&(e.$el[0].f7ListIndex=null,delete e.$el[0].f7ListIndex),y(e),e=null},n}(q),La={name:"listIndex",static:{ListIndex:Ra},create:function(){this.listIndex=Dt({defaultSelector:".list-index",constructor:Ra,app:this,domProp:"f7ListIndex"})},on:{tabMounted:function(e){var t=this;Ot(e).find(".list-index-init").each((function(e){var r=M(Ot(e).dataset(),{el:e});t.listIndex.create(r)}))},tabBeforeRemove:function(e){Ot(e).find(".list-index-init").each((function(e){e.f7ListIndex&&e.f7ListIndex.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".list-index-init").each((function(e){var r=M(Ot(e).dataset(),{el:e});t.listIndex.create(r)}))},pageBeforeRemove:function(e){e.$el.find(".list-index-init").each((function(e){e.f7ListIndex&&e.f7ListIndex.destroy()}))}},vnode:{"list-index-init":{insert:function(e){var t=e.elm,r=M(Ot(t).dataset(),{el:t});this.listIndex.create(r)},destroy:function(e){var t=e.elm;t.f7ListIndex&&t.f7ListIndex.destroy()}}}},Da={show:function(){for(var e,t,r,n,a,i=this,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];1===s.length&&s[0]&&s[0].constructor===Object?(e=s[0].tabEl,t=s[0].tabLinkEl,r=s[0].animate,n=s[0].tabRoute,a=s[0].animatedInit):(e=s[0],t=s[1],r=s[2],n=s[3],"boolean"==typeof s[1]&&(e=s[0],r=s[1],t=s[2],n=s[3],s.length>2&&t.constructor===Object&&(e=s[0],r=s[1],n=s[2],t=s[3]))),void 0===r&&(r=!0);var c,u=Ot(e);if(n&&u[0]&&(u[0].f7TabRoute=n),!a&&(0===u.length||u.hasClass("tab-active")))return{$newTabEl:u,newTabEl:u[0]};t&&(c=Ot(t));var p=u.parent(".tabs");if(0===p.length)return{$newTabEl:u,newTabEl:u[0]};i.swipeout&&(i.swipeout.allowOpen=!0);var d=[];function h(e){d.push(e)}function f(){d.forEach((function(e){e()}))}var m,g=!1;if(p.parent().hasClass("tabs-animated-wrap")){p.parent()[r?"removeClass":"addClass"]("not-animated");var v=parseFloat(p.css("transition-duration").replace(",","."));r&&v&&(p.transitionEnd(f),g=!0);var y=100*(i.rtl?u.index():-u.index());p.transform("translate3d("+y+"%,0,0)")}p.parent().hasClass("tabs-swipeable-wrap")&&i.swiper&&((m=p.parent()[0].swiper)&&m.activeIndex!==u.index()?(g=!0,m.once("slideChangeTransitionEnd",(function(){f()})).slideTo(u.index(),r?void 0:0)):m&&m.animating&&(g=!0,m.once("slideChangeTransitionEnd",(function(){f()}))));var b=p.children(".tab-active");if(b.removeClass("tab-active"),!a&&(!m||m&&!m.animating||m&&n)&&(b.hasClass("view")&&b.children(".page").length&&b.children(".page").each((function(e){Ot(e).trigger("page:tabhide"),i.emit("pageTabHide",e)})),b.trigger("tab:hide"),i.emit("tabHide",b[0])),u.addClass("tab-active"),!a&&(!m||m&&!m.animating||m&&n)&&(u.hasClass("view")&&u.children(".page").length&&u.children(".page").each((function(e){Ot(e).trigger("page:tabshow"),i.emit("pageTabShow",e)})),u.trigger("tab:show"),i.emit("tabShow",u[0])),!c&&((!(c=Ot("string"==typeof e?'.tab-link[href="'+e+'"]':'.tab-link[href="#'+u.attr("id")+'"]'))||c&&0===c.length)&&Ot("[data-tab]").each((function(e){u.is(Ot(e).attr("data-tab"))&&(c=Ot(e))})),n&&(!c||c&&0===c.length)&&0===(c=Ot('[data-route-tab-id="'+n.route.tab.id+'"]')).length&&(c=Ot('.tab-link[href="'+n.url+'"]')),c.length>1&&u.parents(".page").length&&(c=c.filter((function(e){return Ot(e).parents(".page")[0]===u.parents(".page")[0]})),"ios"===i.theme&&0===c.length&&n))){var _=u.parents(".page"),x=Ot(i.navbar.getElByPage(_));0===(c=x.find('[data-route-tab-id="'+n.route.tab.id+'"]')).length&&(c=x.find('.tab-link[href="'+n.url+'"]'))}if(c.length>0){var w;if(b&&b.length>0){var E=b.attr("id");E&&(!(w=Ot('.tab-link[href="#'+E+'"]'))||w&&0===w.length)&&(w=Ot('.tab-link[data-route-tab-id="'+E+'"]')),(!w||w&&0===w.length)&&Ot("[data-tab]").each((function(e){b.is(Ot(e).attr("data-tab"))&&(w=Ot(e))})),(!w||w&&0===w.length)&&(w=c.siblings(".tab-link-active"))}else n&&(w=c.siblings(".tab-link-active"));if(w&&w.length>1&&b&&b.parents(".page").length&&(w=w.filter((function(e){return Ot(e).parents(".page")[0]===b.parents(".page")[0]}))),w&&w.length>0&&w.removeClass("tab-link-active"),c&&c.length>0&&(c.addClass("tab-link-active"),"ios"!==i.theme&&i.toolbar)){var C=c.parents(".tabbar, .tabbar-labels");C.length>0&&i.toolbar.setHighlight(C)}}return{$newTabEl:u,newTabEl:u[0],$oldTabEl:b,oldTabEl:b[0],onTabsChanged:h,animated:g}}},Ba={name:"tabs",create:function(){M(this,{tab:{show:Da.show.bind(this)}})},on:{"pageInit tabMounted":function(e){var t=Ot(e.el||e).find(".tabs-animated-wrap > .tabs > .tab-active")[0];if(t){this.tab.show({tabEl:t,animatedInit:!0,animate:!1})}}},clicks:{".tab-link":function(e,t){if(void 0===t&&(t={}),e.attr("href")&&0===e.attr("href").indexOf("#")||e.attr("data-tab")){this.tab.show({tabEl:t.tab||e.attr("href"),tabLinkEl:e,animate:t.animate})}}}};var $a=function(e){var t=e.app;if(!e.swipeInitialized){M(e,{swipeable:!0,swipeInitialized:!0});var r,n,a,i,o,s,l,c,u,p,d,h,f,m=e.params,g=e.$el,v=e.$backdropEl,y=e.side,b=e.effect,_={},x=0;t.on("touchstart:passive",C),t.on("touchmove:active",k),t.on("touchend:passive",T),t.on("gesturestart",S),t.on("gestureend",P),e.on("panelDestroy",(function(){t.off("touchstart:passive",C),t.off("touchmove:active",k),t.off("touchend:passive",T),t.off("gesturestart",S),t.off("gestureend",P)}))}function C(c){if(e.swipeable&&!a&&t.panel.allowOpen&&(m.swipe||m.swipeOnlyClose)&&!n&&!(Ot(".modal-in:not(.toast):not(.notification), .photo-browser-in").length>0)){var u=(r=t.panel.get("left"===y?"right":"left")||{}).opened&&r.$el&&!r.$el.hasClass("panel-in-breakpoint");if((e.opened||!u)&&(m.swipeOnlyClose||!u)&&(!c.target||"input"!==c.target.nodeName.toLowerCase()||"range"!==c.target.type)&&!(Ot(c.target).closest(".range-slider, .tabs-swipeable-wrap, .calendar-months, .no-swipe-panel, .card-opened").length>0)&&(_.x="touchstart"===c.type?c.targetTouches[0].pageX:c.pageX,_.y="touchstart"===c.type?c.targetTouches[0].pageY:c.pageY,!m.swipeOnlyClose||e.opened)){if(m.swipeActiveArea&&!e.opened){if("left"===y&&_.x>m.swipeActiveArea)return;if("right"===y&&_.x<t.width-m.swipeActiveArea)return}x=0,f=Ot(e.getViewEl()),i=!1,n=!0,o=void 0,s=!1,l=E(),h=void 0}}}function k(r){if(n&&!a&&!s&&!((x+=1)<2))if(r.f7PreventSwipePanel||t.preventSwipePanelBySwipeBack||t.preventSwipePanel)n=!1;else{var l="touchmove"===r.type?r.targetTouches[0].pageX:r.pageX,w="touchmove"===r.type?r.targetTouches[0].pageY:r.pageY;if(void 0===o&&(o=!!(o||Math.abs(w-_.y)>Math.abs(l-_.x))),o)n=!1;else{if(!h){if(h=l>_.x?"to-right":"to-left",m.swipeActiveArea>0&&!e.opened){if("left"===y&&_.x>m.swipeActiveArea)return void(n=!1);if("right"===y&&_.x<t.width-m.swipeActiveArea)return void(n=!1)}if(g.hasClass("panel-in-breakpoint"))return void(n=!1);if("left"===y&&"to-left"===h&&!g.hasClass("panel-in")||"right"===y&&"to-right"===h&&!g.hasClass("panel-in"))return void(n=!1)}var E=e.opened?0:-m.swipeThreshold;"right"===y&&(E=-E),i||(e.opened||(e.insertToRoot(),g.addClass("panel-in-swipe"),v.css("visibility","visible"),g.trigger("panel:swipeopen"),e.emit("local::swipeOpen panelSwipeOpen",e)),d=g[0].offsetWidth,"reveal"===b&&g.hasClass("panel-in-collapsed")&&(d-=parseFloat(f.css("margin-"+y))),g.transition(0)),i=!0,r.preventDefault(),c=l-_.x+E,"right"===y?"cover"===b?((u=c+(e.opened?0:d))<0&&(u=0),u>d&&(u=d)):((u=c-(e.opened?d:0))>0&&(u=0),u<-d&&(u=-d)):((u=c+(e.opened?d:0))<0&&(u=0),u>d&&(u=d));var C=Math.abs(u/d);if("reveal"===b?(m.swipeNoFollow||(f.transform("translate3d("+u+"px,0,0)").transition(0),v.transform("translate3d("+u+"px,0,0)").transition(0)),g.trigger("panel:swipe",Math.abs(u/d)),e.emit("local::swipe panelSwipe",e,Math.abs(u/d))):("left"===y&&(u-=d),m.swipeNoFollow||(g.transform("translate3d("+u+"px,0,0)").transition(0),v.transition(0),p=1-Math.abs(u/d),v.css({opacity:p})),g.trigger("panel:swipe",Math.abs(u/d)),e.emit("local::swipe panelSwipe",e,Math.abs(u/d))),m.swipeNoFollow)(e.opened&&0===C||!e.opened&&1===C)&&(s=!0,T(r))}}}function T(t){if(!n||!i)return n=!1,void(i=!1);var r="gesturestart"===t.type||a;n=!1,i=!1;var o,s=(new Date).getTime()-l,p=(0===u||Math.abs(u)===d)&&!m.swipeNoFollow,h=m.swipeThreshold||0;"swap"===(o=r?"reset":e.opened?"cover"===b?0===u?"reset":s<300&&Math.abs(u)>0?"swap":s>=300&&Math.abs(u)<d/2?"reset":"swap":u===-d?"reset":s<300&&Math.abs(u)>=0||s>=300&&Math.abs(u)<=d/2?"left"===y&&u===d?"reset":"swap":"reset":Math.abs(c)<h?"reset":"cover"===b?0===u||s<300&&Math.abs(u)>0||s>=300&&Math.abs(u)<d/2?"swap":"reset":0===u?"reset":s<300&&Math.abs(u)>0||s>=300&&Math.abs(u)>=d/2?"swap":"reset")&&(e.opened?e.close(!p):e.open(!p));var _=!0;if("reset"===o&&!e.opened)if(p)g.removeClass("panel-in-swipe");else{_=!1;var x="reveal"===b?f:g;e.setStateClasses("before-closing"),x.transitionEnd((function(){g.hasClass("panel-in")||(g.removeClass("panel-in-swipe"),e.setStateClasses("after-closing"))}))}"reveal"===b&&w((function(){f.transition(""),f.transform("")})),_&&g.removeClass("panel-in-swipe"),g.transition("").transform(""),v.transform("").transition("").css({opacity:"",visibility:""})}function S(e){a=!0,T(e)}function P(){a=!1}};var Fa=function(e){var t=e.app,r=F();if(!e.resizableInitialized){M(e,{resizable:!0,resizableWidth:null,resizableInitialized:!0});var n=Ot("html"),a=e.$el,i=e.$backdropEl,o=e.side,s=e.effect;if(a){var l,c,u,p,d,h,f,m,g={};0===e.$el.find(".panel-resize-handler").length&&e.$el.append('<div class="panel-resize-handler"></div>'),e.$resizeHandlerEl=e.$el.children(".panel-resize-handler"),a.addClass("panel-resizable");var v=!!r.passiveListener&&{passive:!0};e.$el.on(t.touchEvents.start,".panel-resize-handler",b,v),t.on("touchmove:active",_),t.on("touchend:passive",x),t.on("resize",E),e.on("beforeOpen",E),e.once("panelDestroy",(function(){a.removeClass("panel-resizable"),e.$resizeHandlerEl.remove(),e.$el.off(t.touchEvents.start,".panel-resize-handler",b,v),t.off("touchmove:active",_),t.off("touchend:passive",x),t.off("resize",E),e.off("beforeOpen",E)}))}}function y(e){if(!e)return null;if(e.indexOf("%")>=0||e.indexOf("vw")>=0)return parseInt(e,10)/100*t.width;var r=parseInt(e,10);return Number.isNaN(r)?null:r}function b(t){e.resizable&&a.hasClass("panel-resizable")&&(g.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,g.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY,c=!1,l=!0,h=y(a.css("min-width")),f=y(a.css("max-width")),m=a.hasClass("panel-in-breakpoint"))}function _(r){if(l){var v="touchmove"===r.type?r.targetTouches[0].pageX:r.pageX;c||(p=a[0].offsetWidth,a.transition(0),a.addClass("panel-resizing"),n.css("cursor","col-resize"),("reveal"===s||m)&&(d=Ot(e.getViewEl()),e.$containerEl&&e.$containerEl.hasClass("page")&&d.add(e.$containerEl.children(".page-content, .tabs, .fab"))),"reveal"!==s||m||(i.transition(0),d.transition(0))),c=!0,r.preventDefault(),u=v-g.x;var y="left"===o?p+u:p-u;h&&!Number.isNaN(h)&&(y=Math.max(y,h)),f&&!Number.isNaN(f)&&(y=Math.min(y,f)),y=Math.min(Math.max(y,0),t.width),e.resizableWidth=y,a[0].style.width=y+"px","reveal"!==s||m?m&&d&&d.css("margin-"+o,y+"px"):(d&&d.transform("translate3d("+("left"===o?y:-y)+"px, 0, 0)"),i&&i.transform("translate3d("+("left"===o?y:-y)+"px, 0, 0)")),a.trigger("panel:resize",y),e.emit("local::resize panelResize",e,y)}}function x(){if(Ot("html").css("cursor",""),!l||!c)return l=!1,void(c=!1);l=!1,c=!1,n[0].style.setProperty("--f7-panel-"+o+"-width",e.resizableWidth+"px"),a[0].style.width="","reveal"!==s||m||(d.transform(""),i.transform("")),a.removeClass("panel-resizing"),w((function(){a.transition(""),"reveal"===s&&(i.transition(""),d&&d.transition(""))}))}function E(){e.opened&&e.resizableWidth&&(h=y(a.css("min-width")),f=y(a.css("max-width")),h&&!Number.isNaN(h)&&e.resizableWidth<h&&(e.resizableWidth=Math.max(e.resizableWidth,h)),f&&!Number.isNaN(f)&&e.resizableWidth>f&&(e.resizableWidth=Math.min(e.resizableWidth,f)),e.resizableWidth=Math.min(Math.max(e.resizableWidth,0),t.width),n[0].style.setProperty("--f7-panel-"+o+"-width",e.resizableWidth+"px"))}};function Na(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Va(e,t){return(Va=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ja=function(e){var t,r;function n(t,r){var n;void 0===r&&(r={});var a,i=M({on:{}},t.params.panel,r),o=Na(n=e.call(this,i,[t])||this);if(o.params=i,o.$containerEl=o.params.containerEl?Ot(o.params.containerEl).eq(0):t.$el,o.containerEl=o.$containerEl[0],o.containerEl||(o.$containerEl=t.$el,o.containerEl=t.$el[0]),o.params.el?a=Ot(o.params.el).eq(0):o.params.content&&(a=Ot(o.params.content).filter((function(e){return 1===e.nodeType})).eq(0)),0===a.length)return o||Na(n);if(a[0].f7Panel)return a[0].f7Panel||Na(n);a[0].f7Panel=o;var s,l=o.params,c=l.side,u=l.effect,p=l.resizable;return void 0===c&&(c=a.hasClass("panel-left")?"left":"right"),void 0===u&&(u=a.hasClass("panel-cover")?"cover":"reveal"),void 0===p&&(p=a.hasClass("panel-resizable")),o.params.backdrop&&o.params.backdropEl?s=Ot(o.params.backdropEl):o.params.backdrop&&0===(s=o.$containerEl.children(".panel-backdrop")).length&&(s=Ot('<div class="panel-backdrop"></div>'),o.$containerEl.prepend(s)),M(o,{app:t,side:c,effect:u,resizable:p,$el:a,el:a[0],opened:!1,$backdropEl:s,backdropEl:s&&s[0]}),o.useModules(),o.init(),o||Na(n)}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,Va(t,r);var a=n.prototype;return a.getViewEl=function(){var e=this;return e.$containerEl.children(".views").length>0?e.$containerEl.children(".views")[0]:e.$containerEl.children(".view")[0]},a.setStateClasses=function(e){var t=this,r=t.side,n=t.el,a=t.getViewEl(),i=a&&a.contains(n),o=!a||i?t.$containerEl:Ot("html");"open"===e&&o.addClass("with-panel with-panel-"+t.side+"-"+t.effect),"before-closing"===e&&o.addClass("with-panel-closing"),"closing"===e&&(o.addClass("with-panel-closing"),o.removeClass("with-panel with-panel-"+t.side+"-"+t.effect)),"after-closing"===e&&o.removeClass("with-panel-closing"),"closed"===e&&o.removeClass("with-panel-"+r+"-reveal with-panel-"+r+"-cover with-panel")},a.enableVisibleBreakpoint=function(){var e=this;return e.visibleBreakpointDisabled=!1,e.setVisibleBreakpoint(),e},a.disableVisibleBreakpoint=function(){var e=this;return e.visibleBreakpointDisabled=!0,e.setVisibleBreakpoint(),e},a.toggleVisibleBreakpoint=function(){var e=this;return e.visibleBreakpointDisabled=!e.visibleBreakpointDisabled,e.setVisibleBreakpoint(),e},a.setVisibleBreakpoint=function(e){void 0===e&&(e=!0);var t=this,r=t.app;t.visibleBreakpointResizeHandler||(t.visibleBreakpointResizeHandler=function(){t.setVisibleBreakpoint()},r.on("resize",t.visibleBreakpointResizeHandler));var n,a,i=t.side,o=t.$el,s=t.$containerEl,l=t.params,c=t.visibleBreakpointDisabled,u=l.visibleBreakpoint,p=Ot(t.getViewEl()),d=o.hasClass("panel-in-breakpoint");if(s&&s.hasClass("page")&&p.add(s.children(".page-content, .tabs, .fab")),r.width>=u&&null!=u&&!c)d?p.css(((n={})["margin-"+i]=o.width()+"px",n)):(t.setStateClasses("closed"),o.addClass("panel-in-breakpoint").removeClass("panel-in panel-in-collapsed"),t.onOpen(!1),t.onOpened(),p.css(((a={})["margin-"+i]=o.width()+"px",a)),r.allowPanelOpen=!0,e&&(t.emit("local::breakpoint panelBreakpoint",t),t.$el.trigger("panel:breakpoint")));else if(d){var h;o.removeClass("panel-in-breakpoint panel-in"),t.onClose(),t.onClosed(),p.css(((h={})["margin-"+i]="",h)),e&&(t.emit("local::breakpoint panelBreakpoint",t),t.$el.trigger("panel:breakpoint"))}},a.enableCollapsedBreakpoint=function(){var e=this;return e.collapsedBreakpointDisabled=!1,e.setCollapsedBreakpoint(),e},a.disableCollapsedBreakpoint=function(){var e=this;return e.collapsedBreakpointDisabled=!0,e.setCollapsedBreakpoint(),e},a.toggleCollapsedBreakpoint=function(){var e=this;return e.collapsedBreakpointDisabled=!e.collapsedBreakpointDisabled,e.setCollapsedBreakpoint(),e},a.setCollapsedBreakpoint=function(e){void 0===e&&(e=!0);var t=this,r=t.app;t.collapsedBreakpointResizeHandler||(t.collapsedBreakpointResizeHandler=function(){t.setCollapsedBreakpoint()},r.on("resize",t.collapsedBreakpointResizeHandler));var n=t.$el,a=t.params,i=t.collapsedBreakpointDisabled;if(!n.hasClass("panel-in-breakpoint")){var o=a.collapsedBreakpoint,s=n.hasClass("panel-in-collapsed");r.width>=o&&null!=o&&!i?s||(t.setStateClasses("closed"),n.addClass("panel-in-collapsed").removeClass("panel-in"),t.collapsed=!0,r.allowPanelOpen=!0,e&&(t.emit("local::collapsedBreakpoint panelCollapsedBreakpoint",t),t.$el.trigger("panel:collapsedbreakpoint"))):s&&(n.removeClass("panel-in-collapsed panel-in"),t.collapsed=!1,e&&(t.emit("local::collapsedBreakpoint panelCollapsedBreakpoint",t),t.$el.trigger("panel:collapsedbreakpoint")))}},a.enableResizable=function(){var e=this;return e.resizableInitialized?(e.resizable=!0,e.$el.addClass("panel-resizable")):Fa(e),e},a.disableResizable=function(){var e=this;return e.resizable=!1,e.$el.removeClass("panel-resizable"),e},a.enableSwipe=function(){var e=this;return e.swipeInitialized?e.swipeable=!0:$a(e),e},a.disableSwipe=function(){return this.swipeable=!1,this},a.onOpen=function(e){void 0===e&&(e=!0);var t=this,r=t.app;t.opened=!0,r.panel.allowOpen=!1,t.$el.trigger("panel:beforeopen"),t.emit("local::beforeOpen panelBeforeOpen",t),e&&t.setStateClasses("open"),t.$el.trigger("panel:open"),t.emit("local::open panelOpen",t)},a.onOpened=function(){var e=this;e.app.panel.allowOpen=!0,e.$el.trigger("panel:opened"),e.emit("local::opened panelOpened",e)},a.onClose=function(){var e=this,t=e.app;e.opened=!1,t.panel.allowOpen=!1,e.$el.trigger("panel:beforeclose"),e.emit("local::beforeClose panelBeforeClose",e),e.setStateClasses("closing"),e.$el.trigger("panel:close"),e.emit("local::close panelClose",e)},a.onClosed=function(){var e=this,t=e.app;if(t.panel.allowOpen=!0,e.setStateClasses("after-closing"),e.$el.removeClass("panel-out"),e.$backdropEl){var r=t.panel.get(".panel-in");(!r||r&&!r.$backdropEl)&&e.$backdropEl.removeClass("panel-backdrop-in")}e.$el.trigger("panel:closed"),e.emit("local::closed panelClosed",e)},a.toggle=function(e){void 0===e&&(e=!0);var t=this,r=t.params.visibleBreakpoint;return t.app.width>=r&&null!=r?t.toggleVisibleBreakpoint():(t.opened?t.close(e):t.open(e),t)},a.insertToRoot=function(){var e=this,t=o(),r=e.$el,n=e.$backdropEl,a=e.$containerEl,i=r.parent(),s=r.parents(t).length>0;if(!i.is(a)||r.prevAll(".views, .view").length){var l=a.children(".panel, .views, .view").eq(0),c=a.children(".panel-backdrop").eq(0);l.length?r.insertBefore(l):c?r.insertBefore(c):a.prepend(r),n&&n.length&&(!n.parent().is(a)&&0===n.nextAll(".panel").length||n.parent().is(a)&&0===n.nextAll(".panel").length)&&n.insertBefore(r),e.once("panelClosed",(function(){s?i.append(r):r.remove()}))}},a.open=function(e){void 0===e&&(e=!0);var t=this,r=t.app;if(!r.panel.allowOpen)return!1;var n=t.effect,a=t.$el,i=t.$backdropEl,o=t.opened,s=t.$containerEl;if(!a||a.hasClass("panel-in"))return t;if(t.insertToRoot(),o||a.hasClass("panel-in-breakpoint")||a.hasClass("panel-in"))return!1;var l=r.panel.get(".panel-in");l&&l!==t&&l.close(e),a[e?"removeClass":"addClass"]("not-animated"),a.addClass("panel-in"),i&&(i.addClass("panel-backdrop-in"),i[e?"removeClass":"addClass"]("not-animated")),"cover"===t.effect&&(t._clientLeft=a[0].clientLeft);var c=Ot(t.getViewEl());s&&s.hasClass("page")&&c.add(s.children(".page-content, .tabs"));var u="reveal"===n?c:a;return e?(i&&i.removeClass("not-animated"),function e(){u.transitionEnd((function(r){Ot(r.target).is(u)?a.hasClass("panel-out")?t.onClosed():t.onOpened():e()}))}(),a.removeClass("panel-out not-animated").addClass("panel-in"),t.onOpen()):(i&&i.addClass("not-animated"),a.removeClass("panel-out").addClass("panel-in not-animated"),t.onOpen(),t.onOpened()),!0},a.close=function(e){void 0===e&&(e=!0);var t=this,r=t.effect,n=t.$el,a=t.$backdropEl,i=t.opened,o=t.$containerEl;if(!i||n.hasClass("panel-in-breakpoint")||!n.hasClass("panel-in"))return t;n[e?"removeClass":"addClass"]("not-animated"),a&&a[e?"removeClass":"addClass"]("not-animated");var s=Ot(t.getViewEl());return o&&o.hasClass("page")&&s.add(o.children(".page-content, .tabs")),e?(("reveal"===r?s:n).transitionEnd((function(){n.hasClass("panel-out")?t.onClosed():n.hasClass("panel-in")&&t.onOpened(),t.setStateClasses("after-closing")})),n.removeClass("panel-in").addClass("panel-out"),t.onClose()):(n.addClass("not-animated").removeClass("panel-in").addClass("panel-out"),t.onClose(),t.onClosed()),t},a.init=function(){var e=this;void 0!==e.params.visibleBreakpoint&&e.setVisibleBreakpoint(),void 0!==e.params.collapsedBreakpoint&&e.setCollapsedBreakpoint(),e.params.swipe&&e.enableSwipe(),e.resizable&&e.enableResizable()},a.destroy=function(){var e=this,t=e.app,r=e.$containerEl;if(e.$el){if(e.emit("local::beforeDestroy panelBeforeDestroy",e),e.$el.trigger("panel:beforedestroy"),e.visibleBreakpointResizeHandler&&t.off("resize",e.visibleBreakpointResizeHandler),e.collapsedBreakpointResizeHandler&&t.off("resize",e.collapsedBreakpointResizeHandler),e.$el.hasClass("panel-in-breakpoint")||e.$el.hasClass("panel-in-collapsed")){var n,a=Ot(e.getViewEl());r&&r.hasClass("page")&&a.add(r.children(".page-content, .tabs")),e.$el.removeClass("panel-in-breakpoint panel-in-collapsed panel-in"),a.css(((n={})["margin-"+e.side]="",n)),e.emit("local::breakpoint panelBreakpoint",e),e.$el.trigger("panel:breakpoint")}e.$el.trigger("panel:destroy"),e.emit("local::destroy panelDestroy",e),e.el&&(e.el.f7Panel=null,delete e.el.f7Panel),y(e),e=null}},n}(q),Ua={name:"panel",params:{panel:{opened:void 0,side:void 0,effect:void 0,resizable:void 0,backdrop:!0,backdropEl:void 0,visibleBreakpoint:void 0,collapsedBreakpoint:void 0,swipe:!1,swipeNoFollow:!1,swipeOnlyClose:!1,swipeActiveArea:0,swipeThreshold:0,closeByBackdropClick:!0,containerEl:void 0}},static:{Panel:ja},create:function(){var e=this;M(e,{panel:{allowOpen:!0,create:function(t){return new ja(e,t)},get:function(e){if(void 0===e&&(e=".panel"),e instanceof ja)return e;"left"!==e&&"right"!==e||(e=".panel-"+e);var t=Ot(e);return 0===t.length||t.length>1?void 0:t[0].f7Panel},destroy:function(t){void 0===t&&(t=".panel");var r=e.panel.get(t);if(r&&r.destroy)return r.destroy()},open:function(t,r){void 0===t&&(t=".panel"),"left"!==t&&"right"!==t||(t=".panel-"+t);var n=e.panel.get(t);return n&&n.open?n.open(r):n?void 0:(n=e.panel.create({el:t})).open(r)},close:function(t,r){void 0===t&&(t=".panel-in"),"left"!==t&&"right"!==t||(t=".panel-"+t);var n=e.panel.get(t);return n&&n.open?n.close(r):n?void 0:(n=e.panel.create({el:t})).close(r)},toggle:function(t,r){void 0===t&&(t=".panel"),"left"!==t&&"right"!==t||(t=".panel-"+t);var n=e.panel.get(t);return n&&n.toggle?n.toggle(r):n?void 0:(n=e.panel.create({el:t})).toggle(r)}}})},on:{init:function(){var e=this;Ot(".panel-init").each((function(t){var r=Object.assign({el:t},Ot(t).dataset()||{});e.panel.create(r)}))},pageInit:function(e){var t=this;e.$el.find(".panel-init").each((function(e){var r=Object.assign({el:e},Ot(e).dataset()||{});t.panel.create(r)}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".panel-init").each((function(e){var r=t.panel.get(e);r&&r.destroy&&r.destroy()}))}},vnode:{"panel-init":{insert:function(e){var t=e.elm,r=Object.assign({el:t},Ot(t).dataset()||{});this.panel.create(r)},destroy:function(e){var t=e.elm,r=this.panel.get(t);r&&r.destroy&&r.destroy()}}},clicks:{".panel-open":function(e,t){void 0===t&&(t={});this.panel.open(t.panel,t.animate)},".panel-close":function(e,t){void 0===t&&(t={});this.panel.close(t.panel,t.animate)},".panel-toggle":function(e,t){void 0===t&&(t={});this.panel.toggle(t.panel,t.animate)},".panel-backdrop":function(){var e=this,t=Ot(".panel-in:not(.panel-out)");if(t.length){var r=t[0]&&t[0].f7Panel;t.trigger("panel:backdrop-click"),r&&r.emit("backdropClick",r),e.emit("panelBackdropClick",r||t[0]),e.params.panel.closeByBackdropClick&&e.panel.close()}}}},qa={open:function(e,t){void 0===e&&(e=".card-expandable"),void 0===t&&(t=!0);var r=this,n=N(),a=o(),i=F(),s=Ot(e).eq(0);if(s&&s.length&&!(s.hasClass("card-opened")||s.hasClass("card-opening")||s.hasClass("card-closing"))){var l,c=s.parents(".page").eq(0);if(c.length)if(!c.find(".card-opened").length)if(s.trigger("card:beforeopen",{prevent:J}),r.emit("cardBeforeOpen",s[0],J),!l){var u,p,d,h=Object.assign({animate:t},r.params.card,s.dataset()),f=s.parents(".page-content");s.attr("data-backdrop-el")&&(u=Ot(s.attr("data-backdrop-el"))),!u&&h.backdrop&&((u=f.find(".card-backdrop")).length||(u=Ot('<div class="card-backdrop"></div>'),f.append(u))),h.hideNavbarOnOpen&&((p=c.children(".navbar")).length||c[0].f7Page&&(p=c[0].f7Page.$navbarEl)),h.hideToolbarOnOpen&&((d=c.children(".toolbar")).length||(d=c.parents(".view").children(".toolbar")),d.length||(d=c.parents(".views").children(".toolbar")));var m,g=s.css("transform");g&&g.match(/[2-9]/)&&(m=!0);var v=s.children(".card-content"),y=Ot(a.createElement("div")).addClass("card-expandable-size");s.append(y);var b,_=s[0].offsetWidth,x=s[0].offsetHeight,w=c[0].offsetWidth,E=c[0].offsetHeight,C=y[0].offsetWidth||w,k=y[0].offsetHeight||E;p&&!h.hideStatusbarOnOpen&&k===E&&(b=parseInt(p.css("--f7-safe-area-top"),10),Number.isNaN(b)&&(b=0)),b&&(k-=b);var T,S,P=C/_,M=k/x,I=s.offset(),A=c.offset();if(b&&(A.top+=b/2),I.left-=A.left,m){var O=g.replace(/matrix\(|\)/g,"").split(",").map((function(e){return e.trim()}));if(O&&O.length>1){var z=parseFloat(O[0]);T=I.left-_*(1-z)/2,S=I.top-A.top-x*(1-z)/2,r.rtl&&(T-=s[0].scrollLeft)}else T=s[0].offsetLeft,S=s[0].offsetTop-(f.length?f[0].scrollTop:0)}else T=I.left,S=I.top-A.top,r.rtl&&(T-=s[0].scrollLeft);S-=(E-k)/2;var R=C-_-(T-=(w-C)/2);if(r.rtl){var L=[R,T];T=L[0],R=L[1]}var D,B,$,V,j,U,q,H,G,W,X,Z,Y=k-x-S,K=(R-T)/2,Q=(Y-S)/2;h.hideNavbarOnOpen&&p&&p.length&&(p.closest(".navbar-hidden").length?s[0].f7KeepNavbarOnClose=!0:(delete s[0].f7KeepNavbarOnClose,r.navbar.hide(p,h.animate,h.hideStatusbarOnOpen,!0))),h.hideToolbarOnOpen&&d&&d.length&&(d.closest(".toolbar-hidden").length?s[0].f7KeepToolbarOnClose=!0:(delete s[0].f7KeepToolbarOnClose,r.toolbar.hide(d,h.animate))),u&&u.removeClass("card-backdrop-out").addClass("card-backdrop-in"),s.removeClass("card-transitioning"),h.animate&&s.addClass("card-opening"),s.trigger("card:open"),r.emit("cardOpen",s[0]),v.css({width:C+"px",height:k+"px"}).transform("translate3d("+(r.rtl?T+K:-T-K)+"px, 0px, 0) scale("+1/P+", "+1/M+")"),s.transform("translate3d("+(r.rtl?-K:K)+"px, "+Q+"px, 0) scale("+P+", "+M+")"),h.animate?s.transitionEnd((function(){ee()})):ee(),s[0].detachEventHandlers=function(){r.off("resize",te),i.touch&&h.swipeToClose&&(r.off("touchstart:passive",re),r.off("touchmove:active",ne),r.off("touchend:passive",ae))},r.on("resize",te),i.touch&&h.swipeToClose&&(r.on("touchstart:passive",re),r.on("touchmove:active",ne),r.on("touchend:passive",ae))}}function J(){l=!0}function ee(){c.addClass("page-with-card-opened"),n.ios&&f.length&&(f.css("height",f[0].offsetHeight+1+"px"),setTimeout((function(){f.css("height","")}))),s.addClass("card-opened"),s.removeClass("card-opening"),s.trigger("card:opened"),r.emit("cardOpened",s[0],c[0])}function te(){if(s.removeClass("card-transitioning"),_=s[0].offsetWidth,x=s[0].offsetHeight,w=c[0].offsetWidth,E=c[0].offsetHeight,C=y[0].offsetWidth||w,k=y[0].offsetHeight||E,b=0,p&&!h.hideStatusbarOnOpen&&k===E&&(b=parseInt(p.css("--f7-safe-area-top"),10),Number.isNaN(b)&&(b=0)),b&&(k-=b),P=C/_,M=k/x,s.transform("translate3d(0px, 0px, 0) scale(1)"),I=s.offset(),A=c.offset(),b&&(A.top+=b/2),I.left-=A.left,I.top-=A.top,T=I.left-(w-C)/2,r.rtl&&(T-=s[0].scrollLeft),S=I.top-(E-k)/2,R=C-_-T,Y=k-x-S,r.rtl){var e=[R,T];T=e[0],R=e[1]}K=(R-T)/2,Q=(Y-S)/2,s.transform("translate3d("+(r.rtl?-K:K)+"px, "+Q+"px, 0) scale("+P+", "+M+")"),v.css({width:C+"px",height:k+"px"}).transform("translate3d("+(r.rtl?T+K:-T-K)+"px, 0px, 0) scale("+1/P+", "+1/M+")")}function re(e){Ot(e.target).closest(s).length&&s.hasClass("card-opened")&&(Z=s.find(h.scrollableEl),D=Z[0]&&Z[0]!==v[0]&&!Z[0].contains(e.target)?0:Z.scrollTop(),B=!0,V=e.targetTouches[0].pageX,j=e.targetTouches[0].pageY,H=void 0,W=!1,X=!1)}function ne(e){if(B){if(U=e.targetTouches[0].pageX,q=e.targetTouches[0].pageY,void 0===H&&(H=!!(H||Math.abs(q-j)>Math.abs(U-V))),X||W||(!H&&e.targetTouches[0].clientX<=50?X=!0:W=!0),!X&&!W||W&&0!==D)return B=!0,void($=!0);$||s.removeClass("card-transitioning"),$=!0,((G=W?Math.max((q-j)/150,0):Math.max((U-V)/(_/2),0))>0&&W||X)&&(W&&n.ios&&Z[0]===v[0]&&(Z.css("-webkit-overflow-scrolling","auto"),Z.scrollTop(0)),e.preventDefault()),G>1&&(G=Math.pow(G,.3)),G>(W?1.3:1.1)?(B=!1,$=!1,r.card.close(s)):s.transform("translate3d("+(r.rtl?-K:K)+"px, "+Q+"px, 0) scale("+P*(1-.2*G)+", "+M*(1-.2*G)+")")}}function ae(){B&&$&&(B=!1,$=!1,n.ios&&Z.css("-webkit-overflow-scrolling",""),G>=.8?r.card.close(s):s.addClass("card-transitioning").transform("translate3d("+(r.rtl?-K:K)+"px, "+Q+"px, 0) scale("+P+", "+M+")"))}},close:function(e,t){void 0===e&&(e=".card-expandable.card-opened"),void 0===t&&(t=!0);var r=this,n=N(),a=Ot(e).eq(0);if(a&&a.length&&a.hasClass("card-opened")&&!a.hasClass("card-opening")&&!a.hasClass("card-closing")){var i=a.children(".card-content"),o=a.parents(".page-content"),s=a.parents(".page").eq(0);if(s.length){var l,c,u,p=Object.assign({animate:t},r.params.card,a.dataset()),d=a.find(p.scrollableEl);a.attr("data-backdrop-el")&&(u=Ot(a.attr("data-backdrop-el"))),p.backdrop&&(u=a.parents(".page-content").find(".card-backdrop")),p.hideNavbarOnOpen&&((l=s.children(".navbar")).length||s[0].f7Page&&(l=s[0].f7Page.$navbarEl),l&&l.length&&!a[0].f7KeepNavbarOnClose&&r.navbar.show(l,p.animate,!0)),p.hideToolbarOnOpen&&((c=s.children(".toolbar")).length||(c=s.parents(".view").children(".toolbar")),c.length||(c=s.parents(".views").children(".toolbar")),c&&c.length&&!a[0].f7KeepToolbarOnClose&&r.toolbar.show(c,p.animate)),s.removeClass("page-with-card-opened"),n.ios&&o.length&&(o.css("height",o[0].offsetHeight+1+"px"),setTimeout((function(){o.css("height","")}))),u&&u.length&&u.removeClass("card-backdrop-in").addClass("card-backdrop-out"),a.removeClass("card-opened card-transitioning"),p.animate?a.addClass("card-closing"):a.addClass("card-no-transition"),a.transform(""),a.trigger("card:close"),r.emit("cardClose",a[0],s[0]);var h=a.hasClass("card-expandable-animate-width");h&&i.css({width:"",height:""}),i.transform("").scrollTop(0,t?300:0),d.length&&d[0]!==i[0]&&d.scrollTop(0,t?300:0),t?i.transitionEnd((function(){f()})):f(),a[0].detachEventHandlers&&(a[0].detachEventHandlers(),delete a[0].detachEventHandlers)}}function f(){h||i.css({width:"",height:""}),u&&u.length&&u.removeClass("card-backdrop-in card-backdrop-out"),a.removeClass("card-closing card-no-transition"),a.trigger("card:closed"),a.find(".card-expandable-size").remove(),r.emit("cardClosed",a[0],s[0])}},toggle:function(e,t){void 0===e&&(e=".card-expandable");var r=Ot(e).eq(0);r.length&&(r.hasClass("card-opened")?this.card.close(r,t):this.card.open(r,t))}},Ha={name:"card",params:{card:{hideNavbarOnOpen:!0,hideStatusbarOnOpen:!0,hideToolbarOnOpen:!0,scrollableEl:".card-content",swipeToClose:!0,closeByBackdropClick:!0,backdrop:!0}},create:function(){B(this,{card:qa})},on:{pageBeforeIn:function(e){var t=this;if(t.params.card.hideNavbarOnOpen&&e.navbarEl&&e.$el.find(".card-opened.card-expandable").length&&t.navbar.hide(e.navbarEl,!0,t.params.card.hideStatusbarOnOpen,!0),t.params.card.hideToolbarOnOpen&&e.$el.find(".card-opened.card-expandable").length){var r=e.$el.children(".toolbar");r.length||(r=e.$el.parents(".view").children(".toolbar")),r.length||(r=e.$el.parents(".views").children(".toolbar")),r&&r.length&&t.toolbar.hide(r)}}},clicks:{".card-close":function(e,t){this.card.close(t.card,t.animate)},".card-open":function(e,t){this.card.open(t.card,t.animate)},".card-expandable":function(e,t,r){e.hasClass("card-opened")||e.hasClass("card-opening")||e.hasClass("card-closing")||Ot(r.target).closest(".card-prevent-open, .card-close").length||this.card.open(e)},".card-backdrop-in":function(){var e=!1;this.params.card.closeByBackdropClick&&(e=!0);var t=Ot(".card-opened");t.length&&("true"===t.attr("data-close-by-backdrop-click")?e=!0:"false"===t.attr("data-close-by-backdrop-click")&&(e=!1),e&&this.card.close(t))}}},Ga={store:function(e,t){var r=l(),n=e,a=Ot(e);a.length&&a.is("form")&&a.attr("id")&&(n=a.attr("id")),this.form.data["form-"+n]=t,r.localStorage["f7form-"+n]=JSON.stringify(t)},get:function(e){var t=l(),r=e,n=Ot(e);return n.length&&n.is("form")&&n.attr("id")&&(r=n.attr("id")),t.localStorage["f7form-"+r]?JSON.parse(t.localStorage["f7form-"+r]):this.form.data["form-"+r]?this.form.data["form-"+r]:void 0},remove:function(e){var t=this,r=l(),n=e,a=Ot(e);a.length&&a.is("form")&&a.attr("id")&&(n=a.attr("id")),t.form.data["form-"+n]&&(t.form.data["form-"+n]="",delete t.form.data["form-"+n]),r.localStorage["f7form-"+n]&&(r.localStorage["f7form-"+n]="",r.localStorage.removeItem("f7form-"+n))}},Wa={init:function(e){var t=this,r=Ot(e),n=r.attr("id");if(n){var a=t.form.getFormData(n);a&&t.form.fillFromData(r,a),r.on("change submit",(function(){var e=t.form.convertToData(r);e&&(t.form.storeFormData(n,e),r.trigger("form:storedata",e),t.emit("formStoreData",r[0],e))}))}},destroy:function(e){Ot(e).off("change submit")}};function Xa(e){var t=Ot(e).eq(0);if(0!==t.length){var r={},n=["submit","image","button","file"],a=[];return t.find("input, select, textarea").each((function(e){var i=Ot(e);if(!i.hasClass("ignore-store-data")&&!i.hasClass("no-store-data")){var o=i.attr("name"),s=i.attr("type"),l=e.nodeName.toLowerCase();if(!(n.indexOf(s)>=0)&&!(a.indexOf(o)>=0)&&o)if("select"===l&&i.prop("multiple"))a.push(o),r[o]=[],t.find('select[name="'+o+'"] option').each((function(e){e.selected&&r[o].push(e.value)}));else switch(s){case"checkbox":a.push(o),r[o]=[],t.find('input[name="'+o+'"]').each((function(e){e.checked&&r[o].push(e.value)}));break;case"radio":a.push(o),t.find('input[name="'+o+'"]').each((function(e){e.checked&&(r[o]=e.value)}));break;default:r[o]=i.val()}}})),t.trigger("form:todata",r),this.emit("formToData",t[0],r),r}}function Za(e,t){var r=Ot(e).eq(0);if(r.length){var n=t,a=r.attr("id");if(!n&&a&&(n=this.form.getFormData(a)),n){var i=["submit","image","button","file"],o=[];r.find("input, select, textarea").each((function(e){var t=Ot(e);if(!t.hasClass("ignore-store-data")&&!t.hasClass("no-store-data")){var a=t.attr("name"),s=t.attr("type"),l=e.nodeName.toLowerCase();if(void 0!==n[a]&&null!==n[a]&&!(i.indexOf(s)>=0)&&!(o.indexOf(a)>=0)&&a){if("select"===l&&t.prop("multiple"))o.push(a),r.find('select[name="'+a+'"] option').each((function(e){var t=e;n[a].indexOf(e.value)>=0?t.selected=!0:t.selected=!1}));else switch(s){case"checkbox":o.push(a),r.find('input[name="'+a+'"]').each((function(e){var t=e;n[a].indexOf(e.value)>=0?t.checked=!0:t.checked=!1}));break;case"radio":o.push(a),r.find('input[name="'+a+'"]').each((function(e){var t=e;n[a]===e.value?t.checked=!0:t.checked=!1}));break;default:t.val(n[a])}"select"!==l&&"input"!==l&&"textarea"!==l||t.trigger("change","fromdata")}}})),r.trigger("form:fromdata",n),this.emit("formFromData",r[0],n)}}}function Ya(){var e=this,t=l(),r=o();Ot(r).on("submit change","form.form-ajax-submit, form.form-ajax-submit-onchange",(function(r,n){var a=Ot(this);if(("change"!==r.type||a.hasClass("form-ajax-submit-onchange"))&&("submit"===r.type&&r.preventDefault(),"change"!==r.type||"fromdata"!==n)){var i,o=(a.attr("method")||"GET").toUpperCase(),s=a.prop("enctype")||a.attr("enctype"),l=a.attr("action");if(l)i="POST"===o?"application/x-www-form-urlencoded"===s?e.form.convertToData(a[0]):new t.FormData(a[0]):T(e.form.convertToData(a[0])),e.request({method:o,url:l,contentType:s,data:i,beforeSend:function(t){a.trigger("formajax:beforesend",{data:i,xhr:t}),e.emit("formAjaxBeforeSend",a[0],i,t)},error:function(t){a.trigger("formajax:error",{data:i,xhr:t}),e.emit("formAjaxError",a[0],i,t)},complete:function(t){a.trigger("formajax:complete",{data:i,xhr:t}),e.emit("formAjaxComplete",a[0],i,t)},success:function(t,r,n){a.trigger("formajax:success",{data:i,xhr:n}),e.emit("formAjaxSuccess",a[0],i,n)}})}}))}var Ka={name:"form",create:function(){var e=this;M(e,{form:{data:{},storeFormData:Ga.store.bind(e),getFormData:Ga.get.bind(e),removeFormData:Ga.remove.bind(e),convertToData:Xa.bind(e),fillFromData:Za.bind(e),storage:{init:Wa.init.bind(e),destroy:Wa.destroy.bind(e)}}})},on:{init:function(){Ya.call(this)},tabBeforeRemove:function(e){var t=this;Ot(e).find(".form-store-data").each((function(e){t.form.storage.destroy(e)}))},tabMounted:function(e){var t=this;Ot(e).find(".form-store-data").each((function(e){t.form.storage.init(e)}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".form-store-data").each((function(e){t.form.storage.destroy(e)}))},pageInit:function(e){var t=this;e.$el.find(".form-store-data").each((function(e){t.form.storage.init(e)}))}}},Qa={ignoreTypes:["checkbox","button","submit","range","radio","image"],createTextareaResizableShadow:function(){var e=o(),t=Ot(e.createElement("textarea"));t.addClass("textarea-resizable-shadow"),t.prop({disabled:!0,readonly:!0}),Qa.textareaResizableShadow=t},textareaResizableShadow:void 0,resizeTextarea:function(e){var t=l(),r=Ot(e);Qa.textareaResizableShadow||Qa.createTextareaResizableShadow();var n=Qa.textareaResizableShadow;if(r.length&&r.hasClass("resizable")){0===Qa.textareaResizableShadow.parents().length&&this.$el.append(n);var a=t.getComputedStyle(r[0]);"padding-top padding-bottom padding-left padding-right margin-left margin-right margin-top margin-bottom width font-size font-family font-style font-weight line-height font-variant text-transform letter-spacing border box-sizing display".split(" ").forEach((function(e){var t=a[e];"font-size line-height letter-spacing width".split(" ").indexOf(e)>=0&&(t=t.replace(",",".")),n.css(e,t)}));var i=r[0].clientHeight;n.val("");var o=n[0].scrollHeight;n.val(r.val()),n.css("height",0);var s=n[0].scrollHeight;i!==s&&(s>o?r.css("height",s+"px"):s<i&&r.css("height",""),(s>o||s<i)&&(r.trigger("textarea:resize",{initialHeight:o,currentHeight:i,scrollHeight:s}),this.emit("textareaResize",{initialHeight:o,currentHeight:i,scrollHeight:s})))}},validate:function(e){var t=Ot(e);if(!t.length)return!0;var r=t.parents(".item-input"),n=t.parents(".input");function a(){t[0].f7ValidateReadonly&&(t[0].readOnly=!0)}t[0].f7ValidateReadonly&&(t[0].readOnly=!1);var i=t[0].validity,o=t.dataset().errorMessage||t[0].validationMessage||"";if(!i)return a(),!0;if(!i.valid){var s=t.nextAll(".item-input-error-message, .input-error-message");return o&&(0===s.length&&(s=Ot('<div class="'+(n.length?"input-error-message":"item-input-error-message")+'"></div>')).insertAfter(t),s.text(o)),s.length>0&&(r.addClass("item-input-with-error-message"),n.addClass("input-with-error-message")),r.addClass("item-input-invalid"),n.addClass("input-invalid"),t.addClass("input-invalid"),a(),!1}return r.removeClass("item-input-invalid item-input-with-error-message"),n.removeClass("input-invalid input-with-error-message"),t.removeClass("input-invalid"),a(),!0},validateInputs:function(e){var t=this;return Ot(e).find("input, textarea, select").map((function(e){return t.input.validate(e)})).indexOf(!1)<0},focus:function(e){var t=Ot(e),r=t.attr("type");Qa.ignoreTypes.indexOf(r)>=0||(t.parents(".item-input").addClass("item-input-focused"),t.parents(".input").addClass("input-focused"),t.addClass("input-focused"))},blur:function(e){var t=Ot(e);t.parents(".item-input").removeClass("item-input-focused"),t.parents(".input").removeClass("input-focused"),t.removeClass("input-focused")},checkEmptyState:function(e){var t=Ot(e);if(t.is("input, select, textarea, .item-input [contenteditable]")||(t=t.find("input, select, textarea, .item-input [contenteditable]").eq(0)),t.length){var r;r=t[0].hasAttribute("contenteditable")?t.find(".text-editor-placeholder").length?"":t.html():t.val();var n=t.parents(".item-input"),a=t.parents(".input");r&&"string"==typeof r&&""!==r.trim()||Array.isArray(r)&&r.length>0?(n.addClass("item-input-with-value"),a.addClass("input-with-value"),t.addClass("input-with-value"),t.trigger("input:notempty"),this.emit("inputNotEmpty",t[0])):(n.removeClass("item-input-with-value"),a.removeClass("input-with-value"),t.removeClass("input-with-value"),t.trigger("input:empty"),this.emit("inputEmpty",t[0]))}},scrollIntoView:function(e,t,r,n){void 0===t&&(t=0);var a=Ot(e),i=a.parents(".page-content, .panel, .card-expandable .card-content").eq(0);if(!i.length)return!1;var o=i[0].offsetHeight,s=i[0].scrollTop,l=parseInt(i.css("padding-top"),10),c=parseInt(i.css("padding-bottom"),10),u=i.offset().top-s,p=a.offset().top-u,d=p+s-l,h=p+s-o+c+a[0].offsetHeight,f=d+(h-d)/2;return s>d?(i.scrollTop(r?f:d,t),!0):s<h?(i.scrollTop(r?f:h,t),!0):(n&&i.scrollTop(r?f:h,t),!1)},init:function(){var e=this,t=N(),r=l(),n=o();Qa.createTextareaResizableShadow(),Ot(n).on("click",".input-clear-button",(function(){var t=Ot(this).siblings("input, textarea").eq(0),r=t.val();t.val("").trigger("input change").focus().trigger("input:clear",r),e.emit("inputClear",r)})),Ot(n).on("mousedown",".input-clear-button",(function(e){e.preventDefault()})),Ot(n).on("change input","input, textarea, select, .item-input [contenteditable]",(function(){var t=Ot(this),r=t.attr("type"),n=t[0].nodeName.toLowerCase(),a=t[0].hasAttribute("contenteditable");Qa.ignoreTypes.indexOf(r)>=0||(e.input.checkEmptyState(t),a||(null!==t.attr("data-validate-on-blur")||!t.dataset().validate&&null===t.attr("validate")||e.input.validate(t),"textarea"===n&&t.hasClass("resizable")&&e.input.resizeTextarea(t)))}),!0),Ot(n).on("focus","input, textarea, select, .item-input [contenteditable]",(function(){var a=this;e.params.input.scrollIntoViewOnFocus&&(t.android?Ot(r).once("resize",(function(){n&&n.activeElement===a&&e.input.scrollIntoView(a,e.params.input.scrollIntoViewDuration,e.params.input.scrollIntoViewCentered,e.params.input.scrollIntoViewAlways)})):e.input.scrollIntoView(a,e.params.input.scrollIntoViewDuration,e.params.input.scrollIntoViewCentered,e.params.input.scrollIntoViewAlways)),e.input.focus(a)}),!0),Ot(n).on("blur","input, textarea, select, .item-input [contenteditable]",(function(){var t=Ot(this),r=t[0].nodeName.toLowerCase();e.input.blur(t),(t.dataset().validate||null!==t.attr("validate")||null!==t.attr("data-validate-on-blur"))&&e.input.validate(t),"textarea"===r&&t.hasClass("resizable")&&Qa.textareaResizableShadow&&Qa.textareaResizableShadow.remove()}),!0),Ot(n).on("invalid","input, textarea, select",(function(t){var r=Ot(this);null!==r.attr("data-validate-on-blur")||!r.dataset().validate&&null===r.attr("validate")||(t.preventDefault(),e.input.validate(r))}),!0)}},Ja={name:"input",params:{input:{scrollIntoViewOnFocus:void 0,scrollIntoViewCentered:!1,scrollIntoViewDuration:0,scrollIntoViewAlways:!1}},create:function(){var e=this;void 0===e.params.input.scrollIntoViewOnFocus&&(e.params.input.scrollIntoViewOnFocus=N().android),B(e,{input:Qa})},on:{init:function(){this.input.init()},tabMounted:function(e){var t=this,r=Ot(e);r.find(".item-input, .input").each((function(e){Ot(e).find("input, select, textarea, [contenteditable]").each((function(e){var r=Ot(e);Qa.ignoreTypes.indexOf(r.attr("type"))>=0||t.input.checkEmptyState(r)}))})),r.find("textarea.resizable").each((function(e){t.input.resizeTextarea(e)}))},pageInit:function(e){var t=this,r=e.$el;r.find(".item-input, .input").each((function(e){Ot(e).find("input, select, textarea, [contenteditable]").each((function(e){var r=Ot(e);Qa.ignoreTypes.indexOf(r.attr("type"))>=0||t.input.checkEmptyState(r)}))})),r.find("textarea.resizable").each((function(e){t.input.resizeTextarea(e)}))},"panelBreakpoint panelCollapsedBreakpoint panelResize panelOpen panelSwipeOpen resize viewMasterDetailBreakpoint":function(e){var t=this;e&&e.$el?e.$el.find("textarea.resizable").each((function(e){t.input.resizeTextarea(e)})):Ot("textarea.resizable").each((function(e){t.input.resizeTextarea(e)}))}}};function ei(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ti(e,t){return(ti=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ri=function(e){var t,r;function n(t,r){var n;void 0===r&&(r={});var a=ei(n=e.call(this,r,[t])||this),i=F(),o={};a.useModulesParams(o),a.params=M(o,r);var s=a.params.el;if(!s)return a||ei(n);var l=Ot(s);if(0===l.length)return a||ei(n);if(l[0].f7Toggle)return l[0].f7Toggle||ei(n);var c,u=l.children('input[type="checkbox"]');M(a,{app:t,$el:l,el:l[0],$inputEl:u,inputEl:u[0],disabled:l.hasClass("disabled")||u.hasClass("disabled")||u.attr("disabled")||u[0].disabled}),Object.defineProperty(a,"checked",{enumerable:!0,configurable:!0,set:function(e){a&&void 0!==a.$inputEl&&a.checked!==e&&(u[0].checked=e,a.$inputEl.trigger("change"))},get:function(){return u[0].checked}}),l[0].f7Toggle=a;var p,d,h,f,m,g={};function v(e){c||a.disabled||(g.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,g.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,d=0,c=!0,p=void 0,f=E(),m=a.checked,h=l[0].offsetWidth,x((function(){c&&l.addClass("toggle-active-state")})))}function y(e){if(c&&!a.disabled){var r,n="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,i="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,o=t.rtl?-1:1;if(void 0===p&&(p=!!(p||Math.abs(i-g.y)>Math.abs(n-g.x))),p)c=!1;else e.preventDefault(),(d=n-g.x)*o<0&&Math.abs(d)>h/3&&m&&(r=!0),d*o>0&&Math.abs(d)>h/3&&!m&&(r=!0),r&&(g.x=n,a.checked=!m,m=!m)}}function b(){if(!c||a.disabled)return p&&l.removeClass("toggle-active-state"),void(c=!1);var e,r=t.rtl?-1:1;c=!1,l.removeClass("toggle-active-state"),E()-f<300&&(d*r<0&&m&&(e=!0),d*r>0&&!m&&(e=!0),e&&(a.checked=!m))}function _(){a.$el.trigger("toggle:change"),a.emit("local::change toggleChange",a)}return a.attachEvents=function(){var e=!!i.passiveListener&&{passive:!0};l.on(t.touchEvents.start,v,e),t.on("touchmove",y),t.on("touchend:passive",b),a.$inputEl.on("change",_)},a.detachEvents=function(){var e=!!i.passiveListener&&{passive:!0};l.off(t.touchEvents.start,v,e),t.off("touchmove",y),t.off("touchend:passive",b),a.$inputEl.off("change",_)},a.useModules(),a.init(),n}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,ti(t,r);var a=n.prototype;return a.toggle=function(){this.checked=!this.checked},a.init=function(){this.attachEvents()},a.destroy=function(){var e=this;e.$el.trigger("toggle:beforedestroy"),e.emit("local::beforeDestroy toggleBeforeDestroy",e),delete e.$el[0].f7Toggle,e.detachEvents(),y(e),e=null},n}(q),ni={name:"toggle",create:function(){this.toggle=Dt({defaultSelector:".toggle",constructor:ri,app:this,domProp:"f7Toggle"})},static:{Toggle:ri},on:{tabMounted:function(e){var t=this;Ot(e).find(".toggle-init").each((function(e){return t.toggle.create({el:e})}))},tabBeforeRemove:function(e){Ot(e).find(".toggle-init").each((function(e){e.f7Toggle&&e.f7Toggle.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".toggle-init").each((function(e){return t.toggle.create({el:e})}))},pageBeforeRemove:function(e){e.$el.find(".toggle-init").each((function(e){e.f7Toggle&&e.f7Toggle.destroy()}))}},vnode:{"toggle-init":{insert:function(e){var t=e.elm;this.toggle.create({el:t})},destroy:function(e){var t=e.elm;t.f7Toggle&&t.f7Toggle.destroy()}}}};function ai(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ii(e,t){return(ii=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var oi=function(e){var t,r;function n(t,r){var n,a=ai(n=e.call(this,r,[t])||this),i=F(),o={el:null,inputEl:null,dual:!1,step:1,label:!1,min:0,max:100,value:0,draggableBar:!0,vertical:!1,verticalReversed:!1,formatLabel:null,scale:!1,scaleSteps:5,scaleSubSteps:0,formatScaleLabel:null,limitKnobPosition:"ios"===t.theme};a.useModulesParams(o),a.params=M(o,r);var s=a.params.el;if(!s)return a||ai(n);var l=Ot(s);if(0===l.length)return a||ai(n);if(l[0].f7Range)return l[0].f7Range||ai(n);var c,u=l.dataset();"step min max value scaleSteps scaleSubSteps".split(" ").forEach((function(e){void 0===r[e]&&void 0!==u[e]&&(a.params[e]=parseFloat(u[e]))})),"dual label vertical verticalReversed scale".split(" ").forEach((function(e){void 0===r[e]&&void 0!==u[e]&&(a.params[e]=u[e])})),a.params.value||(void 0!==u.value&&(a.params.value=u.value),void 0!==u.valueLeft&&void 0!==u.valueRight&&(a.params.value=[parseFloat(u.valueLeft),parseFloat(u.valueRight)])),a.params.dual||(a.params.inputEl?c=Ot(a.params.inputEl):l.find('input[type="range"]').length&&(c=l.find('input[type="range"]').eq(0)));var p=a.params,d=p.dual,h=p.step,f=p.label,m=p.min,g=p.max,v=p.value,y=p.vertical,b=p.verticalReversed,_=p.scale,w=p.scaleSteps,E=p.scaleSubSteps,C=p.limitKnobPosition;M(a,{app:t,$el:l,el:l[0],$inputEl:c,inputEl:c?c[0]:void 0,dual:d,step:h,label:f,min:m,max:g,value:v,previousValue:v,vertical:y,verticalReversed:b,scale:_,scaleSteps:w,scaleSubSteps:E,limitKnobPosition:C}),c&&("step min max".split(" ").forEach((function(e){!r[e]&&c.attr(e)&&(a.params[e]=parseFloat(c.attr(e)),a[e]=parseFloat(c.attr(e)))})),void 0!==c.val()&&(a.params.value=parseFloat(c.val()),a.value=parseFloat(c.val()))),a.dual&&l.addClass("range-slider-dual"),a.label&&l.addClass("range-slider-label"),a.vertical?(l.addClass("range-slider-vertical"),a.verticalReversed&&l.addClass("range-slider-vertical-reversed")):l.addClass("range-slider-horizontal");var k=Ot('<div class="range-bar"></div>'),T=Ot('<div class="range-bar-active"></div>');k.append(T);var S='\n      <div class="range-knob-wrap">\n        <div class="range-knob"></div>\n        '+(a.label?'<div class="range-knob-label"></div>':"")+"\n      </div>\n    ",P=[Ot(S)];a.dual&&P.push(Ot(S)),l.append(k),P.forEach((function(e){l.append(e)}));var I,A,O=[];a.label&&(O.push(P[0].find(".range-knob-label")),a.dual&&O.push(P[1].find(".range-knob-label"))),a.scale&&a.scaleSteps>=1&&(I=Ot('\n        <div class="range-scale">\n          '+a.renderScale()+"\n        </div>\n      "),l.append(I)),M(a,{knobs:P,labels:O,$barEl:k,$barActiveEl:T,$scaleEl:I}),l[0].f7Range=a;var z,R,L,D,B,$,N,V,j,U,q,H={};function G(){N=!0}function W(e){if(!A&&(a.params.draggableBar||0!==Ot(e.target).closest(".range-knob").length)){var t;N=!1,H.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,H.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,"touchstart"===e.type&&(V=e.targetTouches[0].identifier),A=!0,z=void 0,R=l.offset(),L=R.left,D=R.top,a.vertical?(t=(H.y-D)/a.rangeHeight,a.verticalReversed||(t=1-t)):t=a.app.rtl?(L+a.rangeWidth-H.x)/a.rangeWidth:(H.x-L)/a.rangeWidth;var r=t*(a.max-a.min)+a.min;a.dual?Math.abs(a.value[0]-r)<Math.abs(a.value[1]-r)?($=0,B=a.knobs[0],r=[r,a.value[1]]):($=1,B=a.knobs[1],r=[a.value[0],r]):(B=a.knobs[0],r=t*(a.max-a.min)+a.min),x((function(){A&&B.addClass("range-knob-active-state")}),70),a.on("change",G),a.setValue(r,!0)}}function X(e){if(A){var t,r;if("touchmove"===e.type)for(var n=0;n<e.targetTouches.length;n+=1)e.targetTouches[n].identifier===V&&(t=e.targetTouches[n].pageX,r=e.targetTouches[n].pageY);else t=e.pageX,r=e.pageY;if(void 0!==t||void 0!==r)if(void 0!==z||a.vertical||(z=!!(z||Math.abs(r-H.y)>Math.abs(t-H.x))),z)A=!1;else{var i;e.preventDefault(),a.vertical?(i=(r-D)/a.rangeHeight,a.verticalReversed||(i=1-i)):i=a.app.rtl?(L+a.rangeWidth-t)/a.rangeWidth:(t-L)/a.rangeWidth;var o,s,l=i*(a.max-a.min)+a.min;if(a.dual)0===$?(o=l)>(s=a.value[1])&&(s=o):(s=l)<(o=a.value[0])&&(o=s),l=[o,s];a.setValue(l,!0)}}}function Z(e){if("touchend"===e.type){for(var t,r=0;r<e.changedTouches.length;r+=1)e.changedTouches[r].identifier===V&&(t=!0);if(!t)return}if(!A)return z&&B.removeClass("range-knob-active-state"),void(A=!1);a.off("change",G),A=!1,B.removeClass("range-knob-active-state"),N&&a.$inputEl&&!a.dual&&a.$inputEl.trigger("change"),N=!1,void 0!==a.previousValue&&(a.dual&&(a.previousValue[0]!==a.value[0]||a.previousValue[1]!==a.value[1])||!a.dual&&a.previousValue!==a.value)&&(a.$el.trigger("range:changed",a.value),a.emit("local::changed rangeChanged",a,a.value))}function Y(){a.calcSize(),a.layout()}return a.attachEvents=function(){var e=!!i.passiveListener&&{passive:!0};a.$el.on(t.touchEvents.start,W,e),t.on("touchmove",X),t.on("touchend:passive",Z),t.on("tabShow",Y),t.on("resize",Y),(j=a.$el.parents(".sheet-modal, .actions-modal, .popup, .popover, .login-screen, .dialog, .toast")).on("modal:open",Y),(U=a.$el.parents(".panel")).on("panel:open panel:resize",Y),(q=a.$el.parents(".page").eq(0)).on("page:reinit",Y)},a.detachEvents=function(){var e=!!i.passiveListener&&{passive:!0};a.$el.off(t.touchEvents.start,W,e),t.off("touchmove",X),t.off("touchend:passive",Z),t.off("tabShow",Y),t.off("resize",Y),j&&j.off("modal:open",Y),U&&U.off("panel:open panel:resize",Y),q&&q.off("page:reinit",Y),j=null,U=null,q=null},a.useModules(),a.init(),a||ai(n)}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,ii(t,r);var a=n.prototype;return a.calcSize=function(){var e=this;if(e.vertical){var t=e.$el.outerHeight();if(0===t)return;e.rangeHeight=t,e.knobHeight=e.knobs[0].outerHeight()}else{var r=e.$el.outerWidth();if(0===r)return;e.rangeWidth=r,e.knobWidth=e.knobs[0].outerWidth()}},a.layout=function(){var e=this,t=e.app,r=e.knobWidth,n=e.knobHeight,a=e.rangeWidth,i=e.rangeHeight,o=e.min,s=e.max,l=e.knobs,c=e.$barActiveEl,u=e.value,p=e.label,d=e.labels,h=e.vertical,f=e.verticalReversed,m=e.limitKnobPosition,g=h?n:r,v=h?i:a,y=h?f?"top":"bottom":t.rtl?"right":"left";if(e.dual){var b,_=[(u[0]-o)/(s-o),(u[1]-o)/(s-o)];c.css(((b={})[y]=100*_[0]+"%",b[h?"height":"width"]=100*(_[1]-_[0])+"%",b)),l.forEach((function(t,r){var n=v*_[r];if(m){var a=v*_[r]-g/2;a<0&&(n=g/2),a+g>v&&(n=v-g/2)}t.css(y,n+"px"),p&&d[r].text(e.formatLabel(u[r],d[r][0]))}))}else{var x=(u-o)/(s-o);c.css(h?"height":"width",100*x+"%");var w=v*x;if(m){var E=v*x-g/2;E<0&&(w=g/2),E+g>v&&(w=v-g/2)}l[0].css(y,w+"px"),p&&d[0].text(e.formatLabel(u,d[0][0]))}e.dual&&u.indexOf(o)>=0||!e.dual&&u===o?e.$el.addClass("range-slider-min"):e.$el.removeClass("range-slider-min"),e.dual&&u.indexOf(s)>=0||!e.dual&&u===s?e.$el.addClass("range-slider-max"):e.$el.removeClass("range-slider-max")},a.setValue=function(e,t){var r,n,a=this,i=a.step,o=a.min,s=a.max;if(a.dual){n=[a.value[0],a.value[1]];var l=e;if(Array.isArray(l)||(l=[e,e]),e[0]>e[1]&&(l=[l[0],l[0]]),(l=l.map((function(e){return Math.max(Math.min(Math.round(e/i)*i,s),o)})))[0]===a.value[0]&&l[1]===a.value[1])return a;l.forEach((function(e,t){a.value[t]=e})),r=n[0]!==l[0]||n[1]!==l[1],a.layout()}else{n=a.value;var c=Math.max(Math.min(Math.round(e/i)*i,s),o);a.value=c,a.layout(),r=n!==c}return r&&(a.previousValue=n),r?(a.$el.trigger("range:change",a.value),a.$inputEl&&!a.dual&&(a.$inputEl.val(a.value),t?a.$inputEl.trigger("input"):a.$inputEl.trigger("input change")),t||(a.$el.trigger("range:changed",a.value),a.emit("local::changed rangeChanged",a,a.value)),a.emit("local::change rangeChange",a,a.value),a):a},a.getValue=function(){return this.value},a.formatLabel=function(e,t){var r=this;return r.params.formatLabel?r.params.formatLabel.call(r,e,t):e},a.formatScaleLabel=function(e){var t=this;return t.params.formatScaleLabel?t.params.formatScaleLabel.call(t,e):e},a.renderScale=function(){var e=this,t=e.app,r=e.verticalReversed,n=e.vertical?r?"top":"bottom":t.rtl?"right":"left",a="";return Array.from({length:e.scaleSteps+1}).forEach((function(t,r){var i=(e.max-e.min)/e.scaleSteps,o=e.min+i*r,s=(o-e.min)/(e.max-e.min);a+='<div class="range-scale-step" style="'+n+": "+100*s+'%">'+e.formatScaleLabel(o)+"</div>",e.scaleSubSteps&&e.scaleSubSteps>1&&r<e.scaleSteps&&Array.from({length:e.scaleSubSteps-1}).forEach((function(t,r){var s=i/e.scaleSubSteps,l=(o+s*(r+1)-e.min)/(e.max-e.min);a+='<div class="range-scale-step range-scale-substep" style="'+n+": "+100*l+'%"></div>'}))})),a},a.updateScale=function(){var e=this;if(!e.scale||e.scaleSteps<1)return e.$scaleEl&&e.$scaleEl.remove(),void delete e.$scaleEl;e.$scaleEl||(e.$scaleEl=Ot('<div class="range-scale"></div>'),e.$el.append(e.$scaleEl)),e.$scaleEl.html(e.renderScale())},a.init=function(){var e=this;return e.calcSize(),e.layout(),e.attachEvents(),e},a.destroy=function(){var e=this;e.$el.trigger("range:beforedestroy"),e.emit("local::beforeDestroy rangeBeforeDestroy",e),delete e.$el[0].f7Range,e.detachEvents(),y(e),e=null},n}(q),si={name:"range",create:function(){var e=this;e.range=M(Dt({defaultSelector:".range-slider",constructor:oi,app:e,domProp:"f7Range"}),{getValue:function(t){void 0===t&&(t=".range-slider");var r=e.range.get(t);if(r)return r.getValue()},setValue:function(t,r){void 0===t&&(t=".range-slider");var n=e.range.get(t);if(n)return n.setValue(r)}})},static:{Range:oi},on:{tabMounted:function(e){var t=this;Ot(e).find(".range-slider-init").each((function(e){return new oi(t,{el:e})}))},tabBeforeRemove:function(e){Ot(e).find(".range-slider-init").each((function(e){e.f7Range&&e.f7Range.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".range-slider-init").each((function(e){return new oi(t,{el:e})}))},pageBeforeRemove:function(e){e.$el.find(".range-slider-init").each((function(e){e.f7Range&&e.f7Range.destroy()}))}},vnode:{"range-slider-init":{insert:function(e){var t=e.elm;this.range.create({el:t})},destroy:function(e){var t=e.elm;t.f7Range&&t.f7Range.destroy()}}}};function li(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ci(e,t){return(ci=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ui=function(e){var t,r;function n(t,r){var n,a=li(n=e.call(this,r,[t])||this),i={el:null,inputEl:null,valueEl:null,value:0,formatValue:null,step:1,min:0,max:100,watchInput:!0,autorepeat:!1,autorepeatDynamic:!1,wraps:!1,manualInputMode:!1,decimalPoint:4,buttonsEndInputMode:!0};a.useModulesParams(i),a.params=M(i,r),a.params.value<a.params.min&&(a.params.value=a.params.min),a.params.value>a.params.max&&(a.params.value=a.params.max);var o=a.params.el;if(!o)return a||li(n);var s,l,c=Ot(o);if(0===c.length)return a||li(n);if(c[0].f7Stepper)return c[0].f7Stepper||li(n);if(a.params.inputEl?s=Ot(a.params.inputEl):c.find(".stepper-input-wrap").find("input, textarea").length&&(s=c.find(".stepper-input-wrap").find("input, textarea").eq(0)),s&&s.length){"step min max".split(" ").forEach((function(e){!r[e]&&s.attr(e)&&(a.params[e]=parseFloat(s.attr(e)))}));var u=parseInt(a.params.decimalPoint,10);Number.isNaN(u)?a.params.decimalPoint=0:a.params.decimalPoint=u;var p=parseFloat(s.val());void 0!==r.value||Number.isNaN(p)||!p&&0!==p||(a.params.value=p)}a.params.valueEl?l=Ot(a.params.valueEl):c.find(".stepper-value").length&&(l=c.find(".stepper-value").eq(0));var d=c.find(".stepper-button-plus"),h=c.find(".stepper-button-minus"),f=a.params,m=f.step,g=f.min,v=f.max,y=f.value,b=f.decimalPoint;M(a,{app:t,$el:c,el:c[0],$buttonPlusEl:d,buttonPlusEl:d[0],$buttonMinusEl:h,buttonMinusEl:h[0],$inputEl:s,inputEl:s?s[0]:void 0,$valueEl:l,valueEl:l?l[0]:void 0,step:m,min:g,max:v,value:y,decimalPoint:b,typeModeChanged:!1}),c[0].f7Stepper=a;var _,x,w,E,C,k={},T=null,S=!1,P=!1;function I(e,t,r,n,a,i){clearTimeout(C),C=setTimeout((function(){1===e&&(w=!0,S=!0),clearInterval(E),i(),E=setInterval((function(){i()}),a),e<t&&I(e+1,t,r,n,a/2,i)}),1===e?r:n)}function A(e){_||(P||(Ot(e.target).closest(d).length?T="increment":Ot(e.target).closest(h).length&&(T="decrement"),T&&(k.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,k.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,_=!0,x=void 0,I(1,a.params.autorepeatDynamic?4:1,500,1e3,300,(function(){a[T]()})))))}function O(e){if(_&&!P){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,r="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;void 0!==x||S||(x=!!(x||Math.abs(r-k.y)>Math.abs(t-k.x)));var n=Math.pow(Math.pow(t-k.x,2)+Math.pow(r-k.y,2),.5);(x||n>20)&&(_=!1,clearTimeout(C),clearInterval(E))}}function z(){clearTimeout(C),clearInterval(E),T=null,S=!1,_=!1}function R(){P?a.params.buttonsEndInputMode&&(P=!1,a.endTypeMode(!0)):w?w=!1:a.decrement(!0)}function L(){P?a.params.buttonsEndInputMode&&(P=!1,a.endTypeMode(!0)):w?w=!1:a.increment(!0)}function D(e){!e.target.readOnly&&a.params.manualInputMode&&(P=!0,"number"==typeof e.target.selectionStart&&(e.target.selectionStart=e.target.value.length,e.target.selectionEnd=e.target.value.length))}function B(e){13!==e.keyCode&&13!==e.which||(e.preventDefault(),P=!1,a.endTypeMode())}function $(){P=!1,a.endTypeMode(!0)}function F(e){P?a.typeValue(e.target.value):e.detail&&e.detail.sentByF7Stepper||a.setValue(e.target.value,!0)}return a.attachEvents=function(){h.on("click",R),d.on("click",L),a.params.watchInput&&s&&s.length&&(s.on("input",F),s.on("click",D),s.on("blur",$),s.on("keyup",B)),a.params.autorepeat&&(t.on("touchstart:passive",A),t.on("touchmove:active",O),t.on("touchend:passive",z))},a.detachEvents=function(){h.off("click",R),d.off("click",L),a.params.watchInput&&s&&s.length&&(s.off("input",F),s.off("click",D),s.off("blur",$),s.off("keyup",B))},a.useModules(),a.init(),a||li(n)}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,ci(t,r);var a=n.prototype;return a.minus=function(){return this.decrement()},a.plus=function(){return this.increment()},a.decrement=function(){var e=this;return e.setValue(e.value-e.step,!1,!0)},a.increment=function(){var e=this;return e.setValue(e.value+e.step,!1,!0)},a.setValue=function(e,t,r){var n=this,a=n.step,i=n.min,o=n.max,s=n.value,l=Math.round(e/a)*a;if(n.params.wraps&&r?(l>o&&(l=i),l<i&&(l=o)):l=Math.max(Math.min(l,o),i),Number.isNaN(l)&&(l=s),n.value=l,!(s!==l)&&!t)return n;n.$el.trigger("stepper:change",n.value);var c=n.formatValue(n.value);return n.$inputEl&&n.$inputEl.length&&(n.$inputEl.val(c),n.$inputEl.trigger("input change",{sentByF7Stepper:!0})),n.$valueEl&&n.$valueEl.length&&n.$valueEl.html(c),n.emit("local::change stepperChange",n,n.value),n},a.endTypeMode=function(e){var t=this,r=t.min,n=t.max,a=parseFloat(t.value);if(Number.isNaN(a)&&(a=0),a=Math.max(Math.min(a,n),r),t.value=a,!t.typeModeChanged)return t.$inputEl&&t.$inputEl.length&&!e&&t.$inputEl.blur(),t;t.typeModeChanged=!1,t.$el.trigger("stepper:change",t.value);var i=t.formatValue(t.value);return t.$inputEl&&t.$inputEl.length&&(t.$inputEl.val(i),t.$inputEl.trigger("input change",{sentByF7Stepper:!0}),e||t.$inputEl.blur()),t.$valueEl&&t.$valueEl.length&&t.$valueEl.html(i),t.emit("local::change stepperChange",t,t.value),t},a.typeValue=function(e){var t=this;t.typeModeChanged=!0;var r=String(e);if(r.lastIndexOf(".")+1!==r.length&&r.lastIndexOf(",")+1!==r.length){var n=parseFloat(r.replace(",","."));if(0===n)return t.value=r.replace(",","."),t.$inputEl.val(t.value),t;if(Number.isNaN(n))return t.value=0,t.$inputEl.val(t.value),t;var a=Math.pow(10,t.params.decimalPoint);return n=Math.round(n*a).toFixed(t.params.decimalPoint+1)/a,t.value=parseFloat(String(n).replace(",",".")),t.$inputEl.val(t.value),t}return r.lastIndexOf(".")!==r.indexOf(".")||r.lastIndexOf(",")!==r.indexOf(",")?(r=r.slice(0,-1),t.value=r,t.$inputEl.val(t.value),t):(t.value=r,t.$inputEl.val(r),t)},a.getValue=function(){return this.value},a.formatValue=function(e){var t=this;return t.params.formatValue?t.params.formatValue.call(t,e):e},a.init=function(){var e=this;if(e.attachEvents(),e.$valueEl&&e.$valueEl.length){var t=e.formatValue(e.value);e.$valueEl.html(t)}return e},a.destroy=function(){var e=this;e.$el.trigger("stepper:beforedestroy"),e.emit("local::beforeDestroy stepperBeforeDestroy",e),delete e.$el[0].f7Stepper,e.detachEvents(),y(e),e=null},n}(q),pi={name:"stepper",create:function(){var e=this;e.stepper=M(Dt({defaultSelector:".stepper",constructor:ui,app:e,domProp:"f7Stepper"}),{getValue:function(t){void 0===t&&(t=".stepper");var r=e.stepper.get(t);if(r)return r.getValue()},setValue:function(t,r){void 0===t&&(t=".stepper");var n=e.stepper.get(t);if(n)return n.setValue(r)}})},static:{Stepper:ui},on:{tabMounted:function(e){var t=this;Ot(e).find(".stepper-init").each((function(e){var r=Ot(e).dataset();t.stepper.create(M({el:e},r||{}))}))},tabBeforeRemove:function(e){Ot(e).find(".stepper-init").each((function(e){e.f7Stepper&&e.f7Stepper.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".stepper-init").each((function(e){var r=Ot(e).dataset();t.stepper.create(M({el:e},r||{}))}))},pageBeforeRemove:function(e){e.$el.find(".stepper-init").each((function(e){e.f7Stepper&&e.f7Stepper.destroy()}))}},vnode:{"stepper-init":{insert:function(e){var t=e.elm,r=Ot(t).dataset();this.stepper.create(M({el:t},r||{}))},destroy:function(e){var t=e.elm;t.f7Stepper&&t.f7Stepper.destroy()}}}};function di(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fi(e,t){return(fi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mi=function(e){var t,r;function n(t,r){var n;void 0===r&&(r={});var a=hi(n=e.call(this,r,[t])||this),i=M({on:{}},t.params.smartSelect);void 0===i.searchbarDisableButton&&(i.searchbarDisableButton="aurora"!==t.theme),a.useModulesParams(i),a.params=M({},i,r),a.app=t;var o=Ot(a.params.el).eq(0);if(0===o.length)return a||hi(n);if(o[0].f7SmartSelect)return o[0].f7SmartSelect||hi(n);var s,l=o.find("select").eq(0);if(0===l.length)return a||hi(n);a.params.setValueText&&(0===(s=Ot(a.params.valueEl)).length&&(s=o.find(".item-after")),0===s.length&&(s=Ot('<div class="item-after"></div>')).insertAfter(o.find(".item-title")));var c=r.url;c||(o.attr("href")&&"#"!==o.attr("href")?c=o.attr("href"):l.attr("name")&&(c=l.attr("name").toLowerCase()+"-select/")),c||(c=a.params.url);var u=l[0].multiple,d=u?"checkbox":"radio",h=p();function f(){a.open()}function m(){var e=a.$selectEl.val();a.$el.trigger("smartselect:change",e),a.emit("local::change smartSelectChange",a,e),a.vl&&a.vl.clearCache(),a.setValueText()}function g(){var e,t,r,n=this,i=n.value,o=[];if("checkbox"===n.type){for(var s=0;s<a.selectEl.options.length;s+=1)(e=a.selectEl.options[s]).value===i&&(e.selected=n.checked),e.selected&&(t=(r=e.dataset?e.dataset.displayAs:Ot(e).data("display-value-as"))&&void 0!==r?r:e.textContent,o.push(t.trim()));a.maxLength&&a.checkMaxLength()}else(e=a.$selectEl.find('option[value="'+i+'"]')[0])||(e=a.$selectEl.find("option").filter((function(e){return e.value===i}))[0]),o=[t=(r=e.dataset?e.dataset.displayAs:Ot(e).data("display-as"))&&void 0!==r?r:e.textContent],a.selectEl.value=i;a.$selectEl.trigger("change"),a.params.setValueText&&a.$valueEl.text(a.formatValueText(o)),a.params.closeOnSelect&&"radio"===a.inputType&&a.close()}return M(a,{$el:o,el:o[0],$selectEl:l,selectEl:l[0],$valueEl:s,valueEl:s&&s[0],url:c,multiple:u,inputType:d,id:h,inputName:d+"-"+h,selectName:l.attr("name"),maxLength:l.attr("maxlength")||r.maxLength}),o[0].f7SmartSelect=a,a.attachEvents=function(){o.on("click",f),o.on("change","select",m)},a.detachEvents=function(){o.off("click",f),o.off("change","select",m)},a.attachInputsEvents=function(){a.$containerEl.on("change",'input[type="checkbox"], input[type="radio"]',g)},a.detachInputsEvents=function(){a.$containerEl.off("change",'input[type="checkbox"], input[type="radio"]',g)},a.useModules(),a.init(),a||hi(n)}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,fi(t,r);var a,i,o,s=n.prototype;return s.setValue=function(e){var t,r,n,a=this,i=e,o=[];if(a.multiple){Array.isArray(i)||(i=[i]);for(var s=0;s<a.selectEl.options.length;s+=1)t=a.selectEl.options[s],i.indexOf(t.value)>=0?t.selected=!0:t.selected=!1,t.selected&&(n=(r=t.dataset?t.dataset.displayAs:Ot(t).data("display-value-as"))&&void 0!==r?r:t.textContent,o.push(n.trim()))}else(t=a.$selectEl.find('option[value="'+i+'"]')[0])&&(o=[n=(r=t.dataset?t.dataset.displayAs:Ot(t).data("display-as"))&&void 0!==r?r:t.textContent]),a.selectEl.value=i;return a.params.setValueText&&a.$valueEl.text(a.formatValueText(o)),a.$selectEl.trigger("change"),a},s.unsetValue=function(){var e=this;e.params.setValueText&&e.$valueEl.text(e.formatValueText([])),e.$selectEl.find("option").each((function(e){e.selected=!1,e.checked=!1})),e.$selectEl[0].value=null,e.$containerEl&&e.$containerEl.find('input[name="'+e.inputName+'"][type="checkbox"], input[name="'+e.inputName+'"][type="radio"]').prop("checked",!1),e.$selectEl.trigger("change")},s.getValue=function(){return this.$selectEl.val()},s.checkMaxLength=function(){var e=this,t=e.$containerEl;e.selectEl.selectedOptions.length>=e.maxLength?t.find('input[type="checkbox"]').each((function(e){e.checked?Ot(e).parents("li").removeClass("disabled"):Ot(e).parents("li").addClass("disabled")})):t.find(".disabled").removeClass("disabled")},s.formatValueText=function(e){var t=this;return t.params.formatValueText?t.params.formatValueText.call(t,e,t):e.join(", ")},s.setValueText=function(e){var t=this,r=[];void 0!==e?r=Array.isArray(e)?e:[e]:t.$selectEl.find("option").each((function(e){var t=Ot(e);if(e.selected){var n=e.dataset?e.dataset.displayAs:t.data("display-value-as");n&&void 0!==n?r.push(n):r.push(e.textContent.trim())}})),t.params.setValueText&&t.$valueEl.text(t.formatValueText(r))},s.getItemsData=function(){var e,t=this,r=t.app.theme,n=[];return t.$selectEl.find("option").each((function(a){var i=Ot(a),o=i.dataset(),s=o.optionImage||t.params.optionImage,l=o.optionIcon||t.params.optionIcon,c="ios"===r&&(o.optionIconIos||t.params.optionIconIos),u="md"===r&&(o.optionIconMd||t.params.optionIconMd),p="aurora"===r&&(o.optionIconAurora||t.params.optionIconAurora),d=s||l||c||u||p,h=o.optionColor,f=o.optionClass||"";i[0].disabled&&(f+=" disabled");var m=i.parent("optgroup")[0],g=m&&m.label,v=!1;m&&m!==e&&(v=!0,e=m,n.push({groupLabel:g,isLabel:v})),n.push({value:i[0].value,text:i[0].textContent.trim(),selected:i[0].selected,groupEl:m,groupLabel:g,image:s,icon:l,iconIos:c,iconMd:u,iconAurora:p,color:h,className:f,disabled:i[0].disabled,id:t.id,hasMedia:d,checkbox:"checkbox"===t.inputType,radio:"radio"===t.inputType,inputName:t.inputName,inputType:t.inputType})})),t.items=n,n},s.renderSearchbar=function(){var e=this;return e.params.renderSearchbar?e.params.renderSearchbar.call(e):jn("form",{class:"searchbar"},jn("div",{class:"searchbar-inner"},jn("div",{class:"searchbar-input-wrap"},jn("input",{type:"search",spellcheck:e.params.searchbarSpellcheck||"false",placeholder:e.params.searchbarPlaceholder}),jn("i",{class:"searchbar-icon"}),jn("span",{class:"input-clear-button"})),e.params.searchbarDisableButton&&jn("span",{class:"searchbar-disable-button"},e.params.searchbarDisableText)))},s.renderItem=function(e,t){var r,n,a=this;if(a.params.renderItem)return a.params.renderItem.call(a,e,t);if(e.isLabel)r='<li class="item-divider">'+e.groupLabel+"</li>";else{var i,o=e.selected;if(a.params.virtualList){var s=a.getValue();o=a.multiple?s.indexOf(e.value)>=0:s===e.value,a.multiple&&(i=a.multiple&&!o&&s.length===parseInt(a.maxLength,10))}var l=e.icon,c=e.iconIos,u=e.iconMd,p=e.iconAurora,d=l||c||u||p,h=(void 0===(n=l||c||u||p||"")&&(n=""),n.indexOf(":")>=0?n.split(":")[1]:""),f=function(e){if(void 0===e&&(e=""),e.indexOf(":")>=0){var t=e.split(":")[0];return"f7"===t&&(t="f7-icons"),"material"===t&&(t="material-icons"),t}return e}(l||c||u||p||"");r=jn("li",{class:(e.className||"")+(i?" disabled":"")},jn("label",{class:"item-"+e.inputType+" item-content"},jn("input",{type:e.inputType,name:e.inputName,value:e.value,_checked:o}),jn("i",{class:"icon icon-"+e.inputType}),e.hasMedia&&jn("div",{class:"item-media"},d&&jn("i",{class:"icon "+f},h),e.image&&jn("img",{src:e.image})),jn("div",{class:"item-inner"},jn("div",{class:"item-title"+(e.color?" text-color-"+e.color:"")},e.text))))}return r},s.renderItems=function(){var e=this;return e.params.renderItems?e.params.renderItems.call(e,e.items):"\n      "+e.items.map((function(t,r){return""+e.renderItem(t,r)})).join("")+"\n    "},s.renderPage=function(){var e=this;if(e.params.renderPage)return e.params.renderPage.call(e,e.items);var t=e.params.pageTitle;if(void 0===t){var r=e.$el.find(".item-title");t=r.length?r.text().trim():""}var n=e.params.cssClass;return jn("div",{class:"page smart-select-page "+n,"data-name":"smart-select-page","data-select-name":e.selectName},jn("div",{class:"navbar "+(e.params.navbarColorTheme?"color-"+e.params.navbarColorTheme:"")},jn("div",{class:"navbar-bg"}),jn("div",{class:"navbar-inner sliding "+(e.params.navbarColorTheme?"color-"+e.params.navbarColorTheme:"")},jn("div",{class:"left"},jn("a",{class:"link back"},jn("i",{class:"icon icon-back"}),jn("span",{class:"if-not-md"},e.params.pageBackLinkText))),t&&jn("div",{class:"title"},t),e.params.searchbar&&jn("div",{class:"subnavbar"},e.renderSearchbar()))),e.params.searchbar&&jn("div",{class:"searchbar-backdrop"}),jn("div",{class:"page-content"},jn("div",{class:"list smart-select-list-"+e.id+" "+(e.params.virtualList?" virtual-list":"")+" "+(e.params.formColorTheme?"color-"+e.params.formColorTheme:"")},jn("ul",null,!e.params.virtualList&&e.renderItems(e.items)))))},s.renderPopup=function(){var e=this;if(e.params.renderPopup)return e.params.renderPopup.call(e,e.items);var t=e.params.pageTitle;if(void 0===t){var r=e.$el.find(".item-title");t=r.length?r.text().trim():""}var n=e.params.cssClass||"";return jn("div",{class:"popup smart-select-popup "+n+" "+(e.params.popupTabletFullscreen?"popup-tablet-fullscreen":""),"data-select-name":e.selectName},jn("div",{class:"view"},jn("div",{class:"page smart-select-page "+(e.params.searchbar?"page-with-subnavbar":""),"data-name":"smart-select-page"},jn("div",{class:"navbar "+(e.params.navbarColorTheme?"color-"+e.params.navbarColorTheme:"")},jn("div",{class:"navbar-bg"}),jn("div",{class:"navbar-inner sliding"},t&&jn("div",{class:"title"},t),jn("div",{class:"right"},jn("a",{class:"link popup-close","data-popup":".smart-select-popup[data-select-name='"+e.selectName+"']"},e.params.popupCloseLinkText)),e.params.searchbar&&jn("div",{class:"subnavbar"},e.renderSearchbar()))),e.params.searchbar&&jn("div",{class:"searchbar-backdrop"}),jn("div",{class:"page-content"},jn("div",{class:"list smart-select-list-"+e.id+" "+(e.params.virtualList?" virtual-list":"")+" "+(e.params.formColorTheme?"color-"+e.params.formColorTheme:"")},jn("ul",null,!e.params.virtualList&&e.renderItems(e.items)))))))},s.renderSheet=function(){var e=this;if(e.params.renderSheet)return e.params.renderSheet.call(e,e.items);var t=e.params.cssClass;return jn("div",{class:"sheet-modal smart-select-sheet "+t,"data-select-name":e.selectName},jn("div",{class:"toolbar toolbar-top "+(e.params.toolbarColorTheme?"color-"+e.params.toolbarColorTheme:"")},jn("div",{class:"toolbar-inner"},jn("div",{class:"left"}),jn("div",{class:"right"},jn("a",{class:"link sheet-close"},e.params.sheetCloseLinkText)))),jn("div",{class:"sheet-modal-inner"},jn("div",{class:"page-content"},jn("div",{class:"list smart-select-list-"+e.id+" "+(e.params.virtualList?" virtual-list":"")+" "+(e.params.formColorTheme?"color-"+e.params.formColorTheme:"")},jn("ul",null,!e.params.virtualList&&e.renderItems(e.items))))))},s.renderPopover=function(){var e=this;if(e.params.renderPopover)return e.params.renderPopover.call(e,e.items);var t=e.params.cssClass;return jn("div",{class:"popover smart-select-popover "+t,"data-select-name":e.selectName},jn("div",{class:"popover-inner"},jn("div",{class:"list smart-select-list-"+e.id+" "+(e.params.virtualList?" virtual-list":"")+" "+(e.params.formColorTheme?"color-"+e.params.formColorTheme:"")},jn("ul",null,!e.params.virtualList&&e.renderItems(e.items)))))},s.scrollToSelectedItem=function(){var e=this,t=e.params,r=e.$containerEl;if(!e.opened)return e;if(t.virtualList){var n;e.vl.items.forEach((function(e,t){void 0===n&&e.selected&&(n=t)})),void 0!==n&&e.vl.scrollToItem(n)}else{var a=r.find("input:checked").parents("li");if(!a.length)return e;var i=r.find(".page-content");i.scrollTop(a.offset().top-i.offset().top-parseInt(i.css("padding-top"),10))}return e},s.onOpen=function(e,t){var r=this,n=r.app,a=Ot(t);if(r.$containerEl=a,r.openedIn=e,r.opened=!0,r.params.virtualList&&(r.vl=n.virtualList.create({el:a.find(".virtual-list"),items:r.items,renderItem:r.renderItem.bind(r),height:r.params.virtualListHeight,searchByItem:function(e,t){return!!(t.text&&t.text.toLowerCase().indexOf(e.trim().toLowerCase())>=0)}})),r.params.scrollToSelectedItem&&r.scrollToSelectedItem(),r.params.searchbar){var i=a.find(".searchbar");if("page"===e&&"ios"===n.theme&&(i=Ot(n.navbar.getElByPage(a)).find(".searchbar")),r.params.appendSearchbarNotFound&&("page"===e||"popup"===e)){var o=null;(o="string"==typeof r.params.appendSearchbarNotFound?Ot('<div class="block searchbar-not-found">'+r.params.appendSearchbarNotFound+"</div>"):"boolean"==typeof r.params.appendSearchbarNotFound?Ot('<div class="block searchbar-not-found">Nothing found</div>'):r.params.appendSearchbarNotFound)&&a.find(".page-content").append(o[0])}var s=M({el:i,backdropEl:a.find(".searchbar-backdrop"),searchContainer:".smart-select-list-"+r.id,searchIn:".item-title"},"object"==typeof r.params.searchbar?r.params.searchbar:{});r.searchbar=n.searchbar.create(s)}r.maxLength&&r.checkMaxLength(),r.params.closeOnSelect&&r.$containerEl.find('input[type="radio"][name="'+r.inputName+'"]:checked').parents("label").once("click",(function(){r.close()})),r.attachInputsEvents(),r.$el.trigger("smartselect:open"),r.emit("local::open smartSelectOpen",r)},s.onOpened=function(){var e=this;e.$el.trigger("smartselect:opened"),e.emit("local::opened smartSelectOpened",e)},s.onClose=function(){var e=this;e.destroyed||(e.vl&&e.vl.destroy&&(e.vl.destroy(),e.vl=null,delete e.vl),e.searchbar&&e.searchbar.destroy&&(e.searchbar.destroy(),e.searchbar=null,delete e.searchbar),e.detachInputsEvents(),e.$el.trigger("smartselect:close"),e.emit("local::close smartSelectClose",e))},s.onClosed=function(){var e=this;e.destroyed||(e.opened=!1,e.$containerEl=null,delete e.$containerEl,e.$el.trigger("smartselect:closed"),e.emit("local::closed smartSelectClosed",e))},s.openPage=function(){var e=this;if(e.opened)return e;e.getItemsData();var t=e.renderPage(e.items);return e.view.router.navigate({url:e.url,route:{content:t,path:e.url,on:{pageBeforeIn:function(t,r){e.onOpen("page",r.el)},pageAfterIn:function(t,r){e.onOpened("page",r.el)},pageBeforeOut:function(t,r){e.onClose("page",r.el)},pageAfterOut:function(t,r){e.onClosed("page",r.el)}}}}),e},s.openPopup=function(){var e=this;if(e.opened)return e;e.getItemsData();var t={content:e.renderPopup(e.items),push:e.params.popupPush,swipeToClose:e.params.popupSwipeToClose,on:{popupOpen:function(t){e.onOpen("popup",t.el)},popupOpened:function(t){e.onOpened("popup",t.el)},popupClose:function(t){e.onClose("popup",t.el)},popupClosed:function(t){e.onClosed("popup",t.el)}}};return e.params.routableModals&&e.view?e.view.router.navigate({url:e.url,route:{path:e.url,popup:t}}):e.modal=e.app.popup.create(t).open(),e},s.openSheet=function(){var e=this;if(e.opened)return e;e.getItemsData();var t={content:e.renderSheet(e.items),backdrop:e.params.sheetBackdrop,scrollToEl:e.$el,closeByOutsideClick:!0,push:e.params.sheetPush,swipeToClose:e.params.sheetSwipeToClose,on:{sheetOpen:function(t){e.onOpen("sheet",t.el)},sheetOpened:function(t){e.onOpened("sheet",t.el)},sheetClose:function(t){e.onClose("sheet",t.el)},sheetClosed:function(t){e.onClosed("sheet",t.el)}}};return e.params.routableModals&&e.view?e.view.router.navigate({url:e.url,route:{path:e.url,sheet:t}}):e.modal=e.app.sheet.create(t).open(),e},s.openPopover=function(){var e=this;if(e.opened)return e;e.getItemsData();var t={content:e.renderPopover(e.items),targetEl:e.$el,on:{popoverOpen:function(t){e.onOpen("popover",t.el)},popoverOpened:function(t){e.onOpened("popover",t.el)},popoverClose:function(t){e.onClose("popover",t.el)},popoverClosed:function(t){e.onClosed("popover",t.el)}}};return e.params.routableModals&&e.view?e.view.router.navigate({url:e.url,route:{path:e.url,popover:t}}):e.modal=e.app.popover.create(t).open(),e},s.open=function(e){var t=this;if(t.opened)return t;var r=!1;function n(){r=!0}return t.$el&&t.$el.trigger("smartselect:beforeopen",{prevent:n}),t.emit("local::beforeOpen smartSelectBeforeOpen",t,n),r||t["open"+(e||t.params.openIn).split("").map((function(e,t){return 0===t?e.toUpperCase():e})).join("")](),t},s.close=function(){var e=this;return e.opened?(e.params.routableModals&&e.view||"page"===e.openedIn?e.view.router.back():(e.modal.once("modalClosed",(function(){x((function(){e.destroyed||(e.modal.destroy(),delete e.modal)}))})),e.modal.close()),e):e},s.init=function(){this.attachEvents(),this.setValueText()},s.destroy=function(){var e=this;e.emit("local::beforeDestroy smartSelectBeforeDestroy",e),e.$el.trigger("smartselect:beforedestroy"),e.detachEvents(),delete e.$el[0].f7SmartSelect,y(e),e.destroyed=!0},a=n,(i=[{key:"view",get:function(){var e,t=this.params,r=this.$el;if(t.view&&(e=t.view),e||(e=r.parents(".view").length&&r.parents(".view")[0].f7View),!e&&"page"===t.openIn)throw Error("Smart Select requires initialized View");return e}}])&&di(a.prototype,i),o&&di(a,o),n}(q),gi={name:"smartSelect",params:{smartSelect:{el:void 0,valueEl:void 0,setValueText:!0,formatValueText:null,openIn:"page",popupPush:!1,popupSwipeToClose:void 0,sheetPush:!1,sheetSwipeToClose:void 0,sheetBackdrop:!1,pageTitle:void 0,pageBackLinkText:"Back",popupCloseLinkText:"Close",popupTabletFullscreen:!1,sheetCloseLinkText:"Done",searchbar:!1,searchbarPlaceholder:"Search",searchbarDisableText:"Cancel",searchbarDisableButton:void 0,searchbarSpellcheck:!1,closeOnSelect:!1,virtualList:!1,virtualListHeight:void 0,scrollToSelectedItem:!1,formColorTheme:void 0,navbarColorTheme:void 0,routableModals:!1,url:"select/",cssClass:"",renderPage:void 0,renderPopup:void 0,renderSheet:void 0,renderPopover:void 0,renderItems:void 0,renderItem:void 0,renderSearchbar:void 0}},static:{SmartSelect:mi},create:function(){var e=this;e.smartSelect=M(Dt({defaultSelector:".smart-select",constructor:mi,app:e,domProp:"f7SmartSelect"}),{open:function(t){var r=e.smartSelect.get(t);if(r&&r.open)return r.open()},close:function(t){var r=e.smartSelect.get(t);if(r&&r.close)return r.close()}})},on:{tabMounted:function(e){var t=this;Ot(e).find(".smart-select-init").each((function(e){t.smartSelect.create(M({el:e},Ot(e).dataset()))}))},tabBeforeRemove:function(e){Ot(e).find(".smart-select-init").each((function(e){e.f7SmartSelect&&e.f7SmartSelect.destroy&&e.f7SmartSelect.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".smart-select-init").each((function(e){t.smartSelect.create(M({el:e},Ot(e).dataset()))}))},pageBeforeRemove:function(e){e.$el.find(".smart-select-init").each((function(e){e.f7SmartSelect&&e.f7SmartSelect.destroy&&e.f7SmartSelect.destroy()}))}},clicks:{".smart-select":function(e,t){e[0].f7SmartSelect||this.smartSelect.create(M({el:e},t)).open()}},vnode:{"smart-select-init":{insert:function(e){var t=e.elm;this.smartSelect.create(M({el:t},Ot(t).dataset()))},destroy:function(e){var t=e.elm;t.f7SmartSelect&&t.f7SmartSelect.destroy&&t.f7SmartSelect.destroy()}}}};function vi(e,t){var r=t.css("min-"+e);return"auto"===r||"none"===r?r=0:r.indexOf("px")>=0?r=parseFloat(r):r.indexOf("%")>=0&&(r=t.parent()[0]["height"===e?"offsetHeight":"offsetWidth"]*parseFloat(r)/100),r}function yi(e,t){var r=t.css("max-"+e);return"auto"===r||"none"===r?r=null:r.indexOf("px")>=0?r=parseFloat(r):r.indexOf("%")>=0&&(r=t.parent()[0]["height"===e?"offsetHeight":"offsetWidth"]*parseFloat(r)/100),r}var bi={init:function(){var e,t,r,n,a,i,s,l,c,u,p,d,h,f,m,g,v,y=this;var b=o();Ot(b).on(y.touchEvents.start,".col > .resize-handler, .row > .resize-handler",(function(o){e||t||(a=Ot(o.target).closest(".resize-handler"),r="touchstart"===o.type?o.targetTouches[0].pageX:o.pageX,n="touchstart"===o.type?o.targetTouches[0].pageY:o.pageY,e=!0,i=void 0,s=void 0,v=void 0)})),y.on("touchmove",(function(o){if(e){var b=1===a.parent(".row").length,_=b?"height":"width",x=b?"offsetHeight":"offsetWidth";t||(!(i=a.parent(b?".row":".col")).length||i.hasClass("resizable")&&!i.hasClass("resizable-fixed")||(i=i.prevAll(".resizable:not(.resizable-fixed)").eq(0)),!(s=i.next(b?".row":".col")).length||s.hasClass("resizable")&&!s.hasClass("resizable-fixed")||(s=s.nextAll(".resizable:not(.resizable-fixed)").eq(0)),i.length&&(l=i[0][x],c=vi(_,i),u=yi(_,i),f=i.parent()[0][x],m=i.parent().children(b?".row":'[class*="col-"], .col').length,g=parseFloat(i.css(b?"--f7-grid-row-gap":"--f7-grid-gap"))),s.length&&(p=s[0][x],d=vi(_,s),h=yi(_,s),i.length||(f=s.parent()[0][x],m=s.parent().children(b?".row":'[class*="col-"], .col').length,g=parseFloat(s.css(b?"--f7-grid-row-gap":"--f7-grid-gap"))))),t=!0;var w="touchmove"===o.type?o.targetTouches[0].pageX:o.pageX,E="touchmove"===o.type?o.targetTouches[0].pageY:o.pageY;if(void 0!==v||b||(v=!!(v||Math.abs(E-n)>Math.abs(w-r))),v)return e=!1,void(t=!1);var C=i.hasClass("resizable-absolute")||s.hasClass("resizable-absolute"),k=!b||b&&!C;if(k&&!s.length||!i.length)return e=!1,void(t=!1);o.preventDefault();var T,S,P=b?E-n:w-r;if(i.length&&((T=l+P)<c&&(P=(T=c)-l),u&&T>u&&(P=(T=u)-l)),s.length&&k&&((S=p-P)<d&&(T=l+(P=p-(S=d))),h&&S>h&&(T=l+(P=p-(S=h)))),C)return i[0].style[_]=T+"px",k&&(s[0].style[_]=S+"px"),i.trigger("grid:resize"),s.trigger("grid:resize"),y.emit("gridResize",i[0]),void y.emit("gridResize",s[0]);var M=(m-1)*g/m,I=b?m-1+" * var(--f7-grid-row-gap) / "+m:"(var(--f7-cols-per-row) - 1) * var(--f7-grid-gap) / var(--f7-cols-per-row)",A=T+M,O=S+M;i[0].style[_]="calc("+A/f*100+"% - "+I+")",s[0].style[_]="calc("+O/f*100+"% - "+I+")",i.trigger("grid:resize"),s.trigger("grid:resize"),y.emit("gridResize",i[0]),y.emit("gridResize",s[0])}})),y.on("touchend",(function(){e&&(t||(e=!1),e=!1,t=!1)}))}},_i={name:"grid",create:function(){M(this,{grid:{init:bi.init.bind(this)}})},on:{init:function(){this.grid.init()}}};function xi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ei(e,t){return(Ei=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ci=function(e){var t,r;function n(t,r){var n;void 0===r&&(r={});var a,i,o=wi(n=e.call(this,r,[t])||this);if(o.params=M({},t.params.calendar,r),o.params.containerEl&&0===(a=Ot(o.params.containerEl)).length)return o||wi(n);o.params.inputEl&&(i=Ot(o.params.inputEl));var s="horizontal"===o.params.direction,l=1;s&&(l=t.rtl?-1:1),M(o,{app:t,$containerEl:a,containerEl:a&&a[0],inline:a&&a.length>0,$inputEl:i,inputEl:i&&i[0],initialized:!1,opened:!1,url:o.params.url,isHorizontal:s,inverter:l,animating:!1,allowTouchMove:!0,hasTimePicker:o.params.timePicker&&!o.params.rangePicker&&!o.params.multiple}),o.dayFormatter=new Intl.DateTimeFormat(o.params.locale,{day:"numeric"}),o.monthFormatter=new Intl.DateTimeFormat(o.params.locale,{month:"long"}),o.yearFormatter=new Intl.DateTimeFormat(o.params.locale,{year:"numeric"}),o.timeSelectorFormatter=new Intl.DateTimeFormat(o.params.locale,o.params.timePickerFormat);var c=o.timeSelectorFormatter.format(new Date).toLowerCase();o.is12HoursFormat=c.indexOf("pm")>=0||c.indexOf("am")>=0;var u=o.params,p=u.monthNames,d=u.monthNamesShort,h=u.dayNames,f=u.dayNamesShort,m=o.getIntlNames(),g=m.monthNamesIntl,v=m.monthNamesShortIntl,y=m.dayNamesIntl,b=m.dayNamesShortIntl;function _(){o.open()}function x(e){e.preventDefault()}function w(){o.setValue([]),o.opened&&o.update()}function E(e){var t=Ot(e.target);!o.destroyed&&o.params&&(o.isPopover()||o.opened&&!o.closing&&(t.closest('[class*="backdrop"]').length||(i&&i.length>0?t[0]!==i[0]&&0===t.closest(".sheet-modal, .calendar-modal").length&&o.close():0===Ot(e.target).closest(".sheet-modal, .calendar-modal").length&&o.close())))}return"auto"===p&&(p=g),"auto"===d&&(d=v),"auto"===h&&(h=y),"auto"===f&&(f=b),M(o,{monthNames:p,monthNamesShort:d,dayNames:h,dayNamesShort:f}),M(o,{attachInputEvents:function(){o.$inputEl.on("click",_),o.$inputEl.on("input:clear",w),o.params.inputReadOnly&&(o.$inputEl.on("focus mousedown",x),o.$inputEl[0]&&(o.$inputEl[0].f7ValidateReadonly=!0))},detachInputEvents:function(){o.$inputEl.off("click",_),o.$inputEl.off("input:clear",w),o.params.inputReadOnly&&(o.$inputEl.off("focus mousedown",x),o.$inputEl[0]&&delete o.$inputEl[0].f7ValidateReadonly)},attachHtmlEvents:function(){t.on("click",E)},detachHtmlEvents:function(){t.off("click",E)}}),o.attachCalendarEvents=function(){var e,r,n,a,i,s,l,c,u,p,d,h,f,m=!0,g=o.$el,v=o.$wrapperEl;function y(t){r||e||(e=!0,n="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,i=n,a="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY,s=a,l=(new Date).getTime(),d=0,m=!0,f=void 0,c=o.monthsTranslate)}function b(t){if(e){var l=o.isHorizontal;i="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,s="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,void 0===f&&(f=!!(f||Math.abs(s-a)>Math.abs(i-n))),l&&f||!o.allowTouchMove?e=!1:(t.preventDefault(),o.animating?e=!1:(m=!1,r||(r=!0,u=v[0].offsetWidth,p=v[0].offsetHeight,v.transition(0)),d=(h=l?i-n:s-a)/(l?u:p),c=100*(o.monthsTranslate*o.inverter+d),v.transform("translate3d("+(l?c:0)+"%, "+(l?0:c)+"%, 0)")))}}function _(){if(!e||!r)return e=!1,void(r=!1);e=!1,r=!1,(new Date).getTime()-l<300?Math.abs(h)<10?o.resetMonth():h>=10?t.rtl?o.nextMonth():o.prevMonth():t.rtl?o.prevMonth():o.nextMonth():d<=-.5?t.rtl?o.prevMonth():o.nextMonth():d>=.5?t.rtl?o.nextMonth():o.prevMonth():o.resetMonth(),setTimeout((function(){m=!0}),100)}function x(e){if(m){var t=Ot(e.target).parents(".calendar-day");if(0===t.length&&Ot(e.target).hasClass("calendar-day")&&(t=Ot(e.target)),0!==t.length&&!t.hasClass("calendar-day-disabled")){o.params.rangePicker||(t.hasClass("calendar-day-next")&&o.nextMonth(),t.hasClass("calendar-day-prev")&&o.prevMonth());var r=parseInt(t.attr("data-year"),10),n=parseInt(t.attr("data-month"),10),a=parseInt(t.attr("data-day"),10);if(o.emit("local::dayClick calendarDayClick",o,t[0],r,n,a),!t.hasClass("calendar-day-selected")||o.params.multiple||o.params.rangePicker){var i=new Date(r,n,a,0,0,0);o.hasTimePicker&&(o.value&&o.value[0]?i.setHours(o.value[0].getHours(),o.value[0].getMinutes()):i.setHours((new Date).getHours(),(new Date).getMinutes())),o.addValue(i)}o.params.closeOnSelect&&(o.params.rangePicker&&2===o.value.length||!o.params.rangePicker)&&o.close()}}}function w(){o.nextMonth()}function E(){o.prevMonth()}function C(){o.nextYear()}function k(){o.prevYear()}function T(){g.append(o.renderMonthPicker())}function S(){var e=Ot(this);if(e.hasClass("calendar-month-picker-item-current"))g.find(".calendar-month-picker").remove();else{g.find(".calendar-month-picker-item-current").add(e).toggleClass("calendar-month-picker-item-current");var t=e.index()-(parseInt(o.$el.find(".calendar-month-current").attr("data-locale-month"),10)-o.currentMonth);o.setYearMonth(o.currentYear,t,0),setTimeout((function(){g.find(".calendar-month-picker").remove()}),200)}}function P(){g.append(o.renderYearPicker());var e=g.find(".calendar-year-picker-item-current"),t=g.find(".calendar-year-picker");e&&e.length&&t.scrollTop(e[0].offsetTop-t[0].offsetHeight/2+e[0].offsetHeight/2)}function M(){var e=Ot(this);if(e.hasClass("calendar-year-picker-item-current"))g.find(".calendar-year-picker").remove();else{g.find(".calendar-year-picker-item-current").add(e).toggleClass("calendar-year-picker-item-current");var t=parseInt(e.attr("data-year"),10);o.setYearMonth(t,void 0,0),setTimeout((function(){g.find(".calendar-year-picker").remove()}),200)}}function I(){o.openTimePicker()}function A(){o.closeTimePicker()}var O=!("touchstart"!==t.touchEvents.start||!F().passiveListener)&&{passive:!0,capture:!1};g.find(".calendar-prev-month-button").on("click",E),g.find(".calendar-next-month-button").on("click",w),g.find(".calendar-prev-year-button").on("click",k),g.find(".calendar-next-year-button").on("click",C),o.params.monthPicker&&(g.find(".current-month-value").on("click",T),g.on("click",".calendar-month-picker-item",S)),o.params.yearPicker&&(g.find(".current-year-value").on("click",P),g.on("click",".calendar-year-picker-item",M)),o.hasTimePicker&&(g.find(".calendar-time-selector a").on("click",I),g.on("click",".calendar-time-picker-close",A)),v.on("click",x),o.params.touchMove&&(v.on(t.touchEvents.start,y,O),t.on("touchmove:active",b),t.on("touchend:passive",_)),o.detachCalendarEvents=function(){g.find(".calendar-prev-month-button").off("click",E),g.find(".calendar-next-month-button").off("click",w),g.find(".calendar-prev-year-button").off("click",k),g.find(".calendar-next-year-button").off("click",C),o.params.monthPicker&&(g.find(".current-month-value").off("click",T),g.off("click",".calendar-month-picker-item",S)),o.params.yearPicker&&(g.find(".current-year-value").off("click",P),g.off("click",".calendar-year-picker-item",M)),o.hasTimePicker&&(g.find(".calendar-time-selector a").off("click",I),g.off("click",".calendar-time-picker-close",A)),v.off("click",x),o.params.touchMove&&(v.off(t.touchEvents.start,y,O),t.off("touchmove:active",b),t.off("touchend:passive",_))}},o.init(),o||wi(n)}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,Ei(t,r);var a,i,o,s=n.prototype;return s.getIntlNames=function(){for(var e,t,r,n=this.params.locale,a=[],i=[],o=[],s=[],l=new Intl.DateTimeFormat(n,{month:"long"}),c=new Intl.DateTimeFormat(n,{month:"short"}),u=new Intl.DateTimeFormat(n,{weekday:"long"}),p=new Intl.DateTimeFormat(n,{weekday:"short"}),d=0;d<24;d+=1){var h=(new Date).setMonth(d,1),f=this.yearFormatter.format(h);e&&f!==e&&(t&&(r=!0),t=!0,e=f),e||(e=f),t&&e===f&&!r&&(a.push(l.format(h)),i.push(c.format(h)))}for(var m=(new Date).getDay(),g=0;g<7;g+=1){var v=(new Date).getTime()+24*(g-m)*60*60*1e3;o.push(u.format(v)),s.push(p.format(v))}return{monthNamesIntl:a,monthNamesShortIntl:i,dayNamesIntl:o,dayNamesShortIntl:s}},s.normalizeDate=function(e){var t=new Date(e);return this.hasTimePicker?new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes()):new Date(t.getFullYear(),t.getMonth(),t.getDate())},s.normalizeValues=function(e){var t=this,r=[];return e&&Array.isArray(e)&&(r=e.map((function(e){return t.normalizeDate(e)}))),r},s.initInput=function(){var e=this;e.$inputEl&&e.params.inputReadOnly&&e.$inputEl.prop("readOnly",!0)},s.isPopover=function(){var e=this,t=e.app,r=e.modal,n=e.params,a=N();if("sheet"===n.openIn)return!1;if(r&&"popover"!==r.type)return!1;if(!e.inline&&e.inputEl){if("popover"===n.openIn)return!0;if(a.ios)return!!a.ipad;if(t.width>=768)return!0;if(a.desktop&&"aurora"===t.theme)return!0}return!1},s.formatDate=function(e){var t=this,r=new Date(e),n=r.getFullYear(),a=r.getMonth(),i=a+1,o=r.getDate(),s=r.getDay(),l=t.monthNames,c=t.monthNamesShort,u=t.dayNames,p=t.dayNamesShort,d=t.params,h=d.dateFormat,f=d.locale;function m(e){return e<10?"0"+e:e}if("string"==typeof h){var g={yyyy:n,yy:String(n).substring(2),mm:m(i),m:i,MM:l[a],M:c[a],dd:m(o),d:o,DD:u[s],D:p[s]};if(t.params.timePicker){var v=r.getHours(),y=r.getMinutes(),b=r.getSeconds(),_=v;v>12&&(_=v-12),0===v&&(_=12);var x=v>=12&&0!==v?"pm":"am";Object.assign(g,{HH:m(v),H:v,hh:m(_),h:_,ss:m(b),s:b,":mm":m(y),":m":y,a:x,A:x.toUpperCase()})}var w=new RegExp(Object.keys(g).map((function(e){return"("+e+")"})).join("|"),"g");return h.replace(w,(function(e){return e in g?g[e]:e}))}return"function"==typeof h?h(r):new Intl.DateTimeFormat(f,h).format(r)},s.formatValue=function(){var e=this,t=e.value;return e.params.formatValue?e.params.formatValue.call(e,t):t.map((function(t){return e.formatDate(t)})).join(e.params.rangePicker?" - ":", ")},s.addValue=function(e){var t=this,r=t.params,n=r.multiple,a=r.rangePicker,i=r.rangePickerMinDays,o=r.rangePickerMaxDays;if(n){var s;t.value||(t.value=[]);for(var l=0;l<t.value.length;l+=1)new Date(e).getTime()===new Date(t.value[l]).getTime()&&(s=l);void 0===s?t.value.push(e):t.value.splice(s,1),t.updateValue()}else a?(t.value||(t.value=[]),2!==t.value.length&&0!==t.value.length||(t.value=[]),0===t.value.length||Math.abs(t.value[0].getTime()-e.getTime())>=60*(i-1)*60*24*1e3&&(0===o||Math.abs(t.value[0].getTime()-e.getTime())<=60*(o-1)*60*24*1e3)?t.value.push(e):t.value=[],t.value.sort((function(e,t){return e-t})),t.updateValue()):(t.value=[e],t.updateValue())},s.setValue=function(e){var t=this,r=t.value;if(Array.isArray(r)&&Array.isArray(e)&&r.length===e.length){var n=!0;if(r.forEach((function(t,r){t!==e[r]&&(n=!1)})),n)return}t.value=e,t.updateValue()},s.getValue=function(){return this.value},s.updateValue=function(e){var t,r,n=this,a=n.$el,i=n.$wrapperEl,o=n.$inputEl,s=n.value,l=n.params;if(a&&a.length>0)if(i.find(".calendar-day-selected").removeClass("calendar-day-selected calendar-day-selected-range calendar-day-selected-left calendar-day-selected-right"),l.rangePicker&&2===s.length){var c=new Date(s[0]).getTime(),u=new Date(s[1]).getTime();for(t=c;t<=u;t+=864e5){r=new Date(t);var p="calendar-day-selected";c!==u&&(t!==c&&t!==u&&(p+=" calendar-day-selected-range"),t===c&&(p+=" calendar-day-selected-left"),t===u&&(p+=" calendar-day-selected-right")),i.find('.calendar-day[data-date="'+r.getFullYear()+"-"+r.getMonth()+"-"+r.getDate()+'"]').addClass(p)}r=new Date(c),i.find('.calendar-day[data-date="'+r.getFullYear()+"-"+r.getMonth()+"-"+r.getDate()+'"]').removeClass("calendar-day-selected-range").addClass("calendar-day-selected calendar-day-selected-left"),r=new Date(u),i.find('.calendar-day[data-date="'+r.getFullYear()+"-"+r.getMonth()+"-"+r.getDate()+'"]').removeClass("calendar-day-selected-range").addClass("calendar-day-selected calendar-day-selected-right")}else for(t=0;t<n.value.length;t+=1)r=new Date(s[t]),i.find('.calendar-day[data-date="'+r.getFullYear()+"-"+r.getMonth()+"-"+r.getDate()+'"]').addClass("calendar-day-selected");if(e||n.emit("local::change calendarChange",n,s),a&&a.length>0&&n.hasTimePicker&&a.find(".calendar-time-selector a").text(s&&s.length?n.timeSelectorFormatter.format(s[0]):n.params.timePickerPlaceholder),o&&o.length||l.header){var d=n.formatValue(s);l.header&&a&&a.length&&a.find(".calendar-selected-date").text(d),o&&o.length&&!e&&(o.val(d),o.trigger("change"))}},s.updateCurrentMonthYear=function(e){var t,r,n=this,a=n.$months,i=n.$el,o=n.monthNames;void 0===e?(n.currentMonth=parseInt(a.eq(1).attr("data-month"),10),n.currentYear=parseInt(a.eq(1).attr("data-year"),10),t=a.eq(1).attr("data-locale-month"),r=a.eq(1).attr("data-locale-year")):(n.currentMonth=parseInt(a.eq("next"===e?a.length-1:0).attr("data-month"),10),n.currentYear=parseInt(a.eq("next"===e?a.length-1:0).attr("data-year"),10),t=a.eq("next"===e?a.length-1:0).attr("data-locale-month"),r=a.eq("next"===e?a.length-1:0).attr("data-locale-year")),i.find(".current-month-value").text(o[t]),i.find(".current-year-value").text(r)},s.update=function(){var e=this,t=e.currentYear,r=e.currentMonth,n=e.$wrapperEl,a=new Date(t,r),i=e.renderMonth(a,"prev"),o=e.renderMonth(a),s=e.renderMonth(a,"next");n.transition(0).html(""+i+o+s).transform("translate3d(0,0,0)"),e.$months=n.find(".calendar-month"),e.monthsTranslate=0,e.setMonthsTranslate(),e.$months.each((function(t){e.emit("local::monthAdd calendarMonthAdd",t)}))},s.onMonthChangeStart=function(e){var t=this,r=t.$months,n=t.currentYear,a=t.currentMonth;t.updateCurrentMonthYear(e),r.removeClass("calendar-month-current calendar-month-prev calendar-month-next");var i="next"===e?r.length-1:0;r.eq(i).addClass("calendar-month-current"),r.eq("next"===e?i-1:i+1).addClass("next"===e?"calendar-month-prev":"calendar-month-next"),t.emit("local::monthYearChangeStart calendarMonthYearChangeStart",t,n,a)},s.onMonthChangeEnd=function(e,t){var r,n,a,i=this,o=i.currentYear,s=i.currentMonth,l=i.$wrapperEl,c=i.monthsTranslate;i.animating=!1,l.find(".calendar-month:not(.calendar-month-prev):not(.calendar-month-current):not(.calendar-month-next)").remove(),void 0===e&&(e="next",t=!0),t?(l.find(".calendar-month-next, .calendar-month-prev").remove(),n=i.renderMonth(new Date(o,s),"prev"),r=i.renderMonth(new Date(o,s),"next")):a=i.renderMonth(new Date(o,s),e),("next"===e||t)&&l.append(a||r),("prev"===e||t)&&l.prepend(a||n);var u=l.find(".calendar-month");i.$months=u,i.setMonthsTranslate(c),i.emit("local::monthAdd calendarMonthAdd",i,"next"===e?u.eq(u.length-1)[0]:u.eq(0)[0]),i.emit("local::monthYearChangeEnd calendarMonthYearChangeEnd",i,o,s)},s.setMonthsTranslate=function(e){var t=this,r=t.$months,n=t.isHorizontal,a=t.inverter;e=e||t.monthsTranslate||0,void 0===t.monthsTranslate&&(t.monthsTranslate=e),r.removeClass("calendar-month-current calendar-month-prev calendar-month-next");var i=100*-(e+1)*a,o=100*-e*a,s=100*-(e-1)*a;r.eq(0).transform("translate3d("+(n?i:0)+"%, "+(n?0:i)+"%, 0)").addClass("calendar-month-prev"),r.eq(1).transform("translate3d("+(n?o:0)+"%, "+(n?0:o)+"%, 0)").addClass("calendar-month-current"),r.eq(2).transform("translate3d("+(n?s:0)+"%, "+(n?0:s)+"%, 0)").addClass("calendar-month-next")},s.nextMonth=function(e){var t=this,r=t.params,n=t.$wrapperEl,a=t.inverter,i=t.isHorizontal;void 0!==e&&"object"!=typeof e||(e="",r.animate||(e=0));var o=parseInt(t.$months.eq(t.$months.length-1).attr("data-month"),10),s=parseInt(t.$months.eq(t.$months.length-1).attr("data-year"),10),l=new Date(s,o).getTime(),c=!t.animating;if(r.maxDate&&l>new Date(r.maxDate).getTime())t.resetMonth();else{if(t.monthsTranslate-=1,o===t.currentMonth){var u=100*-t.monthsTranslate*a,p=Ot(t.renderMonth(l,"next")).transform("translate3d("+(i?u:0)+"%, "+(i?0:u)+"%, 0)").addClass("calendar-month-next");n.append(p[0]),t.$months=n.find(".calendar-month"),t.emit("local::monthAdd calendarMonthAdd",t.$months.eq(t.$months.length-1)[0])}t.animating=!0,t.onMonthChangeStart("next");var d=100*t.monthsTranslate*a;n.transition(e).transform("translate3d("+(i?d:0)+"%, "+(i?0:d)+"%, 0)"),c&&n.transitionEnd((function(){t.onMonthChangeEnd("next")})),r.animate||t.onMonthChangeEnd("next")}},s.prevMonth=function(e){var t=this,r=t.params,n=t.$wrapperEl,a=t.inverter,i=t.isHorizontal;void 0!==e&&"object"!=typeof e||(e="",r.animate||(e=0));var o=parseInt(t.$months.eq(0).attr("data-month"),10),s=parseInt(t.$months.eq(0).attr("data-year"),10),l=new Date(s,o+1,-1).getTime(),c=!t.animating;if(r.minDate){var u=new Date(r.minDate);if(l<(u=new Date(u.getFullYear(),u.getMonth(),1)).getTime())return void t.resetMonth()}if(t.monthsTranslate+=1,o===t.currentMonth){var p=100*-t.monthsTranslate*a,d=Ot(t.renderMonth(l,"prev")).transform("translate3d("+(i?p:0)+"%, "+(i?0:p)+"%, 0)").addClass("calendar-month-prev");n.prepend(d[0]),t.$months=n.find(".calendar-month"),t.emit("local::monthAdd calendarMonthAdd",t.$months.eq(0)[0])}t.animating=!0,t.onMonthChangeStart("prev");var h=100*t.monthsTranslate*a;n.transition(e).transform("translate3d("+(i?h:0)+"%, "+(i?0:h)+"%, 0)"),c&&n.transitionEnd((function(){t.onMonthChangeEnd("prev")})),r.animate||t.onMonthChangeEnd("prev")},s.resetMonth=function(e){void 0===e&&(e="");var t=this,r=t.$wrapperEl,n=t.inverter,a=t.isHorizontal,i=100*t.monthsTranslate*n;r.transition(e).transform("translate3d("+(a?i:0)+"%, "+(a?0:i)+"%, 0)")},s.setYearMonth=function(e,t,r){var n,a=this,i=a.params,o=a.isHorizontal,s=a.$wrapperEl,l=a.inverter;if(void 0===e&&(e=a.currentYear),void 0===t&&(t=a.currentMonth),void 0!==r&&"object"!=typeof r||(r="",i.animate||(r=0)),n=e<a.currentYear?new Date(e,t+1,-1).getTime():new Date(e,t).getTime(),i.maxDate&&n>new Date(i.maxDate).getTime())return!1;if(i.minDate){var c=new Date(i.minDate);if(n<(c=new Date(c.getFullYear(),c.getMonth(),1)).getTime())return!1}var u=new Date(a.currentYear,a.currentMonth).getTime(),p=n>u?"next":"prev",d=a.renderMonth(new Date(e,t));a.monthsTranslate=a.monthsTranslate||0;var h,f=a.monthsTranslate,m=!a.animating&&0!==r;n>u?(a.monthsTranslate-=1,a.animating||a.$months.eq(a.$months.length-1).remove(),s.append(d),a.$months=s.find(".calendar-month"),h=100*-(f-1)*l,a.$months.eq(a.$months.length-1).transform("translate3d("+(o?h:0)+"%, "+(o?0:h)+"%, 0)").addClass("calendar-month-next")):(a.monthsTranslate+=1,a.animating||a.$months.eq(0).remove(),s.prepend(d),a.$months=s.find(".calendar-month"),h=100*-(f+1)*l,a.$months.eq(0).transform("translate3d("+(o?h:0)+"%, "+(o?0:h)+"%, 0)").addClass("calendar-month-prev")),a.emit("local::monthAdd calendarMonthAdd","next"===p?a.$months.eq(a.$months.length-1)[0]:a.$months.eq(0)[0]),a.animating=!0,a.onMonthChangeStart(p);var g=100*a.monthsTranslate*l;s.transition(r).transform("translate3d("+(o?g:0)+"%, "+(o?0:g)+"%, 0)"),m&&s.transitionEnd((function(){a.onMonthChangeEnd(p,!0)})),i.animate&&0!==r||a.onMonthChangeEnd(p,!0)},s.nextYear=function(){this.setYearMonth(this.currentYear+1)},s.prevYear=function(){this.setYearMonth(this.currentYear-1)},s.dateInRange=function(e,t){var r,n=!1;if(!t)return!1;if(Array.isArray(t))for(r=0;r<t.length;r+=1)t[r].from||t[r].to?t[r].from&&t[r].to?e<=new Date(t[r].to).getTime()&&e>=new Date(t[r].from).getTime()&&(n=!0):t[r].from?e>=new Date(t[r].from).getTime()&&(n=!0):t[r].to&&e<=new Date(t[r].to).getTime()&&(n=!0):t[r].date?e===new Date(t[r].date).getTime()&&(n=!0):e===new Date(t[r]).getTime()&&(n=!0);else t.from||t.to?t.from&&t.to?e<=new Date(t.to).getTime()&&e>=new Date(t.from).getTime()&&(n=!0):t.from?e>=new Date(t.from).getTime()&&(n=!0):t.to&&e<=new Date(t.to).getTime()&&(n=!0):t.date?n=e===new Date(t.date).getTime():"function"==typeof t&&(n=t(new Date(e)));return n},s.daysInMonth=function(e){var t=new Date(e);return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()},s.renderMonths=function(e){var t=this;return t.params.renderMonths?t.params.renderMonths.call(t,e):jn("div",{class:"calendar-months-wrapper"},t.renderMonth(e,"prev"),t.renderMonth(e),t.renderMonth(e,"next"))},s.renderMonth=function(e,t){var r=this,n=r.params,a=r.value;if(n.renderMonth)return n.renderMonth.call(r,e,t);var i=new Date(e),o=i.getFullYear(),s=i.getMonth(),l=r.monthNames.indexOf(r.monthFormatter.format(i));l<0&&(l=s);var c=r.yearFormatter.format(i);"next"===t&&(i=11===s?new Date(o+1,0):new Date(o,s+1,1)),"prev"===t&&(i=0===s?new Date(o-1,11):new Date(o,s-1,1)),"next"!==t&&"prev"!==t||(s=i.getMonth(),o=i.getFullYear(),(l=r.monthNames.indexOf(r.monthFormatter.format(i)))<0&&(l=s),c=r.yearFormatter.format(i));var u,p,d=[],h=(new Date).setHours(0,0,0,0),f=n.minDate?new Date(n.minDate).getTime():null,m=n.maxDate?new Date(n.maxDate).getTime():null,g=r.daysInMonth(new Date(i.getFullYear(),i.getMonth()).getTime()-864e6),v=r.daysInMonth(i),y=6===n.firstDay?0:1,b="",_=n.firstDay-1+0,x=new Date(i.getFullYear(),i.getMonth()).getDay();if(0===x&&(x=7),a&&a.length)for(var w=0;w<a.length;w+=1)d.push(new Date(a[w]).setHours(0,0,0,0));for(var E=1;E<=6;E+=1){for(var C="",k=function(e){var t=void 0,a=(_+=1)-x,i="";1===E&&1===e&&a>y&&1!==n.firstDay&&(a=(_-=7)-x);var l=e-1+n.firstDay>6?e-1-7+n.firstDay:e-1+n.firstDay;a<0?(a=g+a+1,i+=" calendar-day-prev",t=new Date(s-1<0?o-1:o,s-1<0?11:s-1,a).getTime()):(a+=1)>v?(a-=v,i+=" calendar-day-next",t=new Date(s+1>11?o+1:o,s+1>11?0:s+1,a).getTime()):t=new Date(o,s,a).getTime(),t===h&&(i+=" calendar-day-today"),n.rangePicker&&2===d.length?(t>=d[0]&&t<=d[1]&&(i+=" calendar-day-selected"),d[0]!==d[1]&&(t>d[0]&&t<d[1]&&(i+=" calendar-day-selected-range"),t===d[0]&&(i+=" calendar-day-selected-left"),t===d[1]&&(i+=" calendar-day-selected-right"))):d.indexOf(t)>=0&&(i+=" calendar-day-selected"),n.weekendDays.indexOf(l)>=0&&(i+=" calendar-day-weekend");var c="";if(p=!1,n.events&&r.dateInRange(t,n.events)&&(p=!0),p&&(i+=" calendar-day-has-events",c='\n            <span class="calendar-day-events">\n              <span class="calendar-day-event"></span>\n            </span>\n          ',Array.isArray(n.events))){var b=[];n.events.forEach((function(e){var n=e.color||"";b.indexOf(n)<0&&r.dateInRange(t,e)&&b.push(n)})),c='\n              <span class="calendar-day-events">\n                '+b.map((function(e){return('\n                  <span class="calendar-day-event" style="'+(e?"background-color: "+e:"")+'"></span>\n                ').trim()})).join("")+"\n              </span>\n            "}if(n.rangesClasses)for(var w=0;w<n.rangesClasses.length;w+=1)r.dateInRange(t,n.rangesClasses[w].range)&&(i+=" "+n.rangesClasses[w].cssClass);u=!1,(f&&t<f||m&&t>m)&&(u=!0),n.disabled&&r.dateInRange(t,n.disabled)&&(u=!0),u&&(i+=" calendar-day-disabled");var k=(t=new Date(t)).getFullYear(),T=t.getMonth(),S=r.dayFormatter.format(t);C+=('\n          <div data-year="'+k+'" data-month="'+T+'" data-day="'+a+'" class="calendar-day'+i+'" data-date="'+k+"-"+T+"-"+a+'">\n            <span class="calendar-day-number">'+S+c+"</span>\n          </div>").trim()},T=1;T<=7;T+=1)k(T);b+='<div class="calendar-row">'+C+"</div>"}return b='<div class="calendar-month" data-year="'+o+'" data-month="'+s+'" data-locale-year="'+c+'" data-locale-month="'+l+'">'+b+"</div>"},s.renderWeekHeader=function(){var e=this;if(e.params.renderWeekHeader)return e.params.renderWeekHeader.call(e);for(var t=e.params,r="",n=0;n<7;n+=1){var a=n+t.firstDay>6?n-7+t.firstDay:n+t.firstDay;r+='<div class="calendar-week-day">'+e.dayNamesShort[a]+"</div>"}return jn("div",{class:"calendar-week-header"},r)},s.renderMonthSelector=function(){var e=this;return e.params.renderMonthSelector?e.params.renderMonthSelector.call(e):jn("div",{class:"calendar-month-selector"},jn("a",{class:"link icon-only calendar-prev-month-button"},jn("i",{class:"icon icon-prev"})),e.params.monthPicker?jn("a",{class:"current-month-value link"}):jn("span",{class:"current-month-value"}),jn("a",{class:"link icon-only calendar-next-month-button"},jn("i",{class:"icon icon-next"})))},s.renderMonthPicker=function(){var e=parseInt(this.$el.find(".calendar-month-current").attr("data-locale-month"),10);return jn("div",{class:"calendar-month-picker"},this.monthNames.map((function(t,r){return jn("div",{class:"calendar-month-picker-item "+(e===r?"calendar-month-picker-item-current":"")},jn("span",null,t))})))},s.renderYearSelector=function(){var e=this;return e.params.renderYearSelector?e.params.renderYearSelector.call(e):jn("div",{class:"calendar-year-selector"},jn("a",{class:"link icon-only calendar-prev-year-button"},jn("i",{class:"icon icon-prev"})),e.params.yearPicker?jn("a",{class:"current-year-value link"}):jn("span",{class:"current-year-value"}),jn("a",{class:"link icon-only calendar-next-year-button"},jn("i",{class:"icon icon-next"})))},s.renderYearPicker=function(){var e=this,t=e.currentYear,r=e.params.yearPickerMin||(new Date).getFullYear()-100;e.params.minDate&&(r=Math.max(r,new Date(e.params.minDate).getFullYear()));var n=e.params.yearPickerMax||(new Date).getFullYear()+100;e.params.maxDate&&(n=Math.min(n,new Date(e.params.maxDate).getFullYear()));for(var a=[],i=r;i<=n;i+=1)a.push(i);return jn("div",{class:"calendar-year-picker"},a.map((function(r){return jn("div",{"data-year":r,class:"calendar-year-picker-item "+(r===t?"calendar-year-picker-item-current":"")},jn("span",null,e.yearFormatter.format((new Date).setFullYear(r))))})))},s.renderTimeSelector=function(){var e,t=this,r=t.value&&t.value[0];return r&&(e=t.timeSelectorFormatter.format(r)),jn("div",{class:"calendar-time-selector"},jn("a",{class:"link"},e||t.params.timePickerPlaceholder))},s.renderHeader=function(){var e=this;return e.params.renderHeader?e.params.renderHeader.call(e):jn("div",{class:"calendar-header"},jn("div",{class:"calendar-selected-date"},e.params.headerPlaceholder))},s.renderFooter=function(){var e=this,t=e.app;return e.params.renderFooter?e.params.renderFooter.call(e):jn("div",{class:"calendar-footer"},jn("a",{class:("md"===t.theme?"button":"link")+" calendar-close sheet-close popover-close"},e.params.toolbarCloseText))},s.renderToolbar=function(){var e=this;return e.params.renderToolbar?e.params.renderToolbar.call(e,e):jn("div",{class:"toolbar toolbar-top no-shadow"},jn("div",{class:"toolbar-inner"},e.params.monthSelector?e.renderMonthSelector():"",e.params.yearSelector?e.renderYearSelector():""))},s.renderInline=function(){var e=this,t=e.params,r=t.cssClass,n=t.toolbar,a=t.header,i=t.footer,o=t.rangePicker,s=t.weekHeader,l=e.value,c=e.hasTimePicker,u=l&&l.length?l[0]:(new Date).setHours(0,0,0);return jn("div",{class:"calendar calendar-inline "+(o?"calendar-range":"")+" "+(r||"")},a&&e.renderHeader(),n&&e.renderToolbar(),s&&e.renderWeekHeader(),jn("div",{class:"calendar-months"},e.renderMonths(u)),c&&e.renderTimeSelector(),i&&e.renderFooter())},s.renderCustomModal=function(){var e=this,t=e.params,r=t.cssClass,n=t.toolbar,a=t.header,i=t.footer,o=t.rangePicker,s=t.weekHeader,l=e.value,c=e.hasTimePicker,u=l&&l.length?l[0]:(new Date).setHours(0,0,0);return jn("div",{class:"calendar calendar-modal "+(o?"calendar-range":"")+" "+(r||"")},a&&e.renderHeader(),n&&e.renderToolbar(),s&&e.renderWeekHeader(),jn("div",{class:"calendar-months"},e.renderMonths(u)),c&&e.renderTimeSelector(),i&&e.renderFooter())},s.renderSheet=function(){var e=this,t=e.params,r=t.cssClass,n=t.toolbar,a=t.header,i=t.footer,o=t.rangePicker,s=t.weekHeader,l=e.value,c=e.hasTimePicker,u=l&&l.length?l[0]:(new Date).setHours(0,0,0);return jn("div",{class:"sheet-modal calendar calendar-sheet "+(o?"calendar-range":"")+" "+(r||"")},a&&e.renderHeader(),n&&e.renderToolbar(),s&&e.renderWeekHeader(),jn("div",{class:"sheet-modal-inner calendar-months"},e.renderMonths(u)),c&&e.renderTimeSelector(),i&&e.renderFooter())},s.renderPopover=function(){var e=this,t=e.params,r=t.cssClass,n=t.toolbar,a=t.header,i=t.footer,o=t.rangePicker,s=t.weekHeader,l=e.value,c=e.hasTimePicker,u=l&&l.length?l[0]:(new Date).setHours(0,0,0);return jn("div",{class:"popover calendar-popover"},jn("div",{class:"popover-inner"},jn("div",{class:"calendar "+(o?"calendar-range":"")+" "+(r||"")},a&&e.renderHeader(),n&&e.renderToolbar(),s&&e.renderWeekHeader(),jn("div",{class:"calendar-months"},e.renderMonths(u)),c&&e.renderTimeSelector(),i&&e.renderFooter())))},s.render=function(){var e=this,t=e.params;if(t.render)return t.render.call(e);if(!e.inline){var r=t.openIn;return"auto"===r&&(r=e.isPopover()?"popover":"sheet"),"popover"===r?e.renderPopover():"sheet"===r?e.renderSheet():e.renderCustomModal()}return e.renderInline()},s.openTimePicker=function(){var e=this,t=e.$el,r=e.app,n=e.is12HoursFormat;if(t&&t.length){t.append('<div class="calendar-time-picker"></div>');for(var a,i=[],o=[],s=n?12:23,l=n?1:0;l<=s;l+=1)i.push(l);for(var c=0;c<=59;c+=1)o.push(c);a=e.value&&e.value.length?[e.value[0].getHours(),e.value[0].getMinutes()]:[(new Date).getHours(),(new Date).getMinutes()],n&&(a.push(a[0]<12?"AM":"PM"),a[0]>12&&(a[0]-=12),0===a[0]&&(a[0]=12)),e.timePickerInstance=r.picker.create({containerEl:t.find(".calendar-time-picker"),value:a,toolbar:!0,rotateEffect:!1,toolbarCloseText:e.params.toolbarCloseText,cols:[{values:i},{divider:!0,content:":"},{values:o,displayValues:o.map((function(e){return e<10?"0"+e:e}))}].concat(n?[{values:["AM","PM"]}]:[])}),e.timePickerInstance.$el.find(".toolbar a").removeClass("sheet-close popover-close").addClass("calendar-time-picker-close")}},s.closeTimePicker=function(){var e=this,t=e.is12HoursFormat;if(e.timePickerInstance){var r=e.timePickerInstance.value,n=parseInt(r[0],10),a=parseInt(r[1],10),i=e.timePickerInstance.value[2];t&&("AM"===i&&12===n?n=0:"PM"===i&&12!==n&&(n+=12));var o=e.value&&e.value.length&&e.value[0];o?(o=new Date(o)).setHours(n,a):(o=new Date).setHours(n,a,0,0),e.setValue([o]),e.timePickerInstance.close(),e.timePickerInstance.destroy(),delete e.timePickerInstance}e.$el&&e.$el.length&&e.$el.find(".calendar-time-picker").remove()},s.onOpen=function(){var e=this,t=e.initialized,r=e.$el,n=e.app,a=e.$inputEl,i=e.inline,o=e.value,s=e.params;e.closing=!1,e.opened=!0,e.opening=!0,e.attachCalendarEvents();var l=!o&&s.value;t?o&&e.setValue(o,0):o?e.setValue(o,0):s.value&&e.setValue(e.normalizeValues(s.value),0),e.updateCurrentMonthYear(),e.monthsTranslate=0,e.setMonthsTranslate(),l?e.updateValue():s.header&&o&&e.updateValue(!0),!i&&a&&a.length&&"md"===n.theme&&a.trigger("focus"),e.initialized=!0,e.$months.each((function(t){e.emit("local::monthAdd calendarMonthAdd",t)})),r&&r.trigger("calendar:open"),a&&a.trigger("calendar:open"),e.emit("local::open calendarOpen",e)},s.onOpened=function(){var e=this;e.opening=!1,e.$el&&e.$el.trigger("calendar:opened"),e.$inputEl&&e.$inputEl.trigger("calendar:opened"),e.emit("local::opened calendarOpened",e)},s.onClose=function(){var e=this,t=e.app;if(e.opening=!1,e.closing=!0,e.$inputEl)if("md"===t.theme)e.$inputEl.trigger("blur");else{var r=e.$inputEl.attr("validate"),n=e.$inputEl.attr("required");r&&n&&t.input.validate(e.$inputEl)}e.detachCalendarEvents&&e.detachCalendarEvents(),e.$el&&e.$el.trigger("calendar:close"),e.$inputEl&&e.$inputEl.trigger("calendar:close"),e.emit("local::close calendarClose",e)},s.onClosed=function(){var e=this;e.opened=!1,e.closing=!1,e.inline||x((function(){e.modal&&e.modal.el&&e.modal.destroy&&(e.params.routableModals||e.modal.destroy()),delete e.modal})),e.timePickerInstance&&(e.timePickerInstance.destroy&&e.timePickerInstance.destroy(),delete e.timePickerInstance),e.$el&&e.$el.trigger("calendar:closed"),e.$inputEl&&e.$inputEl.trigger("calendar:closed"),e.emit("local::closed calendarClosed",e)},s.open=function(){var e=this,t=e.app,r=e.opened,n=e.inline,a=e.$inputEl,i=e.params;if(!r){if(n)return e.$el=Ot(e.render()),e.$el[0].f7Calendar=e,e.$wrapperEl=e.$el.find(".calendar-months-wrapper"),e.$months=e.$wrapperEl.find(".calendar-month"),e.$containerEl.append(e.$el),e.onOpen(),void e.onOpened();var o=i.openIn;"auto"===o&&(o=e.isPopover()?"popover":"sheet");var s,l=e.render(),c={targetEl:a,scrollToEl:i.scrollToInput?a:void 0,content:l,backdrop:!0===i.backdrop||"popover"===o&&!1!==t.params.popover.backdrop&&!1!==i.backdrop,closeByBackdropClick:i.closeByBackdropClick,on:{open:function(){var t=this;e.modal=t,e.$el="popover"===o?t.$el.find(".calendar"):t.$el,e.$wrapperEl=e.$el.find(".calendar-months-wrapper"),e.$months=e.$wrapperEl.find(".calendar-month"),e.$el[0].f7Calendar=e,"customModal"===o&&Ot(e.$el).find(".calendar-close").once("click",(function(){e.close()})),e.onOpen()},opened:function(){e.onOpened()},close:function(){e.onClose()},closed:function(){e.onClosed()}}};if("sheet"===o&&(c.push=i.sheetPush,c.swipeToClose=i.sheetSwipeToClose),i.routableModals&&e.view)e.view.router.navigate({url:e.url,route:(s={path:e.url},s[o]=c,s)});else e.modal=t[o].create(c),e.modal.open()}},s.close=function(){var e=this,t=e.opened,r=e.inline;if(t)return r?(e.onClose(),void e.onClosed()):void(e.params.routableModals&&e.view?e.view.router.back():e.modal.close())},s.init=function(){var e=this;if(e.initInput(),e.inline)return e.open(),void e.emit("local::init calendarInit",e);!e.initialized&&e.params.value&&e.setValue(e.normalizeValues(e.params.value)),e.$inputEl&&e.attachInputEvents(),e.params.closeByOutsideClick&&e.attachHtmlEvents(),e.emit("local::init calendarInit",e)},s.destroy=function(){var e=this;if(!e.destroyed){var t=e.$el;e.emit("local::beforeDestroy calendarBeforeDestroy",e),t&&t.trigger("calendar:beforedestroy"),e.close(),e.$inputEl&&e.detachInputEvents(),e.params.closeByOutsideClick&&e.detachHtmlEvents(),e.timePickerInstance&&(e.timePickerInstance.destroy&&e.timePickerInstance.destroy(),delete e.timePickerInstance),t&&t.length&&delete e.$el[0].f7Calendar,y(e),e.destroyed=!0}},a=n,(i=[{key:"view",get:function(){var e,t=this.$inputEl,r=this.app,n=this.params;return n.view?e=n.view:t&&(e=t.parents(".view").length&&t.parents(".view")[0].f7View),e||(e=r.views.main),e}}])&&xi(a.prototype,i),o&&xi(a,o),n}(q),ki={name:"calendar",static:{Calendar:Ci},create:function(){var e=this;e.calendar=Dt({defaultSelector:".calendar",constructor:Ci,app:e,domProp:"f7Calendar"}),e.calendar.close=function(e){void 0===e&&(e=".calendar");var t=Ot(e);if(0!==t.length){var r=t[0].f7Calendar;!r||r&&!r.opened||r.close()}}},params:{calendar:{dateFormat:void 0,monthNames:"auto",monthNamesShort:"auto",dayNames:"auto",dayNamesShort:"auto",locale:void 0,firstDay:1,weekendDays:[0,6],multiple:!1,rangePicker:!1,rangePickerMinDays:1,rangePickerMaxDays:0,direction:"horizontal",minDate:null,maxDate:null,disabled:null,events:null,rangesClasses:null,touchMove:!0,animate:!0,closeOnSelect:!1,monthSelector:!0,monthPicker:!0,yearSelector:!0,yearPicker:!0,yearPickerMin:void 0,yearPickerMax:void 0,timePicker:!1,timePickerFormat:{hour:"numeric",minute:"numeric"},timePickerPlaceholder:"Select time",weekHeader:!0,value:null,containerEl:null,openIn:"auto",sheetPush:!1,sheetSwipeToClose:void 0,formatValue:null,inputEl:null,inputReadOnly:!0,closeByOutsideClick:!0,scrollToInput:!0,header:!1,headerPlaceholder:"Select date",toolbar:!0,toolbarCloseText:"Done",footer:!1,cssClass:null,routableModals:!1,view:null,url:"date/",backdrop:null,closeByBackdropClick:!0,renderWeekHeader:null,renderMonths:null,renderMonth:null,renderMonthSelector:null,renderYearSelector:null,renderHeader:null,renderFooter:null,renderToolbar:null,renderInline:null,renderPopover:null,renderSheet:null,render:null}}};function Ti(e,t){var r=this,n=r.app,a=Ot(e),i=a.index(),o=r.cols[i];if(!o.divider){var s,l,c,u,p;o.$el=a,o.el=a[0],o.$itemsEl=o.$el.find(".picker-items"),o.items=o.$itemsEl.find(".picker-item"),o.replaceValues=function(e,t){o.detachEvents(),o.values=e,o.displayValues=t,o.$itemsEl.html(r.renderColumn(o,!0)),o.items=o.$itemsEl.find(".picker-item"),o.calcSize(),o.setValue(o.values[0],0,!0),o.attachEvents()},o.calcSize=function(){r.params.rotateEffect&&(o.$el.removeClass("picker-column-absolute"),o.width||o.$el.css({width:""}));var e=0,t=o.$el[0].offsetHeight;s=o.items[0].offsetHeight,l=s*o.items.length,c=t/2-l+s/2,u=t/2-s/2,o.width&&(e=o.width,parseInt(e,10)===e&&(e+="px"),o.$el.css({width:e})),r.params.rotateEffect&&(o.width||(o.items.each((function(t){var r=Ot(t).children("span");e=Math.max(e,r[0].offsetWidth)})),o.$el.css({width:e+2+"px"})),o.$el.addClass("picker-column-absolute"))},o.setValue=function(e,t,n){void 0===t&&(t="");var a=o.$itemsEl.find('.picker-item[data-picker-value="'+e+'"]').index();if(void 0!==a&&-1!==a){var i=-a*s+u;o.$itemsEl.transition(t),o.$itemsEl.transform("translate3d(0,"+i+"px,0)"),r.params.updateValuesOnMomentum&&o.activeIndex&&o.activeIndex!==a&&(cancelAnimationFrame(p),o.$itemsEl.transitionEnd((function(){cancelAnimationFrame(p)})),S()),o.updateItems(a,i,t,n)}},o.updateItems=function(e,t,n,a){void 0===t&&(t=k(o.$itemsEl[0],"y")),void 0===e&&(e=-Math.round((t-u)/s)),e<0&&(e=0),e>=o.items.length&&(e=o.items.length-1);var i=o.activeIndex;o.activeIndex=e,o.$itemsEl.find(".picker-item-selected").removeClass("picker-item-selected"),o.items.transition(n);var l=o.items.eq(e).addClass("picker-item-selected").transform("");r.params.rotateEffect&&o.items.each((function(e){var n=Ot(e),a=(n.index()*s-(u-t))/s,i=Math.ceil(o.height/s/2)+1,l=-18*a;l>180&&(l=180),l<-180&&(l=-180),Math.abs(a)>i?n.addClass("picker-item-far"):n.removeClass("picker-item-far"),n.transform("translate3d(0, "+(-t+u)+"px, "+(r.needsOriginFix?-110:0)+"px) rotateX("+l+"deg)")})),(a||void 0===a)&&(o.value=l.attr("data-picker-value"),o.displayValue=o.displayValues?o.displayValues[e]:o.value,i!==e&&(o.onChange&&o.onChange(r,o.value,o.displayValue),r.updateValue()))};var d,h,f,m,g,v,y,_,x,w,E,C=!0,T=!!F().passiveListener&&{passive:!1,capture:!1};o.attachEvents=function(){o.$el.on(n.touchEvents.start,P,T),n.on("touchmove:active",M),n.on("touchend:passive",I),r.params.mousewheel&&o.$el.on("wheel",A),o.items.on("click",O)},o.detachEvents=function(){o.$el.off(n.touchEvents.start,P,T),n.off("touchmove:active",M),n.off("touchend:passive",I),r.params.mousewheel&&o.$el.off("wheel",A),o.items.off("click",O)},o.init=function(){o.calcSize(),o.$itemsEl.transform("translate3d(0,"+u+"px,0)").transition(0),0===i&&o.$el.addClass("picker-column-first"),i===r.cols.length-1&&o.$el.addClass("picker-column-last"),t&&o.updateItems(0,u,0),o.attachEvents()},o.destroy=function(){o.detachEvents()},o.init()}function S(){p=b((function(){o.updateItems(void 0,void 0,0),S()}))}function P(e){h||d||(e.preventDefault(),d=!0,f="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,m=f,g=(new Date).getTime(),C=!0,v=k(o.$itemsEl[0],"y"),_=v)}function M(e){d&&(e.preventDefault(),C=!1,m="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,h||(cancelAnimationFrame(p),h=!0,v=k(o.$itemsEl[0],"y"),_=v,o.$itemsEl.transition(0)),y=void 0,(_=v+(m-f))<c&&(_=c-Math.pow(c-_,.8),y="min"),_>u&&(_=u+Math.pow(_-u,.8),y="max"),o.$itemsEl.transform("translate3d(0,"+_+"px,0)"),o.updateItems(void 0,_,0,r.params.updateValuesOnTouchmove),w=_-x||_,x=_)}function I(){if(!d||!h)return d=!1,void(h=!1);var e;d=!1,h=!1,o.$itemsEl.transition(""),y&&("min"===y?o.$itemsEl.transform("translate3d(0,"+c+"px,0)"):o.$itemsEl.transform("translate3d(0,"+u+"px,0)")),e=(new Date).getTime()-g>300?_:_+w*r.params.momentumRatio,e=Math.max(Math.min(e,u),c);var t=Math.round(Math.abs((e-u)/s));r.params.freeMode||(e=-t*s+u),o.$itemsEl.transform("translate3d(0,"+parseInt(e,10)+"px,0)"),o.updateItems(t,e,"",!0),r.params.updateValuesOnMomentum&&(S(),o.$itemsEl.transitionEnd((function(){cancelAnimationFrame(p)}))),setTimeout((function(){C=!0}),100)}function A(e){var t=e.deltaX,n=e.deltaY;Math.abs(t)>Math.abs(n)||(clearTimeout(E),e.preventDefault(),cancelAnimationFrame(p),v=k(o.$itemsEl[0],"y"),o.$itemsEl.transition(0),y=void 0,(_=v-n)<c&&(_=c,y="min"),_>u&&(_=u,y="max"),o.$itemsEl.transform("translate3d(0,"+_+"px,0)"),o.updateItems(void 0,_,0,r.params.updateValuesOnMousewheel),E=setTimeout((function(){o.$itemsEl.transition(""),y&&("min"===y?o.$itemsEl.transform("translate3d(0,"+c+"px,0)"):o.$itemsEl.transform("translate3d(0,"+u+"px,0)")),(new Date).getTime();var e=_;e=Math.max(Math.min(e,u),c);var t=Math.round(Math.abs((e-u)/s));r.params.freeMode||(e=-t*s+u),o.$itemsEl.transform("translate3d(0,"+parseInt(e,10)+"px,0)"),o.updateItems(t,e,"",!0)}),200))}function O(){if(C){cancelAnimationFrame(p);var e=Ot(this).attr("data-picker-value");o.setValue(e)}}}function Si(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mi(e,t){return(Mi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ii=function(e){var t,r;function n(t,r){var n;void 0===r&&(r={});var a,i,o=Pi(n=e.call(this,r,[t])||this),s=N(),c=l();if(o.params=M({},t.params.picker,r),o.params.containerEl&&0===(a=Ot(o.params.containerEl)).length)return o||Pi(n);o.params.inputEl&&(i=Ot(o.params.inputEl));var u=o.params.scrollToInput?i:void 0;if(o.params.scrollToEl){var p=Ot(o.params.scrollToEl);p.length>0&&(u=p)}function d(){o.resizeCols()}function h(){o.open()}function f(e){e.preventDefault()}function m(e){if(!o.destroyed&&o.params){var t=Ot(e.target);o.isPopover()||o.opened&&!o.closing&&(t.closest('[class*="backdrop"]').length||(i&&i.length>0?t[0]!==i[0]&&0===t.closest(".sheet-modal").length&&o.close():0===Ot(e.target).closest(".sheet-modal").length&&o.close()))}}return M(o,{app:t,$containerEl:a,containerEl:a&&a[0],inline:a&&a.length>0,needsOriginFix:s.ios||c.navigator.userAgent.toLowerCase().indexOf("safari")>=0&&c.navigator.userAgent.toLowerCase().indexOf("chrome")<0&&!s.android,cols:[],$inputEl:i,inputEl:i&&i[0],$scrollToEl:u,initialized:!1,opened:!1,url:o.params.url}),M(o,{attachResizeEvent:function(){t.on("resize",d)},detachResizeEvent:function(){t.off("resize",d)},attachInputEvents:function(){o.$inputEl.on("click",h),o.params.inputReadOnly&&(o.$inputEl.on("focus mousedown",f),o.$inputEl[0]&&(o.$inputEl[0].f7ValidateReadonly=!0))},detachInputEvents:function(){o.$inputEl.off("click",h),o.params.inputReadOnly&&(o.$inputEl.off("focus mousedown",f),o.$inputEl[0]&&delete o.$inputEl[0].f7ValidateReadonly)},attachHtmlEvents:function(){t.on("click",m)},detachHtmlEvents:function(){t.off("click",m)}}),o.init(),o||Pi(n)}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,Mi(t,r);var a,i,o,s=n.prototype;return s.initInput=function(){var e=this;e.$inputEl&&e.params.inputReadOnly&&e.$inputEl.prop("readOnly",!0)},s.resizeCols=function(){var e=this;if(e.opened)for(var t=0;t<e.cols.length;t+=1)e.cols[t].divider||(e.cols[t].calcSize(),e.cols[t].setValue(e.cols[t].value,0,!1))},s.isPopover=function(){var e=this,t=e.app,r=e.modal,n=e.params,a=N();if("sheet"===n.openIn)return!1;if(r&&"popover"!==r.type)return!1;if(!e.inline&&e.inputEl){if("popover"===n.openIn)return!0;if(a.ios)return!!a.ipad;if(t.width>=768)return!0;if(a.desktop&&"aurora"===t.theme)return!0}return!1},s.formatValue=function(){var e=this,t=e.value,r=e.displayValue;return e.params.formatValue?e.params.formatValue.call(e,t,r):t.join(" ")},s.setValue=function(e,t){var r=this,n=0;if(0===r.cols.length)return r.value=e,void r.updateValue(e);for(var a=0;a<r.cols.length;a+=1)r.cols[a]&&!r.cols[a].divider&&(r.cols[a].setValue(e[n],t),n+=1)},s.getValue=function(){return this.value},s.updateValue=function(e){var t,r=this,n=e||[],a=[];if(0===r.cols.length)for(var i=r.params.cols.filter((function(e){return!e.divider})),o=0;o<i.length;o+=1)void 0!==(t=i[o]).displayValues&&void 0!==t.values&&-1!==t.values.indexOf(n[o])?a.push(t.displayValues[t.values.indexOf(n[o])]):a.push(n[o]);else for(var s=0;s<r.cols.length;s+=1)r.cols[s].divider||(n.push(r.cols[s].value),a.push(r.cols[s].displayValue));n.indexOf(void 0)>=0||(r.value=n,r.displayValue=a,r.emit("local::change pickerChange",r,r.value,r.displayValue),r.inputEl&&(r.$inputEl.val(r.formatValue()),r.$inputEl.trigger("change")))},s.initColumn=function(e,t){Ti.call(this,e,t)},s.destroyColumn=function(e){var t=this,r=Ot(e).index();t.cols[r]&&t.cols[r].destroy&&t.cols[r].destroy()},s.renderToolbar=function(){var e=this;return e.params.renderToolbar?e.params.renderToolbar.call(e,e):jn("div",{class:"toolbar toolbar-top no-shadow"},jn("div",{class:"toolbar-inner"},jn("div",{class:"left"}),jn("div",{class:"right"},jn("a",{class:"link sheet-close popover-close"},e.params.toolbarCloseText))))},s.renderColumn=function(e,t){var r,n,a="picker-column "+(e.textAlign?"picker-column-"+e.textAlign:"")+" "+(e.cssClass||"");return r=e.divider?'\n        <div class="'+a+' picker-column-divider">'+e.content+"</div>\n      ":'\n        <div class="'+a+'">\n          <div class="picker-items">'+(n=e.values.map((function(t,r){return'\n        <div class="picker-item" data-picker-value="'+t+'">\n          <span>'+(e.displayValues?e.displayValues[r]:t)+"</span>\n        </div>\n      "})).join(""))+"</div>\n        </div>\n      ",t?n.trim():r.trim()},s.renderInline=function(){var e=this,t=e.params,r=t.rotateEffect,n=t.cssClass,a=t.toolbar;return jn("div",{class:"picker picker-inline "+(r?"picker-3d":"")+" "+(n||"")},a&&e.renderToolbar(),jn("div",{class:"picker-columns"},e.cols.map((function(t){return e.renderColumn(t)})),jn("div",{class:"picker-center-highlight"})))},s.renderSheet=function(){var e=this,t=e.params,r=t.rotateEffect,n=t.cssClass,a=t.toolbar;return jn("div",{class:"sheet-modal picker picker-sheet "+(r?"picker-3d":"")+" "+(n||"")},a&&e.renderToolbar(),jn("div",{class:"sheet-modal-inner picker-columns"},e.cols.map((function(t){return e.renderColumn(t)})),jn("div",{class:"picker-center-highlight"})))},s.renderPopover=function(){var e=this,t=e.params,r=t.rotateEffect,n=t.cssClass,a=t.toolbar;return jn("div",{class:"popover picker-popover"},jn("div",{class:"popover-inner"},jn("div",{class:"picker "+(r?"picker-3d":"")+" "+(n||"")},a&&e.renderToolbar(),jn("div",{class:"picker-columns"},e.cols.map((function(t){return e.renderColumn(t)})),jn("div",{class:"picker-center-highlight"})))))},s.render=function(){var e=this;return e.params.render?e.params.render.call(e):e.inline?e.renderInline():e.isPopover()?e.renderPopover():e.renderSheet()},s.onOpen=function(){var e=this,t=e.initialized,r=e.$el,n=e.app,a=e.$inputEl,i=e.inline,o=e.value,s=e.params;e.opened=!0,e.closing=!1,e.opening=!0,e.attachResizeEvent(),r.find(".picker-column").each((function(r){var n=!0;(!t&&s.value||t&&o)&&(n=!1),e.initColumn(r,n)})),t?o&&e.setValue(o,0):o?e.setValue(o,0):s.value&&e.setValue(s.value,0),!i&&a&&a.length&&"md"===n.theme&&a.trigger("focus"),e.initialized=!0,r&&r.trigger("picker:open"),a&&a.trigger("picker:open"),e.emit("local::open pickerOpen",e)},s.onOpened=function(){var e=this;e.opening=!1,e.$el&&e.$el.trigger("picker:opened"),e.$inputEl&&e.$inputEl.trigger("picker:opened"),e.emit("local::opened pickerOpened",e)},s.onClose=function(){var e=this,t=e.app;if(e.opening=!1,e.closing=!0,e.detachResizeEvent(),e.cols.forEach((function(e){e.destroy&&e.destroy()})),e.$inputEl)if("md"===t.theme)e.$inputEl.trigger("blur");else{var r=e.$inputEl.attr("validate"),n=e.$inputEl.attr("required");r&&n&&t.input.validate(e.$inputEl)}e.$el&&e.$el.trigger("picker:close"),e.$inputEl&&e.$inputEl.trigger("picker:close"),e.emit("local::close pickerClose",e)},s.onClosed=function(){var e=this;e.opened=!1,e.closing=!1,e.inline||x((function(){e.modal&&e.modal.el&&e.modal.destroy&&(e.params.routableModals||e.modal.destroy()),delete e.modal})),e.$el&&e.$el.trigger("picker:closed"),e.$inputEl&&e.$inputEl.trigger("picker:closed"),e.emit("local::closed pickerClosed",e)},s.open=function(){var e=this,t=e.app,r=e.opened,n=e.inline,a=e.$inputEl,i=e.$scrollToEl,o=e.params;if(!r){if(0===e.cols.length&&o.cols.length&&o.cols.forEach((function(t){e.cols.push(t)})),n)return e.$el=Ot(e.render()),e.$el[0].f7Picker=e,e.$containerEl.append(e.$el),e.onOpen(),void e.onOpened();var s,l=e.isPopover(),c=l?"popover":"sheet",u={targetEl:a,scrollToEl:i,content:e.render(),backdrop:void 0!==o.backdrop?o.backdrop:l,on:{open:function(){var t=this;e.modal=t,e.$el=l?t.$el.find(".picker"):t.$el,e.$el[0].f7Picker=e,e.onOpen()},opened:function(){e.onOpened()},close:function(){e.onClose()},closed:function(){e.onClosed()}}};if("sheet"===c&&(u.push=o.sheetPush,u.swipeToClose=o.sheetSwipeToClose),o.routableModals&&e.view)e.view.router.navigate({url:e.url,route:(s={path:e.url},s[c]=u,s)});else e.modal=t[c].create(u),e.modal.open()}},s.close=function(){var e=this,t=e.opened,r=e.inline;if(t)return r?(e.onClose(),void e.onClosed()):void(e.params.routableModals&&e.view?e.view.router.back():e.modal.close())},s.init=function(){var e=this;if(e.initInput(),e.inline)return e.open(),void e.emit("local::init pickerInit",e);!e.initialized&&e.params.value&&e.setValue(e.params.value),e.$inputEl&&e.attachInputEvents(),e.params.closeByOutsideClick&&e.attachHtmlEvents(),e.emit("local::init pickerInit",e)},s.destroy=function(){var e=this;if(!e.destroyed){var t=e.$el;e.emit("local::beforeDestroy pickerBeforeDestroy",e),t&&t.trigger("picker:beforedestroy"),e.close(),e.$inputEl&&e.detachInputEvents(),e.params.closeByOutsideClick&&e.detachHtmlEvents(),t&&t.length&&delete e.$el[0].f7Picker,y(e),e.destroyed=!0}},a=n,(i=[{key:"view",get:function(){var e,t=this.app,r=this.params,n=this.$inputEl;return r.view?e=r.view:n&&(e=n.parents(".view").length&&n.parents(".view")[0].f7View),e||(e=t.views.main),e}}])&&Si(a.prototype,i),o&&Si(a,o),n}(q),Ai={name:"picker",static:{Picker:Ii},create:function(){var e=this;e.picker=Dt({defaultSelector:".picker",constructor:Ii,app:e,domProp:"f7Picker"}),e.picker.close=function(e){void 0===e&&(e=".picker");var t=Ot(e);if(0!==t.length){var r=t[0].f7Picker;!r||r&&!r.opened||r.close()}}},params:{picker:{updateValuesOnMomentum:!1,updateValuesOnTouchmove:!0,updateValuesOnMousewheel:!0,mousewheel:!0,rotateEffect:!1,momentumRatio:7,freeMode:!1,cols:[],containerEl:null,openIn:"auto",sheetPush:!1,sheetSwipeToClose:void 0,backdrop:void 0,formatValue:null,inputEl:null,inputReadOnly:!0,closeByOutsideClick:!0,scrollToInput:!0,scrollToEl:void 0,toolbar:!0,toolbarCloseText:"Done",cssClass:null,routableModals:!1,view:null,url:"select/",renderToolbar:null,render:null}}},Oi={handle:function(e,t){var r,n=Ot(e),a=n[0].scrollTop,i=n[0].scrollHeight,o=n[0].offsetHeight,s=n[0].getAttribute("data-infinite-distance"),l=n.find(".virtual-list"),c=n.hasClass("infinite-scroll-top");if(s||(s=50),"string"==typeof s&&s.indexOf("%")>=0&&(s=parseInt(s,10)/100*o),s>o&&(s=o),c)a<s&&(n.trigger("infinite",t),this.emit("infinite",n[0],t));else if(a+o>=i-s){if(l.length>0&&(r=l.eq(-1)[0].f7VirtualList)&&!r.reachEnd&&!r.params.updatableScroll)return;n.trigger("infinite",t),this.emit("infinite",n[0],t)}},create:function(e){var t=Ot(e),r=this;function n(e){r.infiniteScroll.handle(this,e)}t.each((function(e){e.f7InfiniteScrollHandler=n,e.addEventListener("scroll",e.f7InfiniteScrollHandler)}))},destroy:function(e){Ot(e).each((function(e){e.removeEventListener("scroll",e.f7InfiniteScrollHandler),delete e.f7InfiniteScrollHandler}))}},zi={name:"infiniteScroll",create:function(){B(this,{infiniteScroll:Oi})},on:{tabMounted:function(e){var t=this,r=Ot(e),n=r.find(".infinite-scroll-content");r.is(".infinite-scroll-content")&&n.add(r),n.each((function(e){t.infiniteScroll.create(e)}))},tabBeforeRemove:function(e){var t=Ot(e),r=this,n=t.find(".infinite-scroll-content");t.is(".infinite-scroll-content")&&n.add(t),n.each((function(e){r.infiniteScroll.destroy(e)}))},pageInit:function(e){var t=this;e.$el.find(".infinite-scroll-content").each((function(e){t.infiniteScroll.create(e)}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".infinite-scroll-content").each((function(e){t.infiniteScroll.destroy(e)}))}}};function Ri(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Li(e,t){return(Li=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Di=function(e){var t,r;function n(t,r){var n,a=Ri(n=e.call(this,{},[t])||this),i=N(),o=F(),s=Ot(r),l=s.find(".ptr-preloader");a.$el=s,a.el=s[0],a.app=t,a.bottom=a.$el.hasClass("ptr-bottom"),a.useModulesParams({});var c,u,p,d="md"===t.theme,h="ios"===t.theme,f="aurora"===t.theme;a.done=function(){return(d?l:s).transitionEnd((function(){s.removeClass("ptr-transitioning ptr-pull-up ptr-pull-down ptr-closing"),s.trigger("ptr:done"),a.emit("local::done ptrDone",s[0])})),s.removeClass("ptr-refreshing").addClass("ptr-transitioning ptr-closing"),a},a.refresh=function(){return s.hasClass("ptr-refreshing")||(s.addClass("ptr-transitioning ptr-refreshing"),s.trigger("ptr:refresh",a.done),a.emit("local::refresh ptrRefresh",s[0],a.done)),a},a.mousewheel="true"===s.attr("data-ptr-mousewheel");var m,g,v,y,b,_,x,w,E,C,k,T,S,P={},M=!1,I=!1,A=!1,O=0,z=!1,R=s.parents(".page");if((R.find(".navbar").length>0||R.parents(".view").children(".navbars").length>0)&&(z=!0),R.hasClass("no-navbar")&&(z=!1),!a.bottom){var L=t.navbar.getElByPage(R[0]);if(L){var D=Ot(L),B=D.hasClass("navbar-large-transparent")||D.hasClass("navbar-large")&&D.hasClass("navbar-transparent"),$=D.hasClass("navbar-transparent")&&!D.hasClass("navbar-large");B?s.addClass("ptr-with-navbar-large-transparent"):$&&s.addClass("ptr-with-navbar-transparent")}}function V(e){if(u){if("android"!==i.os)return;if("targetTouches"in e&&e.targetTouches.length>1)return}s.hasClass("ptr-refreshing")||Ot(e.target).closest(".sortable-handler, .ptr-ignore, .card-expandable.card-opened").length||(p=!1,w=!1,u=!0,m=void 0,b=void 0,"touchstart"===e.type&&(c=e.targetTouches[0].identifier),P.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,P.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY)}function j(e){if(u){var t,n,o;if("touchmove"===e.type){if(c&&e.touches)for(var h=0;h<e.touches.length;h+=1)e.touches[h].identifier===c&&(o=e.touches[h]);o||(o=e.targetTouches[0]),t=o.pageX,n=o.pageY}else t=e.pageX,n=e.pageY;if(t&&n)if(void 0===m&&(m=!!(m||Math.abs(n-P.y)>Math.abs(t-P.x))),m){if(y=s[0].scrollTop,!p){var f;if(s.removeClass("ptr-transitioning"),E=s[0].scrollHeight,C=s[0].offsetHeight,a.bottom&&(k=E-C),y>E)return void(u=!1);var T=Ot(e.target).closest(".ptr-watch-scroll");if(T.length&&T.each((function(e){e!==r&&e.scrollHeight>e.offsetHeight&&"auto"===Ot(e).css("overflow")&&(!a.bottom&&e.scrollTop>0||a.bottom&&e.scrollTop<e.scrollHeight-e.offsetHeight)&&(f=!0)})),f)return void(u=!1);x&&(_=s.attr("data-ptr-distance")).indexOf("%")>=0&&(_=E*parseInt(_,10)/100),O=s.hasClass("ptr-refreshing")?_:0,I=!(E!==C&&"ios"===i.os&&!d),A=!1}p=!0,g=n-P.y,void 0===b&&(a.bottom?y!==k:0!==y)&&(b=!0),(a.bottom?g<0&&y>=k||y>k:g>0&&y<=0||y<0)?("ios"===i.os&&parseInt(i.osVersion.split(".")[0],10)>7&&(a.bottom||0!==y||b||(I=!0),a.bottom&&y===k&&!b&&(I=!0)),I||!a.bottom||d||(s.css("-webkit-overflow-scrolling","auto"),s.scrollTop(k),A=!0),(I||A)&&(e.cancelable&&e.preventDefault(),v=(a.bottom?-1*Math.pow(Math.abs(g),.85):Math.pow(g,.85))+O,d?l.transform("translate3d(0,"+v+"px,0)").find(".ptr-arrow").transform("rotate("+(Math.abs(g)/66*180+100)+"deg)"):a.bottom?s.children().transform("translate3d(0,"+v+"px,0)"):s.transform("translate3d(0,"+v+"px,0)")),(I||A)&&Math.pow(Math.abs(g),.85)>_||!I&&Math.abs(g)>=2*_?(M=!0,s.addClass("ptr-pull-up").removeClass("ptr-pull-down")):(M=!1,s.removeClass("ptr-pull-up").addClass("ptr-pull-down")),w||(s.trigger("ptr:pullstart"),a.emit("local::pullStart ptrPullStart",s[0]),w=!0),s.trigger("ptr:pullmove",{event:e,scrollTop:y,translate:v,touchesDiff:g}),a.emit("local::pullMove ptrPullMove",s[0],{event:e,scrollTop:y,translate:v,touchesDiff:g})):(w=!1,s.removeClass("ptr-pull-up ptr-pull-down"),M=!1)}else u=!1}}function U(e){return"touchend"===e.type&&e.changedTouches&&e.changedTouches.length>0&&c&&e.changedTouches[0].identifier!==c?(u=!1,m=!1,p=!1,void(c=null)):u&&p?(v&&(s.addClass("ptr-transitioning"),v=0),d?l.transform("").find(".ptr-arrow").transform(""):a.bottom?s.children().transform(""):s.transform(""),I||!a.bottom||d||s.css("-webkit-overflow-scrolling",""),M?(s.addClass("ptr-refreshing"),s.trigger("ptr:refresh",a.done),a.emit("local::refresh ptrRefresh",s[0],a.done)):s.removeClass("ptr-pull-down"),u=!1,p=!1,void(w&&(s.trigger("ptr:pullend"),a.emit("local::pullEnd ptrPullEnd",s[0])))):(u=!1,void(p=!1))}z||a.bottom||s.addClass("ptr-no-navbar"),s.attr("data-ptr-distance")?x=!0:d?_=66:h?_=44:f&&(_=38);var q=!0,H=0;function G(){q=!0,S=!1,H=0,v&&(s.addClass("ptr-transitioning"),v=0),d?l.transform("").find(".ptr-arrow").transform(""):a.bottom?s.children().transform(""):s.transform(""),M?(s.addClass("ptr-refreshing"),s.trigger("ptr:refresh",a.done),a.emit("local::refresh ptrRefresh",s[0],a.done)):s.removeClass("ptr-pull-down"),w&&(s.trigger("ptr:pullend"),a.emit("local::pullEnd ptrPullEnd",s[0]))}function W(e){if(q){var t=e.deltaX,n=e.deltaY;if(!(Math.abs(t)>Math.abs(n)||s.hasClass("ptr-refreshing")||Ot(e.target).closest(".sortable-handler, .ptr-ignore, .card-expandable.card-opened").length)){if(clearTimeout(T),y=s[0].scrollTop,!S){var i;if(s.removeClass("ptr-transitioning"),E=s[0].scrollHeight,C=s[0].offsetHeight,a.bottom&&(k=E-C),y>E)return void(q=!1);var o=Ot(e.target).closest(".ptr-watch-scroll");if(o.length&&o.each((function(e){e!==r&&e.scrollHeight>e.offsetHeight&&"auto"===Ot(e).css("overflow")&&(!a.bottom&&e.scrollTop>0||a.bottom&&e.scrollTop<e.scrollHeight-e.offsetHeight)&&(i=!0)})),i)return void(q=!1);x&&(_=s.attr("data-ptr-distance")).indexOf("%")>=0&&(_=E*parseInt(_,10)/100)}p=!0,g=H-=n,void 0===b&&(a.bottom?y!==k:0!==y)&&(b=!0),(a.bottom?g<0&&y>=k||y>k:g>0&&y<=0||y<0)?(e.cancelable&&e.preventDefault(),v=g,Math.abs(v)>_&&(v=_+Math.pow(Math.abs(v)-_,.7),a.bottom&&(v=-v)),d?l.transform("translate3d(0,"+v+"px,0)").find(".ptr-arrow").transform("rotate("+(Math.abs(g)/66*180+100)+"deg)"):a.bottom?s.children().transform("translate3d(0,"+v+"px,0)"):s.transform("translate3d(0,"+v+"px,0)"),Math.abs(v)>_?(M=!0,s.addClass("ptr-pull-up").removeClass("ptr-pull-down")):(M=!1,s.removeClass("ptr-pull-up").addClass("ptr-pull-down")),w||(s.trigger("ptr:pullstart"),a.emit("local::pullStart ptrPullStart",s[0]),w=!0),s.trigger("ptr:pullmove",{event:e,scrollTop:y,translate:v,touchesDiff:g}),a.emit("local::pullMove ptrPullMove",s[0],{event:e,scrollTop:y,translate:v,touchesDiff:g})):(w=!1,s.removeClass("ptr-pull-up ptr-pull-down"),M=!1),T=setTimeout(G,300)}}}return R.length&&s.length?(s[0].f7PullToRefresh=a,a.attachEvents=function(){var e=!!o.passiveListener&&{passive:!0};s.on(t.touchEvents.start,V,e),t.on("touchmove:active",j),t.on("touchend:passive",U),a.mousewheel&&!a.bottom&&s.on("wheel",W)},a.detachEvents=function(){var e=!!o.passiveListener&&{passive:!0};s.off(t.touchEvents.start,V,e),t.off("touchmove:active",j),t.off("touchend:passive",U),a.mousewheel&&!a.bottom&&s.off("wheel",W)},a.useModules(),a.init(),a||Ri(n)):a||Ri(n)}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,Li(t,r);var a=n.prototype;return a.init=function(){this.attachEvents()},a.destroy=function(){var e=this;e.emit("local::beforeDestroy ptrBeforeDestroy",e),e.$el.trigger("ptr:beforedestroy"),delete e.el.f7PullToRefresh,e.detachEvents(),y(e),e=null},n}(q),Bi={name:"pullToRefresh",create:function(){var e=this;e.ptr=M(Dt({defaultSelector:".ptr-content",constructor:Di,app:e,domProp:"f7PullToRefresh"}),{done:function(t){var r=e.ptr.get(t);if(r)return r.done()},refresh:function(t){var r=e.ptr.get(t);if(r)return r.refresh()}})},static:{PullToRefresh:Di},on:{tabMounted:function(e){var t=this,r=Ot(e),n=r.find(".ptr-content");r.is(".ptr-content")&&n.add(r),n.each((function(e){t.ptr.create(e)}))},tabBeforeRemove:function(e){var t=Ot(e),r=this,n=t.find(".ptr-content");t.is(".ptr-content")&&n.add(t),n.each((function(e){r.ptr.destroy(e)}))},pageInit:function(e){var t=this;e.$el.find(".ptr-content").each((function(e){t.ptr.create(e)}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".ptr-content").each((function(e){t.ptr.destroy(e)}))}}},$i={destroy:function(e){var t=Ot(e).closest(".page");t.length&&t[0].f7LazyDestroy&&t[0].f7LazyDestroy()},create:function(e){var t=this,r=l(),n=F(),a=Ot(e).closest(".page").eq(0),i=a.find(".lazy");if(0!==i.length||a.hasClass("lazy")){var o=t.params.lazy.placeholder;!1!==o&&i.each((function(e){Ot(e).attr("data-src")&&!Ot(e).attr("src")&&Ot(e).attr("src",o)}));var s=[],c=!1;if(t.params.lazy.observer&&n.intersectionObserver){var u=a[0].f7LazyObserver;return u||(u=new r.IntersectionObserver((function(e,r){e.forEach((function(e){if(e.isIntersecting){if(t.params.lazy.sequential&&c)return void(s.indexOf(e.target)<0&&s.push(e.target));c=!0,t.lazy.loadImage(e.target,p),r.unobserve(e.target)}}))}),{root:a[0]})),i.each((function(e){e.f7LazyObserverAdded||(e.f7LazyObserverAdded=!0,u.observe(e))})),void(a[0].f7LazyDestroy||(a[0].f7LazyDestroy=function(){u.disconnect(),delete a[0].f7LazyDestroy,delete a[0].f7LazyObserver}))}a[0].f7LazyDestroy||(a[0].f7LazyDestroy=function(){a[0].f7LazyAttached=!1,delete a[0].f7LazyAttached,a.off("lazy",d),a.off("scroll",d,!0),a.find(".tab").off("tab:mounted tab:show",d),t.off("resize",d)}),a[0].f7LazyAttached||(a[0].f7LazyAttached=!0,a.on("lazy",d),a.on("scroll",d,!0),a.find(".tab").on("tab:mounted tab:show",d),t.on("resize",d)),d()}function p(e){s.indexOf(e)>=0&&s.splice(s.indexOf(e),1),c=!1,t.params.lazy.sequential&&s.length>0&&(c=!0,t.lazy.loadImage(s[0],p))}function d(){t.lazy.load(a,(function(e){t.params.lazy.sequential&&c?s.indexOf(e)<0&&s.push(e):(c=!0,t.lazy.loadImage(e,p))}))}},isInViewport:function(e){var t=this,r=e.getBoundingClientRect(),n=t.params.lazy.threshold||0;return r.top>=0-n&&r.left>=0-n&&r.top<=t.height+n&&r.left<=t.width+n},loadImage:function(e,t){var r=this,n=l(),a=Ot(e),i=a.attr("data-background"),o=i||a.attr("data-src");function s(){a.removeClass("lazy").addClass("lazy-loaded"),i?a.css("background-image","url("+o+")"):o&&a.attr("src",o),t&&t(e),a.trigger("lazy:loaded"),r.emit("lazyLoaded",a[0])}if(!o)return a.trigger("lazy:load"),r.emit("lazyLoad",a[0]),void s();var c=new n.Image;c.onload=s,c.onerror=function(){a.removeClass("lazy").addClass("lazy-loaded"),i?a.css("background-image","url("+(r.params.lazy.placeholder||"")+")"):a.attr("src",r.params.lazy.placeholder||""),t&&t(e),a.trigger("lazy:error"),r.emit("lazyError",a[0])},c.src=o,a.removeAttr("data-src").removeAttr("data-background"),a.trigger("lazy:load"),r.emit("lazyLoad",a[0])},load:function(e,t){var r=this,n=Ot(e);n.hasClass("page")||(n=n.parents(".page").eq(0)),0!==n.length&&n.find(".lazy").each((function(e){Ot(e).parents(".tab:not(.tab-active)").length>0||r.lazy.isInViewport(e)&&(t?t(e):r.lazy.loadImage(e))}))}},Fi={name:"lazy",params:{lazy:{placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEXCwsK592mkAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",threshold:0,sequential:!0,observer:!0}},create:function(){B(this,{lazy:$i})},on:{pageInit:function(e){(e.$el.find(".lazy").length>0||e.$el.hasClass("lazy"))&&this.lazy.create(e.$el)},pageAfterIn:function(e){var t=F();this.params.lazy.observer&&t.intersectionObserver||(e.$el.find(".lazy").length>0||e.$el.hasClass("lazy"))&&this.lazy.create(e.$el)},pageBeforeRemove:function(e){(e.$el.find(".lazy").length>0||e.$el.hasClass("lazy"))&&this.lazy.destroy(e.$el)},tabMounted:function(e){var t=Ot(e);(t.find(".lazy").length>0||t.hasClass("lazy"))&&this.lazy.create(t)},tabBeforeRemove:function(e){var t=F();if(!this.params.lazy.observer||!t.intersectionObserver){var r=Ot(e);(r.find(".lazy").length>0||r.hasClass("lazy"))&&this.lazy.destroy(r)}}}};function Ni(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vi(e,t){return(Vi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ji=function(e){var t,r;function n(t,r){var n;void 0===r&&(r={});var a=Ni(n=e.call(this,r,[t])||this),i={};a.useModulesParams(i),a.params=M(i,r);var o=Ot(a.params.el);if(0===o.length)return Ni(n);if(a.$el=o,a.el=o[0],a.$el[0].f7DataTable){var s=a.$el[0].f7DataTable;return a.destroy(),s||Ni(n)}function l(e){if(!e.detail||!e.detail.sentByF7DataTable){var t=Ot(this),r=t[0].checked,n=t.parents("td,th").index();if(t.parents("thead").length>0)0===n&&o.find("tbody tr")[r?"addClass":"removeClass"]("data-table-row-selected"),o.find("tbody tr td:nth-child("+(n+1)+") input").prop("checked",r).trigger("change",{sentByF7DataTable:!0}),t.prop("indeterminate",!1);else{0===n&&t.parents("tr")[r?"addClass":"removeClass"]("data-table-row-selected");var i=o.find("tbody .checkbox-cell:nth-child("+(n+1)+') input[type="checkbox"]:checked').length,s=o.find("tbody tr").length,l=o.find("thead .checkbox-cell:nth-child("+(n+1)+') input[type="checkbox"]');r?i===s&&l.prop("checked",!0).trigger("change",{sentByF7DataTable:!0}):l.prop("checked",!1),l.prop("indeterminate",i>0&&i<s)}a.checkSelectedHeader()}}function c(){var e,t=Ot(this),r=t.hasClass("sortable-cell-active"),n=t.hasClass("sortable-desc")?"desc":"asc";r?(e="desc"===n?"asc":"desc",t.removeClass("sortable-desc sortable-asc").addClass("sortable-"+e)):(o.find("thead .sortable-cell-active").removeClass("sortable-cell-active"),t.addClass("sortable-cell-active"),e=n),t.trigger("datatable:sort",e),a.emit("local::sort dataTableSort",a,e)}return a.$el[0].f7DataTable=a,M(a,{collapsible:o.hasClass("data-table-collapsible"),$headerEl:o.find(".data-table-header"),$headerSelectedEl:o.find(".data-table-header-selected")}),a.attachEvents=function(){a.$el.on("change",'.checkbox-cell input[type="checkbox"]',l),a.$el.find("thead .sortable-cell").on("click",c)},a.detachEvents=function(){a.$el.off("change",'.checkbox-cell input[type="checkbox"]',l),a.$el.find("thead .sortable-cell").off("click",c)},a.useModules(),a.init(),a||Ni(n)}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,Vi(t,r);var a=n.prototype;return a.setCollapsibleLabels=function(){var e=this;e.collapsible&&e.$el.find("tbody td:not(.checkbox-cell)").each((function(t){var r=Ot(t),n=r.index(),a=r.attr("data-collapsible-title");a||""===a||r.attr("data-collapsible-title",e.$el.find("thead th").eq(n).text())}))},a.checkSelectedHeader=function(){var e=this;if(e.$headerEl.length>0&&e.$headerSelectedEl.length>0){var t=e.$el.find("tbody .checkbox-cell input:checked").length;e.$el[t>0?"addClass":"removeClass"]("data-table-has-checked"),e.$headerSelectedEl.find(".data-table-selected-count").text(t)}},a.init=function(){var e=this;e.attachEvents(),e.setCollapsibleLabels(),e.checkSelectedHeader()},a.destroy=function(){var e=this;e.$el.trigger("datatable:beforedestroy"),e.emit("local::beforeDestroy dataTableBeforeDestroy",e),e.attachEvents(),e.$el[0]&&(e.$el[0].f7DataTable=null,delete e.$el[0].f7DataTable),y(e),e=null},n}(q),Ui={name:"dataTable",static:{DataTable:ji},create:function(){this.dataTable=Dt({defaultSelector:".data-table",constructor:ji,app:this,domProp:"f7DataTable"})},on:{tabBeforeRemove:function(e){var t=this;Ot(e).find(".data-table-init").each((function(e){t.dataTable.destroy(e)}))},tabMounted:function(e){var t=this;Ot(e).find(".data-table-init").each((function(e){t.dataTable.create({el:e})}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".data-table-init").each((function(e){t.dataTable.destroy(e)}))},pageInit:function(e){var t=this;e.$el.find(".data-table-init").each((function(e){t.dataTable.create({el:e})}))}},vnode:{"data-table-init":{insert:function(e){var t=e.elm;this.dataTable.create({el:t})},destroy:function(e){var t=e.elm;this.dataTable.destroy(t)}}}};function qi(){return(qi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}for(var Hi={morphOpen:function(e,t){var r=this,n=Ot(e),a=Ot(t);if(0!==a.length){a.transition(0).addClass("fab-morph-target-visible");var i={width:a[0].offsetWidth,height:a[0].offsetHeight,offset:a.offset(),borderRadius:a.css("border-radius"),zIndex:a.css("z-index")},o={width:n[0].offsetWidth,height:n[0].offsetHeight,offset:n.offset(),translateX:k(n[0],"x"),translateY:k(n[0],"y")};n[0].f7FabMorphData={$targetEl:a,target:i,fab:o};var s=o.offset.left+o.width/2-(i.offset.left+i.width/2)-o.translateX,l=o.offset.top+o.height/2-(i.offset.top+i.height/2)-o.translateY,c=i.width/o.width,u=i.height/o.height,p=Math.ceil(parseInt(i.borderRadius,10)/Math.max(c,u));p>0&&(p+=2),n[0].f7FabMorphResizeHandler=function(){n.transition(0).transform(""),a.transition(0),i.width=a[0].offsetWidth,i.height=a[0].offsetHeight,i.offset=a.offset(),o.offset=n.offset();var e=o.offset.left+o.width/2-(i.offset.left+i.width/2)-o.translateX,t=o.offset.top+o.height/2-(i.offset.top+i.height/2)-o.translateY,r=i.width/o.width,s=i.height/o.height;n.transform("translate3d("+-e+"px, "+-t+"px, 0) scale("+r+", "+s+")")},a.css("opacity",0).transform("scale("+1/c+", "+1/u+")"),n.addClass("fab-opened").css("z-index",i.zIndex-1).transform("translate3d("+-s+"px, "+-l+"px, 0)"),n.transitionEnd((function(){a.transition(""),w((function(){a.css("opacity",1).transform("scale(1,1)"),n.transform("translate3d("+-s+"px, "+-l+"px, 0) scale("+c+", "+u+")").css("border-radius",p+"px").css("box-shadow","none").css("opacity","0")})),r.on("resize",n[0].f7FabMorphResizeHandler),a.parents(".page-content").length>0&&a.parents(".page-content").on("scroll",n[0].f7FabMorphResizeHandler)}))}},morphClose:function(e){var t=Ot(e),r=t[0].f7FabMorphData;if(r){var n=r.$targetEl,a=r.target,i=r.fab;if(0!==n.length){var o=i.offset.left+i.width/2-(a.offset.left+a.width/2)-i.translateX,s=i.offset.top+i.height/2-(a.offset.top+a.height/2)-i.translateY,l=a.width/i.width,c=a.height/i.height;this.off("resize",t[0].f7FabMorphResizeHandler),n.parents(".page-content").length>0&&n.parents(".page-content").off("scroll",t[0].f7FabMorphResizeHandler),n.css("opacity",0).transform("scale("+1/l+", "+1/c+")"),t.transition("").css("box-shadow","").css("border-radius","").css("opacity","1").transform("translate3d("+-o+"px, "+-s+"px, 0)"),t.transitionEnd((function(){t.css("z-index","").removeClass("fab-opened").transform(""),w((function(){t.transitionEnd((function(){n.removeClass("fab-morph-target-visible").css("opacity","").transform("").transition("")}))}))}))}}},open:function(e,t){var r=this,n=Ot(e).eq(0),a=n.find(".fab-buttons");if(n.length&&!n.hasClass("fab-opened")&&(a.length||n.hasClass("fab-morph"))){if(r.fab.openedEl){if(r.fab.openedEl===n[0])return;r.fab.close(r.fab.openedEl)}r.fab.openedEl=n[0],n.hasClass("fab-morph")?r.fab.morphOpen(n,t||n.attr("data-morph-to")):n.addClass("fab-opened"),n.siblings(".fab-backdrop").addClass("backdrop-in"),n.trigger("fab:open")}},close:function(e){void 0===e&&(e=".fab-opened");var t=Ot(e).eq(0),r=t.find(".fab-buttons");t.length&&t.hasClass("fab-opened")&&(r.length||t.hasClass("fab-morph"))&&(this.fab.openedEl=null,t.hasClass("fab-morph")?this.fab.morphClose(t):t.removeClass("fab-opened"),t.siblings(".fab-backdrop").removeClass("backdrop-in"),t.trigger("fab:close"))},toggle:function(e){Ot(e).hasClass("fab-opened")?this.fab.close(e):this.fab.open(e)}},Gi={name:"fab",create:function(){B(this,{fab:qi({openedEl:null},Hi)})},clicks:{".fab > a":function(e){this.fab.toggle(e.parents(".fab"))},".fab-open":function(e,t){void 0===t&&(t={});this.fab.open(t.fab)},".fab-close":function(e,t){void 0===t&&(t={});this.fab.close(t.fab)},".fab-backdrop":function(){this.fab.close()}}},Wi=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"OE",letters:"Œ"},{base:"oe",letters:"œ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],Xi={},Zi=0;Zi<Wi.length;Zi+=1)for(var Yi=Wi[Zi].letters,Ki=0;Ki<Yi.length;Ki+=1)Xi[Yi[Ki]]=Wi[Zi].base;var Qi=function(e){return e.replace(/[^\u0000-\u007E]/g,(function(e){return Xi[e]||e}))};function Ji(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eo(e,t){return(eo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var to=function(e){var t,r;function n(t,r){var n;void 0===r&&(r={});var a=Ji(n=e.call(this,r,[t])||this),i={el:void 0,inputEl:void 0,inputEvents:"change input compositionend",disableButton:!0,disableButtonEl:void 0,backdropEl:void 0,searchContainer:void 0,searchItem:"li",searchIn:void 0,searchGroup:".list-group",searchGroupTitle:".item-divider, .list-group-title",ignore:".searchbar-ignore",foundEl:".searchbar-found",notFoundEl:".searchbar-not-found",hideOnEnableEl:".searchbar-hide-on-enable",hideOnSearchEl:".searchbar-hide-on-search",backdrop:void 0,removeDiacritics:!0,customSearch:!1,hideDividers:!0,hideGroups:!0,disableOnBackdropClick:!0,expandable:!1,inline:!1};a.useModulesParams(i),a.params=M(i,r);var o,s=Ot(a.params.el);if(0===s.length)return a||Ji(n);if(s[0].f7Searchbar)return s[0].f7Searchbar||Ji(n);s[0].f7Searchbar=a;var l,c,u,p,d=s.parents(".navbar");if(s.parents(".page").length>0)o=s.parents(".page");else if(d.length>0&&!(o=Ot(t.navbar.getPageByEl(d[0]))).length){var h=s.parents(".view").find(".page-current");h[0]&&h[0].f7Page&&h[0].f7Page.navbarEl===d[0]&&(o=h)}r.foundEl?l=Ot(r.foundEl):"string"==typeof a.params.foundEl&&o&&(l=o.find(a.params.foundEl)),r.notFoundEl?c=Ot(r.notFoundEl):"string"==typeof a.params.notFoundEl&&o&&(c=o.find(a.params.notFoundEl)),r.hideOnEnableEl?u=Ot(r.hideOnEnableEl):"string"==typeof a.params.hideOnEnableEl&&o&&(u=o.find(a.params.hideOnEnableEl)),r.hideOnSearchEl?p=Ot(r.hideOnSearchEl):"string"==typeof a.params.hideOnSearchEl&&o&&(p=o.find(a.params.hideOnSearchEl));var f,m,g,v,y=a.params.expandable||s.hasClass("searchbar-expandable"),b=a.params.inline||s.hasClass("searchbar-inline");function _(e){e.preventDefault()}function x(e){a.enable(e),a.$el.addClass("searchbar-focused")}function w(){a.$el.removeClass("searchbar-focused"),"aurora"!==t.theme||v&&v.length&&a.params.disableButton||a.query||a.disable()}function E(){var e=a.$inputEl.val().trim();(a.$searchContainer&&a.$searchContainer.length>0&&(a.params.searchIn||a.isVirtualList||a.params.searchIn===a.params.searchItem)||a.params.customSearch)&&a.search(e,!0)}function C(e,t){a.$el.trigger("searchbar:clear",t),a.emit("local::clear searchbarClear",a,t)}function k(e){a.disable(e)}function T(){!a||a&&!a.$el||a.enabled&&(a.$el.removeClass("searchbar-enabled"),a.expandable&&a.$el.parents(".navbar").removeClass("with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition"))}function S(){!a||a&&!a.$el||a.enabled&&(a.$el.addClass("searchbar-enabled"),a.expandable&&a.$el.parents(".navbar").addClass("with-searchbar-expandable-enabled-no-transition"))}return void 0===a.params.backdrop&&(a.params.backdrop=!b&&"aurora"!==t.theme),a.params.backdrop&&0===(f=a.params.backdropEl?Ot(a.params.backdropEl):o&&o.length>0?o.find(".searchbar-backdrop"):s.siblings(".searchbar-backdrop")).length&&(f=Ot('<div class="searchbar-backdrop"></div>'),o&&o.length?s.parents(o).length>0&&d&&0===s.parents(d).length?f.insertBefore(s):f.insertBefore(o.find(".page-content").eq(0)):f.insertBefore(s)),a.params.searchContainer&&(m=Ot(a.params.searchContainer)),g=a.params.inputEl?Ot(a.params.inputEl):s.find('input[type="search"]').eq(0),a.params.disableButton&&(v=a.params.disableButtonEl?Ot(a.params.disableButtonEl):s.find(".searchbar-disable-button")),M(a,{app:t,view:t.views.get(s.parents(".view")),$el:s,el:s[0],$backdropEl:f,backdropEl:f&&f[0],$searchContainer:m,searchContainer:m&&m[0],$inputEl:g,inputEl:g[0],$disableButtonEl:v,disableButtonEl:v&&v[0],disableButtonHasMargin:!1,$pageEl:o,pageEl:o&&o[0],$navbarEl:d,navbarEl:d&&d[0],$foundEl:l,foundEl:l&&l[0],$notFoundEl:c,notFoundEl:c&&c[0],$hideOnEnableEl:u,hideOnEnableEl:u&&u[0],$hideOnSearchEl:p,hideOnSearchEl:p&&p[0],previousQuery:"",query:"",isVirtualList:m&&m.hasClass("virtual-list"),virtualList:void 0,enabled:!1,expandable:y,inline:b}),a.attachEvents=function(){s.on("submit",_),a.params.disableButton&&a.$disableButtonEl.on("click",k),a.params.disableOnBackdropClick&&a.$backdropEl&&a.$backdropEl.on("click",k),a.expandable&&"ios"===t.theme&&a.view&&d.length&&a.$pageEl&&(a.$pageEl.on("page:beforeout",T),a.$pageEl.on("page:beforein",S)),a.$inputEl.on("focus",x),a.$inputEl.on("blur",w),a.$inputEl.on(a.params.inputEvents,E),a.$inputEl.on("input:clear",C)},a.detachEvents=function(){s.off("submit",_),a.params.disableButton&&a.$disableButtonEl.off("click",k),a.params.disableOnBackdropClick&&a.$backdropEl&&a.$backdropEl.off("click",k),a.expandable&&"ios"===t.theme&&a.view&&d.length&&a.$pageEl&&(a.$pageEl.off("page:beforeout",T),a.$pageEl.off("page:beforein",S)),a.$inputEl.off("focus",x),a.$inputEl.off("blur",w),a.$inputEl.off(a.params.inputEvents,E),a.$inputEl.off("input:clear",C)},a.useModules(),a.init(),a||Ji(n)}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,eo(t,r);var a=n.prototype;return a.clear=function(e){var t=this;if(!t.query&&e&&Ot(e.target).hasClass("searchbar-clear"))return t.disable(),t;var r=t.value;return t.$inputEl.val("").trigger("change").focus(),t.$el.trigger("searchbar:clear",r),t.emit("local::clear searchbarClear",t,r),t},a.setDisableButtonMargin=function(){var e=this;if(!e.expandable){var t=e.app;e.$disableButtonEl.transition(0).show(),e.$disableButtonEl.css("margin-"+(t.rtl?"left":"right"),-e.disableButtonEl.offsetWidth+"px"),e._clientLeft=e.$disableButtonEl[0].clientLeft,e.$disableButtonEl.transition(""),e.disableButtonHasMargin=!0}},a.enable=function(e){var t=this;if(t.enabled)return t;var r=t.app,n=o(),a=N();function i(){if(t.$backdropEl&&(t.$searchContainer&&t.$searchContainer.length||t.params.customSearch)&&!t.$el.hasClass("searchbar-enabled")&&!t.query&&t.backdropShow(),t.$el.addClass("searchbar-enabled"),(!t.$disableButtonEl||t.$disableButtonEl&&0===t.$disableButtonEl.length)&&t.$el.addClass("searchbar-enabled-no-disable-button"),!t.expandable&&t.$disableButtonEl&&t.$disableButtonEl.length>0&&"md"!==r.theme&&(t.disableButtonHasMargin||t.setDisableButtonMargin(),t.$disableButtonEl.css("margin-"+(r.rtl?"left":"right"),"0px")),t.expandable){var e=t.$el.parents(".navbar");if(e.hasClass("navbar-large")&&t.$pageEl){var n=t.$pageEl.find(".page-content"),a=e.find(".title-large");n.addClass("with-searchbar-expandable-enabled"),e.hasClass("navbar-large")&&e.hasClass("navbar-large-collapsed")&&a.length&&n.length&&(n.transition(0),n[0].scrollTop-=a[0].offsetHeight,setTimeout((function(){n.transition("")}),200))}"md"===r.theme&&e.length?e.addClass("with-searchbar-expandable-enabled"):(e.addClass("with-searchbar-expandable-enabled"),e.hasClass("navbar-large")&&e.addClass("navbar-large-collapsed"))}t.$hideOnEnableEl&&t.$hideOnEnableEl.addClass("hidden-by-searchbar"),t.$el.trigger("searchbar:enable"),t.emit("local::enable searchbarEnable",t)}t.enabled=!0;var s=!1;return!0===e&&n.activeElement!==t.inputEl&&(s=!0),a.ios&&"ios"===r.theme?t.expandable?(s&&t.$inputEl.focus(),i()):(s&&t.$inputEl.focus(),!e||"focus"!==e.type&&!0!==e?i():x((function(){i()}),400)):(s&&t.$inputEl.focus(),"md"===r.theme&&t.expandable&&t.$el.parents(".page, .view, .navbar-inner, .navbar").scrollLeft(r.rtl?100:0),i()),t},a.disable=function(){var e=this;if(!e.enabled)return e;var t=e.app;if(e.$inputEl.val("").trigger("change"),e.$el.removeClass("searchbar-enabled searchbar-focused searchbar-enabled-no-disable-button"),e.expandable){var r=e.$el.parents(".navbar"),n=e.$pageEl&&e.$pageEl.find(".page-content");if(r.hasClass("navbar-large")&&n.length){var a=r.find(".title-large");if(e.$el.transitionEnd((function(){n.removeClass("with-searchbar-expandable-closing")})),r.hasClass("navbar-large")&&r.hasClass("navbar-large-collapsed")&&a.length){var i=n[0].scrollTop,o=a[0].offsetHeight;i>o&&(n.transition(0),n[0].scrollTop=i+o,setTimeout((function(){n.transition("")}),200))}n.removeClass("with-searchbar-expandable-enabled").addClass("with-searchbar-expandable-closing")}"md"===t.theme&&r.length?(r.removeClass("with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition").addClass("with-searchbar-expandable-closing"),e.$el.transitionEnd((function(){r.removeClass("with-searchbar-expandable-closing")}))):(r.removeClass("with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition").addClass("with-searchbar-expandable-closing"),e.$el.transitionEnd((function(){r.removeClass("with-searchbar-expandable-closing")})),e.$pageEl&&e.$pageEl.find(".page-content").trigger("scroll"))}return!e.expandable&&e.$disableButtonEl&&e.$disableButtonEl.length>0&&"md"!==t.theme&&e.$disableButtonEl.css("margin-"+(t.rtl?"left":"right"),-e.disableButtonEl.offsetWidth+"px"),e.$backdropEl&&(e.$searchContainer&&e.$searchContainer.length||e.params.customSearch)&&e.backdropHide(),e.enabled=!1,e.$inputEl.blur(),e.$hideOnEnableEl&&e.$hideOnEnableEl.removeClass("hidden-by-searchbar"),e.$el.trigger("searchbar:disable"),e.emit("local::disable searchbarDisable",e),e},a.toggle=function(){var e=this;return e.enabled?e.disable():e.enable(!0),e},a.backdropShow=function(){var e=this;return e.$backdropEl&&e.$backdropEl.addClass("searchbar-backdrop-in"),e},a.backdropHide=function(){var e=this;return e.$backdropEl&&e.$backdropEl.removeClass("searchbar-backdrop-in"),e},a.search=function(e,t){var r=this;if(r.previousQuery=r.query||"",e===r.previousQuery)return r;t||(r.enabled||r.enable(),r.$inputEl.val(e),r.$inputEl.trigger("input")),r.query=e,r.value=e;var n=r.$searchContainer,a=r.$el,i=r.$foundEl,o=r.$notFoundEl,s=r.$hideOnSearchEl,l=r.isVirtualList;if(e.length>0&&s?s.addClass("hidden-by-searchbar"):s&&s.removeClass("hidden-by-searchbar"),(n&&n.length&&a.hasClass("searchbar-enabled")||r.params.customSearch&&a.hasClass("searchbar-enabled"))&&(0===e.length?r.backdropShow():r.backdropHide()),r.params.customSearch)return a.trigger("searchbar:search",{query:e,previousQuery:r.previousQuery}),r.emit("local::search searchbarSearch",r,e,r.previousQuery),r;var c,u=[];if(l){if(r.virtualList=n[0].f7VirtualList,""===e.trim())return r.virtualList.resetFilter(),o&&o.hide(),i&&i.show(),a.trigger("searchbar:search",{query:e,previousQuery:r.previousQuery}),r.emit("local::search searchbarSearch",r,e,r.previousQuery),r;if(c=r.params.removeDiacritics?Qi(e):e,r.virtualList.params.searchAll)u=r.virtualList.params.searchAll(c,r.virtualList.items)||[];else if(r.virtualList.params.searchByItem)for(var p=0;p<r.virtualList.items.length;p+=1)r.virtualList.params.searchByItem(c,r.virtualList.params.items[p],p)&&u.push(p)}else{var d;d=r.params.removeDiacritics?Qi(e.trim().toLowerCase()).split(" "):e.trim().toLowerCase().split(" "),n.find(r.params.searchItem).removeClass("hidden-by-searchbar").each((function(e){var t=Ot(e),n=[],a=r.params.searchIn?t.find(r.params.searchIn):t;r.params.searchIn===r.params.searchItem&&(a=t),a.each((function(e){var t=Ot(e).text().trim().toLowerCase();r.params.removeDiacritics&&(t=Qi(t)),n.push(t)})),n=n.join(" ");for(var i=0,o=0;o<d.length;o+=1)n.indexOf(d[o])>=0&&(i+=1);i===d.length||r.params.ignore&&t.is(r.params.ignore)?u.push(t[0]):t.addClass("hidden-by-searchbar")})),r.params.hideDividers&&n.find(r.params.searchGroupTitle).each((function(e){for(var t=Ot(e),n=t.nextAll(r.params.searchItem),a=!0,i=0;i<n.length;i+=1){var o=n.eq(i);if(o.is(r.params.searchGroupTitle))break;o.hasClass("hidden-by-searchbar")||(a=!1)}var s=r.params.ignore&&t.is(r.params.ignore);a&&!s?t.addClass("hidden-by-searchbar"):t.removeClass("hidden-by-searchbar")})),r.params.hideGroups&&n.find(r.params.searchGroup).each((function(e){var t=Ot(e),n=r.params.ignore&&t.is(r.params.ignore);0!==t.find(r.params.searchItem).filter((function(e){return!Ot(e).hasClass("hidden-by-searchbar")})).length||n?t.removeClass("hidden-by-searchbar"):t.addClass("hidden-by-searchbar")}))}return 0===u.length?(o&&o.show(),i&&i.hide()):(o&&o.hide(),i&&i.show()),l&&r.virtualList&&r.virtualList.filterItems(u),a.trigger("searchbar:search",{query:e,previousQuery:r.previousQuery,foundItems:u}),r.emit("local::search searchbarSearch",r,e,r.previousQuery,u),r},a.init=function(){var e=this;e.expandable&&e.$el&&e.$el.addClass("searchbar-expandable"),e.inline&&e.$el&&e.$el.addClass("searchbar-inline"),e.attachEvents()},a.destroy=function(){var e=this;e.emit("local::beforeDestroy searchbarBeforeDestroy",e),e.$el.trigger("searchbar:beforedestroy"),e.detachEvents(),e.$el[0]&&(e.$el[0].f7Searchbar=null,delete e.$el[0].f7Searchbar),y(e)},n}(q),ro={name:"searchbar",static:{Searchbar:to},create:function(){this.searchbar=Dt({defaultSelector:".searchbar",constructor:to,app:this,domProp:"f7Searchbar",addMethods:"clear enable disable toggle search".split(" ")})},on:{tabMounted:function(e){var t=this;Ot(e).find(".searchbar-init").each((function(e){var r=Ot(e);t.searchbar.create(M(r.dataset(),{el:e}))}))},tabBeforeRemove:function(e){Ot(e).find(".searchbar-init").each((function(e){e.f7Searchbar&&e.f7Searchbar.destroy&&e.f7Searchbar.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".searchbar-init").each((function(e){var r=Ot(e);t.searchbar.create(M(r.dataset(),{el:e}))})),"ios"===t.theme&&e.view&&e.view.router.dynamicNavbar&&e.$navbarEl&&e.$navbarEl.length>0&&e.$navbarEl.find(".searchbar-init").each((function(e){var r=Ot(e);t.searchbar.create(M(r.dataset(),{el:e}))}))},pageBeforeRemove:function(e){e.$el.find(".searchbar-init").each((function(e){e.f7Searchbar&&e.f7Searchbar.destroy&&e.f7Searchbar.destroy()})),"ios"===this.theme&&e.view&&e.view.router.dynamicNavbar&&e.$navbarEl&&e.$navbarEl.length>0&&e.$navbarEl.find(".searchbar-init").each((function(e){e.f7Searchbar&&e.f7Searchbar.destroy&&e.f7Searchbar.destroy()}))}},clicks:{".searchbar-clear":function(e,t){void 0===t&&(t={});var r=this.searchbar.get(t.searchbar);r&&r.clear()},".searchbar-enable":function(e,t){void 0===t&&(t={});var r=this.searchbar.get(t.searchbar);r&&r.enable(!0)},".searchbar-disable":function(e,t){void 0===t&&(t={});var r=this.searchbar.get(t.searchbar);r&&r.disable()},".searchbar-toggle":function(e,t){void 0===t&&(t={});var r=this.searchbar.get(t.searchbar);r&&r.toggle()}},vnode:{"searchbar-init":{insert:function(e){var t=e.elm,r=Ot(t);this.searchbar.create(M(r.dataset(),{el:t}))},destroy:function(e){var t=e.elm;t.f7Searchbar&&t.f7Searchbar.destroy&&t.f7Searchbar.destroy()}}}};function no(){return(no=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ao(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function io(e,t){return(io=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var oo=function(e){var t,r;function n(t,r){var n;void 0===r&&(r={});var a=ao(n=e.call(this,r,[t])||this),i={autoLayout:!0,messages:[],newMessagesFirst:!1,scrollMessages:!0,scrollMessagesOnEdge:!0,firstMessageRule:void 0,lastMessageRule:void 0,tailMessageRule:void 0,sameNameMessageRule:void 0,sameHeaderMessageRule:void 0,sameFooterMessageRule:void 0,sameAvatarMessageRule:void 0,customClassMessageRule:void 0,renderMessage:void 0};a.useModulesParams(i),a.params=M(i,r);var o=Ot(r.el).eq(0);if(0===o.length)return a||ao(n);if(o[0].f7Messages)return o[0].f7Messages||ao(n);o[0].f7Messages=a;var s=o.closest(".page-content").eq(0);return M(a,{messages:a.params.messages,$el:o,el:o[0],$pageContentEl:s,pageContentEl:s[0]}),a.useModules(),a.init(),a||ao(n)}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,io(t,r);var a=n.prototype;return a.getMessageData=function(e){var t=Ot(e),r={name:t.find(".message-name").html(),header:t.find(".message-header").html(),textHeader:t.find(".message-text-header").html(),textFooter:t.find(".message-text-footer").html(),footer:t.find(".message-footer").html(),isTitle:t.hasClass("messages-title"),type:t.hasClass("message-sent")?"sent":"received",text:t.find(".message-text").html(),image:t.find(".message-image").html(),imageSrc:t.find(".message-image img").attr("src"),typing:t.hasClass("message-typing")};r.isTitle&&(r.text=t.html()),r.text&&r.textHeader&&(r.text=r.text.replace('<div class="message-text-header">'+r.textHeader+"</div>","")),r.text&&r.textFooter&&(r.text=r.text.replace('<div class="message-text-footer">'+r.textFooter+"</div>",""));var n=t.find(".message-avatar").css("background-image");return"none"!==n&&""!==n||(n=void 0),n=n&&"string"==typeof n?n.replace("url(","").replace(")","").replace(/"/g,"").replace(/'/g,""):void 0,r.avatar=n,r},a.getMessagesData=function(){var e=this,t=[];return e.$el.find(".message, .messages-title").each((function(r){t.push(e.getMessageData(r))})),t},a.renderMessage=function(e){var t=this,r=M({type:"sent",attrs:{}},e);return t.params.renderMessage?t.params.renderMessage.call(t,r):r.isTitle?'<div class="messages-title">'+r.text+"</div>":jn("div",no({class:"message message-"+r.type+" "+(r.isTyping?"message-typing":"")+" "+(r.cssClass||"")},r.attrs),r.avatar&&jn("div",{class:"message-avatar",style:"background-image:url("+r.avatar+")"}),jn("div",{class:"message-content"},r.name&&jn("div",{class:"message-name"},r.name),r.header&&jn("div",{class:"message-header"},r.header),jn("div",{class:"message-bubble"},r.textHeader&&jn("div",{class:"message-text-header"},r.textHeader),r.image&&jn("div",{class:"message-image"},r.image),r.imageSrc&&!r.image&&jn("div",{class:"message-image"},jn("img",{src:r.imageSrc})),(r.text||r.isTyping)&&jn("div",{class:"message-text"},r.text||"",r.isTyping&&jn("div",{class:"message-typing-indicator"},jn("div",null),jn("div",null),jn("div",null))),r.textFooter&&jn("div",{class:"message-text-footer"},r.textFooter)),r.footer&&jn("div",{class:"message-footer"},r.footer)))},a.renderMessages=function(e,t){void 0===e&&(e=this.messages),void 0===t&&(t=this.params.newMessagesFirst?"prepend":"append");var r=this,n=e.map((function(e){return r.renderMessage(e)})).join("");r.$el[t](n)},a.isFirstMessage=function(){var e,t=this;return!!t.params.firstMessageRule&&(e=t.params).firstMessageRule.apply(e,arguments)},a.isLastMessage=function(){var e,t=this;return!!t.params.lastMessageRule&&(e=t.params).lastMessageRule.apply(e,arguments)},a.isTailMessage=function(){var e,t=this;return!!t.params.tailMessageRule&&(e=t.params).tailMessageRule.apply(e,arguments)},a.isSameNameMessage=function(){var e,t=this;return!!t.params.sameNameMessageRule&&(e=t.params).sameNameMessageRule.apply(e,arguments)},a.isSameHeaderMessage=function(){var e,t=this;return!!t.params.sameHeaderMessageRule&&(e=t.params).sameHeaderMessageRule.apply(e,arguments)},a.isSameFooterMessage=function(){var e,t=this;return!!t.params.sameFooterMessageRule&&(e=t.params).sameFooterMessageRule.apply(e,arguments)},a.isSameAvatarMessage=function(){var e,t=this;return!!t.params.sameAvatarMessageRule&&(e=t.params).sameAvatarMessageRule.apply(e,arguments)},a.isCustomClassMessage=function(){var e,t=this;if(t.params.customClassMessageRule)return(e=t.params).customClassMessageRule.apply(e,arguments)},a.layout=function(){var e=this;e.$el.find(".message, .messages-title").each((function(t,r){var n=Ot(t);e.messages||(e.messages=e.getMessagesData());var a=[],i=e.messages[r],o=e.messages[r-1],s=e.messages[r+1];e.isFirstMessage(i,o,s)&&a.push("message-first"),e.isLastMessage(i,o,s)&&a.push("message-last"),e.isTailMessage(i,o,s)&&a.push("message-tail"),e.isSameNameMessage(i,o,s)&&a.push("message-same-name"),e.isSameHeaderMessage(i,o,s)&&a.push("message-same-header"),e.isSameFooterMessage(i,o,s)&&a.push("message-same-footer"),e.isSameAvatarMessage(i,o,s)&&a.push("message-same-avatar");var l=e.isCustomClassMessage(i,o,s);l&&l.length&&("string"==typeof l&&(l=l.split(" ")),l.forEach((function(e){a.push(e)}))),n.removeClass("message-first message-last message-tail message-same-name message-same-header message-same-footer message-same-avatar"),a.forEach((function(e){n.addClass(e)}))}))},a.clear=function(){this.messages=[],this.$el.html("")},a.removeMessage=function(e,t){void 0===t&&(t=!0);var r,n,a=this;return"number"==typeof e?(r=e,n=a.$el.find(".message, .messages-title").eq(r)):a.messages&&a.messages.indexOf(e)>=0?(r=a.messages.indexOf(e),n=a.$el.children().eq(r)):r=(n=Ot(e)).index(),0===n.length||(n.remove(),a.messages.splice(r,1),a.params.autoLayout&&t&&a.layout()),a},a.removeMessages=function(e,t){void 0===t&&(t=!0);var r=this;if(Array.isArray(e)){var n=[];e.forEach((function(e){n.push(r.$el.find(".message, .messages-title").eq(e))})),n.forEach((function(e){r.removeMessage(e,!1)}))}else Ot(e).each((function(e){r.removeMessage(e,!1)}));return r.params.autoLayout&&t&&r.layout(),r},a.addMessage=function(){for(var e,t,r,n=this,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return"boolean"==typeof i[1]?(e=i[0],t=i[1],r=i[2]):(e=i[0],r=i[1],t=i[2]),void 0===t&&(t=!0),void 0===r&&(r=n.params.newMessagesFirst?"prepend":"append"),n.addMessages([e],t,r)},a.addMessages=function(){for(var e,t,r,n=this,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];"boolean"==typeof i[1]?(e=i[0],t=i[1],r=i[2]):(e=i[0],r=i[1],t=i[2]),void 0===t&&(t=!0),void 0===r&&(r=n.params.newMessagesFirst?"prepend":"append");var s=n.pageContentEl.scrollHeight,l=n.pageContentEl.offsetHeight,c=n.pageContentEl.scrollTop,u="",p=n.messages.filter((function(e){return e.isTyping}))[0];e.forEach((function(e){p?"append"===r?n.messages.splice(n.messages.indexOf(p),0,e):n.messages.splice(n.messages.indexOf(p)+1,0,e):n.messages["append"===r?"push":"unshift"](e),u+=n.renderMessage(e)}));var d=Ot(u);if(t&&("append"!==r||n.params.newMessagesFirst||d.addClass("message-appear-from-bottom"),"prepend"===r&&n.params.newMessagesFirst&&d.addClass("message-appear-from-top")),p?"append"===r?d.insertBefore(n.$el.find(".message-typing")):d.insertAfter(n.$el.find(".message-typing")):n.$el[r](d),n.params.autoLayout&&n.layout(),"prepend"!==r||p||(n.pageContentEl.scrollTop=c+(n.pageContentEl.scrollHeight-s)),n.params.scrollMessages&&("append"===r&&!n.params.newMessagesFirst||"prepend"===r&&n.params.newMessagesFirst&&!p))if(n.params.scrollMessagesOnEdge){var h=!1;n.params.newMessagesFirst&&0===c&&(h=!0),!n.params.newMessagesFirst&&c-(s-l)>=-10&&(h=!0),h&&n.scroll(t?void 0:0)}else n.scroll(t?void 0:0);return n},a.showTyping=function(e){void 0===e&&(e={});var t=this,r=t.messages.filter((function(e){return e.isTyping}))[0];return r&&t.removeMessage(t.messages.indexOf(r)),t.addMessage(M({type:"received",isTyping:!0},e)),t},a.hideTyping=function(){var e,t,r=this;if(r.messages.forEach((function(t,r){t.isTyping&&(e=r)})),void 0!==e&&r.$el.find(".message").eq(e).hasClass("message-typing")&&(t=!0,r.removeMessage(e)),!t){var n=r.$el.find(".message-typing");n.length&&r.removeMessage(n)}return r},a.scroll=function(e,t){void 0===e&&(e=300);var r,n=this,a=n.pageContentEl.scrollTop;if(void 0!==t)r=t;else if((r=n.params.newMessagesFirst?0:n.pageContentEl.scrollHeight-n.pageContentEl.offsetHeight)===a)return n;return n.$pageContentEl.scrollTop(r,e),n},a.init=function(){var e=this;e.messages&&0!==e.messages.length||(e.messages=e.getMessagesData()),e.params.messages&&e.params.messages.length&&e.renderMessages(),e.params.autoLayout&&e.layout(),e.params.scrollMessages&&e.scroll(0)},a.destroy=function(){var e=this;e.emit("local::beforeDestroy messagesBeforeDestroy",e),e.$el.trigger("messages:beforedestroy"),e.$el[0]&&(e.$el[0].f7Messages=null,delete e.$el[0].f7Messages),y(e)},n}(q),so={name:"messages",static:{Messages:oo},create:function(){this.messages=Dt({defaultSelector:".messages",constructor:oo,app:this,domProp:"f7Messages",addMethods:"renderMessages layout scroll clear removeMessage removeMessages addMessage addMessages".split(" ")})},on:{tabBeforeRemove:function(e){var t=this;Ot(e).find(".messages-init").each((function(e){t.messages.destroy(e)}))},tabMounted:function(e){var t=this;Ot(e).find(".messages-init").each((function(e){t.messages.create({el:e})}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".messages-init").each((function(e){t.messages.destroy(e)}))},pageInit:function(e){var t=this;e.$el.find(".messages-init").each((function(e){t.messages.create({el:e})}))}},vnode:{"messages-init":{insert:function(e){var t=e.elm;this.messages.create({el:t})},destroy:function(e){var t=e.elm;this.messages.destroy(t)}}}};function lo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function co(e,t){return(co=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var uo=function(e){var t,r;function n(t,r){var n;void 0===r&&(r={});var a=lo(n=e.call(this,r,[t])||this),i={top:!1,topOffset:0,bottomOffset:0,attachments:[],renderAttachments:void 0,renderAttachment:void 0,maxHeight:null,resizePage:!0};a.useModulesParams(i),a.params=M(i,r);var o=Ot(a.params.el);if(0===o.length)return a||lo(n);if(o[0].f7Messagebar)return o[0].f7Messagebar||lo(n);o[0].f7Messagebar=a;var s,l=o.parents(".page").eq(0),c=l.find(".page-content").eq(0),u=o.find(".messagebar-area");s=a.params.textareaEl?Ot(a.params.textareaEl):o.find("textarea");var p=o.find(".messagebar-attachments"),d=o.find(".messagebar-sheet");function h(){a.params.resizePage&&a.resizePage()}function f(e){e.preventDefault()}function m(e){var t=Ot(this).index();Ot(e.target).closest(".messagebar-attachment-delete").length?(Ot(this).trigger("messagebar:attachmentdelete",t),a.emit("local::attachmentDelete messagebarAttachmentDelete",a,this,t)):(Ot(this).trigger("messagebar:attachmentclick",t),a.emit("local::attachmentClick messagebarAttachmentClick",a,this,t))}function g(){a.checkEmptyState(),a.$el.trigger("messagebar:change"),a.emit("local::change messagebarChange",a)}function v(){a.sheetHide(),a.$el.addClass("messagebar-focused"),a.$el.trigger("messagebar:focus"),a.emit("local::focus messagebarFocus",a)}function y(){a.$el.removeClass("messagebar-focused"),a.$el.trigger("messagebar:blur"),a.emit("local::blur messagebarBlur",a)}return a.params.top&&o.addClass("messagebar-top"),M(a,{$el:o,el:o[0],$areaEl:u,areaEl:u[0],$textareaEl:s,textareaEl:s[0],$attachmentsEl:p,attachmentsEl:p[0],attachmentsVisible:p.hasClass("messagebar-attachments-visible"),$sheetEl:d,sheetEl:d[0],sheetVisible:d.hasClass("messagebar-sheet-visible"),$pageEl:l,pageEl:l[0],$pageContentEl:c,pageContentEl:c,top:o.hasClass("messagebar-top")||a.params.top,attachments:[]}),a.attachEvents=function(){o.on("textarea:resize",h),o.on("submit",f),o.on("click",".messagebar-attachment",m),s.on("change input",g),s.on("focus",v),s.on("blur",y),t.on("resize",h)},a.detachEvents=function(){o.off("textarea:resize",h),o.off("submit",f),o.off("click",".messagebar-attachment",m),s.off("change input",g),s.off("focus",v),s.off("blur",y),t.off("resize",h)},a.useModules(),a.init(),a||lo(n)}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,co(t,r);var a=n.prototype;return a.focus=function(){return this.$textareaEl.focus(),this},a.blur=function(){return this.$textareaEl.blur(),this},a.clear=function(){return this.$textareaEl.val("").trigger("change"),this},a.getValue=function(){return this.$textareaEl.val().trim()},a.setValue=function(e){return this.$textareaEl.val(e).trigger("change"),this},a.setPlaceholder=function(e){return this.$textareaEl.attr("placeholder",e),this},a.resizePage=function(){var e=this,t=e.params,r=e.$el,n=e.top,a=e.$pageEl,i=e.$pageContentEl,o=e.$areaEl,s=e.$textareaEl,l=e.$sheetEl,c=e.$attachmentsEl,u=r[0].offsetHeight,p=t.maxHeight;if(n);else{var d=parseInt(i.css("padding-bottom"),10),h=u+t.bottomOffset;if(h!==d&&i.length){var f=parseInt(i.css("padding-top"),10),m=i[0].scrollHeight,g=i[0].offsetHeight,v=i[0].scrollTop===m-g;p||(p=a[0].offsetHeight-f-l.outerHeight()-c.outerHeight()-parseInt(o.css("margin-top"),10)-parseInt(o.css("margin-bottom"),10)),s.css("max-height",p+"px"),i.css("padding-bottom",h+"px"),v&&i.scrollTop(i[0].scrollHeight-g),r.trigger("messagebar:resizepage"),e.emit("local::resizePage messagebarResizePage",e)}}},a.checkEmptyState=function(){var e=this.$el,t=this.$textareaEl.val().trim();t&&t.length?e.addClass("messagebar-with-value"):e.removeClass("messagebar-with-value")},a.attachmentsCreate=function(e){void 0===e&&(e="");var t=this,r=Ot('<div class="messagebar-attachments">'+e+"</div>");return r.insertBefore(t.$textareaEl),M(t,{$attachmentsEl:r,attachmentsEl:r[0]}),t},a.attachmentsShow=function(e){void 0===e&&(e="");var t=this;return t.$attachmentsEl=t.$el.find(".messagebar-attachments"),0===t.$attachmentsEl.length&&t.attachmentsCreate(e),t.$el.addClass("messagebar-attachments-visible"),t.attachmentsVisible=!0,t.params.resizePage&&t.resizePage(),t},a.attachmentsHide=function(){var e=this;return e.$el.removeClass("messagebar-attachments-visible"),e.attachmentsVisible=!1,e.params.resizePage&&e.resizePage(),e},a.attachmentsToggle=function(){var e=this;return e.attachmentsVisible?e.attachmentsHide():e.attachmentsShow(),e},a.renderAttachment=function(e){var t=this;return t.params.renderAttachment?t.params.renderAttachment.call(t,e):'\n      <div class="messagebar-attachment">\n        <img src="'+e+'">\n        <span class="messagebar-attachment-delete"></span>\n      </div>\n    '},a.renderAttachments=function(){var e,t=this;e=t.params.renderAttachments?t.params.renderAttachments.call(t,t.attachments):""+t.attachments.map((function(e){return t.renderAttachment(e)})).join(""),0===t.$attachmentsEl.length?t.attachmentsCreate(e):t.$attachmentsEl.html(e)},a.sheetCreate=function(e){void 0===e&&(e="");var t=this,r=Ot('<div class="messagebar-sheet">'+e+"</div>");return t.$el.append(r),M(t,{$sheetEl:r,sheetEl:r[0]}),t},a.sheetShow=function(e){void 0===e&&(e="");var t=this;return t.$sheetEl=t.$el.find(".messagebar-sheet"),0===t.$sheetEl.length&&t.sheetCreate(e),t.$el.addClass("messagebar-sheet-visible"),t.sheetVisible=!0,t.params.resizePage&&t.resizePage(),t},a.sheetHide=function(){var e=this;return e.$el.removeClass("messagebar-sheet-visible"),e.sheetVisible=!1,e.params.resizePage&&e.resizePage(),e},a.sheetToggle=function(){var e=this;return e.sheetVisible?e.sheetHide():e.sheetShow(),e},a.init=function(){var e=this;return e.attachEvents(),e.checkEmptyState(),e},a.destroy=function(){var e=this;e.emit("local::beforeDestroy messagebarBeforeDestroy",e),e.$el.trigger("messagebar:beforedestroy"),e.detachEvents(),e.$el[0]&&(e.$el[0].f7Messagebar=null,delete e.$el[0].f7Messagebar),y(e)},n}(q),po={name:"messagebar",static:{Messagebar:uo},create:function(){this.messagebar=Dt({defaultSelector:".messagebar",constructor:uo,app:this,domProp:"f7Messagebar",addMethods:"clear getValue setValue setPlaceholder resizePage focus blur attachmentsCreate attachmentsShow attachmentsHide attachmentsToggle renderAttachments sheetCreate sheetShow sheetHide sheetToggle".split(" ")})},on:{tabBeforeRemove:function(e){var t=this;Ot(e).find(".messagebar-init").each((function(e){t.messagebar.destroy(e)}))},tabMounted:function(e){var t=this;Ot(e).find(".messagebar-init").each((function(e){t.messagebar.create(M({el:e},Ot(e).dataset()))}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".messagebar-init").each((function(e){t.messagebar.destroy(e)}))},pageInit:function(e){var t=this;e.$el.find(".messagebar-init").each((function(e){t.messagebar.create(M({el:e},Ot(e).dataset()))}))}},vnode:{"messagebar-init":{insert:function(e){var t=e.elm;this.messagebar.create(M({el:t},Ot(t).dataset()))},destroy:function(e){var t=e.elm;this.messagebar.destroy(t)}}}},ho={addClass:ee,removeClass:te,hasClass:ne,toggleClass:re,attr:ae,removeAttr:ie,transform:de,transition:he,on:fe,off:me,trigger:ve,transitionEnd:ye,outerWidth:xe,outerHeight:Ee,styles:Se,offset:Ce,css:Pe,each:Me,html:Ae,text:Oe,is:ze,index:Re,eq:Le,append:De,prepend:$e,next:je,nextAll:Ue,prev:qe,prevAll:He,parent:We,parents:Xe,closest:Ze,find:Ye,children:Ke,filter:Ie,remove:Qe};Object.keys(ho).forEach((function(e){Object.defineProperty(J.fn,e,{value:ho[e],writable:!0})}));var fo,mo,go,vo=J;function yo(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function bo(){return Date.now()}function _o(e,t){void 0===t&&(t="x");var r,n,a,i=l(),o=function(e){var t,r=l();return r.getComputedStyle&&(t=r.getComputedStyle(e,null)),!t&&e.currentStyle&&(t=e.currentStyle),t||(t=e.style),t}(e);return i.WebKitCSSMatrix?((n=o.transform||o.webkitTransform).split(",").length>6&&(n=n.split(", ").map((function(e){return e.replace(",",".")})).join(", ")),a=new i.WebKitCSSMatrix("none"===n?"":n)):r=(a=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===t&&(n=i.WebKitCSSMatrix?a.m41:16===r.length?parseFloat(r[12]):parseFloat(r[4])),"y"===t&&(n=i.WebKitCSSMatrix?a.m42:16===r.length?parseFloat(r[13]):parseFloat(r[5])),n||0}function xo(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function wo(e){return"undefined"!=typeof window&&void 0!==window.HTMLElement?e instanceof HTMLElement:e&&(1===e.nodeType||11===e.nodeType)}function Eo(){for(var e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"],r=1;r<arguments.length;r+=1){var n=r<0||arguments.length<=r?void 0:arguments[r];if(null!=n&&!wo(n))for(var a=Object.keys(Object(n)).filter((function(e){return t.indexOf(e)<0})),i=0,o=a.length;i<o;i+=1){var s=a[i],l=Object.getOwnPropertyDescriptor(n,s);void 0!==l&&l.enumerable&&(xo(e[s])&&xo(n[s])?n[s].__swiper__?e[s]=n[s]:Eo(e[s],n[s]):!xo(e[s])&&xo(n[s])?(e[s]={},n[s].__swiper__?e[s]=n[s]:Eo(e[s],n[s])):e[s]=n[s])}}return e}function Co(e,t){Object.keys(t).forEach((function(r){xo(t[r])&&Object.keys(t[r]).forEach((function(n){"function"==typeof t[r][n]&&(t[r][n]=t[r][n].bind(e))})),e[r]=t[r]}))}function ko(e){return void 0===e&&(e=""),"."+e.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}function To(e,t,r,n){var a=o();return r&&Object.keys(n).forEach((function(r){if(!t[r]&&!0===t.auto){var i=a.createElement("div");i.className=n[r],e.append(i),t[r]=i}})),t}function So(){return fo||(fo=function(){var e=l(),t=o();return{touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),pointerEvents:!!e.PointerEvent&&"maxTouchPoints"in e.navigator&&e.navigator.maxTouchPoints>=0,observer:"MutationObserver"in e||"WebkitMutationObserver"in e,passiveListener:function(){var t=!1;try{var r=Object.defineProperty({},"passive",{get:function(){t=!0}});e.addEventListener("testPassiveListener",null,r)}catch(e){}return t}(),gestures:"ongesturestart"in e}}()),fo}function Po(e){return void 0===e&&(e={}),mo||(mo=function(e){var t=(void 0===e?{}:e).userAgent,r=So(),n=l(),a=n.navigator.platform,i=t||n.navigator.userAgent,o={ios:!1,android:!1},s=n.screen.width,c=n.screen.height,u=i.match(/(Android);?[\s\/]+([\d.]+)?/),p=i.match(/(iPad).*OS\s([\d_]+)/),d=i.match(/(iPod)(.*OS\s([\d_]+))?/),h=!p&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/),f="Win32"===a,m="MacIntel"===a;return!p&&m&&r.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(s+"x"+c)>=0&&((p=i.match(/(Version)\/([\d.]+)/))||(p=[0,1,"13_0_0"]),m=!1),u&&!f&&(o.os="android",o.android=!0),(p||h||d)&&(o.os="ios",o.ios=!0),o}(e)),mo}function Mo(){return go||(go=function(){var e,t=l();return{isEdge:!!t.navigator.userAgent.match(/Edge/g),isSafari:(e=t.navigator.userAgent.toLowerCase(),e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}}()),go}var Io={name:"resize",create:function(){var e=this;Eo(e,{resize:{observer:null,createObserver:function(){e&&!e.destroyed&&e.initialized&&(e.resize.observer=new ResizeObserver((function(t){var r=e.width,n=e.height,a=r,i=n;t.forEach((function(t){var r=t.contentBoxSize,n=t.contentRect,o=t.target;o&&o!==e.el||(a=n?n.width:(r[0]||r).inlineSize,i=n?n.height:(r[0]||r).blockSize)})),a===r&&i===n||e.resize.resizeHandler()})),e.resize.observer.observe(e.el))},removeObserver:function(){e.resize.observer&&e.resize.observer.unobserve&&e.el&&(e.resize.observer.unobserve(e.el),e.resize.observer=null)},resizeHandler:function(){e&&!e.destroyed&&e.initialized&&(e.emit("beforeResize"),e.emit("resize"))},orientationChangeHandler:function(){e&&!e.destroyed&&e.initialized&&e.emit("orientationchange")}}})},on:{init:function(e){var t=l();e.params.resizeObserver&&void 0!==l().ResizeObserver?e.resize.createObserver():(t.addEventListener("resize",e.resize.resizeHandler),t.addEventListener("orientationchange",e.resize.orientationChangeHandler))},destroy:function(e){var t=l();e.resize.removeObserver(),t.removeEventListener("resize",e.resize.resizeHandler),t.removeEventListener("orientationchange",e.resize.orientationChangeHandler)}}};function Ao(){return(Ao=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Oo={attach:function(e,t){void 0===t&&(t={});var r=l(),n=this,a=new(r.MutationObserver||r.WebkitMutationObserver)((function(e){if(1!==e.length){var t=function(){n.emit("observerUpdate",e[0])};r.requestAnimationFrame?r.requestAnimationFrame(t):r.setTimeout(t,0)}else n.emit("observerUpdate",e[0])}));a.observe(e,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData}),n.observer.observers.push(a)},init:function(){var e=this;if(e.support.observer&&e.params.observer){if(e.params.observeParents)for(var t=e.$el.parents(),r=0;r<t.length;r+=1)e.observer.attach(t[r]);e.observer.attach(e.$el[0],{childList:e.params.observeSlideChildren}),e.observer.attach(e.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach((function(e){e.disconnect()})),this.observer.observers=[]}},zo={name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){Co(this,{observer:Ao({},Oo,{observers:[]})})},on:{init:function(e){e.observer.init()},destroy:function(e){e.observer.destroy()}}};function Ro(e){var t=this,r=o(),n=l(),a=t.touchEventsData,i=t.params,s=t.touches;if(t.enabled&&(!t.animating||!i.preventInteractionOnTransition)){var c=e;c.originalEvent&&(c=c.originalEvent);var u=vo(c.target);if(("wrapper"!==i.touchEventsTarget||u.closest(t.wrapperEl).length)&&(a.isTouchEvent="touchstart"===c.type,(a.isTouchEvent||!("which"in c)||3!==c.which)&&!(!a.isTouchEvent&&"button"in c&&c.button>0||a.isTouched&&a.isMoved))){!!i.noSwipingClass&&""!==i.noSwipingClass&&c.target&&c.target.shadowRoot&&e.path&&e.path[0]&&(u=vo(e.path[0]));var p=i.noSwipingSelector?i.noSwipingSelector:"."+i.noSwipingClass,d=!(!c.target||!c.target.shadowRoot);if(i.noSwiping&&(d?function(e,t){return void 0===t&&(t=this),function t(r){return r&&r!==o()&&r!==l()?(r.assignedSlot&&(r=r.assignedSlot),r.closest(e)||t(r.getRootNode().host)):null}(t)}(p,c.target):u.closest(p)[0]))t.allowClick=!0;else if(!i.swipeHandler||u.closest(i.swipeHandler)[0]){s.currentX="touchstart"===c.type?c.targetTouches[0].pageX:c.pageX,s.currentY="touchstart"===c.type?c.targetTouches[0].pageY:c.pageY;var h=s.currentX,f=s.currentY,m=i.edgeSwipeDetection||i.iOSEdgeSwipeDetection,g=i.edgeSwipeThreshold||i.iOSEdgeSwipeThreshold;if(m&&(h<=g||h>=n.innerWidth-g)){if("prevent"!==m)return;e.preventDefault()}if(Eo(a,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),s.startX=h,s.startY=f,a.touchStartTime=bo(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,i.threshold>0&&(a.allowThresholdMove=!1),"touchstart"!==c.type){var v=!0;u.is(a.focusableElements)&&(v=!1),r.activeElement&&vo(r.activeElement).is(a.focusableElements)&&r.activeElement!==u[0]&&r.activeElement.blur();var y=v&&t.allowTouchMove&&i.touchStartPreventDefault;!i.touchStartForcePreventDefault&&!y||u[0].isContentEditable||c.preventDefault()}t.emit("touchStart",c)}}}}function Lo(e){var t=o(),r=this,n=r.touchEventsData,a=r.params,i=r.touches,s=r.rtlTranslate;if(r.enabled){var l=e;if(l.originalEvent&&(l=l.originalEvent),n.isTouched){if(!n.isTouchEvent||"touchmove"===l.type){var c="touchmove"===l.type&&l.targetTouches&&(l.targetTouches[0]||l.changedTouches[0]),u="touchmove"===l.type?c.pageX:l.pageX,p="touchmove"===l.type?c.pageY:l.pageY;if(l.preventedByNestedSwiper)return i.startX=u,void(i.startY=p);if(!r.allowTouchMove)return r.allowClick=!1,void(n.isTouched&&(Eo(i,{startX:u,startY:p,currentX:u,currentY:p}),n.touchStartTime=bo()));if(n.isTouchEvent&&a.touchReleaseOnEdges&&!a.loop)if(r.isVertical()){if(p<i.startY&&r.translate<=r.maxTranslate()||p>i.startY&&r.translate>=r.minTranslate())return n.isTouched=!1,void(n.isMoved=!1)}else if(u<i.startX&&r.translate<=r.maxTranslate()||u>i.startX&&r.translate>=r.minTranslate())return;if(n.isTouchEvent&&t.activeElement&&l.target===t.activeElement&&vo(l.target).is(n.focusableElements))return n.isMoved=!0,void(r.allowClick=!1);if(n.allowTouchCallbacks&&r.emit("touchMove",l),!(l.targetTouches&&l.targetTouches.length>1)){i.currentX=u,i.currentY=p;var d=i.currentX-i.startX,h=i.currentY-i.startY;if(!(r.params.threshold&&Math.sqrt(Math.pow(d,2)+Math.pow(h,2))<r.params.threshold)){var f;if(void 0===n.isScrolling)r.isHorizontal()&&i.currentY===i.startY||r.isVertical()&&i.currentX===i.startX?n.isScrolling=!1:d*d+h*h>=25&&(f=180*Math.atan2(Math.abs(h),Math.abs(d))/Math.PI,n.isScrolling=r.isHorizontal()?f>a.touchAngle:90-f>a.touchAngle);if(n.isScrolling&&r.emit("touchMoveOpposite",l),void 0===n.startMoving&&(i.currentX===i.startX&&i.currentY===i.startY||(n.startMoving=!0)),n.isScrolling)n.isTouched=!1;else if(n.startMoving){r.allowClick=!1,!a.cssMode&&l.cancelable&&l.preventDefault(),a.touchMoveStopPropagation&&!a.nested&&l.stopPropagation(),n.isMoved||(a.loop&&r.loopFix(),n.startTranslate=r.getTranslate(),r.setTransition(0),r.animating&&r.$wrapperEl.trigger("webkitTransitionEnd transitionend"),n.allowMomentumBounce=!1,!a.grabCursor||!0!==r.allowSlideNext&&!0!==r.allowSlidePrev||r.setGrabCursor(!0),r.emit("sliderFirstMove",l)),r.emit("sliderMove",l),n.isMoved=!0;var m=r.isHorizontal()?d:h;i.diff=m,m*=a.touchRatio,s&&(m=-m),r.swipeDirection=m>0?"prev":"next",n.currentTranslate=m+n.startTranslate;var g=!0,v=a.resistanceRatio;if(a.touchReleaseOnEdges&&(v=0),m>0&&n.currentTranslate>r.minTranslate()?(g=!1,a.resistance&&(n.currentTranslate=r.minTranslate()-1+Math.pow(-r.minTranslate()+n.startTranslate+m,v))):m<0&&n.currentTranslate<r.maxTranslate()&&(g=!1,a.resistance&&(n.currentTranslate=r.maxTranslate()+1-Math.pow(r.maxTranslate()-n.startTranslate-m,v))),g&&(l.preventedByNestedSwiper=!0),!r.allowSlideNext&&"next"===r.swipeDirection&&n.currentTranslate<n.startTranslate&&(n.currentTranslate=n.startTranslate),!r.allowSlidePrev&&"prev"===r.swipeDirection&&n.currentTranslate>n.startTranslate&&(n.currentTranslate=n.startTranslate),r.allowSlidePrev||r.allowSlideNext||(n.currentTranslate=n.startTranslate),a.threshold>0){if(!(Math.abs(m)>a.threshold||n.allowThresholdMove))return void(n.currentTranslate=n.startTranslate);if(!n.allowThresholdMove)return n.allowThresholdMove=!0,i.startX=i.currentX,i.startY=i.currentY,n.currentTranslate=n.startTranslate,void(i.diff=r.isHorizontal()?i.currentX-i.startX:i.currentY-i.startY)}a.followFinger&&!a.cssMode&&((a.freeMode||a.watchSlidesProgress||a.watchSlidesVisibility)&&(r.updateActiveIndex(),r.updateSlidesClasses()),a.freeMode&&(0===n.velocities.length&&n.velocities.push({position:i[r.isHorizontal()?"startX":"startY"],time:n.touchStartTime}),n.velocities.push({position:i[r.isHorizontal()?"currentX":"currentY"],time:bo()})),r.updateProgress(n.currentTranslate),r.setTranslate(n.currentTranslate))}}}}}else n.startMoving&&n.isScrolling&&r.emit("touchMoveOpposite",l)}}function Do(e){var t=this,r=t.touchEventsData,n=t.params,a=t.touches,i=t.rtlTranslate,o=t.$wrapperEl,s=t.slidesGrid,l=t.snapGrid;if(t.enabled){var c=e;if(c.originalEvent&&(c=c.originalEvent),r.allowTouchCallbacks&&t.emit("touchEnd",c),r.allowTouchCallbacks=!1,!r.isTouched)return r.isMoved&&n.grabCursor&&t.setGrabCursor(!1),r.isMoved=!1,void(r.startMoving=!1);n.grabCursor&&r.isMoved&&r.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var u,p=bo(),d=p-r.touchStartTime;if(t.allowClick&&(t.updateClickedSlide(c),t.emit("tap click",c),d<300&&p-r.lastClickTime<300&&t.emit("doubleTap doubleClick",c)),r.lastClickTime=bo(),yo((function(){t.destroyed||(t.allowClick=!0)})),!r.isTouched||!r.isMoved||!t.swipeDirection||0===a.diff||r.currentTranslate===r.startTranslate)return r.isTouched=!1,r.isMoved=!1,void(r.startMoving=!1);if(r.isTouched=!1,r.isMoved=!1,r.startMoving=!1,u=n.followFinger?i?t.translate:-t.translate:-r.currentTranslate,!n.cssMode)if(n.freeMode){if(u<-t.minTranslate())return void t.slideTo(t.activeIndex);if(u>-t.maxTranslate())return void(t.slides.length<l.length?t.slideTo(l.length-1):t.slideTo(t.slides.length-1));if(n.freeModeMomentum){if(r.velocities.length>1){var h=r.velocities.pop(),f=r.velocities.pop(),m=h.position-f.position,g=h.time-f.time;t.velocity=m/g,t.velocity/=2,Math.abs(t.velocity)<n.freeModeMinimumVelocity&&(t.velocity=0),(g>150||bo()-h.time>300)&&(t.velocity=0)}else t.velocity=0;t.velocity*=n.freeModeMomentumVelocityRatio,r.velocities.length=0;var v=1e3*n.freeModeMomentumRatio,y=t.velocity*v,b=t.translate+y;i&&(b=-b);var _,x,w=!1,E=20*Math.abs(t.velocity)*n.freeModeMomentumBounceRatio;if(b<t.maxTranslate())n.freeModeMomentumBounce?(b+t.maxTranslate()<-E&&(b=t.maxTranslate()-E),_=t.maxTranslate(),w=!0,r.allowMomentumBounce=!0):b=t.maxTranslate(),n.loop&&n.centeredSlides&&(x=!0);else if(b>t.minTranslate())n.freeModeMomentumBounce?(b-t.minTranslate()>E&&(b=t.minTranslate()+E),_=t.minTranslate(),w=!0,r.allowMomentumBounce=!0):b=t.minTranslate(),n.loop&&n.centeredSlides&&(x=!0);else if(n.freeModeSticky){for(var C,k=0;k<l.length;k+=1)if(l[k]>-b){C=k;break}b=-(b=Math.abs(l[C]-b)<Math.abs(l[C-1]-b)||"next"===t.swipeDirection?l[C]:l[C-1])}if(x&&t.once("transitionEnd",(function(){t.loopFix()})),0!==t.velocity){if(v=i?Math.abs((-b-t.translate)/t.velocity):Math.abs((b-t.translate)/t.velocity),n.freeModeSticky){var T=Math.abs((i?-b:b)-t.translate),S=t.slidesSizesGrid[t.activeIndex];v=T<S?n.speed:T<2*S?1.5*n.speed:2.5*n.speed}}else if(n.freeModeSticky)return void t.slideToClosest();n.freeModeMomentumBounce&&w?(t.updateProgress(_),t.setTransition(v),t.setTranslate(b),t.transitionStart(!0,t.swipeDirection),t.animating=!0,o.transitionEnd((function(){t&&!t.destroyed&&r.allowMomentumBounce&&(t.emit("momentumBounce"),t.setTransition(n.speed),setTimeout((function(){t.setTranslate(_),o.transitionEnd((function(){t&&!t.destroyed&&t.transitionEnd()}))}),0))}))):t.velocity?(t.updateProgress(b),t.setTransition(v),t.setTranslate(b),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,o.transitionEnd((function(){t&&!t.destroyed&&t.transitionEnd()})))):(t.emit("_freeModeNoMomentumRelease"),t.updateProgress(b)),t.updateActiveIndex(),t.updateSlidesClasses()}else{if(n.freeModeSticky)return void t.slideToClosest();n.freeMode&&t.emit("_freeModeNoMomentumRelease")}(!n.freeModeMomentum||d>=n.longSwipesMs)&&(t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}else{for(var P=0,M=t.slidesSizesGrid[0],I=0;I<s.length;I+=I<n.slidesPerGroupSkip?1:n.slidesPerGroup){var A=I<n.slidesPerGroupSkip-1?1:n.slidesPerGroup;void 0!==s[I+A]?u>=s[I]&&u<s[I+A]&&(P=I,M=s[I+A]-s[I]):u>=s[I]&&(P=I,M=s[s.length-1]-s[s.length-2])}var O=(u-s[P])/M,z=P<n.slidesPerGroupSkip-1?1:n.slidesPerGroup;if(d>n.longSwipesMs){if(!n.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(O>=n.longSwipesRatio?t.slideTo(P+z):t.slideTo(P)),"prev"===t.swipeDirection&&(O>1-n.longSwipesRatio?t.slideTo(P+z):t.slideTo(P))}else{if(!n.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(c.target===t.navigation.nextEl||c.target===t.navigation.prevEl)?c.target===t.navigation.nextEl?t.slideTo(P+z):t.slideTo(P):("next"===t.swipeDirection&&t.slideTo(P+z),"prev"===t.swipeDirection&&t.slideTo(P))}}}}function Bo(){var e=this,t=e.params,r=e.el;if(!r||0!==r.offsetWidth){t.breakpoints&&e.setBreakpoint();var n=e.allowSlideNext,a=e.allowSlidePrev,i=e.snapGrid;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),("auto"===t.slidesPerView||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=a,e.allowSlideNext=n,e.params.watchOverflow&&i!==e.snapGrid&&e.checkOverflow()}}function $o(e){var t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function Fo(){var e=this,t=e.wrapperEl,r=e.rtlTranslate;if(e.enabled){e.previousTranslate=e.translate,e.isHorizontal()?e.translate=r?t.scrollWidth-t.offsetWidth-t.scrollLeft:-t.scrollLeft:e.translate=-t.scrollTop,-0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();var n=e.maxTranslate()-e.minTranslate();(0===n?0:(e.translate-e.minTranslate())/n)!==e.progress&&e.updateProgress(r?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}}var No=!1;function Vo(){}var jo={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!1,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,slidesPerGroupSkip:0,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function Uo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var qo={modular:{useParams:function(e){var t=this;t.modules&&Object.keys(t.modules).forEach((function(r){var n=t.modules[r];n.params&&Eo(e,n.params)}))},useModules:function(e){void 0===e&&(e={});var t=this;t.modules&&Object.keys(t.modules).forEach((function(r){var n=t.modules[r],a=e[r]||{};n.on&&t.on&&Object.keys(n.on).forEach((function(e){t.on(e,n.on[e])})),n.create&&n.create.bind(t)(a)}))}},eventsEmitter:{on:function(e,t,r){var n=this;if("function"!=typeof t)return n;var a=r?"unshift":"push";return e.split(" ").forEach((function(e){n.eventsListeners[e]||(n.eventsListeners[e]=[]),n.eventsListeners[e][a](t)})),n},once:function(e,t,r){var n=this;if("function"!=typeof t)return n;function a(){n.off(e,a),a.__emitterProxy&&delete a.__emitterProxy;for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];t.apply(n,i)}return a.__emitterProxy=t,n.on(e,a,r)},onAny:function(e,t){var r=this;if("function"!=typeof e)return r;var n=t?"unshift":"push";return r.eventsAnyListeners.indexOf(e)<0&&r.eventsAnyListeners[n](e),r},offAny:function(e){var t=this;if(!t.eventsAnyListeners)return t;var r=t.eventsAnyListeners.indexOf(e);return r>=0&&t.eventsAnyListeners.splice(r,1),t},off:function(e,t){var r=this;return r.eventsListeners?(e.split(" ").forEach((function(e){void 0===t?r.eventsListeners[e]=[]:r.eventsListeners[e]&&r.eventsListeners[e].forEach((function(n,a){(n===t||n.__emitterProxy&&n.__emitterProxy===t)&&r.eventsListeners[e].splice(a,1)}))})),r):r},emit:function(){var e,t,r,n=this;if(!n.eventsListeners)return n;for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];"string"==typeof i[0]||Array.isArray(i[0])?(e=i[0],t=i.slice(1,i.length),r=n):(e=i[0].events,t=i[0].data,r=i[0].context||n),t.unshift(r);var s=Array.isArray(e)?e:e.split(" ");return s.forEach((function(e){n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach((function(n){n.apply(r,[e].concat(t))})),n.eventsListeners&&n.eventsListeners[e]&&n.eventsListeners[e].forEach((function(e){e.apply(r,t)}))})),n}},update:{updateSize:function(){var e,t,r=this,n=r.$el;e=void 0!==r.params.width&&null!==r.params.width?r.params.width:n[0].clientWidth,t=void 0!==r.params.height&&null!==r.params.height?r.params.height:n[0].clientHeight,0===e&&r.isHorizontal()||0===t&&r.isVertical()||(e=e-parseInt(n.css("padding-left")||0,10)-parseInt(n.css("padding-right")||0,10),t=t-parseInt(n.css("padding-top")||0,10)-parseInt(n.css("padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Eo(r,{width:e,height:t,size:r.isHorizontal()?e:t}))},updateSlides:function(){var e=this;function t(t){return e.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}function r(e,r){return parseFloat(e.getPropertyValue(t(r))||0)}var n=e.params,a=e.$wrapperEl,i=e.size,o=e.rtlTranslate,s=e.wrongRTL,l=e.virtual&&n.virtual.enabled,c=l?e.virtual.slides.length:e.slides.length,u=a.children("."+e.params.slideClass),p=l?e.virtual.slides.length:u.length,d=[],h=[],f=[],m=n.slidesOffsetBefore;"function"==typeof m&&(m=n.slidesOffsetBefore.call(e));var g=n.slidesOffsetAfter;"function"==typeof g&&(g=n.slidesOffsetAfter.call(e));var v=e.snapGrid.length,y=e.slidesGrid.length,b=n.spaceBetween,_=-m,x=0,w=0;if(void 0!==i){var E,C;"string"==typeof b&&b.indexOf("%")>=0&&(b=parseFloat(b.replace("%",""))/100*i),e.virtualSize=-b,o?u.css({marginLeft:"",marginBottom:"",marginTop:""}):u.css({marginRight:"",marginBottom:"",marginTop:""}),n.slidesPerColumn>1&&(E=Math.floor(p/n.slidesPerColumn)===p/e.params.slidesPerColumn?p:Math.ceil(p/n.slidesPerColumn)*n.slidesPerColumn,"auto"!==n.slidesPerView&&"row"===n.slidesPerColumnFill&&(E=Math.max(E,n.slidesPerView*n.slidesPerColumn)));for(var k,T,S,P=n.slidesPerColumn,M=E/P,I=Math.floor(p/n.slidesPerColumn),A=0;A<p;A+=1){C=0;var O=u.eq(A);if(n.slidesPerColumn>1){var z=void 0,R=void 0,L=void 0;if("row"===n.slidesPerColumnFill&&n.slidesPerGroup>1){var D=Math.floor(A/(n.slidesPerGroup*n.slidesPerColumn)),B=A-n.slidesPerColumn*n.slidesPerGroup*D,$=0===D?n.slidesPerGroup:Math.min(Math.ceil((p-D*P*n.slidesPerGroup)/P),n.slidesPerGroup);z=(R=B-(L=Math.floor(B/$))*$+D*n.slidesPerGroup)+L*E/P,O.css({"-webkit-box-ordinal-group":z,"-moz-box-ordinal-group":z,"-ms-flex-order":z,"-webkit-order":z,order:z})}else"column"===n.slidesPerColumnFill?(L=A-(R=Math.floor(A/P))*P,(R>I||R===I&&L===P-1)&&(L+=1)>=P&&(L=0,R+=1)):R=A-(L=Math.floor(A/M))*M;O.css(t("margin-top"),0!==L?n.spaceBetween&&n.spaceBetween+"px":"")}if("none"!==O.css("display")){if("auto"===n.slidesPerView){var F=getComputedStyle(O[0]),N=O[0].style.transform,V=O[0].style.webkitTransform;if(N&&(O[0].style.transform="none"),V&&(O[0].style.webkitTransform="none"),n.roundLengths)C=e.isHorizontal()?O.outerWidth(!0):O.outerHeight(!0);else{var j=r(F,"width"),U=r(F,"padding-left"),q=r(F,"padding-right"),H=r(F,"margin-left"),G=r(F,"margin-right"),W=F.getPropertyValue("box-sizing");if(W&&"border-box"===W)C=j+H+G;else{var X=O[0],Z=X.clientWidth;C=j+U+q+H+G+(X.offsetWidth-Z)}}N&&(O[0].style.transform=N),V&&(O[0].style.webkitTransform=V),n.roundLengths&&(C=Math.floor(C))}else C=(i-(n.slidesPerView-1)*b)/n.slidesPerView,n.roundLengths&&(C=Math.floor(C)),u[A]&&(u[A].style[t("width")]=C+"px");u[A]&&(u[A].swiperSlideSize=C),f.push(C),n.centeredSlides?(_=_+C/2+x/2+b,0===x&&0!==A&&(_=_-i/2-b),0===A&&(_=_-i/2-b),Math.abs(_)<.001&&(_=0),n.roundLengths&&(_=Math.floor(_)),w%n.slidesPerGroup==0&&d.push(_),h.push(_)):(n.roundLengths&&(_=Math.floor(_)),(w-Math.min(e.params.slidesPerGroupSkip,w))%e.params.slidesPerGroup==0&&d.push(_),h.push(_),_=_+C+b),e.virtualSize+=C+b,x=C,w+=1}}if(e.virtualSize=Math.max(e.virtualSize,i)+g,o&&s&&("slide"===n.effect||"coverflow"===n.effect)&&a.css({width:e.virtualSize+n.spaceBetween+"px"}),n.setWrapperSize)a.css(((T={})[t("width")]=e.virtualSize+n.spaceBetween+"px",T));if(n.slidesPerColumn>1)if(e.virtualSize=(C+n.spaceBetween)*E,e.virtualSize=Math.ceil(e.virtualSize/n.slidesPerColumn)-n.spaceBetween,a.css(((S={})[t("width")]=e.virtualSize+n.spaceBetween+"px",S)),n.centeredSlides){k=[];for(var Y=0;Y<d.length;Y+=1){var K=d[Y];n.roundLengths&&(K=Math.floor(K)),d[Y]<e.virtualSize+d[0]&&k.push(K)}d=k}if(!n.centeredSlides){k=[];for(var Q=0;Q<d.length;Q+=1){var J=d[Q];n.roundLengths&&(J=Math.floor(J)),d[Q]<=e.virtualSize-i&&k.push(J)}d=k,Math.floor(e.virtualSize-i)-Math.floor(d[d.length-1])>1&&d.push(e.virtualSize-i)}if(0===d.length&&(d=[0]),0!==n.spaceBetween){var ee,te=e.isHorizontal()&&o?"marginLeft":t("marginRight");u.filter((function(e,t){return!n.cssMode||t!==u.length-1})).css(((ee={})[te]=b+"px",ee))}if(n.centeredSlides&&n.centeredSlidesBounds){var re=0;f.forEach((function(e){re+=e+(n.spaceBetween?n.spaceBetween:0)}));var ne=(re-=n.spaceBetween)-i;d=d.map((function(e){return e<0?-m:e>ne?ne+g:e}))}if(n.centerInsufficientSlides){var ae=0;if(f.forEach((function(e){ae+=e+(n.spaceBetween?n.spaceBetween:0)})),(ae-=n.spaceBetween)<i){var ie=(i-ae)/2;d.forEach((function(e,t){d[t]=e-ie})),h.forEach((function(e,t){h[t]=e+ie}))}}Eo(e,{slides:u,snapGrid:d,slidesGrid:h,slidesSizesGrid:f}),p!==c&&e.emit("slidesLengthChange"),d.length!==v&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),h.length!==y&&e.emit("slidesGridLengthChange"),(n.watchSlidesProgress||n.watchSlidesVisibility)&&e.updateSlidesOffset()}},updateAutoHeight:function(e){var t,r=this,n=[],a=r.virtual&&r.params.virtual.enabled,i=0;"number"==typeof e?r.setTransition(e):!0===e&&r.setTransition(r.params.speed);var o=function(e){return a?r.slides.filter((function(t){return parseInt(t.getAttribute("data-swiper-slide-index"),10)===e}))[0]:r.slides.eq(e)[0]};if("auto"!==r.params.slidesPerView&&r.params.slidesPerView>1)if(r.params.centeredSlides)r.visibleSlides.each((function(e){n.push(e)}));else for(t=0;t<Math.ceil(r.params.slidesPerView);t+=1){var s=r.activeIndex+t;if(s>r.slides.length&&!a)break;n.push(o(s))}else n.push(o(r.activeIndex));for(t=0;t<n.length;t+=1)if(void 0!==n[t]){var l=n[t].offsetHeight;i=l>i?l:i}i&&r.$wrapperEl.css("height",i+"px")},updateSlidesOffset:function(){for(var e=this.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=this.isHorizontal()?e[t].offsetLeft:e[t].offsetTop},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);var t=this,r=t.params,n=t.slides,a=t.rtlTranslate;if(0!==n.length){void 0===n[0].swiperSlideOffset&&t.updateSlidesOffset();var i=-e;a&&(i=e),n.removeClass(r.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(var o=0;o<n.length;o+=1){var s=n[o],l=(i+(r.centeredSlides?t.minTranslate():0)-s.swiperSlideOffset)/(s.swiperSlideSize+r.spaceBetween);if(r.watchSlidesVisibility||r.centeredSlides&&r.autoHeight){var c=-(i-s.swiperSlideOffset),u=c+t.slidesSizesGrid[o];(c>=0&&c<t.size-1||u>1&&u<=t.size||c<=0&&u>=t.size)&&(t.visibleSlides.push(s),t.visibleSlidesIndexes.push(o),n.eq(o).addClass(r.slideVisibleClass))}s.progress=a?-l:l}t.visibleSlides=vo(t.visibleSlides)}},updateProgress:function(e){var t=this;if(void 0===e){var r=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*r||0}var n=t.params,a=t.maxTranslate()-t.minTranslate(),i=t.progress,o=t.isBeginning,s=t.isEnd,l=o,c=s;0===a?(i=0,o=!0,s=!0):(o=(i=(e-t.minTranslate())/a)<=0,s=i>=1),Eo(t,{progress:i,isBeginning:o,isEnd:s}),(n.watchSlidesProgress||n.watchSlidesVisibility||n.centeredSlides&&n.autoHeight)&&t.updateSlidesProgress(e),o&&!l&&t.emit("reachBeginning toEdge"),s&&!c&&t.emit("reachEnd toEdge"),(l&&!o||c&&!s)&&t.emit("fromEdge"),t.emit("progress",i)},updateSlidesClasses:function(){var e,t=this,r=t.slides,n=t.params,a=t.$wrapperEl,i=t.activeIndex,o=t.realIndex,s=t.virtual&&n.virtual.enabled;r.removeClass(n.slideActiveClass+" "+n.slideNextClass+" "+n.slidePrevClass+" "+n.slideDuplicateActiveClass+" "+n.slideDuplicateNextClass+" "+n.slideDuplicatePrevClass),(e=s?t.$wrapperEl.find("."+n.slideClass+'[data-swiper-slide-index="'+i+'"]'):r.eq(i)).addClass(n.slideActiveClass),n.loop&&(e.hasClass(n.slideDuplicateClass)?a.children("."+n.slideClass+":not(."+n.slideDuplicateClass+')[data-swiper-slide-index="'+o+'"]').addClass(n.slideDuplicateActiveClass):a.children("."+n.slideClass+"."+n.slideDuplicateClass+'[data-swiper-slide-index="'+o+'"]').addClass(n.slideDuplicateActiveClass));var l=e.nextAll("."+n.slideClass).eq(0).addClass(n.slideNextClass);n.loop&&0===l.length&&(l=r.eq(0)).addClass(n.slideNextClass);var c=e.prevAll("."+n.slideClass).eq(0).addClass(n.slidePrevClass);n.loop&&0===c.length&&(c=r.eq(-1)).addClass(n.slidePrevClass),n.loop&&(l.hasClass(n.slideDuplicateClass)?a.children("."+n.slideClass+":not(."+n.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(n.slideDuplicateNextClass):a.children("."+n.slideClass+"."+n.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(n.slideDuplicateNextClass),c.hasClass(n.slideDuplicateClass)?a.children("."+n.slideClass+":not(."+n.slideDuplicateClass+')[data-swiper-slide-index="'+c.attr("data-swiper-slide-index")+'"]').addClass(n.slideDuplicatePrevClass):a.children("."+n.slideClass+"."+n.slideDuplicateClass+'[data-swiper-slide-index="'+c.attr("data-swiper-slide-index")+'"]').addClass(n.slideDuplicatePrevClass)),t.emitSlidesClasses()},updateActiveIndex:function(e){var t,r=this,n=r.rtlTranslate?r.translate:-r.translate,a=r.slidesGrid,i=r.snapGrid,o=r.params,s=r.activeIndex,l=r.realIndex,c=r.snapIndex,u=e;if(void 0===u){for(var p=0;p<a.length;p+=1)void 0!==a[p+1]?n>=a[p]&&n<a[p+1]-(a[p+1]-a[p])/2?u=p:n>=a[p]&&n<a[p+1]&&(u=p+1):n>=a[p]&&(u=p);o.normalizeSlideIndex&&(u<0||void 0===u)&&(u=0)}if(i.indexOf(n)>=0)t=i.indexOf(n);else{var d=Math.min(o.slidesPerGroupSkip,u);t=d+Math.floor((u-d)/o.slidesPerGroup)}if(t>=i.length&&(t=i.length-1),u!==s){var h=parseInt(r.slides.eq(u).attr("data-swiper-slide-index")||u,10);Eo(r,{snapIndex:t,realIndex:h,previousIndex:s,activeIndex:u}),r.emit("activeIndexChange"),r.emit("snapIndexChange"),l!==h&&r.emit("realIndexChange"),(r.initialized||r.params.runCallbacksOnInit)&&r.emit("slideChange")}else t!==c&&(r.snapIndex=t,r.emit("snapIndexChange"))},updateClickedSlide:function(e){var t,r=this,n=r.params,a=vo(e.target).closest("."+n.slideClass)[0],i=!1;if(a)for(var o=0;o<r.slides.length;o+=1)if(r.slides[o]===a){i=!0,t=o;break}if(!a||!i)return r.clickedSlide=void 0,void(r.clickedIndex=void 0);r.clickedSlide=a,r.virtual&&r.params.virtual.enabled?r.clickedIndex=parseInt(vo(a).attr("data-swiper-slide-index"),10):r.clickedIndex=t,n.slideToClickedSlide&&void 0!==r.clickedIndex&&r.clickedIndex!==r.activeIndex&&r.slideToClickedSlide()}},translate:{getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");var t=this,r=t.params,n=t.rtlTranslate,a=t.translate,i=t.$wrapperEl;if(r.virtualTranslate)return n?-a:a;if(r.cssMode)return a;var o=_o(i[0],e);return n&&(o=-o),o||0},setTranslate:function(e,t){var r=this,n=r.rtlTranslate,a=r.params,i=r.$wrapperEl,o=r.wrapperEl,s=r.progress,l=0,c=0;r.isHorizontal()?l=n?-e:e:c=e,a.roundLengths&&(l=Math.floor(l),c=Math.floor(c)),a.cssMode?o[r.isHorizontal()?"scrollLeft":"scrollTop"]=r.isHorizontal()?-l:-c:a.virtualTranslate||i.transform("translate3d("+l+"px, "+c+"px, 0px)"),r.previousTranslate=r.translate,r.translate=r.isHorizontal()?l:c;var u=r.maxTranslate()-r.minTranslate();(0===u?0:(e-r.minTranslate())/u)!==s&&r.updateProgress(e),r.emit("setTranslate",r.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,r,n,a){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===r&&(r=!0),void 0===n&&(n=!0);var i=this,o=i.params,s=i.wrapperEl;if(i.animating&&o.preventInteractionOnTransition)return!1;var l,c=i.minTranslate(),u=i.maxTranslate();if(l=n&&e>c?c:n&&e<u?u:e,i.updateProgress(l),o.cssMode){var p,d=i.isHorizontal();if(0===t)s[d?"scrollLeft":"scrollTop"]=-l;else if(s.scrollTo)s.scrollTo(((p={})[d?"left":"top"]=-l,p.behavior="smooth",p));else s[d?"scrollLeft":"scrollTop"]=-l;return!0}return 0===t?(i.setTransition(0),i.setTranslate(l),r&&(i.emit("beforeTransitionStart",t,a),i.emit("transitionEnd"))):(i.setTransition(t),i.setTranslate(l),r&&(i.emit("beforeTransitionStart",t,a),i.emit("transitionStart")),i.animating||(i.animating=!0,i.onTranslateToWrapperTransitionEnd||(i.onTranslateToWrapperTransitionEnd=function(e){i&&!i.destroyed&&e.target===this&&(i.$wrapperEl[0].removeEventListener("transitionend",i.onTranslateToWrapperTransitionEnd),i.$wrapperEl[0].removeEventListener("webkitTransitionEnd",i.onTranslateToWrapperTransitionEnd),i.onTranslateToWrapperTransitionEnd=null,delete i.onTranslateToWrapperTransitionEnd,r&&i.emit("transitionEnd"))}),i.$wrapperEl[0].addEventListener("transitionend",i.onTranslateToWrapperTransitionEnd),i.$wrapperEl[0].addEventListener("webkitTransitionEnd",i.onTranslateToWrapperTransitionEnd))),!0}},transition:{setTransition:function(e,t){var r=this;r.params.cssMode||r.$wrapperEl.transition(e),r.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);var r=this,n=r.activeIndex,a=r.params,i=r.previousIndex;if(!a.cssMode){a.autoHeight&&r.updateAutoHeight();var o=t;if(o||(o=n>i?"next":n<i?"prev":"reset"),r.emit("transitionStart"),e&&n!==i){if("reset"===o)return void r.emit("slideResetTransitionStart");r.emit("slideChangeTransitionStart"),"next"===o?r.emit("slideNextTransitionStart"):r.emit("slidePrevTransitionStart")}}},transitionEnd:function(e,t){void 0===e&&(e=!0);var r=this,n=r.activeIndex,a=r.previousIndex,i=r.params;if(r.animating=!1,!i.cssMode){r.setTransition(0);var o=t;if(o||(o=n>a?"next":n<a?"prev":"reset"),r.emit("transitionEnd"),e&&n!==a){if("reset"===o)return void r.emit("slideResetTransitionEnd");r.emit("slideChangeTransitionEnd"),"next"===o?r.emit("slideNextTransitionEnd"):r.emit("slidePrevTransitionEnd")}}}},slide:{slideTo:function(e,t,r,n,a){if(void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===r&&(r=!0),"number"!=typeof e&&"string"!=typeof e)throw new Error("The 'index' argument cannot have type other than 'number' or 'string'. ["+typeof e+"] given.");if("string"==typeof e){var i=parseInt(e,10);if(!isFinite(i))throw new Error("The passed-in 'index' (string) couldn't be converted to 'number'. ["+e+"] given.");e=i}var o=this,s=e;s<0&&(s=0);var l=o.params,c=o.snapGrid,u=o.slidesGrid,p=o.previousIndex,d=o.activeIndex,h=o.rtlTranslate,f=o.wrapperEl,m=o.enabled;if(o.animating&&l.preventInteractionOnTransition||!m&&!n&&!a)return!1;var g=Math.min(o.params.slidesPerGroupSkip,s),v=g+Math.floor((s-g)/o.params.slidesPerGroup);v>=c.length&&(v=c.length-1),(d||l.initialSlide||0)===(p||0)&&r&&o.emit("beforeSlideChangeStart");var y,b=-c[v];if(o.updateProgress(b),l.normalizeSlideIndex)for(var _=0;_<u.length;_+=1){var x=-Math.floor(100*b),w=Math.floor(100*u[_]),E=Math.floor(100*u[_+1]);void 0!==u[_+1]?x>=w&&x<E-(E-w)/2?s=_:x>=w&&x<E&&(s=_+1):x>=w&&(s=_)}if(o.initialized&&s!==d){if(!o.allowSlideNext&&b<o.translate&&b<o.minTranslate())return!1;if(!o.allowSlidePrev&&b>o.translate&&b>o.maxTranslate()&&(d||0)!==s)return!1}if(y=s>d?"next":s<d?"prev":"reset",h&&-b===o.translate||!h&&b===o.translate)return o.updateActiveIndex(s),l.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),"slide"!==l.effect&&o.setTranslate(b),"reset"!==y&&(o.transitionStart(r,y),o.transitionEnd(r,y)),!1;if(l.cssMode){var C,k=o.isHorizontal(),T=-b;if(h&&(T=f.scrollWidth-f.offsetWidth-T),0===t)f[k?"scrollLeft":"scrollTop"]=T;else if(f.scrollTo)f.scrollTo(((C={})[k?"left":"top"]=T,C.behavior="smooth",C));else f[k?"scrollLeft":"scrollTop"]=T;return!0}return 0===t?(o.setTransition(0),o.setTranslate(b),o.updateActiveIndex(s),o.updateSlidesClasses(),o.emit("beforeTransitionStart",t,n),o.transitionStart(r,y),o.transitionEnd(r,y)):(o.setTransition(t),o.setTranslate(b),o.updateActiveIndex(s),o.updateSlidesClasses(),o.emit("beforeTransitionStart",t,n),o.transitionStart(r,y),o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(e){o&&!o.destroyed&&e.target===this&&(o.$wrapperEl[0].removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].removeEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(r,y))}),o.$wrapperEl[0].addEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].addEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd))),!0},slideToLoop:function(e,t,r,n){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===r&&(r=!0);var a=this,i=e;return a.params.loop&&(i+=a.loopedSlides),a.slideTo(i,t,r,n)},slideNext:function(e,t,r){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var n=this,a=n.params,i=n.animating;if(!n.enabled)return n;var o=n.activeIndex<a.slidesPerGroupSkip?1:a.slidesPerGroup;if(a.loop){if(i&&a.loopPreventsSlide)return!1;n.loopFix(),n._clientLeft=n.$wrapperEl[0].clientLeft}return n.slideTo(n.activeIndex+o,e,t,r)},slidePrev:function(e,t,r){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var n=this,a=n.params,i=n.animating,o=n.snapGrid,s=n.slidesGrid,l=n.rtlTranslate;if(!n.enabled)return n;if(a.loop){if(i&&a.loopPreventsSlide)return!1;n.loopFix(),n._clientLeft=n.$wrapperEl[0].clientLeft}function c(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var u,p=c(l?n.translate:-n.translate),d=o.map((function(e){return c(e)})),h=o[d.indexOf(p)-1];return void 0===h&&a.cssMode&&o.forEach((function(e){!h&&p>=e&&(h=e)})),void 0!==h&&(u=s.indexOf(h))<0&&(u=n.activeIndex-1),n.slideTo(u,e,t,r)},slideReset:function(e,t,r){return void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),this.slideTo(this.activeIndex,e,t,r)},slideToClosest:function(e,t,r,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),void 0===n&&(n=.5);var a=this,i=a.activeIndex,o=Math.min(a.params.slidesPerGroupSkip,i),s=o+Math.floor((i-o)/a.params.slidesPerGroup),l=a.rtlTranslate?a.translate:-a.translate;if(l>=a.snapGrid[s]){var c=a.snapGrid[s];l-c>(a.snapGrid[s+1]-c)*n&&(i+=a.params.slidesPerGroup)}else{var u=a.snapGrid[s-1];l-u<=(a.snapGrid[s]-u)*n&&(i-=a.params.slidesPerGroup)}return i=Math.max(i,0),i=Math.min(i,a.slidesGrid.length-1),a.slideTo(i,e,t,r)},slideToClickedSlide:function(){var e,t=this,r=t.params,n=t.$wrapperEl,a="auto"===r.slidesPerView?t.slidesPerViewDynamic():r.slidesPerView,i=t.clickedIndex;if(r.loop){if(t.animating)return;e=parseInt(vo(t.clickedSlide).attr("data-swiper-slide-index"),10),r.centeredSlides?i<t.loopedSlides-a/2||i>t.slides.length-t.loopedSlides+a/2?(t.loopFix(),i=n.children("."+r.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+r.slideDuplicateClass+")").eq(0).index(),yo((function(){t.slideTo(i)}))):t.slideTo(i):i>t.slides.length-a?(t.loopFix(),i=n.children("."+r.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+r.slideDuplicateClass+")").eq(0).index(),yo((function(){t.slideTo(i)}))):t.slideTo(i)}else t.slideTo(i)}},loop:{loopCreate:function(){var e=this,t=o(),r=e.params,n=e.$wrapperEl;n.children("."+r.slideClass+"."+r.slideDuplicateClass).remove();var a=n.children("."+r.slideClass);if(r.loopFillGroupWithBlank){var i=r.slidesPerGroup-a.length%r.slidesPerGroup;if(i!==r.slidesPerGroup){for(var s=0;s<i;s+=1){var l=vo(t.createElement("div")).addClass(r.slideClass+" "+r.slideBlankClass);n.append(l)}a=n.children("."+r.slideClass)}}"auto"!==r.slidesPerView||r.loopedSlides||(r.loopedSlides=a.length),e.loopedSlides=Math.ceil(parseFloat(r.loopedSlides||r.slidesPerView,10)),e.loopedSlides+=r.loopAdditionalSlides,e.loopedSlides>a.length&&(e.loopedSlides=a.length);var c=[],u=[];a.each((function(t,r){var n=vo(t);r<e.loopedSlides&&u.push(t),r<a.length&&r>=a.length-e.loopedSlides&&c.push(t),n.attr("data-swiper-slide-index",r)}));for(var p=0;p<u.length;p+=1)n.append(vo(u[p].cloneNode(!0)).addClass(r.slideDuplicateClass));for(var d=c.length-1;d>=0;d-=1)n.prepend(vo(c[d].cloneNode(!0)).addClass(r.slideDuplicateClass))},loopFix:function(){var e=this;e.emit("beforeLoopFix");var t,r=e.activeIndex,n=e.slides,a=e.loopedSlides,i=e.allowSlidePrev,o=e.allowSlideNext,s=e.snapGrid,l=e.rtlTranslate;e.allowSlidePrev=!0,e.allowSlideNext=!0;var c=-s[r]-e.getTranslate();if(r<a)t=n.length-3*a+r,t+=a,e.slideTo(t,0,!1,!0)&&0!==c&&e.setTranslate((l?-e.translate:e.translate)-c);else if(r>=n.length-a){t=-n.length+r+a,t+=a,e.slideTo(t,0,!1,!0)&&0!==c&&e.setTranslate((l?-e.translate:e.translate)-c)}e.allowSlidePrev=i,e.allowSlideNext=o,e.emit("loopFix")},loopDestroy:function(){var e=this,t=e.$wrapperEl,r=e.params,n=e.slides;t.children("."+r.slideClass+"."+r.slideDuplicateClass+",."+r.slideClass+"."+r.slideBlankClass).remove(),n.removeAttr("data-swiper-slide-index")}},grabCursor:{setGrabCursor:function(e){var t=this;if(!(t.support.touch||!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)){var r=t.el;r.style.cursor="move",r.style.cursor=e?"-webkit-grabbing":"-webkit-grab",r.style.cursor=e?"-moz-grabbin":"-moz-grab",r.style.cursor=e?"grabbing":"grab"}},unsetGrabCursor:function(){var e=this;e.support.touch||e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.el.style.cursor="")}},manipulation:{appendSlide:function(e){var t=this,r=t.$wrapperEl,n=t.params;if(n.loop&&t.loopDestroy(),"object"==typeof e&&"length"in e)for(var a=0;a<e.length;a+=1)e[a]&&r.append(e[a]);else r.append(e);n.loop&&t.loopCreate(),n.observer&&t.support.observer||t.update()},prependSlide:function(e){var t=this,r=t.params,n=t.$wrapperEl,a=t.activeIndex;r.loop&&t.loopDestroy();var i=a+1;if("object"==typeof e&&"length"in e){for(var o=0;o<e.length;o+=1)e[o]&&n.prepend(e[o]);i=a+e.length}else n.prepend(e);r.loop&&t.loopCreate(),r.observer&&t.support.observer||t.update(),t.slideTo(i,0,!1)},addSlide:function(e,t){var r=this,n=r.$wrapperEl,a=r.params,i=r.activeIndex;a.loop&&(i-=r.loopedSlides,r.loopDestroy(),r.slides=n.children("."+a.slideClass));var o=r.slides.length;if(e<=0)r.prependSlide(t);else if(e>=o)r.appendSlide(t);else{for(var s=i>e?i+1:i,l=[],c=o-1;c>=e;c-=1){var u=r.slides.eq(c);u.remove(),l.unshift(u)}if("object"==typeof t&&"length"in t){for(var p=0;p<t.length;p+=1)t[p]&&n.append(t[p]);s=i>e?i+t.length:i}else n.append(t);for(var d=0;d<l.length;d+=1)n.append(l[d]);a.loop&&r.loopCreate(),a.observer&&r.support.observer||r.update(),a.loop?r.slideTo(s+r.loopedSlides,0,!1):r.slideTo(s,0,!1)}},removeSlide:function(e){var t=this,r=t.params,n=t.$wrapperEl,a=t.activeIndex;r.loop&&(a-=t.loopedSlides,t.loopDestroy(),t.slides=n.children("."+r.slideClass));var i,o=a;if("object"==typeof e&&"length"in e){for(var s=0;s<e.length;s+=1)i=e[s],t.slides[i]&&t.slides.eq(i).remove(),i<o&&(o-=1);o=Math.max(o,0)}else i=e,t.slides[i]&&t.slides.eq(i).remove(),i<o&&(o-=1),o=Math.max(o,0);r.loop&&t.loopCreate(),r.observer&&t.support.observer||t.update(),r.loop?t.slideTo(o+t.loopedSlides,0,!1):t.slideTo(o,0,!1)},removeAllSlides:function(){for(var e=[],t=0;t<this.slides.length;t+=1)e.push(t);this.removeSlide(e)}},events:{attachEvents:function(){var e=this,t=o(),r=e.params,n=e.touchEvents,a=e.el,i=e.wrapperEl,s=e.device,l=e.support;e.onTouchStart=Ro.bind(e),e.onTouchMove=Lo.bind(e),e.onTouchEnd=Do.bind(e),r.cssMode&&(e.onScroll=Fo.bind(e)),e.onClick=$o.bind(e);var c=!!r.nested;if(!l.touch&&l.pointerEvents)a.addEventListener(n.start,e.onTouchStart,!1),t.addEventListener(n.move,e.onTouchMove,c),t.addEventListener(n.end,e.onTouchEnd,!1);else{if(l.touch){var u=!("touchstart"!==n.start||!l.passiveListener||!r.passiveListeners)&&{passive:!0,capture:!1};a.addEventListener(n.start,e.onTouchStart,u),a.addEventListener(n.move,e.onTouchMove,l.passiveListener?{passive:!1,capture:c}:c),a.addEventListener(n.end,e.onTouchEnd,u),n.cancel&&a.addEventListener(n.cancel,e.onTouchEnd,u),No||(t.addEventListener("touchstart",Vo),No=!0)}(r.simulateTouch&&!s.ios&&!s.android||r.simulateTouch&&!l.touch&&s.ios)&&(a.addEventListener("mousedown",e.onTouchStart,!1),t.addEventListener("mousemove",e.onTouchMove,c),t.addEventListener("mouseup",e.onTouchEnd,!1))}(r.preventClicks||r.preventClicksPropagation)&&a.addEventListener("click",e.onClick,!0),r.cssMode&&i.addEventListener("scroll",e.onScroll),r.updateOnWindowResize?e.on(s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",Bo,!0):e.on("observerUpdate",Bo,!0)},detachEvents:function(){var e=this,t=o(),r=e.params,n=e.touchEvents,a=e.el,i=e.wrapperEl,s=e.device,l=e.support,c=!!r.nested;if(!l.touch&&l.pointerEvents)a.removeEventListener(n.start,e.onTouchStart,!1),t.removeEventListener(n.move,e.onTouchMove,c),t.removeEventListener(n.end,e.onTouchEnd,!1);else{if(l.touch){var u=!("onTouchStart"!==n.start||!l.passiveListener||!r.passiveListeners)&&{passive:!0,capture:!1};a.removeEventListener(n.start,e.onTouchStart,u),a.removeEventListener(n.move,e.onTouchMove,c),a.removeEventListener(n.end,e.onTouchEnd,u),n.cancel&&a.removeEventListener(n.cancel,e.onTouchEnd,u)}(r.simulateTouch&&!s.ios&&!s.android||r.simulateTouch&&!l.touch&&s.ios)&&(a.removeEventListener("mousedown",e.onTouchStart,!1),t.removeEventListener("mousemove",e.onTouchMove,c),t.removeEventListener("mouseup",e.onTouchEnd,!1))}(r.preventClicks||r.preventClicksPropagation)&&a.removeEventListener("click",e.onClick,!0),r.cssMode&&i.removeEventListener("scroll",e.onScroll),e.off(s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",Bo)}},breakpoints:{setBreakpoint:function(){var e=this,t=e.activeIndex,r=e.initialized,n=e.loopedSlides,a=void 0===n?0:n,i=e.params,o=e.$el,s=i.breakpoints;if(s&&(!s||0!==Object.keys(s).length)){var l=e.getBreakpoint(s,e.params.breakpointsBase,e.el);if(l&&e.currentBreakpoint!==l){var c=l in s?s[l]:void 0;c&&["slidesPerView","spaceBetween","slidesPerGroup","slidesPerGroupSkip","slidesPerColumn"].forEach((function(e){var t=c[e];void 0!==t&&(c[e]="slidesPerView"!==e||"AUTO"!==t&&"auto"!==t?"slidesPerView"===e?parseFloat(t):parseInt(t,10):"auto")}));var u=c||e.originalParams,p=i.slidesPerColumn>1,d=u.slidesPerColumn>1,h=i.enabled;p&&!d?(o.removeClass(i.containerModifierClass+"multirow "+i.containerModifierClass+"multirow-column"),e.emitContainerClasses()):!p&&d&&(o.addClass(i.containerModifierClass+"multirow"),(u.slidesPerColumnFill&&"column"===u.slidesPerColumnFill||!u.slidesPerColumnFill&&"column"===i.slidesPerColumnFill)&&o.addClass(i.containerModifierClass+"multirow-column"),e.emitContainerClasses());var f=u.direction&&u.direction!==i.direction,m=i.loop&&(u.slidesPerView!==i.slidesPerView||f);f&&r&&e.changeDirection(),Eo(e.params,u);var g=e.params.enabled;Eo(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),h&&!g?e.disable():!h&&g&&e.enable(),e.currentBreakpoint=l,e.emit("_beforeBreakpoint",u),m&&r&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-a+e.loopedSlides,0,!1)),e.emit("breakpoint",u)}}},getBreakpoint:function(e,t,r){if(void 0===t&&(t="window"),e&&("container"!==t||r)){var n=!1,a=l(),i="window"===t?a.innerHeight:r.clientHeight,o=Object.keys(e).map((function(e){if("string"==typeof e&&0===e.indexOf("@")){var t=parseFloat(e.substr(1));return{value:i*t,point:e}}return{value:e,point:e}}));o.sort((function(e,t){return parseInt(e.value,10)-parseInt(t.value,10)}));for(var s=0;s<o.length;s+=1){var c=o[s],u=c.point,p=c.value;"window"===t?a.matchMedia("(min-width: "+p+"px)").matches&&(n=u):p<=r.clientWidth&&(n=u)}return n||"max"}}},checkOverflow:{checkOverflow:function(){var e=this,t=e.params,r=e.isLocked,n=e.slides.length>0&&t.slidesOffsetBefore+t.spaceBetween*(e.slides.length-1)+e.slides[0].offsetWidth*e.slides.length;t.slidesOffsetBefore&&t.slidesOffsetAfter&&n?e.isLocked=n<=e.size:e.isLocked=1===e.snapGrid.length,e.allowSlideNext=!e.isLocked,e.allowSlidePrev=!e.isLocked,r!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock"),r&&r!==e.isLocked&&(e.isEnd=!1,e.navigation&&e.navigation.update())}},classes:{addClasses:function(){var e,t,r,n=this,a=n.classNames,i=n.params,o=n.rtl,s=n.$el,l=n.device,c=n.support,u=(e=["initialized",i.direction,{"pointer-events":c.pointerEvents&&!c.touch},{"free-mode":i.freeMode},{autoheight:i.autoHeight},{rtl:o},{multirow:i.slidesPerColumn>1},{"multirow-column":i.slidesPerColumn>1&&"column"===i.slidesPerColumnFill},{android:l.android},{ios:l.ios},{"css-mode":i.cssMode}],t=i.containerModifierClass,r=[],e.forEach((function(e){"object"==typeof e?Object.keys(e).forEach((function(n){e[n]&&r.push(t+n)})):"string"==typeof e&&r.push(t+e)})),r);a.push.apply(a,u),s.addClass([].concat(a).join(" ")),n.emitContainerClasses()},removeClasses:function(){var e=this,t=e.$el,r=e.classNames;t.removeClass(r.join(" ")),e.emitContainerClasses()}},images:{loadImage:function(e,t,r,n,a,i){var o,s=l();function c(){i&&i()}vo(e).parent("picture")[0]||e.complete&&a?c():t?((o=new s.Image).onload=c,o.onerror=c,n&&(o.sizes=n),r&&(o.srcset=r),t&&(o.src=t)):c()},preloadImages:function(){var e=this;function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(var r=0;r<e.imagesToLoad.length;r+=1){var n=e.imagesToLoad[r];e.loadImage(n,n.currentSrc||n.getAttribute("src"),n.srcset||n.getAttribute("srcset"),n.sizes||n.getAttribute("sizes"),!0,t)}}}},Ho={},Go=function(){function e(){for(var t,r,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];if(1===a.length&&a[0].constructor&&"Object"===Object.prototype.toString.call(a[0]).slice(8,-1)?r=a[0]:(t=a[0],r=a[1]),r||(r={}),r=Eo({},r),t&&!r.el&&(r.el=t),r.el&&vo(r.el).length>1){var o=[];return vo(r.el).each((function(t){var n=Eo({},r,{el:t});o.push(new e(n))})),o}var s=this;s.__swiper__=!0,s.support=So(),s.device=Po({userAgent:r.userAgent}),s.browser=Mo(),s.eventsListeners={},s.eventsAnyListeners=[],void 0===s.modules&&(s.modules={}),Object.keys(s.modules).forEach((function(e){var t=s.modules[e];if(t.params){var n=Object.keys(t.params)[0],a=t.params[n];if("object"!=typeof a||null===a)return;if(["navigation","pagination","scrollbar"].indexOf(n)>=0&&!0===r[n]&&(r[n]={auto:!0}),!(n in r)||!("enabled"in a))return;!0===r[n]&&(r[n]={enabled:!0}),"object"!=typeof r[n]||"enabled"in r[n]||(r[n].enabled=!0),r[n]||(r[n]={enabled:!1})}}));var l=Eo({},jo);return s.useParams(l),s.params=Eo({},l,Ho,r),s.originalParams=Eo({},s.params),s.passedParams=Eo({},r),s.params&&s.params.on&&Object.keys(s.params.on).forEach((function(e){s.on(e,s.params.on[e])})),s.params&&s.params.onAny&&s.onAny(s.params.onAny),s.$=vo,Eo(s,{enabled:s.params.enabled,el:t,classNames:[],slides:vo(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===s.params.direction},isVertical:function(){return"vertical"===s.params.direction},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:s.params.allowSlideNext,allowSlidePrev:s.params.allowSlidePrev,touchEvents:function(){var e=["touchstart","touchmove","touchend","touchcancel"],t=["mousedown","mousemove","mouseup"];return s.support.pointerEvents&&(t=["pointerdown","pointermove","pointerup"]),s.touchEventsTouch={start:e[0],move:e[1],end:e[2],cancel:e[3]},s.touchEventsDesktop={start:t[0],move:t[1],end:t[2]},s.support.touch||!s.params.simulateTouch?s.touchEventsTouch:s.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:s.params.focusableElements,lastClickTime:bo(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:s.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),s.useModules(),s.emit("_swiper"),s.params.init&&s.init(),s}var t,r,n,a=e.prototype;return a.enable=function(){var e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))},a.disable=function(){var e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))},a.setProgress=function(e,t){var r=this;e=Math.min(Math.max(e,0),1);var n=r.minTranslate(),a=(r.maxTranslate()-n)*e+n;r.translateTo(a,void 0===t?0:t),r.updateActiveIndex(),r.updateSlidesClasses()},a.emitContainerClasses=function(){var e=this;if(e.params._emitClasses&&e.el){var t=e.el.className.split(" ").filter((function(t){return 0===t.indexOf("swiper-container")||0===t.indexOf(e.params.containerModifierClass)}));e.emit("_containerClasses",t.join(" "))}},a.getSlideClasses=function(e){var t=this;return e.className.split(" ").filter((function(e){return 0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)})).join(" ")},a.emitSlidesClasses=function(){var e=this;if(e.params._emitClasses&&e.el){var t=[];e.slides.each((function(r){var n=e.getSlideClasses(r);t.push({slideEl:r,classNames:n}),e.emit("_slideClass",r,n)})),e.emit("_slideClasses",t)}},a.slidesPerViewDynamic=function(){var e=this,t=e.params,r=e.slides,n=e.slidesGrid,a=e.size,i=e.activeIndex,o=1;if(t.centeredSlides){for(var s,l=r[i].swiperSlideSize,c=i+1;c<r.length;c+=1)r[c]&&!s&&(o+=1,(l+=r[c].swiperSlideSize)>a&&(s=!0));for(var u=i-1;u>=0;u-=1)r[u]&&!s&&(o+=1,(l+=r[u].swiperSlideSize)>a&&(s=!0))}else for(var p=i+1;p<r.length;p+=1)n[p]-n[i]<a&&(o+=1);return o},a.update=function(){var e=this;if(e&&!e.destroyed){var t=e.snapGrid,r=e.params;r.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode?(n(),e.params.autoHeight&&e.updateAutoHeight()):(("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0))||n(),r.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}function n(){var t=e.rtlTranslate?-1*e.translate:e.translate,r=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(r),e.updateActiveIndex(),e.updateSlidesClasses()}},a.changeDirection=function(e,t){void 0===t&&(t=!0);var r=this,n=r.params.direction;return e||(e="horizontal"===n?"vertical":"horizontal"),e===n||"horizontal"!==e&&"vertical"!==e||(r.$el.removeClass(""+r.params.containerModifierClass+n).addClass(""+r.params.containerModifierClass+e),r.emitContainerClasses(),r.params.direction=e,r.slides.each((function(t){"vertical"===e?t.style.width="":t.style.height=""})),r.emit("changeDirection"),t&&r.update()),r},a.mount=function(e){var t=this;if(t.mounted)return!0;var r=vo(e||t.params.el);if(!(e=r[0]))return!1;e.swiper=t;var n=function(){return"."+(t.params.wrapperClass||"").trim().split(" ").join(".")},a=function(){if(e&&e.shadowRoot&&e.shadowRoot.querySelector){var t=vo(e.shadowRoot.querySelector(n()));return t.children=function(e){return r.children(e)},t}return r.children(n())}();if(0===a.length&&t.params.createElements){var i=o().createElement("div");a=vo(i),i.className=t.params.wrapperClass,r.append(i),r.children("."+t.params.slideClass).each((function(e){a.append(e)}))}return Eo(t,{$el:r,el:e,$wrapperEl:a,wrapperEl:a[0],mounted:!0,rtl:"rtl"===e.dir.toLowerCase()||"rtl"===r.css("direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===e.dir.toLowerCase()||"rtl"===r.css("direction")),wrongRTL:"-webkit-box"===a.css("display")}),!0},a.init=function(e){var t=this;return t.initialized||!1===t.mount(e)||(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.params.loop&&t.loopCreate(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.preloadImages&&t.preloadImages(),t.params.loop?t.slideTo(t.params.initialSlide+t.loopedSlides,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.attachEvents(),t.initialized=!0,t.emit("init"),t.emit("afterInit")),t},a.destroy=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var r,n=this,a=n.params,i=n.$el,o=n.$wrapperEl,s=n.slides;return void 0===n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),a.loop&&n.loopDestroy(),t&&(n.removeClasses(),i.removeAttr("style"),o.removeAttr("style"),s&&s.length&&s.removeClass([a.slideVisibleClass,a.slideActiveClass,a.slideNextClass,a.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),n.emit("destroy"),Object.keys(n.eventsListeners).forEach((function(e){n.off(e)})),!1!==e&&(n.$el[0].swiper=null,r=n,Object.keys(r).forEach((function(e){try{r[e]=null}catch(e){}try{delete r[e]}catch(e){}}))),n.destroyed=!0),null},e.extendDefaults=function(e){Eo(Ho,e)},e.installModule=function(t){e.prototype.modules||(e.prototype.modules={});var r=t.name||Object.keys(e.prototype.modules).length+"_"+bo();e.prototype.modules[r]=t},e.use=function(t){return Array.isArray(t)?(t.forEach((function(t){return e.installModule(t)})),e):(e.installModule(t),e)},t=e,n=[{key:"extendedDefaults",get:function(){return Ho}},{key:"defaults",get:function(){return jo}}],(r=null)&&Uo(t.prototype,r),n&&Uo(t,n),e}();Object.keys(qo).forEach((function(e){Object.keys(qo[e]).forEach((function(t){Go.prototype[t]=qo[e][t]}))})),Go.use([Io,zo]);var Wo=Go;function Xo(){return(Xo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Zo={update:function(e){var t=this,r=t.params,n=r.slidesPerView,a=r.slidesPerGroup,i=r.centeredSlides,o=t.params.virtual,s=o.addSlidesBefore,l=o.addSlidesAfter,c=t.virtual,u=c.from,p=c.to,d=c.slides,h=c.slidesGrid,f=c.renderSlide,m=c.offset;t.updateActiveIndex();var g,v,y,b=t.activeIndex||0;g=t.rtlTranslate?"right":t.isHorizontal()?"left":"top",i?(v=Math.floor(n/2)+a+l,y=Math.floor(n/2)+a+s):(v=n+(a-1)+l,y=a+s);var _=Math.max((b||0)-y,0),x=Math.min((b||0)+v,d.length-1),w=(t.slidesGrid[_]||0)-(t.slidesGrid[0]||0);function E(){t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.lazy&&t.params.lazy.enabled&&t.lazy.load()}if(Eo(t.virtual,{from:_,to:x,offset:w,slidesGrid:t.slidesGrid}),u===_&&p===x&&!e)return t.slidesGrid!==h&&w!==m&&t.slides.css(g,w+"px"),void t.updateProgress();if(t.params.virtual.renderExternal)return t.params.virtual.renderExternal.call(t,{offset:w,from:_,to:x,slides:function(){for(var e=[],t=_;t<=x;t+=1)e.push(d[t]);return e}()}),void(t.params.virtual.renderExternalUpdate&&E());var C=[],k=[];if(e)t.$wrapperEl.find("."+t.params.slideClass).remove();else for(var T=u;T<=p;T+=1)(T<_||T>x)&&t.$wrapperEl.find("."+t.params.slideClass+'[data-swiper-slide-index="'+T+'"]').remove();for(var S=0;S<d.length;S+=1)S>=_&&S<=x&&(void 0===p||e?k.push(S):(S>p&&k.push(S),S<u&&C.push(S)));k.forEach((function(e){t.$wrapperEl.append(f(d[e],e))})),C.sort((function(e,t){return t-e})).forEach((function(e){t.$wrapperEl.prepend(f(d[e],e))})),t.$wrapperEl.children(".swiper-slide").css(g,w+"px"),E()},renderSlide:function(e,t){var r=this,n=r.params.virtual;if(n.cache&&r.virtual.cache[t])return r.virtual.cache[t];var a=n.renderSlide?vo(n.renderSlide.call(r,e,t)):vo('<div class="'+r.params.slideClass+'" data-swiper-slide-index="'+t+'">'+e+"</div>");return a.attr("data-swiper-slide-index")||a.attr("data-swiper-slide-index",t),n.cache&&(r.virtual.cache[t]=a),a},appendSlide:function(e){var t=this;if("object"==typeof e&&"length"in e)for(var r=0;r<e.length;r+=1)e[r]&&t.virtual.slides.push(e[r]);else t.virtual.slides.push(e);t.virtual.update(!0)},prependSlide:function(e){var t=this,r=t.activeIndex,n=r+1,a=1;if(Array.isArray(e)){for(var i=0;i<e.length;i+=1)e[i]&&t.virtual.slides.unshift(e[i]);n=r+e.length,a=e.length}else t.virtual.slides.unshift(e);if(t.params.virtual.cache){var o=t.virtual.cache,s={};Object.keys(o).forEach((function(e){var t=o[e],r=t.attr("data-swiper-slide-index");r&&t.attr("data-swiper-slide-index",parseInt(r,10)+1),s[parseInt(e,10)+a]=t})),t.virtual.cache=s}t.virtual.update(!0),t.slideTo(n,0)},removeSlide:function(e){var t=this;if(null!=e){var r=t.activeIndex;if(Array.isArray(e))for(var n=e.length-1;n>=0;n-=1)t.virtual.slides.splice(e[n],1),t.params.virtual.cache&&delete t.virtual.cache[e[n]],e[n]<r&&(r-=1),r=Math.max(r,0);else t.virtual.slides.splice(e,1),t.params.virtual.cache&&delete t.virtual.cache[e],e<r&&(r-=1),r=Math.max(r,0);t.virtual.update(!0),t.slideTo(r,0)}},removeAllSlides:function(){var e=this;e.virtual.slides=[],e.params.virtual.cache&&(e.virtual.cache={}),e.virtual.update(!0),e.slideTo(0,0)}},Yo={name:"virtual",params:{virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}},create:function(){Co(this,{virtual:Xo({},Zo,{slides:this.params.virtual.slides,cache:{}})})},on:{beforeInit:function(e){if(e.params.virtual.enabled){e.classNames.push(e.params.containerModifierClass+"virtual");var t={watchSlidesProgress:!0};Eo(e.params,t),Eo(e.originalParams,t),e.params.initialSlide||e.virtual.update()}},setTranslate:function(e){e.params.virtual.enabled&&e.virtual.update()}}};function Ko(){return(Ko=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Qo={handle:function(e){var t=this;if(t.enabled){var r=l(),n=o(),a=t.rtlTranslate,i=e;i.originalEvent&&(i=i.originalEvent);var s=i.keyCode||i.charCode,c=t.params.keyboard.pageUpDown,u=c&&33===s,p=c&&34===s,d=37===s,h=39===s,f=38===s,m=40===s;if(!t.allowSlideNext&&(t.isHorizontal()&&h||t.isVertical()&&m||p))return!1;if(!t.allowSlidePrev&&(t.isHorizontal()&&d||t.isVertical()&&f||u))return!1;if(!(i.shiftKey||i.altKey||i.ctrlKey||i.metaKey||n.activeElement&&n.activeElement.nodeName&&("input"===n.activeElement.nodeName.toLowerCase()||"textarea"===n.activeElement.nodeName.toLowerCase()))){if(t.params.keyboard.onlyInViewport&&(u||p||d||h||f||m)){var g=!1;if(t.$el.parents("."+t.params.slideClass).length>0&&0===t.$el.parents("."+t.params.slideActiveClass).length)return;var v=t.$el,y=v[0].clientWidth,b=v[0].clientHeight,_=r.innerWidth,x=r.innerHeight,w=t.$el.offset();a&&(w.left-=t.$el[0].scrollLeft);for(var E=[[w.left,w.top],[w.left+y,w.top],[w.left,w.top+b],[w.left+y,w.top+b]],C=0;C<E.length;C+=1){var k=E[C];if(k[0]>=0&&k[0]<=_&&k[1]>=0&&k[1]<=x){if(0===k[0]&&0===k[1])continue;g=!0}}if(!g)return}t.isHorizontal()?((u||p||d||h)&&(i.preventDefault?i.preventDefault():i.returnValue=!1),((p||h)&&!a||(u||d)&&a)&&t.slideNext(),((u||d)&&!a||(p||h)&&a)&&t.slidePrev()):((u||p||f||m)&&(i.preventDefault?i.preventDefault():i.returnValue=!1),(p||m)&&t.slideNext(),(u||f)&&t.slidePrev()),t.emit("keyPress",s)}}},enable:function(){var e=this,t=o();e.keyboard.enabled||(vo(t).on("keydown",e.keyboard.handle),e.keyboard.enabled=!0)},disable:function(){var e=this,t=o();e.keyboard.enabled&&(vo(t).off("keydown",e.keyboard.handle),e.keyboard.enabled=!1)}},Jo={name:"keyboard",params:{keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}},create:function(){Co(this,{keyboard:Ko({enabled:!1},Qo)})},on:{init:function(e){e.params.keyboard.enabled&&e.keyboard.enable()},destroy:function(e){e.keyboard.enabled&&e.keyboard.disable()}}};var es={lastScrollTime:bo(),lastEventBeforeSnap:void 0,recentWheelEvents:[],event:function(){return l().navigator.userAgent.indexOf("firefox")>-1?"DOMMouseScroll":function(){var e=o(),t="onwheel",r=t in e;if(!r){var n=e.createElement("div");n.setAttribute(t,"return;"),r="function"==typeof n.onwheel}return!r&&e.implementation&&e.implementation.hasFeature&&!0!==e.implementation.hasFeature("","")&&(r=e.implementation.hasFeature("Events.wheel","3.0")),r}()?"wheel":"mousewheel"},normalize:function(e){var t=0,r=0,n=0,a=0;return"detail"in e&&(r=e.detail),"wheelDelta"in e&&(r=-e.wheelDelta/120),"wheelDeltaY"in e&&(r=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=r,r=0),n=10*t,a=10*r,"deltaY"in e&&(a=e.deltaY),"deltaX"in e&&(n=e.deltaX),e.shiftKey&&!n&&(n=a,a=0),(n||a)&&e.deltaMode&&(1===e.deltaMode?(n*=40,a*=40):(n*=800,a*=800)),n&&!t&&(t=n<1?-1:1),a&&!r&&(r=a<1?-1:1),{spinX:t,spinY:r,pixelX:n,pixelY:a}},handleMouseEnter:function(){this.enabled&&(this.mouseEntered=!0)},handleMouseLeave:function(){this.enabled&&(this.mouseEntered=!1)},handle:function(e){var t=e,r=this;if(r.enabled){var n=r.params.mousewheel;r.params.cssMode&&t.preventDefault();var a=r.$el;if("container"!==r.params.mousewheel.eventsTarget&&(a=vo(r.params.mousewheel.eventsTarget)),!r.mouseEntered&&!a[0].contains(t.target)&&!n.releaseOnEdges)return!0;t.originalEvent&&(t=t.originalEvent);var i=0,o=r.rtlTranslate?-1:1,s=es.normalize(t);if(n.forceToAxis)if(r.isHorizontal()){if(!(Math.abs(s.pixelX)>Math.abs(s.pixelY)))return!0;i=-s.pixelX*o}else{if(!(Math.abs(s.pixelY)>Math.abs(s.pixelX)))return!0;i=-s.pixelY}else i=Math.abs(s.pixelX)>Math.abs(s.pixelY)?-s.pixelX*o:-s.pixelY;if(0===i)return!0;n.invert&&(i=-i);var l=r.getTranslate()+i*n.sensitivity;if(l>=r.minTranslate()&&(l=r.minTranslate()),l<=r.maxTranslate()&&(l=r.maxTranslate()),(!!r.params.loop||!(l===r.minTranslate()||l===r.maxTranslate()))&&r.params.nested&&t.stopPropagation(),r.params.freeMode){var c={time:bo(),delta:Math.abs(i),direction:Math.sign(i)},u=r.mousewheel.lastEventBeforeSnap,p=u&&c.time<u.time+500&&c.delta<=u.delta&&c.direction===u.direction;if(!p){r.mousewheel.lastEventBeforeSnap=void 0,r.params.loop&&r.loopFix();var d=r.getTranslate()+i*n.sensitivity,h=r.isBeginning,f=r.isEnd;if(d>=r.minTranslate()&&(d=r.minTranslate()),d<=r.maxTranslate()&&(d=r.maxTranslate()),r.setTransition(0),r.setTranslate(d),r.updateProgress(),r.updateActiveIndex(),r.updateSlidesClasses(),(!h&&r.isBeginning||!f&&r.isEnd)&&r.updateSlidesClasses(),r.params.freeModeSticky){clearTimeout(r.mousewheel.timeout),r.mousewheel.timeout=void 0;var m=r.mousewheel.recentWheelEvents;m.length>=15&&m.shift();var g=m.length?m[m.length-1]:void 0,v=m[0];if(m.push(c),g&&(c.delta>g.delta||c.direction!==g.direction))m.splice(0);else if(m.length>=15&&c.time-v.time<500&&v.delta-c.delta>=1&&c.delta<=6){var y=i>0?.8:.2;r.mousewheel.lastEventBeforeSnap=c,m.splice(0),r.mousewheel.timeout=yo((function(){r.slideToClosest(r.params.speed,!0,void 0,y)}),0)}r.mousewheel.timeout||(r.mousewheel.timeout=yo((function(){r.mousewheel.lastEventBeforeSnap=c,m.splice(0),r.slideToClosest(r.params.speed,!0,void 0,.5)}),500))}if(p||r.emit("scroll",t),r.params.autoplay&&r.params.autoplayDisableOnInteraction&&r.autoplay.stop(),d===r.minTranslate()||d===r.maxTranslate())return!0}}else{var b={time:bo(),delta:Math.abs(i),direction:Math.sign(i),raw:e},_=r.mousewheel.recentWheelEvents;_.length>=2&&_.shift();var x=_.length?_[_.length-1]:void 0;if(_.push(b),x?(b.direction!==x.direction||b.delta>x.delta||b.time>x.time+150)&&r.mousewheel.animateSlider(b):r.mousewheel.animateSlider(b),r.mousewheel.releaseScroll(b))return!0}return t.preventDefault?t.preventDefault():t.returnValue=!1,!1}},animateSlider:function(e){var t=this,r=l();return!(this.params.mousewheel.thresholdDelta&&e.delta<this.params.mousewheel.thresholdDelta)&&(!(this.params.mousewheel.thresholdTime&&bo()-t.mousewheel.lastScrollTime<this.params.mousewheel.thresholdTime)&&(e.delta>=6&&bo()-t.mousewheel.lastScrollTime<60||(e.direction<0?t.isEnd&&!t.params.loop||t.animating||(t.slideNext(),t.emit("scroll",e.raw)):t.isBeginning&&!t.params.loop||t.animating||(t.slidePrev(),t.emit("scroll",e.raw)),t.mousewheel.lastScrollTime=(new r.Date).getTime(),!1)))},releaseScroll:function(e){var t=this,r=t.params.mousewheel;if(e.direction<0){if(t.isEnd&&!t.params.loop&&r.releaseOnEdges)return!0}else if(t.isBeginning&&!t.params.loop&&r.releaseOnEdges)return!0;return!1},enable:function(){var e=this,t=es.event();if(e.params.cssMode)return e.wrapperEl.removeEventListener(t,e.mousewheel.handle),!0;if(!t)return!1;if(e.mousewheel.enabled)return!1;var r=e.$el;return"container"!==e.params.mousewheel.eventsTarget&&(r=vo(e.params.mousewheel.eventsTarget)),r.on("mouseenter",e.mousewheel.handleMouseEnter),r.on("mouseleave",e.mousewheel.handleMouseLeave),r.on(t,e.mousewheel.handle),e.mousewheel.enabled=!0,!0},disable:function(){var e=this,t=es.event();if(e.params.cssMode)return e.wrapperEl.addEventListener(t,e.mousewheel.handle),!0;if(!t)return!1;if(!e.mousewheel.enabled)return!1;var r=e.$el;return"container"!==e.params.mousewheel.eventsTarget&&(r=vo(e.params.mousewheel.eventsTarget)),r.off(t,e.mousewheel.handle),e.mousewheel.enabled=!1,!0}};function ts(){return(ts=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var rs={toggleEl:function(e,t){e[t?"addClass":"removeClass"](this.params.navigation.disabledClass),e[0]&&"BUTTON"===e[0].tagName&&(e[0].disabled=t)},update:function(){var e=this,t=e.params.navigation,r=e.navigation.toggleEl;if(!e.params.loop){var n=e.navigation,a=n.$nextEl,i=n.$prevEl;i&&i.length>0&&(e.isBeginning?r(i,!0):r(i,!1),e.params.watchOverflow&&e.enabled&&i[e.isLocked?"addClass":"removeClass"](t.lockClass)),a&&a.length>0&&(e.isEnd?r(a,!0):r(a,!1),e.params.watchOverflow&&e.enabled&&a[e.isLocked?"addClass":"removeClass"](t.lockClass))}},onPrevClick:function(e){var t=this;e.preventDefault(),t.isBeginning&&!t.params.loop||t.slidePrev()},onNextClick:function(e){var t=this;e.preventDefault(),t.isEnd&&!t.params.loop||t.slideNext()},init:function(){var e,t,r=this,n=r.params.navigation;(r.params.navigation=To(r.$el,r.params.navigation,r.params.createElements,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),n.nextEl||n.prevEl)&&(n.nextEl&&(e=vo(n.nextEl),r.params.uniqueNavElements&&"string"==typeof n.nextEl&&e.length>1&&1===r.$el.find(n.nextEl).length&&(e=r.$el.find(n.nextEl))),n.prevEl&&(t=vo(n.prevEl),r.params.uniqueNavElements&&"string"==typeof n.prevEl&&t.length>1&&1===r.$el.find(n.prevEl).length&&(t=r.$el.find(n.prevEl))),e&&e.length>0&&e.on("click",r.navigation.onNextClick),t&&t.length>0&&t.on("click",r.navigation.onPrevClick),Eo(r.navigation,{$nextEl:e,nextEl:e&&e[0],$prevEl:t,prevEl:t&&t[0]}),r.enabled||(e&&e.addClass(n.lockClass),t&&t.addClass(n.lockClass)))},destroy:function(){var e=this,t=e.navigation,r=t.$nextEl,n=t.$prevEl;r&&r.length&&(r.off("click",e.navigation.onNextClick),r.removeClass(e.params.navigation.disabledClass)),n&&n.length&&(n.off("click",e.navigation.onPrevClick),n.removeClass(e.params.navigation.disabledClass))}};function ns(){return(ns=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var as={update:function(){var e=this,t=e.rtl,r=e.params.pagination;if(r.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var n,a=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,i=e.pagination.$el,o=e.params.loop?Math.ceil((a-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?((n=Math.ceil((e.activeIndex-e.loopedSlides)/e.params.slidesPerGroup))>a-1-2*e.loopedSlides&&(n-=a-2*e.loopedSlides),n>o-1&&(n-=o),n<0&&"bullets"!==e.params.paginationType&&(n=o+n)):n=void 0!==e.snapIndex?e.snapIndex:e.activeIndex||0,"bullets"===r.type&&e.pagination.bullets&&e.pagination.bullets.length>0){var s,l,c,u=e.pagination.bullets;if(r.dynamicBullets&&(e.pagination.bulletSize=u.eq(0)[e.isHorizontal()?"outerWidth":"outerHeight"](!0),i.css(e.isHorizontal()?"width":"height",e.pagination.bulletSize*(r.dynamicMainBullets+4)+"px"),r.dynamicMainBullets>1&&void 0!==e.previousIndex&&(e.pagination.dynamicBulletIndex+=n-e.previousIndex,e.pagination.dynamicBulletIndex>r.dynamicMainBullets-1?e.pagination.dynamicBulletIndex=r.dynamicMainBullets-1:e.pagination.dynamicBulletIndex<0&&(e.pagination.dynamicBulletIndex=0)),s=n-e.pagination.dynamicBulletIndex,c=((l=s+(Math.min(u.length,r.dynamicMainBullets)-1))+s)/2),u.removeClass(r.bulletActiveClass+" "+r.bulletActiveClass+"-next "+r.bulletActiveClass+"-next-next "+r.bulletActiveClass+"-prev "+r.bulletActiveClass+"-prev-prev "+r.bulletActiveClass+"-main"),i.length>1)u.each((function(e){var t=vo(e),a=t.index();a===n&&t.addClass(r.bulletActiveClass),r.dynamicBullets&&(a>=s&&a<=l&&t.addClass(r.bulletActiveClass+"-main"),a===s&&t.prev().addClass(r.bulletActiveClass+"-prev").prev().addClass(r.bulletActiveClass+"-prev-prev"),a===l&&t.next().addClass(r.bulletActiveClass+"-next").next().addClass(r.bulletActiveClass+"-next-next"))}));else{var p=u.eq(n),d=p.index();if(p.addClass(r.bulletActiveClass),r.dynamicBullets){for(var h=u.eq(s),f=u.eq(l),m=s;m<=l;m+=1)u.eq(m).addClass(r.bulletActiveClass+"-main");if(e.params.loop)if(d>=u.length-r.dynamicMainBullets){for(var g=r.dynamicMainBullets;g>=0;g-=1)u.eq(u.length-g).addClass(r.bulletActiveClass+"-main");u.eq(u.length-r.dynamicMainBullets-1).addClass(r.bulletActiveClass+"-prev")}else h.prev().addClass(r.bulletActiveClass+"-prev").prev().addClass(r.bulletActiveClass+"-prev-prev"),f.next().addClass(r.bulletActiveClass+"-next").next().addClass(r.bulletActiveClass+"-next-next");else h.prev().addClass(r.bulletActiveClass+"-prev").prev().addClass(r.bulletActiveClass+"-prev-prev"),f.next().addClass(r.bulletActiveClass+"-next").next().addClass(r.bulletActiveClass+"-next-next")}}if(r.dynamicBullets){var v=Math.min(u.length,r.dynamicMainBullets+4),y=(e.pagination.bulletSize*v-e.pagination.bulletSize)/2-c*e.pagination.bulletSize,b=t?"right":"left";u.css(e.isHorizontal()?b:"top",y+"px")}}if("fraction"===r.type&&(i.find(ko(r.currentClass)).text(r.formatFractionCurrent(n+1)),i.find(ko(r.totalClass)).text(r.formatFractionTotal(o))),"progressbar"===r.type){var _;_=r.progressbarOpposite?e.isHorizontal()?"vertical":"horizontal":e.isHorizontal()?"horizontal":"vertical";var x=(n+1)/o,w=1,E=1;"horizontal"===_?w=x:E=x,i.find(ko(r.progressbarFillClass)).transform("translate3d(0,0,0) scaleX("+w+") scaleY("+E+")").transition(e.params.speed)}"custom"===r.type&&r.renderCustom?(i.html(r.renderCustom(e,n+1,o)),e.emit("paginationRender",i[0])):e.emit("paginationUpdate",i[0]),e.params.watchOverflow&&e.enabled&&i[e.isLocked?"addClass":"removeClass"](r.lockClass)}},render:function(){var e=this,t=e.params.pagination;if(t.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var r=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,n=e.pagination.$el,a="";if("bullets"===t.type){var i=e.params.loop?Math.ceil((r-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&!e.params.loop&&i>r&&(i=r);for(var o=0;o<i;o+=1)t.renderBullet?a+=t.renderBullet.call(e,o,t.bulletClass):a+="<"+t.bulletElement+' class="'+t.bulletClass+'"></'+t.bulletElement+">";n.html(a),e.pagination.bullets=n.find(ko(t.bulletClass))}"fraction"===t.type&&(a=t.renderFraction?t.renderFraction.call(e,t.currentClass,t.totalClass):'<span class="'+t.currentClass+'"></span> / <span class="'+t.totalClass+'"></span>',n.html(a)),"progressbar"===t.type&&(a=t.renderProgressbar?t.renderProgressbar.call(e,t.progressbarFillClass):'<span class="'+t.progressbarFillClass+'"></span>',n.html(a)),"custom"!==t.type&&e.emit("paginationRender",e.pagination.$el[0])}},init:function(){var e=this;e.params.pagination=To(e.$el,e.params.pagination,e.params.createElements,{el:"swiper-pagination"});var t=e.params.pagination;if(t.el){var r=vo(t.el);0!==r.length&&(e.params.uniqueNavElements&&"string"==typeof t.el&&r.length>1&&(r=e.$el.find(t.el)),"bullets"===t.type&&t.clickable&&r.addClass(t.clickableClass),r.addClass(t.modifierClass+t.type),"bullets"===t.type&&t.dynamicBullets&&(r.addClass(""+t.modifierClass+t.type+"-dynamic"),e.pagination.dynamicBulletIndex=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),"progressbar"===t.type&&t.progressbarOpposite&&r.addClass(t.progressbarOppositeClass),t.clickable&&r.on("click",ko(t.bulletClass),(function(t){t.preventDefault();var r=vo(this).index()*e.params.slidesPerGroup;e.params.loop&&(r+=e.loopedSlides),e.slideTo(r)})),Eo(e.pagination,{$el:r,el:r[0]}),e.enabled||r.addClass(t.lockClass))}},destroy:function(){var e=this,t=e.params.pagination;if(t.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var r=e.pagination.$el;r.removeClass(t.hiddenClass),r.removeClass(t.modifierClass+t.type),e.pagination.bullets&&e.pagination.bullets.removeClass(t.bulletActiveClass),t.clickable&&r.off("click",ko(t.bulletClass))}}};function is(){return(is=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var os={setTranslate:function(){var e=this;if(e.params.scrollbar.el&&e.scrollbar.el){var t=e.scrollbar,r=e.rtlTranslate,n=e.progress,a=t.dragSize,i=t.trackSize,o=t.$dragEl,s=t.$el,l=e.params.scrollbar,c=a,u=(i-a)*n;r?(u=-u)>0?(c=a-u,u=0):-u+a>i&&(c=i+u):u<0?(c=a+u,u=0):u+a>i&&(c=i-u),e.isHorizontal()?(o.transform("translate3d("+u+"px, 0, 0)"),o[0].style.width=c+"px"):(o.transform("translate3d(0px, "+u+"px, 0)"),o[0].style.height=c+"px"),l.hide&&(clearTimeout(e.scrollbar.timeout),s[0].style.opacity=1,e.scrollbar.timeout=setTimeout((function(){s[0].style.opacity=0,s.transition(400)}),1e3))}},setTransition:function(e){var t=this;t.params.scrollbar.el&&t.scrollbar.el&&t.scrollbar.$dragEl.transition(e)},updateSize:function(){var e=this;if(e.params.scrollbar.el&&e.scrollbar.el){var t=e.scrollbar,r=t.$dragEl,n=t.$el;r[0].style.width="",r[0].style.height="";var a,i=e.isHorizontal()?n[0].offsetWidth:n[0].offsetHeight,o=e.size/e.virtualSize,s=o*(i/e.size);a="auto"===e.params.scrollbar.dragSize?i*o:parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?r[0].style.width=a+"px":r[0].style.height=a+"px",n[0].style.display=o>=1?"none":"",e.params.scrollbar.hide&&(n[0].style.opacity=0),Eo(t,{trackSize:i,divider:o,moveDivider:s,dragSize:a}),e.params.watchOverflow&&e.enabled&&t.$el[e.isLocked?"addClass":"removeClass"](e.params.scrollbar.lockClass)}},getPointerPosition:function(e){return this.isHorizontal()?"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientX:e.clientX:"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientY:e.clientY},setDragPosition:function(e){var t,r=this,n=r.scrollbar,a=r.rtlTranslate,i=n.$el,o=n.dragSize,s=n.trackSize,l=n.dragStartPos;t=(n.getPointerPosition(e)-i.offset()[r.isHorizontal()?"left":"top"]-(null!==l?l:o/2))/(s-o),t=Math.max(Math.min(t,1),0),a&&(t=1-t);var c=r.minTranslate()+(r.maxTranslate()-r.minTranslate())*t;r.updateProgress(c),r.setTranslate(c),r.updateActiveIndex(),r.updateSlidesClasses()},onDragStart:function(e){var t=this,r=t.params.scrollbar,n=t.scrollbar,a=t.$wrapperEl,i=n.$el,o=n.$dragEl;t.scrollbar.isTouched=!0,t.scrollbar.dragStartPos=e.target===o[0]||e.target===o?n.getPointerPosition(e)-e.target.getBoundingClientRect()[t.isHorizontal()?"left":"top"]:null,e.preventDefault(),e.stopPropagation(),a.transition(100),o.transition(100),n.setDragPosition(e),clearTimeout(t.scrollbar.dragTimeout),i.transition(0),r.hide&&i.css("opacity",1),t.params.cssMode&&t.$wrapperEl.css("scroll-snap-type","none"),t.emit("scrollbarDragStart",e)},onDragMove:function(e){var t=this,r=t.scrollbar,n=t.$wrapperEl,a=r.$el,i=r.$dragEl;t.scrollbar.isTouched&&(e.preventDefault?e.preventDefault():e.returnValue=!1,r.setDragPosition(e),n.transition(0),a.transition(0),i.transition(0),t.emit("scrollbarDragMove",e))},onDragEnd:function(e){var t=this,r=t.params.scrollbar,n=t.scrollbar,a=t.$wrapperEl,i=n.$el;t.scrollbar.isTouched&&(t.scrollbar.isTouched=!1,t.params.cssMode&&(t.$wrapperEl.css("scroll-snap-type",""),a.transition("")),r.hide&&(clearTimeout(t.scrollbar.dragTimeout),t.scrollbar.dragTimeout=yo((function(){i.css("opacity",0),i.transition(400)}),1e3)),t.emit("scrollbarDragEnd",e),r.snapOnRelease&&t.slideToClosest())},enableDraggable:function(){var e=this;if(e.params.scrollbar.el){var t=o(),r=e.scrollbar,n=e.touchEventsTouch,a=e.touchEventsDesktop,i=e.params,s=e.support,l=r.$el[0],c=!(!s.passiveListener||!i.passiveListeners)&&{passive:!1,capture:!1},u=!(!s.passiveListener||!i.passiveListeners)&&{passive:!0,capture:!1};l&&(s.touch?(l.addEventListener(n.start,e.scrollbar.onDragStart,c),l.addEventListener(n.move,e.scrollbar.onDragMove,c),l.addEventListener(n.end,e.scrollbar.onDragEnd,u)):(l.addEventListener(a.start,e.scrollbar.onDragStart,c),t.addEventListener(a.move,e.scrollbar.onDragMove,c),t.addEventListener(a.end,e.scrollbar.onDragEnd,u)))}},disableDraggable:function(){var e=this;if(e.params.scrollbar.el){var t=o(),r=e.scrollbar,n=e.touchEventsTouch,a=e.touchEventsDesktop,i=e.params,s=e.support,l=r.$el[0],c=!(!s.passiveListener||!i.passiveListeners)&&{passive:!1,capture:!1},u=!(!s.passiveListener||!i.passiveListeners)&&{passive:!0,capture:!1};l&&(s.touch?(l.removeEventListener(n.start,e.scrollbar.onDragStart,c),l.removeEventListener(n.move,e.scrollbar.onDragMove,c),l.removeEventListener(n.end,e.scrollbar.onDragEnd,u)):(l.removeEventListener(a.start,e.scrollbar.onDragStart,c),t.removeEventListener(a.move,e.scrollbar.onDragMove,c),t.removeEventListener(a.end,e.scrollbar.onDragEnd,u)))}},init:function(){var e=this,t=e.scrollbar,r=e.$el;e.params.scrollbar=To(r,e.params.scrollbar,e.params.createElements,{el:"swiper-scrollbar"});var n=e.params.scrollbar;if(n.el){var a=vo(n.el);e.params.uniqueNavElements&&"string"==typeof n.el&&a.length>1&&1===r.find(n.el).length&&(a=r.find(n.el));var i=a.find("."+e.params.scrollbar.dragClass);0===i.length&&(i=vo('<div class="'+e.params.scrollbar.dragClass+'"></div>'),a.append(i)),Eo(t,{$el:a,el:a[0],$dragEl:i,dragEl:i[0]}),n.draggable&&t.enableDraggable(),a&&a[e.enabled?"removeClass":"addClass"](e.params.scrollbar.lockClass)}},destroy:function(){this.scrollbar.disableDraggable()}};function ss(){return(ss=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var ls={setTransform:function(e,t){var r=this.rtl,n=vo(e),a=r?-1:1,i=n.attr("data-swiper-parallax")||"0",o=n.attr("data-swiper-parallax-x"),s=n.attr("data-swiper-parallax-y"),l=n.attr("data-swiper-parallax-scale"),c=n.attr("data-swiper-parallax-opacity");if(o||s?(o=o||"0",s=s||"0"):this.isHorizontal()?(o=i,s="0"):(s=i,o="0"),o=o.indexOf("%")>=0?parseInt(o,10)*t*a+"%":o*t*a+"px",s=s.indexOf("%")>=0?parseInt(s,10)*t+"%":s*t+"px",null!=c){var u=c-(c-1)*(1-Math.abs(t));n[0].style.opacity=u}if(null==l)n.transform("translate3d("+o+", "+s+", 0px)");else{var p=l-(l-1)*(1-Math.abs(t));n.transform("translate3d("+o+", "+s+", 0px) scale("+p+")")}},setTranslate:function(){var e=this,t=e.$el,r=e.slides,n=e.progress,a=e.snapGrid;t.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(t){e.parallax.setTransform(t,n)})),r.each((function(t,r){var i=t.progress;e.params.slidesPerGroup>1&&"auto"!==e.params.slidesPerView&&(i+=Math.ceil(r/2)-n*(a.length-1)),i=Math.min(Math.max(i,-1),1),vo(t).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(t){e.parallax.setTransform(t,i)}))}))},setTransition:function(e){void 0===e&&(e=this.params.speed);this.$el.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(t){var r=vo(t),n=parseInt(r.attr("data-swiper-parallax-duration"),10)||e;0===e&&(n=0),r.transition(n)}))}};function cs(){return(cs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var us={getDistanceBetweenTouches:function(e){if(e.targetTouches.length<2)return 1;var t=e.targetTouches[0].pageX,r=e.targetTouches[0].pageY,n=e.targetTouches[1].pageX,a=e.targetTouches[1].pageY;return Math.sqrt(Math.pow(n-t,2)+Math.pow(a-r,2))},onGestureStart:function(e){var t=this,r=t.support,n=t.params.zoom,a=t.zoom,i=a.gesture;if(a.fakeGestureTouched=!1,a.fakeGestureMoved=!1,!r.gestures){if("touchstart"!==e.type||"touchstart"===e.type&&e.targetTouches.length<2)return;a.fakeGestureTouched=!0,i.scaleStart=us.getDistanceBetweenTouches(e)}i.$slideEl&&i.$slideEl.length||(i.$slideEl=vo(e.target).closest("."+t.params.slideClass),0===i.$slideEl.length&&(i.$slideEl=t.slides.eq(t.activeIndex)),i.$imageEl=i.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),i.$imageWrapEl=i.$imageEl.parent("."+n.containerClass),i.maxRatio=i.$imageWrapEl.attr("data-swiper-zoom")||n.maxRatio,0!==i.$imageWrapEl.length)?(i.$imageEl&&i.$imageEl.transition(0),t.zoom.isScaling=!0):i.$imageEl=void 0},onGestureChange:function(e){var t=this,r=t.support,n=t.params.zoom,a=t.zoom,i=a.gesture;if(!r.gestures){if("touchmove"!==e.type||"touchmove"===e.type&&e.targetTouches.length<2)return;a.fakeGestureMoved=!0,i.scaleMove=us.getDistanceBetweenTouches(e)}i.$imageEl&&0!==i.$imageEl.length?(r.gestures?a.scale=e.scale*a.currentScale:a.scale=i.scaleMove/i.scaleStart*a.currentScale,a.scale>i.maxRatio&&(a.scale=i.maxRatio-1+Math.pow(a.scale-i.maxRatio+1,.5)),a.scale<n.minRatio&&(a.scale=n.minRatio+1-Math.pow(n.minRatio-a.scale+1,.5)),i.$imageEl.transform("translate3d(0,0,0) scale("+a.scale+")")):"gesturechange"===e.type&&a.onGestureStart(e)},onGestureEnd:function(e){var t=this,r=t.device,n=t.support,a=t.params.zoom,i=t.zoom,o=i.gesture;if(!n.gestures){if(!i.fakeGestureTouched||!i.fakeGestureMoved)return;if("touchend"!==e.type||"touchend"===e.type&&e.changedTouches.length<2&&!r.android)return;i.fakeGestureTouched=!1,i.fakeGestureMoved=!1}o.$imageEl&&0!==o.$imageEl.length&&(i.scale=Math.max(Math.min(i.scale,o.maxRatio),a.minRatio),o.$imageEl.transition(t.params.speed).transform("translate3d(0,0,0) scale("+i.scale+")"),i.currentScale=i.scale,i.isScaling=!1,1===i.scale&&(o.$slideEl=void 0))},onTouchStart:function(e){var t=this.device,r=this.zoom,n=r.gesture,a=r.image;n.$imageEl&&0!==n.$imageEl.length&&(a.isTouched||(t.android&&e.cancelable&&e.preventDefault(),a.isTouched=!0,a.touchesStart.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,a.touchesStart.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY))},onTouchMove:function(e){var t=this,r=t.zoom,n=r.gesture,a=r.image,i=r.velocity;if(n.$imageEl&&0!==n.$imageEl.length&&(t.allowClick=!1,a.isTouched&&n.$slideEl)){a.isMoved||(a.width=n.$imageEl[0].offsetWidth,a.height=n.$imageEl[0].offsetHeight,a.startX=_o(n.$imageWrapEl[0],"x")||0,a.startY=_o(n.$imageWrapEl[0],"y")||0,n.slideWidth=n.$slideEl[0].offsetWidth,n.slideHeight=n.$slideEl[0].offsetHeight,n.$imageWrapEl.transition(0));var o=a.width*r.scale,s=a.height*r.scale;if(!(o<n.slideWidth&&s<n.slideHeight)){if(a.minX=Math.min(n.slideWidth/2-o/2,0),a.maxX=-a.minX,a.minY=Math.min(n.slideHeight/2-s/2,0),a.maxY=-a.minY,a.touchesCurrent.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,a.touchesCurrent.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,!a.isMoved&&!r.isScaling){if(t.isHorizontal()&&(Math.floor(a.minX)===Math.floor(a.startX)&&a.touchesCurrent.x<a.touchesStart.x||Math.floor(a.maxX)===Math.floor(a.startX)&&a.touchesCurrent.x>a.touchesStart.x))return void(a.isTouched=!1);if(!t.isHorizontal()&&(Math.floor(a.minY)===Math.floor(a.startY)&&a.touchesCurrent.y<a.touchesStart.y||Math.floor(a.maxY)===Math.floor(a.startY)&&a.touchesCurrent.y>a.touchesStart.y))return void(a.isTouched=!1)}e.cancelable&&e.preventDefault(),e.stopPropagation(),a.isMoved=!0,a.currentX=a.touchesCurrent.x-a.touchesStart.x+a.startX,a.currentY=a.touchesCurrent.y-a.touchesStart.y+a.startY,a.currentX<a.minX&&(a.currentX=a.minX+1-Math.pow(a.minX-a.currentX+1,.8)),a.currentX>a.maxX&&(a.currentX=a.maxX-1+Math.pow(a.currentX-a.maxX+1,.8)),a.currentY<a.minY&&(a.currentY=a.minY+1-Math.pow(a.minY-a.currentY+1,.8)),a.currentY>a.maxY&&(a.currentY=a.maxY-1+Math.pow(a.currentY-a.maxY+1,.8)),i.prevPositionX||(i.prevPositionX=a.touchesCurrent.x),i.prevPositionY||(i.prevPositionY=a.touchesCurrent.y),i.prevTime||(i.prevTime=Date.now()),i.x=(a.touchesCurrent.x-i.prevPositionX)/(Date.now()-i.prevTime)/2,i.y=(a.touchesCurrent.y-i.prevPositionY)/(Date.now()-i.prevTime)/2,Math.abs(a.touchesCurrent.x-i.prevPositionX)<2&&(i.x=0),Math.abs(a.touchesCurrent.y-i.prevPositionY)<2&&(i.y=0),i.prevPositionX=a.touchesCurrent.x,i.prevPositionY=a.touchesCurrent.y,i.prevTime=Date.now(),n.$imageWrapEl.transform("translate3d("+a.currentX+"px, "+a.currentY+"px,0)")}}},onTouchEnd:function(){var e=this.zoom,t=e.gesture,r=e.image,n=e.velocity;if(t.$imageEl&&0!==t.$imageEl.length){if(!r.isTouched||!r.isMoved)return r.isTouched=!1,void(r.isMoved=!1);r.isTouched=!1,r.isMoved=!1;var a=300,i=300,o=n.x*a,s=r.currentX+o,l=n.y*i,c=r.currentY+l;0!==n.x&&(a=Math.abs((s-r.currentX)/n.x)),0!==n.y&&(i=Math.abs((c-r.currentY)/n.y));var u=Math.max(a,i);r.currentX=s,r.currentY=c;var p=r.width*e.scale,d=r.height*e.scale;r.minX=Math.min(t.slideWidth/2-p/2,0),r.maxX=-r.minX,r.minY=Math.min(t.slideHeight/2-d/2,0),r.maxY=-r.minY,r.currentX=Math.max(Math.min(r.currentX,r.maxX),r.minX),r.currentY=Math.max(Math.min(r.currentY,r.maxY),r.minY),t.$imageWrapEl.transition(u).transform("translate3d("+r.currentX+"px, "+r.currentY+"px,0)")}},onTransitionEnd:function(){var e=this,t=e.zoom,r=t.gesture;r.$slideEl&&e.previousIndex!==e.activeIndex&&(r.$imageEl&&r.$imageEl.transform("translate3d(0,0,0) scale(1)"),r.$imageWrapEl&&r.$imageWrapEl.transform("translate3d(0,0,0)"),t.scale=1,t.currentScale=1,r.$slideEl=void 0,r.$imageEl=void 0,r.$imageWrapEl=void 0)},toggle:function(e){var t=this.zoom;t.scale&&1!==t.scale?t.out():t.in(e)},in:function(e){var t,r,n,a,i,o,s,c,u,p,d,h,f,m,g,v,y=this,b=l(),_=y.zoom,x=y.params.zoom,w=_.gesture,E=_.image;(w.$slideEl||(e&&e.target&&(w.$slideEl=vo(e.target).closest("."+y.params.slideClass)),w.$slideEl||(y.params.virtual&&y.params.virtual.enabled&&y.virtual?w.$slideEl=y.$wrapperEl.children("."+y.params.slideActiveClass):w.$slideEl=y.slides.eq(y.activeIndex)),w.$imageEl=w.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),w.$imageWrapEl=w.$imageEl.parent("."+x.containerClass)),w.$imageEl&&0!==w.$imageEl.length&&w.$imageWrapEl&&0!==w.$imageWrapEl.length)&&(w.$slideEl.addClass(""+x.zoomedSlideClass),void 0===E.touchesStart.x&&e?(t="touchend"===e.type?e.changedTouches[0].pageX:e.pageX,r="touchend"===e.type?e.changedTouches[0].pageY:e.pageY):(t=E.touchesStart.x,r=E.touchesStart.y),_.scale=w.$imageWrapEl.attr("data-swiper-zoom")||x.maxRatio,_.currentScale=w.$imageWrapEl.attr("data-swiper-zoom")||x.maxRatio,e?(g=w.$slideEl[0].offsetWidth,v=w.$slideEl[0].offsetHeight,n=w.$slideEl.offset().left+b.scrollX+g/2-t,a=w.$slideEl.offset().top+b.scrollY+v/2-r,s=w.$imageEl[0].offsetWidth,c=w.$imageEl[0].offsetHeight,u=s*_.scale,p=c*_.scale,f=-(d=Math.min(g/2-u/2,0)),m=-(h=Math.min(v/2-p/2,0)),(i=n*_.scale)<d&&(i=d),i>f&&(i=f),(o=a*_.scale)<h&&(o=h),o>m&&(o=m)):(i=0,o=0),w.$imageWrapEl.transition(300).transform("translate3d("+i+"px, "+o+"px,0)"),w.$imageEl.transition(300).transform("translate3d(0,0,0) scale("+_.scale+")"))},out:function(){var e=this,t=e.zoom,r=e.params.zoom,n=t.gesture;n.$slideEl||(e.params.virtual&&e.params.virtual.enabled&&e.virtual?n.$slideEl=e.$wrapperEl.children("."+e.params.slideActiveClass):n.$slideEl=e.slides.eq(e.activeIndex),n.$imageEl=n.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),n.$imageWrapEl=n.$imageEl.parent("."+r.containerClass)),n.$imageEl&&0!==n.$imageEl.length&&n.$imageWrapEl&&0!==n.$imageWrapEl.length&&(t.scale=1,t.currentScale=1,n.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),n.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),n.$slideEl.removeClass(""+r.zoomedSlideClass),n.$slideEl=void 0)},toggleGestures:function(e){var t=this,r=t.zoom,n=r.slideSelector,a=r.passiveListener;t.$wrapperEl[e]("gesturestart",n,r.onGestureStart,a),t.$wrapperEl[e]("gesturechange",n,r.onGestureChange,a),t.$wrapperEl[e]("gestureend",n,r.onGestureEnd,a)},enableGestures:function(){this.zoom.gesturesEnabled||(this.zoom.gesturesEnabled=!0,this.zoom.toggleGestures("on"))},disableGestures:function(){this.zoom.gesturesEnabled&&(this.zoom.gesturesEnabled=!1,this.zoom.toggleGestures("off"))},enable:function(){var e=this,t=e.support,r=e.zoom;if(!r.enabled){r.enabled=!0;var n=!("touchstart"!==e.touchEvents.start||!t.passiveListener||!e.params.passiveListeners)&&{passive:!0,capture:!1},a=!t.passiveListener||{passive:!1,capture:!0},i="."+e.params.slideClass;e.zoom.passiveListener=n,e.zoom.slideSelector=i,t.gestures?(e.$wrapperEl.on(e.touchEvents.start,e.zoom.enableGestures,n),e.$wrapperEl.on(e.touchEvents.end,e.zoom.disableGestures,n)):"touchstart"===e.touchEvents.start&&(e.$wrapperEl.on(e.touchEvents.start,i,r.onGestureStart,n),e.$wrapperEl.on(e.touchEvents.move,i,r.onGestureChange,a),e.$wrapperEl.on(e.touchEvents.end,i,r.onGestureEnd,n),e.touchEvents.cancel&&e.$wrapperEl.on(e.touchEvents.cancel,i,r.onGestureEnd,n)),e.$wrapperEl.on(e.touchEvents.move,"."+e.params.zoom.containerClass,r.onTouchMove,a)}},disable:function(){var e=this,t=e.zoom;if(t.enabled){var r=e.support;e.zoom.enabled=!1;var n=!("touchstart"!==e.touchEvents.start||!r.passiveListener||!e.params.passiveListeners)&&{passive:!0,capture:!1},a=!r.passiveListener||{passive:!1,capture:!0},i="."+e.params.slideClass;r.gestures?(e.$wrapperEl.off(e.touchEvents.start,e.zoom.enableGestures,n),e.$wrapperEl.off(e.touchEvents.end,e.zoom.disableGestures,n)):"touchstart"===e.touchEvents.start&&(e.$wrapperEl.off(e.touchEvents.start,i,t.onGestureStart,n),e.$wrapperEl.off(e.touchEvents.move,i,t.onGestureChange,a),e.$wrapperEl.off(e.touchEvents.end,i,t.onGestureEnd,n),e.touchEvents.cancel&&e.$wrapperEl.off(e.touchEvents.cancel,i,t.onGestureEnd,n)),e.$wrapperEl.off(e.touchEvents.move,"."+e.params.zoom.containerClass,t.onTouchMove,a)}}};function ps(){return(ps=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var ds={loadInSlide:function(e,t){void 0===t&&(t=!0);var r=this,n=r.params.lazy;if(void 0!==e&&0!==r.slides.length){var a=r.virtual&&r.params.virtual.enabled?r.$wrapperEl.children("."+r.params.slideClass+'[data-swiper-slide-index="'+e+'"]'):r.slides.eq(e),i=a.find("."+n.elementClass+":not(."+n.loadedClass+"):not(."+n.loadingClass+")");!a.hasClass(n.elementClass)||a.hasClass(n.loadedClass)||a.hasClass(n.loadingClass)||i.push(a[0]),0!==i.length&&i.each((function(e){var i=vo(e);i.addClass(n.loadingClass);var o=i.attr("data-background"),s=i.attr("data-src"),l=i.attr("data-srcset"),c=i.attr("data-sizes"),u=i.parent("picture");r.loadImage(i[0],s||o,l,c,!1,(function(){if(null!=r&&r&&(!r||r.params)&&!r.destroyed){if(o?(i.css("background-image",'url("'+o+'")'),i.removeAttr("data-background")):(l&&(i.attr("srcset",l),i.removeAttr("data-srcset")),c&&(i.attr("sizes",c),i.removeAttr("data-sizes")),u.length&&u.children("source").each((function(e){var t=vo(e);t.attr("data-srcset")&&(t.attr("srcset",t.attr("data-srcset")),t.removeAttr("data-srcset"))})),s&&(i.attr("src",s),i.removeAttr("data-src"))),i.addClass(n.loadedClass).removeClass(n.loadingClass),a.find("."+n.preloaderClass).remove(),r.params.loop&&t){var e=a.attr("data-swiper-slide-index");if(a.hasClass(r.params.slideDuplicateClass)){var p=r.$wrapperEl.children('[data-swiper-slide-index="'+e+'"]:not(.'+r.params.slideDuplicateClass+")");r.lazy.loadInSlide(p.index(),!1)}else{var d=r.$wrapperEl.children("."+r.params.slideDuplicateClass+'[data-swiper-slide-index="'+e+'"]');r.lazy.loadInSlide(d.index(),!1)}}r.emit("lazyImageReady",a[0],i[0]),r.params.autoHeight&&r.updateAutoHeight()}})),r.emit("lazyImageLoad",a[0],i[0])}))}},load:function(){var e=this,t=e.$wrapperEl,r=e.params,n=e.slides,a=e.activeIndex,i=e.virtual&&r.virtual.enabled,o=r.lazy,s=r.slidesPerView;function l(e){if(i){if(t.children("."+r.slideClass+'[data-swiper-slide-index="'+e+'"]').length)return!0}else if(n[e])return!0;return!1}function c(e){return i?vo(e).attr("data-swiper-slide-index"):vo(e).index()}if("auto"===s&&(s=0),e.lazy.initialImageLoaded||(e.lazy.initialImageLoaded=!0),e.params.watchSlidesVisibility)t.children("."+r.slideVisibleClass).each((function(t){var r=i?vo(t).attr("data-swiper-slide-index"):vo(t).index();e.lazy.loadInSlide(r)}));else if(s>1)for(var u=a;u<a+s;u+=1)l(u)&&e.lazy.loadInSlide(u);else e.lazy.loadInSlide(a);if(o.loadPrevNext)if(s>1||o.loadPrevNextAmount&&o.loadPrevNextAmount>1){for(var p=o.loadPrevNextAmount,d=s,h=Math.min(a+d+Math.max(p,d),n.length),f=Math.max(a-Math.max(d,p),0),m=a+s;m<h;m+=1)l(m)&&e.lazy.loadInSlide(m);for(var g=f;g<a;g+=1)l(g)&&e.lazy.loadInSlide(g)}else{var v=t.children("."+r.slideNextClass);v.length>0&&e.lazy.loadInSlide(c(v));var y=t.children("."+r.slidePrevClass);y.length>0&&e.lazy.loadInSlide(c(y))}},checkInViewOnLoad:function(){var e=l(),t=this;if(t&&!t.destroyed){var r=t.params.lazy.scrollingElement?vo(t.params.lazy.scrollingElement):vo(e),n=r[0]===e,a=n?e.innerWidth:r[0].offsetWidth,i=n?e.innerHeight:r[0].offsetHeight,o=t.$el.offset(),s=!1;t.rtlTranslate&&(o.left-=t.$el[0].scrollLeft);for(var c=[[o.left,o.top],[o.left+t.width,o.top],[o.left,o.top+t.height],[o.left+t.width,o.top+t.height]],u=0;u<c.length;u+=1){var p=c[u];if(p[0]>=0&&p[0]<=a&&p[1]>=0&&p[1]<=i){if(0===p[0]&&0===p[1])continue;s=!0}}var d=!("touchstart"!==t.touchEvents.start||!t.support.passiveListener||!t.params.passiveListeners)&&{passive:!0,capture:!1};s?(t.lazy.load(),r.off("scroll",t.lazy.checkInViewOnLoad,d)):t.lazy.scrollHandlerAttached||(t.lazy.scrollHandlerAttached=!0,r.on("scroll",t.lazy.checkInViewOnLoad,d))}}};function hs(){return(hs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var fs={LinearSpline:function(e,t){var r,n,a,i,o,s=function(e,t){for(n=-1,r=e.length;r-n>1;)e[a=r+n>>1]<=t?n=a:r=a;return r};return this.x=e,this.y=t,this.lastIndex=e.length-1,this.interpolate=function(e){return e?(o=s(this.x,e),i=o-1,(e-this.x[i])*(this.y[o]-this.y[i])/(this.x[o]-this.x[i])+this.y[i]):0},this},getInterpolateFunction:function(e){var t=this;t.controller.spline||(t.controller.spline=t.params.loop?new fs.LinearSpline(t.slidesGrid,e.slidesGrid):new fs.LinearSpline(t.snapGrid,e.snapGrid))},setTranslate:function(e,t){var r,n,a=this,i=a.controller.control,o=a.constructor;function s(e){var t=a.rtlTranslate?-a.translate:a.translate;"slide"===a.params.controller.by&&(a.controller.getInterpolateFunction(e),n=-a.controller.spline.interpolate(-t)),n&&"container"!==a.params.controller.by||(r=(e.maxTranslate()-e.minTranslate())/(a.maxTranslate()-a.minTranslate()),n=(t-a.minTranslate())*r+e.minTranslate()),a.params.controller.inverse&&(n=e.maxTranslate()-n),e.updateProgress(n),e.setTranslate(n,a),e.updateActiveIndex(),e.updateSlidesClasses()}if(Array.isArray(i))for(var l=0;l<i.length;l+=1)i[l]!==t&&i[l]instanceof o&&s(i[l]);else i instanceof o&&t!==i&&s(i)},setTransition:function(e,t){var r,n=this,a=n.constructor,i=n.controller.control;function o(t){t.setTransition(e,n),0!==e&&(t.transitionStart(),t.params.autoHeight&&yo((function(){t.updateAutoHeight()})),t.$wrapperEl.transitionEnd((function(){i&&(t.params.loop&&"slide"===n.params.controller.by&&t.loopFix(),t.transitionEnd())})))}if(Array.isArray(i))for(r=0;r<i.length;r+=1)i[r]!==t&&i[r]instanceof a&&o(i[r]);else i instanceof a&&t!==i&&o(i)}};function ms(){return(ms=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var gs={getRandomNumber:function(e){void 0===e&&(e=16);return"x".repeat(e).replace(/x/g,(function(){return Math.round(16*Math.random()).toString(16)}))},makeElFocusable:function(e){return e.attr("tabIndex","0"),e},makeElNotFocusable:function(e){return e.attr("tabIndex","-1"),e},addElRole:function(e,t){return e.attr("role",t),e},addElRoleDescription:function(e,t){return e.attr("aria-roledescription",t),e},addElControls:function(e,t){return e.attr("aria-controls",t),e},addElLabel:function(e,t){return e.attr("aria-label",t),e},addElId:function(e,t){return e.attr("id",t),e},addElLive:function(e,t){return e.attr("aria-live",t),e},disableEl:function(e){return e.attr("aria-disabled",!0),e},enableEl:function(e){return e.attr("aria-disabled",!1),e},onEnterOrSpaceKey:function(e){if(13===e.keyCode||32===e.keyCode){var t=this,r=t.params.a11y,n=vo(e.target);t.navigation&&t.navigation.$nextEl&&n.is(t.navigation.$nextEl)&&(t.isEnd&&!t.params.loop||t.slideNext(),t.isEnd?t.a11y.notify(r.lastSlideMessage):t.a11y.notify(r.nextSlideMessage)),t.navigation&&t.navigation.$prevEl&&n.is(t.navigation.$prevEl)&&(t.isBeginning&&!t.params.loop||t.slidePrev(),t.isBeginning?t.a11y.notify(r.firstSlideMessage):t.a11y.notify(r.prevSlideMessage)),t.pagination&&n.is(ko(t.params.pagination.bulletClass))&&n[0].click()}},notify:function(e){var t=this.a11y.liveRegion;0!==t.length&&(t.html(""),t.html(e))},updateNavigation:function(){var e=this;if(!e.params.loop&&e.navigation){var t=e.navigation,r=t.$nextEl,n=t.$prevEl;n&&n.length>0&&(e.isBeginning?(e.a11y.disableEl(n),e.a11y.makeElNotFocusable(n)):(e.a11y.enableEl(n),e.a11y.makeElFocusable(n))),r&&r.length>0&&(e.isEnd?(e.a11y.disableEl(r),e.a11y.makeElNotFocusable(r)):(e.a11y.enableEl(r),e.a11y.makeElFocusable(r)))}},updatePagination:function(){var e=this,t=e.params.a11y;e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.bullets.each((function(r){var n=vo(r);e.a11y.makeElFocusable(n),e.params.pagination.renderBullet||(e.a11y.addElRole(n,"button"),e.a11y.addElLabel(n,t.paginationBulletMessage.replace(/\{\{index\}\}/,n.index()+1)))}))},init:function(){var e=this,t=e.params.a11y;e.$el.append(e.a11y.liveRegion);var r=e.$el;t.containerRoleDescriptionMessage&&e.a11y.addElRoleDescription(r,t.containerRoleDescriptionMessage),t.containerMessage&&e.a11y.addElLabel(r,t.containerMessage);var n=e.$wrapperEl,a=n.attr("id")||"swiper-wrapper-"+e.a11y.getRandomNumber(16),i=e.params.autoplay&&e.params.autoplay.enabled?"off":"polite";e.a11y.addElId(n,a),e.a11y.addElLive(n,i),t.itemRoleDescriptionMessage&&e.a11y.addElRoleDescription(vo(e.slides),t.itemRoleDescriptionMessage),e.a11y.addElRole(vo(e.slides),t.slideRole);var o,s,l=e.params.loop?e.slides.filter((function(t){return!t.classList.contains(e.params.slideDuplicateClass)})).length:e.slides.length;e.slides.each((function(r,n){var a=vo(r),i=e.params.loop?parseInt(a.attr("data-swiper-slide-index"),10):n,o=t.slideLabelMessage.replace(/\{\{index\}\}/,i+1).replace(/\{\{slidesLength\}\}/,l);e.a11y.addElLabel(a,o)})),e.navigation&&e.navigation.$nextEl&&(o=e.navigation.$nextEl),e.navigation&&e.navigation.$prevEl&&(s=e.navigation.$prevEl),o&&o.length&&(e.a11y.makeElFocusable(o),"BUTTON"!==o[0].tagName&&(e.a11y.addElRole(o,"button"),o.on("keydown",e.a11y.onEnterOrSpaceKey)),e.a11y.addElLabel(o,t.nextSlideMessage),e.a11y.addElControls(o,a)),s&&s.length&&(e.a11y.makeElFocusable(s),"BUTTON"!==s[0].tagName&&(e.a11y.addElRole(s,"button"),s.on("keydown",e.a11y.onEnterOrSpaceKey)),e.a11y.addElLabel(s,t.prevSlideMessage),e.a11y.addElControls(s,a)),e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.$el.on("keydown",ko(e.params.pagination.bulletClass),e.a11y.onEnterOrSpaceKey)},destroy:function(){var e,t,r=this;r.a11y.liveRegion&&r.a11y.liveRegion.length>0&&r.a11y.liveRegion.remove(),r.navigation&&r.navigation.$nextEl&&(e=r.navigation.$nextEl),r.navigation&&r.navigation.$prevEl&&(t=r.navigation.$prevEl),e&&e.off("keydown",r.a11y.onEnterOrSpaceKey),t&&t.off("keydown",r.a11y.onEnterOrSpaceKey),r.pagination&&r.params.pagination.clickable&&r.pagination.bullets&&r.pagination.bullets.length&&r.pagination.$el.off("keydown",ko(r.params.pagination.bulletClass),r.a11y.onEnterOrSpaceKey)}};function vs(){return(vs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var ys={init:function(){var e=this,t=l();if(e.params.history){if(!t.history||!t.history.pushState)return e.params.history.enabled=!1,void(e.params.hashNavigation.enabled=!0);var r=e.history;r.initialized=!0,r.paths=ys.getPathValues(e.params.url),(r.paths.key||r.paths.value)&&(r.scrollToSlide(0,r.paths.value,e.params.runCallbacksOnInit),e.params.history.replaceState||t.addEventListener("popstate",e.history.setHistoryPopState))}},destroy:function(){var e=l();this.params.history.replaceState||e.removeEventListener("popstate",this.history.setHistoryPopState)},setHistoryPopState:function(){var e=this;e.history.paths=ys.getPathValues(e.params.url),e.history.scrollToSlide(e.params.speed,e.history.paths.value,!1)},getPathValues:function(e){var t=l(),r=(e?new URL(e):t.location).pathname.slice(1).split("/").filter((function(e){return""!==e})),n=r.length;return{key:r[n-2],value:r[n-1]}},setHistory:function(e,t){var r=this,n=l();if(r.history.initialized&&r.params.history.enabled){var a;a=r.params.url?new URL(r.params.url):n.location;var i=r.slides.eq(t),o=ys.slugify(i.attr("data-history"));if(r.params.history.root.length>0){var s=r.params.history.root;"/"===s[s.length-1]&&(s=s.slice(0,s.length-1)),o=s+"/"+e+"/"+o}else a.pathname.includes(e)||(o=e+"/"+o);var c=n.history.state;c&&c.value===o||(r.params.history.replaceState?n.history.replaceState({value:o},null,o):n.history.pushState({value:o},null,o))}},slugify:function(e){return e.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},scrollToSlide:function(e,t,r){var n=this;if(t)for(var a=0,i=n.slides.length;a<i;a+=1){var o=n.slides.eq(a);if(ys.slugify(o.attr("data-history"))===t&&!o.hasClass(n.params.slideDuplicateClass)){var s=o.index();n.slideTo(s,e,r)}}else n.slideTo(0,e,r)}};function bs(){return(bs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var _s={onHashChange:function(){var e=this,t=o();e.emit("hashChange");var r=t.location.hash.replace("#","");if(r!==e.slides.eq(e.activeIndex).attr("data-hash")){var n=e.$wrapperEl.children("."+e.params.slideClass+'[data-hash="'+r+'"]').index();if(void 0===n)return;e.slideTo(n)}},setHash:function(){var e=this,t=l(),r=o();if(e.hashNavigation.initialized&&e.params.hashNavigation.enabled)if(e.params.hashNavigation.replaceState&&t.history&&t.history.replaceState)t.history.replaceState(null,null,"#"+e.slides.eq(e.activeIndex).attr("data-hash")||0),e.emit("hashSet");else{var n=e.slides.eq(e.activeIndex),a=n.attr("data-hash")||n.attr("data-history");r.location.hash=a||"",e.emit("hashSet")}},init:function(){var e=this,t=o(),r=l();if(!(!e.params.hashNavigation.enabled||e.params.history&&e.params.history.enabled)){e.hashNavigation.initialized=!0;var n=t.location.hash.replace("#","");if(n)for(var a=0,i=e.slides.length;a<i;a+=1){var s=e.slides.eq(a);if((s.attr("data-hash")||s.attr("data-history"))===n&&!s.hasClass(e.params.slideDuplicateClass)){var c=s.index();e.slideTo(c,0,e.params.runCallbacksOnInit,!0)}}e.params.hashNavigation.watchState&&vo(r).on("hashchange",e.hashNavigation.onHashChange)}},destroy:function(){var e=l();this.params.hashNavigation.watchState&&vo(e).off("hashchange",this.hashNavigation.onHashChange)}};function xs(){return(xs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var ws={run:function(){var e=this,t=e.slides.eq(e.activeIndex),r=e.params.autoplay.delay;t.attr("data-swiper-autoplay")&&(r=t.attr("data-swiper-autoplay")||e.params.autoplay.delay),clearTimeout(e.autoplay.timeout),e.autoplay.timeout=yo((function(){var t;e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),t=e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(t=e.slideTo(e.slides.length-1,e.params.speed,!0,!0),e.emit("autoplay")):(t=e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.params.loop?(e.loopFix(),t=e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(t=e.slideTo(0,e.params.speed,!0,!0),e.emit("autoplay")):(t=e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")),(e.params.cssMode&&e.autoplay.running||!1===t)&&e.autoplay.run()}),r)},start:function(){var e=this;return void 0===e.autoplay.timeout&&(!e.autoplay.running&&(e.autoplay.running=!0,e.emit("autoplayStart"),e.autoplay.run(),!0))},stop:function(){var e=this;return!!e.autoplay.running&&(void 0!==e.autoplay.timeout&&(e.autoplay.timeout&&(clearTimeout(e.autoplay.timeout),e.autoplay.timeout=void 0),e.autoplay.running=!1,e.emit("autoplayStop"),!0))},pause:function(e){var t=this;t.autoplay.running&&(t.autoplay.paused||(t.autoplay.timeout&&clearTimeout(t.autoplay.timeout),t.autoplay.paused=!0,0!==e&&t.params.autoplay.waitForTransition?["transitionend","webkitTransitionEnd"].forEach((function(e){t.$wrapperEl[0].addEventListener(e,t.autoplay.onTransitionEnd)})):(t.autoplay.paused=!1,t.autoplay.run())))},onVisibilityChange:function(){var e=this,t=o();"hidden"===t.visibilityState&&e.autoplay.running&&e.autoplay.pause(),"visible"===t.visibilityState&&e.autoplay.paused&&(e.autoplay.run(),e.autoplay.paused=!1)},onTransitionEnd:function(e){var t=this;t&&!t.destroyed&&t.$wrapperEl&&e.target===t.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach((function(e){t.$wrapperEl[0].removeEventListener(e,t.autoplay.onTransitionEnd)})),t.autoplay.paused=!1,t.autoplay.running?t.autoplay.run():t.autoplay.stop())},onMouseEnter:function(){var e=this;e.params.autoplay.disableOnInteraction?e.autoplay.stop():e.autoplay.pause(),["transitionend","webkitTransitionEnd"].forEach((function(t){e.$wrapperEl[0].removeEventListener(t,e.autoplay.onTransitionEnd)}))},onMouseLeave:function(){var e=this;e.params.autoplay.disableOnInteraction||(e.autoplay.paused=!1,e.autoplay.run())},attachMouseEvents:function(){var e=this;e.params.autoplay.pauseOnMouseEnter&&(e.$el.on("mouseenter",e.autoplay.onMouseEnter),e.$el.on("mouseleave",e.autoplay.onMouseLeave))},detachMouseEvents:function(){var e=this;e.$el.off("mouseenter",e.autoplay.onMouseEnter),e.$el.off("mouseleave",e.autoplay.onMouseLeave)}};function Es(){return(Es=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Cs={setTranslate:function(){for(var e=this,t=e.slides,r=0;r<t.length;r+=1){var n=e.slides.eq(r),a=-n[0].swiperSlideOffset;e.params.virtualTranslate||(a-=e.translate);var i=0;e.isHorizontal()||(i=a,a=0);var o=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(n[0].progress),0):1+Math.min(Math.max(n[0].progress,-1),0);n.css({opacity:o}).transform("translate3d("+a+"px, "+i+"px, 0px)")}},setTransition:function(e){var t=this,r=t.slides,n=t.$wrapperEl;if(r.transition(e),t.params.virtualTranslate&&0!==e){var a=!1;r.transitionEnd((function(){if(!a&&t&&!t.destroyed){a=!0,t.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],r=0;r<e.length;r+=1)n.trigger(e[r])}}))}}};function ks(){return(ks=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Ts={setTranslate:function(){var e,t=this,r=t.$el,n=t.$wrapperEl,a=t.slides,i=t.width,o=t.height,s=t.rtlTranslate,l=t.size,c=t.browser,u=t.params.cubeEffect,p=t.isHorizontal(),d=t.virtual&&t.params.virtual.enabled,h=0;u.shadow&&(p?(0===(e=n.find(".swiper-cube-shadow")).length&&(e=vo('<div class="swiper-cube-shadow"></div>'),n.append(e)),e.css({height:i+"px"})):0===(e=r.find(".swiper-cube-shadow")).length&&(e=vo('<div class="swiper-cube-shadow"></div>'),r.append(e)));for(var f=0;f<a.length;f+=1){var m=a.eq(f),g=f;d&&(g=parseInt(m.attr("data-swiper-slide-index"),10));var v=90*g,y=Math.floor(v/360);s&&(v=-v,y=Math.floor(-v/360));var b=Math.max(Math.min(m[0].progress,1),-1),_=0,x=0,w=0;g%4==0?(_=4*-y*l,w=0):(g-1)%4==0?(_=0,w=4*-y*l):(g-2)%4==0?(_=l+4*y*l,w=l):(g-3)%4==0&&(_=-l,w=3*l+4*l*y),s&&(_=-_),p||(x=_,_=0);var E="rotateX("+(p?0:-v)+"deg) rotateY("+(p?v:0)+"deg) translate3d("+_+"px, "+x+"px, "+w+"px)";if(b<=1&&b>-1&&(h=90*g+90*b,s&&(h=90*-g-90*b)),m.transform(E),u.slideShadows){var C=p?m.find(".swiper-slide-shadow-left"):m.find(".swiper-slide-shadow-top"),k=p?m.find(".swiper-slide-shadow-right"):m.find(".swiper-slide-shadow-bottom");0===C.length&&(C=vo('<div class="swiper-slide-shadow-'+(p?"left":"top")+'"></div>'),m.append(C)),0===k.length&&(k=vo('<div class="swiper-slide-shadow-'+(p?"right":"bottom")+'"></div>'),m.append(k)),C.length&&(C[0].style.opacity=Math.max(-b,0)),k.length&&(k[0].style.opacity=Math.max(b,0))}}if(n.css({"-webkit-transform-origin":"50% 50% -"+l/2+"px","-moz-transform-origin":"50% 50% -"+l/2+"px","-ms-transform-origin":"50% 50% -"+l/2+"px","transform-origin":"50% 50% -"+l/2+"px"}),u.shadow)if(p)e.transform("translate3d(0px, "+(i/2+u.shadowOffset)+"px, "+-i/2+"px) rotateX(90deg) rotateZ(0deg) scale("+u.shadowScale+")");else{var T=Math.abs(h)-90*Math.floor(Math.abs(h)/90),S=1.5-(Math.sin(2*T*Math.PI/360)/2+Math.cos(2*T*Math.PI/360)/2),P=u.shadowScale,M=u.shadowScale/S,I=u.shadowOffset;e.transform("scale3d("+P+", 1, "+M+") translate3d(0px, "+(o/2+I)+"px, "+-o/2/M+"px) rotateX(-90deg)")}var A=c.isSafari||c.isWebView?-l/2:0;n.transform("translate3d(0px,0,"+A+"px) rotateX("+(t.isHorizontal()?0:h)+"deg) rotateY("+(t.isHorizontal()?-h:0)+"deg)")},setTransition:function(e){var t=this,r=t.$el;t.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),t.params.cubeEffect.shadow&&!t.isHorizontal()&&r.find(".swiper-cube-shadow").transition(e)}};function Ss(){return(Ss=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Ps={setTranslate:function(){for(var e=this,t=e.slides,r=e.rtlTranslate,n=0;n<t.length;n+=1){var a=t.eq(n),i=a[0].progress;e.params.flipEffect.limitRotation&&(i=Math.max(Math.min(a[0].progress,1),-1));var o=-180*i,s=0,l=-a[0].swiperSlideOffset,c=0;if(e.isHorizontal()?r&&(o=-o):(c=l,l=0,s=-o,o=0),a[0].style.zIndex=-Math.abs(Math.round(i))+t.length,e.params.flipEffect.slideShadows){var u=e.isHorizontal()?a.find(".swiper-slide-shadow-left"):a.find(".swiper-slide-shadow-top"),p=e.isHorizontal()?a.find(".swiper-slide-shadow-right"):a.find(".swiper-slide-shadow-bottom");0===u.length&&(u=vo('<div class="swiper-slide-shadow-'+(e.isHorizontal()?"left":"top")+'"></div>'),a.append(u)),0===p.length&&(p=vo('<div class="swiper-slide-shadow-'+(e.isHorizontal()?"right":"bottom")+'"></div>'),a.append(p)),u.length&&(u[0].style.opacity=Math.max(-i,0)),p.length&&(p[0].style.opacity=Math.max(i,0))}a.transform("translate3d("+l+"px, "+c+"px, 0px) rotateX("+s+"deg) rotateY("+o+"deg)")}},setTransition:function(e){var t=this,r=t.slides,n=t.activeIndex,a=t.$wrapperEl;if(r.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),t.params.virtualTranslate&&0!==e){var i=!1;r.eq(n).transitionEnd((function(){if(!i&&t&&!t.destroyed){i=!0,t.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],r=0;r<e.length;r+=1)a.trigger(e[r])}}))}}};function Ms(){return(Ms=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Is={setTranslate:function(){for(var e=this,t=e.width,r=e.height,n=e.slides,a=e.slidesSizesGrid,i=e.params.coverflowEffect,o=e.isHorizontal(),s=e.translate,l=o?t/2-s:r/2-s,c=o?i.rotate:-i.rotate,u=i.depth,p=0,d=n.length;p<d;p+=1){var h=n.eq(p),f=a[p],m=(l-h[0].swiperSlideOffset-f/2)/f*i.modifier,g=o?c*m:0,v=o?0:c*m,y=-u*Math.abs(m),b=i.stretch;"string"==typeof b&&-1!==b.indexOf("%")&&(b=parseFloat(i.stretch)/100*f);var _=o?0:b*m,x=o?b*m:0,w=1-(1-i.scale)*Math.abs(m);Math.abs(x)<.001&&(x=0),Math.abs(_)<.001&&(_=0),Math.abs(y)<.001&&(y=0),Math.abs(g)<.001&&(g=0),Math.abs(v)<.001&&(v=0),Math.abs(w)<.001&&(w=0);var E="translate3d("+x+"px,"+_+"px,"+y+"px)  rotateX("+v+"deg) rotateY("+g+"deg) scale("+w+")";if(h.transform(E),h[0].style.zIndex=1-Math.abs(Math.round(m)),i.slideShadows){var C=o?h.find(".swiper-slide-shadow-left"):h.find(".swiper-slide-shadow-top"),k=o?h.find(".swiper-slide-shadow-right"):h.find(".swiper-slide-shadow-bottom");0===C.length&&(C=vo('<div class="swiper-slide-shadow-'+(o?"left":"top")+'"></div>'),h.append(C)),0===k.length&&(k=vo('<div class="swiper-slide-shadow-'+(o?"right":"bottom")+'"></div>'),h.append(k)),C.length&&(C[0].style.opacity=m>0?m:0),k.length&&(k[0].style.opacity=-m>0?-m:0)}}},setTransition:function(e){this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}};function As(){return(As=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Os={init:function(){var e=this,t=e.params.thumbs;if(e.thumbs.initialized)return!1;e.thumbs.initialized=!0;var r=e.constructor;return t.swiper instanceof r?(e.thumbs.swiper=t.swiper,Eo(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Eo(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1})):xo(t.swiper)&&(e.thumbs.swiper=new r(Eo({},t.swiper,{watchSlidesVisibility:!0,watchSlidesProgress:!0,slideToClickedSlide:!1})),e.thumbs.swiperCreated=!0),e.thumbs.swiper.$el.addClass(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",e.thumbs.onThumbClick),!0},onThumbClick:function(){var e=this,t=e.thumbs.swiper;if(t){var r=t.clickedIndex,n=t.clickedSlide;if(!(n&&vo(n).hasClass(e.params.thumbs.slideThumbActiveClass)||null==r)){var a;if(a=t.params.loop?parseInt(vo(t.clickedSlide).attr("data-swiper-slide-index"),10):r,e.params.loop){var i=e.activeIndex;e.slides.eq(i).hasClass(e.params.slideDuplicateClass)&&(e.loopFix(),e._clientLeft=e.$wrapperEl[0].clientLeft,i=e.activeIndex);var o=e.slides.eq(i).prevAll('[data-swiper-slide-index="'+a+'"]').eq(0).index(),s=e.slides.eq(i).nextAll('[data-swiper-slide-index="'+a+'"]').eq(0).index();a=void 0===o?s:void 0===s?o:s-i<i-o?s:o}e.slideTo(a)}}},update:function(e){var t=this,r=t.thumbs.swiper;if(r){var n="auto"===r.params.slidesPerView?r.slidesPerViewDynamic():r.params.slidesPerView,a=t.params.thumbs.autoScrollOffset,i=a&&!r.params.loop;if(t.realIndex!==r.realIndex||i){var o,s,l=r.activeIndex;if(r.params.loop){r.slides.eq(l).hasClass(r.params.slideDuplicateClass)&&(r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft,l=r.activeIndex);var c=r.slides.eq(l).prevAll('[data-swiper-slide-index="'+t.realIndex+'"]').eq(0).index(),u=r.slides.eq(l).nextAll('[data-swiper-slide-index="'+t.realIndex+'"]').eq(0).index();o=void 0===c?u:void 0===u?c:u-l==l-c?r.params.slidesPerGroup>1?u:l:u-l<l-c?u:c,s=t.activeIndex>t.previousIndex?"next":"prev"}else s=(o=t.realIndex)>t.previousIndex?"next":"prev";i&&(o+="next"===s?a:-1*a),r.visibleSlidesIndexes&&r.visibleSlidesIndexes.indexOf(o)<0&&(r.params.centeredSlides?o=o>l?o-Math.floor(n/2)+1:o+Math.floor(n/2)-1:o>l&&r.params.slidesPerGroup,r.slideTo(o,e?0:void 0))}var p=1,d=t.params.thumbs.slideThumbActiveClass;if(t.params.slidesPerView>1&&!t.params.centeredSlides&&(p=t.params.slidesPerView),t.params.thumbs.multipleActiveThumbs||(p=1),p=Math.floor(p),r.slides.removeClass(d),r.params.loop||r.params.virtual&&r.params.virtual.enabled)for(var h=0;h<p;h+=1)r.$wrapperEl.children('[data-swiper-slide-index="'+(t.realIndex+h)+'"]').addClass(d);else for(var f=0;f<p;f+=1)r.slides.eq(t.realIndex+f).addClass(d)}}},zs=[Yo,Jo,{name:"mousewheel",params:{mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null}},create:function(){Co(this,{mousewheel:{enabled:!1,lastScrollTime:bo(),lastEventBeforeSnap:void 0,recentWheelEvents:[],enable:es.enable,disable:es.disable,handle:es.handle,handleMouseEnter:es.handleMouseEnter,handleMouseLeave:es.handleMouseLeave,animateSlider:es.animateSlider,releaseScroll:es.releaseScroll}})},on:{init:function(e){!e.params.mousewheel.enabled&&e.params.cssMode&&e.mousewheel.disable(),e.params.mousewheel.enabled&&e.mousewheel.enable()},destroy:function(e){e.params.cssMode&&e.mousewheel.enable(),e.mousewheel.enabled&&e.mousewheel.disable()}}},{name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){Co(this,{navigation:ts({},rs)})},on:{init:function(e){e.navigation.init(),e.navigation.update()},toEdge:function(e){e.navigation.update()},fromEdge:function(e){e.navigation.update()},destroy:function(e){e.navigation.destroy()},"enable disable":function(e){var t=e.navigation,r=t.$nextEl,n=t.$prevEl;r&&r[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass),n&&n[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass)},click:function(e,t){var r=e.navigation,n=r.$nextEl,a=r.$prevEl,i=t.target;if(e.params.navigation.hideOnClick&&!vo(i).is(a)&&!vo(i).is(n)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===i||e.pagination.el.contains(i)))return;var o;n?o=n.hasClass(e.params.navigation.hiddenClass):a&&(o=a.hasClass(e.params.navigation.hiddenClass)),!0===o?e.emit("navigationShow"):e.emit("navigationHide"),n&&n.toggleClass(e.params.navigation.hiddenClass),a&&a.toggleClass(e.params.navigation.hiddenClass)}}}},{name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){Co(this,{pagination:ns({dynamicBulletIndex:0},as)})},on:{init:function(e){e.pagination.init(),e.pagination.render(),e.pagination.update()},activeIndexChange:function(e){(e.params.loop||void 0===e.snapIndex)&&e.pagination.update()},snapIndexChange:function(e){e.params.loop||e.pagination.update()},slidesLengthChange:function(e){e.params.loop&&(e.pagination.render(),e.pagination.update())},snapGridLengthChange:function(e){e.params.loop||(e.pagination.render(),e.pagination.update())},destroy:function(e){e.pagination.destroy()},"enable disable":function(e){var t=e.pagination.$el;t&&t[e.enabled?"removeClass":"addClass"](e.params.pagination.lockClass)},click:function(e,t){var r=t.target;if(e.params.pagination.el&&e.params.pagination.hideOnClick&&e.pagination.$el.length>0&&!vo(r).hasClass(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&r===e.navigation.nextEl||e.navigation.prevEl&&r===e.navigation.prevEl))return;!0===e.pagination.$el.hasClass(e.params.pagination.hiddenClass)?e.emit("paginationShow"):e.emit("paginationHide"),e.pagination.$el.toggleClass(e.params.pagination.hiddenClass)}}}},{name:"scrollbar",params:{scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag"}},create:function(){Co(this,{scrollbar:is({isTouched:!1,timeout:null,dragTimeout:null},os)})},on:{init:function(e){e.scrollbar.init(),e.scrollbar.updateSize(),e.scrollbar.setTranslate()},update:function(e){e.scrollbar.updateSize()},resize:function(e){e.scrollbar.updateSize()},observerUpdate:function(e){e.scrollbar.updateSize()},setTranslate:function(e){e.scrollbar.setTranslate()},setTransition:function(e,t){e.scrollbar.setTransition(t)},"enable disable":function(e){var t=e.scrollbar.$el;t&&t[e.enabled?"removeClass":"addClass"](e.params.scrollbar.lockClass)},destroy:function(e){e.scrollbar.destroy()}}},{name:"parallax",params:{parallax:{enabled:!1}},create:function(){Co(this,{parallax:ss({},ls)})},on:{beforeInit:function(e){e.params.parallax.enabled&&(e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)},init:function(e){e.params.parallax.enabled&&e.parallax.setTranslate()},setTranslate:function(e){e.params.parallax.enabled&&e.parallax.setTranslate()},setTransition:function(e,t){e.params.parallax.enabled&&e.parallax.setTransition(t)}}},{name:"zoom",params:{zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}},create:function(){var e=this;Co(e,{zoom:cs({enabled:!1,scale:1,currentScale:1,isScaling:!1,gesture:{$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0}},us)});var t=1;Object.defineProperty(e.zoom,"scale",{get:function(){return t},set:function(r){if(t!==r){var n=e.zoom.gesture.$imageEl?e.zoom.gesture.$imageEl[0]:void 0,a=e.zoom.gesture.$slideEl?e.zoom.gesture.$slideEl[0]:void 0;e.emit("zoomChange",r,n,a)}t=r}})},on:{init:function(e){e.params.zoom.enabled&&e.zoom.enable()},destroy:function(e){e.zoom.disable()},touchStart:function(e,t){e.zoom.enabled&&e.zoom.onTouchStart(t)},touchEnd:function(e,t){e.zoom.enabled&&e.zoom.onTouchEnd(t)},doubleTap:function(e,t){!e.animating&&e.params.zoom.enabled&&e.zoom.enabled&&e.params.zoom.toggle&&e.zoom.toggle(t)},transitionEnd:function(e){e.zoom.enabled&&e.params.zoom.enabled&&e.zoom.onTransitionEnd()},slideChange:function(e){e.zoom.enabled&&e.params.zoom.enabled&&e.params.cssMode&&e.zoom.onTransitionEnd()}}},{name:"lazy",params:{lazy:{checkInView:!1,enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,scrollingElement:"",elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}},create:function(){Co(this,{lazy:ps({initialImageLoaded:!1},ds)})},on:{beforeInit:function(e){e.params.lazy.enabled&&e.params.preloadImages&&(e.params.preloadImages=!1)},init:function(e){e.params.lazy.enabled&&!e.params.loop&&0===e.params.initialSlide&&(e.params.lazy.checkInView?e.lazy.checkInViewOnLoad():e.lazy.load())},scroll:function(e){e.params.freeMode&&!e.params.freeModeSticky&&e.lazy.load()},"scrollbarDragMove resize _freeModeNoMomentumRelease":function(e){e.params.lazy.enabled&&e.lazy.load()},transitionStart:function(e){e.params.lazy.enabled&&(e.params.lazy.loadOnTransitionStart||!e.params.lazy.loadOnTransitionStart&&!e.lazy.initialImageLoaded)&&e.lazy.load()},transitionEnd:function(e){e.params.lazy.enabled&&!e.params.lazy.loadOnTransitionStart&&e.lazy.load()},slideChange:function(e){var t=e.params,r=t.lazy,n=t.cssMode,a=t.watchSlidesVisibility,i=t.watchSlidesProgress,o=t.touchReleaseOnEdges,s=t.resistanceRatio;r.enabled&&(n||(a||i)&&(o||0===s))&&e.lazy.load()}}},{name:"controller",params:{controller:{control:void 0,inverse:!1,by:"slide"}},create:function(){Co(this,{controller:hs({control:this.params.controller.control},fs)})},on:{update:function(e){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)},resize:function(e){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)},observerUpdate:function(e){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)},setTranslate:function(e,t,r){e.controller.control&&e.controller.setTranslate(t,r)},setTransition:function(e,t,r){e.controller.control&&e.controller.setTransition(t,r)}}},{name:"a11y",params:{a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group"}},create:function(){Co(this,{a11y:ms({},gs,{liveRegion:vo('<span class="'+this.params.a11y.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>')})})},on:{afterInit:function(e){e.params.a11y.enabled&&(e.a11y.init(),e.a11y.updateNavigation())},toEdge:function(e){e.params.a11y.enabled&&e.a11y.updateNavigation()},fromEdge:function(e){e.params.a11y.enabled&&e.a11y.updateNavigation()},paginationUpdate:function(e){e.params.a11y.enabled&&e.a11y.updatePagination()},destroy:function(e){e.params.a11y.enabled&&e.a11y.destroy()}}},{name:"history",params:{history:{enabled:!1,root:"",replaceState:!1,key:"slides"}},create:function(){Co(this,{history:vs({},ys)})},on:{init:function(e){e.params.history.enabled&&e.history.init()},destroy:function(e){e.params.history.enabled&&e.history.destroy()},"transitionEnd _freeModeNoMomentumRelease":function(e){e.history.initialized&&e.history.setHistory(e.params.history.key,e.activeIndex)},slideChange:function(e){e.history.initialized&&e.params.cssMode&&e.history.setHistory(e.params.history.key,e.activeIndex)}}},{name:"hash-navigation",params:{hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}},create:function(){Co(this,{hashNavigation:bs({initialized:!1},_s)})},on:{init:function(e){e.params.hashNavigation.enabled&&e.hashNavigation.init()},destroy:function(e){e.params.hashNavigation.enabled&&e.hashNavigation.destroy()},"transitionEnd _freeModeNoMomentumRelease":function(e){e.hashNavigation.initialized&&e.hashNavigation.setHash()},slideChange:function(e){e.hashNavigation.initialized&&e.params.cssMode&&e.hashNavigation.setHash()}}},{name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}},create:function(){Co(this,{autoplay:xs({},ws,{running:!1,paused:!1})})},on:{init:function(e){e.params.autoplay.enabled&&(e.autoplay.start(),o().addEventListener("visibilitychange",e.autoplay.onVisibilityChange),e.autoplay.attachMouseEvents())},beforeTransitionStart:function(e,t,r){e.autoplay.running&&(r||!e.params.autoplay.disableOnInteraction?e.autoplay.pause(t):e.autoplay.stop())},sliderFirstMove:function(e){e.autoplay.running&&(e.params.autoplay.disableOnInteraction?e.autoplay.stop():e.autoplay.pause())},touchEnd:function(e){e.params.cssMode&&e.autoplay.paused&&!e.params.autoplay.disableOnInteraction&&e.autoplay.run()},destroy:function(e){e.autoplay.detachMouseEvents(),e.autoplay.running&&e.autoplay.stop(),o().removeEventListener("visibilitychange",e.autoplay.onVisibilityChange)}}},{name:"effect-fade",params:{fadeEffect:{crossFade:!1}},create:function(){Co(this,{fadeEffect:Es({},Cs)})},on:{beforeInit:function(e){if("fade"===e.params.effect){e.classNames.push(e.params.containerModifierClass+"fade");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};Eo(e.params,t),Eo(e.originalParams,t)}},setTranslate:function(e){"fade"===e.params.effect&&e.fadeEffect.setTranslate()},setTransition:function(e,t){"fade"===e.params.effect&&e.fadeEffect.setTransition(t)}}},{name:"effect-cube",params:{cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}},create:function(){Co(this,{cubeEffect:ks({},Ts)})},on:{beforeInit:function(e){if("cube"===e.params.effect){e.classNames.push(e.params.containerModifierClass+"cube"),e.classNames.push(e.params.containerModifierClass+"3d");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0};Eo(e.params,t),Eo(e.originalParams,t)}},setTranslate:function(e){"cube"===e.params.effect&&e.cubeEffect.setTranslate()},setTransition:function(e,t){"cube"===e.params.effect&&e.cubeEffect.setTransition(t)}}},{name:"effect-flip",params:{flipEffect:{slideShadows:!0,limitRotation:!0}},create:function(){Co(this,{flipEffect:Ss({},Ps)})},on:{beforeInit:function(e){if("flip"===e.params.effect){e.classNames.push(e.params.containerModifierClass+"flip"),e.classNames.push(e.params.containerModifierClass+"3d");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};Eo(e.params,t),Eo(e.originalParams,t)}},setTranslate:function(e){"flip"===e.params.effect&&e.flipEffect.setTranslate()},setTransition:function(e,t){"flip"===e.params.effect&&e.flipEffect.setTransition(t)}}},{name:"effect-coverflow",params:{coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}},create:function(){Co(this,{coverflowEffect:Ms({},Is)})},on:{beforeInit:function(e){"coverflow"===e.params.effect&&(e.classNames.push(e.params.containerModifierClass+"coverflow"),e.classNames.push(e.params.containerModifierClass+"3d"),e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)},setTranslate:function(e){"coverflow"===e.params.effect&&e.coverflowEffect.setTranslate()},setTransition:function(e,t){"coverflow"===e.params.effect&&e.coverflowEffect.setTransition(t)}}},{name:"thumbs",params:{thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-container-thumbs"}},create:function(){Co(this,{thumbs:As({swiper:null,initialized:!1},Os)})},on:{beforeInit:function(e){var t=e.params.thumbs;t&&t.swiper&&(e.thumbs.init(),e.thumbs.update(!0))},slideChange:function(e){e.thumbs.swiper&&e.thumbs.update()},update:function(e){e.thumbs.swiper&&e.thumbs.update()},resize:function(e){e.thumbs.swiper&&e.thumbs.update()},observerUpdate:function(e){e.thumbs.swiper&&e.thumbs.update()},setTransition:function(e,t){var r=e.thumbs.swiper;r&&r.setTransition(t)},beforeDestroy:function(e){var t=e.thumbs.swiper;t&&e.thumbs.swiperCreated&&t&&t.destroy()}}}];function Rs(e){var t=this,r=Ot(e);if(0!==r.length&&!r[0].swiper){var n,a,i,o={};r.hasClass("tabs-swipeable-wrap")&&(r.addClass("swiper-container").children(".tabs").addClass("swiper-wrapper").children(".tab").addClass("swiper-slide"),n=r.children(".tabs").children(".tab-active").index(),a=!0,i=r.find(".tabs-routable").length>0),r.attr("data-swiper")?o=JSON.parse(r.attr("data-swiper")):r[0].f7SwiperParams?o=r[0].f7SwiperParams:(o=r.dataset(),Object.keys(o).forEach((function(e){var t=o[e];if("string"==typeof t&&0===t.indexOf("{")&&t.indexOf("}")>0)try{o[e]=JSON.parse(t)}catch(e){}}))),void 0===o.initialSlide&&void 0!==n&&(o.initialSlide=n);var s=t.swiper.create(r[0],o),l=r.parents(".tab").filter((function(e){return 0===Ot(e).parent(".tabs").parent(".tabs-animated-wrap, .tabs-swipeable-wrap").length})).eq(0);r.parents(".popup, .login-screen, .sheet-modal, .popover").on("modal:open",c),r.parents(".panel").on("panel:open",c),l&&l.length&&l.on("tab:show",c),s.on("beforeDestroy",(function(){r.parents(".popup, .login-screen, .sheet-modal, .popover").off("modal:open",c),r.parents(".panel").off("panel:open",c),l&&l.length&&l.off("tab:show",c)})),a&&s.on("slideChange",(function(){if(i){var e=t.views.get(r.parents(".view"));e||(e=t.views.main);var n=e.router,a=n.findTabRouteUrl(s.slides.eq(s.activeIndex)[0]);a&&setTimeout((function(){n.navigate(a)}),0)}else t.tab.show({tabEl:s.slides.eq(s.activeIndex)})}))}function c(){s.update()}}Wo.use(zs);var Ls={name:"swiper",static:{Swiper:Wo},create:function(){this.swiper=Dt({defaultSelector:".swiper-container",constructor:Wo,domProp:"swiper"})},on:{pageBeforeRemove:function(e){var t=this;e.$el.find(".swiper-init, .tabs-swipeable-wrap").each((function(e){t.swiper.destroy(e)}))},pageMounted:function(e){var t=this;e.$el.find(".tabs-swipeable-wrap").each((function(e){Rs.call(t,e)}))},pageInit:function(e){var t=this;e.$el.find(".swiper-init, .tabs-swipeable-wrap").each((function(e){Rs.call(t,e)}))},pageReinit:function(e){var t=this;e.$el.find(".swiper-init, .tabs-swipeable-wrap").each((function(e){var r=t.swiper.get(e);r&&r.update&&r.update()}))},tabMounted:function(e){var t=this;Ot(e).find(".swiper-init, .tabs-swipeable-wrap").each((function(e){Rs.call(t,e)}))},tabShow:function(e){var t=this;Ot(e).find(".swiper-init, .tabs-swipeable-wrap").each((function(e){var r=t.swiper.get(e);r&&r.update&&r.update()}))},tabBeforeRemove:function(e){var t=this;Ot(e).find(".swiper-init, .tabs-swipeable-wrap").each((function(e){t.swiper.destroy(e)}))}},vnode:{"swiper-init":{insert:function(e){var t=e.elm;Rs.call(this,t)},destroy:function(e){var t=e.elm;this.swiper.destroy(t)}},"tabs-swipeable-wrap":{insert:function(e){var t=e.elm;Rs.call(this,t)},destroy:function(e){var t=e.elm;this.swiper.destroy(t)}}}};function Ds(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Bs(e,t){return(Bs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $s=function(e){var t,r;function n(t,r){var n;void 0===r&&(r={});var a=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n=e.call(this,r,[t])||this);a.app=t;var i=M({on:{}},t.params.photoBrowser);return a.useModulesParams(i),a.params=M(i,r),M(a,{exposed:!1,opened:!1,activeIndex:a.params.swiper.initialSlide,url:a.params.url,swipeToClose:{allow:!0,isTouched:!1,diff:void 0,start:void 0,current:void 0,started:!1,activeSlide:void 0,timeStart:void 0}}),a.useModules(),a.init(),n}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,Bs(t,r);var a,i,o,s=n.prototype;return s.onSlideChange=function(e){var t=this;t.activeIndex=e.activeIndex;var r=e.activeIndex+1,n=t.params.virtualSlides?t.params.photos.length:e.slides.length;e.params.loop&&(n-=2,(r-=e.loopedSlides)<1&&(r=n+r),r>n&&(r-=n));var a,i=t.params.virtualSlides?e.$wrapperEl.find('.swiper-slide[data-swiper-slide-index="'+e.activeIndex+'"]'):e.slides.eq(e.activeIndex),o=t.params.virtualSlides?e.$wrapperEl.find('.swiper-slide[data-swiper-slide-index="'+e.previousIndex+'"]'):e.slides.eq(e.previousIndex),s=t.$el.find(".photo-browser-current"),l=t.$el.find(".photo-browser-total");if("page"===t.params.type&&t.params.navbar&&0===s.length&&"ios"===t.app.theme&&(a=t.app.navbar.getElByPage(t.$el))&&(s=Ot(a).find(".photo-browser-current"),l=Ot(a).find(".photo-browser-total")),s.length&&l.length&&(s.text(r),l.text(n),a||(a=s.parents(".navbar")[0]),a&&t.app.navbar.size(a)),t.captions.length>0){var c=e.params.loop?i.attr("data-swiper-slide-index"):t.activeIndex;t.$captionsContainerEl.find(".photo-browser-caption-active").removeClass("photo-browser-caption-active"),t.$captionsContainerEl.find('[data-caption-index="'+c+'"]').addClass("photo-browser-caption-active")}var u=o.find("video");u.length>0&&"pause"in u[0]&&u[0].pause()},s.onTouchStart=function(){var e=this.swipeToClose;e.allow&&(e.isTouched=!0)},s.onTouchMove=function(e){var t=this,r=t.swipeToClose;r.isTouched&&(r.started||(r.started=!0,r.start="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,t.params.virtualSlides?r.activeSlide=t.swiper.$wrapperEl.children(".swiper-slide-active"):r.activeSlide=t.swiper.slides.eq(t.swiper.activeIndex),r.timeStart=E()),e.preventDefault(),r.current="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,r.diff=r.start-r.current,t.$el.transition(0).transform("translate3d(0,"+-r.diff+"px,0)"))},s.onTouchEnd=function(){var e=this,t=e.swipeToClose;if(t.isTouched=!1,t.started){t.started=!1,t.allow=!1;var r=Math.abs(t.diff),n=(new Date).getTime()-t.timeStart;n<300&&r>20||n>=300&&r>100?x((function(){e.$el&&(t.diff<0?e.$el.addClass("swipe-close-to-bottom"):e.$el.addClass("swipe-close-to-top")),e.emit("local::swipeToClose",e),e.$el.transform("").transition(""),e.close(),t.allow=!0})):(0!==r?e.$el.addClass("photo-browser-transitioning").transitionEnd((function(){t.allow=!0,e.$el.removeClass("photo-browser-transitioning")})):t.allow=!0,x((function(){e.$el.transform("").transition("")})))}else t.started=!1},s.renderNavbar=function(){var e=this;if(e.params.renderNavbar)return e.params.renderNavbar.call(e);var t=e.params.iconsColor;e.params.iconsColor||"dark"!==e.params.theme||(t="white");var r="ios"!==e.app.theme&&"aurora"!==e.app.theme||!e.params.pageBackLinkText?"":e.params.pageBackLinkText,n=void 0===e.params.navbarShowCount?e.params.photos.length>1:e.params.navbarShowCount,a="page"!==e.params.type;return jn("div",{class:"navbar navbar-photo-browser "+("dark"===e.params.theme?"navbar-photo-browser-dark":"")},jn("div",{class:"navbar-bg"}),jn("div",{class:"navbar-inner navbar-inner-centered-title sliding"},!a&&jn("div",{class:"left"},jn("a",{class:"link "+(r?"":"icon-only")+" back"},jn("i",{class:"icon icon-back "+(t?"color-"+t:"")}),r&&jn("span",null,r))),n&&jn("div",{class:"title"},jn("span",{class:"photo-browser-current"}),jn("span",{class:"photo-browser-of"},e.params.navbarOfText),jn("span",{class:"photo-browser-total"})),a&&jn("div",{class:"right"},jn("a",{class:"link popup-close","data-popup":".photo-browser-popup"},jn("span",null,e.params.popupCloseLinkText)))))},s.renderToolbar=function(){var e=this;if(e.params.renderToolbar)return e.params.renderToolbar.call(e);var t=e.params.iconsColor;return e.params.iconsColor||"dark"!==e.params.theme||(t="white"),jn("div",{class:"toolbar toolbar-bottom tabbar"},jn("div",{class:"toolbar-inner"},jn("a",{class:"link photo-browser-prev"},jn("i",{class:"icon icon-back "+(t?"color-"+t:"")})),jn("a",{class:"link photo-browser-next"},jn("i",{class:"icon icon-forward "+(t?"color-"+t:"")}))))},s.renderCaption=function(e,t){var r=this;return r.params.renderCaption?r.params.renderCaption.call(r,e,t):jn("div",{class:"photo-browser-caption","data-caption-index":t},e)},s.renderObject=function(e,t){var r=this;return r.params.renderObject?r.params.renderObject.call(r,e,t):jn("div",{class:"photo-browser-slide photo-browser-object-slide swiper-slide","data-swiper-slide-index":t},e.html?e.html:e)},s.renderLazyPhoto=function(e,t){var r=this;return r.params.renderLazyPhoto?r.params.renderLazyPhoto.call(r,e,t):jn("div",{class:"photo-browser-slide photo-browser-slide-lazy swiper-slide","data-swiper-slide-index":t},jn("div",{class:"swiper-lazy-preloader"}),jn("span",{class:"swiper-zoom-container"},jn("img",{"data-src":e.url?e.url:e,class:"swiper-lazy"})))},s.renderPhoto=function(e,t){var r=this;return r.params.renderPhoto?r.params.renderPhoto.call(r,e,t):jn("div",{class:"photo-browser-slide swiper-slide","data-swiper-slide-index":t},jn("span",{class:"swiper-zoom-container"},jn("img",{src:e.url?e.url:e})))},s.render=function(){var e=this;return e.params.render?e.params.render.call(e,e.params):jn("div",{class:"photo-browser photo-browser-"+e.params.theme},jn("div",{class:"view"},jn("div",{class:"page photo-browser-page photo-browser-page-"+e.params.theme+" no-toolbar "+(e.params.navbar?"":"no-navbar"),"data-name":"photo-browser-page"},e.params.navbar&&e.renderNavbar(),e.params.toolbar&&e.renderToolbar(),jn("div",{class:"photo-browser-captions photo-browser-captions-"+(e.params.captionsTheme||e.params.theme)},e.params.photos.map((function(t,r){return t.caption?e.renderCaption(t.caption,r):""}))),jn("div",{class:"photo-browser-swiper-container swiper-container"},jn("div",{class:"photo-browser-swiper-wrapper swiper-wrapper"},!e.params.virtualSlides&&e.params.photos.map((function(t,r){return t.html||("string"==typeof t||t instanceof String)&&t.indexOf("<")>=0&&t.indexOf(">")>=0?e.renderObject(t,r):!0===e.params.swiper.lazy||e.params.swiper.lazy&&e.params.swiper.lazy.enabled?e.renderLazyPhoto(t,r):e.renderPhoto(t,r)})))))))},s.renderStandalone=function(){var e=this;return e.params.renderStandalone?e.params.renderStandalone.call(e):'<div class="popup photo-browser-popup photo-browser-standalone popup-tablet-fullscreen">'+e.render()+"</div>"},s.renderPage=function(){var e=this;return e.params.renderPage?e.params.renderPage.call(e):e.render()},s.renderPopup=function(){var e=this;return e.params.renderPopup?e.params.renderPopup.call(e):'<div class="popup photo-browser-popup">'+e.render()+"</div>"},s.onOpen=function(e,t){var r,n=this,a=n.app,i=Ot(t);i[0].f7PhotoBrowser=n,n.$el=i,n.el=i[0],n.openedIn=e,n.opened=!0,n.$swiperContainerEl=n.$el.find(".photo-browser-swiper-container"),n.$swiperWrapperEl=n.$el.find(".photo-browser-swiper-wrapper"),n.slides=n.$el.find(".photo-browser-slide"),n.$captionsContainerEl=n.$el.find(".photo-browser-captions"),n.captions=n.$el.find(".photo-browser-caption");var o=M({},n.params.swiper,{initialSlide:n.activeIndex,on:{click:function(e){clearTimeout(r),n.params.exposition&&(r=setTimeout((function(){n.expositionToggle()}),350)),n.emit("local::tap",e),n.emit("local::click",e)},doubleClick:function(e){clearTimeout(r),n.emit("local::doubleTap",e),n.emit("local::doubleClick",e)},slideChange:function(){var e=this;n.onSlideChange(e);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];n.emit.apply(n,["local::slideChange"].concat(r))},transitionStart:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.emit.apply(n,["local::transitionStart"].concat(t))},transitionEnd:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.emit.apply(n,["local::transitionEnd"].concat(t))},slideChangeTransitionStart:function(){var e=this;n.onSlideChange(e);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];n.emit.apply(n,["local::slideChangeTransitionStart"].concat(r))},slideChangeTransitionEnd:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.emit.apply(n,["local::slideChangeTransitionEnd"].concat(t))},lazyImageLoad:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.emit.apply(n,["local::lazyImageLoad"].concat(t))},lazyImageReady:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=t[0];Ot(a).removeClass("photo-browser-slide-lazy"),n.emit.apply(n,["local::lazyImageReady"].concat(t))}}});n.params.swipeToClose&&"page"!==n.params.type&&M(o.on,{touchStart:function(e,t){n.onTouchStart(t),n.emit("local::touchStart",t)},touchMoveOpposite:function(e,t){n.onTouchMove(t),n.emit("local::touchMoveOpposite",t)},touchEnd:function(e,t){n.onTouchEnd(t),n.emit("local::touchEnd",t)}}),n.params.virtualSlides&&M(o,{virtual:{slides:n.params.photos,renderSlide:function(e,t){return e.html||("string"==typeof e||e instanceof String)&&e.indexOf("<")>=0&&e.indexOf(">")>=0?n.renderObject(e,t):!0===n.params.swiper.lazy||n.params.swiper.lazy&&n.params.swiper.lazy.enabled?n.renderLazyPhoto(e,t):n.renderPhoto(e,t)}}});var s=l();n.swiper=a.swiper?a.swiper.create(n.$swiperContainerEl,o):new s.Swiper(n.$swiperContainerEl,o),0===n.activeIndex&&n.onSlideChange(n.swiper),n.$el&&n.$el.trigger("photobrowser:open"),n.emit("local::open photoBrowserOpen",n)},s.onOpened=function(){var e=this;e.$el&&"standalone"===e.params.type&&e.$el.css("animation","none"),e.$el&&e.$el.trigger("photobrowser:opened"),e.emit("local::opened photoBrowserOpened",e)},s.onClose=function(){var e=this;e.destroyed||(e.swiper&&e.swiper.destroy&&(e.swiper.destroy(!0,!1),e.swiper=null,delete e.swiper),e.$el&&e.$el.trigger("photobrowser:close"),e.emit("local::close photoBrowserClose",e))},s.onClosed=function(){var e=this;e.destroyed||(e.opened=!1,e.$el=null,e.el=null,delete e.$el,delete e.el,e.$el&&e.$el.trigger("photobrowser:closed"),e.emit("local::closed photoBrowserClosed",e))},s.openPage=function(){var e=this;if(e.opened)return e;var t=e.renderPage();return e.view.router.navigate({url:e.url,route:{content:t,path:e.url,on:{pageBeforeIn:function(t,r){e.view.$el.addClass("with-photo-browser-page with-photo-browser-page-"+e.params.theme),e.onOpen("page",r.el)},pageAfterIn:function(t,r){e.onOpened("page",r.el)},pageBeforeOut:function(t,r){e.view.$el.removeClass("with-photo-browser-page with-photo-browser-page-exposed with-photo-browser-page-"+e.params.theme),e.onClose("page",r.el)},pageAfterOut:function(t,r){e.onClosed("page",r.el)}}}}),e},s.openStandalone=function(){var e=this;if(e.opened)return e;var t={backdrop:!1,content:e.renderStandalone(),on:{popupOpen:function(t){e.onOpen("popup",t.el)},popupOpened:function(t){e.onOpened("popup",t.el)},popupClose:function(t){e.onClose("popup",t.el)},popupClosed:function(t){e.onClosed("popup",t.el)}}};return e.params.routableModals&&e.view?e.view.router.navigate({url:e.url,route:{path:e.url,popup:t}}):e.modal=e.app.popup.create(t).open(),e},s.openPopup=function(){var e=this;if(e.opened)return e;var t={content:e.renderPopup(),push:e.params.popupPush,on:{popupOpen:function(t){e.onOpen("popup",t.el)},popupOpened:function(t){e.onOpened("popup",t.el)},popupClose:function(t){e.onClose("popup",t.el)},popupClosed:function(t){e.onClosed("popup",t.el)}}};return e.params.routableModals&&e.view?e.view.router.navigate({url:e.url,route:{path:e.url,popup:t}}):e.modal=e.app.popup.create(t).open(),e},s.expositionEnable=function(){var e=this;return"page"===e.params.type&&e.view.$el.addClass("with-photo-browser-page-exposed"),e.$el&&e.$el.addClass("photo-browser-exposed"),e.params.expositionHideCaptions&&e.$captionsContainerEl.addClass("photo-browser-captions-exposed"),e.exposed=!0,e},s.expositionDisable=function(){var e=this;return"page"===e.params.type&&e.view.$el.removeClass("with-photo-browser-page-exposed"),e.$el&&e.$el.removeClass("photo-browser-exposed"),e.params.expositionHideCaptions&&e.$captionsContainerEl.removeClass("photo-browser-captions-exposed"),e.exposed=!1,e},s.expositionToggle=function(){var e=this;return"page"===e.params.type&&e.view.$el.toggleClass("with-photo-browser-page-exposed"),e.$el&&e.$el.toggleClass("photo-browser-exposed"),e.params.expositionHideCaptions&&e.$captionsContainerEl.toggleClass("photo-browser-captions-exposed"),e.exposed=!e.exposed,e},s.open=function(e){var t=this,r=t.params.type;return t.opened?(t.swiper&&void 0!==e&&t.swiper.slideTo(parseInt(e,10)),t):(void 0!==e&&(t.activeIndex=e),"standalone"===r&&t.openStandalone(),"page"===r&&t.openPage(),"popup"===r&&t.openPopup(),t)},s.close=function(){var e=this;return e.opened?(e.params.routableModals&&e.view||"page"===e.openedIn?e.view.router.back():(e.modal.once("modalClosed",(function(){x((function(){e.destroyed||(e.modal.destroy(),delete e.modal)}))})),e.modal.close()),e):e},s.init=function(){},s.destroy=function(){var e=this;e.emit("local::beforeDestroy photoBrowserBeforeDestroy",e),e.$el&&(e.$el.trigger("photobrowser:beforedestroy"),e.$el[0].f7PhotoBrowser=null,delete e.$el[0].f7PhotoBrowser),y(e),e.destroyed=!0,e=null},a=n,(i=[{key:"view",get:function(){var e=this.params,t=this.app;return e.view||t.views.main}}])&&Ds(a.prototype,i),o&&Ds(a,o),n}(q),Fs={name:"photoBrowser",params:{photoBrowser:{photos:[],exposition:!0,expositionHideCaptions:!1,type:"standalone",navbar:!0,toolbar:!0,theme:"light",captionsTheme:void 0,iconsColor:void 0,popupPush:!1,swipeToClose:!0,pageBackLinkText:"Back",popupCloseLinkText:"Close",navbarOfText:"of",navbarShowCount:void 0,view:void 0,url:"photos/",routableModals:!1,virtualSlides:!0,renderNavbar:void 0,renderToolbar:void 0,renderCaption:void 0,renderObject:void 0,renderLazyPhoto:void 0,renderPhoto:void 0,renderPage:void 0,renderPopup:void 0,renderStandalone:void 0,swiper:{initialSlide:0,spaceBetween:20,speed:300,loop:!1,preloadImages:!0,navigation:{nextEl:".photo-browser-next",prevEl:".photo-browser-prev"},zoom:{enabled:!0,maxRatio:3,minRatio:1},lazy:{enabled:!0}}}},create:function(){this.photoBrowser=Dt({defaultSelector:".photo-browser-popup, .photo-browser-page",constructor:$s,app:this,domProp:"f7PhotoBrowser"})},static:{PhotoBrowser:$s}};function Ns(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vs(e,t){return(Vs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var js=function(e){var t,r;function n(t,r){var n,a=M({on:{}},t.params.notification,r),i=Ns(n=e.call(this,t,a)||this);i.app=t,i.params=a;var o,s,l,c,u,p,d,h=i.params,f=h.icon,m=h.title,g=h.titleRightText,v=h.subtitle,y=h.text,b=h.closeButton,_=h.closeTimeout,w=h.cssClass,C=h.closeOnClick;if(i.params.el)o=Ot(i.params.el);else{var k=i.render({icon:f,title:m,titleRightText:g,subtitle:v,text:y,closeButton:b,cssClass:w});o=Ot(k)}if(o&&o.length>0&&o[0].f7Modal)return o[0].f7Modal||Ns(n);if(0===o.length)return i.destroy()||Ns(n);M(i,{$el:o,el:o[0],type:"notification"}),o[0].f7Modal=i,b&&o.find(".notification-close-button").on("click",(function(){i.close()})),o.on("click",(function(e){b&&Ot(e.target).closest(".notification-close-button").length||(i.emit("local::click notificationClick",i),C&&i.close())})),i.on("beforeDestroy",(function(){o.off("click")}));var T,S={};function P(e){s||(s=!0,l=!1,c=void 0,p=E(),S.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,S.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY)}function I(e){if(s){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,r="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;if(void 0===c&&(c=!!(c||Math.abs(r-S.y)<Math.abs(t-S.x))),c)s=!1;else{e.preventDefault(),l||(i.$el.removeClass("notification-transitioning"),i.$el.transition(0),d=i.$el[0].offsetHeight/2),l=!0;var n=u=r-S.y;u>0&&(n=Math.pow(u,.8)),i.$el.transform("translate3d(0, "+n+"px, 0)")}}}function A(){if(!s||!l)return s=!1,void(l=!1);if(s=!1,l=!1,0!==u){var e=E()-p;i.$el.transition(""),i.$el.addClass("notification-transitioning"),i.$el.transform(""),(u<-10&&e<300||-u>=d/1)&&i.close()}}function O(){T=x((function(){s&&l?O():i.close()}),_)}return i.on("open",(function(){i.params.swipeToClose&&(i.$el.on(t.touchEvents.start,P,{passive:!0}),t.on("touchmove:active",I),t.on("touchend:passive",A)),Ot(".notification.modal-in").each((function(e){var r=t.notification.get(e);e!==i.el&&r&&r.close()})),_&&O()})),i.on("close beforeDestroy",(function(){i.params.swipeToClose&&(i.$el.off(t.touchEvents.start,P,{passive:!0}),t.off("touchmove:active",I),t.off("touchend:passive",A)),clearTimeout(T)})),i||Ns(n)}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,Vs(t,r),n.prototype.render=function(){var e=this;if(e.params.render)return e.params.render.call(e,e);var t=e.params,r=t.icon,n=t.title,a=t.titleRightText,i=t.subtitle,o=t.text,s=t.closeButton,l=t.cssClass;return jn("div",{class:"notification "+(l||"")},jn("div",{class:"notification-header"},r&&jn("div",{class:"notification-icon"},r),n&&jn("div",{class:"notification-title"},n),a&&jn("div",{class:"notification-title-right-text"},a),s&&jn("span",{class:"notification-close-button"})),jn("div",{class:"notification-content"},i&&jn("div",{class:"notification-subtitle"},i),o&&jn("div",{class:"notification-text"},o)))},n}(un),Us={name:"notification",static:{Notification:js},create:function(){this.notification=M({},$t({app:this,constructor:js,defaultSelector:".notification.modal-in"}))},params:{notification:{icon:null,title:null,titleRightText:null,subtitle:null,text:null,closeButton:!1,closeTimeout:null,closeOnClick:!1,swipeToClose:!0,cssClass:null,render:null,containerEl:null}}};function qs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Hs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gs(e,t){return(Gs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ws=function(e){var t,r;function n(t,r){var n;void 0===r&&(r={});var a=Hs(n=e.call(this,r,[t])||this);a.app=t;var i,o,s=N(),l=M({on:{}},t.params.autocomplete);void 0===l.searchbarDisableButton&&(l.searchbarDisableButton="aurora"!==t.theme),a.useModulesParams(l),a.params=M(l,r),a.params.openerEl&&(i=Ot(a.params.openerEl)).length&&(i[0].f7Autocomplete=a),a.params.inputEl&&(o=Ot(a.params.inputEl)).length&&(o[0].f7Autocomplete=a);var c=p(),u=r.url;!u&&i&&i.length&&(i.attr("href")?u=i.attr("href"):i.find("a").length>0&&(u=i.find("a").attr("href"))),u&&"#"!==u&&""!==u||(u=a.params.url);var d=a.params.multiple?"checkbox":"radio";M(a,{$openerEl:i,openerEl:i&&i[0],$inputEl:o,inputEl:o&&o[0],id:c,url:u,value:a.params.value||[],inputType:d,inputName:d+"-"+c,$modalEl:void 0,$dropdownEl:void 0});var h="";function f(){var e=a.$inputEl.val().trim();a.params.source&&a.params.source.call(a,e,(function(t){var r,n,i,s="",l=a.params.limit?Math.min(a.params.limit,t.length):t.length;a.items=t,a.params.highlightMatches&&(e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),r=new RegExp("("+e+")","i"));for(var c=0;c<l;c+=1){var u="object"==typeof t[c]?t[c][a.params.valueProperty]:t[c],p="object"==typeof t[c]?t[c][a.params.textProperty]:t[c];0===c&&(n=u,i=a.items[c]),s+=a.renderItem({value:u,text:a.params.highlightMatches?p.replace(r,"<b>$1</b>"):p},c)}if(""===s&&""===e&&a.params.dropdownPlaceholderText&&(s+=a.renderItem({placeholder:!0,text:a.params.dropdownPlaceholderText})),a.$dropdownEl.find("ul").html(s),a.params.typeahead){if(!n||!i)return;if(0!==n.toLowerCase().indexOf(e.toLowerCase()))return;if(h.toLowerCase()===e.toLowerCase())return void(a.value=[]);if(0===h.toLowerCase().indexOf(e.toLowerCase()))return h=e,void(a.value=[]);o.val(n),o[0].setSelectionRange(e.length,n.length);var d="object"==typeof a.value[0]?a.value[0][a.params.valueProperty]:a.value[0];d&&n.toLowerCase()===d.toLowerCase()||(a.value=[i],a.emit("local::change autocompleteChange",[i]))}h=e}))}function m(){var e,t,r,n=this,i=n.value;if(Ot(n).parents(".autocomplete-values").length>0){if("checkbox"===a.inputType&&!n.checked){for(var o=0;o<a.value.length;o+=1)(r="string"==typeof a.value[o]?a.value[o]:a.value[o][a.params.valueProperty])!==i&&1*r!=1*i||a.value.splice(o,1);a.updateValues(),a.emit("local::change autocompleteChange",a.value)}}else{for(var s=0;s<a.items.length;s+=1)(t="object"==typeof a.items[s]?a.items[s][a.params.valueProperty]:a.items[s])!==i&&1*t!=1*i||(e=a.items[s]);if("radio"===a.inputType)a.value=[e];else if(n.checked)a.value.push(e);else for(var l=0;l<a.value.length;l+=1)(r="object"==typeof a.value[l]?a.value[l][a.params.valueProperty]:a.value[l])!==i&&1*r!=1*i||a.value.splice(l,1);a.updateValues(),("radio"===a.inputType&&n.checked||"checkbox"===a.inputType)&&a.emit("local::change autocompleteChange",a.value)}}function g(e){var t=Ot(e.target);t.is(a.$inputEl[0])||a.$dropdownEl&&t.closest(a.$dropdownEl[0]).length||a.close()}function v(){a.open()}function y(){a.open()}function b(){a.$dropdownEl.find("label.active-state").length>0||setTimeout((function(){a.close()}),0)}function _(){a.positionDropdown()}function w(e){if(a.opened){if(27===e.keyCode)return e.preventDefault(),void a.$inputEl.blur();if(13===e.keyCode){var t=a.$dropdownEl.find(".autocomplete-dropdown-selected label");return t.length?(e.preventDefault(),t.trigger("click"),void a.$inputEl.blur()):void(a.params.typeahead&&(e.preventDefault(),a.$inputEl.blur()))}if(40===e.keyCode||38===e.keyCode){e.preventDefault();var r,n=a.$dropdownEl.find(".autocomplete-dropdown-selected");n.length&&(r=n[40===e.keyCode?"next":"prev"]("li")).length||(r=a.$dropdownEl.find("li").eq(40===e.keyCode?0:a.$dropdownEl.find("li").length-1)),r.hasClass("autocomplete-dropdown-placeholder")||(n.removeClass("autocomplete-dropdown-selected"),r.addClass("autocomplete-dropdown-selected"))}}}function E(){for(var e,t=Ot(this),r=0;r<a.items.length;r+=1){var n="object"==typeof a.items[r]?a.items[r][a.params.valueProperty]:a.items[r],i=t.attr("data-value");n!==i&&1*n!=1*i||(e=a.items[r])}a.params.updateInputValueOnSelect&&(a.$inputEl.val("object"==typeof e?e[a.params.valueProperty]:e),a.$inputEl.trigger("input change")),a.value=[e],a.emit("local::change autocompleteChange",[e]),a.close()}return a.attachEvents=function(){"dropdown"!==a.params.openIn&&a.$openerEl&&a.$openerEl.on("click",v),"dropdown"===a.params.openIn&&a.$inputEl&&(a.$inputEl.on("focus",y),a.$inputEl.on(a.params.inputEvents,f),s.android?Ot("html").on("click",g):a.$inputEl.on("blur",b),a.$inputEl.on("keydown",w))},a.detachEvents=function(){"dropdown"!==a.params.openIn&&a.$openerEl&&a.$openerEl.off("click",v),"dropdown"===a.params.openIn&&a.$inputEl&&(a.$inputEl.off("focus",y),a.$inputEl.off(a.params.inputEvents,f),s.android?Ot("html").off("click",g):a.$inputEl.off("blur",b),a.$inputEl.off("keydown",w))},a.attachDropdownEvents=function(){a.$dropdownEl.on("click","label",E),t.on("resize",_)},a.detachDropdownEvents=function(){a.$dropdownEl.off("click","label",E),t.off("resize",_)},a.attachPageEvents=function(){a.$el.on("change",'input[type="radio"], input[type="checkbox"]',m),a.params.closeOnSelect&&!a.params.multiple&&a.$el.once("click",".list label",(function(){x((function(){a.close()}))}))},a.detachPageEvents=function(){a.$el.off("change",'input[type="radio"], input[type="checkbox"]',m)},a.useModules(),a.init(),a||Hs(n)}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,Gs(t,r);var a,i,o,s=n.prototype;return s.positionDropdown=function(){var e,t=this,r=t.$inputEl,n=t.app,a=t.$dropdownEl,i=r.parents(".page-content");if(0!==i.length){var o,s=r.offset(),l=r[0].offsetWidth,c=r[0].offsetHeight,u=r.parents(".list");u.parents().each((function(e){if(!o){var t=Ot(e);t.parent(i).length&&(o=t)}}));var p,d=u.offset(),h=parseInt(i.css("padding-bottom"),10),f=u.length>0?d.left-i.offset().left:0,m=s.left-(u.length>0?d.left:0)-(n.rtl,0),g=s.top-(i.offset().top-i[0].scrollTop),v=i[0].scrollHeight-h-(g+i[0].scrollTop)-r[0].offsetHeight,y=n.rtl?"padding-right":"padding-left";u.length&&!t.params.expandInput&&(p=(n.rtl?u[0].offsetWidth-m-l:m)-("md"===n.theme?16:15)),a.css({left:(u.length>0?f:m)+"px",top:g+i[0].scrollTop+c+"px",width:(u.length>0?u[0].offsetWidth:l)+"px"}),a.children(".autocomplete-dropdown-inner").css(((e={maxHeight:v+"px"})[y]=u.length>0&&!t.params.expandInput?p+"px":"",e))}},s.focus=function(){this.$el.find("input[type=search]").focus()},s.source=function(e){var t=this;if(t.params.source){var r=t.$el;t.params.source.call(t,e,(function(n){var a="",i=t.params.limit?Math.min(t.params.limit,n.length):n.length;t.items=n;for(var o=0;o<i;o+=1){for(var s=!1,l="object"==typeof n[o]?n[o][t.params.valueProperty]:n[o],c=0;c<t.value.length;c+=1){var u="object"==typeof t.value[c]?t.value[c][t.params.valueProperty]:t.value[c];u!==l&&1*u!=1*l||(s=!0)}a+=t.renderItem({value:l,text:"object"==typeof n[o]?n[o][t.params.textProperty]:n[o],inputType:t.inputType,id:t.id,inputName:t.inputName,selected:s},o)}r.find(".autocomplete-found ul").html(a),0===n.length?0!==e.length?(r.find(".autocomplete-not-found").show(),r.find(".autocomplete-found, .autocomplete-values").hide()):(r.find(".autocomplete-values").show(),r.find(".autocomplete-found, .autocomplete-not-found").hide()):(r.find(".autocomplete-found").show(),r.find(".autocomplete-not-found, .autocomplete-values").hide())}))}},s.updateValues=function(){for(var e=this,t="",r=0;r<e.value.length;r+=1)t+=e.renderItem({value:"object"==typeof e.value[r]?e.value[r][e.params.valueProperty]:e.value[r],text:"object"==typeof e.value[r]?e.value[r][e.params.textProperty]:e.value[r],inputType:e.inputType,id:e.id,inputName:e.inputName+"-checked}",selected:!0},r);e.$el.find(".autocomplete-values ul").html(t)},s.preloaderHide=function(){var e=this;"dropdown"===e.params.openIn&&e.$dropdownEl?e.$dropdownEl.find(".autocomplete-preloader").removeClass("autocomplete-preloader-visible"):Ot(".autocomplete-preloader").removeClass("autocomplete-preloader-visible")},s.preloaderShow=function(){var e=this;"dropdown"===e.params.openIn&&e.$dropdownEl?e.$dropdownEl.find(".autocomplete-preloader").addClass("autocomplete-preloader-visible"):Ot(".autocomplete-preloader").addClass("autocomplete-preloader-visible")},s.renderPreloader=function(){var e=this,t={iosPreloaderContent:m,mdPreloaderContent:f,auroraPreloaderContent:g};return jn("div",{class:"autocomplete-preloader preloader "+(e.params.preloaderColor?"color-"+e.params.preloaderColor:"")},t[e.app.theme+"PreloaderContent"]||"")},s.renderSearchbar=function(){var e=this;return e.params.renderSearchbar?e.params.renderSearchbar.call(e):jn("form",{class:"searchbar"},jn("div",{class:"searchbar-inner"},jn("div",{class:"searchbar-input-wrap"},jn("input",{type:"search",spellcheck:e.params.searchbarSpellcheck||"false",placeholder:e.params.searchbarPlaceholder}),jn("i",{class:"searchbar-icon"}),jn("span",{class:"input-clear-button"})),e.params.searchbarDisableButton&&jn("span",{class:"searchbar-disable-button"},e.params.searchbarDisableText)))},s.renderItem=function(e,t){var r=this;if(r.params.renderItem)return r.params.renderItem.call(r,e,t);var n=e.value&&"string"==typeof e.value?e.value.replace(/"/g,"&quot;"):e.value;return"dropdown"!==r.params.openIn?jn("li",null,jn("label",{class:"item-"+e.inputType+" item-content"},jn("input",{type:e.inputType,name:e.inputName,value:n,_checked:e.selected}),jn("i",{class:"icon icon-"+e.inputType}),jn("div",{class:"item-inner"},jn("div",{class:"item-title"},e.text)))):e.placeholder?jn("li",{class:"autocomplete-dropdown-placeholder"},jn("label",{class:"item-content"},jn("div",{class:"item-inner"},jn("div",{class:"item-title"},e.text)))):jn("li",null,jn("label",{class:"item-radio item-content","data-value":n},jn("div",{class:"item-inner"},jn("div",{class:"item-title"},e.text))))},s.renderNavbar=function(){var e=this;if(e.params.renderNavbar)return e.params.renderNavbar.call(e);var t=e.params.pageTitle;void 0===t&&e.$openerEl&&e.$openerEl.length&&(t=e.$openerEl.find(".item-title").text().trim());var r="popup"===e.params.openIn,n=r?e.params.preloader&&jn("div",{class:"left"},e.renderPreloader()):jn("div",{class:"left sliding"},jn("a",{class:"link back"},jn("i",{class:"icon icon-back"}),jn("span",{class:"if-not-md"},e.params.pageBackLinkText))),a=r?jn("div",{class:"right"},jn("a",{class:"link popup-close","data-popup":".autocomplete-popup"},e.params.popupCloseLinkText)):e.params.preloader&&jn("div",{class:"right"},e.renderPreloader());return jn("div",{class:"navbar "+(e.params.navbarColorTheme?"color-"+e.params.navbarColorTheme:"")},jn("div",{class:"navbar-bg"}),jn("div",{class:"navbar-inner "+(e.params.navbarColorTheme?"color-"+e.params.navbarColorTheme:"")},n,t&&jn("div",{class:"title sliding"},t),a,jn("div",{class:"subnavbar sliding"},e.renderSearchbar())))},s.renderDropdown=function(){var e=this;return e.params.renderDropdown?e.params.renderDropdown.call(e,e.items):jn("div",{class:"autocomplete-dropdown"},jn("div",{class:"autocomplete-dropdown-inner"},jn("div",{class:"list "+(e.params.expandInput?"":"no-safe-areas")},jn("ul",null))),e.params.preloader&&e.renderPreloader())},s.renderPage=function(e){var t=this;return t.params.renderPage?t.params.renderPage.call(t,t.items):jn("div",{class:"page page-with-subnavbar autocomplete-page","data-name":"autocomplete-page"},t.renderNavbar(e),jn("div",{class:"searchbar-backdrop"}),jn("div",{class:"page-content"},jn("div",{class:"list autocomplete-list autocomplete-found autocomplete-list-"+t.id+" "+(t.params.formColorTheme?"color-"+t.params.formColorTheme:"")},jn("ul",null)),jn("div",{class:"list autocomplete-not-found"},jn("ul",null,jn("li",{class:"item-content"},jn("div",{class:"item-inner"},jn("div",{class:"item-title"},t.params.notFoundText))))),jn("div",{class:"list autocomplete-values"},jn("ul",null))))},s.renderPopup=function(){var e=this;return e.params.renderPopup?e.params.renderPopup.call(e,e.items):jn("div",{class:"popup autocomplete-popup"},jn("div",{class:"view"},e.renderPage(!0),";"))},s.onOpen=function(e,t){var r=this,n=r.app,a=Ot(t);if(r.$el=a,r.el=a[0],r.openedIn=e,r.opened=!0,"dropdown"===r.params.openIn)r.attachDropdownEvents(),r.$dropdownEl.addClass("autocomplete-dropdown-in"),r.$inputEl.trigger("input");else{var i=a.find(".searchbar");"page"===r.params.openIn&&"ios"===n.theme&&0===i.length&&(i=Ot(n.navbar.getElByPage(a)).find(".searchbar")),r.searchbar=n.searchbar.create({el:i,backdropEl:a.find(".searchbar-backdrop"),customSearch:!0,on:{search:function(e,t){0===t.length&&r.searchbar.enabled?r.searchbar.backdropShow():r.searchbar.backdropHide(),r.source(t)}}}),r.attachPageEvents(),r.updateValues(),r.params.requestSourceOnOpen&&r.source("")}r.emit("local::open autocompleteOpen",r)},s.autoFocus=function(){var e=this;return e.searchbar&&e.searchbar.$inputEl&&e.searchbar.$inputEl.focus(),e},s.onOpened=function(){var e=this;"dropdown"!==e.params.openIn&&e.params.autoFocus&&e.autoFocus(),e.emit("local::opened autocompleteOpened",e)},s.onClose=function(){var e=this;e.destroyed||(e.searchbar&&e.searchbar.destroy&&(e.searchbar.destroy(),e.searchbar=null,delete e.searchbar),"dropdown"===e.params.openIn?(e.detachDropdownEvents(),e.$dropdownEl.removeClass("autocomplete-dropdown-in").remove(),e.$inputEl.parents(".item-content-dropdown-expanded").removeClass("item-content-dropdown-expanded")):e.detachPageEvents(),e.emit("local::close autocompleteClose",e))},s.onClosed=function(){var e=this;e.destroyed||(e.opened=!1,e.$el=null,e.el=null,delete e.$el,delete e.el,e.emit("local::closed autocompleteClosed",e))},s.openPage=function(){var e=this;if(e.opened)return e;var t=e.renderPage();return e.view.router.navigate({url:e.url,route:{content:t,path:e.url,on:{pageBeforeIn:function(t,r){e.onOpen("page",r.el)},pageAfterIn:function(t,r){e.onOpened("page",r.el)},pageBeforeOut:function(t,r){e.onClose("page",r.el)},pageAfterOut:function(t,r){e.onClosed("page",r.el)}},options:{animate:e.params.animate}}}),e},s.openPopup=function(){var e=this;if(e.opened)return e;var t={content:e.renderPopup(),animate:e.params.animate,push:e.params.popupPush,swipeToClose:e.params.popupSwipeToClose,on:{popupOpen:function(t){e.onOpen("popup",t.el)},popupOpened:function(t){e.onOpened("popup",t.el)},popupClose:function(t){e.onClose("popup",t.el)},popupClosed:function(t){e.onClosed("popup",t.el)}}};return e.params.routableModals&&e.view?e.view.router.navigate({url:e.url,route:{path:e.url,popup:t}}):e.modal=e.app.popup.create(t).open(e.params.animate),e},s.openDropdown=function(){var e=this;e.$dropdownEl||(e.$dropdownEl=Ot(e.renderDropdown())),e.$inputEl.parents(".list").length&&e.$inputEl.parents(".item-content").length>0&&e.params.expandInput&&e.$inputEl.parents(".item-content").addClass("item-content-dropdown-expanded");var t=e.$inputEl.parents(".page-content");e.params.dropdownContainerEl?Ot(e.params.dropdownContainerEl).append(e.$dropdownEl):0===t.length?e.$dropdownEl.insertAfter(e.$inputEl):(e.positionDropdown(),t.append(e.$dropdownEl)),e.onOpen("dropdown",e.$dropdownEl),e.onOpened("dropdown",e.$dropdownEl)},s.open=function(){var e=this;return e.opened||e["open"+e.params.openIn.split("").map((function(e,t){return 0===t?e.toUpperCase():e})).join("")](),e},s.close=function(){var e=this;return e.opened?("dropdown"===e.params.openIn?(e.onClose(),e.onClosed()):e.params.routableModals&&e.view||"page"===e.openedIn?e.view.router.back({animate:e.params.animate}):(e.modal.once("modalClosed",(function(){x((function(){e.destroyed||(e.modal.destroy(),delete e.modal)}))})),e.modal.close()),e):e},s.init=function(){this.attachEvents()},s.destroy=function(){var e=this;e.emit("local::beforeDestroy autocompleteBeforeDestroy",e),e.detachEvents(),e.$inputEl&&e.$inputEl[0]&&delete e.$inputEl[0].f7Autocomplete,e.$openerEl&&e.$openerEl[0]&&delete e.$openerEl[0].f7Autocomplete,y(e),e.destroyed=!0},a=n,(i=[{key:"view",get:function(){var e,t=this,r=t.$openerEl,n=t.$inputEl,a=t.app;if(t.params.view)e=t.params.view;else if(r||n){var i=r||n;e=i.closest(".view").length&&i.closest(".view")[0].f7View}return e||(e=a.views.main),e}}])&&qs(a.prototype,i),o&&qs(a,o),n}(q),Xs={name:"autocomplete",params:{autocomplete:{openerEl:void 0,inputEl:void 0,view:void 0,dropdownContainerEl:void 0,dropdownPlaceholderText:void 0,typeahead:!1,highlightMatches:!0,expandInput:!1,updateInputValueOnSelect:!0,inputEvents:"input",value:void 0,multiple:!1,source:void 0,limit:void 0,valueProperty:"id",textProperty:"text",openIn:"page",pageBackLinkText:"Back",popupCloseLinkText:"Close",pageTitle:void 0,searchbarPlaceholder:"Search...",searchbarDisableText:"Cancel",searchbarDisableButton:void 0,searchbarSpellcheck:!1,popupPush:!1,popupSwipeToClose:void 0,animate:!0,autoFocus:!1,closeOnSelect:!1,notFoundText:"Nothing found",requestSourceOnOpen:!1,preloaderColor:void 0,preloader:!1,formColorTheme:void 0,navbarColorTheme:void 0,routableModals:!1,url:"select/",renderDropdown:void 0,renderPage:void 0,renderPopup:void 0,renderItem:void 0,renderSearchbar:void 0,renderNavbar:void 0}},static:{Autocomplete:Ws},create:function(){var e=this;e.autocomplete=M(Dt({defaultSelector:void 0,constructor:Ws,app:e,domProp:"f7Autocomplete"}),{open:function(t){var r=e.autocomplete.get(t);if(r&&r.open)return r.open()},close:function(t){var r=e.autocomplete.get(t);if(r&&r.close)return r.close()}})}};function Zs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ys(e,t){return(Ys=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ks=function(e){var t,r;function n(t,r){var n;void 0===r&&(r={});var a=Zs(n=e.call(this,r,[t])||this),i=F(),s=M({},t.params.tooltip),l=o();a.useModulesParams(s),a.params=M(s,r),void 0===r.offset&&i.touch&&"hover"===a.params.trigger&&(a.params.offset=10);var c=a.params,u=c.targetEl,p=c.containerEl;if(!u&&!a.params.delegated)return a||Zs(n);var d=Ot(u);if(0===d.length&&!a.params.delegated)return a||Zs(n);if(d[0]&&d[0].f7Tooltip&&!a.params.delegated)return d[0].f7Tooltip||Zs(n);var h=Ot(p||t.$el).eq(0);0===h.length&&(h=t.$el);var f=Ot(a.render()).eq(0);M(a,{app:t,$targetEl:d,targetEl:d&&d[0],$containerEl:h,containerEl:h&&h[0],$el:f,el:f&&f[0],text:a.params.text||"",visible:!1,opened:!1}),d[0]&&(d[0].f7Tooltip=a);var m,g={};function v(){a.opened?a.hide():a.show(this)}function y(e){a.opened&&(Ot(e.target).closest(d).length||Ot(e.target).closest(a.$el).length)||a.hide()}function b(e){m||(m=!0,g.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,g.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,a.show(this))}function _(e){if(m){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,r="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;Math.pow(Math.pow(t-g.x,2)+Math.pow(r-g.y,2),.5)>50&&(m=!1,a.hide())}}function x(){m&&(m=!1,a.hide())}function w(){a.show(this)}function E(){a.hide()}function C(){f.hasClass("tooltip-in")||f.removeClass("tooltip-out").remove()}return a.attachEvents=function(){if(f.on("transitionend",C),"click"===a.params.trigger)return a.params.delegated?Ot(l).on("click",a.params.targetEl,v):a.$targetEl.on("click",v),void Ot("html").on("click",y);if("manual"!==a.params.trigger)if(i.touch){var e=!!i.passiveListener&&{passive:!0};a.params.delegated?Ot(l).on(t.touchEvents.start,a.params.targetEl,b,e):a.$targetEl.on(t.touchEvents.start,b,e),t.on("touchmove",_),t.on("touchend:passive",x)}else a.params.delegated?(Ot(l).on(i.pointerEvents?"pointerenter":"mouseenter",a.params.targetEl,w,!0),Ot(l).on(i.pointerEvents?"pointerleave":"mouseleave",a.params.targetEl,E,!0)):(a.$targetEl.on(i.pointerEvents?"pointerenter":"mouseenter",w),a.$targetEl.on(i.pointerEvents?"pointerleave":"mouseleave",E))},a.detachEvents=function(){if(f.off("transitionend",C),"click"===a.params.trigger)return a.params.delegated?Ot(l).on("click",a.params.targetEl,v):a.$targetEl.off("click",v),void Ot("html").off("click",y);if("manual"!==a.params.trigger)if(i.touch){var e=!!i.passiveListener&&{passive:!0};a.params.delegated?Ot(l).off(t.touchEvents.start,a.params.targetEl,b,e):a.$targetEl.off(t.touchEvents.start,b,e),t.off("touchmove",_),t.off("touchend:passive",x)}else a.params.delegated?(Ot(l).off(i.pointerEvents?"pointerenter":"mouseenter",a.params.targetEl,w,!0),Ot(l).off(i.pointerEvents?"pointerleave":"mouseleave",a.params.targetEl,E,!0)):(a.$targetEl.off(i.pointerEvents?"pointerenter":"mouseenter",w),a.$targetEl.off(i.pointerEvents?"pointerleave":"mouseleave",E))},a.useModules(),a.init(),a||Zs(n)}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,Ys(t,r);var a=n.prototype;return a.setTargetEl=function(e){var t=this;return t.detachEvents(),t.$targetEl=Ot(e),t.targetEl=t.$targetEl[0],t.attachEvents(),t},a.position=function(e){var t=this,r=t.$el,n=t.app,a=t.$containerEl,i=!!t.params.containerEl,o=t.params.offset||0;r.css({left:"",top:""});var s,l,c,u,p=Ot(e||t.targetEl),d=[r.width(),r.height()],h=d[0],f=d[1];r.css({left:"",top:""});var m=i&&a.length?a[0].getBoundingClientRect():n;if(p&&p.length>0){if(s=p.outerWidth(),l=p.outerHeight(),void 0===s&&void 0===l){var g=p[0].getBoundingClientRect();s=g.width,l=g.height}var v=p.offset();c=v.left-m.left,u=v.top-m.top;var y=p.parents(".page");y.length>0&&(u-=y[0].scrollTop)}var b=[0,0,0],_=b[0],x=b[1],w="top";f+o<u?x=u-f-o:f<m.height-u-l?(w="bottom",x=u+l+o):(w="middle",(x=l/2+u-f/2)<=0?x=8:x+f>=m.height&&(x=m.height-f-8)),"top"===w||"bottom"===w?((_=s/2+c-h/2)<8&&(_=8),_+h>m.width&&(_=m.width-h-8),_<0&&(_=0)):"middle"===w&&((_=c-h)<8||_+h>m.width)&&(_<8&&(_=c+s),_+h>m.width&&(_=m.width-h-8)),r.css({top:x+"px",left:_+"px"})},a.show=function(e){var t=this,r=t.$el,n=t.$targetEl,a=t.$containerEl;a[0]&&r[0]&&!a[0].contains(r[0])&&a.append(r),t.position(e);var i=Ot(e);return t.visible=!0,t.opened=!0,n.trigger("tooltip:show"),r.trigger("tooltip:show"),i.length&&i[0]!==n[0]&&i.trigger("tooltip:show"),t.emit("local::show tooltipShow",t),r.removeClass("tooltip-out").addClass("tooltip-in"),t},a.hide=function(){var e=this,t=e.$el,r=e.$targetEl;return e.visible=!1,e.opened=!1,r.trigger("tooltip:hide"),t.trigger("tooltip:hide"),e.emit("local::hide tooltipHide",e),t.addClass("tooltip-out").removeClass("tooltip-in"),e},a.render=function(){var e=this;if(e.params.render)return e.params.render.call(e,e);var t=e.params;return('\n      <div class="tooltip '+(t.cssClass||"")+'">\n        <div class="tooltip-content">'+(t.text||"")+"</div>\n      </div>\n    ").trim()},a.setText=function(e){var t=this;return void 0===e||(t.params.text=e,t.text=e,t.$el&&t.$el.children(".tooltip-content").html(e),t.opened&&t.position()),t},a.init=function(){this.attachEvents()},a.destroy=function(){var e=this;e.$targetEl&&!e.destroyed&&(e.$targetEl.trigger("tooltip:beforedestroy"),e.emit("local::beforeDestroy tooltipBeforeDestroy",e),e.$el.remove(),e.$targetEl[0]&&delete e.$targetEl[0].f7Tooltip,e.detachEvents(),y(e),e.destroyed=!0)},n}(q),Qs={name:"tooltip",static:{Tooltip:Ks},create:function(){var e=this;e.tooltip=Dt({defaultSelector:".tooltip",constructor:Ks,app:e,domProp:"f7Tooltip"}),e.tooltip.show=function(e){var t=Ot(e);if(0!==t.length){var r=t[0].f7Tooltip;if(r)return r.show(t[0]),r}},e.tooltip.hide=function(e){var t=Ot(e);if(0!==t.length){var r=t[0].f7Tooltip;if(r)return r.hide(),r}},e.tooltip.setText=function(e,t){var r=Ot(e);if(0!==r.length){var n=r[0].f7Tooltip;if(n)return n.setText(t),n}}},params:{tooltip:{targetEl:null,delegated:!1,text:null,cssClass:null,render:null,offset:0,trigger:"hover",containerEl:void 0}},on:{tabMounted:function(e){var t=this;Ot(e).find(".tooltip-init").each((function(e){var r=Ot(e).attr("data-tooltip");r&&t.tooltip.create({targetEl:e,text:r})}))},tabBeforeRemove:function(e){Ot(e).find(".tooltip-init").each((function(e){e.f7Tooltip&&e.f7Tooltip.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".tooltip-init").each((function(e){var r=Ot(e).attr("data-tooltip");r&&t.tooltip.create({targetEl:e,text:r})})),"ios"===t.theme&&e.view&&e.view.router.dynamicNavbar&&e.$navbarEl&&e.$navbarEl.length>0&&e.$navbarEl.find(".tooltip-init").each((function(e){var r=Ot(e).attr("data-tooltip");r&&t.tooltip.create({targetEl:e,text:r})}))},pageBeforeRemove:function(e){e.$el.find(".tooltip-init").each((function(e){e.f7Tooltip&&e.f7Tooltip.destroy()})),"ios"===this.theme&&e.view&&e.view.router.dynamicNavbar&&e.$navbarEl&&e.$navbarEl.length>0&&e.$navbarEl.find(".tooltip-init").each((function(e){e.f7Tooltip&&e.f7Tooltip.destroy()}))}},vnode:{"tooltip-init":{insert:function(e){var t=e.elm,r=Ot(t).attr("data-tooltip");r&&this.tooltip.create({targetEl:t,text:r})},update:function(e){var t=e.elm;t.f7Tooltip&&e&&e.data&&e.data.attrs&&e.data.attrs["data-tooltip"]&&t.f7Tooltip.setText(e.data.attrs["data-tooltip"])},destroy:function(e){var t=e.elm;t.f7Tooltip&&t.f7Tooltip.destroy()}}}},Js={open:function(e){void 0===e&&(e=".menu-item-dropdown");if(e){var t=Ot(e).closest(".menu-item-dropdown");if(t.length){var r=t.closest(".menu").eq(0);if(r.length){var n=r.css("z-index"),a=r[0].style.zIndex;r.css("z-index",parseInt(n||0,10)+1),r[0].f7MenuZIndex=a}t.eq(0).addClass("menu-item-dropdown-opened").trigger("menu:opened"),this.emit("menuOpened",t.eq(0)[0])}}},close:function(e){void 0===e&&(e=".menu-item-dropdown-opened");if(e){var t=Ot(e).closest(".menu-item-dropdown-opened");if(t.length){var r=t.closest(".menu").eq(0);if(r.length){var n=r[0].f7MenuZIndex;r.css("z-index",n),delete r[0].f7MenuZIndex}t.eq(0).removeClass("menu-item-dropdown-opened").trigger("menu:closed"),this.emit("menuClosed",t.eq(0)[0])}}}},el={name:"menu",create:function(){B(this,{menu:Js})},on:{click:function(e){var t=this,r=Ot(".menu-item-dropdown-opened");r.length&&r.each((function(r){Ot(e.target).closest(".menu-item-dropdown-opened").length||t.menu.close(r)}))}},clicks:{".menu-item-dropdown":function(e,t,r){if(e.hasClass("menu-item-dropdown-opened")){if(Ot(r.target).closest(".menu-dropdown").length)return;this.menu.close(e)}else this.menu.open(e)},".menu-close":function(){this.menu.close()}}},tl={render:function(e){var t=e.params,r=t.sliderLabel,n=t.sliderValue,a=t.sliderValueEditable,i=t.alphaLabelText;return jn("div",{class:"color-picker-module color-picker-module-alpha-slider"},jn("div",{class:"color-picker-slider-wrap"},r&&jn("div",{class:"color-picker-slider-label"},i),jn("div",{class:"range-slider color-picker-slider color-picker-slider-alpha"}),n&&jn("div",{class:"color-picker-slider-value"},a?jn("input",{type:"number",step:"0.01",min:"0",max:"1",class:"color-picker-value-alpha"}):jn("span",{class:"color-picker-value-alpha"}))))},init:function(e){function t(t){var r=e.value.alpha,n=parseFloat(t.target.value);Number.isNaN(n)?t.target.value=r:(n=Math.max(0,Math.min(1,n)),e.setValue({alpha:n}))}e.alphaRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-alpha"),min:0,max:1,step:.01,value:1,on:{change:function(t,r){var n=Math.floor(100*r)/100;e.setValue({alpha:n})}}}),e.$el.on("change",".color-picker-module-alpha-slider input",t),e.destroyAlphaSliderEvents=function(){e.$el.off("change",".color-picker-module-alpha-slider input",t)}},update:function(e){var t=e.value,r=e.params,n=r.sliderValue,a=r.sliderValueEditable,i=t.alpha;e.alphaRangeSlider.value=i,e.alphaRangeSlider.layout(),n&&a?e.$el.find("input.color-picker-value-alpha").val(i):e.$el.find("span.color-picker-value-alpha").text(i)},destroy:function(e){e.alphaRangeSlider&&e.alphaRangeSlider.destroy&&e.alphaRangeSlider.destroy(),delete e.alphaRangeSlider,e.destroyAlphaSliderEvents&&e.destroyAlphaSliderEvents(),delete e.destroyAlphaSliderEvents}},rl={render:function(){return jn("div",{class:"color-picker-module color-picker-module-current-color"},jn("div",{class:"color-picker-current-color"}))},update:function(e){e.$el.find(".color-picker-module-current-color .color-picker-current-color").css("background-color",e.value.hex)}},nl={render:function(e){var t=e.params,r=t.hexLabel,n=t.hexLabelText,a=t.hexValueEditable;return jn("div",{class:"color-picker-module color-picker-module-hex"},jn("div",{class:"color-picker-hex-wrap"},r&&jn("div",{class:"color-picker-hex-label"},n),jn("div",{class:"color-picker-hex-value"},a?jn("input",{type:"text",class:"color-picker-value-hex"}):jn("span",{class:"color-picker-value-hex"}))))},init:function(e){function t(t){var r=e.value.hex,n=t.target.value.replace(/#/g,"");if(Number.isNaN(n)||!n||3!==n.length&&6!==n.length)t.target.value=r;else{var a=parseInt(n,16);a>parseInt("ffffff",16)&&(n="fff"),a<0&&(n="000"),e.setValue({hex:n})}}e.$el.on("change",".color-picker-module-hex input",t),e.destroyHexEvents=function(){e.$el.off("change",".color-picker-module-hex input",t)}},update:function(e){var t=e.value,r=e.params.hexValueEditable,n=t.hex;r?e.$el.find("input.color-picker-value-hex").val(n):e.$el.find("span.color-picker-value-hex").text(n)},destroy:function(e){e.destroyHexEvents&&e.destroyHexEvents(),delete e.destroyHexEvents}},al={render:function(e){var t=e.params,r=t.sliderLabel,n=t.sliderValue,a=t.sliderValueEditable,i=t.hueLabelText,o=t.saturationLabelText,s=t.brightnessLabelText;return jn("div",{class:"color-picker-module color-picker-module-hsb-sliders"},jn("div",{class:"color-picker-slider-wrap"},r&&jn("div",{class:"color-picker-slider-label"},i),jn("div",{class:"range-slider color-picker-slider color-picker-slider-hue"}),n&&jn("div",{class:"color-picker-slider-value"},a?jn("input",{type:"number",step:"0.1",min:"0",max:"360",class:"color-picker-value-hue","data-color-index":"0"}):jn("span",{class:"color-picker-value-hue"}))),jn("div",{class:"color-picker-slider-wrap"},r&&jn("div",{class:"color-picker-slider-label"},o),jn("div",{class:"range-slider color-picker-slider color-picker-slider-saturation"}),n&&jn("div",{class:"color-picker-slider-value"},a?jn("input",{type:"number",step:"0.1",min:"0",max:"100",class:"color-picker-value-saturation","data-color-index":"1"}):jn("span",{class:"color-picker-value-saturation"}))),jn("div",{class:"color-picker-slider-wrap"},r&&jn("div",{class:"color-picker-slider-label"},s),jn("div",{class:"range-slider color-picker-slider color-picker-slider-brightness"}),n&&jn("div",{class:"color-picker-slider-value"},a?jn("input",{type:"number",step:"0.1",min:"0",max:"100",class:"color-picker-value-brightness","data-color-index":"2"}):jn("span",{class:"color-picker-value-brightness"}))))},init:function(e){function t(t){var r=[].concat(e.value.hsb),n=parseInt(Ot(t.target).attr("data-color-index"),10),a=parseFloat(t.target.value);Number.isNaN(a)?t.target.value=r[n]:(a=0===n?Math.max(0,Math.min(360,a)):Math.max(0,Math.min(100,a))/100,r[n]=a,e.setValue({hsb:r}))}e.hueRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-hue"),min:0,max:360,step:.1,value:0,on:{change:function(t,r){e.setValue({hue:r})}}}),e.saturationRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-saturation"),min:0,max:1,step:.001,value:0,on:{change:function(t,r){var n=Math.floor(1e3*r)/1e3;e.setValue({hsb:[e.value.hsb[0],n,e.value.hsb[2]]})}}}),e.brightnessRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-brightness"),min:0,max:1,step:.001,value:0,on:{change:function(t,r){var n=Math.floor(1e3*r)/1e3;e.setValue({hsb:[e.value.hsb[0],e.value.hsb[1],n]})}}}),e.$el.on("change",".color-picker-module-hsb-sliders input",t),e.destroyHsbSlidersEvents=function(){e.$el.off("change",".color-picker-module-hsb-sliders input",t)}},update:function(e){var t=e.app,r=e.value,n=e.params,a=n.sliderValue,i=n.sliderValueEditable,o=r.hsb,s=r.hue;e.hueRangeSlider.value=s,e.saturationRangeSlider.value=o[1],e.brightnessRangeSlider.value=o[2],e.hueRangeSlider.layout(),e.saturationRangeSlider.layout(),e.brightnessRangeSlider.layout();var l=R(o[0],o[1],1),c=R(o[0],0,1),u=R(o[0],1,1),p=o[2];e.hueRangeSlider.$el[0].style.setProperty("--f7-range-knob-color","hsl("+s+", 100%, 50%)"),e.saturationRangeSlider.$el[0].style.setProperty("--f7-range-knob-color","hsl("+l[0]+", "+100*l[1]+"%, "+100*l[2]+"%)"),e.brightnessRangeSlider.$el[0].style.setProperty("--f7-range-knob-color","rgb("+255*p+", "+255*p+", "+255*p+")"),e.saturationRangeSlider.$el.find(".range-bar").css("background-image","linear-gradient("+(t.rtl?"to left":"to right")+", hsl("+c[0]+", "+100*c[1]+"%, "+100*c[2]+"%), hsl("+u[0]+", "+100*u[1]+"%, "+100*u[2]+"%))"),a&&i?(e.$el.find("input.color-picker-value-hue").val(""+s),e.$el.find("input.color-picker-value-saturation").val(""+1e3*o[1]/10),e.$el.find("input.color-picker-value-brightness").val(""+1e3*o[2]/10)):a&&(e.$el.find("span.color-picker-value-hue").text(""+s),e.$el.find("span.color-picker-value-saturation").text(""+1e3*o[1]/10),e.$el.find("span.color-picker-value-brightness").text(""+1e3*o[2]/10))},destroy:function(e){e.hueRangeSlider&&e.hueRangeSlider.destroy&&e.hueRangeSlider.destroy(),e.saturationRangeSlider&&e.saturationRangeSlider.destroy&&e.saturationRangeSlider.destroy(),e.brightnessRangeSlider&&e.brightnessRangeSlider.destroy&&e.brightnessRangeSlider.destroy(),delete e.hueRangeSlider,delete e.saturationRangeSlider,delete e.brightnessRangeSlider,e.destroyHsbSlidersEvents&&e.destroyHsbSlidersEvents(),delete e.destroyHsbSlidersEvents}},il={render:function(e){var t=e.params,r=t.sliderLabel,n=t.sliderValue,a=t.sliderValueEditable,i=t.hueLabelText;return jn("div",{class:"color-picker-module color-picker-module-hue-slider"},jn("div",{class:"color-picker-slider-wrap"},r&&jn("div",{class:"color-picker-slider-label"},i),jn("div",{class:"range-slider color-picker-slider color-picker-slider-hue"}),n&&jn("div",{class:"color-picker-slider-value"},a?jn("input",{type:"number",step:"0.1",min:"0",max:"360",class:"color-picker-value-hue"}):jn("span",{class:"color-picker-value-hue"}))))},init:function(e){e.hueRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-hue"),min:0,max:360,step:.1,value:0,on:{change:function(t,r){e.setValue({hue:r})}}})},update:function(e){var t=e.value,r=e.params,n=r.sliderValue,a=r.sliderValueEditable,i=t.hue;e.hueRangeSlider.value=i,e.hueRangeSlider.layout(),e.hueRangeSlider.$el[0].style.setProperty("--f7-range-knob-color","hsl("+i+", 100%, 50%)"),n&&a?e.$el.find("input.color-picker-value-hue").val(""+i):n&&e.$el.find("span.color-picker-value-hue").text(""+i)},destroy:function(e){e.hueRangeSlider&&e.hueRangeSlider.destroy&&e.hueRangeSlider.destroy(),delete e.hueRangeSlider}},ol={render:function(e){var t=e.params,r=t.sliderLabel,n=t.sliderValue,a=t.sliderValueEditable,i=t.brightnessLabelText;return jn("div",{class:"color-picker-module color-picker-module-brightness-slider"},jn("div",{class:"color-picker-slider-wrap"},r&&jn("div",{class:"color-picker-slider-label"},i),jn("div",{class:"range-slider color-picker-slider color-picker-slider-brightness"}),n&&jn("div",{class:"color-picker-slider-value"},a?jn("input",{type:"number",step:"0.1",min:"0",max:"100",class:"color-picker-value-brightness"}):jn("span",{class:"color-picker-value-brightness"}))))},init:function(e){e.brightnessRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-brightness"),min:0,max:1,step:.001,value:0,on:{change:function(t,r){var n=Math.floor(1e3*r)/1e3;e.setValue({hsb:[e.value.hsb[0],e.value.hsb[1],n]})}}})},update:function(e){var t=e.value,r=e.app,n=e.params,a=n.sliderValue,i=n.sliderValueEditable,o=t.hsb;e.brightnessRangeSlider.value=o[2],e.brightnessRangeSlider.layout();var s=R(o[0],o[1],o[2]),l=R(o[0],o[1],0),c=R(o[0],o[1],1);e.brightnessRangeSlider.$el[0].style.setProperty("--f7-range-knob-color","hsl("+s[0]+", "+100*s[1]+"%, "+100*s[2]+"%)"),e.brightnessRangeSlider.$el.find(".range-bar").css("background-image","linear-gradient("+(r.rtl?"to left":"to right")+", hsl("+l[0]+", "+100*l[1]+"%, "+100*l[2]+"%), hsl("+c[0]+", "+100*c[1]+"%, "+100*c[2]+"%))"),a&&i?e.$el.find("input.color-picker-value-brightness").val(""+1e3*o[2]/10):a&&e.$el.find("span.color-picker-value-brightness").text(""+1e3*o[2]/10)},destroy:function(e){e.brightnessRangeSlider&&e.brightnessRangeSlider.destroy&&e.brightnessRangeSlider.destroy(),delete e.brightnessRangeSlider}},sl={render:function(e){return jn("div",{class:"color-picker-module color-picker-module-palette"},jn("div",{class:"color-picker-palette"},e.params.palette.map((function(e){if(Array.isArray(e)){var t='<div class="color-picker-palette-row">';return t+=e.map((function(e){return'\n                <div class="color-picker-palette-value" data-palette-color="'+e+'" style="background-color: '+e+'"></div>\n              '})).join(""),t+="</div>"}return jn("div",{class:"color-picker-palette-value","data-palette-color":e,style:"background-color: "+e})}))))},init:function(e){function t(t){var r=Ot(t.target).attr("data-palette-color");e.setValue({hex:r})}e.$el.on("click",".color-picker-module-palette .color-picker-palette-value",t),e.destroyPaletteEvents=function(){e.$el.off("click",".color-picker-module-hex input",t)}},destroy:function(e){e.destroyPaletteEvents&&e.destroyPaletteEvents(),delete e.destroyPaletteEvents}},ll={render:function(){return jn("div",{class:"color-picker-module color-picker-module-initial-current-colors"},jn("div",{class:"color-picker-initial-current-colors"},jn("div",{class:"color-picker-initial-color"}),jn("div",{class:"color-picker-current-color"})))},init:function(e){function t(){if(e.initialValue){var t=e.initialValue,r=t.hex,n=t.alpha;e.setValue({hex:r,alpha:n})}}e.$el.on("click",".color-picker-initial-color",t),e.destroyInitialCurrentEvents=function(){e.$el.off("click",".color-picker-initial-color",t)}},update:function(e){e.$el.find(".color-picker-module-initial-current-colors .color-picker-initial-color").css("background-color",e.initialValue.hex),e.$el.find(".color-picker-module-initial-current-colors .color-picker-current-color").css("background-color",e.value.hex)},destroy:function(e){e.destroyInitialCurrentEvents&&e.destroyInitialCurrentEvents(),delete e.destroyInitialCurrentEvents}},cl={render:function(e){var t=e.params,r=t.barLabel,n=t.barValue,a=t.barValueEditable,i=t.redLabelText,o=t.greenLabelText,s=t.blueLabelText;return jn("div",{class:"color-picker-module color-picker-module-rgb-bars"},jn("div",{class:"color-picker-bar-wrap"},r&&jn("div",{class:"color-picker-bar-label"},i),jn("div",{class:"range-slider color-picker-bar color-picker-bar-red"}),n&&jn("div",{class:"color-picker-bar-value"},a?jn("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-bar-red","data-color-index":"0"}):jn("span",{class:"color-picker-value-bar-red"}))),jn("div",{class:"color-picker-bar-wrap"},r&&jn("div",{class:"color-picker-bar-label"},o),jn("div",{class:"range-slider color-picker-bar color-picker-bar-green"}),n&&jn("div",{class:"color-picker-bar-value"},a?jn("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-bar-green","data-color-index":"1"}):jn("span",{class:"color-picker-value-bar-green"}))),jn("div",{class:"color-picker-bar-wrap"},r&&jn("div",{class:"color-picker-bar-label"},s),jn("div",{class:"range-slider color-picker-bar color-picker-bar-blue"}),n&&jn("div",{class:"color-picker-bar-value"},a?jn("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-bar-blue","data-color-index":"2"}):jn("span",{class:"color-picker-value-bar-blue"}))))},init:function(e){function t(t){var r=[].concat(e.value.rgb),n=parseInt(Ot(t.target).attr("data-color-index"),10),a=parseInt(t.target.value,10);Number.isNaN(a)?t.target.value=r[n]:(a=Math.max(0,Math.min(255,a)),r[n]=a,e.setValue({rgb:r}))}e.redBar=e.app.range.create({el:e.$el.find(".color-picker-bar-red"),min:0,max:255,step:1,value:0,vertical:!0,on:{change:function(t,r){e.setValue({rgb:[r,e.value.rgb[1],e.value.rgb[2]]})}}}),e.greenBar=e.app.range.create({el:e.$el.find(".color-picker-bar-green"),min:0,max:255,step:1,value:0,vertical:!0,on:{change:function(t,r){e.setValue({rgb:[e.value.rgb[0],r,e.value.rgb[2]]})}}}),e.blueBar=e.app.range.create({el:e.$el.find(".color-picker-bar-blue"),min:0,max:255,step:1,value:0,vertical:!0,on:{change:function(t,r){e.setValue({rgb:[e.value.rgb[0],e.value.rgb[1],r]})}}}),e.$el.on("change",".color-picker-module-rgb-bars input",t),e.destroyRgbBarsEvents=function(){e.$el.off("change",".color-picker-module-rgb-bars input",t)}},update:function(e){var t=e.value,r=e.redBar,n=e.greenBar,a=e.blueBar,i=e.params,o=i.barValue,s=i.barValueEditable,l=t.rgb;r.value=l[0],n.value=l[1],a.value=l[2],r.layout(),n.layout(),a.layout(),r.$el.find(".range-bar").css("background-image","linear-gradient(to top, rgb(0, "+l[1]+", "+l[2]+"), rgb(255, "+l[1]+", "+l[2]+"))"),n.$el.find(".range-bar").css("background-image","linear-gradient(to top, rgb("+l[0]+", 0, "+l[2]+"), rgb("+l[0]+", 255, "+l[2]+"))"),a.$el.find(".range-bar").css("background-image","linear-gradient(to top, rgb("+l[0]+", "+l[1]+", 0), rgb("+l[0]+", "+l[1]+", 255))"),o&&s?(e.$el.find("input.color-picker-value-bar-red").val(l[0]),e.$el.find("input.color-picker-value-bar-green").val(l[1]),e.$el.find("input.color-picker-value-bar-blue").val(l[2])):o&&(e.$el.find("span.color-picker-value-bar-red").text(l[0]),e.$el.find("span.color-picker-value-bar-green").text(l[1]),e.$el.find("span.color-picker-value-bar-blue").text(l[2]))},destroy:function(e){e.redBar&&e.redBar.destroy&&e.redBar.destroy(),e.greenBar&&e.greenBar.destroy&&e.greenBar.destroy(),e.blueBar&&e.blueBar.destroy&&e.blueBar.destroy(),delete e.redBar,delete e.greenBar,delete e.blueBar,e.destroyRgbBarsEvents&&e.destroyRgbBarsEvents(),delete e.destroyRgbBarsEvents}},ul={render:function(e){var t=e.params,r=t.sliderLabel,n=t.sliderValue,a=t.sliderValueEditable,i=t.redLabelText,o=t.greenLabelText,s=t.blueLabelText;return jn("div",{class:"color-picker-module color-picker-module-rgb-sliders"},jn("div",{class:"color-picker-slider-wrap"},r&&jn("div",{class:"color-picker-slider-label"},i),jn("div",{class:"range-slider color-picker-slider color-picker-slider-red"}),n&&jn("div",{class:"color-picker-slider-value"},a?jn("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-red","data-color-index":"0"}):jn("span",{class:"color-picker-value-red"}))),jn("div",{class:"color-picker-slider-wrap"},r&&jn("div",{class:"color-picker-slider-label"},o),jn("div",{class:"range-slider color-picker-slider color-picker-slider-green"}),n&&jn("div",{class:"color-picker-slider-value"},a?jn("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-green","data-color-index":"1"}):jn("span",{class:"color-picker-value-green"}))),jn("div",{class:"color-picker-slider-wrap"},r&&jn("div",{class:"color-picker-slider-label"},s),jn("div",{class:"range-slider color-picker-slider color-picker-slider-blue"}),n&&jn("div",{class:"color-picker-slider-value"},a?jn("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-blue","data-color-index":"2"}):jn("span",{class:"color-picker-value-blue"}))))},init:function(e){function t(t){var r=[].concat(e.value.rgb),n=parseInt(Ot(t.target).attr("data-color-index"),10),a=parseInt(t.target.value,10);Number.isNaN(a)?t.target.value=r[n]:(a=Math.max(0,Math.min(255,a)),r[n]=a,e.setValue({rgb:r}))}e.redRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-red"),min:0,max:255,step:1,value:0,on:{change:function(t,r){e.setValue({rgb:[r,e.value.rgb[1],e.value.rgb[2]]})}}}),e.greenRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-green"),min:0,max:255,step:1,value:0,on:{change:function(t,r){e.setValue({rgb:[e.value.rgb[0],r,e.value.rgb[2]]})}}}),e.blueRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-blue"),min:0,max:255,step:1,value:0,on:{change:function(t,r){e.setValue({rgb:[e.value.rgb[0],e.value.rgb[1],r]})}}}),e.$el.on("change",".color-picker-module-rgb-sliders input",t),e.destroyRgbSlidersEvents=function(){e.$el.off("change",".color-picker-module-rgb-sliders input",t)}},update:function(e){var t=e.app,r=e.value,n=e.redRangeSlider,a=e.greenRangeSlider,i=e.blueRangeSlider,o=e.params,s=o.sliderValue,l=o.sliderValueEditable,c=r.rgb;n.value=c[0],a.value=c[1],i.value=c[2],n.layout(),a.layout(),i.layout(),n.$el[0].style.setProperty("--f7-range-knob-color","rgb("+c[0]+", "+c[1]+", "+c[2]+")"),a.$el[0].style.setProperty("--f7-range-knob-color","rgb("+c[0]+", "+c[1]+", "+c[2]+")"),i.$el[0].style.setProperty("--f7-range-knob-color","rgb("+c[0]+", "+c[1]+", "+c[2]+")");var u=t.rtl?"to left":"to right";n.$el.find(".range-bar").css("background-image","linear-gradient("+u+", rgb(0, "+c[1]+", "+c[2]+"), rgb(255, "+c[1]+", "+c[2]+"))"),a.$el.find(".range-bar").css("background-image","linear-gradient("+u+", rgb("+c[0]+", 0, "+c[2]+"), rgb("+c[0]+", 255, "+c[2]+"))"),i.$el.find(".range-bar").css("background-image","linear-gradient("+u+", rgb("+c[0]+", "+c[1]+", 0), rgb("+c[0]+", "+c[1]+", 255))"),s&&l?(e.$el.find("input.color-picker-value-red").val(c[0]),e.$el.find("input.color-picker-value-green").val(c[1]),e.$el.find("input.color-picker-value-blue").val(c[2])):s&&(e.$el.find("span.color-picker-value-red").text(c[0]),e.$el.find("span.color-picker-value-green").text(c[1]),e.$el.find("span.color-picker-value-blue").text(c[2]))},destroy:function(e){e.redRangeSlider&&e.redRangeSlider.destroy&&e.redRangeSlider.destroy(),e.greenRangeSlider&&e.greenRangeSlider.destroy&&e.greenRangeSlider.destroy(),e.blueRangeSlider&&e.blueRangeSlider.destroy&&e.blueRangeSlider.destroy(),delete e.redRangeSlider,delete e.greenRangeSlider,delete e.blueRangeSlider,e.destroyRgbSlidersEvents&&e.destroyRgbSlidersEvents(),delete e.destroyRgbSlidersEvents}},pl={render:function(){return jn("div",{class:"color-picker-module color-picker-module-sb-spectrum"},jn("div",{class:"color-picker-sb-spectrum",style:"background-color: hsl(0, 100%, 50%)"},jn("div",{class:"color-picker-sb-spectrum-handle"})))},init:function(e){var t,r,n,a,i,o,s,l,c=e.app,u=e.$el;function p(t,r){var n=(t-o.left)/o.width,a=(r-o.top)/o.height;n=Math.max(0,Math.min(1,n)),a=1-Math.max(0,Math.min(1,a)),e.setValue({hsb:[e.value.hue,n,a]})}function d(e){if(!t){r="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,a=r,n="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,i=n;var c=Ot(e.target);(l=c.closest(".color-picker-sb-spectrum-handle").length>0)||(s=c.closest(".color-picker-sb-spectrum").length>0),s&&(o=u.find(".color-picker-sb-spectrum")[0].getBoundingClientRect(),p(r,n)),(l||s)&&u.find(".color-picker-sb-spectrum-handle").addClass("color-picker-sb-spectrum-handle-pressed")}}function h(e){(s||l)&&(a="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,i="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,e.preventDefault(),t||(t=!0,l&&(o=u.find(".color-picker-sb-spectrum")[0].getBoundingClientRect())),(s||l)&&p(a,i))}function f(){t=!1,(s||l)&&u.find(".color-picker-sb-spectrum-handle").removeClass("color-picker-sb-spectrum-handle-pressed"),s=!1,l=!1}function m(){e.modules["sb-spectrum"].update(e)}var g=!("touchstart"!==c.touchEvents.start||!F().passiveListener)&&{passive:!0,capture:!1};e.$el.on(c.touchEvents.start,d,g),c.on("touchmove:active",h),c.on("touchend:passive",f),c.on("resize",m),e.destroySpectrumEvents=function(){e.$el.off(c.touchEvents.start,d,g),c.off("touchmove:active",h),c.off("touchend:passive",f),c.off("resize",m)}},update:function(e){var t=e.value,r=t.hsl,n=t.hsb,a=e.$el.find(".color-picker-sb-spectrum")[0].offsetWidth,i=e.$el.find(".color-picker-sb-spectrum")[0].offsetHeight;e.$el.find(".color-picker-sb-spectrum").css("background-color","hsl("+r[0]+", 100%, 50%)"),e.$el.find(".color-picker-sb-spectrum-handle").css("background-color","hsl("+r[0]+", "+100*r[1]+"%, "+100*r[2]+"%)").transform("translate("+a*n[1]+"px, "+i*(1-n[2])+"px)")},destroy:function(e){e.destroySpectrumEvents&&e.destroySpectrumEvents(),delete e.destroySpectrumEvents}},dl={render:function(){return jn("div",{class:"color-picker-module color-picker-module-hs-spectrum"},jn("div",{class:"color-picker-hs-spectrum"},jn("div",{class:"color-picker-hs-spectrum-handle"})))},init:function(e){var t,r,n,a,i,o,s,l,c=e.app,u=e.$el;function p(t,r){var n=(t-o.left)/o.width*360,a=(r-o.top)/o.height;n=Math.max(0,Math.min(360,n)),a=1-Math.max(0,Math.min(1,a)),e.setValue({hsb:[n,a,e.value.hsb[2]]})}function d(e){if(!t){r="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,a=r,n="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,i=n;var c=Ot(e.target);(l=c.closest(".color-picker-hs-spectrum-handle").length>0)||(s=c.closest(".color-picker-hs-spectrum").length>0),s&&(o=u.find(".color-picker-hs-spectrum")[0].getBoundingClientRect(),p(r,n)),(l||s)&&u.find(".color-picker-hs-spectrum-handle").addClass("color-picker-hs-spectrum-handle-pressed")}}function h(e){(s||l)&&(a="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,i="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,e.preventDefault(),t||(t=!0,l&&(o=u.find(".color-picker-hs-spectrum")[0].getBoundingClientRect())),(s||l)&&p(a,i))}function f(){t=!1,(s||l)&&u.find(".color-picker-hs-spectrum-handle").removeClass("color-picker-hs-spectrum-handle-pressed"),s=!1,l=!1}function m(){e.modules["hs-spectrum"].update(e)}var g=!("touchstart"!==c.touchEvents.start||!F().passiveListener)&&{passive:!0,capture:!1};e.$el.on(c.touchEvents.start,d,g),c.on("touchmove:active",h),c.on("touchend:passive",f),c.on("resize",m),e.destroySpectrumEvents=function(){e.$el.off(c.touchEvents.start,d,g),c.off("touchmove:active",h),c.off("touchend:passive",f),c.off("resize",m)}},update:function(e){var t=e.value.hsb,r=e.$el.find(".color-picker-hs-spectrum")[0].offsetWidth,n=e.$el.find(".color-picker-hs-spectrum")[0].offsetHeight,a=R(t[0],t[1],1);e.$el.find(".color-picker-hs-spectrum-handle").css("background-color","hsl("+a[0]+", "+100*a[1]+"%, "+100*a[2]+"%)").transform("translate("+r*(t[0]/360)+"px, "+n*(1-t[1])+"px)")},destroy:function(e){e.destroySpectrumEvents&&e.destroySpectrumEvents(),delete e.destroySpectrumEvents}};var hl={render:function(){return jn("div",{class:"color-picker-module color-picker-module-wheel"},jn("div",{class:"color-picker-wheel"},jn("svg",{viewBox:"0 0 300 300",width:"300",height:"300"},function(){for(var e="",t=256;t>0;t-=1){var r=t*Math.PI/128,n=1.40625*t;e+='<circle cx="'+(150-125*Math.sin(r))+'" cy="'+(150-125*Math.cos(r))+'" r="25" fill="hsl('+n+', 100%, 50%)"></circle>'}return e}()),jn("div",{class:"color-picker-wheel-handle"}),jn("div",{class:"color-picker-sb-spectrum",style:"background-color: hsl(0, 100%, 50%)"},jn("div",{class:"color-picker-sb-spectrum-handle"}))))},init:function(e){var t,r,n,a,i,o,s,l,c,u,p,d=e.app,h=e.$el;function f(t,r){var n=o.left+o.width/2,a=o.top+o.height/2,i=180*Math.atan2(r-a,t-n)/Math.PI+90;i<0&&(i+=360),i=360-i,e.setValue({hue:i})}function m(t,r){var n=(t-c.left)/c.width,a=(r-c.top)/c.height;n=Math.max(0,Math.min(1,n)),a=1-Math.max(0,Math.min(1,a)),e.setValue({hsb:[e.value.hue,n,a]})}function g(e){if(!t){r="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,a=r,n="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,i=n;var d=Ot(e.target);l=d.closest(".color-picker-wheel-handle").length>0,s=d.closest("circle").length>0,(p=d.closest(".color-picker-sb-spectrum-handle").length>0)||(u=d.closest(".color-picker-sb-spectrum").length>0),s&&(o=h.find(".color-picker-wheel")[0].getBoundingClientRect(),f(r,n)),u&&(c=h.find(".color-picker-sb-spectrum")[0].getBoundingClientRect(),m(r,n)),(p||u)&&h.find(".color-picker-sb-spectrum-handle").addClass("color-picker-sb-spectrum-handle-pressed")}}function v(e){(s||l||u||p)&&(a="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,i="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,e.preventDefault(),t||(t=!0,l&&(o=h.find(".color-picker-wheel")[0].getBoundingClientRect()),p&&(c=h.find(".color-picker-sb-spectrum")[0].getBoundingClientRect())),(s||l)&&f(a,i),(u||p)&&m(a,i))}function y(){t=!1,(u||p)&&h.find(".color-picker-sb-spectrum-handle").removeClass("color-picker-sb-spectrum-handle-pressed"),s=!1,l=!1,u=!1,p=!1}function b(){e.modules.wheel.update(e)}var _=!("touchstart"!==d.touchEvents.start||!F().passiveListener)&&{passive:!0,capture:!1};e.$el.on(d.touchEvents.start,g,_),d.on("touchmove:active",v),d.on("touchend:passive",y),d.on("resize",b),e.destroyWheelEvents=function(){e.$el.off(d.touchEvents.start,g,_),d.off("touchmove:active",v),d.off("touchend:passive",y),d.off("resize",b)}},update:function(e){var t=e.value,r=t.hsl,n=t.hsb,a=e.$el.find(".color-picker-sb-spectrum")[0].offsetWidth,i=e.$el.find(".color-picker-sb-spectrum")[0].offsetHeight,o=e.$el.find(".color-picker-wheel")[0].offsetWidth,s=o/2,l=t.hue*Math.PI/180,c=o/6/2,u=s-Math.sin(l)*(s-c)-c,p=s-Math.cos(l)*(s-c)-c;e.$el.find(".color-picker-wheel-handle").css("background-color","hsl("+r[0]+", 100%, 50%)").transform("translate("+u+"px, "+p+"px)"),e.$el.find(".color-picker-sb-spectrum").css("background-color","hsl("+r[0]+", 100%, 50%)"),e.$el.find(".color-picker-sb-spectrum-handle").css("background-color","hsl("+r[0]+", "+100*r[1]+"%, "+100*r[2]+"%)").transform("translate("+a*n[1]+"px, "+i*(1-n[2])+"px)")},destroy:function(e){e.destroyWheelEvents&&e.destroyWheelEvents(),delete e.destroyWheelEvents}};function fl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ml(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gl(e,t){return(gl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vl=function(e){var t,r;function n(t,r){var n;void 0===r&&(r={});var a,i,o,s=ml(n=e.call(this,r,[t])||this);if(s.params=M({},t.params.colorPicker,r),s.params.containerEl&&0===(a=Ot(s.params.containerEl)).length)return s||ml(n);function l(){s.open()}function c(e){e.preventDefault()}function u(){s.open()}function p(e){if(!s.destroyed&&s.params&&"page"!==s.params.openIn){var t=Ot(e.target);s.opened&&!s.closing&&(t.closest('[class*="backdrop"]').length||t.closest(".color-picker-popup, .color-picker-popover").length||(i&&i.length>0?t[0]!==i[0]&&0===t.closest(".sheet-modal").length&&s.close():0===Ot(e.target).closest(".sheet-modal").length&&s.close()))}}return s.params.inputEl&&(i=Ot(s.params.inputEl)),s.params.targetEl&&(o=Ot(s.params.targetEl)),M(s,{app:t,$containerEl:a,containerEl:a&&a[0],inline:a&&a.length>0,$inputEl:i,inputEl:i&&i[0],$targetEl:o,targetEl:o&&o[0],initialized:!1,opened:!1,url:s.params.url,modules:{"alpha-slider":tl,"current-color":rl,hex:nl,"hsb-sliders":al,"hue-slider":il,"brightness-slider":ol,palette:sl,"initial-current-colors":ll,"rgb-bars":cl,"rgb-sliders":ul,"sb-spectrum":pl,"hs-spectrum":dl,wheel:hl}}),M(s,{attachInputEvents:function(){s.$inputEl.on("click",l),s.params.inputReadOnly&&(s.$inputEl.on("focus mousedown",c),s.$inputEl[0]&&(s.$inputEl[0].f7ValidateReadonly=!0))},detachInputEvents:function(){s.$inputEl.off("click",l),s.params.inputReadOnly&&(s.$inputEl.off("focus mousedown",c),s.$inputEl[0]&&delete s.$inputEl[0].f7ValidateReadonly)},attachTargetEvents:function(){s.$targetEl.on("click",u)},detachTargetEvents:function(){s.$targetEl.off("click",u)},attachHtmlEvents:function(){t.on("click",p)},detachHtmlEvents:function(){t.off("click",p)}}),s.init(),s||ml(n)}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,gl(t,r);var a,i,o,s=n.prototype;return s.attachEvents=function(){var e=this;e.centerModules=e.centerModules.bind(e),e.params.centerModules&&e.app.on("resize",e.centerModules)},s.detachEvents=function(){var e=this;e.params.centerModules&&e.app.off("resize",e.centerModules)},s.centerModules=function(){var e=this;if(e.opened&&e.$el&&!e.inline){var t=e.$el.find(".page-content");if(t.length){var r=t[0];r.scrollHeight<=r.offsetHeight?t.addClass("justify-content-center"):t.removeClass("justify-content-center")}}},s.initInput=function(){var e=this;e.$inputEl&&e.params.inputReadOnly&&e.$inputEl.prop("readOnly",!0)},s.getModalType=function(){var e=this,t=e.app,r=e.modal,n=e.params,a=n.openIn,i=n.openInPhone,o=N();return r&&r.type?r.type:"auto"!==a?a:e.inline?null:o.ios?o.ipad?"popover":i:t.width>=768||o.desktop&&"aurora"===t.theme?"popover":i},s.formatValue=function(){var e=this,t=e.value;return e.params.formatValue?e.params.formatValue.call(e,t):t.hex},s.normalizeHsValues=function(e){return[Math.floor(10*e[0])/10,Math.floor(1e3*e[1])/1e3,Math.floor(1e3*e[2])/1e3]},s.setValue=function(e,t){void 0===e&&(e={}),void 0===t&&(t=!0);var r=this;if(void 0!==e){var n,a=r.value||{},i=a.hex,o=a.rgb,s=a.hsl,l=a.hsb,c=a.alpha,u=void 0===c?1:c,p=a.hue,d=a.rgba,h=a.hsla,f=r.value||!r.value&&!r.params.value;if(Object.keys(e).forEach((function(t){if(r.value&&void 0!==r.value[t]){var a=e[t];Array.isArray(a)?a.forEach((function(e,a){e!==r.value[t][a]&&(n=!0)})):a!==r.value[t]&&(n=!0)}else n=!0})),n){if(e.rgb||e.rgba){var m=e.rgb||e.rgba,g=m[0],v=m[1],y=m[2],b=m[3],_=void 0===b?u:b;o=[g,v,y],i=A.apply(void 0,o),s=O.apply(void 0,o),l=L.apply(void 0,s),s=r.normalizeHsValues(s),p=(l=r.normalizeHsValues(l))[0],u=_,d=[o[0],o[1],o[2],_],h=[s[0],s[1],s[2],_]}if(e.hsl||e.hsla){var x=e.hsl||e.hsla,w=x[0],E=x[1],C=x[2],k=x[3],T=void 0===k?u:k;s=[w,E,C],o=z.apply(void 0,s),i=A.apply(void 0,o),l=L.apply(void 0,s),s=r.normalizeHsValues(s),p=(l=r.normalizeHsValues(l))[0],u=T,d=[o[0],o[1],o[2],T],h=[s[0],s[1],s[2],T]}if(e.hsb){var S=e.hsb,P=S[0],D=S[1],B=S[2],$=S[3],F=void 0===$?u:$;l=[P,D,B],s=R.apply(void 0,l),o=z.apply(void 0,s),i=A.apply(void 0,o),s=r.normalizeHsValues(s),p=(l=r.normalizeHsValues(l))[0],u=F,d=[o[0],o[1],o[2],F],h=[s[0],s[1],s[2],F]}if(e.hex&&(o=I(e.hex),i=A.apply(void 0,o),s=O.apply(void 0,o),l=L.apply(void 0,s),s=r.normalizeHsValues(s),p=(l=r.normalizeHsValues(l))[0],d=[o[0],o[1],o[2],u],h=[s[0],s[1],s[2],u]),void 0!==e.alpha&&(u=e.alpha,void 0!==o&&(d=[o[0],o[1],o[2],u]),void 0!==s&&(h=[s[0],s[1],s[2],u])),void 0!==e.hue){var N=s,V=(N[0],N[1]),j=N[2];s=[e.hue,V,j],l=L.apply(void 0,s),o=z.apply(void 0,s),i=A.apply(void 0,o),s=r.normalizeHsValues(s),p=(l=r.normalizeHsValues(l))[0],d=[o[0],o[1],o[2],u],h=[s[0],s[1],s[2],u]}r.value={hex:i,alpha:u,hue:p,rgb:o,hsl:s,hsb:l,rgba:d,hsla:h},r.initialValue||(r.initialValue=M({},r.value)),r.updateValue(f),r.opened&&t&&r.updateModules()}}},s.getValue=function(){return this.value},s.updateValue=function(e){void 0===e&&(e=!0);var t=this,r=t.$inputEl,n=t.value,a=t.$targetEl;if(a&&t.params.targetElSetBackgroundColor){var i=n.rgba;a.css("background-color","rgba("+i.join(", ")+")")}if(e&&t.emit("local::change colorPickerChange",t,n),r&&r.length){var o=t.formatValue(n);r&&r.length&&(r.val(o),e&&r.trigger("change"))}},s.updateModules=function(){var e=this,t=e.modules;e.params.modules.forEach((function(r){"string"==typeof r&&t[r]&&t[r].update?t[r].update(e):r&&r.update&&r.update(e)}))},s.update=function(){this.updateModules()},s.renderPicker=function(){var e=this,t=e.params,r=e.modules,n="";return t.modules.forEach((function(t){"string"==typeof t&&r[t]&&r[t].render?n+=r[t].render(e):t&&t.render&&(n+=t.render(e))})),n},s.renderNavbar=function(){var e=this;if(e.params.renderNavbar)return e.params.renderNavbar.call(e,e);var t=e.params,r=t.openIn,n=t.navbarTitleText,a=t.navbarBackLinkText,i=t.navbarCloseText;return jn("div",{class:"navbar"},jn("div",{class:"navbar-bg"}),jn("div",{class:"navbar-inner sliding"},"page"===r&&jn("div",{class:"left"},jn("a",{class:"link back"},jn("i",{class:"icon icon-back"}),jn("span",{class:"if-not-md"},a))),jn("div",{class:"title"},n),"page"!==r&&jn("div",{class:"right"},jn("a",{class:"link popup-close","data-popup":".color-picker-popup"},i))))},s.renderToolbar=function(){var e=this;return e.params.renderToolbar?e.params.renderToolbar.call(e,e):jn("div",{class:"toolbar toolbar-top no-shadow"},jn("div",{class:"toolbar-inner"},jn("div",{class:"left"}),jn("div",{class:"right"},jn("a",{class:"link sheet-close popover-close","data-sheet":".color-picker-sheet-modal","data-popover":".color-picker-popover"},e.params.toolbarCloseText))))},s.renderInline=function(){var e=this.params,t=e.cssClass,r=e.groupedModules;return jn("div",{class:"color-picker color-picker-inline "+(r?"color-picker-grouped-modules":"")+" "+(t||"")},this.renderPicker())},s.renderSheet=function(){var e=this,t=e.params,r=t.cssClass,n=t.toolbarSheet,a=t.groupedModules;return jn("div",{class:"sheet-modal color-picker color-picker-sheet-modal "+(a?"color-picker-grouped-modules":"")+" "+(r||"")},n&&e.renderToolbar(),jn("div",{class:"sheet-modal-inner"},jn("div",{class:"page-content"},e.renderPicker())))},s.renderPopover=function(){var e=this,t=e.params,r=t.cssClass,n=t.toolbarPopover,a=t.groupedModules;return jn("div",{class:"popover color-picker-popover "+(r||"")},jn("div",{class:"popover-inner"},jn("div",{class:"color-picker "+(a?"color-picker-grouped-modules":"")},n&&e.renderToolbar(),jn("div",{class:"page-content"},e.renderPicker()))))},s.renderPopup=function(){var e=this,t=e.params,r=t.cssClass,n=t.navbarPopup,a=t.groupedModules;return jn("div",{class:"popup color-picker-popup "+(r||"")},jn("div",{class:"page"},n&&e.renderNavbar(),jn("div",{class:"color-picker "+(a?"color-picker-grouped-modules":"")},jn("div",{class:"page-content"},e.renderPicker()))))},s.renderPage=function(){var e=this,t=e.params,r=t.cssClass,n=t.groupedModules;return jn("div",{class:"page color-picker-page "+(r||""),"data-name":"color-picker-page"},e.renderNavbar(),jn("div",{class:"color-picker "+(n?"color-picker-grouped-modules":"")},jn("div",{class:"page-content"},e.renderPicker())))},s.render=function(){var e=this,t=e.params;if(t.render)return t.render.call(e);if(e.inline)return e.renderInline();if("page"===t.openIn)return e.renderPage();var r=e.getModalType();return"popover"===r?e.renderPopover():"sheet"===r?e.renderSheet():"popup"===r?e.renderPopup():void 0},s.onOpen=function(){var e=this,t=e.initialized,r=e.$el,n=e.app,a=e.$inputEl,i=e.inline,o=e.value,s=e.params,l=e.modules;e.closing=!1,e.opened=!0,e.opening=!0,e.attachEvents(),s.modules.forEach((function(t){"string"==typeof t&&l[t]&&l[t].init?l[t].init(e):t&&t.init&&t.init(e)}));var c=!o&&s.value;t?o&&(e.initialValue=M({},o),e.setValue(o,!1)):o?e.setValue(o):s.value?e.setValue(s.value,!1):s.value||e.setValue({hex:"#ff0000"},!1),c&&e.updateValue(),e.updateModules(),s.centerModules&&e.centerModules(),!i&&a&&a.length&&"md"===n.theme&&a.trigger("focus"),e.initialized=!0,r&&r.trigger("colorpicker:open"),a&&a.trigger("colorpicker:open"),e.emit("local::open colorPickerOpen",e)},s.onOpened=function(){var e=this;e.opening=!1,e.$el&&e.$el.trigger("colorpicker:opened"),e.$inputEl&&e.$inputEl.trigger("colorpicker:opened"),e.emit("local::opened colorPickerOpened",e)},s.onClose=function(){var e=this,t=e.app,r=e.params,n=e.modules;if(e.opening=!1,e.closing=!0,e.detachEvents(),e.$inputEl)if("md"===t.theme)e.$inputEl.trigger("blur");else{var a=e.$inputEl.attr("validate"),i=e.$inputEl.attr("required");a&&i&&t.input.validate(e.$inputEl)}r.modules.forEach((function(t){"string"==typeof t&&n[t]&&n[t].destroy?n[t].destroy(e):t&&t.destroy&&t.destroy(e)})),e.$el&&e.$el.trigger("colorpicker:close"),e.$inputEl&&e.$inputEl.trigger("colorpicker:close"),e.emit("local::close colorPickerClose",e)},s.onClosed=function(){var e=this;e.opened=!1,e.closing=!1,e.inline||x((function(){e.modal&&e.modal.el&&e.modal.destroy&&(e.params.routableModals||e.modal.destroy()),delete e.modal})),e.$el&&e.$el.trigger("colorpicker:closed"),e.$inputEl&&e.$inputEl.trigger("colorpicker:closed"),e.emit("local::closed colorPickerClosed",e)},s.open=function(){var e=this,t=e.app,r=e.opened,n=e.inline,a=e.$inputEl,i=e.$targetEl,o=e.params;if(!r){if(n)return e.$el=Ot(e.render()),e.$el[0].f7ColorPicker=e,e.$containerEl.append(e.$el),e.onOpen(),void e.onOpened();var s=e.render();if("page"===o.openIn)e.view.router.navigate({url:e.url,route:{content:s,path:e.url,on:{pageBeforeIn:function(t,r){e.$el=r.$el.find(".color-picker"),e.$el[0].f7ColorPicker=e,e.onOpen()},pageAfterIn:function(){e.onOpened()},pageBeforeOut:function(){e.onClose()},pageAfterOut:function(){e.onClosed(),e.$el&&e.$el[0]&&(e.$el[0].f7ColorPicker=null,delete e.$el[0].f7ColorPicker)}}}});else{var l=e.getModalType(),c=o.backdrop;null==c&&("popover"===l&&!1!==t.params.popover.backdrop&&(c=!0),"popup"===l&&(c=!0));var u,p={targetEl:i||a,scrollToEl:o.scrollToInput?i||a:void 0,content:s,backdrop:c,closeByBackdropClick:o.closeByBackdropClick,on:{open:function(){var t=this;e.modal=t,e.$el="popover"===l||"popup"===l?t.$el.find(".color-picker"):t.$el,e.$el[0].f7ColorPicker=e,e.onOpen()},opened:function(){e.onOpened()},close:function(){e.onClose()},closed:function(){e.onClosed(),e.$el&&e.$el[0]&&(e.$el[0].f7ColorPicker=null,delete e.$el[0].f7ColorPicker)}}};if("popup"===l&&(p.push=o.popupPush,p.swipeToClose=o.popupSwipeToClose),"sheet"===l&&(p.push=o.sheetPush,p.swipeToClose=o.sheetSwipeToClose),o.routableModals&&e.view)e.view.router.navigate({url:e.url,route:(u={path:e.url},u[l]=p,u)});else e.modal=t[l].create(p),e.modal.open()}}},s.close=function(){var e=this,t=e.opened,r=e.inline;if(t)return r?(e.onClose(),void e.onClosed()):void(e.params.routableModals&&e.view||"page"===e.params.openIn?e.view.router.back():e.modal.close())},s.init=function(){var e=this;if(e.initInput(),e.inline)return e.open(),void e.emit("local::init colorPickerInit",e);!e.initialized&&e.params.value&&e.setValue(e.params.value),e.$inputEl&&e.attachInputEvents(),e.$targetEl&&e.attachTargetEvents(),e.params.closeByOutsideClick&&e.attachHtmlEvents(),e.emit("local::init colorPickerInit",e)},s.destroy=function(){var e=this;if(!e.destroyed){var t=e.$el;e.emit("local::beforeDestroy colorPickerBeforeDestroy",e),t&&t.trigger("colorpicker:beforedestroy"),e.close(),e.detachEvents(),e.$inputEl&&e.detachInputEvents(),e.$targetEl&&e.detachTargetEvents(),e.params.closeByOutsideClick&&e.detachHtmlEvents(),t&&t.length&&delete e.$el[0].f7ColorPicker,y(e),e.destroyed=!0}},a=n,(i=[{key:"view",get:function(){var e,t=this.$inputEl,r=this.$targetEl,n=this.app,a=this.params;return a.view?e=a.view:(t&&(e=t.parents(".view").length&&t.parents(".view")[0].f7View),!e&&r&&(e=r.parents(".view").length&&r.parents(".view")[0].f7View)),e||(e=n.views.main),e}}])&&fl(a.prototype,i),o&&fl(a,o),n}(q),yl={name:"colorPicker",static:{ColorPicker:vl},create:function(){var e=this;e.colorPicker=Dt({defaultSelector:".color-picker",constructor:vl,app:e,domProp:"f7ColorPicker"}),e.colorPicker.close=function(e){void 0===e&&(e=".color-picker");var t=Ot(e);if(0!==t.length){var r=t[0].f7ColorPicker;!r||r&&!r.opened||r.close()}}},params:{colorPicker:{value:null,modules:["wheel"],palette:[["#FFEBEE","#FFCDD2","#EF9A9A","#E57373","#EF5350","#F44336","#E53935","#D32F2F","#C62828","#B71C1C"],["#F3E5F5","#E1BEE7","#CE93D8","#BA68C8","#AB47BC","#9C27B0","#8E24AA","#7B1FA2","#6A1B9A","#4A148C"],["#E8EAF6","#C5CAE9","#9FA8DA","#7986CB","#5C6BC0","#3F51B5","#3949AB","#303F9F","#283593","#1A237E"],["#E1F5FE","#B3E5FC","#81D4FA","#4FC3F7","#29B6F6","#03A9F4","#039BE5","#0288D1","#0277BD","#01579B"],["#E0F2F1","#B2DFDB","#80CBC4","#4DB6AC","#26A69A","#009688","#00897B","#00796B","#00695C","#004D40"],["#F1F8E9","#DCEDC8","#C5E1A5","#AED581","#9CCC65","#8BC34A","#7CB342","#689F38","#558B2F","#33691E"],["#FFFDE7","#FFF9C4","#FFF59D","#FFF176","#FFEE58","#FFEB3B","#FDD835","#FBC02D","#F9A825","#F57F17"],["#FFF3E0","#FFE0B2","#FFCC80","#FFB74D","#FFA726","#FF9800","#FB8C00","#F57C00","#EF6C00","#E65100"]],groupedModules:!1,centerModules:!0,sliderLabel:!1,sliderValue:!1,sliderValueEdiable:!1,barLabel:!1,barValue:!1,barValueEdiable:!1,hexLabel:!1,hexValueEditable:!1,redLabelText:"R",greenLabelText:"G",blueLabelText:"B",hueLabelText:"H",saturationLabelText:"S",brightnessLabelText:"B",hexLabelText:"HEX",alphaLabelText:"A",containerEl:null,openIn:"popover",openInPhone:"popup",popupPush:!1,popupSwipeToClose:void 0,sheetPush:!1,sheetSwipeToClose:void 0,formatValue:null,targetEl:null,targetElSetBackgroundColor:!1,inputEl:null,inputReadOnly:!0,closeByOutsideClick:!0,scrollToInput:!0,toolbarSheet:!0,toolbarPopover:!1,toolbarCloseText:"Done",navbarPopup:!0,navbarCloseText:"Done",navbarTitleText:"Color",navbarBackLinkText:"Back",cssClass:null,routableModals:!1,view:null,url:"color/",backdrop:null,closeByBackdropClick:!0,renderToolbar:null,renderNavbar:null,renderInline:null,renderPopover:null,renderSheet:null,renderPopup:null,render:null}}},bl={open:function(e){var t=this,r=Ot(e).eq(0);if(r.length&&(r.addClass("treeview-item-opened"),r.trigger("treeview:open"),t.emit("treeviewOpen",r[0]),r.hasClass("treeview-load-children")&&!r[0].f7TreeviewChildrenLoaded)){var n={iosPreloaderContent:m,mdPreloaderContent:f,auroraPreloaderContent:g};r.trigger("treeview:loadchildren",a),t.emit("treeviewLoadChildren",r[0],a),r.find(".treeview-toggle").addClass("treeview-toggle-hidden"),r.find(".treeview-item-root").prepend('<div class="preloader treeview-preloader">'+n[t.theme+"PreloaderContent"]+"</div>")}function a(e){e?(r.removeClass("treeview-item-opened"),r.trigger("treeview:close"),t.emit("treeviewClose",r[0])):r[0].f7TreeviewChildrenLoaded=!0,r.find(".treeview-toggle").removeClass("treeview-toggle-hidden"),r.find(".treeview-preloader").remove()}},close:function(e){var t=Ot(e).eq(0);t.length&&(t.removeClass("treeview-item-opened"),t.trigger("treeview:close"),this.emit("treeviewClose",t[0]))},toggle:function(e){var t=Ot(e).eq(0);if(t.length){var r=t.hasClass("treeview-item-opened");this.treeview[r?"close":"open"](t)}}},_l={name:"treeview",create:function(){B(this,{treeview:bl})},clicks:{".treeview-toggle":function(e,t,r){if(!e.parents(".treeview-item-toggle").length){var n=e.parents(".treeview-item").eq(0);n.length&&(r.preventF7Router=!0,this.treeview.toggle(n[0]))}},".treeview-item-toggle":function(e,t,r){var n=e.closest(".treeview-item").eq(0);n.length&&(r.preventF7Router=!0,this.treeview.toggle(n[0]))}}};function xl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wl(e,t){return(wl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var El={bold:["bold","format_bold","bold"],italic:["italic","format_italic","italic"],underline:["underline","format_underlined","underline"],strikeThrough:["strikethrough","strikethrough_s","strikeThrough"],orderedList:["list_number","format_list_numbered","insertOrderedList"],unorderedList:["list_bullet","format_list_bulleted","insertUnorderedList"],link:["link","link","createLink"],image:["photo","image","insertImage"],paragraph:["paragraph",'<i class="icon">¶</i>',"formatBlock.P"],h1:['<i class="icon">H<sub>1</sub></i>','<i class="icon">H<sub>1</sub></i>',"formatBlock.H1"],h2:['<i class="icon">H<sub>2</sub></i>','<i class="icon">H<sub>2</sub></i>',"formatBlock.H2"],h3:['<i class="icon">H<sub>3</sub></i>','<i class="icon">H<sub>3</sub></i>',"formatBlock.H3"],alignLeft:["text_alignleft","format_align_left","justifyLeft"],alignCenter:["text_aligncenter","format_align_center","justifyCenter"],alignRight:["text_alignright","format_align_right","justifyRight"],alignJustify:["text_justify","format_align_justify","justifyFull"],subscript:["textformat_subscript",'<i class="icon">A<sub>1</sub></i>',"subscript"],superscript:["textformat_superscript",'<i class="icon">A<sup>1</sup></i>',"superscript"],indent:["increase_indent","format_indent_increase","indent"],outdent:["decrease_indent","format_indent_decrease","outdent"]},Cl=function(e){var t,r;function n(t,r){var n,a=xl(n=e.call(this,r,[t])||this),i=o(),s=N(),l=M({},t.params.textEditor);a.useModulesParams(l),a.params=M(l,r);var c=a.params.el;if(!c)return a||xl(n);var u=Ot(c);if(0===u.length)return a||xl(n);if(u[0].f7TextEditor)return u[0].f7TextEditor||xl(n);var p=u.children(".text-editor-content");if(p.length||(u.append('<div class="text-editor-content" contenteditable></div>'),p=u.children(".text-editor-content")),M(a,{app:t,$el:u,el:u[0],$contentEl:p,contentEl:p[0]}),"value"in r&&(a.value=a.params.value),"keyboard-toolbar"===a.params.mode&&(s.cordova||s.capacitor||s.android||(a.params.mode="popover")),"string"==typeof a.params.buttons)try{a.params.buttons=JSON.parse(a.params.buttons)}catch(e){throw new Error('Framework7: TextEditor: wrong "buttons" parameter format')}return u[0].f7TextEditor=a,a.onButtonClick=a.onButtonClick.bind(a),a.onFocus=a.onFocus.bind(a),a.onBlur=a.onBlur.bind(a),a.onInput=a.onInput.bind(a),a.onPaste=a.onPaste.bind(a),a.onSelectionChange=a.onSelectionChange.bind(a),a.closeKeyboardToolbar=a.closeKeyboardToolbar.bind(a),a.attachEvents=function(){"toolbar"===a.params.mode&&a.$el.find(".text-editor-toolbar").on("click","button",a.onButtonClick),"keyboard-toolbar"===a.params.mode&&(a.$keyboardToolbarEl.on("click","button",a.onButtonClick),a.$el.parents(".page").on("page:beforeout",a.closeKeyboardToolbar)),"popover"===a.params.mode&&a.popover&&a.popover.$el.on("click","button",a.onButtonClick),a.$contentEl.on("paste",a.onPaste),a.$contentEl.on("focus",a.onFocus),a.$contentEl.on("blur",a.onBlur),a.$contentEl.on("input",a.onInput,!0),Ot(i).on("selectionchange",a.onSelectionChange)},a.detachEvents=function(){"toolbar"===a.params.mode&&a.$el.find(".text-editor-toolbar").off("click","button",a.onButtonClick),"keyboard-toolbar"===a.params.mode&&(a.$keyboardToolbarEl.off("click","button",a.onButtonClick),a.$el.parents(".page").off("page:beforeout",a.closeKeyboardToolbar)),"popover"===a.params.mode&&a.popover&&a.popover.$el.off("click","button",a.onButtonClick),a.$contentEl.off("paste",a.onPaste),a.$contentEl.off("focus",a.onFocus),a.$contentEl.off("blur",a.onBlur),a.$contentEl.off("input",a.onInput,!0),Ot(i).off("selectionchange",a.onSelectionChange)},a.useModules(),a.init(),a||xl(n)}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,wl(t,r);var a=n.prototype;return a.setValue=function(e){var t=this;return t.value===e||(t.value=e,t.$contentEl.html(e),t.$el.trigger("texteditor:change",t.value),t.emit("local::change textEditorChange",t,t.value)),t},a.getValue=function(){return this.value},a.clearValue=function(){var e=this;return e.setValue(""),e.params.placeholder&&!e.$contentEl.html()&&e.insertPlaceholder(),e},a.createLink=function(){var e,t=this,r=l(),n=o(),a=r.getSelection(),i=[];if(a&&a.anchorNode&&Ot(a.anchorNode).parents(t.$el).length){for(var s=a.anchorNode;s;)i.push(s),s.nextSibling&&s!==a.focusNode||(s=null),s&&(s=s.nextSibling);for(var c=[],u=Ot(i),p=0;p<u.length;p+=1){var d=u[p].children;if(d)for(var h=0;h<d.length;h+=1)Ot(d[h]).is("a")&&c.push(d[h])}e=u.closest("a").add(Ot(c))}if(e&&e.length)return e.each((function(e){var t=r.getSelection(),a=n.createRange();a.selectNodeContents(e),t.removeAllRanges(),t.addRange(a),n.execCommand("unlink",!1),t.removeAllRanges()})),t;var f=t.getSelectionRange();return f?(t.app.dialog.prompt(t.params.linkUrlText,"",(function(e){e&&e.trim().length&&(t.setSelectionRange(f),n.execCommand("createLink",!1,e.trim()))})).$el.find("input").focus(),t):t},a.insertImage=function(){var e=this,t=o(),r=e.getSelectionRange();return r?(e.app.dialog.prompt(e.params.imageUrlText,"",(function(n){n&&n.trim().length&&(e.setSelectionRange(r),t.execCommand("insertImage",!1,n.trim()))})).$el.find("input").focus(),e):e},a.removePlaceholder=function(){this.$contentEl.find(".text-editor-placeholder").remove()},a.insertPlaceholder=function(){this.$contentEl.append('<div class="text-editor-placeholder">'+this.params.placeholder+"</div>")},a.onSelectionChange=function(){var e=this,t=l(),r=o();if("toolbar"!==e.params.mode){var n=t.getSelection(),a=Ot(n.anchorNode).parents(e.contentEl).length||n.anchorNode===e.contentEl;if("keyboard-toolbar"!==e.params.mode){if("popover"===e.params.mode){var i=Ot(n.anchorNode).parents(e.popover.el).length||n.anchorNode===e.popover.el;if(!a&&!i)return void e.closePopover();if(!n.isCollapsed&&n.rangeCount){var s=n.getRangeAt(0).getBoundingClientRect(),c=e.app.$el[0]||r.body;e.openPopover(s.x+(t.scrollX||0)-c.offsetLeft,s.y+(t.scrollY||0)-c.offsetTop,s.width,s.height)}else n.isCollapsed&&e.closePopover()}}else a?e.openKeyboardToolbar():e.closeKeyboardToolbar()}},a.onPaste=function(e){var t=o();if(this.params.clearFormattingOnPaste&&e.clipboardData&&e.clipboardData.getData){var r=e.clipboardData.getData("text/plain");e.preventDefault(),t.execCommand("insertText",!1,r)}},a.onInput=function(){var e=this,t=e.$contentEl.html();e.value=t,e.$el.trigger("texteditor:input"),e.emit("local:input textEditorInput",e,e.value),e.$el.trigger("texteditor:change",e.value),e.emit("local::change textEditorChange",e,e.value)},a.onFocus=function(){var e=this;e.removePlaceholder(),e.$contentEl.focus(),e.$el.trigger("texteditor:focus"),e.emit("local::focus textEditorFocus",e)},a.onBlur=function(){var e=this,t=l(),r=o();if(e.params.placeholder&&""===e.$contentEl.html()&&e.insertPlaceholder(),"popover"===e.params.mode){var n=t.getSelection(),a=Ot(n.anchorNode).parents(e.contentEl).length||n.anchorNode===e.contentEl;r.activeElement&&e.popover&&Ot(r.activeElement).closest(e.popover.$el).length||a||e.closePopover()}if("keyboard-toolbar"===e.params.mode){var i=t.getSelection();Ot(i.anchorNode).parents(e.contentEl).length||i.anchorNode===e.contentEl||e.closeKeyboardToolbar()}e.$el.trigger("texteditor:blur"),e.emit("local::blur textEditorBlur",e)},a.onButtonClick=function(e){var t=this,r=l(),n=o(),a=r.getSelection();if(Ot(a.anchorNode).parents(t.contentEl).length||a.anchorNode===t.contentEl){var i=Ot(e.target).closest("button");i.parents("form").length&&e.preventDefault();var s=i.attr("data-button"),c=t.params.customButtons&&t.params.customButtons[s];if(s&&(El[s]||c))if(i.trigger("texteditor:buttonclick",s),t.emit("local::buttonClick textEditorButtonClick",t,s),c)c.onClick&&c.onClick(t,i[0]);else{var u=El[s][2];if("createLink"!==u)if("insertImage"!==u)if(0!==u.indexOf("formatBlock"))n.execCommand(u,!1);else{var p=u.split(".")[1],d=Ot(a.anchorNode);d.parents(p.toLowerCase()).length||d.is(p)?n.execCommand("formatBlock",!1,"div"):n.execCommand("formatBlock",!1,p)}else t.insertImage();else t.createLink()}}},a.getSelectionRange=function(){var e=l(),t=o();if(e.getSelection){var r=e.getSelection();if(r.getRangeAt&&r.rangeCount)return r.getRangeAt(0)}else if(t.selection&&t.selection.createRange)return t.selection.createRange();return null},a.setSelectionRange=function(e){var t=l(),r=o();if(e)if(t.getSelection){var n=t.getSelection();n.removeAllRanges(),n.addRange(e)}else r.selection&&e.select&&e.select()},a.renderButtons=function(){var e=this,t="";function r(t){var r="md"===e.app.theme?"material-icons":"f7-icons";if(e.params.customButtons&&e.params.customButtons[t])return'<button type="button" class="text-editor-button" data-button="'+t+'">'+(e.params.customButtons[t].content||"")+"</button>";if(!El[t])return"";var n=El[t]["md"===e.app.theme?1:0];return('<button type="button" class="text-editor-button" data-button="'+t+'">'+(n.indexOf("<")>=0?n:'<i class="'+r+'">'+n+"</i>")+"</button>").trim()}return e.params.buttons.forEach((function(n,a){Array.isArray(n)?(n.forEach((function(e){t+=r(e)})),a<e.params.buttons.length-1&&e.params.dividers&&(t+='<div class="text-editor-button-divider"></div>')):t+=r(n)})),t},a.createToolbar=function(){this.$el.prepend('<div class="text-editor-toolbar">'+this.renderButtons()+"</div>")},a.createKeyboardToolbar=function(){this.$keyboardToolbarEl=Ot('<div class="toolbar toolbar-bottom text-editor-keyboard-toolbar"><div class="toolbar-inner">'+this.renderButtons()+"</div></div>")},a.createPopover=function(){var e=this;e.popover=e.app.popover.create({content:'\n        <div class="popover theme-dark text-editor-popover">\n          <div class="popover-inner">'+e.renderButtons()+"</div>\n        </div>\n      ",closeByOutsideClick:!1,backdrop:!1})},a.openKeyboardToolbar=function(){var e=this;e.$keyboardToolbarEl.parent(e.app.$el).length||(e.$el.trigger("texteditor:keyboardopen"),e.emit("local::keyboardOpen textEditorKeyboardOpen",e),e.app.$el.append(e.$keyboardToolbarEl))},a.closeKeyboardToolbar=function(){var e=this;e.$keyboardToolbarEl.remove(),e.$el.trigger("texteditor:keyboardclose"),e.emit("local::keyboardClose textEditorKeyboardClose",e)},a.openPopover=function(e,t,r,n){var a=this;a.popover&&(Object.assign(a.popover.params,{targetX:e,targetY:t,targetWidth:r,targetHeight:n}),clearTimeout(a.popoverTimeout),a.popoverTimeout=setTimeout((function(){a.popover&&(a.popover.opened?a.popover.resize():(a.$el.trigger("texteditor:popoveropen"),a.emit("local::popoverOpen textEditorPopoverOpen",a),a.popover.open()))}),400))},a.closePopover=function(){var e=this;clearTimeout(e.popoverTimeout),e.popover&&e.popover.opened&&(e.popoverTimeout=setTimeout((function(){e.popover&&(e.$el.trigger("texteditor:popoverclose"),e.emit("local::popoverClose textEditorPopoverClose",e),e.popover.close())}),400))},a.init=function(){var e=this;return e.value?e.$contentEl.html(e.value):e.value=e.$contentEl.html(),e.params.placeholder&&""===e.value&&e.insertPlaceholder(),"toolbar"===e.params.mode?e.createToolbar():"popover"===e.params.mode?e.createPopover():"keyboard-toolbar"===e.params.mode&&e.createKeyboardToolbar(),e.attachEvents(),e.$el.trigger("texteditor:init"),e.emit("local::init textEditorInit",e),e},a.destroy=function(){var e=this;e.$el.trigger("texteditor:beforedestroy"),e.emit("local::beforeDestroy textEditorBeforeDestroy",e),e.detachEvents(),"keyboard-toolbar"===e.params.mode&&e.$keyboardToolbarEl&&e.$keyboardToolbarEl.remove(),e.popover&&(e.popover.close(!1),e.popover.destroy()),delete e.$el[0].f7TextEditor,y(e),e=null},n}(q),kl={name:"textEditor",params:{textEditor:{el:null,mode:"toolbar",value:void 0,customButtons:null,buttons:[["bold","italic","underline","strikeThrough"],["orderedList","unorderedList"],["link","image"],["paragraph","h1","h2","h3"],["alignLeft","alignCenter","alignRight","alignJustify"],["subscript","superscript"],["indent","outdent"]],dividers:!0,imageUrlText:"Insert image URL",linkUrlText:"Insert link URL",placeholder:null,clearFormattingOnPaste:!0}},create:function(){this.textEditor=M(Dt({defaultSelector:".text-editor",constructor:Cl,app:this,domProp:"f7TextEditor"}))},static:{TextEditor:Cl},on:{tabMounted:function(e){var t=this;Ot(e).find(".text-editor-init").each((function(e){var r=Ot(e).dataset();t.textEditor.create(M({el:e},r||{}))}))},tabBeforeRemove:function(e){Ot(e).find(".text-editor-init").each((function(e){e.f7TextEditor&&e.f7TextEditor.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".text-editor-init").each((function(e){var r=Ot(e).dataset();t.textEditor.create(M({el:e},r||{}))}))},pageBeforeRemove:function(e){e.$el.find(".text-editor-init").each((function(e){e.f7TextEditor&&e.f7TextEditor.destroy()}))}},vnode:{"text-editor-init":{insert:function(e){var t=e.elm,r=Ot(t).dataset();this.textEditor.create(M({el:t},r||{}))},destroy:function(e){var t=e.elm;t.f7TextEditor&&t.f7TextEditor.destroy()}}}};Ht.use([Gt,Wt,Xt,Zt,sr,lr,$r,Or,Fr,Vr,qr,Wr,Xr,Yr,Qr,Jr,an,fn,{name:"appbar"},Wn,Kn,ta,ia,ca,ha,va,ba,xa,Ea,ka,Sa,{name:"contactsList"},Aa,La,{name:"timeline"},Ba,Ua,Ha,{name:"chip"},Ka,Ja,{name:"checkbox"},{name:"radio"},ni,si,pi,gi,_i,ki,Ai,zi,Bi,Fi,Ui,Gi,ro,so,po,Ls,Fs,Us,Xs,Qs,{name:"skeleton"},el,yl,_l,kl,{name:"elevation"},{name:"typography"}]);var Tl=Ht,Sl=r(7294),Pl=r(3935),Ml=(r(5697),Sl.createContext(null));var Il=function(e){e()},Al=function(){return Il},Ol={notify:function(){}};var zl=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=Ol,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=function(){var e=Al(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],r=t;r;)e.push(r),r=r.next;return e},subscribe:function(e){var n=!0,a=r={callback:e,next:null,prev:r};return a.prev?a.prev.next=a:t=a,function(){n&&null!==t&&(n=!1,a.next?a.next.prev=a.prev:r=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=Ol)},e}(),Rl="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?Sl.useLayoutEffect:Sl.useEffect;var Ll=function(e){var t=e.store,r=e.context,n=e.children,a=(0,Sl.useMemo)((function(){var e=new zl(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),i=(0,Sl.useMemo)((function(){return t.getState()}),[t]);Rl((function(){var e=a.subscription;return e.trySubscribe(),i!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[a,i]);var o=r||Ml;return Sl.createElement(o.Provider,{value:a},n)};r(8679),r(9864);function Dl(){return(Dl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Bl(){return(0,Sl.useContext)(Ml)}function $l(e){void 0===e&&(e=Ml);var t=e===Ml?Bl:function(){return(0,Sl.useContext)(e)};return function(){return t().store}}var Fl=$l();function Nl(e){void 0===e&&(e=Ml);var t=e===Ml?Fl:$l(e);return function(){return t().dispatch}}var Vl=Nl(),jl=function(e,t){return e===t};function Ul(e){void 0===e&&(e=Ml);var t=e===Ml?Bl:function(){return(0,Sl.useContext)(e)};return function(e,r){void 0===r&&(r=jl);var n=t(),a=function(e,t,r,n){var a,i=(0,Sl.useReducer)((function(e){return e+1}),0)[1],o=(0,Sl.useMemo)((function(){return new zl(r,n)}),[r,n]),s=(0,Sl.useRef)(),l=(0,Sl.useRef)(),c=(0,Sl.useRef)(),u=(0,Sl.useRef)(),p=r.getState();try{if(e!==l.current||p!==c.current||s.current){var d=e(p);a=void 0!==u.current&&t(d,u.current)?u.current:d}else a=u.current}catch(e){throw s.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+s.current.stack+"\n\n"),e}return Rl((function(){l.current=e,c.current=p,u.current=a,s.current=void 0})),Rl((function(){function e(){try{var e=r.getState(),n=l.current(e);if(t(n,u.current))return;u.current=n,c.current=e}catch(e){s.current=e}i()}return o.onStateChange=e,o.trySubscribe(),e(),function(){return o.tryUnsubscribe()}}),[r,o]),a}(e,r,n.store,n.subscription);return(0,Sl.useDebugValue)(a),a}}var ql,Hl=Ul();function Gl(e){return(Gl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Zl(e,t){return!t||"object"!==Gl(t)&&"function"!=typeof t?Kl(e):t}function Yl(e){return(Yl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ql(e,t){return(Ql=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}ql=Pl.unstable_batchedUpdates,Il=ql;var ec=function(e){function t(){var e,r;Wl(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return Jl(Kl(r=Zl(this,(e=Yl(t)).call.apply(e,[this].concat(a)))),"state",{bootstrapped:!1}),Jl(Kl(r),"_unsubscribe",void 0),Jl(Kl(r),"handlePersistorState",(function(){r.props.persistor.getState().bootstrapped&&(r.props.onBeforeLift?Promise.resolve(r.props.onBeforeLift()).finally((function(){return r.setState({bootstrapped:!0})})):r.setState({bootstrapped:!0}),r._unsubscribe&&r._unsubscribe())})),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ql(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return"function"==typeof this.props.children?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}])&&Xl(r.prototype,n),a&&Xl(r,a),t}(Sl.PureComponent);function tc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rc(e,t){if(e){if("string"==typeof e)return tc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tc(e,t):void 0}}function nc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}(e,t)||rc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ac(e,t){return"undefined"==typeof window?(0,Sl.useEffect)(e,t):(0,Sl.useLayoutEffect)(e,t)}function ic(e){var t,r=e.color,n=e.colorTheme,a=e.textColor,i=e.bgColor,o=e.borderColor,s=e.rippleColor;return(t={"theme-dark":e.themeDark})["color-"+r]=r,t["color-theme-"+n]=n,t["text-color-"+a]=a,t["bg-color-"+i]=i,t["border-color-"+o]=o,t["ripple-color-"+s]=s,t}function oc(e){var t,r,n=e.force,a=e.reloadCurrent,i=e.reloadPrevious,o=e.reloadAll,s=e.reloadDetail,l=e.animate,c=e.ignoreCache,u=e.routeTabId,p=e.view,d=e.transition,h=e.openIn;return"animate"in e&&void 0!==l&&(t=l.toString()),"reloadDetail"in e&&void 0!==s&&(r=s.toString()),{"data-force":n||void 0,"data-reload-current":a||void 0,"data-reload-all":o||void 0,"data-reload-previous":i||void 0,"data-reload-detail":r,"data-animate":t,"data-ignore-cache":c||void 0,"data-route-tab-id":u||void 0,"data-view":vn(p)?p:void 0,"data-transition":vn(d)?d:void 0,"data-open-in":vn(h)?h:void 0}}function sc(e){var t=e.back,r=e.linkBack;return{back:t||r,external:e.external,"prevent-router":e.preventRouter}}function lc(e){var t=e.searchbarEnable,r=e.searchbarDisable,n=e.searchbarClear,a=e.searchbarToggle,i=e.panelOpen,o=e.panelClose,s=e.panelToggle,l=e.popupOpen,c=e.popupClose,u=e.actionsOpen,p=e.actionsClose,d=e.popoverOpen,h=e.popoverClose,f=e.loginScreenOpen,m=e.loginScreenClose,g=e.sheetOpen,v=e.sheetClose,y=e.sortableEnable,b=e.sortableDisable,_=e.sortableToggle,x=e.cardOpen,w=e.cardClose;return{"data-searchbar":vn(t)&&t||vn(r)&&r||vn(n)&&n||vn(a)&&a||void 0,"data-panel":vn(i)&&i||vn(o)&&o||vn(s)&&s||void 0,"data-popup":vn(l)&&l||vn(c)&&c||void 0,"data-actions":vn(u)&&u||vn(p)&&p||void 0,"data-popover":vn(d)&&d||vn(h)&&h||void 0,"data-sheet":vn(g)&&g||vn(v)&&v||void 0,"data-login-screen":vn(f)&&f||vn(m)&&m||void 0,"data-sortable":vn(y)&&y||vn(b)&&b||vn(_)&&_||void 0,"data-card":vn(x)&&x||vn(w)&&w||void 0}}function cc(e){var t=e.searchbarEnable,r=e.searchbarDisable,n=e.searchbarClear,a=e.searchbarToggle,i=e.panelOpen,o=e.panelClose,s=e.panelToggle,l=e.popupOpen,c=e.popupClose,u=e.actionsClose,p=e.actionsOpen,d=e.popoverOpen,h=e.popoverClose,f=e.loginScreenOpen,m=e.loginScreenClose,g=e.sheetOpen,v=e.sheetClose,y=e.sortableEnable,b=e.sortableDisable,_=e.sortableToggle,x=e.cardOpen,w=e.cardPreventOpen,E=e.cardClose,C=e.menuClose;return{"searchbar-enable":t||""===t,"searchbar-disable":r||""===r,"searchbar-clear":n||""===n,"searchbar-toggle":a||""===a,"panel-close":o||""===o,"panel-open":i||""===i,"panel-toggle":s||""===s,"popup-close":c||""===c,"popup-open":l||""===l,"actions-close":u||""===u,"actions-open":p||""===p,"popover-close":h||""===h,"popover-open":d||""===d,"sheet-close":v||""===v,"sheet-open":g||""===g,"login-screen-close":m||""===m,"login-screen-open":f||""===f,"sortable-enable":y||""===y,"sortable-disable":b||""===b,"sortable-toggle":_||""===_,"card-close":E||""===E,"card-open":x||""===x,"card-prevent-open":w||""===w,"menu-close":C||""===C}}function uc(){return(uc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}Jl(ec,"defaultProps",{children:null,loading:null});var pc=(0,Sl.forwardRef)((function(e,t){var r=(0,Sl.useState)([]),n=r[0],a=r[1],i=(0,Sl.useRef)(null),o=(0,Sl.useRef)(null);(0,Sl.useImperativeHandle)(t,(function(){return{el:i.current}}));var s=function(){o.current&&(zn.modals=null,o.current=null)};return ac((function(){return o.current={modals:n,el:i.current,setModals:function(e){a([].concat(e))}},zn.modals=o.current,s}),[]),ac((function(){o.current&&Tn&&Sn.emit("modalsRouterDidUpdate",o.current)})),Sl.createElement("div",{ref:i,className:"framework7-modals"},n.map((function(e){var t=e.component,r=e.id,n=e.props;return Sl.createElement(t,uc({key:r},n))})))}));pc.displayName="f7-routable-modals";var dc=pc;function hc(){return(hc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var fc=(0,Sl.forwardRef)((function(e,t){var r=e.className,n=e.style,a=e.children,i=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,["className","style","children"]),o=kn(e),s=i,l=(0,Sl.useRef)(null);(0,Sl.useImperativeHandle)(t,(function(){return{el:l.current}}));var c=wn(r,"framework7-root",ic(e));return Tn&&"undefined"!=typeof window||Dn(l.current,s,!1),ac((function(){var e=l.current&&l.current.parentNode;"undefined"!=typeof document&&e&&e!==document.body&&e.parentNode===document.body&&(e.style.height="100%"),Tn?Tn.init(l.current):Dn(l.current,s,!0)}),[]),Sl.createElement("div",hc({id:"framework7-root",style:n,className:c,ref:l},o),a,Sl.createElement(dc,null))}));fc.displayName="f7-app";var mc=fc,gc=function(e,t){var r=(0,Sl.useRef)(e);ac((function(){e!==r.current&&t&&t(e,r.current),r.current=e}),[e])};function vc(){return(vc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var yc=(0,Sl.forwardRef)((function(e,t){var r,n=(0,Sl.useRef)(null),a=e.className,i=e.id,o=e.style,s=e.children,l=e.side,c=e.effect,u=e.reveal,p=e.left,d=e.opened,h=e.resizable,f=e.backdrop,m=void 0===f||f,g=e.backdropEl,v=e.containerEl,y=e.visibleBreakpoint,b=e.collapsedBreakpoint,_=e.swipe,x=e.swipeNoFollow,w=e.swipeOnlyClose,E=e.swipeActiveArea,C=void 0===E?0:E,k=e.swipeThreshold,T=void 0===k?0:k,S=kn(e),P=(0,Sl.useRef)(null),M=(0,Sl.useRef)(!1),I=(0,Sl.useRef)(!1),A=(0,Sl.useRef)(!1),O=(0,Sl.useRef)(!1),z=function(t){M.current=!0,I.current=!1,Cn(e,"panelOpen",t)},R=function(t){Cn(e,"panelOpened",t)},L=function(t){M.current=!1,I.current=!0,Cn(e,"panelClose",t)},D=function(t){I.current=!1,Cn(e,"panelClosed",t)},B=function(t){Cn(e,"click panelBackdropClick",t)},$=function(t){Cn(e,"panelSwipe",t)},F=function(t){Cn(e,"panelSwipeOpen",t)},N=function(t){O.current=!0,A.current=!1,Cn(e,"panelBreakpoint",t)},V=function(t){O.current=!1,A.current=!0,Cn(e,"panelCollapsedBreakpoint",t)},j=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];Cn.apply(void 0,[e,"panelResize"].concat(r))};(0,Sl.useImperativeHandle)(t,(function(){return{el:P.current,f7Panel:function(){return n.current}}})),gc(h,(function(e){n.current&&(e?n.current.enableResizable():n.current.disableResizable())})),gc(d,(function(e){n.current&&(e?n.current.open():n.current.close())}));var U=function(e){n.current&&(n.current[e]("open",z),n.current[e]("opened",R),n.current[e]("close",L),n.current[e]("closed",D),n.current[e]("backdropClick",B),n.current[e]("swipe",$),n.current[e]("swipeOpen",F),n.current[e]("collapsedBreakpoint",V),n.current[e]("breakpoint",N),n.current[e]("resize",j))},q=function(){n.current&&n.current.destroy&&n.current.destroy(),n.current=null};ac((function(){return U("on"),function(){U("off")}})),ac((function(){return Bn((function(){var e=Tn.$;if(e){0===e(".panel-backdrop").length&&e('<div class="panel-backdrop"></div>').insertBefore(P.current);var t=gn({el:P.current,resizable:h,backdrop:m,backdropEl:g,containerEl:v,visibleBreakpoint:y,collapsedBreakpoint:b,swipe:_,swipeNoFollow:x,swipeOnlyClose:w,swipeActiveArea:C,swipeThreshold:T});n.current=Tn.panel.create(t),U("on"),d&&n.current.open(!1)}})),q}),[]);var H=l||(p?"left":"right"),G=c||(u?"reveal":"cover"),W=wn(a,"panel",((r={"panel-in":M.current&&!I.current&&!O.current,"panel-in-breakpoint":O.current,"panel-in-collapsed":A.current,"panel-resizable":h})["panel-"+H]=H,r["panel-"+G]=G,r),ic(e));return Sl.createElement("div",vc({id:i,style:o,className:W,ref:P},S),s,h&&Sl.createElement("div",{className:"panel-resize-handler"}))}));yc.displayName="f7-panel";var bc=yc,_c=function(e,t){var r=function(r){e.current===r&&Cn(t,"tabShow",r)},n=function(r){e.current===r&&Cn(t,"tabHide",r)},a=function(){Tn&&(Tn.off("tabShow",r),Tn.off("tabHide",n))};ac((function(){return e.current&&Bn((function(){Tn.on("tabShow",r),Tn.on("tabHide",n)})),a}))};function xc(){return(xc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var wc=Sl.createContext({route:null,router:null});function Ec(){return(Ec=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Cc=(0,Sl.forwardRef)((function(e,t){var r,n,a=e.className,i=e.id,o=e.style,s=e.children,l=e.init,c=void 0===l||l,u=e.main,p=e.tab,d=e.tabActive,h=e.url,f=e.browserHistoryInitialMatch,m=void 0===f||f,g=Sl.Children.toArray(s),v=g.filter((function(e){return e.props&&e.props.initialPage}))[0],y=g.filter((function(e){return!e.props||!e.props.initialPage})),b=kn(e),_=(0,Sl.useRef)(null),x=(0,Sl.useRef)(null),w=(0,Sl.useRef)(null),E=function(t){Cn(e,"viewInit",t),c||(w.current.instance=t,_.current=w.current.instance)};if(Tn&&!_.current&&c){var C=In();if(_.current=Tn.views.create(x.current,Ec({routerId:C,init:!1},gn(e),{browserHistoryInitialMatch:m,on:{init:E}})),w.current={routerId:C,instance:_.current},zn.views.push(w.current),_.current&&_.current.router&&(h||u)){var k=function(e,t){var r,n,a=e.getInitialUrl().initialUrl,i=e.findMatchingRoute(a),o={};return i&&i.route&&i.route.options&&(o=i.route.options.props),!i||!i.route||!i.route.component&&!i.route.asyncComponent||!0===(n=i.route).master||"function"==typeof n.master&&n.master(e.app)||(r={component:i.route.component||i.route.asyncComponent,initialComponent:t,id:An(),isAsync:!!i.route.asyncComponent,props:xc({f7route:i,f7router:e},o,i.params)}),{initialPage:r,initialRoute:i}}(_.current.router,v);r=k.initialPage,(n=k.initialRoute)&&n.route&&n.route.masterRoute&&(r=void 0,n=void 0)}}var T=(0,Sl.useState)(r?[r]:[]),S=T[0],P=T[1],M=function(t,r){Cn(e,"viewResize",r)},I=function(t){Cn(e,"swipeBackMove",t)},A=function(t){Cn(e,"swipeBackBeforeChange",t)},O=function(t){Cn(e,"swipeBackAfterChange",t)},z=function(t){Cn(e,"swipeBackBeforeReset",t)},R=function(t){Cn(e,"swipeBackAfterReset",t)};(0,Sl.useImperativeHandle)(t,(function(){return{el:x.current,f7View:function(){return _.current}}}));var L=function(){_.current&&(_.current.off("resize",M),_.current.off("swipebackMove",I),_.current.off("swipebackBeforeChange",A),_.current.off("swipebackAfterChange",O),_.current.off("swipebackBeforeReset",z),_.current.off("swipebackAfterReset",R),_.current.destroy&&_.current.destroy(),_.current=null),zn.views.splice(zn.views.indexOf(w.current),1),w.current=null};ac((function(){return Bn((function(){if(_.current)w.current.el=x.current,w.current.pages=S,w.current.setPages=function(e){P([].concat(e))},r&&r.isAsync&&!r.initialComponent?r.component().then((function(){setTimeout((function(){_.current.init(x.current),r&&(r.el=_.current.router.currentPageEl,n&&n.route&&n.route.keepAlive&&(n.route.keepAliveData={pageEl:r.el}))}),100)})):(_.current.init(x.current),r&&(r.el=_.current.router.currentPageEl,n&&n.route&&n.route.keepAlive&&(n.route.keepAliveData={pageEl:r.el})));else{var t=In();w.current={el:x.current,routerId:t,pages:S,instance:_.current,setPages:function(e){P([].concat(e))}},zn.views.push(w.current),w.current.instance=Tn.views.create(x.current,Ec({routerId:t},gn(e),{browserHistoryInitialMatch:m,on:{init:E}})),_.current=w.current.instance}c&&(_.current.on("resize",M),_.current.on("swipebackMove",I),_.current.on("swipebackBeforeChange",A),_.current.on("swipebackAfterChange",O),_.current.on("swipebackBeforeReset",z),_.current.on("swipebackAfterReset",R))})),L}),[]),ac((function(){w.current&&Tn&&Sn.emit("viewRouterDidUpdate",w.current)})),_c(x,e);var D=wn(a,"view",{"view-main":u,"tab-active":d,tab:p},ic(e));return Sl.createElement("div",Ec({id:i,style:o,className:D,ref:x},b),y,S.map((function(e){var t=e.component,r=e.id,n=e.props,a=e.isAsync,i=e.initialComponent;return Sl.createElement(wc.Provider,{key:r,value:{router:n.f7router,route:n.f7route}},i?Sl.cloneElement(i,Ec({},n)):a?function(e,t,r){var n=(0,Sl.lazy)(e);return Sl.createElement(Sl.Suspense,{fallback:null,key:r},Sl.createElement(n,t))}(t,n):Sl.createElement(t,n))})))}));Cc.displayName="f7-view";var kc=Cc,Tc=function(){var e=(0,Sl.useState)(Tn?On:null),t=e[0],r=e[1];return Tn||Bn((function(){r(On)})),t};function Sc(){return(Sc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Pc=(0,Sl.forwardRef)((function(e,t){var r=Tc(),n=e.className,a=e.id,i=e.style,o=e.size,s=kn(e),l=(0,Sl.useRef)(null);(0,Sl.useImperativeHandle)(t,(function(){return{el:l.current}}));var c,u={},p=o;p&&"string"==typeof p&&p.indexOf("px")>=0&&(p=p.replace("px","")),p&&(u.width=p+"px",u.height=p+"px",u["--f7-preloader-size"]=p+"px"),i&&_n(u,i||{}),r&&r.md?c=Sl.createElement("span",{className:"preloader-inner"},Sl.createElement("svg",{viewBox:"0 0 36 36"},Sl.createElement("circle",{cx:"18",cy:"18",r:"16"}))):r&&r.ios?c=Sl.createElement("span",{className:"preloader-inner"},Sl.createElement("span",{className:"preloader-inner-line"}),Sl.createElement("span",{className:"preloader-inner-line"}),Sl.createElement("span",{className:"preloader-inner-line"}),Sl.createElement("span",{className:"preloader-inner-line"}),Sl.createElement("span",{className:"preloader-inner-line"}),Sl.createElement("span",{className:"preloader-inner-line"}),Sl.createElement("span",{className:"preloader-inner-line"}),Sl.createElement("span",{className:"preloader-inner-line"})):r&&r.aurora?c=Sl.createElement("span",{className:"preloader-inner"},Sl.createElement("span",{className:"preloader-inner-circle"})):r||(c=Sl.createElement("span",{className:"preloader-inner"}));var d=wn(n,"preloader",ic(e));return Sl.createElement("span",Sc({id:a,style:u,className:d,ref:l},s),c)}));Pc.displayName="f7-preloader";var Mc=Pc;function Ic(){return(Ic=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Ac=(0,Sl.forwardRef)((function(e,t){var r=e.className,n=e.id,a=e.style,i=e.children,o=e.tab,s=e.tabActive,l=e.ptr,c=e.ptrDistance,u=e.ptrPreloader,p=void 0===u||u,d=e.ptrBottom,h=e.ptrMousewheel,f=e.infinite,m=e.infiniteTop,g=e.infiniteDistance,v=e.infinitePreloader,y=void 0===v||v,b=e.hideBarsOnScroll,_=e.hideNavbarOnScroll,x=e.hideToolbarOnScroll,w=e.messagesContent,E=e.loginScreen,C=kn(e),k=(0,Sl.useRef)(null),T=function(t){k.current===t&&Cn(e,"ptrPullStart")},S=function(t){k.current===t&&Cn(e,"ptrPullMove")},P=function(t){k.current===t&&Cn(e,"ptrPullEnd")},M=function(t,r){k.current===t&&Cn(e,"ptrRefresh",r)},I=function(t){k.current===t&&Cn(e,"ptrDone")},A=function(t){k.current===t&&Cn(e,"infinite")};(0,Sl.useImperativeHandle)(t,(function(){return{el:k.current}})),_c(k,e);var O,z,R=function(){Tn&&(Tn.off("ptrPullStart",T),Tn.off("ptrPullMove",S),Tn.off("ptrPullEnd",P),Tn.off("ptrRefresh",M),Tn.off("ptrDone",I),Tn.off("infinite",A))};ac((function(){return Bn((function(){l&&(Tn.on("ptrPullStart",T),Tn.on("ptrPullMove",S),Tn.on("ptrPullEnd",P),Tn.on("ptrRefresh",M),Tn.on("ptrDone",I)),f&&Tn.on("infinite",A)})),R})),l&&p&&(O=Sl.createElement("div",{className:"ptr-preloader"},Sl.createElement(Mc,null),Sl.createElement("div",{className:"ptr-arrow"}))),f&&y&&(z=Sl.createElement(Mc,{className:"infinite-scroll-preloader"}));var L=wn(r,"page-content",{tab:o,"tab-active":s,"ptr-content":l,"ptr-bottom":d,"infinite-scroll-content":f,"infinite-scroll-top":m,"hide-bars-on-scroll":b,"hide-navbar-on-scroll":_,"hide-toolbar-on-scroll":x,"messages-content":w,"login-screen-content":E},ic(e));return Sl.createElement("div",Ic({id:n,style:a,className:L,"data-ptr-distance":c||void 0,"data-ptr-mousewheel":h||void 0,"data-infinite-distance":g||void 0,ref:k},C),d?null:O,m?z:null,i,m?null:z,d?O:null)}));Ac.displayName="f7-page-content";var Oc=Ac;function zc(){return(zc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Rc=(0,Sl.forwardRef)((function(e,t){var r=e.className,n=e.id,a=e.style,i=e.name,o=e.stacked,s=e.withSubnavbar,l=e.subnavbar,c=e.withNavbarLarge,u=e.navbarLarge,p=e.noNavbar,d=e.noToolbar,h=e.tabs,f=e.pageContent,m=void 0===f||f,g=e.noSwipeback,v=e.ptr,y=e.ptrDistance,b=e.ptrPreloader,_=void 0===b||b,x=e.ptrBottom,w=e.ptrMousewheel,E=e.infinite,C=e.infiniteTop,k=e.infiniteDistance,T=e.infinitePreloader,S=void 0===T||T,P=e.hideBarsOnScroll,M=e.hideNavbarOnScroll,I=e.hideToolbarOnScroll,A=e.messagesContent,O=e.loginScreen,z=e.onPtrPullStart,R=e.onPtrPullMove,L=e.onPtrPullEnd,D=e.onPtrRefresh,B=e.onPtrDone,$=e.onInfinite,F=(0,Sl.useRef)(!1),N=(0,Sl.useRef)(!1),V=(0,Sl.useRef)(!1),j=(0,Sl.useRef)(!1),U=(0,Sl.useRef)(""),q=(0,Sl.useRef)(!1),H=(0,Sl.useRef)(null),G=(0,Sl.useRef)(!1),W=(0,Sl.useRef)(!1),X=kn(e),Z=(0,Sl.useRef)(null),Y=function(t){Z.current===t.el&&Cn(e,"pageMounted",t)},K=function(t){Z.current===t.el&&(void 0===s&&void 0===l&&(t.$navbarEl&&t.$navbarEl.length&&t.$navbarEl.find(".subnavbar").length||t.$el.children(".navbar").find(".subnavbar").length)&&(F.current=!0),void 0===c&&void 0===u&&t.$navbarEl&&t.$navbarEl.hasClass("navbar-large")&&(N.current=!0),Cn(e,"pageInit",t))},Q=function(t){Z.current===t.el&&Cn(e,"pageReinit",t)},J=function(t){Z.current===t.el&&(t.swipeBack||("next"===t.from&&(U.current="page-next"),"previous"===t.from&&(U.current="page-previous")),Cn(e,"pageBeforeIn",t))},ee=function(t){Z.current===t.el&&Cn(e,"pageBeforeOut",t)},te=function(t){Z.current===t.el&&("next"===t.to&&(U.current="page-next"),"previous"===t.to&&(U.current="page-previous"),Cn(e,"pageAfterOut",t))},re=function(t){Z.current===t.el&&(U.current="page-current",Cn(e,"pageAfterIn",t))},ne=function(t){Z.current===t.el&&Cn(e,"pageBeforeRemove",t)},ae=function(t){Z.current===t.el&&Cn(e,"pageBeforeUnmount",t)},ie=function(e){Z.current===e&&(q.current=!1)},oe=function(e){Z.current===e&&(q.current=!0)},se=function(e,t){Z.current===e&&(U.current="page-"+t)},le=function(e,t){Z.current===e&&(H.current=t.role,G.current=t.detailRoot)},ce=function(e){Z.current===e&&(W.current=!0)},ue=function(e){Z.current===e&&(W.current=!1)},pe=function(e){Z.current===e&&(V.current=!0)},de=function(e){Z.current===e&&(V.current=!1)},he=function(e,t){Z.current===t&&(j.current=!0)},fe=function(e,t){Z.current===t&&(j.current=!1)},me=function(t){Z.current===t&&Cn(e,"pageTabShow")},ge=function(t){Z.current===t&&Cn(e,"pageTabHide")};(0,Sl.useImperativeHandle)(t,(function(){return{el:Z.current}}));var ve=function(){Tn&&(Tn.off("pageMounted",Y),Tn.off("pageInit",K),Tn.off("pageReinit",Q),Tn.off("pageBeforeIn",J),Tn.off("pageBeforeOut",ee),Tn.off("pageAfterOut",te),Tn.off("pageAfterIn",re),Tn.off("pageBeforeRemove",ne),Tn.off("pageBeforeUnmount",ae),Tn.off("pageStack",ie),Tn.off("pageUnstack",oe),Tn.off("pagePosition",se),Tn.off("pageRole",le),Tn.off("pageMasterStack",ce),Tn.off("pageMasterUnstack",ue),Tn.off("pageNavbarLargeCollapsed",pe),Tn.off("pageNavbarLargeExpanded",de),Tn.off("cardOpened",he),Tn.off("cardClose",fe),Tn.off("pageTabShow",me),Tn.off("pageTabHide",ge))};ac((function(){return Bn((function(){Tn.on("pageMounted",Y),Tn.on("pageInit",K),Tn.on("pageReinit",Q),Tn.on("pageBeforeIn",J),Tn.on("pageBeforeOut",ee),Tn.on("pageAfterOut",te),Tn.on("pageAfterIn",re),Tn.on("pageBeforeRemove",ne),Tn.on("pageBeforeUnmount",ae),Tn.on("pageStack",ie),Tn.on("pageUnstack",oe),Tn.on("pagePosition",se),Tn.on("pageRole",le),Tn.on("pageMasterStack",ce),Tn.on("pageMasterUnstack",ue),Tn.on("pageNavbarLargeCollapsed",pe),Tn.on("pageNavbarLargeExpanded",de),Tn.on("cardOpened",he),Tn.on("cardClose",fe),Tn.on("pageTabShow",me),Tn.on("pageTabHide",ge)})),ve}));var ye,be,_e=En(e),xe=[],we=[],Ee=_e.static,Ce=_e.fixed,ke=_e.default,Te="navbar toolbar tabbar subnavbar searchbar messagebar fab list-index panel".split(" ").map((function(e){return"f7-"+e})),Se=A;ke&&ke.forEach((function(e){if(void 0!==e){var t=!1,r=e.type&&(e.type.displayName||e.type.name);r?("f7-subnavbar"===r&&(ye=!0),"f7-navbar"===r&&e.props&&e.props.large&&(be=!0),void 0===Se&&"f7-messages"===r&&(Se=!0),Te.indexOf(r)>=0&&(t=!0),m&&(t?xe.push(e):we.push(e))):m&&we.push(e)}}));var Pe=void 0===l&&void 0===s&&(ye||F.current),Me=void 0===u&&void 0===c&&(be||N.current),Ie=wn(r,"page",U.current,{stacked:o&&!q.current,tabs:h,"page-with-subnavbar":l||s||Pe,"page-with-navbar-large":u||c||Me,"no-navbar":p,"no-toolbar":d,"no-swipeback":g,"page-master":"master"===H.current,"page-master-detail":"detail"===H.current,"page-master-detail-root":!0===G.current,"page-master-stacked":!0===W.current,"page-with-navbar-large-collapsed":!0===V.current,"page-with-card-opened":!0===j.current,"login-screen-page":O},ic(e));if(!m)return Sl.createElement("div",zc({id:n,style:a,className:Ie,"data-name":i,ref:Z},X),Ce,Ee,ke);var Ae=Sl.createElement(Oc,{ptr:v,ptrDistance:y,ptrPreloader:_,ptrBottom:x,ptrMousewheel:w,infinite:E,infiniteTop:C,infiniteDistance:k,infinitePreloader:S,hideBarsOnScroll:P,hideNavbarOnScroll:M,hideToolbarOnScroll:I,messagesContent:A||Se,loginScreen:O,onPtrPullStart:z,onPtrPullMove:R,onPtrPullEnd:L,onPtrRefresh:D,onPtrDone:B,onInfinite:$},Ee,we);return Sl.createElement("div",zc({id:n,style:a,className:Ie,"data-name":i,ref:Z},X),xe,Ce,Ae)}));Rc.displayName="f7-page";var Lc=Rc,Dc=function(e,t){var r=(0,Sl.useRef)(null),n=t.tooltip,a=t.tooltipTrigger,i=function(){r.current&&r.current.destroy&&(r.current.destroy(),r.current=null)};(0,Sl.useEffect)((function(){return e.current&&n&&Bn((function(){r.current=Tn.tooltip.create({targetEl:e.current,text:n,trigger:a})})),i}),[]),gc(n,(function(t){if(!t&&r.current)return r.current.destroy(),void(r.current=null);t&&!r.current&&Tn?r.current=Tn.tooltip.create({targetEl:e.current,text:t,trigger:a}):t&&r.current&&r.current.setText(t)}))};function Bc(){return(Bc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var $c=(0,Sl.forwardRef)((function(e,t){var r=Tc(),n=e.className,a=e.id,i=e.style,o=e.children,s=e.material,l=e.f7,c=e.icon,u=e.md,p=e.ios,d=e.aurora,h=e.size,f=kn(e),m=(0,Sl.useRef)(null);(0,Sl.useImperativeHandle)(t,(function(){return{el:m.current}})),Dc(m,e);var g,v=h;return"number"!=typeof h&&parseFloat(h)!==1*h||(v=h+"px"),Sl.createElement("i",Bc({id:a,style:_n({fontSize:v,width:v,height:v},i),className:function(){var t,a={icon:!0};if(r&&r.ios?t=p:r&&r.md?t=u:r&&r.aurora&&(t=d),t){var i=t.split(":"),o=i[0],h=i[1];"material"!==o&&"f7"!==o||(a["material-icons"]="material"===o,a["f7-icons"]="f7"===o),"icon"===o&&(a[h]=!0)}else a={icon:!0,"material-icons":s,"f7-icons":l},c&&(a[c]=!0);return wn(n,a,ic(e))}(),ref:m},f),(g=s||l,u&&r&&r.md&&(u.indexOf("material:")>=0||u.indexOf("f7:")>=0)?g=u.split(":")[1]:p&&r&&r.ios&&(p.indexOf("material:")>=0||p.indexOf("f7:")>=0)?g=p.split(":")[1]:d&&r&&r.aurora&&(d.indexOf("material:")>=0||d.indexOf("f7:")>=0)&&(g=d.split(":")[1]),g),o)}));$c.displayName="f7-icon";var Fc=$c;function Nc(){return(Nc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Vc=(0,Sl.forwardRef)((function(e,t){var r=e.className,n=e.id,a=e.style,i=e.children,o=kn(e),s=(0,Sl.useRef)(null);(0,Sl.useImperativeHandle)(t,(function(){return{el:s.current}})),Dc(s,e);var l=wn(r,"badge",ic(e));return Sl.createElement("span",Nc({id:n,style:a,className:l,ref:s},o),i)}));Vc.displayName="f7-badge";var jc=Vc,Uc=function(e,t){var r=(void 0===t?{}:t).routeProps;(0,Sl.useEffect)((function(){return e.current&&(e.current.f7RouteProps=r),function(){e.current&&e.current.f7RouteProps&&delete e.current.f7RouteProps}}),[r])},qc=Sl.createContext({tabbarHasLabels:!1}),Hc=function(e,t,r,n){var a=function(){r.current&&r.current.destroy&&r.current.destroy(),r.current=null};(0,Sl.useEffect)((function(){return Bn((function(){if(e){var a=_n({el:n()},t||{});r.current=Tn.smartSelect.create(a)}})),a}),[])};function Gc(){return(Gc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Wc=(0,Sl.forwardRef)((function(e,t){var r,n,a=(0,Sl.useRef)(null),i=e.className,o=e.id,s=e.style,l=e.children,c=e.noLinkClass,u=e.text,p=e.tabLink,d=e.tabLinkActive,h=e.tabbarLabel,f=e.iconOnly,m=e.badge,g=e.badgeColor,v=e.href,y=void 0===v?"#":v,b=e.target,_=e.smartSelect,x=e.smartSelectParams,w=(0,Sl.useContext)(qc),E=h||w.tabbarHasLabels,C=kn(e),k=(0,Sl.useRef)(null);(0,Sl.useImperativeHandle)(t,(function(){return{el:k.current,f7SmartSelect:function(){return a.current}}})),Dc(k,e),Uc(k,e),Hc(_,x,a,(function(){return k.current})),u&&(m&&(n=Sl.createElement(jc,{color:g},m)),r=Sl.createElement("span",{className:E?"tabbar-label":""},u,n));var T=function(e){void 0===e&&(e={});var t=e,r=t.icon,n=t.iconMaterial,a=t.iconF7,i=t.iconMd,o=t.iconIos,s=t.iconAurora,l=t.iconColor,c=t.iconSize,u=t.iconBadge,p=t.badgeColor,d=t.iconBadgeColor;return r||n||a||i||o||s?Sl.createElement(Fc,{material:n,f7:a,icon:r,md:i,ios:o,aurora:s,color:l,size:c},(u||0===u)&&Sl.createElement(jc,{color:p||d},u)):null}(e),S=wn(i,{link:!(c||E),"icon-only":!!(f||!u&&l&&0===l.length||!u&&!l),"tab-link":p||""===p,"tab-link-active":d,"smart-select":_},ic(e),sc(e),cc(e)),P=y;!0===y&&(P="#"),!1===y&&(P=void 0);var M=Gc({href:P,target:b,"data-tab":vn(p)&&p||void 0},oc(e),lc(e));return Sl.createElement("a",Gc({ref:k,id:o,style:s,className:S},M,C,{onClick:function(t){Cn(e,"click",t)}}),T,r,l)}));Wc.displayName="f7-link";var Xc=Wc;function Zc(){return(Zc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Yc=(0,Sl.forwardRef)((function(e,t){var r=e.className,n=e.id,a=e.style,i=e.children,o=e.backLink,s=e.backLinkUrl,l=e.backLinkForce,c=e.backLinkShowText,u=e.sliding,p=kn(e),d=(0,Sl.useRef)(null);(0,Sl.useImperativeHandle)(t,(function(){return{el:d.current}}));var h,f=Tc(),m=c;if(void 0===m&&(m=!f.md),o){var g=!0!==o&&m?o:void 0;h=Sl.createElement(Xc,{href:s||"#",back:!0,icon:"icon-back",force:l||void 0,className:g?void 0:"icon-only",text:g,onClick:function(t){Cn(e,"backClick clickBack",t)}})}var v=wn(r,"left",{sliding:u},ic(e));return Sl.createElement("div",Zc({id:n,style:a,className:v,ref:d},p),h,i)}));Yc.displayName="f7-nav-left";var Kc=Yc;function Qc(){return(Qc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Jc=(0,Sl.forwardRef)((function(e,t){var r,n=e.className,a=e.id,i=e.style,o=e.children,s=e.title,l=e.subtitle,c=e.sliding,u=kn(e),p=(0,Sl.useRef)(null);(0,Sl.useImperativeHandle)(t,(function(){return{el:p.current}})),l&&(r=Sl.createElement("span",{className:"subtitle"},l));var d=wn(n,"title",{sliding:c},ic(e));return Sl.createElement("div",Qc({id:a,style:i,className:d,ref:p},u),o,s,r)}));Jc.displayName="f7-nav-title";var eu=Jc;function tu(){return(tu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var ru=(0,Sl.forwardRef)((function(e,t){var r=e.className,n=e.id,a=e.style,i=e.children,o=e.sliding,s=kn(e),l=(0,Sl.useRef)(null);(0,Sl.useImperativeHandle)(t,(function(){return{el:l.current}}));var c=wn(r,"right",{sliding:o},ic(e));return Sl.createElement("div",tu({id:n,style:a,className:c,ref:l},s),i)}));ru.displayName="f7-nav-right";var nu=ru;function au(){return(au=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var iu=(0,Sl.forwardRef)((function(e,t){var r=e.className,n=e.id,a=e.style,i=e.sliding,o=void 0===i||i,s=e.large,l=e.largeTransparent,c=e.transparent,u=e.hidden,p=e.noShadow,d=e.noHairline,h=e.backLink,f=e.backLinkForce,m=e.backLinkUrl,g=e.backLinkShowText,v=e.title,y=e.subtitle,b=e.titleLarge,_=e.innerClass,x=e.innerClassName,w=(0,Sl.useRef)(""),E=(0,Sl.useRef)(!1),C=(0,Sl.useRef)(null),k=(0,Sl.useRef)(!1),T=(0,Sl.useRef)(!1),S=(0,Sl.useRef)(!1),P=kn(e),M=(0,Sl.useRef)(null),I=Tc(),A=function(t){M.current===t&&Cn(e,"navbarHide")},O=function(t){M.current===t&&Cn(e,"navbarShow")},z=function(t){M.current===t&&(E.current=!1,Cn(e,"navbarExpand"))},R=function(t){M.current===t&&(E.current=!0,Cn(e,"navbarCollapse"))},L=function(t){M.current===t&&(S.current=!0,Cn(e,"navbarTransparentShow"))},D=function(t){M.current===t&&(S.current=!1,Cn(e,"navbarTransparentHide"))},B=function(e,t){M.current===e&&(w.current=t?"navbar-"+t:"")},$=function(e,t){M.current===e&&(C.current=t.role,k.current=t.detailRoot)},F=function(e){M.current===e&&(T.current=!0)},N=function(e){M.current===e&&(T.current=!1)},V=function(e){Tn&&Tn.navbar.hide(M.current,e)},j=function(e){Tn&&Tn.navbar.show(M.current,e)},U=function(){Tn&&Tn.navbar.size(M.current)};(0,Sl.useImperativeHandle)(t,(function(){return{el:M.current,hide:V,show:j,size:U}}));var q=function(){Tn&&(Tn.off("navbarShow",O),Tn.off("navbarHide",A),Tn.off("navbarCollapse",R),Tn.off("navbarExpand",z),Tn.off("navbarPosition",B),Tn.off("navbarRole",$),Tn.off("navbarMasterStack",F),Tn.off("navbarMasterUnstack",N),Tn.off("navbarTransparentShow",L),Tn.off("navbarTransparentHide",D))};ac((function(){return M.current&&Bn((function(){Tn.navbar.size(M.current),Tn.on("navbarShow",O),Tn.on("navbarHide",A),Tn.on("navbarCollapse",R),Tn.on("navbarExpand",z),Tn.on("navbarPosition",B),Tn.on("navbarRole",$),Tn.on("navbarMasterStack",F),Tn.on("navbarMasterUnstack",N),Tn.on("navbarTransparentShow",L),Tn.on("navbarTransparentHide",D)})),q}));var H,G,W,X,Z=En(e),Y=I&&I.ios&&Tn&&!Tn.params.navbar.iosCenterTitle,K=I&&I.md&&Tn&&Tn.params.navbar.mdCenterTitle||I&&I.aurora&&Tn&&Tn.params.navbar.auroraCenterTitle,Q=s||l,J=c||Q&&l,ee=J&&S.current,te=wn(r,"navbar",w.current,{"navbar-hidden":u,"navbar-large":Q,"navbar-large-collapsed":Q&&E.current,"navbar-transparent":J,"navbar-transparent-visible":ee,"navbar-master":"master"===C.current,"navbar-master-detail":"detail"===C.current,"navbar-master-detail-root":!0===k.current,"navbar-master-stacked":!0===T.current,"no-shadow":p,"no-hairline":d},ic(e));(h||Z["nav-left"]||Z.left)&&(H=Sl.createElement(Kc,{backLink:h,backLinkUrl:m,backLinkForce:f,backLinkShowText:g,onBackClick:function(t){Cn(e,"backClick clickBack",t)}},Z["nav-left"],Z.left)),(v||y||Z.title)&&(G=Sl.createElement(eu,{title:v,subtitle:y},Z.title)),(Z["nav-right"]||Z.right)&&(W=Sl.createElement(nu,null,Z["nav-right"],Z.right));var re=b;!re&&s&&v&&(re=v),(re||Z["title-large"])&&(X=Sl.createElement("div",{className:"title-large"},Sl.createElement("div",{className:"title-large-text"},re||"",Z["title-large"])));var ne=Sl.createElement("div",{className:wn("navbar-inner",_,x,{sliding:o,"navbar-inner-left-title":Y,"navbar-inner-centered-title":K})},H,G,W,X,Z.default);return Sl.createElement("div",au({id:n,style:a,className:te,ref:M},P),Sl.createElement("div",{className:"navbar-bg"}),Z["before-inner"],ne,Z["after-inner"])}));iu.displayName="f7-navbar";var ou=iu,su=Sl.createContext({listIsMedia:!1,listIsSimple:!1,listIsSortable:!1,listIsSortableOpposite:!1});function lu(){return(lu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var cu=(0,Sl.forwardRef)((function(e,t){var r=(0,Sl.useRef)(null),n=e.className,a=e.id,i=e.style,o=e.inset,s=e.xsmallInset,l=e.smallInset,c=e.mediumInset,u=e.largeInset,p=e.xlargeInset,d=e.mediaList,h=e.sortable,f=e.sortableTapHold,m=e.sortableEnabled,g=e.sortableMoveElements,v=e.sortableOpposite,y=e.accordionList,b=e.accordionOpposite,_=e.contactsList,x=e.simpleList,w=e.linksList,E=e.menuList,C=e.noHairlines,k=e.noHairlinesBetween,T=e.noHairlinesMd,S=e.noHairlinesBetweenMd,P=e.noHairlinesIos,M=e.noHairlinesBetweenIos,I=e.noHairlinesAurora,A=e.noHairlinesBetweenAurora,O=e.noChevron,z=e.chevronCenter,R=e.tab,L=e.tabActive,D=e.form,B=e.formStoreData,$=e.inlineLabels,F=e.virtualList,N=e.virtualListParams,V=kn(e),j=(0,Sl.useRef)(null),U=function(t){j.current===t&&Cn(e,"sortableEnable")},q=function(t){j.current===t&&Cn(e,"sortableDisable")},H=function(t,r,n){j.current===n&&Cn(e,"sortableSort",r)};(0,Sl.useImperativeHandle)(t,(function(){return{el:j.current,f7VirtualList:function(){return r.current}}})),_c(j,e);var G=function(){Tn&&(Tn.off("sortableEnable",U),Tn.off("sortableDisable",q),Tn.off("sortableSort",H))},W=function(){Tn&&F&&r.current&&(r.current.destroy&&r.current.destroy(),r.current=null)};ac((function(){return Bn((function(){if(F){var t=N||{};(t.renderItem||t.renderExternal)&&(r.current=Tn.virtualList.create(_n({el:j.current,on:{itemBeforeInsert:function(t,r){Cn(e,"virtualItemBeforeInsert",this,t,r)},beforeClear:function(t){Cn(e,"virtualBeforeClear",this,t)},itemsBeforeInsert:function(t){Cn(e,"virtualItemsBeforeInsert",this,t)},itemsAfterInsert:function(t){Cn(e,"virtualItemsAfterInsert",this,t)}}},t)))}})),W}),[]),ac((function(){return Bn((function(){Tn.on("sortableEnable",U),Tn.on("sortableDisable",q),Tn.on("sortableSort",H)})),G}));var X=En(e),Z=X.list,Y=X.default,K=[],Q=[],J=Z||[],ee=xn(Y),te=!1;ee.forEach((function(e){if(void 0!==e){var t=e.type&&(e.type.displayName||e.type.name);t||"string"!=typeof e.type||(t=e.type),!t||t&&!("li"===t||t.indexOf("f7-list-item")>=0||t.indexOf("f7-list-button")>=0||t.indexOf("f7-list-input")>=0)?te?Q.push(e):K.push(e):t&&(te=!0,J.push(e))}}));var re=D?"form":"div",ne=wn(n,"list",{inset:o,"xsmall-inset":s,"small-inset":l,"medium-inset":c,"large-inset":u,"xlarge-inset":p,"media-list":d,"simple-list":x,"links-list":w,"menu-list":E,sortable:h,"sortable-tap-hold":f,"sortable-enabled":m,"sortable-opposite":v,"accordion-list":y,"accordion-opposite":b,"contacts-list":_,"virtual-list":F,tab:R,"tab-active":L,"no-hairlines":C,"no-hairlines-md":T,"no-hairlines-ios":P,"no-hairlines-aurora":I,"no-hairlines-between":k,"no-hairlines-between-md":S,"no-hairlines-between-ios":M,"no-hairlines-between-aurora":A,"form-store-data":B,"inline-labels":$,"no-chevron":O,"chevron-center":z},ic(e));return Sl.createElement(re,lu({id:a,ref:j,style:i,className:ne},V,{"data-sortable-move-elements":void 0!==g?g.toString():void 0,onSubmit:function(t){Cn(e,"submit",t)}}),Sl.createElement(su.Provider,{value:{listIsMedia:d,listIsSimple:x,listIsSortable:h,listIsSortableOpposite:v}},X["before-list"],K,J.length>0&&Sl.createElement("ul",null,J),X["after-list"],Q))}));cu.displayName="f7-list";var uu=cu,pu=function(e){var t,r,n,a,i,o,s,l,c,u,p,d,h,f,m=e.indeterminate,g=e.radio,v=e.checkbox,y=e.value,b=e.name,_=e.readonly,x=e.disabled,w=e.checked,E=e.defaultChecked,C=e.required,k=e.media,T=e.header,S=e.footer,P=e.title,M=e.subtitle,I=e.text,A=e.after,O=e.badge,z=e.badgeColor,R=e.radioIcon,L=e.swipeout,D=e.sortable,B=e.accordionItem,$=e.onChange,F=e.onClick,N=e.isMediaComputed,V=e.isSortableComputed,j=e.isSortableOppositeComputed,U=e.slots,q=(0,Sl.useRef)(null);((0,Sl.useEffect)((function(){q.current&&(q.current.indeterminate=!!m)}),[m]),(g||v)&&(u=Sl.createElement("input",{ref:q,value:y,name:b,checked:w,defaultChecked:E,readOnly:_,disabled:x,required:C,type:g?"radio":"checkbox",onChange:$}),p=Sl.createElement("i",{className:"icon icon-"+(g?"radio":"checkbox")})),k||U.media)&&(k&&(f=Sl.createElement("img",{src:k})),c=Sl.createElement("div",{className:"item-media"},f,U.media));(T||U.header)&&(d=Sl.createElement("div",{className:"item-header"},T,U.header)),(S||U.footer)&&(h=Sl.createElement("div",{className:"item-footer"},S,U.footer)),(P||U.title||!N&&d||!N&&h)&&(t=Sl.createElement("div",{className:"item-title"},!N&&d,P,U.title,!N&&h)),(M||U.subtitle)&&(s=Sl.createElement("div",{className:"item-subtitle"},M,U.subtitle)),(I||U.text)&&(l=Sl.createElement("div",{className:"item-text"},I,U.text)),(A||O||U.after)&&(A&&(n=Sl.createElement("span",null,A)),O&&(a=Sl.createElement(jc,{color:z},O)),r=Sl.createElement("div",{className:"item-after"},U["after-start"],n,a,U.after,U["after-end"])),N?(o=Sl.createElement("div",{className:"item-title-row"},U["before-title"],t,U["after-title"],r),i=Sl.createElement("div",{className:"item-inner"},U["inner-start"],d,o,s,l,L||B?null:U.default,U.inner,h,U["inner-end"])):i=Sl.createElement("div",{className:"item-inner"},U["inner-start"],U["before-title"],t,U["after-title"],r,L||B?null:U.default,U.inner,U["inner-end"]);var H=v||g?"label":"div",G=wn("item-content",{"item-checkbox":v,"item-radio":g,"item-radio-icon-start":g&&"start"===R,"item-radio-icon-end":g&&"end"===R},ic(e));return Sl.createElement(H,{className:G,onClick:F},V&&!1!==D&&j&&Sl.createElement("div",{className:"sortable-handler"}),U["content-start"],u,p,c,i,U.content,U["content-end"])};pu.displayName="f7-list-item-content";var du=pu;function hu(){return(hu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var fu=(0,Sl.forwardRef)((function(e,t){var r=e.className,n=e.id,a=e.style,i=e.children,o=e.title,s=e.link,l=e.target,c=e.tabLink,u=e.tabLinkActive,p=e.selected,d=e.mediaItem,h=e.mediaList,f=e.divider,m=e.groupTitle,g=e.swipeout,v=e.swipeoutOpened,y=e.sortable,b=e.sortableOpposite,_=e.accordionItem,x=e.accordionItemOpened,w=e.smartSelect,E=e.smartSelectParams,C=e.noChevron,k=e.chevronCenter,T=e.checkbox,S=e.radio,P=e.disabled,M=e.virtualListIndex,I=e.href,A=(0,Sl.useContext)(su)||{},O=A.listIsMedia,z=void 0!==O&&O,R=A.listIsSortable,L=void 0!==R&&R,D=A.listIsSortableOpposite,B=void 0!==D&&D,$=A.listIsSimple,F=void 0!==$&&$,N=kn(e),V=(0,Sl.useRef)(null),j=(0,Sl.useRef)(null),U=(0,Sl.useRef)(null),q=function(t){"input"!==t.target.tagName.toLowerCase()&&Cn(e,"click",t)},H=function(t){V.current===t&&Cn(e,"swipeoutOverswipeEnter")},G=function(t){V.current===t&&Cn(e,"swipeoutOverswipeExit")},W=function(t){V.current===t&&Cn(e,"swipeoutDeleted")},X=function(t){V.current===t&&Cn(e,"swipeoutDelete")},Z=function(t){V.current===t&&Cn(e,"swipeoutClose")},Y=function(t){V.current===t&&Cn(e,"swipeoutClosed")},K=function(t){V.current===t&&Cn(e,"swipeoutOpen")},Q=function(t){V.current===t&&Cn(e,"swipeoutOpened")},J=function(t,r){V.current===t&&Cn(e,"swipeout",r)},ee=function(t,r){V.current===t&&Cn(e,"accordionBeforeClose",r)},te=function(t){V.current===t&&Cn(e,"accordionClose")},re=function(t){V.current===t&&Cn(e,"accordionClosed")},ne=function(t,r){V.current===t&&Cn(e,"accordionBeforeOpen",r)},ae=function(t){V.current===t&&Cn(e,"accordionOpen")},ie=function(t){V.current===t&&Cn(e,"accordionOpened")};(0,Sl.useImperativeHandle)(t,(function(){return{el:V.current,f7SmartSelect:function(){return U.current}}})),Dc(V,e),Uc(j,e),gc(v,(function(e){g&&V.current&&Tn&&(e?Tn.swipeout.open(V.current):Tn.swipeout.close(V.current))}));var oe=function(){Tn&&(Tn.off("swipeoutOpen",K),Tn.off("swipeoutOpened",Q),Tn.off("swipeoutClose",Z),Tn.off("swipeoutClosed",Y),Tn.off("swipeoutDelete",X),Tn.off("swipeoutDeleted",W),Tn.off("swipeoutOverswipeEnter",H),Tn.off("swipeoutOverswipeExit",G),Tn.off("swipeout",J),Tn.off("accordionBeforeOpen",ne),Tn.off("accordionOpen",ae),Tn.off("accordionOpened",ie),Tn.off("accordionBeforeClose",ee),Tn.off("accordionClose",te),Tn.off("accordionClosed",re))};Hc(w,E,U,(function(){return V.current.querySelector("a.smart-select")})),ac((function(){Bn((function(){g&&v&&Tn.swipeout.open(V.current)}))}),[]),ac((function(){return Bn((function(){g&&(Tn.on("swipeoutOpen",K),Tn.on("swipeoutOpened",Q),Tn.on("swipeoutClose",Z),Tn.on("swipeoutClosed",Y),Tn.on("swipeoutDelete",X),Tn.on("swipeoutDeleted",W),Tn.on("swipeoutOverswipeEnter",H),Tn.on("swipeoutOverswipeExit",G),Tn.on("swipeout",J)),_&&(Tn.on("accordionBeforeOpen",ne),Tn.on("accordionOpen",ae),Tn.on("accordionOpened",ie),Tn.on("accordionBeforeClose",ee),Tn.on("accordionClose",te),Tn.on("accordionClosed",re))})),oe}));var se,le,ce=En(e),ue=d||h||z,pe=y||L,de=pe&&(b||B);if(!F&&(le=Sl.createElement(du,hu({},e,{slots:ce,onChange:function(t){Cn(e,"change",t)},onClick:s||I||_||w?void 0:q,isMediaComputed:ue,isSortableComputed:pe,isSortableOppositeComputed:de})),s||I||_||w)){var he=hu({href:!0===s?"":s||I,target:l,"data-tab":vn(c)&&c||void 0},oc(e),lc(e)),fe=wn({"item-link":!0,"smart-select":w,"tab-link":c||""===c,"tab-link-active":u,"item-selected":p},sc(e),cc(e));se=Sl.createElement("a",hu({ref:j,className:fe},he,{onClick:q}),le)}var me=wn(r,{"item-divider":f,"list-group-title":m,"media-item":ue,swipeout:g,"accordion-item":_,"accordion-item-opened":x,disabled:P&&!(S||T),"no-chevron":C,"chevron-center":k,"disallow-sorting":!1===y},ic(e));if(f||m)return Sl.createElement("li",{ref:V,id:n,style:a,className:me,"data-virtual-list-index":M,onClick:q},Sl.createElement("span",null,o,i));if(F)return Sl.createElement("li",{ref:V,id:n,style:a,className:me,"data-virtual-list-index":M,onClick:q},o,i);var ge=s||I||w||_?se:le;return Sl.createElement("li",hu({ref:V,id:n,style:a,className:me,"data-virtual-list-index":M},N),ce["root-start"],g?Sl.createElement("div",{className:"swipeout-content"},ge):ge,pe&&!1!==y&&!de&&Sl.createElement("div",{className:"sortable-handler"}),(g||_)&&ce.default,ce.root,ce["root-end"])}));fu.displayName="f7-list-item";var mu=fu;function gu(){return(gu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var vu=(0,Sl.forwardRef)((function(e,t){var r=e.className,n=e.id,a=e.style,i=e.children,o=e.tabs,s=kn(e),l=(0,Sl.useRef)(null);(0,Sl.useImperativeHandle)(t,(function(){return{el:l.current}}));var c=wn(r,"views",{tabs:o},ic(e));return Sl.createElement("div",gu({id:n,style:a,className:c,ref:l},s),i)}));vu.displayName="f7-views";var yu=vu;function bu(){return(bu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var _u=(0,Sl.forwardRef)((function(e,t){var r=e.className,n=e.id,a=e.style,i=e.tabbar,o=e.labels,s=e.scrollable,l=e.hidden,c=e.noShadow,u=e.noHairline,p=e.noBorder,d=e.position,h=e.topMd,f=e.topIos,m=e.topAurora,g=e.top,v=e.bottomMd,y=e.bottomIos,b=e.bottomAurora,_=e.bottom,x=e.inner,w=void 0===x||x,E=kn(e),C=(0,Sl.useRef)(null),k=function(t){C.current===t&&Cn(e,"toolbarHide")},T=function(t){C.current===t&&Cn(e,"toolbarShow")},S=function(e){Tn&&Tn.toolbar.hide(C.current,e)},P=function(e){Tn&&Tn.toolbar.show(C.current,e)};(0,Sl.useImperativeHandle)(t,(function(){return{el:C.current,hide:S,show:P}})),ac((function(){return Bn((function(){i&&Tn&&C.current&&Tn.toolbar.setHighlight(C.current),Tn.on("toolbarShow",T),Tn.on("toolbarHide",k)})),function(){Tn&&(Tn.off("toolbarShow",T),Tn.off("toolbarHide",k))}}));var M=Tc(),I=wn(r,"toolbar",{tabbar:i,"toolbar-bottom":M&&M.md&&v||M&&M.ios&&y||M&&M.aurora&&b||_||"bottom"===d,"toolbar-top":M&&M.md&&h||M&&M.ios&&f||M&&M.aurora&&m||g||"top"===d,"tabbar-labels":o,"tabbar-scrollable":s,"toolbar-hidden":l,"no-shadow":c,"no-hairline":u||p},ic(e)),A=En(e);return Sl.createElement("div",bu({id:n,style:a,className:I,ref:C},E),Sl.createElement(qc.Provider,{value:{tabbarHasLabels:o}},A["before-inner"],w?Sl.createElement("div",{className:"toolbar-inner"},A.default):A.default,A["after-inner"]))}));_u.displayName="f7-toolbar";var xu=_u,wu={f7:null,handleSplashscreen:function(){var e=wu.f7;window.navigator.splashscreen&&!e.device.electron&&setTimeout((function(){window.navigator.splashscreen.hide()}),2e3)},handleAndroidBackButton:function(){var e=wu.f7,t=e.$;e.device.electron||document.addEventListener("backbutton",(function(r){if(t(".actions-modal.modal-in").length)return e.actions.close(".actions-modal.modal-in"),r.preventDefault(),!1;if(t(".dialog.modal-in").length)return e.dialog.close(".dialog.modal-in"),r.preventDefault(),!1;if(t(".sheet-modal.modal-in").length)return e.sheet.close(".sheet-modal.modal-in"),r.preventDefault(),!1;if(t(".popover.modal-in").length)return e.popover.close(".popover.modal-in"),r.preventDefault(),!1;if(t(".popup.modal-in").length){if(t(".popup.modal-in>.view").length){var n=e.views.get(".popup.modal-in>.view");if(n&&n.router&&n.router.history.length>1)return n.router.back(),r.preventDefault(),!1}return e.popup.close(".popup.modal-in"),r.preventDefault(),!1}if(t(".login-screen.modal-in").length)return e.loginScreen.close(".login-screen.modal-in"),r.preventDefault(),!1;if(t(".page-current .searchbar-enabled").length)return e.searchbar.disable(".page-current .searchbar-enabled"),r.preventDefault(),!1;if(t(".page-current .card-expandable.card-opened").length)return e.card.close(".page-current .card-expandable.card-opened"),r.preventDefault(),!1;var a=e.views.current;return a&&a.router&&a.router.history.length>1?(a.router.back(),r.preventDefault(),!1):t(".panel.panel-in").length?(e.panel.close(".panel.panel-in"),r.preventDefault(),!1):void 0}),!1)},handleKeyboard:function(){var e=wu.f7;if(window.Keyboard&&window.Keyboard.shrinkView&&!e.device.electron){var t=e.$;window.Keyboard.shrinkView(!1),window.Keyboard.disableScrollingInShrinkView(!0),window.Keyboard.hideFormAccessoryBar(!0),window.addEventListener("keyboardWillShow",(function(){e.input.scrollIntoView(document.activeElement,0,!0,!0)})),window.addEventListener("keyboardDidShow",(function(){e.input.scrollIntoView(document.activeElement,0,!0,!0)})),window.addEventListener("keyboardDidHide",(function(){document.activeElement&&t(document.activeElement).parents(".messagebar").length||window.Keyboard.hideFormAccessoryBar(!1)})),window.addEventListener("keyboardHeightWillChange",(function(e){var r=e.keyboardHeight;r>0?(document.body.style.height="calc(100% - ".concat(r,"px)"),t("html").addClass("device-with-keyboard")):(document.body.style.height="",t("html").removeClass("device-with-keyboard"))})),t(document).on("touchstart","input, textarea, select",(function(e){var t=e.target.nodeName.toLowerCase(),r=e.target.type;"select"===t||["datetime-local","time","date","datetime"].indexOf(r)>=0?window.Keyboard.hideFormAccessoryBar(!1):window.Keyboard.hideFormAccessoryBar(!0)}),!0)}},init:function(e){wu.f7=e,wu.handleAndroidBackButton(),wu.handleSplashscreen(),wu.handleKeyboard()}},Eu=wu;function Cu(){return(Cu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var ku=(0,Sl.forwardRef)((function(e,t){var r=e.className,n=e.id,a=e.style,i=e.children,o=e.large,s=e.medium,l=kn(e),c=(0,Sl.useRef)(null);(0,Sl.useImperativeHandle)(t,(function(){return{el:c.current}}));var u=wn(r,"block-title",{"block-title-large":o,"block-title-medium":s},ic(e));return Sl.createElement("div",Cu({id:n,style:a,className:u,ref:c},l),i)}));ku.displayName="f7-block-title";var Tu=ku;function Su(){return(Su=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Pu=(0,Sl.forwardRef)((function(e,t){var r=e.className,n=e.inset,a=e.xsmallInset,i=e.smallInset,o=e.mediumInset,s=e.largeInset,l=e.xlargeInset,c=e.strong,u=e.accordionList,p=e.accordionOpposite,d=e.tabs,h=e.tab,f=e.tabActive,m=e.noHairlines,g=e.noHairlinesIos,v=e.noHairlinesMd,y=e.noHairlinesAurora,b=e.id,_=e.style,x=e.children,w=kn(e),E=(0,Sl.useRef)(null);(0,Sl.useImperativeHandle)(t,(function(){return{el:E.current}})),_c(E,e);var C=wn(r,"block",{inset:n,"xsmall-inset":a,"small-inset":i,"medium-inset":o,"large-inset":s,"xlarge-inset":l,"block-strong":c,"accordion-list":u,"accordion-opposite":p,tabs:d,tab:h,"tab-active":f,"no-hairlines":m,"no-hairlines-md":v,"no-hairlines-ios":g,"no-hairlines-aurora":y},ic(e));return Sl.createElement("div",Su({id:b,style:_,className:C,ref:E},w),x)}));Pu.displayName="f7-block";var Mu=Pu,Iu=function(){return Sl.createElement(Lc,null,Sl.createElement(ou,{title:"About",backLink:"Back"}),Sl.createElement(Tu,null,"About My App"),Sl.createElement(Mu,{strong:!0},Sl.createElement("p",null,"Fugiat perspiciatis excepturi, soluta quod non ullam deleniti. Nobis sint nemo consequuntur, fugiat. Eius perferendis animi autem incidunt vel quod tenetur nostrum, voluptate omnis quasi quidem illum consequuntur, a, quisquam."),Sl.createElement("p",null,"Laudantium neque magnam vitae nemo quam commodi, in cum dolore obcaecati laborum, excepturi harum, optio qui, consequuntur? Obcaecati dolor sequi nesciunt culpa quia perspiciatis, reiciendis ex debitis, ut tenetur alias.")),Sl.createElement(Mu,{strong:!0},Sl.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Magni molestiae laudantium dignissimos est nobis delectus nemo ea alias voluptatum architecto, amet similique, saepe iste consectetur in repellat ut minus quibusdam!"),Sl.createElement("p",null,"Molestias et distinctio porro nesciunt ratione similique, magni doloribus, rerum nobis, aliquam quae reiciendis quasi modi. Nam a recusandae, fugiat in ea voluptates fuga eius, velit corrupti reprehenderit dignissimos consequatur!"),Sl.createElement("p",null,"Blanditiis, cumque quo adipisci. Molestiae, dolores dolorum quos doloremque ipsa ullam eligendi commodi deserunt doloribus inventore magni? Ea mollitia veniam nostrum nihil, iusto doloribus a at! Ea molestiae ullam delectus!")))},Au=function(e){var t=e.user;return Sl.createElement(Lc,null,Sl.createElement(ou,{title:"".concat(t.firstName," ").concat(t.lastName),backLink:"Back"}),Sl.createElement(Mu,{strong:!0},t.about),Sl.createElement(uu,null,t.links.map((function(e,t){return Sl.createElement(mu,{key:t,link:e.url,title:e.title,external:!0,target:"_blank"})}))))},Ou=function(){return Sl.createElement(Lc,null,Sl.createElement(ou,{title:"Not found",backLink:"Back"}),Sl.createElement(Mu,{strong:!0},Sl.createElement("p",null,"Sorry"),Sl.createElement("p",null,"Requested content not found.")))};function zu(){return(zu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Ru=(0,Sl.forwardRef)((function(e,t){var r=e.className,n=e.id,a=e.style,i=e.children,o=e.tag,s=void 0===o?"div":o,l=e.noGap,c=e.resizable,u=e.resizableFixed,p=e.resizableAbsolute,d=e.resizableHandler,h=void 0===d||d,f=kn(e),m=(0,Sl.useRef)(null),g=function(t){t===m.current&&Cn(e,"gridResize")};(0,Sl.useImperativeHandle)(t,(function(){return{el:m.current}})),(0,Sl.useEffect)((function(){return Bn((function(){Tn.on("gridResize",g)})),function(){Tn.off("gridResize",g)}}));var v=s,y=wn(r,"row",{"no-gap":l,resizable:c,"resizable-fixed":u,"resizable-absolute":p},ic(e));return Sl.createElement(v,zu({id:n,style:a,className:y,ref:m},f,{onClick:function(t){Cn(e,"click",t)}}),i,c&&h&&Sl.createElement("span",{className:"resize-handler"}))}));Ru.displayName="f7-row";var Lu=Ru;function Du(){return(Du=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Bu=(0,Sl.forwardRef)((function(e,t){var r,n=e.className,a=e.id,i=e.style,o=e.children,s=e.tag,l=void 0===s?"div":s,c=e.width,u=void 0===c?"auto":c,p=e.xsmall,d=e.small,h=e.medium,f=e.large,m=e.xlarge,g=e.resizable,v=e.resizableFixed,y=e.resizableAbsolute,b=e.resizableHandler,_=void 0===b||b,x=kn(e),w=(0,Sl.useRef)(null),E=function(t){t===w.current&&Cn(e,"gridResize")};(0,Sl.useImperativeHandle)(t,(function(){return{el:w.current}}));var C=l,k=wn(n,((r={col:"auto"===u})["col-"+u]="auto"!==u,r["xsmall-"+p]=p,r["small-"+d]=d,r["medium-"+h]=h,r["large-"+f]=f,r["xlarge-"+m]=m,r.resizable=g,r["resizable-fixed"]=v,r["resizable-absolute"]=y,r),ic(e));return(0,Sl.useEffect)((function(){return Bn((function(){Tn.on("gridResize",E)})),function(){Tn.off("gridResize",E)}})),Sl.createElement(C,Du({id:a,style:i,className:k,ref:w},x,{onClick:function(t){Cn(e,"click",t)}}),o,g&&_&&Sl.createElement("span",{className:"resize-handler"}))}));Bu.displayName="f7-col";var $u=Bu;function Fu(){return(Fu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Nu=(0,Sl.forwardRef)((function(e,t){var r=e.className,n=e.id,a=e.style,i=e.children,o=kn(e),s=(0,Sl.useRef)(null);(0,Sl.useImperativeHandle)(t,(function(){return{el:s.current}}));var l=wn(r,"card-header",ic(e));return Sl.createElement("div",Fu({id:n,style:a,className:l,ref:s},o),i)}));Nu.displayName="f7-card-header";var Vu=Nu;function ju(){return(ju=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Uu=(0,Sl.forwardRef)((function(e,t){var r=e.className,n=e.id,a=e.style,i=e.children,o=e.padding,s=void 0===o||o,l=kn(e),c=(0,Sl.useRef)(null);(0,Sl.useImperativeHandle)(t,(function(){return{el:c.current}}));var u=wn(r,"card-content",{"card-content-padding":s},ic(e));return Sl.createElement("div",ju({id:n,style:a,className:u,ref:c},l),i)}));Uu.displayName="f7-card-content";var qu=Uu;function Hu(){return(Hu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Gu=(0,Sl.forwardRef)((function(e,t){var r=e.className,n=e.id,a=e.style,i=e.children,o=kn(e),s=(0,Sl.useRef)(null);(0,Sl.useImperativeHandle)(t,(function(){return{el:s.current}}));var l=wn(r,"card-footer",ic(e));return Sl.createElement("div",Hu({id:n,style:a,className:l,ref:s},o),i)}));Gu.displayName="f7-card-footer";var Wu=Gu;function Xu(){return(Xu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Zu=(0,Sl.forwardRef)((function(e,t){var r,n,a,i=e.className,o=e.id,s=e.style,l=e.title,c=e.content,u=e.footer,p=e.padding,d=e.outline,h=e.expandable,f=e.expandableAnimateWidth,m=e.expandableOpened,g=e.animate,v=e.hideNavbarOnOpen,y=e.hideToolbarOnOpen,b=e.hideStatusbarOnOpen,_=e.scrollableEl,x=e.swipeToClose,w=e.closeByBackdropClick,E=e.backdrop,C=e.backdropEl,k=e.noShadow,T=e.noBorder,S=kn(e),P=(0,Sl.useRef)(null),M=function(){P.current&&Tn.card.open(P.current)},I=function(){P.current&&Tn.card.close(P.current)},A=function(t,r){P.current===t&&Cn(e,"cardBeforeOpen",t,r)},O=function(t){P.current===t&&Cn(e,"cardOpen",t)},z=function(t,r){P.current===t&&Cn(e,"cardOpened",t,r)},R=function(t){P.current===t&&Cn(e,"cardClose",t)},L=function(t,r){P.current===t&&Cn(e,"cardClosed",t,r)},D=function(){Tn.off("cardBeforeOpen",A),Tn.off("cardOpen",O),Tn.off("cardOpened",z),Tn.off("cardClose",R),Tn.off("cardClosed",L)};ac((function(){h&&P.current&&Bn((function(){h&&m&&Tn.card.open(P.current,!1)}))}),[]),ac((function(){return h&&P.current&&Bn((function(){Tn.on("cardBeforeOpen",A),Tn.on("cardOpen",O),Tn.on("cardOpened",z),Tn.on("cardClose",R),Tn.on("cardClosed",L)})),D})),gc(m,(function(e){e?M():I()})),(0,Sl.useImperativeHandle)(t,(function(){return{el:P.current,open:M,close:I}}));var B=wn(i,"card",{"card-outline":d,"card-expandable":h,"card-expandable-animate-width":f,"no-shadow":k,"no-border":T},ic(e)),$=En(e);return(l||$.header)&&(r=Sl.createElement(Vu,null,l,$.header)),(c||$.content)&&(n=Sl.createElement(qu,{padding:p},c,$.content)),(u||$.footer)&&(a=Sl.createElement(Wu,null,u,$.footer)),Sl.createElement("div",Xu({id:o,style:s,className:B,"data-animate":void 0===g?g:g.toString(),"data-hide-navbar-on-open":void 0===v?v:v.toString(),"data-hide-toolbar-on-open":void 0===y?y:y.toString(),"data-hide-statusbar-on-open":void 0===b?b:b.toString(),"data-scrollable-el":_,"data-swipe-to-close":void 0===x?x:x.toString(),"data-close-by-backdrop-click":void 0===w?w:w.toString(),"data-backdrop":void 0===E?E:E.toString(),"data-backdrop-el":C,ref:P},S),r,n,a,$.default)}));Zu.displayName="f7-card";var Yu=Zu;function Ku(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qu(e,t,r,n,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function Ju(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Qu(i,n,a,o,s,"next",e)}function s(e){Qu(i,n,a,o,s,"throw",e)}o(void 0)}))}}var ep=r(7757),tp=r.n(ep);function rp(){return(rp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var np=(0,Sl.forwardRef)((function(e,t){var r=(0,Sl.useRef)(null),n=e.className,a=e.id,i=e.style,o=e.children,s=e.tabletFullscreen,l=e.push,c=e.opened,u=e.closeByBackdropClick,p=e.backdrop,d=e.backdropEl,h=e.animate,f=e.closeOnEscape,m=e.swipeToClose,g=void 0!==m&&m,v=e.swipeHandler,y=e.containerEl,b=kn(e),_=(0,Sl.useRef)(null),x=(0,Sl.useRef)(c),w=(0,Sl.useRef)(!1),E=function(t){Cn(e,"popupSwipeStart",t)},C=function(t){Cn(e,"popupSwipeMove",t)},k=function(t){Cn(e,"popupSwipeEnd",t)},T=function(t){Cn(e,"popupSwipeClose",t)},S=function(t){x.current=!0,w.current=!1,Cn(e,"popupOpen",t)},P=function(t){Cn(e,"popupOpened",t)},M=function(t){x.current=!1,w.current=!0,Cn(e,"popupClose",t)},I=function(t){w.current=!1,Cn(e,"popupClosed",t)};(0,Sl.useImperativeHandle)(t,(function(){return{el:_.current,f7Popup:function(){return r.current}}})),gc(c,(function(e){r.current&&(e?r.current.open():r.current.close())}));var A=function(e){r.current&&(r.current[e]("swipeStart",E),r.current[e]("swipeMove",C),r.current[e]("swipeEnd",k),r.current[e]("swipeClose",T),r.current[e]("open",S),r.current[e]("opened",P),r.current[e]("close",M),r.current[e]("closed",I))},O=function(){r.current&&r.current.destroy(),r.current=null};ac((function(){return A("on"),function(){A("off")}})),ac((function(){return function(){if(_.current){var t={el:_.current};"closeByBackdropClick"in e&&(t.closeByBackdropClick=u),"closeOnEscape"in e&&(t.closeOnEscape=f),"animate"in e&&(t.animate=h),"backdrop"in e&&(t.backdrop=p),"backdropEl"in e&&(t.backdropEl=d),"swipeToClose"in e&&(t.swipeToClose=g),"swipeHandler"in e&&(t.swipeHandler=v),"containerEl"in e&&(t.containerEl=y),Bn((function(){r.current=Tn.popup.create(t),A("on"),c&&r.current.open(!1)}))}}(),O}),[]);var z=wn(n,"popup",{"popup-tablet-fullscreen":s,"popup-push":l},function(e){var t=void 0===e?{}:e,r=t.isOpened,n=t.isClosing;return{"modal-in":r.current&&!n.current,"modal-out":n.current}}({isOpened:x,isClosing:w}),ic(e));return Sl.createElement("div",rp({id:a,style:i,className:z,ref:_},b),o)}));np.displayName="f7-popup";var ap=np;function ip(){return(ip=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var op=(0,Sl.forwardRef)((function(e,t){var r=(0,Sl.useRef)(null),n=e.className,a=e.id,i=e.style,o=e.mode,s=e.value,l=e.buttons,c=e.customButtons,u=e.dividers,p=e.imageUrlText,d=e.linkUrlText,h=e.placeholder,f=e.clearFormattingOnPaste,m=e.resizable,g=void 0!==m&&m,v=kn(e),y=(0,Sl.useRef)(null),b=function(t,r){Cn(e,"textEditorChange",r)},_=function(t,r){Cn(e,"textEditorInput",r)},x=function(){Cn(e,"textEditorFocus")},w=function(){Cn(e,"textEditorBlur")},E=function(t,r){Cn(e,"textEditorButtonClick",r)},C=function(){Cn(e,"textEditorKeyboardOpen")},k=function(){Cn(e,"textEditorKeyboardClose")},T=function(){Cn(e,"textEditorPopoverOpen")},S=function(){Cn(e,"textEditorPopoverClose")};(0,Sl.useImperativeHandle)(t,(function(){return{el:y.current,f7TextEditor:function(){return r.current}}})),gc(s,(function(e){r.current&&r.current.setValue(e)}));var P=function(){r.current&&r.current.destroy&&r.current.destroy(),r.current=null};ac((function(){return function(){var e=gn({el:y.current,mode:o,value:s,buttons:l,customButtons:c,dividers:u,imageUrlText:p,linkUrlText:d,placeholder:h,clearFormattingOnPaste:f,on:{change:b,input:_,focus:x,blur:w,buttonClick:E,keyboardOpen:C,keyboardClose:k,popoverOpen:T,popoverClose:S}});Bn((function(){r.current=Tn.textEditor.create(e)}))}(),P}),[]);var M=En(e),I=wn(n,"text-editor",g&&"text-editor-resizable",ic(e));return Sl.createElement("div",ip({ref:y,id:a,style:i,className:I},v),M["root-start"],Sl.createElement("div",{className:"text-editor-content",contentEditable:!0},M.default),M["root-end"],M.root)}));op.displayName="f7-text-editor";var sp=op;function lp(){return(lp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var cp=(0,Sl.forwardRef)((function(e,t){var r=e.className,n=e.id,a=e.style,i=e.sortable,o=e.media,s=e.dropdown,l=void 0===s?"auto":s,c=e.wrap,u=void 0===c||c,p=e.input,d=void 0===p||p,h=e.type,f=void 0===h?"text":h,m=e.name,g=e.value,v=e.defaultValue,y=e.inputmode,b=e.readonly,_=e.required,x=e.disabled,w=e.placeholder,E=e.inputId,C=e.size,k=e.accept,T=e.autocomplete,S=e.autocorrect,P=e.autocapitalize,M=e.spellcheck,I=e.autofocus,A=e.autosave,O=e.max,z=e.min,R=e.step,L=e.maxlength,D=e.minlength,B=e.multiple,$=e.inputStyle,F=e.pattern,N=e.validate,V=e.validateOnBlur,j=e.onValidate,U=e.tabindex,q=e.resizable,H=e.clearButton,G=e.noFormStoreData,W=e.noStoreData,X=e.ignoreStoreData,Z=e.errorMessage,Y=e.errorMessageForce,K=e.info,Q=e.outline,J=e.label,ee=e.inlineLabel,te=e.floatingLabel,re=e.calendarParams,ne=e.colorPickerParams,ae=e.textEditorParams,ie=(0,Sl.useState)(!1),oe=ie[0],se=ie[1],le=(0,Sl.useState)(!1),ce=le[0],ue=le[1],pe=((0,Sl.useContext)(su)||{}).listIsSortable,de=void 0!==pe&&pe,he=kn(e),fe=(0,Sl.useRef)(null),me=(0,Sl.useRef)(null),ge=(0,Sl.useRef)(null),ve=(0,Sl.useRef)(null),ye=(0,Sl.useRef)(null),be=(0,Sl.useRef)(!1),_e=function(){if(ve.current)return ve.current.value},xe=function(){if(Tn&&ve.current){var e=ve.current.validity;e&&(e.valid?(j&&j(!0),!1!==oe&&se(!1)):(j&&j(!1),!0!==oe&&se(!0)))}},we=function(t){Cn(e,"textareaResize",t)},Ee=function(t){Cn(e,"inputNotEmpty",t)},Ce=function(t){Cn(e,"inputEmpty",t)},ke=function(t){Cn(e,"inputClear",t)},Te=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];Cn.apply(void 0,[e,"input"].concat(r)),V||""===V||!N&&""!==N||!ve.current||xe(ve.current)},Se=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];Cn.apply(void 0,[e,"focus"].concat(r)),ue(!0)},Pe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];Cn.apply(void 0,[e,"blur"].concat(r)),(N||""===N||V||""===V)&&ve.current&&xe(ve.current),ue(!1)},Me=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];Cn.apply(void 0,[e,"change"].concat(r)),"texteditor"===f&&Cn(e,"textEditorChange",r[0])};(0,Sl.useImperativeHandle)(t,(function(){return{el:ge.current}}));var Ie=function(){ve.current&&(ve.current.removeEventListener("input:notempty",Ee,!1),ve.current.removeEventListener("textarea:resize",we,!1),ve.current.removeEventListener("input:empty",Ce,!1),ve.current.removeEventListener("input:clear",ke,!1)),fe.current&&fe.current.destroy&&(fe.current.destroy(),fe.current=null),me.current&&me.current.destroy&&(me.current.destroy(),me.current=null)};ac((function(){return(ge.current||ye.current)&&Bn((function(){ve.current&&(ve.current.addEventListener("input:notempty",Ee,!1),ve.current.addEventListener("textarea:resize",we,!1),ve.current.addEventListener("input:empty",Ce,!1),ve.current.addEventListener("input:clear",ke,!1),"datepicker"===f&&(fe.current=Tn.calendar.create(lp({inputEl:ve.current,value:g,on:{change:function(t,r){Cn(e,"calendarChange",r)}}},re||{}))),"colorpicker"===f&&(me.current=Tn.colorPicker.create(lp({inputEl:ve.current,value:g,on:{change:function(t,r){Cn(e,"colorpicker:change colorPickerChange",r)}}},ne||{}))),V||""===V||!N&&""!==N||!(null!=g&&""!==g||null!=v&&""!==v)||setTimeout((function(){xe()}),0),"textarea"===f&&q&&Tn.input.resizeTextarea(ve.current))})),Ie}),[]),ac((function(){if(Tn&&be.current){if(!ve.current)return;be.current=!1,N&&!V&&xe(),"textarea"===f&&q&&Tn.input.resizeTextarea(ve.current)}})),gc(ne,(function(e){Tn&&me.current&&_n(me.current.params,e||{})})),gc(re,(function(e){Tn&&fe.current&&_n(fe.current.params,e||{})})),gc(g,(function(e){Tn&&(be.current=!0,fe.current&&fe.current.setValue(e),me.current&&me.current.setValue(e))}));var Ae,Oe=En(e),ze=_e(),Re=function(){if("datepicker"===f&&Array.isArray(g)&&0===g.length)return!1;var e=_e();return void 0===g?e||0===e:g||0===g}(),Le=i||de,De=function(t,r){var n="file"!==f&&"datepicker"!==f&&"colorpicker"!==f,a="input"===t,i=f;"datepicker"!==i&&"colorpicker"!==i||(i="text");var o,s=wn({resizable:"textarea"===i&&q,"no-store-data":G||W||X,"input-invalid":Z&&Y||oe,"input-with-value":Re,"input-focused":ce});n&&(o=void 0!==g?g:ze);var l={};return"datepicker"!==f&&"colorpicker"!==f&&("value"in e&&(l.value=o),"defaultValue"in e&&(l.defaultValue=v)),Sl.createElement(t,lp({ref:ve,style:$,name:m,type:a?i:void 0,placeholder:w,inputMode:y,id:E,size:C,accept:k,autoComplete:T,autoCorrect:S,autoCapitalize:P,spellCheck:M,autoFocus:I,autoSave:A,disabled:x,max:O,maxLength:L,min:z,minLength:D,step:R,multiple:B,readOnly:b,required:_,pattern:F,validate:"string"==typeof N&&N.length?N:void 0,"data-validate":!0===N||""===N||!0===V||""===V||void 0,"data-validate-on-blur":!0===V||""===V||void 0,tabIndex:U,"data-error-message":Y?void 0:Z,className:s,onFocus:Se,onBlur:Pe,onInput:Te,onChange:Me},l),r)};d&&(Ae="select"===f||"textarea"===f||"file"===f?"select"===f?De("select",Oe.default):De("file"===f?"input":"textarea"):"texteditor"===f?Sl.createElement(sp,lp({value:g,resizable:q,placeholder:w,onTextEditorFocus:Se,onTextEditorBlur:Pe,onTextEditorInput:Te,onTextEditorChange:Me},ae||{})):De("input"));var Be=!!Z||Oe["error-message"]&&Oe["error-message"].length,$e=Sl.createElement("div",{ref:ye,className:wn("item-content item-input",!u&&r,!u&&{disabled:x},!u&&ic(e),{"inline-label":ee,"item-input-outline":Q,"item-input-focused":ce,"item-input-with-info":!!K||Oe.info&&Oe.info.length,"item-input-with-value":Re,"item-input-with-error-message":Be&&Y||oe,"item-input-invalid":Be&&Y||oe})},Oe["content-start"],(o||Oe.media)&&Sl.createElement("div",{className:"item-media"},o&&Sl.createElement("img",{src:o}),Oe.media),Sl.createElement("div",{className:"item-inner"},Oe["inner-start"],(J||Oe.label)&&Sl.createElement("div",{className:wn("item-title item-label",{"item-floating-label":te})},J,Oe.label),Sl.createElement("div",{className:wn("item-input-wrap",{"input-dropdown":"auto"===l?"select"===f:l})},Ae,Oe.input,Be&&Y&&Sl.createElement("div",{className:"item-input-error-message"},Z,Oe["error-message"]),H&&Sl.createElement("span",{className:"input-clear-button"}),(K||Oe.info)&&Sl.createElement("div",{className:"item-input-info"},K,Oe.info)),Oe.inner,Oe["inner-end"]),Oe.content,Oe["content-end"]);return u?Sl.createElement("li",lp({ref:ge,id:n,style:a,className:wn(r,{disabled:x},ic(e))},he),Oe["root-start"],$e,Le&&Sl.createElement("div",{className:"sortable-handler"}),Oe.root,Oe["root-end"]):$e}));cp.displayName="f7-list-input";var up=cp;function pp(){return(pp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var dp=(0,Sl.forwardRef)((function(e,t){var r=e.className,n=e.id,a=e.style,i=e.morphTo,o=e.href,s=e.target,l=e.text,c=e.position,u=void 0===c?"right-bottom":c,p=kn(e),d=(0,Sl.useRef)(null);(0,Sl.useImperativeHandle)(t,(function(){return{el:d.current}})),Dc(d,e);var h=o;!0===h&&(h="#"),!1===h&&(h=void 0);var f,m,g=[],v=[],y=En(e),b=y.link,_=y.default,x=y.root,w=y.text;if(_)for(var E=0;E<_.length;E+=1){var C=_[E],k=void 0,T=C.type&&(C.type.displayName||C.type.name);"FabButtons"!==T&&"f7-fab-buttons"!==T||(k=!0),k?v.push(C):g.push(C)}(l||w&&w.length)&&(f=Sl.createElement("div",{className:"fab-text"},l,w)),(g.length||b&&b.length||f)&&(m=Sl.createElement("a",{target:s,href:h,onClick:function(t){Cn(e,"click",t)}},g,f,b));var S=wn(r,"fab","fab-"+u,{"fab-morph":i,"fab-extended":void 0!==f},ic(e));return Sl.createElement("div",pp({id:n,style:a,className:S,"data-morph-to":i,ref:d},p),m,v,x)}));dp.displayName="f7-fab";var hp=dp;function fp(e){return function(e){if(Array.isArray(e))return tc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var mp=r(4890),gp=r(8500),vp="persist:",yp="persist/FLUSH",bp="persist/REHYDRATE",_p="persist/PAUSE",xp="persist/PERSIST",wp="persist/PURGE",Ep="persist/REGISTER";function Cp(e){return(Cp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sp(e,t,r,n){n.debug;var a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kp(r,!0).forEach((function(t){Tp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kp(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r);return e&&"object"===Cp(e)&&Object.keys(e).forEach((function(n){"_persist"!==n&&t[n]===r[n]&&(a[n]=e[n])})),a}function Pp(e){var t,r=e.blacklist||null,n=e.whitelist||null,a=e.transforms||[],i=e.throttle||0,o="".concat(void 0!==e.keyPrefix?e.keyPrefix:vp).concat(e.key),s=e.storage;t=!1===e.serialize?function(e){return e}:"function"==typeof e.serialize?e.serialize:Mp;var l=e.writeFailHandler||null,c={},u={},p=[],d=null,h=null;function f(){if(0===p.length)return d&&clearInterval(d),void(d=null);var e=p.shift(),r=a.reduce((function(t,r){return r.in(t,e,c)}),c[e]);if(void 0!==r)try{u[e]=t(r)}catch(e){console.error("redux-persist/createPersistoid: error serializing state",e)}else delete u[e];0===p.length&&(Object.keys(u).forEach((function(e){void 0===c[e]&&delete u[e]})),h=s.setItem(o,t(u)).catch(g))}function m(e){return(!n||-1!==n.indexOf(e)||"_persist"===e)&&(!r||-1===r.indexOf(e))}function g(e){l&&l(e)}return{update:function(e){Object.keys(e).forEach((function(t){m(t)&&c[t]!==e[t]&&-1===p.indexOf(t)&&p.push(t)})),Object.keys(c).forEach((function(t){void 0===e[t]&&m(t)&&-1===p.indexOf(t)&&void 0!==c[t]&&p.push(t)})),null===d&&(d=setInterval(f,i)),c=e},flush:function(){for(;0!==p.length;)f();return h||Promise.resolve()}}}function Mp(e){return JSON.stringify(e)}function Ip(e){var t,r=e.transforms||[],n="".concat(void 0!==e.keyPrefix?e.keyPrefix:vp).concat(e.key),a=e.storage;e.debug;return t=!1===e.deserialize?function(e){return e}:"function"==typeof e.deserialize?e.deserialize:Ap,a.getItem(n).then((function(e){if(e)try{var n={},a=t(e);return Object.keys(a).forEach((function(e){n[e]=r.reduceRight((function(t,r){return r.out(t,e,a)}),t(a[e]))})),n}catch(e){throw e}}))}function Ap(e){return JSON.parse(e)}function Op(e){0}function zp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zp(r,!0).forEach((function(t){Lp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zp(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Lp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dp(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Bp(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function $p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$p(r,!0).forEach((function(t){Np(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$p(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Np(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Vp={registry:[],bootstrapped:!1},jp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vp,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ep:return Fp({},e,{registry:[].concat(Bp(e.registry),[t.key])});case bp:var r=e.registry.indexOf(t.key),n=Bp(e.registry);return n.splice(r,1),Fp({},e,{registry:n,bootstrapped:0===n.length});default:return e}};var Up=r(6734);function qp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qp(Object(r),!0).forEach((function(t){Ku(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Gp={number:25,API_URL:"/client/v1",token:"",moveOrders:[],deliveryOrders:[],user:{},MAP_TOKEN:"pk.eyJ1IjoibW92ZXJzIiwiYSI6ImNrdDVnbXp5ZDA4NmcycXFzMWtuamxuODQifQ.DlegQcTzXkX0yGEIO45vDQ"},Wp=function(e,t){var r=void 0!==e.version?e.version:-1,n=(e.debug,void 0===e.stateReconciler?Sp:e.stateReconciler),a=e.getStoredState||Ip,i=void 0!==e.timeout?e.timeout:5e3,o=null,s=!1,l=!0,c=function(e){return e._persist.rehydrated&&o&&!l&&o.update(e),e};return function(u,p){var d=u||{},h=d._persist,f=Dp(d,["_persist"]);if(p.type===xp){var m=!1,g=function(t,r){m||(p.rehydrate(e.key,t,r),m=!0)};if(i&&setTimeout((function(){!m&&g(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))}),i),l=!1,o||(o=Pp(e)),h)return Rp({},t(f,p),{_persist:h});if("function"!=typeof p.rehydrate||"function"!=typeof p.register)throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return p.register(e.key),a(e).then((function(t){(e.migrate||function(e,t){return Promise.resolve(e)})(t,r).then((function(e){g(e)}),(function(e){g(void 0,e)}))}),(function(e){g(void 0,e)})),Rp({},t(f,p),{_persist:{version:r,rehydrated:!1}})}if(p.type===wp)return s=!0,p.result(function(e){var t=e.storage,r="".concat(void 0!==e.keyPrefix?e.keyPrefix:vp).concat(e.key);return t.removeItem(r,Op)}(e)),Rp({},t(f,p),{_persist:h});if(p.type===yp)return p.result(o&&o.flush()),Rp({},t(f,p),{_persist:h});if(p.type===_p)l=!0;else if(p.type===bp){if(s)return Rp({},f,{_persist:Rp({},h,{rehydrated:!0})});if(p.key===e.key){var v=t(f,p),y=p.payload,b=Rp({},!1!==n&&void 0!==y?n(y,u,v,e):v,{_persist:Rp({},h,{rehydrated:!0})});return c(b)}}if(!h)return t(u,p);var _=t(f,p);return _===f?u:c(Rp({},_,{_persist:h}))}}({key:"root",storage:Up.Z},(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gp,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"token/setToken":return Hp(Hp({},e),{},{token:t.payload});case"moveOrders/add":return Hp(Hp({},e),{},{moveOrders:[t.payload].concat(fp(e.moveOrders))});case"serverMoveOrders/add":return Hp(Hp({},e),{},{moveOrders:fp(e.moveOrders).concat(t.payload)});case"serverDeliveryOrders/add":return Hp(Hp({},e),{},{deliveryOrders:fp(e.deliveryOrders).concat(t.payload)});case"moveOrders/deleteAll":return Hp(Hp({},e),{},{moveOrders:[]});case"deliveryOrders/add":return Hp(Hp({},e),{},{deliveryOrders:[t.payload].concat(fp(e.deliveryOrders))});case"deliveryOrders/deleteAll":return Hp(Hp({},e),{},{deliveryOrders:[]});case"user/addInfo":return Hp(Hp({},e),{},{user:t.payload});case"logOut":return Hp(Hp({},e),{},{token:""});case"updateStatus":return Hp(Hp({},e),{},{moveOrders:e.moveOrders.map((function(e){return e._id===t.payload.id?Hp(Hp({},e),{},{status:t.payload.status}):e})),deliveryOrders:e.deliveryOrders.map((function(e){return e._id===t.payload.id?Hp(Hp({},e),{},{status:t.payload.status}):e}))});case"setUserLoc":return Hp(Hp({},e),{},{userLoc:userLoc.map((function(e,r){return r!==t.index?e:Hp(Hp({},e),t.e)}))});case"number/add":return Hp(Hp({},e),{},{number:e.number+1});case"test/add":return Hp(Hp({},e),{},{test:e.n+1});default:return e}})),Xp=(0,mp.MT)(Wp,(0,gp.Uo)()),Zp=function(e,t,r){var n=r||!1,a=(0,mp.MT)(jp,Vp,t&&t.enhancer?t.enhancer:void 0),i=function(e){a.dispatch({type:Ep,key:e})},o=function(t,r,i){var o={type:bp,payload:r,err:i,key:t};e.dispatch(o),a.dispatch(o),n&&s.getState().bootstrapped&&(n(),n=!1)},s=Fp({},a,{purge:function(){var t=[];return e.dispatch({type:wp,result:function(e){t.push(e)}}),Promise.all(t)},flush:function(){var t=[];return e.dispatch({type:yp,result:function(e){t.push(e)}}),Promise.all(t)},pause:function(){e.dispatch({type:_p})},persist:function(){e.dispatch({type:xp,register:i,rehydrate:o})}});return t&&t.manualPersist||s.persist(),s}(Xp),Yp=function(e){return e.socket},Kp=function(e){return e.moveOrders},Qp=function(e){return e.deliveryOrders},Jp=function(e){return e.token},ed=function(e){return e.API_URL},td=function(e){return e.user},rd=function(e){return e.MAP_TOKEN},nd=r(9651),ad=r.n(nd),id=r(6158),od=r.n(id),sd=(r(3052),r(6486)),ld=function(e){var t=nc((0,Sl.useState)(!1),2),r=t[0],n=t[1],a=nc((0,Sl.useState)(""),2),i=a[0],o=a[1],s=nc((0,Sl.useState)(""),2),l=s[0],c=s[1],u=nc((0,Sl.useState)([]),2),p=u[0],d=u[1],h=nc((0,Sl.useState)(e.apiToken),2),f=h[0],m=(h[1],nc((0,Sl.useState)(!1),2)),g=m[0],v=(m[1],function(t){!1===g&&c(t.target.getAttribute("data-suggestion")),e.onSuggestionSelect(t.target.getAttribute("data-suggestion"),t.target.getAttribute("data-lat"),t.target.getAttribute("data-lng"),t.target.getAttribute("data-text"))});return Sl.createElement("ul",null,Sl.createElement(up,{style:{margin:0},id:e.inputId,onClick:e.inputOnClick,onBlur:e.inputOnBlur,onFocus:e.inputOnFocus,onChange:function(t){c(t.target.value);var r="https://api.mapbox.com/geocoding/v5/mapbox.places/"+l+".json?access_token="+f;if(e.country&&(r="https://api.mapbox.com/geocoding/v5/mapbox.places/"+l+".json?access_token="+f+"&country="+e.country),l.length>3)return fetch(r,{headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(e){n(!1),d(e.features)})).catch((function(e){n(!0),o("There was a problem retrieving data from mapbox, make sure are connnected to internet"),d([])}));n(!1),d([])},value:l,type:"text",placeholder:e.placeholder,label:e.label,clearButton:!0,floatingLabel:!0,outline:!0,onInputEmpty:e.onInputEmpty,onInput:function(e){console.log(e.target.value,"input")}}),Sl.createElement("span",null,Sl.createElement("div",{style:p.length>0||r?{display:"block"}:{display:"none"},onClick:function(){g?(c(""),d([])):d([])}},(0,sd.map)(p,(function(e,t){return Sl.createElement("div",{className:"react-mapbox-ac-suggestion",onClick:v,key:t,"data-suggestion":e.place_name,"data-lng":e.center[0],"data-lat":e.center[1],"data-text":e.text},e.place_name)})),r&&Sl.createElement("div",{className:"react-mapbox-ac-suggestion"},i))))},cd=function(e){var t=nc((0,Sl.useState)(!1),2),r=t[0],n=t[1],a=nc((0,Sl.useState)(""),2),i=a[0],o=a[1],s=nc((0,Sl.useState)(""),2),l=s[0],c=s[1],u=nc((0,Sl.useState)([]),2),p=u[0],d=u[1],h=nc((0,Sl.useState)(e.apiToken),2),f=h[0],m=(h[1],nc((0,Sl.useState)(!1),2)),g=m[0],v=(m[1],function(t){!1===g&&c(t.target.getAttribute("data-suggestion")),e.onSuggestionSelect(t.target.getAttribute("data-suggestion"),t.target.getAttribute("data-lat"),t.target.getAttribute("data-lng"),t.target.getAttribute("data-text"))});return Sl.createElement("ul",null,Sl.createElement(up,{style:{margin:0},id:e.inputId,onClick:e.inputOnClick,onBlur:e.inputOnBlur,onFocus:e.inputOnFocus,onChange:function(t){c(t.target.value);var r="https://api.mapbox.com/geocoding/v5/mapbox.places/"+l+".json?access_token="+f;if(e.country&&(r="https://api.mapbox.com/geocoding/v5/mapbox.places/"+l+".json?access_token="+f+"&country="+e.country),l.length>3)return fetch(r,{headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(e){n(!1),d(e.features)})).catch((function(e){n(!0),o("There was a problem retrieving places, make sure are connected to internet"),d([])}));n(!1),d([])},value:l,type:"text",placeholder:e.placeholder,label:e.label,clearButton:!0,floatingLabel:!0,outline:!0,onInputEmpty:e.onInputEmpty,onInput:function(e){console.log(e.target.value,"input")}}),Sl.createElement("span",null,Sl.createElement("div",{style:p.length>0||r?{display:"block"}:{display:"none"},onClick:function(){g?(c(""),d([])):d([])}},(0,sd.map)(p,(function(e,t){return Sl.createElement("div",{className:"react-mapbox-ac-suggestion",onClick:v,key:t,"data-suggestion":e.place_name,"data-lng":e.center[0],"data-lat":e.center[1],"data-text":e.text},e.place_name)})),r&&Sl.createElement("div",null,i))))},ud={API_URL:"http://167.172.76.19:3001",MAP_TOKEN:"pk.eyJ1IjoibW92ZXJzIiwiYSI6ImNrdDVnbXp5ZDA4NmcycXFzMWtuamxuODQifQ.DlegQcTzXkX0yGEIO45vDQ"};function pd(e){var t,r,n=e.children,a=nc((0,Sl.useState)(!1),2),i=a[0],o=a[1],s=((0,Sl.useRef)(null),nc((0,Sl.useState)(""),2)),l=s[0],c=s[1],u=nc((0,Sl.useState)({}),2),p=u[0],d=u[1],h=nc((0,Sl.useState)({}),2),f=h[0],m=h[1],g=nc((0,Sl.useState)(""),2),v=g[0],y=g[1],b=nc((0,Sl.useState)(""),2),_=b[0],x=b[1],w=nc((0,Sl.useState)(""),2),E=w[0],C=w[1],k=nc((0,Sl.useState)(Date.now()),2),T=k[0],S=k[1],P=nc((0,Sl.useState)(""),2),M=P[0],I=P[1],A=nc((0,Sl.useState)(""),2),O=(A[0],A[1]),z=nc((0,Sl.useState)(""),2),R=(z[0],z[1],Vl()),L=(Hl(ed),Hl(Jp)),D=(Hl(rd),(0,Sl.useRef)(null)),B=(0,Sl.useRef)(null),$=nc((0,Sl.useState)(-70.9),2),F=$[0],N=$[1],V=nc((0,Sl.useState)(42.35),2),j=V[0],U=V[1],q=nc((0,Sl.useState)(13),2),H=q[0];q[1],(0,Sl.useRef)(null);(0,Sl.useEffect)((function(){if(!B.current){B.current=new(od().Map)({container:D.current,style:"mapbox://styles/mapbox/streets-v11",center:[32.5825,.3476],zoom:H});new(ad())({accessToken:od().accessToken,mapboxgl:od()}),new(od().Marker)({}).setLngLat([F,j]).addTo(B.current);B.current.addControl(new(od().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0}))}}),[]);var G=[],W=new(od().Marker),X=function(){var e=Ju(tp().mark((function e(t,r,n,a){var i;return tp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t,r,n,a),N(n),U(r),d({lat:r,lng:n}),y(a),null!==G)for(console.log("marker found"),console.log(G),i=G.length-1;i>=0;i--)G[i].remove();return W.setLngLat([n,r]).addTo(B.current),G.push(W),O(n),e.next=11,B.current.flyTo({center:[n,r]});case 11:console.log("seting done");case 12:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),Z=function(){var e=Ju(tp().mark((function e(t,r,n,a){return tp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,r,n,a),N(n),U(r),m({lat:r,lng:n}),x(a),O(n),e.next=8,B.current.flyTo({center:[n,r]});case 8:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}();return Sl.createElement(Sl.Fragment,null,Sl.cloneElement(n,{onClick:function(e){o(!0)}}),Sl.createElement(ap,{className:"demo-popup",opened:i,onPopupClosed:function(){return o(!1)}},Sl.createElement(Lc,null,Sl.createElement(ou,{title:"Moving details"},Sl.createElement(nu,null,Sl.createElement(Xc,{iconIos:"f7:multiply",iconAurora:"f7:menu",iconMd:"material:close",popupClose:!0}))),Sl.createElement(uu,{form:!0,style:{marginTop:5,marginBottom:5}},Sl.createElement(up,{label:"Move type",type:"select",placeholder:"Please choose...",onChange:function(e){console.log(e.target.value),c(e.target.value)},required:!0,outline:!0},Sl.createElement("option",{value:"null"},"select move type..."),Sl.createElement("option",{value:"Within Kampala"},"Within Kampala"),Sl.createElement("option",{value:"Outside Kampala"},"Outside Kampala")),Sl.createElement(ld,(Ku(t={onSuggestionSelect:X,onInputEmpty:function(){console.log("am empty")},country:"ug",resetSearch:!1},"country","ug"),Ku(t,"apiToken",ud.MAP_TOKEN),Ku(t,"label","Shifting from"),Ku(t,"type","text"),Ku(t,"placeholder","Name of place"),Ku(t,"clearButton",!0),Ku(t,"floatingLabel",!0),Ku(t,"outline",!0),t)),Sl.createElement(cd,(Ku(r={onSuggestionSelect:Z,country:"ug",resetSearch:!1},"country","ug"),Ku(r,"apiToken",ud.MAP_TOKEN),Ku(r,"label","To"),Ku(r,"type","text"),Ku(r,"placeholder","shifting to?"),Ku(r,"clearButton",!0),Ku(r,"floatingLabel",!0),Ku(r,"outline",!0),Ku(r,"onInputEmpty",(function(){console.log("destination"),W.remove(),console.log("removed")})),r)),Sl.createElement(up,{label:"Schedule Date",type:"date",defaultValue:T,placeholder:"Please choose...",onInput:function(e){console.log(e.target.value),S(e.target.value)},required:!0,outline:!0}),Sl.createElement(up,{label:"Schedule Time",type:"time",placeholder:"Please choose...",onInput:function(e){console.log(e.target.value),I(e.target.value)},outline:!0,required:!0}),Sl.createElement(mu,{title:"Select shifting need",smartSelect:!0,smartSelectParams:{openIn:"popover",closeOnSelect:!0},outline:!0},Sl.createElement("select",{name:"shiftNeed",multiple:!1,floatingLabel:!0,outline:!0,onChange:function(e){C(e.target.value)}},Sl.createElement("option",{value:"choose"},"choose your need"),Sl.createElement("option",{value:"Few items"},"Few items"),Sl.createElement("option",{value:"1 room"},"1 room"),Sl.createElement("option",{value:"2 rooms"},"2 rooms"),Sl.createElement("option",{value:"3 rooms"},"3 rooms and above"),Sl.createElement("option",{value:"Office"},"Office"),Sl.createElement("option",{value:"Others"},"Others")))),Sl.createElement(Yu,{outline:!0},Sl.createElement("div",{ref:D,className:"map-container",style:{height:150,width:"100%"}})),Sl.createElement(hp,{position:"center-bottom",slot:"fixed",text:"Proceed",onClick:function(){return e={moveType:l,pickUpAddress:p,destinationAddress:f,pickUpAddressName:v,destinationAddressName:_,shiftNeed:E,scheduleDate:T,scheduleTime:M},Tn.dialog.preloader("Processing order"),void Tn.request({url:"".concat(ud.API_URL,"/client/v1/orders"),method:"POST",data:e,dataType:"json",headers:{"x-mover-token":L}}).then((function(e){Tn.dialog.close(),o(!1),Tn.dialog.alert(e.data.message),R({type:"moveOrders/add",payload:e.data.orderInfo})})).catch((function(e){Tn.dialog.close(),Tn.dialog.alert("something went wrong")}));var e},submit:!0},Sl.createElement(Fc,{ios:"f7:chevron_right_2",aurora:"f7:chevron_right_2",md:"material:forward"})))))}var dd=Ur({state:{API_URL:"/client/v1",token:localStorage.getItem("x-mover-token"),moveOrders:JSON.parse(localStorage.getItem("moveOrders")||"[]"),deliveryOrders:JSON.parse(localStorage.getItem("deliveryOrders")||"[]"),userLoc:[0,0]},getters:{token:function(e){return e.state.token},moveOrders:function(e){return e.state.moveOrders},API_URL:function(e){return e.state.API_URL}},actions:{setToken:function(e,t){e.state.token=t,localStorage.setItem("x-mover-token",t)},saveMoveOrder:function(e,t){var r=e.state.moveOrders;r.push(t),localStorage.setItem("moveOrders",JSON.stringify(r))},saveDeliveryOrder:function(e,t){var r=e.state.deliveryOrders;r.push(t),localStorage.setItem("deliveryOrders",JSON.stringify(r))}}});function hd(e){var t,r,n=e.children,a=nc((0,Sl.useState)(!1),2),i=a[0],o=a[1],s=((0,Sl.useRef)(null),nc((0,Sl.useState)(""),2)),l=s[0],c=(s[1],nc((0,Sl.useState)(""),2)),u=c[0],p=(c[1],nc((0,Sl.useState)(""),2)),d=p[0],h=(p[1],nc((0,Sl.useState)({}),2)),f=h[0],m=h[1],g=nc((0,Sl.useState)({}),2),v=g[0],y=g[1],b=nc((0,Sl.useState)(""),2),_=b[0],x=b[1],w=nc((0,Sl.useState)(""),2),E=w[0],C=w[1],k=Hl(Jp),T=(Hl(rd),Vl()),S=(0,Sl.useRef)(null),P=(0,Sl.useRef)(null),M=nc((0,Sl.useState)(-70.9),2),I=M[0],A=M[1],O=nc((0,Sl.useState)(42.35),2),z=O[0],R=O[1],L=nc((0,Sl.useState)(13),2),D=L[0];L[1],(0,Sl.useRef)(null);od().accessToken=ud.MAP_TOKEN,(0,Sl.useEffect)((function(){if(!P.current){P.current=new(od().Map)({container:S.current,style:"mapbox://styles/mapbox/streets-v11",center:[32.5825,.3476],zoom:D});new(ad())({accessToken:od().accessToken,mapboxgl:od()}),new(od().Marker)({}).setLngLat([I,z]).addTo(P.current);P.current.addControl(new(od().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0}))}}),[]);var B=[],$=new(od().Marker),F=function(){var e=Ju(tp().mark((function e(t,r,n,a){var i;return tp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t,r,n,a),A(n),R(r),x(a),m({lat:r,lng:n}),null!==B)for(console.log("marker found"),console.log(B),i=B.length-1;i>=0;i--)B[i].remove();return $.setLngLat([n,r]).addTo(P.current),B.push($),e.next=10,P.current.flyTo({center:[n,r]});case 10:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),N=function(){var e=Ju(tp().mark((function e(t,r,n,a){return tp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,r,n,a),A(n),R(r),C(a),y({lat:r,lng:n}),e.next=7,P.current.flyTo({center:[n,r]});case 7:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}();return Sl.createElement(Sl.Fragment,null,Sl.cloneElement(n,{onClick:function(e){o(!0)}}),Sl.createElement(ap,{className:"demo-popup",opened:i,onPopupClosed:function(){return o(!1)}},Sl.createElement(Lc,null,Sl.createElement(ou,{title:"Delivery details"},Sl.createElement(nu,null,Sl.createElement(Xc,{iconIos:"f7:multiply",iconAurora:"f7:menu",iconMd:"material:close",popupClose:!0}))),Sl.createElement(uu,{form:!0},Sl.createElement(up,{label:"What do you what us to deliver?",type:"text",floatingLabel:!0,outline:!0,placeholder:"eg, food, clothes, scholastics..."}),Sl.createElement(up,{label:"Delivery Instructions",type:"textarea",floatingLabel:!0,outline:!0,resizable:!0}),Sl.createElement(up,{label:"Recipient contant",floatingLabel:!0,outline:!0}),Sl.createElement(ld,(Ku(t={onSuggestionSelect:F,onInputEmpty:function(){console.log("am empty")},country:"ug",resetSearch:!1},"country","ug"),Ku(t,"apiToken",ud.MAP_TOKEN),Ku(t,"label","Shifting from"),Ku(t,"type","text"),Ku(t,"placeholder","Name of place"),Ku(t,"clearButton",!0),Ku(t,"floatingLabel",!0),Ku(t,"outline",!0),t)),Sl.createElement(cd,(Ku(r={onSuggestionSelect:N,country:"ug",resetSearch:!1},"country","ug"),Ku(r,"apiToken",ud.MAP_TOKEN),Ku(r,"label","To"),Ku(r,"type","text"),Ku(r,"placeholder","shifting to?"),Ku(r,"clearButton",!0),Ku(r,"floatingLabel",!0),Ku(r,"outline",!0),r))),Sl.createElement(Yu,{outline:!0},Sl.createElement("div",{ref:S,className:"map-container",style:{height:150,width:"100%"}})),Sl.createElement(hp,{position:"center-bottom",slot:"fixed",text:"Proceed",onClick:function(){var e={what:l,instructions:u,recipient:d,pickUpAddress:f,destinationAddress:v,pickUpAddressName:_,destinationAddressName:E};Tn.dialog.preloader("Processing order"),Tn.request({url:"".concat(ud.API_URL,"/client/v1/delivery"),method:"POST",data:e,dataType:"json",headers:{"x-mover-token":k}}).then((function(e){Tn.dialog.close(),o(!1),Tn.dialog.alert(e.data.message),T({type:"deliveryOrders/add",payload:e.data.orderInfo}),console.log("added to store")})).catch((function(e){Tn.dialog.close(),Tn.dialog.alert("something went wrong")}))},submit:!0},Sl.createElement(Fc,{ios:"f7:chevron_right_2",aurora:"f7:chevron_right_2",md:"material:forward"})))))}function fd(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function md(e,t){var r=["__proto__","constructor","prototype"];Object.keys(t).filter((function(e){return r.indexOf(e)<0})).forEach((function(r){void 0===e[r]?e[r]=t[r]:fd(t[r])&&fd(e[r])&&Object.keys(t[r]).length>0?t[r].__swiper__?e[r]=t[r]:md(e[r],t[r]):e[r]=t[r]}))}function gd(e){return void 0===e&&(e={}),e.navigation&&void 0===e.navigation.nextEl&&void 0===e.navigation.prevEl}function vd(e){return void 0===e&&(e={}),e.pagination&&void 0===e.pagination.el}function yd(e){return void 0===e&&(e={}),e.scrollbar&&void 0===e.scrollbar.el}function bd(e){void 0===e&&(e="");var t=e.split(" ").map((function(e){return e.trim()})).filter((function(e){return!!e})),r=[];return t.forEach((function(e){r.indexOf(e)<0&&r.push(e)})),r.join(" ")}var _d=["init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_freeModeMomentum","_freeModeMomentumRatio","_freeModeMomentumBounce","_freeModeMomentumBounceRatio","_freeModeMomentumVelocityRatio","_freeModeSticky","_freeModeMinimumVelocity","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","_slidesPerColumn","_slidesPerColumnFill","_slidesPerGroup","_slidesPerGroupSkip","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_watchSlidesVisibility","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopFillGroupWithBlank","loopPreventsSlide","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];function xd(e,t){var r=t.slidesPerView;if(t.breakpoints){var n=Wo.prototype.getBreakpoint(t.breakpoints),a=n in t.breakpoints?t.breakpoints[n]:void 0;a&&a.slidesPerView&&(r=a.slidesPerView)}var i=Math.ceil(parseFloat(t.loopedSlides||r,10));return(i+=t.loopAdditionalSlides)>e.length&&(i=e.length),i}function wd(e){var t=[];return Sl.Children.toArray(e).forEach((function(e){e.type&&"SwiperSlide"===e.type.displayName?t.push(e):e.props&&e.props.children&&wd(e.props.children).forEach((function(e){return t.push(e)}))})),t}function Ed(e){var t=[],r={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return Sl.Children.toArray(e).forEach((function(e){if(e.type&&"SwiperSlide"===e.type.displayName)t.push(e);else if(e.props&&e.props.slot&&r[e.props.slot])r[e.props.slot].push(e);else if(e.props&&e.props.children){var n=wd(e.props.children);n.length>0?n.forEach((function(e){return t.push(e)})):r["container-end"].push(e)}else r["container-end"].push(e)})),{slides:t,slots:r}}function Cd(e){var t,r,n,a,i,o=e.swiper,s=e.slides,l=e.passedParams,c=e.changedParams,u=e.nextEl,p=e.prevEl,d=e.scrollbarEl,h=e.paginationEl,f=c.filter((function(e){return"children"!==e&&"direction"!==e})),m=o.params,g=o.pagination,v=o.navigation,y=o.scrollbar,b=o.virtual,_=o.thumbs;c.includes("thumbs")&&l.thumbs&&l.thumbs.swiper&&m.thumbs&&!m.thumbs.swiper&&(t=!0),c.includes("controller")&&l.controller&&l.controller.control&&m.controller&&!m.controller.control&&(r=!0),c.includes("pagination")&&l.pagination&&(l.pagination.el||h)&&(m.pagination||!1===m.pagination)&&g&&!g.el&&(n=!0),c.includes("scrollbar")&&l.scrollbar&&(l.scrollbar.el||d)&&(m.scrollbar||!1===m.scrollbar)&&y&&!y.el&&(a=!0),c.includes("navigation")&&l.navigation&&(l.navigation.prevEl||p)&&(l.navigation.nextEl||u)&&(m.navigation||!1===m.navigation)&&v&&!v.prevEl&&!v.nextEl&&(i=!0);(f.forEach((function(e){if(fd(m[e])&&fd(l[e]))md(m[e],l[e]);else{var t=l[e];!0!==t&&!1!==t||"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e?m[e]=l[e]:!1===t&&o[r=e]&&(o[r].destroy(),"navigation"===r?(m[r].prevEl=void 0,m[r].nextEl=void 0,o[r].prevEl=void 0,o[r].nextEl=void 0):(m[r].el=void 0,o[r].el=void 0))}var r})),c.includes("children")&&b&&m.virtual.enabled?(b.slides=s,b.update(!0)):c.includes("children")&&o.lazy&&o.params.lazy.enabled&&o.lazy.load(),t)&&(_.init()&&_.update(!0));r&&(o.controller.control=m.controller.control),n&&(h&&(m.pagination.el=h),g.init(),g.render(),g.update()),a&&(d&&(m.scrollbar.el=d),y.init(),y.updateSize(),y.setTranslate()),i&&(u&&(m.navigation.nextEl=u),p&&(m.navigation.prevEl=p),v.init(),v.update()),c.includes("allowSlideNext")&&(o.allowSlideNext=l.allowSlideNext),c.includes("allowSlidePrev")&&(o.allowSlidePrev=l.allowSlidePrev),c.includes("direction")&&o.changeDirection(l.direction,!1),o.update()}function kd(e,t){return"undefined"==typeof window?(0,Sl.useEffect)(e,t):(0,Sl.useLayoutEffect)(e,t)}var Td=["className","tag","wrapperTag","children","onSwiper"];function Sd(){return(Sd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Pd=(0,Sl.forwardRef)((function(e,t){var r=void 0===e?{}:e,n=r.className,a=r.tag,i=void 0===a?"div":a,o=r.wrapperTag,s=void 0===o?"div":o,l=r.children,c=r.onSwiper,u=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(r,Td),p=!1,d=(0,Sl.useState)("swiper-container"),h=d[0],f=d[1],m=(0,Sl.useState)(null),g=m[0],v=m[1],y=(0,Sl.useState)(!1),b=y[0],_=y[1],x=(0,Sl.useRef)(!1),w=(0,Sl.useRef)(null),E=(0,Sl.useRef)(null),C=(0,Sl.useRef)(null),k=(0,Sl.useRef)(null),T=(0,Sl.useRef)(null),S=(0,Sl.useRef)(null),P=(0,Sl.useRef)(null),M=(0,Sl.useRef)(null),I=function(e){void 0===e&&(e={});var t={on:{}},r={},n={};md(t,Wo.defaults),md(t,Wo.extendedDefaults),t._emitClasses=!0,t.init=!1;var a={},i=_d.map((function(e){return e.replace(/_/,"")}));return Object.keys(e).forEach((function(o){i.indexOf(o)>=0?fd(e[o])?(t[o]={},n[o]={},md(t[o],e[o]),md(n[o],e[o])):(t[o]=e[o],n[o]=e[o]):0===o.search(/on[A-Z]/)&&"function"==typeof e[o]?r[""+o[2].toLowerCase()+o.substr(3)]=e[o]:a[o]=e[o]})),["navigation","pagination","scrollbar"].forEach((function(e){!0===t[e]&&(t[e]={}),!1===t[e]&&delete t[e]})),{params:t,passedParams:n,rest:a,events:r}}(u),A=I.params,O=I.passedParams,z=I.rest,R=I.events,L=Ed(l),D=L.slides,B=L.slots,$=function(){_(!b)};if(Object.assign(A.on,{_containerClasses:function(e,t){f(t)}}),!w.current&&(Object.assign(A.on,R),p=!0,E.current=function(e){return new Wo(e)}(A),E.current.loopCreate=function(){},E.current.loopDestroy=function(){},A.loop&&(E.current.loopedSlides=xd(D,A)),E.current.virtual&&E.current.params.virtual.enabled)){E.current.virtual.slides=D;var F={cache:!1,renderExternal:v,renderExternalUpdate:!1};md(E.current.params.virtual,F),md(E.current.originalParams.virtual,F)}E.current&&E.current.on("_beforeBreakpoint",$);return(0,Sl.useEffect)((function(){return function(){E.current&&E.current.off("_beforeBreakpoint",$)}})),(0,Sl.useEffect)((function(){!x.current&&E.current&&(E.current.emitSlidesClasses(),x.current=!0)})),kd((function(){if(t&&(t.current=w.current),w.current)return function(e,t){var r=e.el,n=e.nextEl,a=e.prevEl,i=e.paginationEl,o=e.scrollbarEl,s=e.swiper;gd(t)&&n&&a&&(s.params.navigation.nextEl=n,s.originalParams.navigation.nextEl=n,s.params.navigation.prevEl=a,s.originalParams.navigation.prevEl=a),vd(t)&&i&&(s.params.pagination.el=i,s.originalParams.pagination.el=i),yd(t)&&o&&(s.params.scrollbar.el=o,s.originalParams.scrollbar.el=o),s.init(r)}({el:w.current,nextEl:T.current,prevEl:S.current,paginationEl:P.current,scrollbarEl:M.current,swiper:E.current},A),c&&c(E.current),function(){E.current&&!E.current.destroyed&&E.current.destroy(!0,!1)}}),[]),kd((function(){!p&&R&&E.current&&Object.keys(R).forEach((function(e){E.current.on(e,R[e])}));var e=function(e,t,r,n){var a=[];if(!t)return a;var i=function(e){a.indexOf(e)<0&&a.push(e)},o=n.map((function(e){return e.key})),s=r.map((function(e){return e.key}));return o.join("")!==s.join("")&&i("children"),n.length!==r.length&&i("children"),_d.filter((function(e){return"_"===e[0]})).map((function(e){return e.replace(/_/,"")})).forEach((function(r){if(r in e&&r in t)if(fd(e[r])&&fd(t[r])){var n=Object.keys(e[r]),a=Object.keys(t[r]);n.length!==a.length?i(r):(n.forEach((function(n){e[r][n]!==t[r][n]&&i(r)})),a.forEach((function(n){e[r][n]!==t[r][n]&&i(r)})))}else e[r]!==t[r]&&i(r)})),a}(O,C.current,D,k.current);return C.current=O,k.current=D,e.length&&E.current&&!E.current.destroyed&&Cd({swiper:E.current,slides:D,passedParams:O,changedParams:e,nextEl:T.current,prevEl:S.current,scrollbarEl:M.current,paginationEl:P.current}),function(){R&&E.current&&Object.keys(R).forEach((function(e){E.current.off(e,R[e])}))}})),kd((function(){!function(e){!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())}(E.current)}),[g]),Sl.createElement(i,Sd({ref:w,className:bd(h+(n?" "+n:""))},z),B["container-start"],gd(A)&&Sl.createElement(Sl.Fragment,null,Sl.createElement("div",{ref:S,className:"swiper-button-prev"}),Sl.createElement("div",{ref:T,className:"swiper-button-next"})),yd(A)&&Sl.createElement("div",{ref:M,className:"swiper-scrollbar"}),vd(A)&&Sl.createElement("div",{ref:P,className:"swiper-pagination"}),Sl.createElement(s,{className:"swiper-wrapper"},B["wrapper-start"],A.virtual?function(e,t,r){var n;if(!r)return null;var a=e.isHorizontal()?((n={})[e.rtlTranslate?"right":"left"]=r.offset+"px",n):{top:r.offset+"px"};return t.filter((function(e,t){return t>=r.from&&t<=r.to})).map((function(t){return Sl.cloneElement(t,{swiper:e,style:a})}))}(E.current,D,g):!A.loop||E.current&&E.current.destroyed?D.map((function(e){return Sl.cloneElement(e,{swiper:E.current})})):function(e,t,r){var n=t.map((function(t,r){return Sl.cloneElement(t,{swiper:e,"data-swiper-slide-index":r})}));function a(e,t,n){return Sl.cloneElement(e,{key:e.key+"-duplicate-"+t+"-"+n,className:(e.props.className||"")+" "+r.slideDuplicateClass})}if(r.loopFillGroupWithBlank){var i=r.slidesPerGroup-n.length%r.slidesPerGroup;if(i!==r.slidesPerGroup)for(var o=0;o<i;o+=1){var s=Sl.createElement("div",{className:r.slideClass+" "+r.slideBlankClass});n.push(s)}}"auto"!==r.slidesPerView||r.loopedSlides||(r.loopedSlides=n.length);var l=xd(n,r),c=[],u=[];return n.forEach((function(e,t){t<l&&u.push(a(e,t,"prepend")),t<n.length&&t>=n.length-l&&c.push(a(e,t,"append"))})),e&&(e.loopedSlides=l),[].concat(c,n,u)}(E.current,D,A),B["wrapper-end"]),B["container-end"])}));Pd.displayName="Swiper";var Md=["tag","children","className","swiper","zoom","virtualIndex"];function Id(){return(Id=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Ad=(0,Sl.forwardRef)((function(e,t){var r,n=void 0===e?{}:e,a=n.tag,i=void 0===a?"div":a,o=n.children,s=n.className,l=void 0===s?"":s,c=n.swiper,u=n.zoom,p=n.virtualIndex,d=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(n,Md),h=(0,Sl.useRef)(null),f=(0,Sl.useState)("swiper-slide"),m=f[0],g=f[1];function v(e,t,r){t===h.current&&g(r)}kd((function(){if(t&&(t.current=h.current),h.current&&c){if(!c.destroyed)return c.on("_slideClass",v),function(){c&&c.off("_slideClass",v)};"swiper-slide"!==m&&g("swiper-slide")}})),kd((function(){c&&h.current&&g(c.getSlideClasses(h.current))}),[c]),"function"==typeof o&&(r={isActive:m.indexOf("swiper-slide-active")>=0||m.indexOf("swiper-slide-duplicate-active")>=0,isVisible:m.indexOf("swiper-slide-visible")>=0,isDuplicate:m.indexOf("swiper-slide-duplicate")>=0,isPrev:m.indexOf("swiper-slide-prev")>=0||m.indexOf("swiper-slide-duplicate-prev")>=0,isNext:m.indexOf("swiper-slide-next")>=0||m.indexOf("swiper-slide-duplicate-next")>=0});var y=function(){return"function"==typeof o?o(r):o};return Sl.createElement(i,Id({ref:h,className:bd(m+(l?" "+l:"")),"data-swiper-slide-index":p},d),u?Sl.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"==typeof u?u:void 0},y()):y())}));Ad.displayName="SwiperSlide",od().accessToken=ud.MAP_TOKEN;var Od=function(e){var t=e.f7router,r=(0,Sl.useRef)(null),n=(0,Sl.useRef)(null),a=nc((0,Sl.useState)(-70.9),2),i=(a[0],a[1],nc((0,Sl.useState)(42.35),2)),o=(i[0],i[1],nc((0,Sl.useState)(13),2)),s=o[0],l=(o[1],nc((0,Sl.useState)([0,0]),2)),c=(l[0],l[1],nc((0,Sl.useState)([]),2)),u=c[0],p=c[1],d=(Hl(Jp),Hl(Jp));(0,Sl.useEffect)((function(){if(!n.current){n.current=new(od().Map)({container:r.current,style:"mapbox://styles/mapbox/streets-v11",center:[32.5825,.3476],zoom:s}),n.current.addControl(new(od().AttributionControl)({customAttribution:"Movers"}));new(od().Marker)({}).setLngLat([32.5934603903443,.333278013367931]).addTo(n.current);Tn.request({url:"".concat(ud.MAP_TOKEN,"/api/v1/browse/attachments?role=banner"),method:"GET",headers:{"X-Access-Token":d},dataType:"json"}).then((function(e){p(e.data.items)}))}}),[]);var h=Vl();return Sl.createElement(Lc,{name:"home"},Sl.createElement(ou,{sliding:!1},Sl.createElement(Kc,null,Sl.createElement(Xc,{iconIos:"f7:menu",iconAurora:"f7:menu",iconMd:"material:menu",panelOpen:"left"})),Sl.createElement(eu,{sliding:!0},"Movers"),Sl.createElement(nu,null,Sl.createElement(Xc,{iconIos:"f7:square_arrow_right",iconAurora:"f7:square_arrow_right",iconMd:"material:exit_to_app",onClick:function(){!function(e){h({type:"moveOrders/deleteAll"}),h({type:"deliveryOrders/deleteAll"}),h({type:"logOut"}),Tn.dialog.alert("Thank you for using Movers"),e.refreshPage()}(t)}}))),Sl.createElement(Mu,null,Sl.createElement(Pd,null,u.length?u.map((function(e,t){var r=e._id;return Sl.createElement(Ad,{key:t},Sl.createElement("img",{src:"".concat("http://167.172.76.19:3001","/api/v1/attachment/").concat(r),style:{width:"100%",height:180}}))})):["banner1.jpg","banner2.jpg","banner3.jpeg"].map((function(e,t){return Sl.createElement(Ad,{key:t},Sl.createElement("img",{src:"../static/".concat(e),style:{width:"100%",height:180}}))})))),Sl.createElement(Tu,null,"Select Service"),Sl.createElement(Mu,null,Sl.createElement(Lu,null,Sl.createElement($u,null,Sl.createElement(Yu,{outline:!0,title:Sl.createElement("span",{style:{fontSize:15}},"Package Delivery"),content:Sl.createElement("center",null,Sl.createElement(hd,null,Sl.createElement("img",{src:"/static/icons/delivery-man.png",style:{width:48,height:48}}))),style:{height:150}})),Sl.createElement($u,null,Sl.createElement(Yu,{outline:!0,title:Sl.createElement("span",{style:{fontSize:15}},"Moving"),content:Sl.createElement("center",null,Sl.createElement(pd,null,Sl.createElement("img",{src:"/static/icons/truck.png",style:{width:48,height:48,alignItems:"center"}}))),style:{height:150}})))),Sl.createElement(Yu,{outline:!0},Sl.createElement("div",{ref:r,className:"map-container",style:{height:200}})))};function zd(){return(zd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Rd=(0,Sl.forwardRef)((function(e,t){var r=e.className,n=e.id,a=e.style,i=e.children,o=kn(e),s=(0,Sl.useRef)(null);(0,Sl.useImperativeHandle)(t,(function(){return{el:s.current}}));var l=wn(r,"login-screen-title",ic(e));return Sl.createElement("div",zd({id:n,style:a,className:l,ref:s},o),i)}));Rd.displayName="f7-login-screen-title";var Ld=Rd;function Dd(){return(Dd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Bd=(0,Sl.forwardRef)((function(e,t){var r=e.className,n=e.id,a=e.style,i=e.children,o=e.title,s=e.text,l=e.tabLink,c=e.tabLinkActive,u=e.link,p=e.href,d=e.target,h=kn(e),f=(0,Sl.useRef)(null),m=(0,Sl.useRef)(null);(0,Sl.useImperativeHandle)(t,(function(){return{el:f.current}})),Dc(m,e),Uc(m,e);var g=Dd({href:"boolean"==typeof u&&"boolean"==typeof p?"#":u||p,target:d,"data-tab":vn(l)&&l},oc(e),lc(e)),v=wn(Dd({"list-button":!0,"tab-link":l||""===l,"tab-link-active":c},ic(e),sc(e),cc(e)));return Sl.createElement("li",Dd({id:n,style:a,className:r,ref:f},h),Sl.createElement("a",Dd({className:v},g,{onClick:function(t){Cn(e,"click",t)},ref:m}),o,s,i))}));Bd.displayName="f7-list-button";var $d=Bd;function Fd(){return(Fd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Nd=(0,Sl.forwardRef)((function(e,t){var r=e.className,n=e.id,a=e.style,i=e.children,o=kn(e),s=(0,Sl.useRef)(null);(0,Sl.useImperativeHandle)(t,(function(){return{el:s.current}}));var l=wn(r,"block-footer",ic(e));return Sl.createElement("div",Fd({id:n,style:a,className:l,ref:s},o),i)}));Nd.displayName="f7-block-footer";var Vd=Nd,jd=function(e){var t=e.f7router,r=nc((0,Sl.useState)(""),2),n=r[0],a=r[1],i=nc((0,Sl.useState)(""),2),o=i[0],s=i[1],l=Vl(),c=(Hl(ed),Hl(Kp),function e(){Tn.dialog.prompt("Please enter the 6-digit code sent to ".concat(o),"Confirm",(function(r){Tn.request.json("".concat(ud.API_URL,"/client/v1/auth/verify/").concat(o,"/").concat(r)).then((function(e){var r=e.data.token;l({type:"token/setToken",payload:r}),l({type:"user/addInfo",payload:e.data.userInfo}),t.refreshPage()})).catch((function(t){Tn.dialog.alert("Invalid code"),e()}))}))});return Sl.createElement(Lc,{noToolbar:!0,noNavbar:!0,noSwipeback:!0,loginScreen:!0},Sl.createElement(Ld,null,"Movers"),Sl.createElement(uu,{form:!0},Sl.createElement(up,{label:"Username",type:"text",placeholder:"John Doe",value:n,onInput:function(e){a(e.target.value)}}),Sl.createElement(up,{label:"Phone",type:"text",placeholder:"0701964032",value:o,onInput:function(e){s(e.target.value)}})),Sl.createElement(uu,null,Sl.createElement($d,{onClick:function(){Tn.dialog.confirm("Username: ".concat(n,"<br>Phone: ").concat(o),(function(e){e&&Tn.request.post("".concat(ud.API_URL,"/client/v1/auth"),{username:n,phone:o}).then((function(e){var r=JSON.parse(e.data);r.exist?(l({type:"user/addInfo",payload:r.userInfo}),l({type:"serverDeliveryOrders/add",payload:r.deliveryOrders}),l({type:"serverMoveOrders/add",payload:r.moveOrders}),l({type:"token/setToken",payload:r.token}),t.refreshPage()):c()})).catch((function(e){Tn.dialog.alert("Invalid phone or username")}))}))}},"Sign In"),Sl.createElement(Vd,null,"© 2021 movers")))};var Ud=[{path:"/",async:function(e){var t=e.resolve;function r(e){t({component:e})}r(Xp.getState().token?Od:jd)}},{path:"/about/",component:Iu},{path:"/profile/",component:function(){Vl();var e=Hl(td);return Hl(Kp),Hl(ed),Sl.createElement(Lc,{name:"profile"},Sl.createElement(ou,{title:"Profile"}),e?Sl.createElement(Yu,null,Sl.createElement(uu,{mediaList:!0,noHairlinesBetween:!0},Sl.createElement(mu,{link:"#",title:e.username,subtitle:e.phone},Sl.createElement("img",{slot:"media",src:"https://cdn.framework7.io/placeholder/fashion-88x88-2.jpg",width:"44",style:{borderRadius:"50%"}})))):Sl.createElement(Yu,null,Sl.createElement(uu,{mediaList:!0,noHairlinesBetween:!0},Sl.createElement(mu,{link:"#",title:"Username",subtitle:"phone number"},Sl.createElement("img",{slot:"media",src:"https://cdn.framework7.io/placeholder/fashion-88x88-2.jpg",width:"44",style:{borderRadius:"50%"}})))))}},{path:"/history/",component:function(){var e=Hl(Kp),t=Hl(Qp),r=e.concat(t);return Sl.createElement(Lc,{name:"history"},Sl.createElement(ou,{title:"History"}),Sl.createElement(uu,{mediaList:!0},r.length?r.map((function(e,t){return Sl.createElement(mu,{link:"#",title:e.moveType||e.what,after:e.status,subtitle:"".concat(e.pickUpAddressName," to ").concat(e.destinationAddressName),text:"".concat(e.shiftNeed||"Date","    ").concat(e.scheduleDate||e.date,"  ").concat(e.scheduleTime),key:t},Sl.createElement(Xc,{slot:"media"},e.moveType?Sl.createElement("span",{class:"material-icons",style:{width:48,height:48,fontSize:40}},"local_shipping"):Sl.createElement("span",{class:"material-icons",style:{width:48,height:48,fontSize:40}},"local_post_office")))})):Sl.createElement(Tu,null,"No orders yet")))}},{path:"/request-and-load/user/:userId/",async:function(e){var t=e.router,r=e.to,n=e.resolve,a=t.app;a.preloader.show();r.params.userId;setTimeout((function(){a.preloader.hide(),n({component:Au},{props:{user:{firstName:"Vladimir",lastName:"Kharlampidi",about:"Hello, i am creator of Framework7! Hope you like it!",links:[{title:"Framework7 Website",url:"http://framework7.io"},{title:"Framework7 Forum",url:"http://forum.framework7.io"}]}}})}),1e3)}},{path:"(.*)",component:Ou}],qd=r(751);qd.Manager,qd.Socket;var Hd={connect:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"http://167.172.76.19:3001";this.f7=e;var n=e.socket=qd(r,{reconnectionAttempts:10,reconnectionDelay:5e3,reconnectionDelayMax:5e3,auth:{token:t}});return n},disconnect:function(){this.client.end()}},Gd=function(){var e=Hl(Jp),t=(Hl(Kp),Hl(Qp),Hl(Yp),Vl()),r=nc((0,Sl.useState)(""),2),n=(r[0],r[1],nc((0,Sl.useState)(""),2)),a=(n[0],n[1],N());(0,Sl.useEffect)((function(){if(e){var r=Hd.connect(Tn,e);r.on("notifications",(function(e){})),r.on("doc",(function(e){})),r.on("test",(function(e){t({type:"updateStatus",payload:{id:e.order,status:e.status}}),Tn.dialog.alert("Your Order has been approved")}))}}),[]);var i={name:"Movers",theme:"auto",id:"com.koodeyo.movers",store:dd,routes:Ud,input:{scrollIntoViewOnFocus:a.cordova&&!a.electron,scrollIntoViewCentered:a.cordova&&!a.electron},statusbar:{iosOverlaysWebView:!0,androidOverlaysWebView:!1}};return Bn((function(){Tn.device.cordova&&Eu.init(Tn)})),Sl.createElement(mc,Dl({},i,{themeDark:!1}),Sl.createElement(bc,{left:!0,cover:!0},Sl.createElement(kc,null,Sl.createElement(Lc,null,Sl.createElement(ou,{title:"About us"}),Sl.createElement(uu,null,Sl.createElement(mu,null,"We are a domestic moving company. Our services also include package delivery and long-distance relocations. We cover several cities of our nation Uganda. If you’re in need of a moving quote, please feel free to contact us anytime. We can schedule an appointment to do an in-home walkthrough or virtual survey. Our goal is that you’re pleased with the outcome of your move. Thank you for choosing us."))))),Sl.createElement(yu,{tabs:!0,className:"safe-areas"},Sl.createElement(xu,{tabbar:!0,labels:!0,bottom:!0},Sl.createElement(Xc,{tabLink:"#view-home",tabLinkActive:!0,iconIos:"f7:house_fill",iconAurora:"f7:house_fill",iconMd:"material:home",text:"Home"}),Sl.createElement(Xc,{tabLink:"#view-history",iconIos:"f7:square_list_fill",iconAurora:"f7:square_list_fill",iconMd:"material:view_list",text:"History"}),Sl.createElement(Xc,{tabLink:"#view-profile",iconIos:"f7:person_fill",iconAurora:"f7:person_fill",iconMd:"material:perm_identity",text:"Profile"})),Sl.createElement(kc,{id:"view-home",main:!0,tab:!0,tabActive:!0,url:"/"}),Sl.createElement(kc,{id:"view-history",name:"history",tab:!0,url:"/history/"}),Sl.createElement(kc,{id:"view-profile",name:"profile",tab:!0,url:"/profile/"})))};Tl.use(Vn),Tl.request.setup({headers:{Authorization:"sometokenvalue"}}),Pl.render(Sl.createElement(Ll,{store:Xp},Sl.createElement(ec,{loading:null,persistor:Zp},Sl.createElement(Gd,null))),document.getElementById("app"))}()}();
//# sourceMappingURL=app.js.map